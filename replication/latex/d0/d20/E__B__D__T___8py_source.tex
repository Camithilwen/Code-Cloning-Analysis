\doxysection{E\+\_\+\+B\+\_\+\+D\+\_\+\+T\+\_\+.\+py}
\hypertarget{E__B__D__T___8py_source}{}\label{E__B__D__T___8py_source}\index{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/fontTools/ttLib/tables/E\_B\_D\_T\_.py@{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/fontTools/ttLib/tables/E\_B\_D\_T\_.py}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00001}\mbox{\hyperlink{namespacefontTools_1_1ttLib_1_1tables_1_1E__B__D__T__}{00001}}\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacefontTools_1_1misc}{fontTools.misc}}\ \textcolor{keyword}{import}\ sstruct}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00002}00002\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacefontTools_1_1misc_1_1textTools}{fontTools.misc.textTools}}\ \textcolor{keyword}{import}\ (}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00003}00003\ \ \ \ \ bytechr,}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00004}00004\ \ \ \ \ byteord,}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00005}00005\ \ \ \ \ bytesjoin,}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00006}00006\ \ \ \ \ strjoin,}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00007}00007\ \ \ \ \ safeEval,}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00008}00008\ \ \ \ \ readHex,}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00009}00009\ \ \ \ \ hexStr,}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00010}00010\ \ \ \ \ deHexStr,}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00011}00011\ )}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00012}00012\ \textcolor{keyword}{from}\ .BitmapGlyphMetrics\ \textcolor{keyword}{import}\ (}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00013}00013\ \ \ \ \ BigGlyphMetrics,}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00014}00014\ \ \ \ \ bigGlyphMetricsFormat,}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00015}00015\ \ \ \ \ SmallGlyphMetrics,}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00016}00016\ \ \ \ \ smallGlyphMetricsFormat,}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00017}00017\ )}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00018}00018\ \textcolor{keyword}{from}\ .\ \textcolor{keyword}{import}\ DefaultTable}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00019}00019\ \textcolor{keyword}{import}\ itertools}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00020}00020\ \textcolor{keyword}{import}\ os}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00021}00021\ \textcolor{keyword}{import}\ struct}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00022}00022\ \textcolor{keyword}{import}\ logging}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00024}00024\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00025}00025\ log\ =\ logging.getLogger(\_\_name\_\_)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00026}00026\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00027}00027\ ebdtTableVersionFormat\ =\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00028}00028\ \textcolor{stringliteral}{\ \ \ \ >\ \#\ big\ endian}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00029}00029\ \textcolor{stringliteral}{\ \ \ \ version:\ 16.16F}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00030}00030\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00031}00031\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00032}00032\ ebdtComponentFormat\ =\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00033}00033\ \textcolor{stringliteral}{\ \ \ \ >\ \#\ big\ endian}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00034}00034\ \textcolor{stringliteral}{\ \ \ \ glyphCode:\ H}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00035}00035\ \textcolor{stringliteral}{\ \ \ \ xOffset:\ \ \ b}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00036}00036\ \textcolor{stringliteral}{\ \ \ \ yOffset:\ \ \ b}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00037}00037\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00038}00038\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00039}00039\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00040}\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1table__E__B__D__T__}{00040}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1table__E__B__D__T__}{table\_E\_B\_D\_T\_}}(\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1DefaultTable_1_1DefaultTable}{DefaultTable.DefaultTable}}):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00041}00041\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Embedded\ Bitmap\ Data\ table}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00042}00042\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00043}00043\ \textcolor{stringliteral}{\ \ \ \ The\ \`{}\`{}EBDT\`{}\`{}\ table\ contains\ monochrome\ or\ grayscale\ bitmap\ data\ for}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00044}00044\ \textcolor{stringliteral}{\ \ \ \ glyphs.\ It\ must\ be\ used\ in\ concert\ with\ the\ \`{}\`{}EBLC\`{}\`{}\ table.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00045}00045\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00046}00046\ \textcolor{stringliteral}{\ \ \ \ See\ also\ https://learn.microsoft.com/en-\/us/typography/opentype/spec/ebdt}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00047}00047\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00048}00048\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00049}00049\ \ \ \ \ \textcolor{comment}{\#\ Keep\ a\ reference\ to\ the\ name\ of\ the\ data\ locator\ table.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00050}00050\ \ \ \ \ locatorName\ =\ \textcolor{stringliteral}{"{}EBLC"{}}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00051}00051\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00052}00052\ \ \ \ \ \textcolor{comment}{\#\ This\ method\ can\ be\ overridden\ in\ subclasses\ to\ support\ new\ formats}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00053}00053\ \ \ \ \ \textcolor{comment}{\#\ without\ changing\ the\ other\ implementation.\ Also\ can\ be\ used\ as\ a}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00054}00054\ \ \ \ \ \textcolor{comment}{\#\ convenience\ method\ for\ coverting\ a\ font\ file\ to\ an\ alternative\ format.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00055}00055\ \ \ \ \ \textcolor{keyword}{def\ }getImageFormatClass(self,\ imageFormat):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00056}00056\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ebdt\_bitmap\_classes[imageFormat]}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00057}00057\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00058}00058\ \ \ \ \ \textcolor{keyword}{def\ }decompile(self,\ data,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00059}00059\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Get\ the\ version\ but\ don't\ advance\ the\ slice.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00060}00060\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Most\ of\ the\ lookup\ for\ this\ table\ is\ done\ relative}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00061}00061\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ to\ the\ begining\ so\ slice\ by\ the\ offsets\ provided}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00062}00062\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ in\ the\ EBLC\ table.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00063}00063\ \ \ \ \ \ \ \ \ sstruct.unpack2(ebdtTableVersionFormat,\ data,\ self)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00064}00064\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00065}00065\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Keep\ a\ dict\ of\ glyphs\ that\ have\ been\ seen\ so\ they\ aren't\ remade.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00066}00066\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ This\ dict\ maps\ intervals\ of\ data\ to\ the\ BitmapGlyph.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00067}00067\ \ \ \ \ \ \ \ \ glyphDict\ =\ \{\}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00068}00068\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00069}00069\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Pull\ out\ the\ EBLC\ table\ and\ loop\ through\ glyphs.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00070}00070\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ A\ strike\ is\ a\ concept\ that\ spans\ both\ tables.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00071}00071\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ actual\ bitmap\ data\ is\ stored\ in\ the\ EBDT.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00072}00072\ \ \ \ \ \ \ \ \ locator\ =\ ttFont[self.\_\_class\_\_.locatorName]}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00073}00073\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1table__E__B__D__T___a57f37f52b062a2f7bde107d958f30539}{strikeData}}\ =\ []}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00074}00074\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ curStrike\ \textcolor{keywordflow}{in}\ locator.strikes:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00075}00075\ \ \ \ \ \ \ \ \ \ \ \ \ bitmapGlyphDict\ =\ \{\}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00076}00076\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1table__E__B__D__T___a57f37f52b062a2f7bde107d958f30539}{strikeData}}.append(bitmapGlyphDict)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00077}00077\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ indexSubTable\ \textcolor{keywordflow}{in}\ curStrike.indexSubTables:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00078}00078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dataIter\ =\ zip(indexSubTable.names,\ indexSubTable.locations)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00079}00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ curName,\ curLoc\ \textcolor{keywordflow}{in}\ dataIter:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00080}00080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Don't\ create\ duplicate\ data\ entries\ for\ the\ same\ glyphs.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00081}00081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Instead\ just\ use\ the\ structures\ that\ already\ exist\ if\ they\ exist.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00082}00082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ curLoc\ \textcolor{keywordflow}{in}\ glyphDict:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00083}00083\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ curGlyph\ =\ glyphDict[curLoc]}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00084}00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00085}00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ curGlyphData\ =\ data[slice(*curLoc)]}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00086}00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ imageFormatClass\ =\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1table__E__B__D__T___abf1a1b4e7a4783de1dfe957fcb24c0af}{getImageFormatClass}}(}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00087}00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ indexSubTable.imageFormat}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00088}00088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00089}00089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ curGlyph\ =\ imageFormatClass(curGlyphData,\ ttFont)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00090}00090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ glyphDict[curLoc]\ =\ curGlyph}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00091}00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bitmapGlyphDict[curName]\ =\ curGlyph}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00092}00092\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00093}00093\ \ \ \ \ \textcolor{keyword}{def\ }compile(self,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00094}00094\ \ \ \ \ \ \ \ \ dataList\ =\ []}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00095}00095\ \ \ \ \ \ \ \ \ dataList.append(sstruct.pack(ebdtTableVersionFormat,\ self))}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00096}00096\ \ \ \ \ \ \ \ \ dataSize\ =\ len(dataList[0])}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00097}00097\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00098}00098\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Keep\ a\ dict\ of\ glyphs\ that\ have\ been\ seen\ so\ they\ aren't\ remade.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00099}00099\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ This\ dict\ maps\ the\ id\ of\ the\ BitmapGlyph\ to\ the\ interval}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00100}00100\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ in\ the\ data.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00101}00101\ \ \ \ \ \ \ \ \ glyphDict\ =\ \{\}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00102}00102\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00103}00103\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Go\ through\ the\ bitmap\ glyph\ data.\ Just\ in\ case\ the\ data\ for\ a\ glyph}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00104}00104\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ changed\ the\ size\ metrics\ should\ be\ recalculated.\ There\ are\ a\ variety}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00105}00105\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ of\ formats\ and\ they\ get\ stored\ in\ the\ EBLC\ table.\ That\ is\ why}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00106}00106\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ recalculation\ is\ defered\ to\ the\ EblcIndexSubTable\ class\ and\ just}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00107}00107\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ pass\ what\ is\ known\ about\ bitmap\ glyphs\ from\ this\ particular\ table.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00108}00108\ \ \ \ \ \ \ \ \ locator\ =\ ttFont[self.\_\_class\_\_.locatorName]}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00109}00109\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ curStrike,\ curGlyphDict\ \textcolor{keywordflow}{in}\ zip(locator.strikes,\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1table__E__B__D__T___a57f37f52b062a2f7bde107d958f30539}{strikeData}}):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00110}00110\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ curIndexSubTable\ \textcolor{keywordflow}{in}\ curStrike.indexSubTables:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00111}00111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dataLocations\ =\ []}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00112}00112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ curName\ \textcolor{keywordflow}{in}\ curIndexSubTable.names:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00113}00113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Handle\ the\ data\ placement\ based\ on\ seeing\ the\ glyph\ or\ not.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00114}00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Just\ save\ a\ reference\ to\ the\ location\ if\ the\ glyph\ has\ already}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00115}00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ been\ saved\ in\ compile.\ This\ code\ assumes\ that\ glyphs\ will\ only}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00116}00116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ be\ referenced\ multiple\ times\ from\ indexFormat5.\ By\ luck\ the}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00117}00117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ code\ may\ still\ work\ when\ referencing\ poorly\ ordered\ fonts\ with}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00118}00118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ duplicate\ references.\ If\ there\ is\ a\ font\ that\ is\ unlucky\ the}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00119}00119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ respective\ compile\ methods\ for\ the\ indexSubTables\ will\ fail}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00120}00120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ their\ assertions.\ All\ fonts\ seem\ to\ follow\ this\ assumption.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00121}00121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ More\ complicated\ packing\ may\ be\ needed\ if\ a\ counter-\/font\ exists.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00122}00122\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ glyph\ =\ curGlyphDict[curName]}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00123}00123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ objectId\ =\ id(glyph)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00124}00124\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ objectId\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ glyphDict:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00125}00125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data\ =\ glyph.compile(ttFont)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00126}00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data\ =\ curIndexSubTable.padBitmapData(data)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00127}00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ startByte\ =\ dataSize}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00128}00128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dataSize\ +=\ len(data)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00129}00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ endByte\ =\ dataSize}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00130}00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dataList.append(data)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00131}00131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dataLoc\ =\ (startByte,\ endByte)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00132}00132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ glyphDict[objectId]\ =\ dataLoc}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00133}00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00134}00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dataLoc\ =\ glyphDict[objectId]}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00135}00135\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dataLocations.append(dataLoc)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00136}00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Just\ use\ the\ new\ data\ locations\ in\ the\ indexSubTable.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00137}00137\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ respective\ compile\ implementations\ will\ take\ care}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00138}00138\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ of\ any\ of\ the\ problems\ in\ the\ convertion\ that\ may\ arise.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00139}00139\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ curIndexSubTable.locations\ =\ dataLocations}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00140}00140\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00141}00141\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ bytesjoin(dataList)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00142}00142\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00143}00143\ \ \ \ \ \textcolor{keyword}{def\ }toXML(self,\ writer,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00144}00144\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ When\ exporting\ to\ XML\ if\ one\ of\ the\ data\ export\ formats}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00145}00145\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ requires\ metrics\ then\ those\ metrics\ may\ be\ in\ the\ locator.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00146}00146\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ In\ this\ case\ populate\ the\ bitmaps\ with\ "{}export\ metrics"{}.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00147}00147\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ttFont.bitmapGlyphDataFormat\ \textcolor{keywordflow}{in}\ (\textcolor{stringliteral}{"{}row"{}},\ \textcolor{stringliteral}{"{}bitwise"{}}):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00148}00148\ \ \ \ \ \ \ \ \ \ \ \ \ locator\ =\ ttFont[self.\_\_class\_\_.locatorName]}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00149}00149\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ curStrike,\ curGlyphDict\ \textcolor{keywordflow}{in}\ zip(locator.strikes,\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1table__E__B__D__T___a57f37f52b062a2f7bde107d958f30539}{strikeData}}):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00150}00150\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ curIndexSubTable\ \textcolor{keywordflow}{in}\ curStrike.indexSubTables:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00151}00151\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ curName\ \textcolor{keywordflow}{in}\ curIndexSubTable.names:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00152}00152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ glyph\ =\ curGlyphDict[curName]}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00153}00153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ I'm\ not\ sure\ which\ metrics\ have\ priority\ here.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00154}00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ For\ now\ if\ both\ metrics\ exist\ go\ with\ glyph\ metrics.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00155}00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ hasattr(glyph,\ \textcolor{stringliteral}{"{}metrics"{}}):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00156}00156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ glyph.exportMetrics\ =\ glyph.metrics}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00157}00157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00158}00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ glyph.exportMetrics\ =\ curIndexSubTable.metrics}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00159}00159\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ glyph.exportBitDepth\ =\ curStrike.bitmapSizeTable.bitDepth}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00160}00160\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00161}00161\ \ \ \ \ \ \ \ \ writer.simpletag(\textcolor{stringliteral}{"{}header"{}},\ [(\textcolor{stringliteral}{"{}version"{}},\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1table__E__B__D__T___a55b0021ea9a43a5329ce9a9a1e385096}{version}})])}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00162}00162\ \ \ \ \ \ \ \ \ writer.newline()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00163}00163\ \ \ \ \ \ \ \ \ locator\ =\ ttFont[self.\_\_class\_\_.locatorName]}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00164}00164\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ strikeIndex,\ bitmapGlyphDict\ \textcolor{keywordflow}{in}\ enumerate(self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1table__E__B__D__T___a57f37f52b062a2f7bde107d958f30539}{strikeData}}):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00165}00165\ \ \ \ \ \ \ \ \ \ \ \ \ writer.begintag(\textcolor{stringliteral}{"{}strikedata"{}},\ [(\textcolor{stringliteral}{"{}index"{}},\ strikeIndex)])}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00166}00166\ \ \ \ \ \ \ \ \ \ \ \ \ writer.newline()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00167}00167\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ curName,\ curBitmap\ \textcolor{keywordflow}{in}\ bitmapGlyphDict.items():}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00168}00168\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ curBitmap.toXML(strikeIndex,\ curName,\ writer,\ ttFont)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00169}00169\ \ \ \ \ \ \ \ \ \ \ \ \ writer.endtag(\textcolor{stringliteral}{"{}strikedata"{}})}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00170}00170\ \ \ \ \ \ \ \ \ \ \ \ \ writer.newline()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00171}00171\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00172}00172\ \ \ \ \ \textcolor{keyword}{def\ }fromXML(self,\ name,\ attrs,\ content,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00173}00173\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ name\ ==\ \textcolor{stringliteral}{"{}header"{}}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00174}00174\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1table__E__B__D__T___a55b0021ea9a43a5329ce9a9a1e385096}{version}}\ =\ safeEval(attrs[\textcolor{stringliteral}{"{}version"{}}])}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00175}00175\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ name\ ==\ \textcolor{stringliteral}{"{}strikedata"{}}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00176}00176\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ hasattr(self,\ \textcolor{stringliteral}{"{}strikeData"{}}):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00177}00177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1table__E__B__D__T___a57f37f52b062a2f7bde107d958f30539}{strikeData}}\ =\ []}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00178}00178\ \ \ \ \ \ \ \ \ \ \ \ \ strikeIndex\ =\ safeEval(attrs[\textcolor{stringliteral}{"{}index"{}}])}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00179}00179\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00180}00180\ \ \ \ \ \ \ \ \ \ \ \ \ bitmapGlyphDict\ =\ \{\}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00181}00181\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ element\ \textcolor{keywordflow}{in}\ content:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00182}00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ isinstance(element,\ tuple):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00183}00183\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00184}00184\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ name,\ attrs,\ content\ =\ element}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00185}00185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ name[4:].startswith(\_bitmapGlyphSubclassPrefix[4:]):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00186}00186\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ imageFormat\ =\ safeEval(name[len(\_bitmapGlyphSubclassPrefix)\ :])}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00187}00187\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ glyphName\ =\ attrs[\textcolor{stringliteral}{"{}name"{}}]}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00188}00188\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ imageFormatClass\ =\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1table__E__B__D__T___abf1a1b4e7a4783de1dfe957fcb24c0af}{getImageFormatClass}}(imageFormat)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00189}00189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ curGlyph\ =\ imageFormatClass(\textcolor{keywordtype}{None},\ \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00190}00190\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ curGlyph.fromXML(name,\ attrs,\ content,\ ttFont)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00191}00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ glyphName\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ bitmapGlyphDict,\ (}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00192}00192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Duplicate\ glyphs\ with\ the\ same\ name\ '\%s'\ in\ the\ same\ strike."{}}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00193}00193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \%\ glyphName}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00194}00194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00195}00195\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bitmapGlyphDict[glyphName]\ =\ curGlyph}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00196}00196\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00197}00197\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ log.warning(\textcolor{stringliteral}{"{}\%s\ being\ ignored\ by\ \%s"{}},\ name,\ self.\_\_class\_\_.\_\_name\_\_)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00198}00198\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00199}00199\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Grow\ the\ strike\ data\ array\ to\ the\ appropriate\ size.\ The\ XML}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00200}00200\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ format\ allows\ the\ strike\ index\ value\ to\ be\ out\ of\ order.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00201}00201\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ strikeIndex\ >=\ len(self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1table__E__B__D__T___a57f37f52b062a2f7bde107d958f30539}{strikeData}}):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00202}00202\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1table__E__B__D__T___a57f37f52b062a2f7bde107d958f30539}{strikeData}}\ +=\ [\textcolor{keywordtype}{None}]\ *\ (strikeIndex\ +\ 1\ -\/\ len(self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1table__E__B__D__T___a57f37f52b062a2f7bde107d958f30539}{strikeData}}))}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00203}00203\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ (}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00204}00204\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1table__E__B__D__T___a57f37f52b062a2f7bde107d958f30539}{strikeData}}[strikeIndex]\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00205}00205\ \ \ \ \ \ \ \ \ \ \ \ \ ),\ \textcolor{stringliteral}{"{}Duplicate\ strike\ EBDT\ indices."{}}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00206}00206\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1table__E__B__D__T___a57f37f52b062a2f7bde107d958f30539}{strikeData}}[strikeIndex]\ =\ bitmapGlyphDict}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00207}00207\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00208}00208\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00209}\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1EbdtComponent}{00209}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1EbdtComponent}{EbdtComponent}}(object):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00210}00210\ \ \ \ \ \textcolor{keyword}{def\ }toXML(self,\ writer,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00211}00211\ \ \ \ \ \ \ \ \ writer.begintag(\textcolor{stringliteral}{"{}ebdtComponent"{}},\ [(\textcolor{stringliteral}{"{}name"{}},\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1EbdtComponent_aa08ccfccd4c87772bb5f767c03dcd918}{name}})])}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00212}00212\ \ \ \ \ \ \ \ \ writer.newline()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00213}00213\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ componentName\ \textcolor{keywordflow}{in}\ sstruct.getformat(ebdtComponentFormat)[1][1:]:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00214}00214\ \ \ \ \ \ \ \ \ \ \ \ \ writer.simpletag(componentName,\ value=getattr(self,\ componentName))}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00215}00215\ \ \ \ \ \ \ \ \ \ \ \ \ writer.newline()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00216}00216\ \ \ \ \ \ \ \ \ writer.endtag(\textcolor{stringliteral}{"{}ebdtComponent"{}})}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00217}00217\ \ \ \ \ \ \ \ \ writer.newline()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00218}00218\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00219}00219\ \ \ \ \ \textcolor{keyword}{def\ }fromXML(self,\ name,\ attrs,\ content,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00220}00220\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1EbdtComponent_aa08ccfccd4c87772bb5f767c03dcd918}{name}}\ =\ attrs[\textcolor{stringliteral}{"{}name"{}}]}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00221}00221\ \ \ \ \ \ \ \ \ componentNames\ =\ set(sstruct.getformat(ebdtComponentFormat)[1][1:])}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00222}00222\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ element\ \textcolor{keywordflow}{in}\ content:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00223}00223\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ isinstance(element,\ tuple):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00224}00224\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00225}00225\ \ \ \ \ \ \ \ \ \ \ \ \ name,\ attrs,\ content\ =\ element}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00226}00226\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ name\ \textcolor{keywordflow}{in}\ componentNames:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00227}00227\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ vars(self)[name]\ =\ safeEval(attrs[\textcolor{stringliteral}{"{}value"{}}])}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00228}00228\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00229}00229\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ log.warning(\textcolor{stringliteral}{"{}unknown\ name\ '\%s'\ being\ ignored\ by\ EbdtComponent."{}},\ name)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00230}00230\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00231}00231\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00232}00232\ \textcolor{comment}{\#\ Helper\ functions\ for\ dealing\ with\ binary.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00233}00233\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00234}00234\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00235}00235\ \textcolor{keyword}{def\ }\_data2binary(data,\ numBits):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00236}00236\ \ \ \ \ binaryList\ =\ []}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00237}00237\ \ \ \ \ \textcolor{keywordflow}{for}\ curByte\ \textcolor{keywordflow}{in}\ data:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00238}00238\ \ \ \ \ \ \ \ \ value\ =\ byteord(curByte)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00239}00239\ \ \ \ \ \ \ \ \ numBitsCut\ =\ min(8,\ numBits)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00240}00240\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(numBitsCut):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00241}00241\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ value\ \&\ 0x1:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00242}00242\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ binaryList.append(\textcolor{stringliteral}{"{}1"{}})}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00243}00243\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00244}00244\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ binaryList.append(\textcolor{stringliteral}{"{}0"{}})}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00245}00245\ \ \ \ \ \ \ \ \ \ \ \ \ value\ =\ value\ >>\ 1}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00246}00246\ \ \ \ \ \ \ \ \ numBits\ -\/=\ numBitsCut}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00247}00247\ \ \ \ \ \textcolor{keywordflow}{return}\ strjoin(binaryList)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00248}00248\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00249}00249\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00250}00250\ \textcolor{keyword}{def\ }\_binary2data(binary):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00251}00251\ \ \ \ \ byteList\ =\ []}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00252}00252\ \ \ \ \ \textcolor{keywordflow}{for}\ bitLoc\ \textcolor{keywordflow}{in}\ range(0,\ len(binary),\ 8):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00253}00253\ \ \ \ \ \ \ \ \ byteString\ =\ binary[bitLoc\ :\ bitLoc\ +\ 8]}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00254}00254\ \ \ \ \ \ \ \ \ curByte\ =\ 0}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00255}00255\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ curBit\ \textcolor{keywordflow}{in}\ reversed(byteString):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00256}00256\ \ \ \ \ \ \ \ \ \ \ \ \ curByte\ =\ curByte\ <<\ 1}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00257}00257\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ curBit\ ==\ \textcolor{stringliteral}{"{}1"{}}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00258}00258\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ curByte\ |=\ 1}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00259}00259\ \ \ \ \ \ \ \ \ byteList.append(bytechr(curByte))}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00260}00260\ \ \ \ \ \textcolor{keywordflow}{return}\ bytesjoin(byteList)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00261}00261\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00262}00262\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00263}00263\ \textcolor{keyword}{def\ }\_memoize(f):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00264}00264\ \ \ \ \ \textcolor{keyword}{class\ }memodict(dict):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00265}00265\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_missing\_\_(self,\ key):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00266}00266\ \ \ \ \ \ \ \ \ \ \ \ \ ret\ =\ f(key)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00267}00267\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ isinstance(key,\ int)\ \textcolor{keywordflow}{or}\ len(key)\ ==\ 1:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00268}00268\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self[key]\ =\ ret}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00269}00269\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ret}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00270}00270\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00271}00271\ \ \ \ \ \textcolor{keywordflow}{return}\ memodict().\_\_getitem\_\_}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00272}00272\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00273}00273\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00274}00274\ \textcolor{comment}{\#\ 00100111\ -\/>\ 11100100\ per\ byte,\ not\ to\ be\ confused\ with\ little/big\ endian.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00275}00275\ \textcolor{comment}{\#\ Bitmap\ data\ per\ byte\ is\ in\ the\ order\ that\ binary\ is\ written\ on\ the\ page}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00276}00276\ \textcolor{comment}{\#\ with\ the\ least\ significant\ bit\ as\ far\ right\ as\ possible.\ This\ is\ the}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00277}00277\ \textcolor{comment}{\#\ opposite\ of\ what\ makes\ sense\ algorithmically\ and\ hence\ this\ function.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00278}00278\ \textcolor{preprocessor}{@\_memoize}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00279}\mbox{\hyperlink{namespacefontTools_1_1ttLib_1_1tables_1_1E__B__D__T___aa429e2dfa5b35dd505fcdc593f55a518}{00279}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacefontTools_1_1ttLib_1_1tables_1_1E__B__D__T___aa429e2dfa5b35dd505fcdc593f55a518}{\_reverseBytes}}(data):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00280}00280\ \ \ \ \ \textcolor{stringliteral}{r"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00281}00281\ \textcolor{stringliteral}{\ \ \ \ >>>\ bin(ord(\_reverseBytes(0b00100111)))}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00282}00282\ \textcolor{stringliteral}{\ \ \ \ '0b11100100'}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00283}00283\ \textcolor{stringliteral}{\ \ \ \ >>>\ \_reverseBytes(b'\(\backslash\)x00\(\backslash\)xf0')}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00284}00284\ \textcolor{stringliteral}{\ \ \ \ b'\(\backslash\)x00\(\backslash\)x0f'}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00285}00285\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00286}00286\ \ \ \ \ \textcolor{keywordflow}{if}\ isinstance(data,\ bytes)\ \textcolor{keywordflow}{and}\ len(data)\ !=\ 1:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00287}00287\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ bytesjoin(map(\_reverseBytes,\ data))}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00288}00288\ \ \ \ \ byte\ =\ byteord(data)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00289}00289\ \ \ \ \ result\ =\ 0}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00290}00290\ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(8):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00291}00291\ \ \ \ \ \ \ \ \ result\ =\ result\ <<\ 1}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00292}00292\ \ \ \ \ \ \ \ \ result\ |=\ byte\ \&\ 1}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00293}00293\ \ \ \ \ \ \ \ \ byte\ =\ byte\ >>\ 1}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00294}00294\ \ \ \ \ \textcolor{keywordflow}{return}\ bytechr(result)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00295}00295\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00296}00296\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00297}00297\ \textcolor{comment}{\#\ This\ section\ of\ code\ is\ for\ reading\ and\ writing\ image\ data\ to/from\ XML.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00298}00298\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00299}00299\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00300}00300\ \textcolor{keyword}{def\ }\_writeRawImageData(strikeIndex,\ glyphName,\ bitmapObject,\ writer,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00301}00301\ \ \ \ \ writer.begintag(\textcolor{stringliteral}{"{}rawimagedata"{}})}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00302}00302\ \ \ \ \ writer.newline()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00303}00303\ \ \ \ \ writer.dumphex(bitmapObject.imageData)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00304}00304\ \ \ \ \ writer.endtag(\textcolor{stringliteral}{"{}rawimagedata"{}})}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00305}00305\ \ \ \ \ writer.newline()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00306}00306\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00307}00307\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00308}00308\ \textcolor{keyword}{def\ }\_readRawImageData(bitmapObject,\ name,\ attrs,\ content,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00309}00309\ \ \ \ \ bitmapObject.imageData\ =\ readHex(content)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00310}00310\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00311}00311\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00312}00312\ \textcolor{keyword}{def\ }\_writeRowImageData(strikeIndex,\ glyphName,\ bitmapObject,\ writer,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00313}00313\ \ \ \ \ metrics\ =\ bitmapObject.exportMetrics}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00314}00314\ \ \ \ \ del\ bitmapObject.exportMetrics}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00315}00315\ \ \ \ \ bitDepth\ =\ bitmapObject.exportBitDepth}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00316}00316\ \ \ \ \ del\ bitmapObject.exportBitDepth}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00317}00317\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00318}00318\ \ \ \ \ writer.begintag(}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00319}00319\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}rowimagedata"{}},\ bitDepth=bitDepth,\ width=metrics.width,\ height=metrics.height}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00320}00320\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00321}00321\ \ \ \ \ writer.newline()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00322}00322\ \ \ \ \ \textcolor{keywordflow}{for}\ curRow\ \textcolor{keywordflow}{in}\ range(metrics.height):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00323}00323\ \ \ \ \ \ \ \ \ rowData\ =\ bitmapObject.getRow(curRow,\ bitDepth=bitDepth,\ metrics=metrics)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00324}00324\ \ \ \ \ \ \ \ \ writer.simpletag(\textcolor{stringliteral}{"{}row"{}},\ value=hexStr(rowData))}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00325}00325\ \ \ \ \ \ \ \ \ writer.newline()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00326}00326\ \ \ \ \ writer.endtag(\textcolor{stringliteral}{"{}rowimagedata"{}})}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00327}00327\ \ \ \ \ writer.newline()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00328}00328\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00329}00329\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00330}00330\ \textcolor{keyword}{def\ }\_readRowImageData(bitmapObject,\ name,\ attrs,\ content,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00331}00331\ \ \ \ \ bitDepth\ =\ safeEval(attrs[\textcolor{stringliteral}{"{}bitDepth"{}}])}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00332}00332\ \ \ \ \ metrics\ =\ \mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1BitmapGlyphMetrics_1_1SmallGlyphMetrics}{SmallGlyphMetrics}}()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00333}00333\ \ \ \ \ metrics.width\ =\ safeEval(attrs[\textcolor{stringliteral}{"{}width"{}}])}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00334}00334\ \ \ \ \ metrics.height\ =\ safeEval(attrs[\textcolor{stringliteral}{"{}height"{}}])}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00335}00335\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00336}00336\ \ \ \ \ dataRows\ =\ []}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00337}00337\ \ \ \ \ \textcolor{keywordflow}{for}\ element\ \textcolor{keywordflow}{in}\ content:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00338}00338\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ isinstance(element,\ tuple):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00339}00339\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00340}00340\ \ \ \ \ \ \ \ \ name,\ attr,\ content\ =\ element}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00341}00341\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Chop\ off\ 'imagedata'\ from\ the\ tag\ to\ get\ just\ the\ option.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00342}00342\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ name\ ==\ \textcolor{stringliteral}{"{}row"{}}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00343}00343\ \ \ \ \ \ \ \ \ \ \ \ \ dataRows.append(deHexStr(attr[\textcolor{stringliteral}{"{}value"{}}]))}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00344}00344\ \ \ \ \ bitmapObject.setRows(dataRows,\ bitDepth=bitDepth,\ metrics=metrics)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00345}00345\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00346}00346\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00347}00347\ \textcolor{keyword}{def\ }\_writeBitwiseImageData(strikeIndex,\ glyphName,\ bitmapObject,\ writer,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00348}00348\ \ \ \ \ metrics\ =\ bitmapObject.exportMetrics}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00349}00349\ \ \ \ \ del\ bitmapObject.exportMetrics}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00350}00350\ \ \ \ \ bitDepth\ =\ bitmapObject.exportBitDepth}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00351}00351\ \ \ \ \ del\ bitmapObject.exportBitDepth}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00352}00352\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00353}00353\ \ \ \ \ \textcolor{comment}{\#\ A\ dict\ for\ mapping\ binary\ to\ more\ readable/artistic\ ASCII\ characters.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00354}00354\ \ \ \ \ binaryConv\ =\ \{\textcolor{stringliteral}{"{}0"{}}:\ \textcolor{stringliteral}{"{}."{}},\ \textcolor{stringliteral}{"{}1"{}}:\ \textcolor{stringliteral}{"{}@"{}}\}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00355}00355\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00356}00356\ \ \ \ \ writer.begintag(}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00357}00357\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}bitwiseimagedata"{}},}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00358}00358\ \ \ \ \ \ \ \ \ bitDepth=bitDepth,}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00359}00359\ \ \ \ \ \ \ \ \ width=metrics.width,}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00360}00360\ \ \ \ \ \ \ \ \ height=metrics.height,}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00361}00361\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00362}00362\ \ \ \ \ writer.newline()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00363}00363\ \ \ \ \ \textcolor{keywordflow}{for}\ curRow\ \textcolor{keywordflow}{in}\ range(metrics.height):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00364}00364\ \ \ \ \ \ \ \ \ rowData\ =\ bitmapObject.getRow(}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00365}00365\ \ \ \ \ \ \ \ \ \ \ \ \ curRow,\ bitDepth=1,\ metrics=metrics,\ reverseBytes=\textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00366}00366\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00367}00367\ \ \ \ \ \ \ \ \ rowData\ =\ \_data2binary(rowData,\ metrics.width)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00368}00368\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Make\ the\ output\ a\ readable\ ASCII\ art\ form.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00369}00369\ \ \ \ \ \ \ \ \ rowData\ =\ strjoin(map(binaryConv.get,\ rowData))}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00370}00370\ \ \ \ \ \ \ \ \ writer.simpletag(\textcolor{stringliteral}{"{}row"{}},\ value=rowData)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00371}00371\ \ \ \ \ \ \ \ \ writer.newline()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00372}00372\ \ \ \ \ writer.endtag(\textcolor{stringliteral}{"{}bitwiseimagedata"{}})}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00373}00373\ \ \ \ \ writer.newline()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00374}00374\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00375}00375\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00376}00376\ \textcolor{keyword}{def\ }\_readBitwiseImageData(bitmapObject,\ name,\ attrs,\ content,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00377}00377\ \ \ \ \ bitDepth\ =\ safeEval(attrs[\textcolor{stringliteral}{"{}bitDepth"{}}])}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00378}00378\ \ \ \ \ metrics\ =\ \mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1BitmapGlyphMetrics_1_1SmallGlyphMetrics}{SmallGlyphMetrics}}()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00379}00379\ \ \ \ \ metrics.width\ =\ safeEval(attrs[\textcolor{stringliteral}{"{}width"{}}])}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00380}00380\ \ \ \ \ metrics.height\ =\ safeEval(attrs[\textcolor{stringliteral}{"{}height"{}}])}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00381}00381\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00382}00382\ \ \ \ \ \textcolor{comment}{\#\ A\ dict\ for\ mapping\ from\ ASCII\ to\ binary.\ All\ characters\ are\ considered}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00383}00383\ \ \ \ \ \textcolor{comment}{\#\ a\ '1'\ except\ space,\ period\ and\ '0'\ which\ maps\ to\ '0'.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00384}00384\ \ \ \ \ binaryConv\ =\ \{\textcolor{stringliteral}{"{}\ "{}}:\ \textcolor{stringliteral}{"{}0"{}},\ \textcolor{stringliteral}{"{}."{}}:\ \textcolor{stringliteral}{"{}0"{}},\ \textcolor{stringliteral}{"{}0"{}}:\ \textcolor{stringliteral}{"{}0"{}}\}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00385}00385\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00386}00386\ \ \ \ \ dataRows\ =\ []}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00387}00387\ \ \ \ \ \textcolor{keywordflow}{for}\ element\ \textcolor{keywordflow}{in}\ content:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00388}00388\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ isinstance(element,\ tuple):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00389}00389\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00390}00390\ \ \ \ \ \ \ \ \ name,\ attr,\ content\ =\ element}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00391}00391\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ name\ ==\ \textcolor{stringliteral}{"{}row"{}}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00392}00392\ \ \ \ \ \ \ \ \ \ \ \ \ mapParams\ =\ zip(attr[\textcolor{stringliteral}{"{}value"{}}],\ itertools.repeat(\textcolor{stringliteral}{"{}1"{}}))}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00393}00393\ \ \ \ \ \ \ \ \ \ \ \ \ rowData\ =\ strjoin(itertools.starmap(binaryConv.get,\ mapParams))}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00394}00394\ \ \ \ \ \ \ \ \ \ \ \ \ dataRows.append(\_binary2data(rowData))}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00395}00395\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00396}00396\ \ \ \ \ bitmapObject.setRows(}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00397}00397\ \ \ \ \ \ \ \ \ dataRows,\ bitDepth=bitDepth,\ metrics=metrics,\ reverseBytes=\textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00398}00398\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00399}00399\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00400}00400\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00401}00401\ \textcolor{keyword}{def\ }\_writeExtFileImageData(strikeIndex,\ glyphName,\ bitmapObject,\ writer,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00402}00402\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00403}00403\ \ \ \ \ \ \ \ \ folder\ =\ os.path.dirname(writer.file.name)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00404}00404\ \ \ \ \ \textcolor{keywordflow}{except}\ AttributeError:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00405}00405\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ fall\ back\ to\ current\ directory\ if\ output\ file's\ directory\ isn't\ found}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00406}00406\ \ \ \ \ \ \ \ \ folder\ =\ \textcolor{stringliteral}{"{}."{}}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00407}00407\ \ \ \ \ folder\ =\ os.path.join(folder,\ \textcolor{stringliteral}{"{}bitmaps"{}})}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00408}00408\ \ \ \ \ filename\ =\ glyphName\ +\ bitmapObject.fileExtension}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00409}00409\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ os.path.isdir(folder):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00410}00410\ \ \ \ \ \ \ \ \ os.makedirs(folder)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00411}00411\ \ \ \ \ folder\ =\ os.path.join(folder,\ \textcolor{stringliteral}{"{}strike\%d"{}}\ \%\ strikeIndex)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00412}00412\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ os.path.isdir(folder):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00413}00413\ \ \ \ \ \ \ \ \ os.makedirs(folder)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00414}00414\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00415}00415\ \ \ \ \ fullPath\ =\ os.path.join(folder,\ filename)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00416}00416\ \ \ \ \ writer.simpletag(\textcolor{stringliteral}{"{}extfileimagedata"{}},\ value=fullPath)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00417}00417\ \ \ \ \ writer.newline()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00418}00418\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00419}00419\ \ \ \ \ \textcolor{keyword}{with}\ open(fullPath,\ \textcolor{stringliteral}{"{}wb"{}})\ \textcolor{keyword}{as}\ file:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00420}00420\ \ \ \ \ \ \ \ \ file.write(bitmapObject.imageData)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00421}00421\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00422}00422\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00423}00423\ \textcolor{keyword}{def\ }\_readExtFileImageData(bitmapObject,\ name,\ attrs,\ content,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00424}00424\ \ \ \ \ fullPath\ =\ attrs[\textcolor{stringliteral}{"{}value"{}}]}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00425}00425\ \ \ \ \ \textcolor{keyword}{with}\ open(fullPath,\ \textcolor{stringliteral}{"{}rb"{}})\ \textcolor{keyword}{as}\ file:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00426}00426\ \ \ \ \ \ \ \ \ bitmapObject.imageData\ =\ file.read()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00427}00427\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00428}00428\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00429}00429\ \textcolor{comment}{\#\ End\ of\ XML\ writing\ code.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00430}00430\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00431}00431\ \textcolor{comment}{\#\ Important\ information\ about\ the\ naming\ scheme.\ Used\ for\ identifying\ formats}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00432}00432\ \textcolor{comment}{\#\ in\ XML.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00433}00433\ \_bitmapGlyphSubclassPrefix\ =\ \textcolor{stringliteral}{"{}ebdt\_bitmap\_format\_"{}}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00434}00434\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00435}00435\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00436}\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitmapGlyph}{00436}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitmapGlyph}{BitmapGlyph}}(object):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00437}00437\ \ \ \ \ \textcolor{comment}{\#\ For\ the\ external\ file\ format.\ This\ can\ be\ changed\ in\ subclasses.\ This\ way}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00438}00438\ \ \ \ \ \textcolor{comment}{\#\ when\ the\ extfile\ option\ is\ turned\ on\ files\ have\ the\ form:\ glyphName.ext}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00439}00439\ \ \ \ \ \textcolor{comment}{\#\ The\ default\ is\ just\ a\ flat\ binary\ file\ with\ no\ meaning.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00440}00440\ \ \ \ \ fileExtension\ =\ \textcolor{stringliteral}{"{}.bin"{}}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00441}00441\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00442}00442\ \ \ \ \ \textcolor{comment}{\#\ Keep\ track\ of\ reading\ and\ writing\ of\ various\ forms.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00443}00443\ \ \ \ \ xmlDataFunctions\ =\ \{}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00444}00444\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}raw"{}}:\ (\_writeRawImageData,\ \_readRawImageData),}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00445}00445\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}row"{}}:\ (\_writeRowImageData,\ \_readRowImageData),}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00446}00446\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}bitwise"{}}:\ (\_writeBitwiseImageData,\ \_readBitwiseImageData),}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00447}00447\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}extfile"{}}:\ (\_writeExtFileImageData,\ \_readExtFileImageData),}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00448}00448\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00449}00449\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00450}00450\ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self,\ data,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00451}00451\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitmapGlyph_ad77b757db60981eb3812b2d5ba32e159}{data}}\ =\ data}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00452}00452\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitmapGlyph_a1ce02c9783592f391e1baa37eb292dda}{ttFont}}\ =\ ttFont}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00453}00453\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ TODO\ Currently\ non-\/lazy\ decompilation\ is\ untested\ here...}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00454}00454\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ if\ not\ ttFont.lazy:}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00455}00455\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ self.decompile()}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00456}00456\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ del\ self.data}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00457}00457\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00458}00458\ \ \ \ \ \textcolor{keyword}{def\ }\_\_getattr\_\_(self,\ attr):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00459}00459\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Allow\ lazy\ decompile.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00460}00460\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ attr[:2]\ ==\ \textcolor{stringliteral}{"{}\_\_"{}}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00461}00461\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classAttributeError}{AttributeError}}(attr)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00462}00462\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ attr\ ==\ \textcolor{stringliteral}{"{}data"{}}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00463}00463\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classAttributeError}{AttributeError}}(attr)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00464}00464\ \ \ \ \ \ \ \ \ self.decompile()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00465}00465\ \ \ \ \ \ \ \ \ del\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitmapGlyph_ad77b757db60981eb3812b2d5ba32e159}{data}}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00466}00466\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ getattr(self,\ attr)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00467}00467\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00468}00468\ \ \ \ \ \textcolor{keyword}{def\ }ensureDecompiled(self,\ recurse=False):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00469}00469\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ hasattr(self,\ \textcolor{stringliteral}{"{}data"{}}):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00470}00470\ \ \ \ \ \ \ \ \ \ \ \ \ self.decompile()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00471}00471\ \ \ \ \ \ \ \ \ \ \ \ \ del\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitmapGlyph_ad77b757db60981eb3812b2d5ba32e159}{data}}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00472}00472\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00473}00473\ \ \ \ \ \textcolor{comment}{\#\ Not\ a\ fan\ of\ this\ but\ it\ is\ needed\ for\ safer\ safety\ checking.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00474}00474\ \ \ \ \ \textcolor{keyword}{def\ }getFormat(self):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00475}00475\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ safeEval(self.\_\_class\_\_.\_\_name\_\_[len(\_bitmapGlyphSubclassPrefix)\ :])}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00476}00476\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00477}00477\ \ \ \ \ \textcolor{keyword}{def\ }toXML(self,\ strikeIndex,\ glyphName,\ writer,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00478}00478\ \ \ \ \ \ \ \ \ writer.begintag(self.\_\_class\_\_.\_\_name\_\_,\ [(\textcolor{stringliteral}{"{}name"{}},\ glyphName)])}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00479}00479\ \ \ \ \ \ \ \ \ writer.newline()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00480}00480\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00481}00481\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitmapGlyph_ad3df94ba30d995ff8527ac0c7ce19fa5}{writeMetrics}}(writer,\ ttFont)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00482}00482\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Use\ the\ internal\ write\ method\ to\ write\ using\ the\ correct\ output\ format.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00483}00483\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitmapGlyph_a74209c9c97c919f5f1a5077828f7ced1}{writeData}}(strikeIndex,\ glyphName,\ writer,\ ttFont)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00484}00484\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00485}00485\ \ \ \ \ \ \ \ \ writer.endtag(self.\_\_class\_\_.\_\_name\_\_)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00486}00486\ \ \ \ \ \ \ \ \ writer.newline()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00487}00487\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00488}00488\ \ \ \ \ \textcolor{keyword}{def\ }fromXML(self,\ name,\ attrs,\ content,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00489}00489\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitmapGlyph_afe21b09e60c13ea88e57263e05133dbf}{readMetrics}}(name,\ attrs,\ content,\ ttFont)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00490}00490\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ element\ \textcolor{keywordflow}{in}\ content:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00491}00491\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ isinstance(element,\ tuple):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00492}00492\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00493}00493\ \ \ \ \ \ \ \ \ \ \ \ \ name,\ attr,\ content\ =\ element}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00494}00494\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ name.endswith(\textcolor{stringliteral}{"{}imagedata"{}}):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00495}00495\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00496}00496\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Chop\ off\ 'imagedata'\ from\ the\ tag\ to\ get\ just\ the\ option.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00497}00497\ \ \ \ \ \ \ \ \ \ \ \ \ option\ =\ name[:\ -\/len(\textcolor{stringliteral}{"{}imagedata"{}})]}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00498}00498\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ option\ \textcolor{keywordflow}{in}\ self.\_\_class\_\_.xmlDataFunctions}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00499}00499\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitmapGlyph_a0a0c8a9736fb75d57f7aabb9453a0e96}{readData}}(name,\ attr,\ content,\ ttFont)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00500}00500\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00501}00501\ \ \ \ \ \textcolor{comment}{\#\ Some\ of\ the\ glyphs\ have\ the\ metrics.\ This\ allows\ for\ metrics\ to\ be}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00502}00502\ \ \ \ \ \textcolor{comment}{\#\ added\ if\ the\ glyph\ format\ has\ them.\ Default\ behavior\ is\ to\ do\ nothing.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00503}00503\ \ \ \ \ \textcolor{keyword}{def\ }writeMetrics(self,\ writer,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00504}00504\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00505}00505\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00506}00506\ \ \ \ \ \textcolor{comment}{\#\ The\ opposite\ of\ write\ metrics.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00507}00507\ \ \ \ \ \textcolor{keyword}{def\ }readMetrics(self,\ name,\ attrs,\ content,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00508}00508\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00509}00509\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00510}00510\ \ \ \ \ \textcolor{keyword}{def\ }writeData(self,\ strikeIndex,\ glyphName,\ writer,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00511}00511\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00512}00512\ \ \ \ \ \ \ \ \ \ \ \ \ writeFunc,\ readFunc\ =\ self.\_\_class\_\_.xmlDataFunctions[}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00513}00513\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ttFont.bitmapGlyphDataFormat}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00514}00514\ \ \ \ \ \ \ \ \ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00515}00515\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ KeyError:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00516}00516\ \ \ \ \ \ \ \ \ \ \ \ \ writeFunc\ =\ \_writeRawImageData}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00517}00517\ \ \ \ \ \ \ \ \ writeFunc(strikeIndex,\ glyphName,\ self,\ writer,\ ttFont)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00518}00518\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00519}00519\ \ \ \ \ \textcolor{keyword}{def\ }readData(self,\ name,\ attrs,\ content,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00520}00520\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Chop\ off\ 'imagedata'\ from\ the\ tag\ to\ get\ just\ the\ option.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00521}00521\ \ \ \ \ \ \ \ \ option\ =\ name[:\ -\/len(\textcolor{stringliteral}{"{}imagedata"{}})]}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00522}00522\ \ \ \ \ \ \ \ \ writeFunc,\ readFunc\ =\ self.\_\_class\_\_.xmlDataFunctions[option]}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00523}00523\ \ \ \ \ \ \ \ \ readFunc(self,\ name,\ attrs,\ content,\ ttFont)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00524}00524\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00525}00525\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00526}00526\ \textcolor{comment}{\#\ A\ closure\ for\ creating\ a\ mixin\ for\ the\ two\ types\ of\ metrics\ handling.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00527}00527\ \textcolor{comment}{\#\ Most\ of\ the\ code\ is\ very\ similar\ so\ its\ easier\ to\ deal\ with\ here.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00528}00528\ \textcolor{comment}{\#\ Everything\ works\ just\ by\ passing\ the\ class\ that\ the\ mixin\ is\ for.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00529}00529\ \textcolor{keyword}{def\ }\_createBitmapPlusMetricsMixin(metricsClass):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00530}00530\ \ \ \ \ \textcolor{comment}{\#\ Both\ metrics\ names\ are\ listed\ here\ to\ make\ meaningful\ error\ messages.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00531}00531\ \ \ \ \ metricStrings\ =\ [BigGlyphMetrics.\_\_name\_\_,\ SmallGlyphMetrics.\_\_name\_\_]}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00532}00532\ \ \ \ \ curMetricsName\ =\ metricsClass.\_\_name\_\_}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00533}00533\ \ \ \ \ \textcolor{comment}{\#\ Find\ which\ metrics\ this\ is\ for\ and\ determine\ the\ opposite\ name.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00534}00534\ \ \ \ \ metricsId\ =\ metricStrings.index(curMetricsName)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00535}00535\ \ \ \ \ oppositeMetricsName\ =\ metricStrings[1\ -\/\ metricsId]}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00536}00536\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00537}00537\ \ \ \ \ \textcolor{keyword}{class\ }BitmapPlusMetricsMixin(object):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00538}00538\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }writeMetrics(self,\ writer,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00539}00539\ \ \ \ \ \ \ \ \ \ \ \ \ self.metrics.toXML(writer,\ ttFont)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00540}00540\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00541}00541\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }readMetrics(self,\ name,\ attrs,\ content,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00542}00542\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ element\ \textcolor{keywordflow}{in}\ content:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00543}00543\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ isinstance(element,\ tuple):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00544}00544\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00545}00545\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ name,\ attrs,\ content\ =\ element}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00546}00546\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ name\ ==\ curMetricsName:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00547}00547\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.metrics\ =\ metricsClass()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00548}00548\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.metrics.fromXML(name,\ attrs,\ content,\ ttFont)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00549}00549\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ name\ ==\ oppositeMetricsName:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00550}00550\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ log.warning(}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00551}00551\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Warning:\ \%s\ being\ ignored\ in\ format\ \%d."{}},}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00552}00552\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ oppositeMetricsName,}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00553}00553\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.getFormat(),}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00554}00554\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00555}00555\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00556}00556\ \ \ \ \ \textcolor{keywordflow}{return}\ BitmapPlusMetricsMixin}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00557}00557\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00558}00558\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00559}00559\ \textcolor{comment}{\#\ Since\ there\ are\ only\ two\ types\ of\ mixin's\ just\ create\ them\ here.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00560}00560\ BitmapPlusBigMetricsMixin\ =\ \_createBitmapPlusMetricsMixin(BigGlyphMetrics)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00561}00561\ BitmapPlusSmallMetricsMixin\ =\ \_createBitmapPlusMetricsMixin(SmallGlyphMetrics)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00562}00562\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00563}00563\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00564}00564\ \textcolor{comment}{\#\ Data\ that\ is\ bit\ aligned\ can\ be\ tricky\ to\ deal\ with.\ These\ classes\ implement}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00565}00565\ \textcolor{comment}{\#\ helper\ functionality\ for\ dealing\ with\ the\ data\ and\ getting\ a\ particular\ row}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00566}00566\ \textcolor{comment}{\#\ of\ bitwise\ data.\ Also\ helps\ implement\ fancy\ data\ export/import\ in\ XML.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00567}\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitAlignedBitmapMixin}{00567}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitAlignedBitmapMixin}{BitAlignedBitmapMixin}}(object):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00568}00568\ \ \ \ \ \textcolor{keyword}{def\ }\_getBitRange(self,\ row,\ bitDepth,\ metrics):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00569}00569\ \ \ \ \ \ \ \ \ rowBits\ =\ bitDepth\ *\ metrics.width}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00570}00570\ \ \ \ \ \ \ \ \ bitOffset\ =\ row\ *\ rowBits}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00571}00571\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (bitOffset,\ bitOffset\ +\ rowBits)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00572}00572\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00573}00573\ \ \ \ \ \textcolor{keyword}{def\ }getRow(self,\ row,\ bitDepth=1,\ metrics=None,\ reverseBytes=False):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00574}00574\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ metrics\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00575}00575\ \ \ \ \ \ \ \ \ \ \ \ \ metrics\ =\ self.metrics}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00576}00576\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ 0\ <=\ row\ \textcolor{keywordflow}{and}\ row\ <\ metrics.height,\ \textcolor{stringliteral}{"{}Illegal\ row\ access\ in\ bitmap"{}}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00577}00577\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00578}00578\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Loop\ through\ each\ byte.\ This\ can\ cover\ two\ bytes\ in\ the\ original\ data\ or}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00579}00579\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ a\ single\ byte\ if\ things\ happen\ to\ be\ aligned.\ The\ very\ last\ entry\ might}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00580}00580\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ not\ be\ aligned\ so\ take\ care\ to\ trim\ the\ binary\ data\ to\ size\ and\ pad\ with}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00581}00581\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ zeros\ in\ the\ row\ data.\ Bit\ aligned\ data\ is\ somewhat\ tricky.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00582}00582\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00583}00583\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Example\ of\ data\ cut.\ Data\ cut\ represented\ in\ x's.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00584}00584\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ '|'\ represents\ byte\ boundary.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00585}00585\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ data\ =\ ...0XX|XXXXXX00|000...\ =>\ XXXXXXXX}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00586}00586\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ \ \ \ \ or}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00587}00587\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ data\ =\ ...0XX|XXXX0000|000...\ =>\ XXXXXX00}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00588}00588\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ or}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00589}00589\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ data\ =\ ...000|XXXXXXXX|000...\ =>\ XXXXXXXX}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00590}00590\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ or}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00591}00591\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ data\ =\ ...000|00XXXX00|000...\ =>\ XXXX0000}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00592}00592\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00593}00593\ \ \ \ \ \ \ \ \ dataList\ =\ []}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00594}00594\ \ \ \ \ \ \ \ \ bitRange\ =\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitAlignedBitmapMixin_a6a733ee0c2eead546e085e476c7aa97b}{\_getBitRange}}(row,\ bitDepth,\ metrics)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00595}00595\ \ \ \ \ \ \ \ \ stepRange\ =\ bitRange\ +\ (8,)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00596}00596\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ curBit\ \textcolor{keywordflow}{in}\ range(*stepRange):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00597}00597\ \ \ \ \ \ \ \ \ \ \ \ \ endBit\ =\ min(curBit\ +\ 8,\ bitRange[1])}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00598}00598\ \ \ \ \ \ \ \ \ \ \ \ \ numBits\ =\ endBit\ -\/\ curBit}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00599}00599\ \ \ \ \ \ \ \ \ \ \ \ \ cutPoint\ =\ curBit\ \%\ 8}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00600}00600\ \ \ \ \ \ \ \ \ \ \ \ \ firstByteLoc\ =\ curBit\ //\ 8}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00601}00601\ \ \ \ \ \ \ \ \ \ \ \ \ secondByteLoc\ =\ endBit\ //\ 8}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00602}00602\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ firstByteLoc\ <\ secondByteLoc:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00603}00603\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ numBitsCut\ =\ 8\ -\/\ cutPoint}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00604}00604\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00605}00605\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ numBitsCut\ =\ endBit\ -\/\ curBit}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00606}00606\ \ \ \ \ \ \ \ \ \ \ \ \ curByte\ =\ \mbox{\hyperlink{namespacefontTools_1_1ttLib_1_1tables_1_1E__B__D__T___aa429e2dfa5b35dd505fcdc593f55a518}{\_reverseBytes}}(self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitAlignedBitmapMixin_a2c2434d6b9c549661816b02c3a7e142d}{imageData}}[firstByteLoc])}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00607}00607\ \ \ \ \ \ \ \ \ \ \ \ \ firstHalf\ =\ byteord(curByte)\ >>\ cutPoint}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00608}00608\ \ \ \ \ \ \ \ \ \ \ \ \ firstHalf\ =\ ((1\ <<\ numBitsCut)\ -\/\ 1)\ \&\ firstHalf}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00609}00609\ \ \ \ \ \ \ \ \ \ \ \ \ newByte\ =\ firstHalf}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00610}00610\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ firstByteLoc\ <\ secondByteLoc\ \textcolor{keywordflow}{and}\ secondByteLoc\ <\ len(self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitAlignedBitmapMixin_a2c2434d6b9c549661816b02c3a7e142d}{imageData}}):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00611}00611\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ curByte\ =\ \mbox{\hyperlink{namespacefontTools_1_1ttLib_1_1tables_1_1E__B__D__T___aa429e2dfa5b35dd505fcdc593f55a518}{\_reverseBytes}}(self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitAlignedBitmapMixin_a2c2434d6b9c549661816b02c3a7e142d}{imageData}}[secondByteLoc])}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00612}00612\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ secondHalf\ =\ byteord(curByte)\ <<\ numBitsCut}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00613}00613\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ newByte\ =\ (firstHalf\ |\ secondHalf)\ \&\ ((1\ <<\ numBits)\ -\/\ 1)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00614}00614\ \ \ \ \ \ \ \ \ \ \ \ \ dataList.append(bytechr(newByte))}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00615}00615\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00616}00616\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ way\ the\ data\ is\ kept\ is\ opposite\ the\ algorithm\ used.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00617}00617\ \ \ \ \ \ \ \ \ data\ =\ bytesjoin(dataList)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00618}00618\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ reverseBytes:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00619}00619\ \ \ \ \ \ \ \ \ \ \ \ \ data\ =\ \mbox{\hyperlink{namespacefontTools_1_1ttLib_1_1tables_1_1E__B__D__T___aa429e2dfa5b35dd505fcdc593f55a518}{\_reverseBytes}}(data)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00620}00620\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ data}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00621}00621\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00622}00622\ \ \ \ \ \textcolor{keyword}{def\ }setRows(self,\ dataRows,\ bitDepth=1,\ metrics=None,\ reverseBytes=False):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00623}00623\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ metrics\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00624}00624\ \ \ \ \ \ \ \ \ \ \ \ \ metrics\ =\ self.metrics}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00625}00625\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ reverseBytes:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00626}00626\ \ \ \ \ \ \ \ \ \ \ \ \ dataRows\ =\ list(map(\_reverseBytes,\ dataRows))}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00627}00627\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00628}00628\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Keep\ track\ of\ a\ list\ of\ ordinal\ values\ as\ they\ are\ easier\ to\ modify}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00629}00629\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ than\ a\ list\ of\ strings.\ Map\ to\ actual\ strings\ later.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00630}00630\ \ \ \ \ \ \ \ \ numBytes\ =\ (self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitAlignedBitmapMixin_a6a733ee0c2eead546e085e476c7aa97b}{\_getBitRange}}(len(dataRows),\ bitDepth,\ metrics)[0]\ +\ 7)\ //\ 8}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00631}00631\ \ \ \ \ \ \ \ \ ordDataList\ =\ [0]\ *\ numBytes}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00632}00632\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ row,\ data\ \textcolor{keywordflow}{in}\ enumerate(dataRows):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00633}00633\ \ \ \ \ \ \ \ \ \ \ \ \ bitRange\ =\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitAlignedBitmapMixin_a6a733ee0c2eead546e085e476c7aa97b}{\_getBitRange}}(row,\ bitDepth,\ metrics)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00634}00634\ \ \ \ \ \ \ \ \ \ \ \ \ stepRange\ =\ bitRange\ +\ (8,)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00635}00635\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ curBit,\ curByte\ \textcolor{keywordflow}{in}\ zip(range(*stepRange),\ data):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00636}00636\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ endBit\ =\ min(curBit\ +\ 8,\ bitRange[1])}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00637}00637\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cutPoint\ =\ curBit\ \%\ 8}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00638}00638\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ firstByteLoc\ =\ curBit\ //\ 8}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00639}00639\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ secondByteLoc\ =\ endBit\ //\ 8}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00640}00640\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ firstByteLoc\ <\ secondByteLoc:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00641}00641\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ numBitsCut\ =\ 8\ -\/\ cutPoint}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00642}00642\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00643}00643\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ numBitsCut\ =\ endBit\ -\/\ curBit}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00644}00644\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ curByte\ =\ byteord(curByte)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00645}00645\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ firstByte\ =\ curByte\ \&\ ((1\ <<\ numBitsCut)\ -\/\ 1)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00646}00646\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ordDataList[firstByteLoc]\ |=\ firstByte\ <<\ cutPoint}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00647}00647\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ firstByteLoc\ <\ secondByteLoc\ \textcolor{keywordflow}{and}\ secondByteLoc\ <\ numBytes:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00648}00648\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ secondByte\ =\ (curByte\ >>\ numBitsCut)\ \&\ ((1\ <<\ 8\ -\/\ numBitsCut)\ -\/\ 1)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00649}00649\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ordDataList[secondByteLoc]\ |=\ secondByte}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00650}00650\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00651}00651\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Save\ the\ image\ data\ with\ the\ bits\ going\ the\ correct\ way.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00652}00652\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitAlignedBitmapMixin_a2c2434d6b9c549661816b02c3a7e142d}{imageData}}\ =\ \mbox{\hyperlink{namespacefontTools_1_1ttLib_1_1tables_1_1E__B__D__T___aa429e2dfa5b35dd505fcdc593f55a518}{\_reverseBytes}}(bytesjoin(map(bytechr,\ ordDataList)))}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00653}00653\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00654}00654\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00655}\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ByteAlignedBitmapMixin}{00655}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ByteAlignedBitmapMixin}{ByteAlignedBitmapMixin}}(object):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00656}00656\ \ \ \ \ \textcolor{keyword}{def\ }\_getByteRange(self,\ row,\ bitDepth,\ metrics):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00657}00657\ \ \ \ \ \ \ \ \ rowBytes\ =\ (bitDepth\ *\ metrics.width\ +\ 7)\ //\ 8}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00658}00658\ \ \ \ \ \ \ \ \ byteOffset\ =\ row\ *\ rowBytes}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00659}00659\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (byteOffset,\ byteOffset\ +\ rowBytes)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00660}00660\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00661}00661\ \ \ \ \ \textcolor{keyword}{def\ }getRow(self,\ row,\ bitDepth=1,\ metrics=None,\ reverseBytes=False):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00662}00662\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ metrics\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00663}00663\ \ \ \ \ \ \ \ \ \ \ \ \ metrics\ =\ self.metrics}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00664}00664\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ 0\ <=\ row\ \textcolor{keywordflow}{and}\ row\ <\ metrics.height,\ \textcolor{stringliteral}{"{}Illegal\ row\ access\ in\ bitmap"{}}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00665}00665\ \ \ \ \ \ \ \ \ byteRange\ =\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ByteAlignedBitmapMixin_ad8b42a33bc854cb043887b01668be1eb}{\_getByteRange}}(row,\ bitDepth,\ metrics)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00666}00666\ \ \ \ \ \ \ \ \ data\ =\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ByteAlignedBitmapMixin_a3e0f509073b0aa3dcaebe3c26a8714f2}{imageData}}[slice(*byteRange)]}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00667}00667\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ reverseBytes:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00668}00668\ \ \ \ \ \ \ \ \ \ \ \ \ data\ =\ \mbox{\hyperlink{namespacefontTools_1_1ttLib_1_1tables_1_1E__B__D__T___aa429e2dfa5b35dd505fcdc593f55a518}{\_reverseBytes}}(data)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00669}00669\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ data}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00670}00670\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00671}00671\ \ \ \ \ \textcolor{keyword}{def\ }setRows(self,\ dataRows,\ bitDepth=1,\ metrics=None,\ reverseBytes=False):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00672}00672\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ metrics\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00673}00673\ \ \ \ \ \ \ \ \ \ \ \ \ metrics\ =\ self.metrics}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00674}00674\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ reverseBytes:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00675}00675\ \ \ \ \ \ \ \ \ \ \ \ \ dataRows\ =\ map(\_reverseBytes,\ dataRows)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00676}00676\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ByteAlignedBitmapMixin_a3e0f509073b0aa3dcaebe3c26a8714f2}{imageData}}\ =\ bytesjoin(dataRows)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00677}00677\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00678}00678\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00679}\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__1}{00679}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__1}{ebdt\_bitmap\_format\_1}}(}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00680}00680\ \ \ \ \ ByteAlignedBitmapMixin,\ BitmapPlusSmallMetricsMixin,\ BitmapGlyph}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00681}00681\ ):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00682}00682\ \ \ \ \ \textcolor{keyword}{def\ }decompile(self):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00683}00683\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__1_abdb2e79e48c23e60a6e2c08d402dbbd1}{metrics}}\ =\ \mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1BitmapGlyphMetrics_1_1SmallGlyphMetrics}{SmallGlyphMetrics}}()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00684}00684\ \ \ \ \ \ \ \ \ dummy,\ data\ =\ sstruct.unpack2(smallGlyphMetricsFormat,\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitmapGlyph_ad77b757db60981eb3812b2d5ba32e159}{data}},\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__1_abdb2e79e48c23e60a6e2c08d402dbbd1}{metrics}})}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00685}00685\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ByteAlignedBitmapMixin_a3e0f509073b0aa3dcaebe3c26a8714f2}{imageData}}\ =\ data}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00686}00686\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00687}00687\ \ \ \ \ \textcolor{keyword}{def\ }compile(self,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00688}00688\ \ \ \ \ \ \ \ \ data\ =\ sstruct.pack(smallGlyphMetricsFormat,\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__1_abdb2e79e48c23e60a6e2c08d402dbbd1}{metrics}})}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00689}00689\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ data\ +\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ByteAlignedBitmapMixin_a3e0f509073b0aa3dcaebe3c26a8714f2}{imageData}}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00690}00690\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00691}00691\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00692}\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__2}{00692}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__2}{ebdt\_bitmap\_format\_2}}(}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00693}00693\ \ \ \ \ BitAlignedBitmapMixin,\ BitmapPlusSmallMetricsMixin,\ BitmapGlyph}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00694}00694\ ):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00695}00695\ \ \ \ \ \textcolor{keyword}{def\ }decompile(self):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00696}00696\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__2_a340936f9255a9ce066bf730f3fc5b100}{metrics}}\ =\ \mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1BitmapGlyphMetrics_1_1SmallGlyphMetrics}{SmallGlyphMetrics}}()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00697}00697\ \ \ \ \ \ \ \ \ dummy,\ data\ =\ sstruct.unpack2(smallGlyphMetricsFormat,\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitmapGlyph_ad77b757db60981eb3812b2d5ba32e159}{data}},\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__2_a340936f9255a9ce066bf730f3fc5b100}{metrics}})}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00698}00698\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitAlignedBitmapMixin_a2c2434d6b9c549661816b02c3a7e142d}{imageData}}\ =\ data}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00699}00699\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00700}00700\ \ \ \ \ \textcolor{keyword}{def\ }compile(self,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00701}00701\ \ \ \ \ \ \ \ \ data\ =\ sstruct.pack(smallGlyphMetricsFormat,\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__2_a340936f9255a9ce066bf730f3fc5b100}{metrics}})}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00702}00702\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ data\ +\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitAlignedBitmapMixin_a2c2434d6b9c549661816b02c3a7e142d}{imageData}}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00703}00703\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00704}00704\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00705}\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__5}{00705}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__5}{ebdt\_bitmap\_format\_5}}(\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitAlignedBitmapMixin}{BitAlignedBitmapMixin}},\ \mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitmapGlyph}{BitmapGlyph}}):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00706}00706\ \ \ \ \ \textcolor{keyword}{def\ }decompile(self):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00707}00707\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitAlignedBitmapMixin_a2c2434d6b9c549661816b02c3a7e142d}{imageData}}\ =\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitmapGlyph_ad77b757db60981eb3812b2d5ba32e159}{data}}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00708}00708\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00709}00709\ \ \ \ \ \textcolor{keyword}{def\ }compile(self,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00710}00710\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitAlignedBitmapMixin_a2c2434d6b9c549661816b02c3a7e142d}{imageData}}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00711}00711\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00712}00712\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00713}\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__6}{00713}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__6}{ebdt\_bitmap\_format\_6}}(}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00714}00714\ \ \ \ \ ByteAlignedBitmapMixin,\ BitmapPlusBigMetricsMixin,\ BitmapGlyph}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00715}00715\ ):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00716}00716\ \ \ \ \ \textcolor{keyword}{def\ }decompile(self):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00717}00717\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__6_a9b79faac19e46f4297a5d77b68e31803}{metrics}}\ =\ \mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1BitmapGlyphMetrics_1_1BigGlyphMetrics}{BigGlyphMetrics}}()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00718}00718\ \ \ \ \ \ \ \ \ dummy,\ data\ =\ sstruct.unpack2(bigGlyphMetricsFormat,\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitmapGlyph_ad77b757db60981eb3812b2d5ba32e159}{data}},\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__6_a9b79faac19e46f4297a5d77b68e31803}{metrics}})}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00719}00719\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ByteAlignedBitmapMixin_a3e0f509073b0aa3dcaebe3c26a8714f2}{imageData}}\ =\ data}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00720}00720\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00721}00721\ \ \ \ \ \textcolor{keyword}{def\ }compile(self,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00722}00722\ \ \ \ \ \ \ \ \ data\ =\ sstruct.pack(bigGlyphMetricsFormat,\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__6_a9b79faac19e46f4297a5d77b68e31803}{metrics}})}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00723}00723\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ data\ +\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ByteAlignedBitmapMixin_a3e0f509073b0aa3dcaebe3c26a8714f2}{imageData}}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00724}00724\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00725}00725\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00726}\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__7}{00726}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__7}{ebdt\_bitmap\_format\_7}}(}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00727}00727\ \ \ \ \ BitAlignedBitmapMixin,\ BitmapPlusBigMetricsMixin,\ BitmapGlyph}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00728}00728\ ):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00729}00729\ \ \ \ \ \textcolor{keyword}{def\ }decompile(self):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00730}00730\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__7_a25018e6c495b81157dbd9aa63832360b}{metrics}}\ =\ \mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1BitmapGlyphMetrics_1_1BigGlyphMetrics}{BigGlyphMetrics}}()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00731}00731\ \ \ \ \ \ \ \ \ dummy,\ data\ =\ sstruct.unpack2(bigGlyphMetricsFormat,\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitmapGlyph_ad77b757db60981eb3812b2d5ba32e159}{data}},\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__7_a25018e6c495b81157dbd9aa63832360b}{metrics}})}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00732}00732\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitAlignedBitmapMixin_a2c2434d6b9c549661816b02c3a7e142d}{imageData}}\ =\ data}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00733}00733\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00734}00734\ \ \ \ \ \textcolor{keyword}{def\ }compile(self,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00735}00735\ \ \ \ \ \ \ \ \ data\ =\ sstruct.pack(bigGlyphMetricsFormat,\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__7_a25018e6c495b81157dbd9aa63832360b}{metrics}})}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00736}00736\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ data\ +\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitAlignedBitmapMixin_a2c2434d6b9c549661816b02c3a7e142d}{imageData}}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00737}00737\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00738}00738\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00739}\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ComponentBitmapGlyph}{00739}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ComponentBitmapGlyph}{ComponentBitmapGlyph}}(\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitmapGlyph}{BitmapGlyph}}):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00740}00740\ \ \ \ \ \textcolor{keyword}{def\ }toXML(self,\ strikeIndex,\ glyphName,\ writer,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00741}00741\ \ \ \ \ \ \ \ \ writer.begintag(self.\_\_class\_\_.\_\_name\_\_,\ [(\textcolor{stringliteral}{"{}name"{}},\ glyphName)])}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00742}00742\ \ \ \ \ \ \ \ \ writer.newline()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00743}00743\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00744}00744\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitmapGlyph_ad3df94ba30d995ff8527ac0c7ce19fa5}{writeMetrics}}(writer,\ ttFont)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00745}00745\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00746}00746\ \ \ \ \ \ \ \ \ writer.begintag(\textcolor{stringliteral}{"{}components"{}})}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00747}00747\ \ \ \ \ \ \ \ \ writer.newline()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00748}00748\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ curComponent\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ComponentBitmapGlyph_a1b5930f46900116896181e5d97587ca7}{componentArray}}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00749}00749\ \ \ \ \ \ \ \ \ \ \ \ \ curComponent.toXML(writer,\ ttFont)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00750}00750\ \ \ \ \ \ \ \ \ writer.endtag(\textcolor{stringliteral}{"{}components"{}})}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00751}00751\ \ \ \ \ \ \ \ \ writer.newline()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00752}00752\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00753}00753\ \ \ \ \ \ \ \ \ writer.endtag(self.\_\_class\_\_.\_\_name\_\_)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00754}00754\ \ \ \ \ \ \ \ \ writer.newline()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00755}00755\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00756}00756\ \ \ \ \ \textcolor{keyword}{def\ }fromXML(self,\ name,\ attrs,\ content,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00757}00757\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitmapGlyph_afe21b09e60c13ea88e57263e05133dbf}{readMetrics}}(name,\ attrs,\ content,\ ttFont)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00758}00758\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ element\ \textcolor{keywordflow}{in}\ content:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00759}00759\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ isinstance(element,\ tuple):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00760}00760\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00761}00761\ \ \ \ \ \ \ \ \ \ \ \ \ name,\ attr,\ content\ =\ element}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00762}00762\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ name\ ==\ \textcolor{stringliteral}{"{}components"{}}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00763}00763\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ComponentBitmapGlyph_a1b5930f46900116896181e5d97587ca7}{componentArray}}\ =\ []}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00764}00764\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ compElement\ \textcolor{keywordflow}{in}\ content:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00765}00765\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ isinstance(compElement,\ tuple):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00766}00766\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00767}00767\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ name,\ attrs,\ content\ =\ compElement}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00768}00768\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ name\ ==\ \textcolor{stringliteral}{"{}ebdtComponent"{}}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00769}00769\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ curComponent\ =\ \mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1EbdtComponent}{EbdtComponent}}()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00770}00770\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ curComponent.fromXML(name,\ attrs,\ content,\ ttFont)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00771}00771\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ComponentBitmapGlyph_a1b5930f46900116896181e5d97587ca7}{componentArray}}.append(curComponent)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00772}00772\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00773}00773\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ log.warning(\textcolor{stringliteral}{"{}'\%s'\ being\ ignored\ in\ component\ array."{}},\ name)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00774}00774\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00775}00775\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00776}\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__8}{00776}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__8}{ebdt\_bitmap\_format\_8}}(\mbox{\hyperlink{classBitmapPlusSmallMetricsMixin}{BitmapPlusSmallMetricsMixin}},\ \mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ComponentBitmapGlyph}{ComponentBitmapGlyph}}):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00777}00777\ \ \ \ \ \textcolor{keyword}{def\ }decompile(self):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00778}00778\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__8_a111e6aa4ccd5a1a502d35ffbd13f9c1c}{metrics}}\ =\ \mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1BitmapGlyphMetrics_1_1SmallGlyphMetrics}{SmallGlyphMetrics}}()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00779}00779\ \ \ \ \ \ \ \ \ dummy,\ data\ =\ sstruct.unpack2(smallGlyphMetricsFormat,\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitmapGlyph_ad77b757db60981eb3812b2d5ba32e159}{data}},\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__8_a111e6aa4ccd5a1a502d35ffbd13f9c1c}{metrics}})}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00780}00780\ \ \ \ \ \ \ \ \ data\ =\ data[1:]}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00781}00781\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00782}00782\ \ \ \ \ \ \ \ \ (numComponents,)\ =\ struct.unpack(\textcolor{stringliteral}{"{}>H"{}},\ data[:2])}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00783}00783\ \ \ \ \ \ \ \ \ data\ =\ data[2:]}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00784}00784\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ComponentBitmapGlyph_a1b5930f46900116896181e5d97587ca7}{componentArray}}\ =\ []}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00785}00785\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(numComponents):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00786}00786\ \ \ \ \ \ \ \ \ \ \ \ \ curComponent\ =\ \mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1EbdtComponent}{EbdtComponent}}()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00787}00787\ \ \ \ \ \ \ \ \ \ \ \ \ dummy,\ data\ =\ sstruct.unpack2(ebdtComponentFormat,\ data,\ curComponent)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00788}00788\ \ \ \ \ \ \ \ \ \ \ \ \ curComponent.name\ =\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitmapGlyph_a1ce02c9783592f391e1baa37eb292dda}{ttFont}}.getGlyphName(curComponent.glyphCode)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00789}00789\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ComponentBitmapGlyph_a1b5930f46900116896181e5d97587ca7}{componentArray}}.append(curComponent)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00790}00790\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00791}00791\ \ \ \ \ \textcolor{keyword}{def\ }compile(self,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00792}00792\ \ \ \ \ \ \ \ \ dataList\ =\ []}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00793}00793\ \ \ \ \ \ \ \ \ dataList.append(sstruct.pack(smallGlyphMetricsFormat,\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__8_a111e6aa4ccd5a1a502d35ffbd13f9c1c}{metrics}}))}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00794}00794\ \ \ \ \ \ \ \ \ dataList.append(b\textcolor{stringliteral}{"{}\(\backslash\)0"{}})}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00795}00795\ \ \ \ \ \ \ \ \ dataList.append(struct.pack(\textcolor{stringliteral}{"{}>H"{}},\ len(self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ComponentBitmapGlyph_a1b5930f46900116896181e5d97587ca7}{componentArray}})))}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00796}00796\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ curComponent\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ComponentBitmapGlyph_a1b5930f46900116896181e5d97587ca7}{componentArray}}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00797}00797\ \ \ \ \ \ \ \ \ \ \ \ \ curComponent.glyphCode\ =\ ttFont.getGlyphID(curComponent.name)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00798}00798\ \ \ \ \ \ \ \ \ \ \ \ \ dataList.append(sstruct.pack(ebdtComponentFormat,\ curComponent))}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00799}00799\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ bytesjoin(dataList)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00800}00800\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00801}00801\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00802}\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__9}{00802}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__9}{ebdt\_bitmap\_format\_9}}(\mbox{\hyperlink{classBitmapPlusBigMetricsMixin}{BitmapPlusBigMetricsMixin}},\ \mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ComponentBitmapGlyph}{ComponentBitmapGlyph}}):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00803}00803\ \ \ \ \ \textcolor{keyword}{def\ }decompile(self):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00804}00804\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__9_a4fef3a68f16f8e275090462fd3da8105}{metrics}}\ =\ \mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1BitmapGlyphMetrics_1_1BigGlyphMetrics}{BigGlyphMetrics}}()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00805}00805\ \ \ \ \ \ \ \ \ dummy,\ data\ =\ sstruct.unpack2(bigGlyphMetricsFormat,\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitmapGlyph_ad77b757db60981eb3812b2d5ba32e159}{data}},\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__9_a4fef3a68f16f8e275090462fd3da8105}{metrics}})}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00806}00806\ \ \ \ \ \ \ \ \ (numComponents,)\ =\ struct.unpack(\textcolor{stringliteral}{"{}>H"{}},\ data[:2])}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00807}00807\ \ \ \ \ \ \ \ \ data\ =\ data[2:]}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00808}00808\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ComponentBitmapGlyph_a1b5930f46900116896181e5d97587ca7}{componentArray}}\ =\ []}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00809}00809\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(numComponents):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00810}00810\ \ \ \ \ \ \ \ \ \ \ \ \ curComponent\ =\ \mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1EbdtComponent}{EbdtComponent}}()}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00811}00811\ \ \ \ \ \ \ \ \ \ \ \ \ dummy,\ data\ =\ sstruct.unpack2(ebdtComponentFormat,\ data,\ curComponent)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00812}00812\ \ \ \ \ \ \ \ \ \ \ \ \ curComponent.name\ =\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1BitmapGlyph_a1ce02c9783592f391e1baa37eb292dda}{ttFont}}.getGlyphName(curComponent.glyphCode)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00813}00813\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ComponentBitmapGlyph_a1b5930f46900116896181e5d97587ca7}{componentArray}}.append(curComponent)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00814}00814\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00815}00815\ \ \ \ \ \textcolor{keyword}{def\ }compile(self,\ ttFont):}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00816}00816\ \ \ \ \ \ \ \ \ dataList\ =\ []}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00817}00817\ \ \ \ \ \ \ \ \ dataList.append(sstruct.pack(bigGlyphMetricsFormat,\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ebdt__bitmap__format__9_a4fef3a68f16f8e275090462fd3da8105}{metrics}}))}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00818}00818\ \ \ \ \ \ \ \ \ dataList.append(struct.pack(\textcolor{stringliteral}{"{}>H"{}},\ len(self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ComponentBitmapGlyph_a1b5930f46900116896181e5d97587ca7}{componentArray}})))}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00819}00819\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ curComponent\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classfontTools_1_1ttLib_1_1tables_1_1E__B__D__T___1_1ComponentBitmapGlyph_a1b5930f46900116896181e5d97587ca7}{componentArray}}:}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00820}00820\ \ \ \ \ \ \ \ \ \ \ \ \ curComponent.glyphCode\ =\ ttFont.getGlyphID(curComponent.name)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00821}00821\ \ \ \ \ \ \ \ \ \ \ \ \ dataList.append(sstruct.pack(ebdtComponentFormat,\ curComponent))}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00822}00822\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ bytesjoin(dataList)}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00823}00823\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00824}00824\ }
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00825}00825\ \textcolor{comment}{\#\ Dictionary\ of\ bitmap\ formats\ to\ the\ class\ representing\ that\ format}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00826}00826\ \textcolor{comment}{\#\ currently\ only\ the\ ones\ listed\ in\ this\ map\ are\ the\ ones\ supported.}}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00827}00827\ ebdt\_bitmap\_classes\ =\ \{}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00828}00828\ \ \ \ \ 1:\ ebdt\_bitmap\_format\_1,}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00829}00829\ \ \ \ \ 2:\ ebdt\_bitmap\_format\_2,}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00830}00830\ \ \ \ \ 5:\ ebdt\_bitmap\_format\_5,}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00831}00831\ \ \ \ \ 6:\ ebdt\_bitmap\_format\_6,}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00832}00832\ \ \ \ \ 7:\ ebdt\_bitmap\_format\_7,}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00833}00833\ \ \ \ \ 8:\ ebdt\_bitmap\_format\_8,}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00834}00834\ \ \ \ \ 9:\ ebdt\_bitmap\_format\_9,}
\DoxyCodeLine{\Hypertarget{E__B__D__T___8py_source_l00835}00835\ \}}

\end{DoxyCode}
