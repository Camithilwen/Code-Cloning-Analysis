\doxysection{backend\+\_\+nbagg.\+py}
\hypertarget{backend__nbagg_8py_source}{}\label{backend__nbagg_8py_source}\index{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/matplotlib/backends/backend\_nbagg.py@{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/matplotlib/backends/backend\_nbagg.py}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00001}\mbox{\hyperlink{namespacematplotlib_1_1backends_1_1backend__nbagg}{00001}}\ \textcolor{stringliteral}{"{}"{}"{}Interactive\ figures\ in\ the\ IPython\ notebook."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00002}00002\ \textcolor{comment}{\#\ Note:\ There\ is\ a\ notebook\ in}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00003}00003\ \textcolor{comment}{\#\ lib/matplotlib/backends/web\_backend/nbagg\_uat.ipynb\ to\ help\ verify}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00004}00004\ \textcolor{comment}{\#\ that\ changes\ made\ maintain\ expected\ behaviour.}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00005}00005\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00006}00006\ \textcolor{keyword}{from}\ base64\ \textcolor{keyword}{import}\ b64encode}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00007}00007\ \textcolor{keyword}{import}\ io}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00008}00008\ \textcolor{keyword}{import}\ json}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00009}00009\ \textcolor{keyword}{import}\ pathlib}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00010}00010\ \textcolor{keyword}{import}\ uuid}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00011}00011\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00012}00012\ \textcolor{keyword}{from}\ ipykernel.comm\ \textcolor{keyword}{import}\ Comm}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00013}00013\ \textcolor{keyword}{from}\ IPython.display\ \textcolor{keyword}{import}\ display,\ Javascript,\ HTML}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00014}00014\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00015}00015\ \textcolor{keyword}{from}\ matplotlib\ \textcolor{keyword}{import}\ is\_interactive}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00016}00016\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacematplotlib_1_1__pylab__helpers}{matplotlib.\_pylab\_helpers}}\ \textcolor{keyword}{import}\ Gcf}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00017}00017\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacematplotlib_1_1backend__bases}{matplotlib.backend\_bases}}\ \textcolor{keyword}{import}\ \_Backend,\ CloseEvent,\ NavigationToolbar2}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00018}00018\ \textcolor{keyword}{from}\ .backend\_webagg\_core\ \textcolor{keyword}{import}\ (}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00019}00019\ \ \ \ \ FigureCanvasWebAggCore,\ FigureManagerWebAgg,\ NavigationToolbar2WebAgg)}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00020}00020\ \textcolor{keyword}{from}\ .backend\_webagg\_core\ \textcolor{keyword}{import}\ (\ \ \textcolor{comment}{\#\ noqa:\ F401\ \#\ pylint:\ disable=W0611}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00021}00021\ \ \ \ \ TimerTornado,\ TimerAsyncio)}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00022}00022\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00024}\mbox{\hyperlink{namespacematplotlib_1_1backends_1_1backend__nbagg_a277191e8be4079001bcf3b77e1e71688}{00024}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacematplotlib_1_1backends_1_1backend__nbagg_a277191e8be4079001bcf3b77e1e71688}{connection\_info}}():}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00025}00025\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00026}00026\ \textcolor{stringliteral}{\ \ \ \ Return\ a\ string\ showing\ the\ figure\ and\ connection\ status\ for\ the\ backend.}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00027}00027\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00028}00028\ \textcolor{stringliteral}{\ \ \ \ This\ is\ intended\ as\ a\ diagnostic\ tool,\ and\ not\ for\ general\ use.}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00029}00029\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00030}00030\ \ \ \ \ result\ =\ [}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00031}00031\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'\{fig\}\ -\/\ \{socket\}'}.format(}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00032}00032\ \ \ \ \ \ \ \ \ \ \ \ \ fig=(manager.canvas.figure.get\_label()}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00033}00033\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{or}\ f\textcolor{stringliteral}{"{}Figure\ \{manager.num\}"{}}),}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00034}00034\ \ \ \ \ \ \ \ \ \ \ \ \ socket=manager.web\_sockets)}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00035}00035\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ manager\ \textcolor{keywordflow}{in}\ Gcf.get\_all\_fig\_managers()}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00036}00036\ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00037}00037\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ \mbox{\hyperlink{namespacematplotlib_ab1fb05c0a38d53844216344e7c4bc1df}{is\_interactive}}():}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00038}00038\ \ \ \ \ \ \ \ \ result.append(f\textcolor{stringliteral}{'Figures\ pending\ show:\ \{len(Gcf.figs)\}'})}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00039}00039\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{'\(\backslash\)n'}.join(result)}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00040}00040\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00041}00041\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00042}00042\ \_FONT\_AWESOME\_CLASSES\ =\ \{\ \ \textcolor{comment}{\#\ font-\/awesome\ 4\ names}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00043}00043\ \ \ \ \ \textcolor{stringliteral}{'home'}:\ \textcolor{stringliteral}{'fa\ fa-\/home'},}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00044}00044\ \ \ \ \ \textcolor{stringliteral}{'back'}:\ \textcolor{stringliteral}{'fa\ fa-\/arrow-\/left'},}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00045}00045\ \ \ \ \ \textcolor{stringliteral}{'forward'}:\ \textcolor{stringliteral}{'fa\ fa-\/arrow-\/right'},}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00046}00046\ \ \ \ \ \textcolor{stringliteral}{'zoom\_to\_rect'}:\ \textcolor{stringliteral}{'fa\ fa-\/square-\/o'},}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00047}00047\ \ \ \ \ \textcolor{stringliteral}{'move'}:\ \textcolor{stringliteral}{'fa\ fa-\/arrows'},}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00048}00048\ \ \ \ \ \textcolor{stringliteral}{'download'}:\ \textcolor{stringliteral}{'fa\ fa-\/floppy-\/o'},}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00049}00049\ \ \ \ \ \textcolor{keywordtype}{None}:\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00050}00050\ \}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00051}00051\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00052}00052\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00053}\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1NavigationIPy}{00053}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1NavigationIPy}{NavigationIPy}}(\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__webagg__core_1_1NavigationToolbar2WebAgg}{NavigationToolbar2WebAgg}}):}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00054}00054\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00055}00055\ \ \ \ \ \textcolor{comment}{\#\ Use\ the\ standard\ toolbar\ items\ +\ download\ button}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00056}00056\ \ \ \ \ toolitems\ =\ [(text,\ tooltip\_text,}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00057}00057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_FONT\_AWESOME\_CLASSES[image\_file],\ name\_of\_method)}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00058}00058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ text,\ tooltip\_text,\ image\_file,\ name\_of\_method}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00059}00059\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{in}\ (NavigationToolbar2.toolitems\ +}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00060}00060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((\textcolor{stringliteral}{'Download'},\ \textcolor{stringliteral}{'Download\ plot'},\ \textcolor{stringliteral}{'download'},\ \textcolor{stringliteral}{'download'}),))}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00061}00061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ image\_file\ \textcolor{keywordflow}{in}\ \_FONT\_AWESOME\_CLASSES]}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00062}00062\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00063}00063\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00064}\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureManagerNbAgg}{00064}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureManagerNbAgg}{FigureManagerNbAgg}}(\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__webagg__core_1_1FigureManagerWebAgg}{FigureManagerWebAgg}}):}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00065}00065\ \ \ \ \ \_toolbar2\_class\ =\ ToolbarCls\ =\ NavigationIPy}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00066}00066\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00067}00067\ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self,\ canvas,\ num):}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00068}00068\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureManagerNbAgg_af1fa7dfd4353bc3b61fd690bfd2fe1a6}{\_shown}}\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00069}00069\ \ \ \ \ \ \ \ \ super().\_\_init\_\_(canvas,\ num)}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00070}00070\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00071}00071\ \ \ \ \ \textcolor{preprocessor}{@classmethod}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00072}\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureManagerNbAgg_a503b285b10408a54bd5ae3c3938e54e9}{00072}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureManagerNbAgg_a503b285b10408a54bd5ae3c3938e54e9}{create\_with\_canvas}}(cls,\ canvas\_class,\ figure,\ num):}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00073}00073\ \ \ \ \ \ \ \ \ canvas\ =\ canvas\_class(figure)}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00074}00074\ \ \ \ \ \ \ \ \ manager\ =\ cls(canvas,\ num)}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00075}00075\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \mbox{\hyperlink{namespacematplotlib_ab1fb05c0a38d53844216344e7c4bc1df}{is\_interactive}}():}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00076}00076\ \ \ \ \ \ \ \ \ \ \ \ \ manager.show()}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00077}00077\ \ \ \ \ \ \ \ \ \ \ \ \ canvas.draw\_idle()}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00078}00078\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00079}00079\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }destroy(event):}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00080}00080\ \ \ \ \ \ \ \ \ \ \ \ \ canvas.mpl\_disconnect(cid)}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00081}00081\ \ \ \ \ \ \ \ \ \ \ \ \ Gcf.destroy(manager)}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00082}00082\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00083}00083\ \ \ \ \ \ \ \ \ cid\ =\ canvas.mpl\_connect(\textcolor{stringliteral}{'close\_event'},\ destroy)}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00084}00084\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ manager}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00085}00085\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00086}00086\ \ \ \ \ \textcolor{keyword}{def\ }display\_js(self):}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00087}00087\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ XXX\ How\ to\ do\ this\ just\ once?\ It\ has\ to\ deal\ with\ multiple}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00088}00088\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ browser\ instances\ using\ the\ same\ kernel\ (require.js\ -\/\ but\ the}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00089}00089\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ file\ isn't\ static?).}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00090}00090\ \ \ \ \ \ \ \ \ display(Javascript(FigureManagerNbAgg.get\_javascript()))}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00091}00091\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00092}\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureManagerNbAgg_af07ec4113c11c69db0b9babd3506917f}{00092}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureManagerNbAgg_af07ec4113c11c69db0b9babd3506917f}{show}}(self):}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00093}00093\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureManagerNbAgg_af1fa7dfd4353bc3b61fd690bfd2fe1a6}{\_shown}}:}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00094}00094\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureManagerNbAgg_a443c724bc4db0e5311900dd01d2fe17a}{display\_js}}()}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00095}00095\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureManagerNbAgg_ada54e768b016a3a132a72cb195ea39d5}{\_create\_comm}}()}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00096}00096\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00097}00097\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backend__bases_1_1FigureManagerBase_ae355aa0633d6b4da5e2e698b007b4c3f}{canvas}}.draw\_idle()}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00098}00098\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureManagerNbAgg_af1fa7dfd4353bc3b61fd690bfd2fe1a6}{\_shown}}\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00099}00099\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ plt.figure\ adds\ an\ event\ which\ makes\ the\ figure\ in\ focus\ the\ active}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00100}00100\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ one.\ Disable\ this\ behaviour,\ as\ it\ results\ in\ figures\ being\ put\ as}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00101}00101\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ the\ active\ figure\ after\ they\ have\ been\ shown,\ even\ in\ non-\/interactive}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00102}00102\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ mode.}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00103}00103\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ hasattr(self,\ \textcolor{stringliteral}{'\_cidgcf'}):}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00104}00104\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backend__bases_1_1FigureManagerBase_ae355aa0633d6b4da5e2e698b007b4c3f}{canvas}}.mpl\_disconnect(self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureManagerNbAgg_a64203d93cc7a73bea9d2de91ec6d7fb8}{\_cidgcf}})}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00105}00105\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ \mbox{\hyperlink{namespacematplotlib_ab1fb05c0a38d53844216344e7c4bc1df}{is\_interactive}}():}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00106}00106\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacematplotlib_1_1__pylab__helpers}{matplotlib.\_pylab\_helpers}}\ \textcolor{keyword}{import}\ Gcf}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00107}00107\ \ \ \ \ \ \ \ \ \ \ \ \ Gcf.figs.pop(self.\mbox{\hyperlink{classmatplotlib_1_1backend__bases_1_1FigureManagerBase_aba55ac119779c90c08e4034713892c63}{num}},\ \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00108}00108\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00109}\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureManagerNbAgg_a45d3a147dd3482ca682f103fefcdd29a}{00109}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureManagerNbAgg_a45d3a147dd3482ca682f103fefcdd29a}{reshow}}(self):}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00110}00110\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00111}00111\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ A\ special\ method\ to\ re-\/show\ the\ figure\ in\ the\ notebook.}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00112}00112\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00113}00113\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00114}00114\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureManagerNbAgg_af1fa7dfd4353bc3b61fd690bfd2fe1a6}{\_shown}}\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00115}00115\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backend__bases_1_1FigureManagerBase_abaaeaa3f668eb1e16bdfe1d0855168c5}{show}}()}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00116}00116\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00117}00117\ \ \ \ \ \textcolor{preprocessor}{@property}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00118}00118\ \ \ \ \ \textcolor{keyword}{def\ }connected(self):}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00119}00119\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ bool(self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureManagerNbAgg}{web\_sockets}})}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00120}00120\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00121}00121\ \ \ \ \ \textcolor{preprocessor}{@classmethod}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00122}00122\ \ \ \ \ \textcolor{keyword}{def\ }get\_javascript(cls,\ stream=None):}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00123}00123\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ stream\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00124}00124\ \ \ \ \ \ \ \ \ \ \ \ \ output\ =\ io.StringIO()}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00125}00125\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00126}00126\ \ \ \ \ \ \ \ \ \ \ \ \ output\ =\ stream}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00127}00127\ \ \ \ \ \ \ \ \ super().get\_javascript(stream=output)}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00128}00128\ \ \ \ \ \ \ \ \ output.write((pathlib.Path(\_\_file\_\_).parent}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00129}00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ /\ \textcolor{stringliteral}{"{}web\_backend/js/nbagg\_mpl.js"{}})}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00130}00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .read\_text(encoding=\textcolor{stringliteral}{"{}utf-\/8"{}}))}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00131}00131\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ stream\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00132}00132\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ output.getvalue()}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00133}00133\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00134}00134\ \ \ \ \ \textcolor{keyword}{def\ }\_create\_comm(self):}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00135}00135\ \ \ \ \ \ \ \ \ comm\ =\ \mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket}{CommSocket}}(self)}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00136}00136\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__webagg__core_1_1FigureManagerWebAgg_a2b441c1ff03789702cf139172396f79f}{add\_web\_socket}}(comm)}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00137}00137\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ comm}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00138}00138\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00139}00139\ \ \ \ \ \textcolor{keyword}{def\ }destroy(self):}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00140}00140\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__webagg__core_1_1FigureManagerWebAgg_a179799014f7d964a472791d34e07bbc7}{\_send\_event}}(\textcolor{stringliteral}{'close'})}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00141}00141\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ need\ to\ copy\ comms\ as\ callbacks\ will\ modify\ this\ list}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00142}00142\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ comm\ \textcolor{keywordflow}{in}\ list(self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureManagerNbAgg}{web\_sockets}}):}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00143}00143\ \ \ \ \ \ \ \ \ \ \ \ \ comm.on\_close()}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00144}00144\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureManagerNbAgg_a38445157b22fe990a9126df56438e14d}{clearup\_closed}}()}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00145}00145\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00146}\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureManagerNbAgg_a38445157b22fe990a9126df56438e14d}{00146}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureManagerNbAgg_a38445157b22fe990a9126df56438e14d}{clearup\_closed}}(self):}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00147}00147\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Clear\ up\ any\ closed\ Comms."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00148}00148\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureManagerNbAgg}{web\_sockets}}\ =\ \{socket\ \textcolor{keywordflow}{for}\ socket\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureManagerNbAgg}{web\_sockets}}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00149}00149\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ socket.is\_open()\}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00150}00150\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00151}00151\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ len(self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureManagerNbAgg}{web\_sockets}})\ ==\ 0:}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00152}00152\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classmatplotlib_1_1backend__bases_1_1CloseEvent}{CloseEvent}}(\textcolor{stringliteral}{"{}close\_event"{}},\ self.\mbox{\hyperlink{classmatplotlib_1_1backend__bases_1_1FigureManagerBase_ae355aa0633d6b4da5e2e698b007b4c3f}{canvas}}).\_process()}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00153}00153\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00154}00154\ \ \ \ \ \textcolor{keyword}{def\ }remove\_comm(self,\ comm\_id):}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00155}00155\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureManagerNbAgg}{web\_sockets}}\ =\ \{socket\ \textcolor{keywordflow}{for}\ socket\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureManagerNbAgg}{web\_sockets}}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00156}00156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ socket.comm.comm\_id\ !=\ comm\_id\}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00157}00157\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00158}00158\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00159}\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureCanvasNbAgg}{00159}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1FigureCanvasNbAgg}{FigureCanvasNbAgg}}(\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__webagg__core_1_1FigureCanvasWebAggCore}{FigureCanvasWebAggCore}}):}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00160}00160\ \ \ \ \ manager\_class\ =\ FigureManagerNbAgg}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00161}00161\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00162}00162\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00163}\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket}{00163}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket}{CommSocket}}:}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00164}00164\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00165}00165\ \textcolor{stringliteral}{\ \ \ \ Manages\ the\ Comm\ connection\ between\ IPython\ and\ the\ browser\ (client).}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00166}00166\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00167}00167\ \textcolor{stringliteral}{\ \ \ \ Comms\ are\ 2\ way,\ with\ the\ CommSocket\ being\ able\ to\ publish\ a\ message}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00168}00168\ \textcolor{stringliteral}{\ \ \ \ via\ the\ send\_json\ method,\ and\ handle\ a\ message\ with\ on\_message.\ On\ the}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00169}00169\ \textcolor{stringliteral}{\ \ \ \ JS\ side\ figure.send\_message\ and\ figure.ws.onmessage\ do\ the\ sending\ and}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00170}00170\ \textcolor{stringliteral}{\ \ \ \ receiving\ respectively.}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00171}00171\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00172}00172\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00173}00173\ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self,\ manager):}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00174}00174\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket_a1c353abd1b21a98263db8a1f39fa3d49}{supports\_binary}}\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00175}00175\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket_aa425f5864211cd83e421fe39b4f2ad67}{manager}}\ =\ manager}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00176}00176\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket_a146e2a6e4e69325a0a99e6b94115f910}{uuid}}\ =\ str(uuid.uuid4())}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00177}00177\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Publish\ an\ output\ area\ with\ a\ unique\ ID.\ The\ javascript\ can\ then}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00178}00178\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ hook\ into\ this\ area.}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00179}00179\ \ \ \ \ \ \ \ \ display(HTML(\textcolor{stringliteral}{"{}<div\ id=\%r></div>"{}}\ \%\ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket_a146e2a6e4e69325a0a99e6b94115f910}{uuid}}))}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00180}00180\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00181}00181\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket_ae70c65325f63d0cbab8c44670476aa88}{comm}}\ =\ Comm(\textcolor{stringliteral}{'matplotlib'},\ data=\{\textcolor{stringliteral}{'id'}:\ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket_a146e2a6e4e69325a0a99e6b94115f910}{uuid}}\})}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00182}00182\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ AttributeError\ \textcolor{keyword}{as}\ err:}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00183}00183\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classRuntimeError}{RuntimeError}}(\textcolor{stringliteral}{'Unable\ to\ create\ an\ IPython\ notebook\ Comm\ '}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00184}00184\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'instance.\ Are\ you\ in\ the\ IPython\ '}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00185}00185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'notebook?'})\ \textcolor{keyword}{from}\ err}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00186}00186\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket_ae70c65325f63d0cbab8c44670476aa88}{comm}}.on\_msg(self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket_a1f6b6bb5d24165438d9442ecf433261c}{on\_message}})}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00187}00187\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00188}00188\ \ \ \ \ \ \ \ \ manager\ =\ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket_aa425f5864211cd83e421fe39b4f2ad67}{manager}}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00189}00189\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket_a60e0e2fd05e66c5384eaa713aabbffae}{\_ext\_close}}\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00190}00190\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00191}00191\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_on\_close(close\_message):}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00192}00192\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket_a60e0e2fd05e66c5384eaa713aabbffae}{\_ext\_close}}\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00193}00193\ \ \ \ \ \ \ \ \ \ \ \ \ manager.remove\_comm(close\_message[\textcolor{stringliteral}{'content'}][\textcolor{stringliteral}{'comm\_id'}])}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00194}00194\ \ \ \ \ \ \ \ \ \ \ \ \ manager.clearup\_closed()}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00195}00195\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00196}00196\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket_ae70c65325f63d0cbab8c44670476aa88}{comm}}.on\_close(\_on\_close)}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00197}00197\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00198}00198\ \ \ \ \ \textcolor{keyword}{def\ }is\_open(self):}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00199}00199\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keywordflow}{not}\ (self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket_a60e0e2fd05e66c5384eaa713aabbffae}{\_ext\_close}}\ \textcolor{keywordflow}{or}\ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket_ae70c65325f63d0cbab8c44670476aa88}{comm}}.\_closed)}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00200}00200\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00201}00201\ \ \ \ \ \textcolor{keyword}{def\ }on\_close(self):}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00202}00202\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ When\ the\ socket\ is\ closed,\ deregister\ the\ websocket\ with}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00203}00203\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ the\ FigureManager.}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00204}00204\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket_a0fa8d5a4995d4d1bd10d892ab423e61e}{is\_open}}():}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00205}00205\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00206}00206\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket_ae70c65325f63d0cbab8c44670476aa88}{comm}}.close()}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00207}00207\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ KeyError:}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00208}00208\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ apparently\ already\ cleaned\ it\ up?}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00209}00209\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00210}00210\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00211}00211\ \ \ \ \ \textcolor{keyword}{def\ }send\_json(self,\ content):}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00212}00212\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket_ae70c65325f63d0cbab8c44670476aa88}{comm}}.send(\{\textcolor{stringliteral}{'data'}:\ json.dumps(content)\})}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00213}00213\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00214}00214\ \ \ \ \ \textcolor{keyword}{def\ }send\_binary(self,\ blob):}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00215}00215\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket_a1c353abd1b21a98263db8a1f39fa3d49}{supports\_binary}}:}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00216}00216\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket_ae70c65325f63d0cbab8c44670476aa88}{comm}}.send(\{\textcolor{stringliteral}{'blob'}:\ \textcolor{stringliteral}{'image/png'}\},\ buffers=[blob])}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00217}00217\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00218}00218\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ comm\ is\ ASCII,\ so\ we\ send\ the\ image\ in\ base64\ encoded\ data}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00219}00219\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ URL\ form.}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00220}00220\ \ \ \ \ \ \ \ \ \ \ \ \ data\ =\ b64encode(blob).decode(\textcolor{stringliteral}{'ascii'})}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00221}00221\ \ \ \ \ \ \ \ \ \ \ \ \ data\_uri\ =\ f\textcolor{stringliteral}{"{}data:image/png;base64,\{data\}"{}}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00222}00222\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket_ae70c65325f63d0cbab8c44670476aa88}{comm}}.send(\{\textcolor{stringliteral}{'data'}:\ data\_uri\})}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00223}00223\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00224}00224\ \ \ \ \ \textcolor{keyword}{def\ }on\_message(self,\ message):}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00225}00225\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ 'supports\_binary'\ message\ is\ relevant\ to\ the}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00226}00226\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ websocket\ itself.\ \ The\ other\ messages\ get\ passed\ along}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00227}00227\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ to\ matplotlib\ as-\/is.}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00228}00228\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00229}00229\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Every\ message\ has\ a\ "{}type"{}\ and\ a\ "{}figure\_id"{}.}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00230}00230\ \ \ \ \ \ \ \ \ message\ =\ json.loads(message[\textcolor{stringliteral}{'content'}][\textcolor{stringliteral}{'data'}])}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00231}00231\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ message[\textcolor{stringliteral}{'type'}]\ ==\ \textcolor{stringliteral}{'closing'}:}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00232}00232\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket_a975a531850ca1d54054c55892e72813c}{on\_close}}()}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00233}00233\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket_aa425f5864211cd83e421fe39b4f2ad67}{manager}}.clearup\_closed()}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00234}00234\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ message[\textcolor{stringliteral}{'type'}]\ ==\ \textcolor{stringliteral}{'supports\_binary'}:}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00235}00235\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket_a1c353abd1b21a98263db8a1f39fa3d49}{supports\_binary}}\ =\ message[\textcolor{stringliteral}{'value'}]}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00236}00236\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00237}00237\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1CommSocket_aa425f5864211cd83e421fe39b4f2ad67}{manager}}.handle\_json(message)}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00238}00238\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00239}00239\ }
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00240}00240\ \textcolor{preprocessor}{@\_Backend.export}}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00241}\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1__BackendNbAgg}{00241}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__nbagg_1_1__BackendNbAgg}{\_BackendNbAgg}}(\mbox{\hyperlink{classmatplotlib_1_1backend__bases_1_1__Backend}{\_Backend}}):}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00242}00242\ \ \ \ \ FigureCanvas\ =\ FigureCanvasNbAgg}
\DoxyCodeLine{\Hypertarget{backend__nbagg_8py_source_l00243}00243\ \ \ \ \ FigureManager\ =\ FigureManagerNbAgg}

\end{DoxyCode}
