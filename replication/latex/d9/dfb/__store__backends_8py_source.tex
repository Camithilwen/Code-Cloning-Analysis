\doxysection{\+\_\+store\+\_\+backends.\+py}
\hypertarget{__store__backends_8py_source}{}\label{__store__backends_8py_source}\index{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/joblib/\_store\_backends.py@{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/joblib/\_store\_backends.py}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00001}\mbox{\hyperlink{namespacejoblib_1_1__store__backends}{00001}}\ \textcolor{stringliteral}{"{}"{}"{}Storage\ providers\ backends\ for\ Memory\ caching."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00003}00003\ \textcolor{keyword}{import}\ collections}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00004}00004\ \textcolor{keyword}{import}\ datetime}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00005}00005\ \textcolor{keyword}{import}\ json}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00006}00006\ \textcolor{keyword}{import}\ operator}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00007}00007\ \textcolor{keyword}{import}\ os}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00008}00008\ \textcolor{keyword}{import}\ os.path}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00009}00009\ \textcolor{keyword}{import}\ re}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00010}00010\ \textcolor{keyword}{import}\ shutil}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00011}00011\ \textcolor{keyword}{import}\ threading}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00012}00012\ \textcolor{keyword}{import}\ time}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00013}00013\ \textcolor{keyword}{import}\ warnings}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00014}00014\ \textcolor{keyword}{from}\ abc\ \textcolor{keyword}{import}\ ABCMeta,\ abstractmethod}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00015}00015\ \textcolor{keyword}{from}\ pickle\ \textcolor{keyword}{import}\ PicklingError}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00016}00016\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00017}00017\ \textcolor{keyword}{from}\ .\ \textcolor{keyword}{import}\ numpy\_pickle}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00018}00018\ \textcolor{keyword}{from}\ .backports\ \textcolor{keyword}{import}\ concurrency\_safe\_rename}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00019}00019\ \textcolor{keyword}{from}\ .disk\ \textcolor{keyword}{import}\ memstr\_to\_bytes,\ mkdirp,\ rm\_subdirs}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00020}00020\ \textcolor{keyword}{from}\ .logger\ \textcolor{keyword}{import}\ format\_time}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00021}00021\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00022}00022\ CacheItemInfo\ =\ collections.namedtuple(\textcolor{stringliteral}{"{}CacheItemInfo"{}},\ \textcolor{stringliteral}{"{}path\ size\ last\_access"{}})}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00024}00024\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00025}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1CacheWarning}{00025}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1CacheWarning}{CacheWarning}}(\mbox{\hyperlink{classWarning}{Warning}}):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00026}00026\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Warning\ to\ capture\ dump\ failures\ except\ for\ PicklingError."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00027}00027\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00028}00028\ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00029}00029\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00030}00030\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00031}\mbox{\hyperlink{namespacejoblib_1_1__store__backends_addd7062f49945b110db9acb09cc06d66}{00031}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacejoblib_1_1__store__backends_addd7062f49945b110db9acb09cc06d66}{concurrency\_safe\_write}}(object\_to\_write,\ filename,\ write\_func):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00032}00032\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Writes\ an\ object\ into\ a\ unique\ file\ in\ a\ concurrency-\/safe\ way."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00033}00033\ \ \ \ \ thread\_id\ =\ id(threading.current\_thread())}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00034}00034\ \ \ \ \ temporary\_filename\ =\ \textcolor{stringliteral}{"{}\{\}.thread-\/\{\}-\/pid-\/\{\}"{}}.format(filename,\ thread\_id,\ os.getpid())}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00035}00035\ \ \ \ \ write\_func(object\_to\_write,\ temporary\_filename)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00036}00036\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00037}00037\ \ \ \ \ \textcolor{keywordflow}{return}\ temporary\_filename}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00038}00038\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00039}00039\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00040}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendBase}{00040}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendBase}{StoreBackendBase}}(\mbox{\hyperlink{classmetaclass}{metaclass}}=ABCMeta):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00041}00041\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Helper\ Abstract\ Base\ Class\ which\ defines\ all\ methods\ that}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00042}00042\ \textcolor{stringliteral}{\ \ \ \ a\ StorageBackend\ must\ implement."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00043}00043\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00044}00044\ \ \ \ \ location\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00045}00045\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00046}00046\ \ \ \ \ \textcolor{preprocessor}{@abstractmethod}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00047}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendBase_a0f4fd6448771482db45741f8aadf66b8}{00047}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendBase_a0f4fd6448771482db45741f8aadf66b8}{\_open\_item}}(self,\ f,\ mode):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00048}00048\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Opens\ an\ item\ on\ the\ store\ and\ return\ a\ file-\/like\ object.}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00049}00049\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00050}00050\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ This\ method\ is\ private\ and\ only\ used\ by\ the\ StoreBackendMixin\ object.}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00051}00051\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00052}00052\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Parameters}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00053}00053\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00054}00054\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ f:\ a\ file-\/like\ object}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00055}00055\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ The\ file-\/like\ object\ where\ an\ item\ is\ stored\ and\ retrieved}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00056}00056\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ mode:\ string,\ optional}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00057}00057\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ the\ mode\ in\ which\ the\ file-\/like\ object\ is\ opened\ allowed\ valued\ are}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00058}00058\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ 'rb',\ 'wb'}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00059}00059\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00060}00060\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Returns}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00061}00061\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ -\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00062}00062\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ a\ file-\/like\ object}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00063}00063\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00064}00064\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00065}00065\ \ \ \ \ \textcolor{preprocessor}{@abstractmethod}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00066}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendBase_ac459cce494c4f2563347094d42a037a6}{00066}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendBase_ac459cce494c4f2563347094d42a037a6}{\_item\_exists}}(self,\ location):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00067}00067\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Checks\ if\ an\ item\ location\ exists\ in\ the\ store.}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00068}00068\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00069}00069\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ This\ method\ is\ private\ and\ only\ used\ by\ the\ StoreBackendMixin\ object.}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00070}00070\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00071}00071\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Parameters}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00072}00072\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00073}00073\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ location:\ string}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00074}00074\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ The\ location\ of\ an\ item.\ On\ a\ filesystem,\ this\ corresponds\ to\ the}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00075}00075\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ absolute\ path,\ including\ the\ filename,\ of\ a\ file.}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00076}00076\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00077}00077\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Returns}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00078}00078\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ -\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00079}00079\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ True\ if\ the\ item\ exists,\ False\ otherwise}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00080}00080\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00081}00081\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00082}00082\ \ \ \ \ \textcolor{preprocessor}{@abstractmethod}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00083}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendBase_aa33141a32406869bbd227c15813fbd4e}{00083}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendBase_aa33141a32406869bbd227c15813fbd4e}{\_move\_item}}(self,\ src,\ dst):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00084}00084\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Moves\ an\ item\ from\ src\ to\ dst\ in\ the\ store.}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00085}00085\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00086}00086\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ This\ method\ is\ private\ and\ only\ used\ by\ the\ StoreBackendMixin\ object.}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00087}00087\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00088}00088\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Parameters}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00089}00089\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00090}00090\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ src:\ string}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00091}00091\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ The\ source\ location\ of\ an\ item}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00092}00092\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ dst:\ string}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00093}00093\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ The\ destination\ location\ of\ an\ item}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00094}00094\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00095}00095\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00096}00096\ \ \ \ \ \textcolor{preprocessor}{@abstractmethod}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00097}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendBase_ac1ae6c49353aec3303772919202d8267}{00097}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendBase_ac1ae6c49353aec3303772919202d8267}{create\_location}}(self,\ location):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00098}00098\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Creates\ a\ location\ on\ the\ store.}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00099}00099\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00100}00100\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Parameters}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00101}00101\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00102}00102\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ location:\ string}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00103}00103\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ The\ location\ in\ the\ store.\ On\ a\ filesystem,\ this\ corresponds\ to\ a}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00104}00104\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ directory.}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00105}00105\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00106}00106\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00107}00107\ \ \ \ \ \textcolor{preprocessor}{@abstractmethod}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00108}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendBase_a5b526354c8a41a638f368e7ab97f6b73}{00108}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendBase_a5b526354c8a41a638f368e7ab97f6b73}{clear\_location}}(self,\ location):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00109}00109\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Clears\ a\ location\ on\ the\ store.}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00110}00110\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00111}00111\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Parameters}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00112}00112\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00113}00113\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ location:\ string}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00114}00114\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ The\ location\ in\ the\ store.\ On\ a\ filesystem,\ this\ corresponds\ to\ a}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00115}00115\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ directory\ or\ a\ filename\ absolute\ path}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00116}00116\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00117}00117\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00118}00118\ \ \ \ \ \textcolor{preprocessor}{@abstractmethod}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00119}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendBase_a5194606fa1d18ddada626d53af2959f7}{00119}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendBase_a5194606fa1d18ddada626d53af2959f7}{get\_items}}(self):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00120}00120\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Returns\ the\ whole\ list\ of\ items\ available\ in\ the\ store.}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00121}00121\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00122}00122\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Returns}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00123}00123\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ -\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00124}00124\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ The\ list\ of\ items\ identified\ by\ their\ ids\ (e.g\ filename\ in\ a}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00125}00125\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ filesystem).}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00126}00126\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00127}00127\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00128}00128\ \ \ \ \ \textcolor{preprocessor}{@abstractmethod}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00129}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendBase_a2667c27e0a1195042dd0789e46823721}{00129}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendBase_a2667c27e0a1195042dd0789e46823721}{configure}}(self,\ location,\ verbose=0,\ backend\_options=dict()):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00130}00130\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Configures\ the\ store.}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00131}00131\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00132}00132\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Parameters}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00133}00133\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00134}00134\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ location:\ string}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00135}00135\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ The\ base\ location\ used\ by\ the\ store.\ On\ a\ filesystem,\ this}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00136}00136\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ corresponds\ to\ a\ directory.}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00137}00137\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ verbose:\ int}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00138}00138\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ The\ level\ of\ verbosity\ of\ the\ store}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00139}00139\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ backend\_options:\ dict}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00140}00140\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ Contains\ a\ dictionary\ of\ named\ parameters\ used\ to\ configure\ the}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00141}00141\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ store\ backend.}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00142}00142\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00143}00143\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00144}00144\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00145}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin}{00145}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin}{StoreBackendMixin}}(object):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00146}00146\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Class\ providing\ all\ logic\ for\ managing\ the\ store\ in\ a\ generic\ way.}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00147}00147\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00148}00148\ \textcolor{stringliteral}{\ \ \ \ The\ StoreBackend\ subclass\ has\ to\ implement\ 3\ methods:\ create\_location,}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00149}00149\ \textcolor{stringliteral}{\ \ \ \ clear\_location\ and\ configure.\ The\ StoreBackend\ also\ has\ to\ provide}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00150}00150\ \textcolor{stringliteral}{\ \ \ \ a\ private\ \_open\_item,\ \_item\_exists\ and\ \_move\_item\ methods.\ The\ \_open\_item}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00151}00151\ \textcolor{stringliteral}{\ \ \ \ method\ has\ to\ have\ the\ same\ signature\ as\ the\ builtin\ open\ and\ return\ a}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00152}00152\ \textcolor{stringliteral}{\ \ \ \ file-\/like\ object.}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00153}00153\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00154}00154\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00155}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a3ae01c6098a68cec699a6a0bb1252126}{00155}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a3ae01c6098a68cec699a6a0bb1252126}{load\_item}}(self,\ call\_id,\ verbose=1,\ timestamp=None,\ metadata=None):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00156}00156\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Load\ an\ item\ from\ the\ store\ given\ its\ id\ as\ a\ list\ of\ str."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00157}00157\ \ \ \ \ \ \ \ \ full\_path\ =\ os.path.join(self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_af93bc19a7c9f20d252047c3dca816efb}{location}},\ *call\_id)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00158}00158\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00159}00159\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ verbose\ >\ 1:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00160}00160\ \ \ \ \ \ \ \ \ \ \ \ \ ts\_string\ =\ (}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00161}00161\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{:\ <16\}"{}}.format(format\_time(time.time()\ -\/\ timestamp))}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00162}00162\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ timestamp\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00163}00163\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00164}00164\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00165}00165\ \ \ \ \ \ \ \ \ \ \ \ \ signature\ =\ os.path.basename(call\_id[0])}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00166}00166\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ metadata\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}\ \textcolor{keywordflow}{and}\ \textcolor{stringliteral}{"{}input\_args"{}}\ \textcolor{keywordflow}{in}\ metadata:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00167}00167\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ kwargs\ =\ \textcolor{stringliteral}{"{},\ "{}}.join(}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00168}00168\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{\}=\{\}"{}}.format(*item)\ \textcolor{keywordflow}{for}\ item\ \textcolor{keywordflow}{in}\ metadata[\textcolor{stringliteral}{"{}input\_args"{}}].items()}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00169}00169\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00170}00170\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ signature\ +=\ \textcolor{stringliteral}{"{}(\{\})"{}}.format(kwargs)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00171}00171\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}[Memory]\{\}:\ Loading\ \{\}"{}}.format(ts\_string,\ signature)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00172}00172\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ verbose\ <\ 10:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00173}00173\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ print(\textcolor{stringliteral}{"{}\{0\}..."{}}.format(msg))}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00174}00174\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00175}00175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ print(\textcolor{stringliteral}{"{}\{0\}\ from\ \{1\}"{}}.format(msg,\ full\_path))}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00176}00176\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00177}00177\ \ \ \ \ \ \ \ \ mmap\_mode\ =\ \textcolor{keywordtype}{None}\ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ hasattr(self,\ \textcolor{stringliteral}{"{}mmap\_mode"{}})\ \textcolor{keywordflow}{else}\ self.mmap\_mode}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00178}00178\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00179}00179\ \ \ \ \ \ \ \ \ filename\ =\ os.path.join(full\_path,\ \textcolor{stringliteral}{"{}output.pkl"{}})}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00180}00180\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ self.\_item\_exists(filename):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00181}00181\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classKeyError}{KeyError}}(}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00182}00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Non-\/existing\ item\ (may\ have\ been\ "{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00183}00183\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}cleared).\(\backslash\)nFile\ \%s\ does\ not\ exist"{}}\ \%\ filename}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00184}00184\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00185}00185\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00186}00186\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ file-\/like\ object\ cannot\ be\ used\ when\ mmap\_mode\ is\ set}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00187}00187\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ mmap\_mode\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00188}00188\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ self.\_open\_item(filename,\ \textcolor{stringliteral}{"{}rb"{}})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00189}00189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ item\ =\ numpy\_pickle.load(f)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00190}00190\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00191}00191\ \ \ \ \ \ \ \ \ \ \ \ \ item\ =\ numpy\_pickle.load(filename,\ mmap\_mode=mmap\_mode)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00192}00192\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ item}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00193}00193\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00194}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a598051803d062836cc95a9788da4960b}{00194}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a598051803d062836cc95a9788da4960b}{dump\_item}}(self,\ call\_id,\ item,\ verbose=1):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00195}00195\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Dump\ an\ item\ in\ the\ store\ at\ the\ id\ given\ as\ a\ list\ of\ str."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00196}00196\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00197}00197\ \ \ \ \ \ \ \ \ \ \ \ \ item\_path\ =\ os.path.join(self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_af93bc19a7c9f20d252047c3dca816efb}{location}},\ *call\_id)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00198}00198\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ self.\_item\_exists(item\_path):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00199}00199\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.create\_location(item\_path)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00200}00200\ \ \ \ \ \ \ \ \ \ \ \ \ filename\ =\ os.path.join(item\_path,\ \textcolor{stringliteral}{"{}output.pkl"{}})}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00201}00201\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ verbose\ >\ 10:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00202}00202\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ print(\textcolor{stringliteral}{"{}Persisting\ in\ \%s"{}}\ \%\ item\_path)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00203}00203\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00204}00204\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }write\_func(to\_write,\ dest\_filename):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00205}00205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ self.\_open\_item(dest\_filename,\ \textcolor{stringliteral}{"{}wb"{}})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00206}00206\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00207}00207\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ numpy\_pickle.dump(to\_write,\ f,\ compress=self.compress)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00208}00208\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ PicklingError\ \textcolor{keyword}{as}\ e:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00209}00209\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ TODO(1.5)\ turn\ into\ error}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00210}00210\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ warnings.warn(}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00211}00211\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Unable\ to\ cache\ to\ disk:\ failed\ to\ pickle\ "{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00212}00212\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}output.\ In\ version\ 1.5\ this\ will\ raise\ an\ "{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00213}00213\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ f\textcolor{stringliteral}{"{}exception.\ Exception:\ \{e\}."{}},}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00214}00214\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FutureWarning,}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00215}00215\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00216}00216\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00217}00217\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a736dc9aef7cb86d2882645756f7fb5f6}{\_concurrency\_safe\_write}}(item,\ filename,\ write\_func)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00218}00218\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ Exception\ \textcolor{keyword}{as}\ e:\ \ \textcolor{comment}{\#\ noqa:\ E722}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00219}00219\ \ \ \ \ \ \ \ \ \ \ \ \ warnings.warn(}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00220}00220\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Unable\ to\ cache\ to\ disk.\ Possibly\ a\ race\ condition\ in\ the\ "{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00221}00221\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ f\textcolor{stringliteral}{"{}creation\ of\ the\ directory.\ Exception:\ \{e\}."{}},}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00222}00222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CacheWarning,}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00223}00223\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00224}00224\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00225}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a344d58072e3aedae80b020c60ab86770}{00225}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a344d58072e3aedae80b020c60ab86770}{clear\_item}}(self,\ call\_id):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00226}00226\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Clear\ the\ item\ at\ the\ id,\ given\ as\ a\ list\ of\ str."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00227}00227\ \ \ \ \ \ \ \ \ item\_path\ =\ os.path.join(self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_af93bc19a7c9f20d252047c3dca816efb}{location}},\ *call\_id)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00228}00228\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\_item\_exists(item\_path):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00229}00229\ \ \ \ \ \ \ \ \ \ \ \ \ self.clear\_location(item\_path)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00230}00230\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00231}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a0863e708091f434befd593ff1b25771a}{00231}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a0863e708091f434befd593ff1b25771a}{contains\_item}}(self,\ call\_id):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00232}00232\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Check\ if\ there\ is\ an\ item\ at\ the\ id,\ given\ as\ a\ list\ of\ str."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00233}00233\ \ \ \ \ \ \ \ \ item\_path\ =\ os.path.join(self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_af93bc19a7c9f20d252047c3dca816efb}{location}},\ *call\_id)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00234}00234\ \ \ \ \ \ \ \ \ filename\ =\ os.path.join(item\_path,\ \textcolor{stringliteral}{"{}output.pkl"{}})}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00235}00235\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00236}00236\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self.\_item\_exists(filename)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00237}00237\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00238}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a2eec8b89a8157db46a1814b34b99419e}{00238}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a2eec8b89a8157db46a1814b34b99419e}{get\_item\_info}}(self,\ call\_id):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00239}00239\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Return\ information\ about\ item."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00240}00240\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{\textcolor{stringliteral}{"{}location"{}}:\ os.path.join(self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_af93bc19a7c9f20d252047c3dca816efb}{location}},\ *call\_id)\}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00241}00241\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00242}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_abc0e3283a9a044188ad19e39db5aaaf6}{00242}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_abc0e3283a9a044188ad19e39db5aaaf6}{get\_metadata}}(self,\ call\_id):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00243}00243\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Return\ actual\ metadata\ of\ an\ item."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00244}00244\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00245}00245\ \ \ \ \ \ \ \ \ \ \ \ \ item\_path\ =\ os.path.join(self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_af93bc19a7c9f20d252047c3dca816efb}{location}},\ *call\_id)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00246}00246\ \ \ \ \ \ \ \ \ \ \ \ \ filename\ =\ os.path.join(item\_path,\ \textcolor{stringliteral}{"{}metadata.json"{}})}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00247}00247\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ self.\_open\_item(filename,\ \textcolor{stringliteral}{"{}rb"{}})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00248}00248\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ json.loads(f.read().decode(\textcolor{stringliteral}{"{}utf-\/8"{}}))}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00249}00249\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}:\ \ \textcolor{comment}{\#\ noqa:\ E722}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00250}00250\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{\}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00251}00251\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00252}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a387059c26e1e1074cace4f44413638e1}{00252}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a387059c26e1e1074cace4f44413638e1}{store\_metadata}}(self,\ call\_id,\ metadata):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00253}00253\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Store\ metadata\ of\ a\ computation."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00254}00254\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00255}00255\ \ \ \ \ \ \ \ \ \ \ \ \ item\_path\ =\ os.path.join(self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_af93bc19a7c9f20d252047c3dca816efb}{location}},\ *call\_id)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00256}00256\ \ \ \ \ \ \ \ \ \ \ \ \ self.create\_location(item\_path)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00257}00257\ \ \ \ \ \ \ \ \ \ \ \ \ filename\ =\ os.path.join(item\_path,\ \textcolor{stringliteral}{"{}metadata.json"{}})}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00258}00258\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00259}00259\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }write\_func(to\_write,\ dest\_filename):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00260}00260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ self.\_open\_item(dest\_filename,\ \textcolor{stringliteral}{"{}wb"{}})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00261}00261\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ f.write(json.dumps(to\_write).encode(\textcolor{stringliteral}{"{}utf-\/8"{}}))}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00262}00262\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00263}00263\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a736dc9aef7cb86d2882645756f7fb5f6}{\_concurrency\_safe\_write}}(metadata,\ filename,\ write\_func)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00264}00264\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}:\ \ \textcolor{comment}{\#\ noqa:\ E722}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00265}00265\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00266}00266\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00267}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_acc540e4410aad16ed1e478551b3f2cc1}{00267}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_acc540e4410aad16ed1e478551b3f2cc1}{contains\_path}}(self,\ call\_id):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00268}00268\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Check\ cached\ function\ is\ available\ in\ store."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00269}00269\ \ \ \ \ \ \ \ \ func\_path\ =\ os.path.join(self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_af93bc19a7c9f20d252047c3dca816efb}{location}},\ *call\_id)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00270}00270\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self.object\_exists(func\_path)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00271}00271\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00272}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a451c37d7b8f24849d4697e15f4e18750}{00272}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a451c37d7b8f24849d4697e15f4e18750}{clear\_path}}(self,\ call\_id):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00273}00273\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Clear\ all\ items\ with\ a\ common\ path\ in\ the\ store."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00274}00274\ \ \ \ \ \ \ \ \ func\_path\ =\ os.path.join(self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_af93bc19a7c9f20d252047c3dca816efb}{location}},\ *call\_id)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00275}00275\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\_item\_exists(func\_path):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00276}00276\ \ \ \ \ \ \ \ \ \ \ \ \ self.clear\_location(func\_path)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00277}00277\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00278}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_add685dd92ea0a4b010202646bde80f3f}{00278}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_add685dd92ea0a4b010202646bde80f3f}{store\_cached\_func\_code}}(self,\ call\_id,\ func\_code=None):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00279}00279\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Store\ the\ code\ of\ the\ cached\ function."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00280}00280\ \ \ \ \ \ \ \ \ func\_path\ =\ os.path.join(self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_af93bc19a7c9f20d252047c3dca816efb}{location}},\ *call\_id)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00281}00281\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ self.\_item\_exists(func\_path):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00282}00282\ \ \ \ \ \ \ \ \ \ \ \ \ self.create\_location(func\_path)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00283}00283\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00284}00284\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ func\_code\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00285}00285\ \ \ \ \ \ \ \ \ \ \ \ \ filename\ =\ os.path.join(func\_path,\ \textcolor{stringliteral}{"{}func\_code.py"{}})}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00286}00286\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ self.\_open\_item(filename,\ \textcolor{stringliteral}{"{}wb"{}})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00287}00287\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ f.write(func\_code.encode(\textcolor{stringliteral}{"{}utf-\/8"{}}))}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00288}00288\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00289}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_add05812f8aec83c9cf62802173ad2b5e}{00289}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_add05812f8aec83c9cf62802173ad2b5e}{get\_cached\_func\_code}}(self,\ call\_id):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00290}00290\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Store\ the\ code\ of\ the\ cached\ function."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00291}00291\ \ \ \ \ \ \ \ \ filename\ =\ os.path.join(self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_af93bc19a7c9f20d252047c3dca816efb}{location}},\ *call\_id,\ \textcolor{stringliteral}{"{}func\_code.py"{}})}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00292}00292\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00293}00293\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ self.\_open\_item(filename,\ \textcolor{stringliteral}{"{}rb"{}})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00294}00294\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ f.read().decode(\textcolor{stringliteral}{"{}utf-\/8"{}})}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00295}00295\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}:\ \ \textcolor{comment}{\#\ noqa:\ E722}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00296}00296\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00297}00297\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00298}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a82f97114e3b57e324dfd95430db039f1}{00298}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a82f97114e3b57e324dfd95430db039f1}{get\_cached\_func\_info}}(self,\ call\_id):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00299}00299\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Return\ information\ related\ to\ the\ cached\ function\ if\ it\ exists."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00300}00300\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{\textcolor{stringliteral}{"{}location"{}}:\ os.path.join(self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_af93bc19a7c9f20d252047c3dca816efb}{location}},\ *call\_id)\}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00301}00301\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00302}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a2466a75adb04c434a4a92d4ba91b41fe}{00302}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a2466a75adb04c434a4a92d4ba91b41fe}{clear}}(self):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00303}00303\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Clear\ the\ whole\ store\ content."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00304}00304\ \ \ \ \ \ \ \ \ self.clear\_location(self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_af93bc19a7c9f20d252047c3dca816efb}{location}})}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00305}00305\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00306}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a9036e403324fb060ce43e2fc9292e1a0}{00306}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a9036e403324fb060ce43e2fc9292e1a0}{enforce\_store\_limits}}(self,\ bytes\_limit,\ items\_limit=None,\ age\_limit=None):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00307}00307\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00308}00308\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Remove\ the\ store's\ oldest\ files\ to\ enforce\ item,\ byte,\ and\ age\ limits.}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00309}00309\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00310}00310\ \ \ \ \ \ \ \ \ items\_to\_delete\ =\ self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_ac49f69a59885096cfb88f3e47df3738d}{\_get\_items\_to\_delete}}(bytes\_limit,\ items\_limit,\ age\_limit)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00311}00311\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00312}00312\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ item\ \textcolor{keywordflow}{in}\ items\_to\_delete:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00313}00313\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.verbose\ >\ 10:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00314}00314\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ print(\textcolor{stringliteral}{"{}Deleting\ item\ \{0\}"{}}.format(item))}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00315}00315\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00316}00316\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.clear\_location(item.path)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00317}00317\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ OSError:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00318}00318\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Even\ with\ ignore\_errors=True\ shutil.rmtree\ can\ raise\ OSError}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00319}00319\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ with:}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00320}00320\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ [Errno\ 116]\ Stale\ file\ handle\ if\ another\ process\ has\ deleted}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00321}00321\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ the\ folder\ already.}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00322}00322\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00323}00323\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00324}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_ac49f69a59885096cfb88f3e47df3738d}{00324}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_ac49f69a59885096cfb88f3e47df3738d}{\_get\_items\_to\_delete}}(self,\ bytes\_limit,\ items\_limit=None,\ age\_limit=None):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00325}00325\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00326}00326\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Get\ items\ to\ delete\ to\ keep\ the\ store\ under\ size,\ file,\ \&\ age\ limits.}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00327}00327\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00328}00328\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ isinstance(bytes\_limit,\ str):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00329}00329\ \ \ \ \ \ \ \ \ \ \ \ \ bytes\_limit\ =\ memstr\_to\_bytes(bytes\_limit)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00330}00330\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00331}00331\ \ \ \ \ \ \ \ \ items\ =\ self.get\_items()}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00332}00332\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ items:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00333}00333\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ []}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00334}00334\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00335}00335\ \ \ \ \ \ \ \ \ size\ =\ sum(item.size\ \textcolor{keywordflow}{for}\ item\ \textcolor{keywordflow}{in}\ items)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00336}00336\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00337}00337\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ bytes\_limit\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00338}00338\ \ \ \ \ \ \ \ \ \ \ \ \ to\_delete\_size\ =\ size\ -\/\ bytes\_limit}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00339}00339\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00340}00340\ \ \ \ \ \ \ \ \ \ \ \ \ to\_delete\_size\ =\ 0}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00341}00341\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00342}00342\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ items\_limit\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00343}00343\ \ \ \ \ \ \ \ \ \ \ \ \ to\_delete\_items\ =\ len(items)\ -\/\ items\_limit}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00344}00344\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00345}00345\ \ \ \ \ \ \ \ \ \ \ \ \ to\_delete\_items\ =\ 0}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00346}00346\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00347}00347\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ age\_limit\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00348}00348\ \ \ \ \ \ \ \ \ \ \ \ \ older\_item\ =\ min(item.last\_access\ \textcolor{keywordflow}{for}\ item\ \textcolor{keywordflow}{in}\ items)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00349}00349\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ age\_limit.total\_seconds()\ <\ 0:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00350}00350\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classValueError}{ValueError}}(\textcolor{stringliteral}{"{}age\_limit\ has\ to\ be\ a\ positive\ timedelta"{}})}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00351}00351\ \ \ \ \ \ \ \ \ \ \ \ \ deadline\ =\ datetime.datetime.now()\ -\/\ age\_limit}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00352}00352\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00353}00353\ \ \ \ \ \ \ \ \ \ \ \ \ deadline\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00354}00354\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00355}00355\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00356}00356\ \ \ \ \ \ \ \ \ \ \ \ \ to\_delete\_size\ <=\ 0}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00357}00357\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{and}\ to\_delete\_items\ <=\ 0}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00358}00358\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{and}\ (deadline\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}\ \textcolor{keywordflow}{or}\ older\_item\ >\ deadline)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00359}00359\ \ \ \ \ \ \ \ \ ):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00360}00360\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ []}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00361}00361\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00362}00362\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ We\ want\ to\ delete\ first\ the\ cache\ items\ that\ were\ accessed\ a}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00363}00363\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ long\ time\ ago}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00364}00364\ \ \ \ \ \ \ \ \ items.sort(key=operator.attrgetter(\textcolor{stringliteral}{"{}last\_access"{}}))}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00365}00365\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00366}00366\ \ \ \ \ \ \ \ \ items\_to\_delete\ =\ []}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00367}00367\ \ \ \ \ \ \ \ \ size\_so\_far\ =\ 0}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00368}00368\ \ \ \ \ \ \ \ \ items\_so\_far\ =\ 0}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00369}00369\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00370}00370\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ item\ \textcolor{keywordflow}{in}\ items:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00371}00371\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00372}00372\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (size\_so\_far\ >=\ to\_delete\_size)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00373}00373\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{and}\ items\_so\_far\ >=\ to\_delete\_items}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00374}00374\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{and}\ (deadline\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}\ \textcolor{keywordflow}{or}\ deadline\ <\ item.last\_access)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00375}00375\ \ \ \ \ \ \ \ \ \ \ \ \ ):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00376}00376\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00377}00377\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00378}00378\ \ \ \ \ \ \ \ \ \ \ \ \ items\_to\_delete.append(item)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00379}00379\ \ \ \ \ \ \ \ \ \ \ \ \ size\_so\_far\ +=\ item.size}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00380}00380\ \ \ \ \ \ \ \ \ \ \ \ \ items\_so\_far\ +=\ 1}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00381}00381\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00382}00382\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ items\_to\_delete}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00383}00383\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00384}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a736dc9aef7cb86d2882645756f7fb5f6}{00384}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a736dc9aef7cb86d2882645756f7fb5f6}{\_concurrency\_safe\_write}}(self,\ to\_write,\ filename,\ write\_func):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00385}00385\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Writes\ an\ object\ into\ a\ file\ in\ a\ concurrency-\/safe\ way."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00386}00386\ \ \ \ \ \ \ \ \ temporary\_filename\ =\ \mbox{\hyperlink{namespacejoblib_1_1__store__backends_addd7062f49945b110db9acb09cc06d66}{concurrency\_safe\_write}}(to\_write,\ filename,\ write\_func)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00387}00387\ \ \ \ \ \ \ \ \ self.\_move\_item(temporary\_filename,\ filename)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00388}00388\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00389}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a1c0cabe1d6d12702b729ca4e52d02eb7}{00389}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_a1c0cabe1d6d12702b729ca4e52d02eb7}{\_\_repr\_\_}}(self):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00390}00390\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Printable\ representation\ of\ the\ store\ location."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00391}00391\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{'\{class\_name\}(location="{}\{location\}"{})'}.format(}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00392}00392\ \ \ \ \ \ \ \ \ \ \ \ \ class\_name=self.\_\_class\_\_.\_\_name\_\_,\ location=self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin_af93bc19a7c9f20d252047c3dca816efb}{location}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00393}00393\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00394}00394\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00395}00395\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00396}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1FileSystemStoreBackend}{00396}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1FileSystemStoreBackend}{FileSystemStoreBackend}}(\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendBase}{StoreBackendBase}},\ \mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendMixin}{StoreBackendMixin}}):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00397}00397\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}A\ StoreBackend\ used\ with\ local\ or\ network\ file\ systems."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00398}00398\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00399}00399\ \ \ \ \ \_open\_item\ =\ staticmethod(open)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00400}00400\ \ \ \ \ \_item\_exists\ =\ staticmethod(os.path.exists)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00401}00401\ \ \ \ \ \_move\_item\ =\ staticmethod(concurrency\_safe\_rename)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00402}00402\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00403}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1FileSystemStoreBackend_a0654636a9555fbb772822b62ec3525fb}{00403}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1FileSystemStoreBackend_a0654636a9555fbb772822b62ec3525fb}{clear\_location}}(self,\ location):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00404}00404\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Delete\ location\ on\ store."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00405}00405\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ location\ ==\ self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendBase_a37d81803107e5d7500678ad06951a02a}{location}}:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00406}00406\ \ \ \ \ \ \ \ \ \ \ \ \ rm\_subdirs(location)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00407}00407\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00408}00408\ \ \ \ \ \ \ \ \ \ \ \ \ shutil.rmtree(location,\ ignore\_errors=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00409}00409\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00410}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1FileSystemStoreBackend_a04a36ab5de9831d67d56171c27763c5c}{00410}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1FileSystemStoreBackend_a04a36ab5de9831d67d56171c27763c5c}{create\_location}}(self,\ location):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00411}00411\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Create\ object\ location\ on\ store"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00412}00412\ \ \ \ \ \ \ \ \ mkdirp(location)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00413}00413\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00414}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1FileSystemStoreBackend_a3a4f377ccc8b5543f3b4d4dec267668c}{00414}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1FileSystemStoreBackend_a3a4f377ccc8b5543f3b4d4dec267668c}{get\_items}}(self):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00415}00415\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Returns\ the\ whole\ list\ of\ items\ available\ in\ the\ store."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00416}00416\ \ \ \ \ \ \ \ \ items\ =\ []}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00417}00417\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00418}00418\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dirpath,\ \_,\ filenames\ \textcolor{keywordflow}{in}\ os.walk(self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendBase_a37d81803107e5d7500678ad06951a02a}{location}}):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00419}00419\ \ \ \ \ \ \ \ \ \ \ \ \ is\_cache\_hash\_dir\ =\ re.match(\textcolor{stringliteral}{"{}[a-\/f0-\/9]\{32\}"{}},\ os.path.basename(dirpath))}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00420}00420\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00421}00421\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ is\_cache\_hash\_dir:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00422}00422\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_filename\ =\ os.path.join(dirpath,\ \textcolor{stringliteral}{"{}output.pkl"{}})}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00423}00423\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00424}00424\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ last\_access\ =\ os.path.getatime(output\_filename)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00425}00425\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ OSError:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00426}00426\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00427}00427\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ last\_access\ =\ os.path.getatime(dirpath)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00428}00428\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ OSError:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00429}00429\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ directory\ has\ already\ been\ deleted}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00430}00430\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00431}00431\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00432}00432\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ last\_access\ =\ datetime.datetime.fromtimestamp(last\_access)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00433}00433\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00434}00434\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ full\_filenames\ =\ [os.path.join(dirpath,\ fn)\ \textcolor{keywordflow}{for}\ fn\ \textcolor{keywordflow}{in}\ filenames]}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00435}00435\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dirsize\ =\ sum(os.path.getsize(fn)\ \textcolor{keywordflow}{for}\ fn\ \textcolor{keywordflow}{in}\ full\_filenames)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00436}00436\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ OSError:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00437}00437\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Either\ output\_filename\ or\ one\ of\ the\ files\ in}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00438}00438\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ dirpath\ does\ not\ exist\ any\ more.\ We\ assume\ this}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00439}00439\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ directory\ is\ being\ cleaned\ by\ another\ process\ already}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00440}00440\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00441}00441\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00442}00442\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ items.append(CacheItemInfo(dirpath,\ dirsize,\ last\_access))}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00443}00443\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00444}00444\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ items}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00445}00445\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00446}\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1FileSystemStoreBackend_a9b75b459925df16d47138b01220ad30f}{00446}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1FileSystemStoreBackend_a9b75b459925df16d47138b01220ad30f}{configure}}(self,\ location,\ verbose=1,\ backend\_options=None):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00447}00447\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Configure\ the\ store\ backend.}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00448}00448\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00449}00449\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ For\ this\ backend,\ valid\ store\ options\ are\ 'compress'\ and\ 'mmap\_mode'}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00450}00450\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00451}00451\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ backend\_options\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00452}00452\ \ \ \ \ \ \ \ \ \ \ \ \ backend\_options\ =\ \{\}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00453}00453\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00454}00454\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ setup\ location\ directory}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00455}00455\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendBase_a37d81803107e5d7500678ad06951a02a}{location}}\ =\ location}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00456}00456\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ os.path.exists(self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendBase_a37d81803107e5d7500678ad06951a02a}{location}}):}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00457}00457\ \ \ \ \ \ \ \ \ \ \ \ \ mkdirp(self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1StoreBackendBase_a37d81803107e5d7500678ad06951a02a}{location}})}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00458}00458\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00459}00459\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Automatically\ add\ \`{}.gitignore`\ file\ to\ the\ cache\ folder.}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00460}00460\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ XXX:\ the\ condition\ is\ necessary\ because\ in\ \`{}Memory.\_\_init\_\_`,\ the\ user}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00461}00461\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ passed\ \`{}location`\ param\ is\ modified\ to\ be\ either\ \`{}\{location\}`\ or}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00462}00462\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \`{}\{location\}/joblib`\ depending\ on\ input\ type\ (`pathlib.Path`\ vs\ \`{}str`).}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00463}00463\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ proper\ resolution\ of\ this\ inconsistency\ is\ tracked\ in:}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00464}00464\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ https://github.com/joblib/joblib/issues/1684}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00465}00465\ \ \ \ \ \ \ \ \ cache\_directory\ =\ (}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00466}00466\ \ \ \ \ \ \ \ \ \ \ \ \ os.path.dirname(location)}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00467}00467\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ os.path.dirname(location)\ \textcolor{keywordflow}{and}\ os.path.basename(location)\ ==\ \textcolor{stringliteral}{"{}joblib"{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00468}00468\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ location}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00469}00469\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00470}00470\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(os.path.join(cache\_directory,\ \textcolor{stringliteral}{"{}.gitignore"{}}),\ \textcolor{stringliteral}{"{}w"{}})\ \textcolor{keyword}{as}\ file:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00471}00471\ \ \ \ \ \ \ \ \ \ \ \ \ file.write(\textcolor{stringliteral}{"{}\#\ Created\ by\ joblib\ automatically.\(\backslash\)n"{}})}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00472}00472\ \ \ \ \ \ \ \ \ \ \ \ \ file.write(\textcolor{stringliteral}{"{}*\(\backslash\)n"{}})}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00473}00473\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00474}00474\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ item\ can\ be\ stored\ compressed\ for\ faster\ I/O}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00475}00475\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1FileSystemStoreBackend_a7a786d384c6559d7723368d7d7828a9d}{compress}}\ =\ backend\_options.get(\textcolor{stringliteral}{"{}compress"{}},\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00476}00476\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00477}00477\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ FileSystemStoreBackend\ can\ be\ used\ with\ mmap\_mode\ options\ under}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00478}00478\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ certain\ conditions.}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00479}00479\ \ \ \ \ \ \ \ \ mmap\_mode\ =\ backend\_options.get(\textcolor{stringliteral}{"{}mmap\_mode"{}})}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00480}00480\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1FileSystemStoreBackend_a7a786d384c6559d7723368d7d7828a9d}{compress}}\ \textcolor{keywordflow}{and}\ mmap\_mode\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00481}00481\ \ \ \ \ \ \ \ \ \ \ \ \ warnings.warn(}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00482}00482\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Compressed\ items\ cannot\ be\ memmapped\ in\ a\ "{}}}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00483}00483\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}filesystem\ store.\ Option\ will\ be\ ignored."{}},}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00484}00484\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stacklevel=2,}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00485}00485\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00486}00486\ }
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00487}00487\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1FileSystemStoreBackend_ac025c6d7e51d7cfdf76fb8fccd119dd5}{mmap\_mode}}\ =\ mmap\_mode}
\DoxyCodeLine{\Hypertarget{__store__backends_8py_source_l00488}00488\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1__store__backends_1_1FileSystemStoreBackend_a54af0c59c945ab160347da1431aab9c6}{verbose}}\ =\ verbose}

\end{DoxyCode}
