<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Code Cloning Analysis: /home/jam/Research/IRES-2025/dev/src/llm-scripts/testing/hypothesis-testing/hyp-env/lib/python3.12/site-packages/fontTools/ttLib/woff2.py Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Code Cloning Analysis
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d8/d3c/woff2_8py_source.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">woff2.py</div></div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno"><a class="line" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html">    1</a></span><span class="keyword">from</span> io <span class="keyword">import</span> BytesIO</div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="keyword">import</span> sys</div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="keyword">import</span> array</div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="keyword">import</span> struct</div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="keyword">from</span> <a class="code hl_namespace" href="../../dd/d81/namespacefontTools_1_1misc.html">fontTools.misc</a> <span class="keyword">import</span> sstruct</div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="keyword">from</span> <a class="code hl_namespace" href="../../d6/d90/namespacefontTools_1_1misc_1_1arrayTools.html">fontTools.misc.arrayTools</a> <span class="keyword">import</span> calcIntBounds</div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="keyword">from</span> <a class="code hl_namespace" href="../../da/df5/namespacefontTools_1_1misc_1_1textTools.html">fontTools.misc.textTools</a> <span class="keyword">import</span> Tag, bytechr, byteord, bytesjoin, pad</div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="keyword">from</span> <a class="code hl_namespace" href="../../d6/d58/namespacefontTools_1_1ttLib.html">fontTools.ttLib</a> <span class="keyword">import</span> (</div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span>    TTFont,</div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span>    TTLibError,</div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span>    getTableModule,</div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span>    getTableClass,</div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span>    getSearchRange,</div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span>)</div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="keyword">from</span> <a class="code hl_namespace" href="../../d7/d20/namespacefontTools_1_1ttLib_1_1sfnt.html">fontTools.ttLib.sfnt</a> <span class="keyword">import</span> (</div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span>    SFNTReader,</div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span>    SFNTWriter,</div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span>    DirectoryEntry,</div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span>    WOFFFlavorData,</div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span>    sfntDirectoryFormat,</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>    sfntDirectorySize,</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>    SFNTDirectoryEntry,</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>    sfntDirectoryEntrySize,</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>    calcChecksum,</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>)</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="keyword">from</span> <a class="code hl_namespace" href="../../d0/dfa/namespacefontTools_1_1ttLib_1_1tables.html">fontTools.ttLib.tables</a> <span class="keyword">import</span> ttProgram, _g_l_y_f</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="keyword">import</span> logging</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span> </div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span> </div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>log = logging.getLogger(<span class="stringliteral">&quot;fontTools.ttLib.woff2&quot;</span>)</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span> </div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>haveBrotli = <span class="keyword">False</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="keywordflow">try</span>:</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>        <span class="keyword">import</span> brotlicffi <span class="keyword">as</span> brotli</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>    <span class="keywordflow">except</span> ImportError:</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>        <span class="keyword">import</span> brotli</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>    haveBrotli = <span class="keyword">True</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="keywordflow">except</span> ImportError:</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>    <span class="keywordflow">pass</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span> </div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span> </div>
<div class="foldopen" id="foldopen00044" data-start="" data-end="">
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno"><a class="line" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html">   44</a></span><span class="keyword">class </span><a class="code hl_class" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html">WOFF2Reader</a>(<a class="code hl_class" href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html">SFNTReader</a>):</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>    flavor = <span class="stringliteral">&quot;woff2&quot;</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span> </div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>    <span class="keyword">def </span>__init__(self, file, checkChecksums=0, fontNumber=-1):</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> haveBrotli:</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>            log.error(</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>                <span class="stringliteral">&quot;The WOFF2 decoder requires the Brotli Python extension, available at: &quot;</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>                <span class="stringliteral">&quot;https://github.com/google/brotli&quot;</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>            )</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d8/d14/classImportError.html">ImportError</a>(<span class="stringliteral">&quot;No module named brotli&quot;</span>)</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span> </div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>        self.<a class="code hl_variable" href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html#af147145cd6f95ffb586864f8942bdddc">file</a> = file</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span> </div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>        signature = <a class="code hl_class" href="../../d6/d75/classfontTools_1_1misc_1_1textTools_1_1Tag.html">Tag</a>(self.<a class="code hl_variable" href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html#af147145cd6f95ffb586864f8942bdddc">file</a>.read(4))</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>        <span class="keywordflow">if</span> signature != b<span class="stringliteral">&quot;wOF2&quot;</span>:</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;Not a WOFF2 font (bad signature)&quot;</span>)</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span> </div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>        self.<a class="code hl_variable" href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html#af147145cd6f95ffb586864f8942bdddc">file</a>.seek(0)</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>        self.<a class="code hl_variable" href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html#a125bdc762d3d23c09919d7f99a772f49">DirectoryEntry</a> = WOFF2DirectoryEntry</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>        data = self.<a class="code hl_variable" href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html#af147145cd6f95ffb586864f8942bdddc">file</a>.read(woff2DirectorySize)</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>        <span class="keywordflow">if</span> len(data) != woff2DirectorySize:</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;Not a WOFF2 font (not enough data)&quot;</span>)</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>        sstruct.unpack(woff2DirectoryFormat, data, self)</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span> </div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>        self.<a class="code hl_variable" href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html#acb3f048e4d1e7d9948114fe7bb75ff75">tables</a> = OrderedDict()</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>        offset = 0</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(self.<a class="code hl_variable" href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html#a5b03186eefa0ba7022642a7a817d2ebc">numTables</a>):</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>            entry = self.<a class="code hl_variable" href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html#a125bdc762d3d23c09919d7f99a772f49">DirectoryEntry</a>()</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>            entry.fromFile(self.<a class="code hl_variable" href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html#af147145cd6f95ffb586864f8942bdddc">file</a>)</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>            tag = <a class="code hl_class" href="../../d6/d75/classfontTools_1_1misc_1_1textTools_1_1Tag.html">Tag</a>(entry.tag)</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>            self.<a class="code hl_variable" href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html#acb3f048e4d1e7d9948114fe7bb75ff75">tables</a>[tag] = entry</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>            entry.offset = offset</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>            offset += entry.length</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span> </div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>        totalUncompressedSize = offset</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>        compressedData = self.<a class="code hl_variable" href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html#af147145cd6f95ffb586864f8942bdddc">file</a>.read(self.totalCompressedSize)</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>        decompressedData = brotli.decompress(compressedData)</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>        <span class="keywordflow">if</span> len(decompressedData) != totalUncompressedSize:</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>                <span class="stringliteral">&quot;unexpected size for decompressed font data: expected %d, found %d&quot;</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>                % (totalUncompressedSize, len(decompressedData))</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>            )</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>        self.<a class="code hl_variable" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ad3d3012253e861e72e623caf59698672">transformBuffer</a> = <a class="code hl_class" href="../../df/db7/classBytesIO.html">BytesIO</a>(decompressedData)</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span> </div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>        self.<a class="code hl_variable" href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html#af147145cd6f95ffb586864f8942bdddc">file</a>.seek(0, 2)</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>        <span class="keywordflow">if</span> self.length != self.<a class="code hl_variable" href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html#af147145cd6f95ffb586864f8942bdddc">file</a>.tell():</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;reported &#39;length&#39; doesn&#39;t match the actual file size&quot;</span>)</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span> </div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>        self.<a class="code hl_variable" href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html#abb5219583f6804620162330d0632b8fb">flavorData</a> = <a class="code hl_class" href="../../d2/d45/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2FlavorData.html">WOFF2FlavorData</a>(self)</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span> </div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>        <span class="comment"># make empty TTFont to store data while reconstructing tables</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>        self.<a class="code hl_variable" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ae5995268a37ba401ef1c1ae339d2d501">ttFont</a> = <a class="code hl_class" href="../../d8/d0d/classfontTools_1_1ttLib_1_1ttFont_1_1TTFont.html">TTFont</a>(recalcBBoxes=<span class="keyword">False</span>, recalcTimestamp=<span class="keyword">False</span>)</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span> </div>
<div class="foldopen" id="foldopen00097" data-start="" data-end="">
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno"><a class="line" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#a3d1f8f0210138d7ac1ca9b33f62c7b96">   97</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#a3d1f8f0210138d7ac1ca9b33f62c7b96">__getitem__</a>(self, tag):</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>        <span class="stringliteral">&quot;&quot;&quot;Fetch the raw table data. Reconstruct transformed tables.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>        entry = self.<a class="code hl_variable" href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html#acb3f048e4d1e7d9948114fe7bb75ff75">tables</a>[<a class="code hl_class" href="../../d6/d75/classfontTools_1_1misc_1_1textTools_1_1Tag.html">Tag</a>(tag)]</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasattr(entry, <span class="stringliteral">&quot;data&quot;</span>):</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>            <span class="keywordflow">if</span> entry.transformed:</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>                entry.data = self.<a class="code hl_function" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ad577a9f90281e93f9a8993fa860cb55a">reconstructTable</a>(tag)</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>                entry.data = entry.loadData(self.<a class="code hl_variable" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ad3d3012253e861e72e623caf59698672">transformBuffer</a>)</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>        <span class="keywordflow">return</span> entry.data</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span> </div>
</div>
<div class="foldopen" id="foldopen00107" data-start="" data-end="">
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno"><a class="line" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ad577a9f90281e93f9a8993fa860cb55a">  107</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ad577a9f90281e93f9a8993fa860cb55a">reconstructTable</a>(self, tag):</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>        <span class="stringliteral">&quot;&quot;&quot;Reconstruct table named &#39;tag&#39; from transformed data.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>        entry = self.<a class="code hl_variable" href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html#acb3f048e4d1e7d9948114fe7bb75ff75">tables</a>[<a class="code hl_class" href="../../d6/d75/classfontTools_1_1misc_1_1textTools_1_1Tag.html">Tag</a>(tag)]</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>        rawData = entry.loadData(self.<a class="code hl_variable" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ad3d3012253e861e72e623caf59698672">transformBuffer</a>)</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>        <span class="keywordflow">if</span> tag == <span class="stringliteral">&quot;glyf&quot;</span>:</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>            <span class="comment"># no need to pad glyph data when reconstructing</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>            padding = self.padding <span class="keywordflow">if</span> hasattr(self, <span class="stringliteral">&quot;padding&quot;</span>) <span class="keywordflow">else</span> <span class="keywordtype">None</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>            data = self.<a class="code hl_function" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ad0f63b9fd6b28e2e9b7690dafb18b790">_reconstructGlyf</a>(rawData, padding)</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>        <span class="keywordflow">elif</span> tag == <span class="stringliteral">&quot;loca&quot;</span>:</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>            data = self.<a class="code hl_function" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#a35d290b26f3673a8be3e084edac34c76">_reconstructLoca</a>()</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>        <span class="keywordflow">elif</span> tag == <span class="stringliteral">&quot;hmtx&quot;</span>:</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>            data = self.<a class="code hl_function" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#a5740b7ea10b6335f23115a80374c9181">_reconstructHmtx</a>(rawData)</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;transform for table &#39;%s&#39; is unknown&quot;</span> % tag)</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>        <span class="keywordflow">return</span> data</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span> </div>
</div>
<div class="foldopen" id="foldopen00123" data-start="" data-end="">
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno"><a class="line" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ad0f63b9fd6b28e2e9b7690dafb18b790">  123</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ad0f63b9fd6b28e2e9b7690dafb18b790">_reconstructGlyf</a>(self, data, padding=None):</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>        <span class="stringliteral">&quot;&quot;&quot;Return recostructed glyf table data, and set the corresponding loca&#39;s</span></div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span><span class="stringliteral">        locations. Optionally pad glyph offsets to the specified number of bytes.</span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>        self.<a class="code hl_variable" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ae5995268a37ba401ef1c1ae339d2d501">ttFont</a>[<span class="stringliteral">&quot;loca&quot;</span>] = <a class="code hl_class" href="../../dd/dc6/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2LocaTable.html">WOFF2LocaTable</a>()</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>        glyfTable = self.<a class="code hl_variable" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ae5995268a37ba401ef1c1ae339d2d501">ttFont</a>[<span class="stringliteral">&quot;glyf&quot;</span>] = <a class="code hl_class" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html">WOFF2GlyfTable</a>()</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>        glyfTable.reconstruct(data, self.<a class="code hl_variable" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ae5995268a37ba401ef1c1ae339d2d501">ttFont</a>)</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>        <span class="keywordflow">if</span> padding:</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>            glyfTable.padding = padding</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>        data = glyfTable.compile(self.<a class="code hl_variable" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ae5995268a37ba401ef1c1ae339d2d501">ttFont</a>)</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>        <span class="keywordflow">return</span> data</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span> </div>
</div>
<div class="foldopen" id="foldopen00135" data-start="" data-end="">
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno"><a class="line" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#a35d290b26f3673a8be3e084edac34c76">  135</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#a35d290b26f3673a8be3e084edac34c76">_reconstructLoca</a>(self):</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>        <span class="stringliteral">&quot;&quot;&quot;Return reconstructed loca table data.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>        <span class="keywordflow">if</span> <span class="stringliteral">&quot;loca&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.<a class="code hl_variable" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ae5995268a37ba401ef1c1ae339d2d501">ttFont</a>:</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>            <span class="comment"># make sure glyf is reconstructed first</span></div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>            self.<a class="code hl_variable" href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html#acb3f048e4d1e7d9948114fe7bb75ff75">tables</a>[<span class="stringliteral">&quot;glyf&quot;</span>].data = self.<a class="code hl_function" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ad577a9f90281e93f9a8993fa860cb55a">reconstructTable</a>(<span class="stringliteral">&quot;glyf&quot;</span>)</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>        locaTable = self.<a class="code hl_variable" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ae5995268a37ba401ef1c1ae339d2d501">ttFont</a>[<span class="stringliteral">&quot;loca&quot;</span>]</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>        data = locaTable.compile(self.<a class="code hl_variable" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ae5995268a37ba401ef1c1ae339d2d501">ttFont</a>)</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>        <span class="keywordflow">if</span> len(data) != self.<a class="code hl_variable" href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html#acb3f048e4d1e7d9948114fe7bb75ff75">tables</a>[<span class="stringliteral">&quot;loca&quot;</span>].origLength:</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>                <span class="stringliteral">&quot;reconstructed &#39;loca&#39; table doesn&#39;t match original size: &quot;</span></div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>                <span class="stringliteral">&quot;expected %d, found %d&quot;</span> % (self.<a class="code hl_variable" href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html#acb3f048e4d1e7d9948114fe7bb75ff75">tables</a>[<span class="stringliteral">&quot;loca&quot;</span>].origLength, len(data))</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>            )</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>        <span class="keywordflow">return</span> data</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span> </div>
</div>
<div class="foldopen" id="foldopen00149" data-start="" data-end="">
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno"><a class="line" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#a5740b7ea10b6335f23115a80374c9181">  149</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#a5740b7ea10b6335f23115a80374c9181">_reconstructHmtx</a>(self, data):</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>        <span class="stringliteral">&quot;&quot;&quot;Return reconstructed hmtx table data.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>        <span class="comment"># Before reconstructing &#39;hmtx&#39; table we need to parse other tables:</span></div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>        <span class="comment"># &#39;glyf&#39; is required for reconstructing the sidebearings from the glyphs&#39;</span></div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>        <span class="comment"># bounding box; &#39;hhea&#39; is needed for the numberOfHMetrics field.</span></div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>        <span class="keywordflow">if</span> <span class="stringliteral">&quot;glyf&quot;</span> <span class="keywordflow">in</span> self.<a class="code hl_variable" href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html#abb5219583f6804620162330d0632b8fb">flavorData</a>.transformedTables:</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>            <span class="comment"># transformed &#39;glyf&#39; table is self-contained, thus &#39;loca&#39; not needed</span></div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>            tableDependencies = (<span class="stringliteral">&quot;maxp&quot;</span>, <span class="stringliteral">&quot;hhea&quot;</span>, <span class="stringliteral">&quot;glyf&quot;</span>)</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>            <span class="comment"># decompiling untransformed &#39;glyf&#39; requires &#39;loca&#39;, which requires &#39;head&#39;</span></div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>            tableDependencies = (<span class="stringliteral">&quot;maxp&quot;</span>, <span class="stringliteral">&quot;head&quot;</span>, <span class="stringliteral">&quot;hhea&quot;</span>, <span class="stringliteral">&quot;loca&quot;</span>, <span class="stringliteral">&quot;glyf&quot;</span>)</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>        <span class="keywordflow">for</span> tag <span class="keywordflow">in</span> tableDependencies:</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>            self.<a class="code hl_function" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#a799c3cbf3da485c4f428eb72fc86aa44">_decompileTable</a>(tag)</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>        hmtxTable = self.<a class="code hl_variable" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ae5995268a37ba401ef1c1ae339d2d501">ttFont</a>[<span class="stringliteral">&quot;hmtx&quot;</span>] = <a class="code hl_class" href="../../d7/d0b/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2HmtxTable.html">WOFF2HmtxTable</a>()</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>        hmtxTable.reconstruct(data, self.<a class="code hl_variable" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ae5995268a37ba401ef1c1ae339d2d501">ttFont</a>)</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>        data = hmtxTable.compile(self.<a class="code hl_variable" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ae5995268a37ba401ef1c1ae339d2d501">ttFont</a>)</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>        <span class="keywordflow">return</span> data</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span> </div>
</div>
<div class="foldopen" id="foldopen00167" data-start="" data-end="">
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno"><a class="line" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#a799c3cbf3da485c4f428eb72fc86aa44">  167</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#a799c3cbf3da485c4f428eb72fc86aa44">_decompileTable</a>(self, tag):</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>        <span class="stringliteral">&quot;&quot;&quot;Decompile table data and store it inside self.ttFont.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>        data = self[tag]</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>        <span class="keywordflow">if</span> self.<a class="code hl_variable" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ae5995268a37ba401ef1c1ae339d2d501">ttFont</a>.isLoaded(tag):</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>            <span class="keywordflow">return</span> self.<a class="code hl_variable" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ae5995268a37ba401ef1c1ae339d2d501">ttFont</a>[tag]</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>        tableClass = <a class="code hl_class" href="../../de/d85/classgetTableClass.html">getTableClass</a>(tag)</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>        table = tableClass(tag)</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>        self.<a class="code hl_variable" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ae5995268a37ba401ef1c1ae339d2d501">ttFont</a>.tables[tag] = table</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>        table.decompile(data, self.<a class="code hl_variable" href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ae5995268a37ba401ef1c1ae339d2d501">ttFont</a>)</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span> </div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span> </div>
</div>
</div>
<div class="foldopen" id="foldopen00178" data-start="" data-end="">
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno"><a class="line" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html">  178</a></span><span class="keyword">class </span><a class="code hl_class" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html">WOFF2Writer</a>(<a class="code hl_class" href="../../de/dfb/classSFNTWriter.html">SFNTWriter</a>):</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>    flavor = <span class="stringliteral">&quot;woff2&quot;</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span> </div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    <span class="keyword">def </span>__init__(</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>        self,</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>        file,</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>        numTables,</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>        sfntVersion=&quot;\000\001\000\000&quot;,</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>        flavor=None,</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>        flavorData=None,</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    ):</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> haveBrotli:</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>            log.error(</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>                <span class="stringliteral">&quot;The WOFF2 encoder requires the Brotli Python extension, available at: &quot;</span></div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>                <span class="stringliteral">&quot;https://github.com/google/brotli&quot;</span></div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>            )</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d8/d14/classImportError.html">ImportError</a>(<span class="stringliteral">&quot;No module named brotli&quot;</span>)</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span> </div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a26bae8bd595ae608a2d04d9e93118fb2">file</a> = file</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a5500889b4a254e708a4e99d0bd4976c6">numTables</a> = numTables</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a3effa38ac4bcf59e4045d5bb1aca9285">sfntVersion</a> = <a class="code hl_class" href="../../d6/d75/classfontTools_1_1misc_1_1textTools_1_1Tag.html">Tag</a>(sfntVersion)</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a1b1cb08e5e2cc0bd14742da0c7b8e77a">flavorData</a> = <a class="code hl_class" href="../../d2/d45/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2FlavorData.html">WOFF2FlavorData</a>(data=flavorData)</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span> </div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a1cb05cc95f5a5734ec1b2ddc4ea2ac80">directoryFormat</a> = woff2DirectoryFormat</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a8acf1a59fea44b11db8957b9c3acb62c">directorySize</a> = woff2DirectorySize</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#aea67f3e9dc8892a6fa877e5f03837ffb">DirectoryEntry</a> = WOFF2DirectoryEntry</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span> </div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a7dafa7dba671d2a98f0ac67cb71ef302">signature</a> = <a class="code hl_class" href="../../d6/d75/classfontTools_1_1misc_1_1textTools_1_1Tag.html">Tag</a>(<span class="stringliteral">&quot;wOF2&quot;</span>)</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span> </div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a2d407311bd2da3a0bc9497013f69e970">nextTableOffset</a> = 0</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a84bc6d517921d6e47ec2ee6b13556445">transformBuffer</a> = <a class="code hl_class" href="../../df/db7/classBytesIO.html">BytesIO</a>()</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span> </div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">tables</a> = OrderedDict()</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span> </div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>        <span class="comment"># make empty TTFont to store data while normalising and transforming tables</span></div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4cf13dd2f1070620565ceeb758d52ec4">ttFont</a> = <a class="code hl_class" href="../../d8/d0d/classfontTools_1_1ttLib_1_1ttFont_1_1TTFont.html">TTFont</a>(recalcBBoxes=<span class="keyword">False</span>, recalcTimestamp=<span class="keyword">False</span>)</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span> </div>
<div class="foldopen" id="foldopen00215" data-start="" data-end="">
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno"><a class="line" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a9a62754d9d30e8568ef7d852c96d5f04">  215</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a9a62754d9d30e8568ef7d852c96d5f04">__setitem__</a>(self, tag, data):</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>        <span class="stringliteral">&quot;&quot;&quot;Associate new entry named &#39;tag&#39; with raw table data.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>        <span class="keywordflow">if</span> tag <span class="keywordflow">in</span> self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">tables</a>:</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;cannot rewrite &#39;%s&#39; table&quot;</span> % tag)</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>        <span class="keywordflow">if</span> tag == <span class="stringliteral">&quot;DSIG&quot;</span>:</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>            <span class="comment"># always drop DSIG table, since the encoding process can invalidate it</span></div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>            self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a5500889b4a254e708a4e99d0bd4976c6">numTables</a> -= 1</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>            <span class="keywordflow">return</span></div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span> </div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>        entry = self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#aea67f3e9dc8892a6fa877e5f03837ffb">DirectoryEntry</a>()</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>        entry.tag = <a class="code hl_class" href="../../d6/d75/classfontTools_1_1misc_1_1textTools_1_1Tag.html">Tag</a>(tag)</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>        entry.flags = <a class="code hl_function" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#a18fce2a2ac77d224095786812158efb6">getKnownTagIndex</a>(entry.tag)</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>        <span class="comment"># WOFF2 table data are written to disk only on close(), after all tags</span></div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>        <span class="comment"># have been specified</span></div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>        entry.data = data</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span> </div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">tables</a>[tag] = entry</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span> </div>
</div>
<div class="foldopen" id="foldopen00233" data-start="" data-end="">
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno"><a class="line" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#aa4a1c076d74d749ff46421a9b8da516b">  233</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#aa4a1c076d74d749ff46421a9b8da516b">close</a>(self):</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>        <span class="stringliteral">&quot;&quot;&quot;All tags must have been specified. Now write the table data and directory.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>        <span class="keywordflow">if</span> len(self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">tables</a>) != self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a5500889b4a254e708a4e99d0bd4976c6">numTables</a>:</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>                <span class="stringliteral">&quot;wrong number of tables; expected %d, found %d&quot;</span></div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>                % (self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a5500889b4a254e708a4e99d0bd4976c6">numTables</a>, len(self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">tables</a>))</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>            )</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span> </div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>        <span class="keywordflow">if</span> self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a3effa38ac4bcf59e4045d5bb1aca9285">sfntVersion</a> <span class="keywordflow">in</span> (<span class="stringliteral">&quot;\x00\x01\x00\x00&quot;</span>, <span class="stringliteral">&quot;true&quot;</span>):</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>            isTrueType = <span class="keyword">True</span></div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>        <span class="keywordflow">elif</span> self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a3effa38ac4bcf59e4045d5bb1aca9285">sfntVersion</a> == <span class="stringliteral">&quot;OTTO&quot;</span>:</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>            isTrueType = <span class="keyword">False</span></div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;Not a TrueType or OpenType font (bad sfntVersion)&quot;</span>)</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span> </div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>        <span class="comment"># The WOFF2 spec no longer requires the glyph offsets to be 4-byte aligned.</span></div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>        <span class="comment"># However, the reference WOFF2 implementation still fails to reconstruct</span></div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>        <span class="comment"># &#39;unpadded&#39; glyf tables, therefore we need to &#39;normalise&#39; them.</span></div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>        <span class="comment"># See:</span></div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>        <span class="comment"># https://github.com/khaledhosny/ots/issues/60</span></div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>        <span class="comment"># https://github.com/google/woff2/issues/15</span></div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>        <span class="keywordflow">if</span> (</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>            isTrueType</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>            <span class="keywordflow">and</span> <span class="stringliteral">&quot;glyf&quot;</span> <span class="keywordflow">in</span> self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a1b1cb08e5e2cc0bd14742da0c7b8e77a">flavorData</a>.transformedTables</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>            <span class="keywordflow">and</span> <span class="stringliteral">&quot;glyf&quot;</span> <span class="keywordflow">in</span> self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">tables</a></div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>        ):</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>            self.<a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#af311722139e4ac0da4b6a63222713bb2">_normaliseGlyfAndLoca</a>(padding=4)</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>        self.<a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a53df5e6408eb264d1ed49669445599d9">_setHeadTransformFlag</a>()</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span> </div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>        <span class="comment"># To pass the legacy OpenType Sanitiser currently included in browsers,</span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>        <span class="comment"># we must sort the table directory and data alphabetically by tag.</span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>        <span class="comment"># See:</span></div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>        <span class="comment"># https://github.com/google/woff2/pull/3</span></div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>        <span class="comment"># https://lists.w3.org/Archives/Public/public-webfonts-wg/2015Mar/0000.html</span></div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>        <span class="comment">#</span></div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>        <span class="comment"># 2023: We rely on this in _transformTables where we expect that</span></div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>        <span class="comment"># &quot;loca&quot; comes after &quot;glyf&quot; table.</span></div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">tables</a> = OrderedDict(sorted(self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">tables</a>.items()))</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span> </div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#afcbafd27f126c4647ab7c68ba924263a">totalSfntSize</a> = self.<a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a3860e306b4d9ac148d1b3ac4b9eaabe8">_calcSFNTChecksumsLengthsAndOffsets</a>()</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span> </div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>        fontData = self.<a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a187f383c72d03785d521412c60bc6867">_transformTables</a>()</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>        compressedFont = brotli.compress(fontData, mode=brotli.MODE_FONT)</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span> </div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#ae53953393399bdc998555a71d8c5752a">totalCompressedSize</a> = len(compressedFont)</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a64cc91fa159d80d6bd44538abedf0fe6">length</a> = self.<a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a6c0a204543657547a9f432b69143c69c">_calcTotalSize</a>()</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#afc7f1240a232fb881b7941a7fc6aa3b5">majorVersion</a>, self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a99c6121112a0b4bb2947474aae20dd9b">minorVersion</a> = self.<a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#ae458791a81224bec3966ca10facdafeb">_getVersion</a>()</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a65c7b1a46d54b47c6c25af1ce4217f36">reserved</a> = 0</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span> </div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>        directory = self.<a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a578dc9b754e5a2fe494838e28562af53">_packTableDirectory</a>()</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a26bae8bd595ae608a2d04d9e93118fb2">file</a>.seek(0)</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a26bae8bd595ae608a2d04d9e93118fb2">file</a>.write(pad(directory + compressedFont, size=4))</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>        self.<a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4361304b7e8ea8d1fbb8e4ad41a98707">_writeFlavorData</a>()</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span> </div>
</div>
<div class="foldopen" id="foldopen00287" data-start="" data-end="">
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno"><a class="line" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#af311722139e4ac0da4b6a63222713bb2">  287</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#af311722139e4ac0da4b6a63222713bb2">_normaliseGlyfAndLoca</a>(self, padding=4):</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>        <span class="stringliteral">&quot;&quot;&quot;Recompile glyf and loca tables, aligning glyph offsets to multiples of</span></div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span><span class="stringliteral">        &#39;padding&#39; size. Update the head table&#39;s &#39;indexToLocFormat&#39; accordingly while</span></div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span><span class="stringliteral">        compiling loca.</span></div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>        <span class="keywordflow">if</span> self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a3effa38ac4bcf59e4045d5bb1aca9285">sfntVersion</a> == <span class="stringliteral">&quot;OTTO&quot;</span>:</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>            <span class="keywordflow">return</span></div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span> </div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>        <span class="keywordflow">for</span> tag <span class="keywordflow">in</span> (<span class="stringliteral">&quot;maxp&quot;</span>, <span class="stringliteral">&quot;head&quot;</span>, <span class="stringliteral">&quot;loca&quot;</span>, <span class="stringliteral">&quot;glyf&quot;</span>, <span class="stringliteral">&quot;fvar&quot;</span>):</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>            <span class="keywordflow">if</span> tag <span class="keywordflow">in</span> self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">tables</a>:</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>                self.<a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#abe0200f474e33f4b87b0a713dcef58b4">_decompileTable</a>(tag)</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4cf13dd2f1070620565ceeb758d52ec4">ttFont</a>[<span class="stringliteral">&quot;glyf&quot;</span>].padding = padding</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>        <span class="keywordflow">for</span> tag <span class="keywordflow">in</span> (<span class="stringliteral">&quot;glyf&quot;</span>, <span class="stringliteral">&quot;loca&quot;</span>):</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>            self.<a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#aa4b5ca86d1e053e883de25885109d186">_compileTable</a>(tag)</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span> </div>
</div>
<div class="foldopen" id="foldopen00302" data-start="" data-end="">
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno"><a class="line" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a53df5e6408eb264d1ed49669445599d9">  302</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a53df5e6408eb264d1ed49669445599d9">_setHeadTransformFlag</a>(self):</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>        <span class="stringliteral">&quot;&quot;&quot;Set bit 11 of &#39;head&#39; table flags to indicate that the font has undergone</span></div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span><span class="stringliteral">        a lossless modifying transform. Re-compile head table data.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>        self.<a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#abe0200f474e33f4b87b0a713dcef58b4">_decompileTable</a>(<span class="stringliteral">&quot;head&quot;</span>)</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4cf13dd2f1070620565ceeb758d52ec4">ttFont</a>[<span class="stringliteral">&quot;head&quot;</span>].flags |= 1 &lt;&lt; 11</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>        self.<a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#aa4b5ca86d1e053e883de25885109d186">_compileTable</a>(<span class="stringliteral">&quot;head&quot;</span>)</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span> </div>
</div>
<div class="foldopen" id="foldopen00309" data-start="" data-end="">
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno"><a class="line" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#abe0200f474e33f4b87b0a713dcef58b4">  309</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#abe0200f474e33f4b87b0a713dcef58b4">_decompileTable</a>(self, tag):</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>        <span class="stringliteral">&quot;&quot;&quot;Fetch table data, decompile it, and store it inside self.ttFont.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>        tag = <a class="code hl_class" href="../../d6/d75/classfontTools_1_1misc_1_1textTools_1_1Tag.html">Tag</a>(tag)</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>        <span class="keywordflow">if</span> tag <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">tables</a>:</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;missing required table: %s&quot;</span> % tag)</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>        <span class="keywordflow">if</span> self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4cf13dd2f1070620565ceeb758d52ec4">ttFont</a>.isLoaded(tag):</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>            <span class="keywordflow">return</span></div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>        data = self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">tables</a>[tag].data</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>        <span class="keywordflow">if</span> tag == <span class="stringliteral">&quot;loca&quot;</span>:</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>            tableClass = WOFF2LocaTable</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>        <span class="keywordflow">elif</span> tag == <span class="stringliteral">&quot;glyf&quot;</span>:</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>            tableClass = WOFF2GlyfTable</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>        <span class="keywordflow">elif</span> tag == <span class="stringliteral">&quot;hmtx&quot;</span>:</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>            tableClass = WOFF2HmtxTable</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>            tableClass = <a class="code hl_class" href="../../de/d85/classgetTableClass.html">getTableClass</a>(tag)</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>        table = tableClass(tag)</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4cf13dd2f1070620565ceeb758d52ec4">ttFont</a>.tables[tag] = table</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>        table.decompile(data, self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4cf13dd2f1070620565ceeb758d52ec4">ttFont</a>)</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span> </div>
</div>
<div class="foldopen" id="foldopen00329" data-start="" data-end="">
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno"><a class="line" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#aa4b5ca86d1e053e883de25885109d186">  329</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#aa4b5ca86d1e053e883de25885109d186">_compileTable</a>(self, tag):</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>        <span class="stringliteral">&quot;&quot;&quot;Compile table and store it in its &#39;data&#39; attribute.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">tables</a>[tag].data = self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4cf13dd2f1070620565ceeb758d52ec4">ttFont</a>[tag].compile(self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4cf13dd2f1070620565ceeb758d52ec4">ttFont</a>)</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span> </div>
</div>
<div class="foldopen" id="foldopen00333" data-start="" data-end="">
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno"><a class="line" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a3860e306b4d9ac148d1b3ac4b9eaabe8">  333</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a3860e306b4d9ac148d1b3ac4b9eaabe8">_calcSFNTChecksumsLengthsAndOffsets</a>(self):</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>        <span class="stringliteral">&quot;&quot;&quot;Compute the &#39;original&#39; SFNT checksums, lengths and offsets for checksum</span></div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span><span class="stringliteral">        adjustment calculation. Return the total size of the uncompressed font.</span></div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>        offset = sfntDirectorySize + sfntDirectoryEntrySize * len(self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">tables</a>)</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>        <span class="keywordflow">for</span> tag, entry <span class="keywordflow">in</span> self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">tables</a>.items():</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>            data = entry.data</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>            entry.origOffset = offset</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>            entry.origLength = len(data)</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>            <span class="keywordflow">if</span> tag == <span class="stringliteral">&quot;head&quot;</span>:</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>                entry.checkSum = calcChecksum(data[:8] + b<span class="stringliteral">&quot;\0\0\0\0&quot;</span> + data[12:])</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>                entry.checkSum = calcChecksum(data)</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>            offset += (entry.origLength + 3) &amp; ~3</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>        <span class="keywordflow">return</span> offset</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span> </div>
</div>
<div class="foldopen" id="foldopen00349" data-start="" data-end="">
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno"><a class="line" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a187f383c72d03785d521412c60bc6867">  349</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a187f383c72d03785d521412c60bc6867">_transformTables</a>(self):</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>        <span class="stringliteral">&quot;&quot;&quot;Return transformed font data.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>        transformedTables = self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a1b1cb08e5e2cc0bd14742da0c7b8e77a">flavorData</a>.transformedTables</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>        <span class="keywordflow">for</span> tag, entry <span class="keywordflow">in</span> self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">tables</a>.items():</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>            data = <span class="keywordtype">None</span></div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>            <span class="keywordflow">if</span> tag <span class="keywordflow">in</span> transformedTables:</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>                data = self.<a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#aeced29b438c8336d839a6265e38cd703">transformTable</a>(tag)</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>                <span class="keywordflow">if</span> data <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>                    entry.transformed = <span class="keyword">True</span></div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>            <span class="keywordflow">if</span> data <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>                <span class="keywordflow">if</span> tag == <span class="stringliteral">&quot;glyf&quot;</span>:</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>                    <span class="comment"># Currently we always sort table tags so</span></div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>                    <span class="comment"># &#39;loca&#39; comes after &#39;glyf&#39;.</span></div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>                    transformedTables.discard(<span class="stringliteral">&quot;loca&quot;</span>)</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>                <span class="comment"># pass-through the table data without transformation</span></div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>                data = entry.data</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>                entry.transformed = <span class="keyword">False</span></div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>            entry.offset = self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a2d407311bd2da3a0bc9497013f69e970">nextTableOffset</a></div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>            entry.saveData(self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a84bc6d517921d6e47ec2ee6b13556445">transformBuffer</a>, data)</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>            self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a2d407311bd2da3a0bc9497013f69e970">nextTableOffset</a> += entry.length</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>        self.<a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a6a5870a4537b88b1163175e35aacf776">writeMasterChecksum</a>()</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>        fontData = self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a84bc6d517921d6e47ec2ee6b13556445">transformBuffer</a>.getvalue()</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>        <span class="keywordflow">return</span> fontData</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span> </div>
</div>
<div class="foldopen" id="foldopen00373" data-start="" data-end="">
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno"><a class="line" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#aeced29b438c8336d839a6265e38cd703">  373</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#aeced29b438c8336d839a6265e38cd703">transformTable</a>(self, tag):</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>        <span class="stringliteral">&quot;&quot;&quot;Return transformed table data, or None if some pre-conditions aren&#39;t</span></div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span><span class="stringliteral">        met -- in which case, the non-transformed table data will be used.</span></div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>        <span class="keywordflow">if</span> tag == <span class="stringliteral">&quot;loca&quot;</span>:</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>            data = b<span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>        <span class="keywordflow">elif</span> tag == <span class="stringliteral">&quot;glyf&quot;</span>:</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>            <span class="keywordflow">for</span> tag <span class="keywordflow">in</span> (<span class="stringliteral">&quot;maxp&quot;</span>, <span class="stringliteral">&quot;head&quot;</span>, <span class="stringliteral">&quot;loca&quot;</span>, <span class="stringliteral">&quot;glyf&quot;</span>):</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>                self.<a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#abe0200f474e33f4b87b0a713dcef58b4">_decompileTable</a>(tag)</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>            glyfTable = self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4cf13dd2f1070620565ceeb758d52ec4">ttFont</a>[<span class="stringliteral">&quot;glyf&quot;</span>]</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>            data = glyfTable.transform(self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4cf13dd2f1070620565ceeb758d52ec4">ttFont</a>)</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>        <span class="keywordflow">elif</span> tag == <span class="stringliteral">&quot;hmtx&quot;</span>:</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>            <span class="keywordflow">if</span> <span class="stringliteral">&quot;glyf&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">tables</a>:</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>                <span class="keywordflow">return</span></div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>            <span class="keywordflow">for</span> tag <span class="keywordflow">in</span> (<span class="stringliteral">&quot;maxp&quot;</span>, <span class="stringliteral">&quot;head&quot;</span>, <span class="stringliteral">&quot;hhea&quot;</span>, <span class="stringliteral">&quot;loca&quot;</span>, <span class="stringliteral">&quot;glyf&quot;</span>, <span class="stringliteral">&quot;hmtx&quot;</span>):</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>                self.<a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#abe0200f474e33f4b87b0a713dcef58b4">_decompileTable</a>(tag)</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>            hmtxTable = self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4cf13dd2f1070620565ceeb758d52ec4">ttFont</a>[<span class="stringliteral">&quot;hmtx&quot;</span>]</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>            data = hmtxTable.transform(self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4cf13dd2f1070620565ceeb758d52ec4">ttFont</a>)  <span class="comment"># can be None</span></div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;Transform for table &#39;%s&#39; is unknown&quot;</span> % tag)</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>        <span class="keywordflow">return</span> data</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span> </div>
</div>
<div class="foldopen" id="foldopen00395" data-start="" data-end="">
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno"><a class="line" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#ac9ac397f3ca0b3c02e9b898467de2e02">  395</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#ac9ac397f3ca0b3c02e9b898467de2e02">_calcMasterChecksum</a>(self):</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>        <span class="stringliteral">&quot;&quot;&quot;Calculate checkSumAdjustment.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>        checksums = []</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>        <span class="keywordflow">for</span> tag <span class="keywordflow">in</span> self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">tables</a>.keys():</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>            checksums.append(self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">tables</a>[tag].checkSum)</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span> </div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>        <span class="comment"># Create a SFNT directory for checksum calculation purposes</span></div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a1cf20a23c553421b5f6657e9dcdba617">searchRange</a>, self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a926f618239c18b90e788738838b34bc6">entrySelector</a>, self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#abaec3db88c38c60ed2b09b753630a519">rangeShift</a> = <a class="code hl_function" href="../../df/d73/namespacefontTools_1_1ttLib_1_1ttFont.html#a873c2075b95e23022bb33b318a0810a9">getSearchRange</a>(</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>            self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a5500889b4a254e708a4e99d0bd4976c6">numTables</a>, 16</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>        )</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>        directory = sstruct.pack(sfntDirectoryFormat, self)</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>        tables = sorted(self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">tables</a>.items())</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>        <span class="keywordflow">for</span> tag, entry <span class="keywordflow">in</span> tables:</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>            sfntEntry = SFNTDirectoryEntry()</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>            sfntEntry.tag = entry.tag</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>            sfntEntry.checkSum = entry.checkSum</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>            sfntEntry.offset = entry.origOffset</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>            sfntEntry.length = entry.origLength</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>            directory = directory + sfntEntry.toString()</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span> </div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>        directory_end = sfntDirectorySize + len(self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">tables</a>) * sfntDirectoryEntrySize</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>        <span class="keyword">assert</span> directory_end == len(directory)</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span> </div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>        checksums.append(calcChecksum(directory))</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>        checksum = sum(checksums) &amp; 0xFFFFFFFF</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>        <span class="comment"># BiboAfba!</span></div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>        checksumadjustment = (0xB1B0AFBA - checksum) &amp; 0xFFFFFFFF</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>        <span class="keywordflow">return</span> checksumadjustment</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span> </div>
</div>
<div class="foldopen" id="foldopen00424" data-start="" data-end="">
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno"><a class="line" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a6a5870a4537b88b1163175e35aacf776">  424</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a6a5870a4537b88b1163175e35aacf776">writeMasterChecksum</a>(self):</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>        <span class="stringliteral">&quot;&quot;&quot;Write checkSumAdjustment to the transformBuffer.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>        checksumadjustment = self.<a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#ac9ac397f3ca0b3c02e9b898467de2e02">_calcMasterChecksum</a>()</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a84bc6d517921d6e47ec2ee6b13556445">transformBuffer</a>.seek(self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">tables</a>[<span class="stringliteral">&quot;head&quot;</span>].offset + 8)</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>        self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a84bc6d517921d6e47ec2ee6b13556445">transformBuffer</a>.write(struct.pack(<span class="stringliteral">&quot;&gt;L&quot;</span>, checksumadjustment))</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span> </div>
</div>
<div class="foldopen" id="foldopen00430" data-start="" data-end="">
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno"><a class="line" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a6c0a204543657547a9f432b69143c69c">  430</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a6c0a204543657547a9f432b69143c69c">_calcTotalSize</a>(self):</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>        <span class="stringliteral">&quot;&quot;&quot;Calculate total size of WOFF2 font, including any meta- and/or private data.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>        offset = self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a8acf1a59fea44b11db8957b9c3acb62c">directorySize</a></div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>        <span class="keywordflow">for</span> entry <span class="keywordflow">in</span> self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">tables</a>.values():</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>            offset += len(entry.toString())</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>        offset += self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#ae53953393399bdc998555a71d8c5752a">totalCompressedSize</a></div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>        offset = (offset + 3) &amp; ~3</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>        offset = self.<a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#aa205881ff360c6ee30aa1071dd302292">_calcFlavorDataOffsetsAndSize</a>(offset)</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>        <span class="keywordflow">return</span> offset</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span> </div>
</div>
<div class="foldopen" id="foldopen00440" data-start="" data-end="">
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno"><a class="line" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#aa205881ff360c6ee30aa1071dd302292">  440</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#aa205881ff360c6ee30aa1071dd302292">_calcFlavorDataOffsetsAndSize</a>(self, start):</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>        <span class="stringliteral">&quot;&quot;&quot;Calculate offsets and lengths for any meta- and/or private data.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>        offset = start</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>        data = self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a1b1cb08e5e2cc0bd14742da0c7b8e77a">flavorData</a></div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>        <span class="keywordflow">if</span> data.metaData:</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>            self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#aa56ae13f6ed386f361846f89023cff02">metaOrigLength</a> = len(data.metaData)</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>            self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#af7b88487211aa90d4e552a61e4ab8680">metaOffset</a> = offset</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>            self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#ab0e634cd6ecfd852e1d82ebc4ffadf19">compressedMetaData</a> = brotli.compress(</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>                data.metaData, mode=brotli.MODE_TEXT</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>            )</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>            self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a697bf2fb69406e534a44ccaf97733588">metaLength</a> = len(self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#ab0e634cd6ecfd852e1d82ebc4ffadf19">compressedMetaData</a>)</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>            offset += self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a697bf2fb69406e534a44ccaf97733588">metaLength</a></div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>            self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#af7b88487211aa90d4e552a61e4ab8680">metaOffset</a> = self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a697bf2fb69406e534a44ccaf97733588">metaLength</a> = self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#aa56ae13f6ed386f361846f89023cff02">metaOrigLength</a> = 0</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>            self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#ab0e634cd6ecfd852e1d82ebc4ffadf19">compressedMetaData</a> = b<span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>        <span class="keywordflow">if</span> data.privData:</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>            <span class="comment"># make sure private data is padded to 4-byte boundary</span></div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>            offset = (offset + 3) &amp; ~3</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>            self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a8f7cdbcb3f039cffe727be5b420ad6c0">privOffset</a> = offset</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>            self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a7e5a0c6339981f55548b7cb94cc2e4f5">privLength</a> = len(data.privData)</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>            offset += self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a7e5a0c6339981f55548b7cb94cc2e4f5">privLength</a></div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>            self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a8f7cdbcb3f039cffe727be5b420ad6c0">privOffset</a> = self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a7e5a0c6339981f55548b7cb94cc2e4f5">privLength</a> = 0</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>        <span class="keywordflow">return</span> offset</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span> </div>
</div>
<div class="foldopen" id="foldopen00465" data-start="" data-end="">
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno"><a class="line" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#ae458791a81224bec3966ca10facdafeb">  465</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#ae458791a81224bec3966ca10facdafeb">_getVersion</a>(self):</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>        <span class="stringliteral">&quot;&quot;&quot;Return the WOFF2 font&#39;s (majorVersion, minorVersion) tuple.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>        data = self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a1b1cb08e5e2cc0bd14742da0c7b8e77a">flavorData</a></div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>        <span class="keywordflow">if</span> data.majorVersion <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> data.minorVersion <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>            <span class="keywordflow">return</span> data.majorVersion, data.minorVersion</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>            <span class="comment"># if None, return &#39;fontRevision&#39; from &#39;head&#39; table</span></div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>            <span class="keywordflow">if</span> <span class="stringliteral">&quot;head&quot;</span> <span class="keywordflow">in</span> self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">tables</a>:</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>                <span class="keywordflow">return</span> struct.unpack(<span class="stringliteral">&quot;&gt;HH&quot;</span>, self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">tables</a>[<span class="stringliteral">&quot;head&quot;</span>].data[4:8])</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>                <span class="keywordflow">return</span> 0, 0</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span> </div>
</div>
<div class="foldopen" id="foldopen00477" data-start="" data-end="">
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno"><a class="line" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a578dc9b754e5a2fe494838e28562af53">  477</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a578dc9b754e5a2fe494838e28562af53">_packTableDirectory</a>(self):</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>        <span class="stringliteral">&quot;&quot;&quot;Return WOFF2 table directory data.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>        directory = sstruct.pack(self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a1cb05cc95f5a5734ec1b2ddc4ea2ac80">directoryFormat</a>, self)</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>        <span class="keywordflow">for</span> entry <span class="keywordflow">in</span> self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">tables</a>.values():</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>            directory = directory + entry.toString()</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>        <span class="keywordflow">return</span> directory</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span> </div>
</div>
<div class="foldopen" id="foldopen00484" data-start="" data-end="">
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno"><a class="line" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4361304b7e8ea8d1fbb8e4ad41a98707">  484</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4361304b7e8ea8d1fbb8e4ad41a98707">_writeFlavorData</a>(self):</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>        <span class="stringliteral">&quot;&quot;&quot;Write metadata and/or private data using appropiate padding.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>        compressedMetaData = self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#ab0e634cd6ecfd852e1d82ebc4ffadf19">compressedMetaData</a></div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>        privData = self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a1b1cb08e5e2cc0bd14742da0c7b8e77a">flavorData</a>.privData</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>        <span class="keywordflow">if</span> compressedMetaData <span class="keywordflow">and</span> privData:</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>            compressedMetaData = pad(compressedMetaData, size=4)</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>        <span class="keywordflow">if</span> compressedMetaData:</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>            self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a26bae8bd595ae608a2d04d9e93118fb2">file</a>.seek(self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#af7b88487211aa90d4e552a61e4ab8680">metaOffset</a>)</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>            <span class="keyword">assert</span> self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a26bae8bd595ae608a2d04d9e93118fb2">file</a>.tell() == self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#af7b88487211aa90d4e552a61e4ab8680">metaOffset</a></div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>            self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a26bae8bd595ae608a2d04d9e93118fb2">file</a>.write(compressedMetaData)</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>        <span class="keywordflow">if</span> privData:</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>            self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a26bae8bd595ae608a2d04d9e93118fb2">file</a>.seek(self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a8f7cdbcb3f039cffe727be5b420ad6c0">privOffset</a>)</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>            <span class="keyword">assert</span> self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a26bae8bd595ae608a2d04d9e93118fb2">file</a>.tell() == self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a8f7cdbcb3f039cffe727be5b420ad6c0">privOffset</a></div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>            self.<a class="code hl_variable" href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a26bae8bd595ae608a2d04d9e93118fb2">file</a>.write(privData)</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span> </div>
</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>    <span class="keyword">def </span>reordersTables(self):</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>        <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span> </div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span> </div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span><span class="comment"># -- woff2 directory helpers and cruft</span></div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span> </div>
</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>woff2DirectoryFormat = <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span><span class="stringliteral">        &gt; # big endian</span></div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span><span class="stringliteral">        signature:           4s   # &quot;wOF2&quot;</span></div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span><span class="stringliteral">        sfntVersion:         4s</span></div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span><span class="stringliteral">        length:              L    # total woff2 file size</span></div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span><span class="stringliteral">        numTables:           H    # number of tables</span></div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span><span class="stringliteral">        reserved:            H    # set to 0</span></div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span><span class="stringliteral">        totalSfntSize:       L    # uncompressed size</span></div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span><span class="stringliteral">        totalCompressedSize: L    # compressed size</span></div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span><span class="stringliteral">        majorVersion:        H    # major version of WOFF file</span></div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span><span class="stringliteral">        minorVersion:        H    # minor version of WOFF file</span></div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span><span class="stringliteral">        metaOffset:          L    # offset to metadata block</span></div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span><span class="stringliteral">        metaLength:          L    # length of compressed metadata</span></div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span><span class="stringliteral">        metaOrigLength:      L    # length of uncompressed metadata</span></div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span><span class="stringliteral">        privOffset:          L    # offset to private data block</span></div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span><span class="stringliteral">        privLength:          L    # length of private data block</span></div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span><span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span> </div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>woff2DirectorySize = sstruct.calcsize(woff2DirectoryFormat)</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span> </div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>woff2KnownTags = (</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>    <span class="stringliteral">&quot;cmap&quot;</span>,</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>    <span class="stringliteral">&quot;head&quot;</span>,</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>    <span class="stringliteral">&quot;hhea&quot;</span>,</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>    <span class="stringliteral">&quot;hmtx&quot;</span>,</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>    <span class="stringliteral">&quot;maxp&quot;</span>,</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>    <span class="stringliteral">&quot;name&quot;</span>,</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>    <span class="stringliteral">&quot;OS/2&quot;</span>,</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>    <span class="stringliteral">&quot;post&quot;</span>,</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>    <span class="stringliteral">&quot;cvt &quot;</span>,</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>    <span class="stringliteral">&quot;fpgm&quot;</span>,</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>    <span class="stringliteral">&quot;glyf&quot;</span>,</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>    <span class="stringliteral">&quot;loca&quot;</span>,</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>    <span class="stringliteral">&quot;prep&quot;</span>,</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>    <span class="stringliteral">&quot;CFF &quot;</span>,</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>    <span class="stringliteral">&quot;VORG&quot;</span>,</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>    <span class="stringliteral">&quot;EBDT&quot;</span>,</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>    <span class="stringliteral">&quot;EBLC&quot;</span>,</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>    <span class="stringliteral">&quot;gasp&quot;</span>,</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>    <span class="stringliteral">&quot;hdmx&quot;</span>,</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>    <span class="stringliteral">&quot;kern&quot;</span>,</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>    <span class="stringliteral">&quot;LTSH&quot;</span>,</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>    <span class="stringliteral">&quot;PCLT&quot;</span>,</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>    <span class="stringliteral">&quot;VDMX&quot;</span>,</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>    <span class="stringliteral">&quot;vhea&quot;</span>,</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>    <span class="stringliteral">&quot;vmtx&quot;</span>,</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>    <span class="stringliteral">&quot;BASE&quot;</span>,</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>    <span class="stringliteral">&quot;GDEF&quot;</span>,</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>    <span class="stringliteral">&quot;GPOS&quot;</span>,</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>    <span class="stringliteral">&quot;GSUB&quot;</span>,</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>    <span class="stringliteral">&quot;EBSC&quot;</span>,</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>    <span class="stringliteral">&quot;JSTF&quot;</span>,</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>    <span class="stringliteral">&quot;MATH&quot;</span>,</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>    <span class="stringliteral">&quot;CBDT&quot;</span>,</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>    <span class="stringliteral">&quot;CBLC&quot;</span>,</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>    <span class="stringliteral">&quot;COLR&quot;</span>,</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>    <span class="stringliteral">&quot;CPAL&quot;</span>,</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>    <span class="stringliteral">&quot;SVG &quot;</span>,</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>    <span class="stringliteral">&quot;sbix&quot;</span>,</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>    <span class="stringliteral">&quot;acnt&quot;</span>,</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>    <span class="stringliteral">&quot;avar&quot;</span>,</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>    <span class="stringliteral">&quot;bdat&quot;</span>,</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>    <span class="stringliteral">&quot;bloc&quot;</span>,</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>    <span class="stringliteral">&quot;bsln&quot;</span>,</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>    <span class="stringliteral">&quot;cvar&quot;</span>,</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>    <span class="stringliteral">&quot;fdsc&quot;</span>,</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>    <span class="stringliteral">&quot;feat&quot;</span>,</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>    <span class="stringliteral">&quot;fmtx&quot;</span>,</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>    <span class="stringliteral">&quot;fvar&quot;</span>,</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>    <span class="stringliteral">&quot;gvar&quot;</span>,</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>    <span class="stringliteral">&quot;hsty&quot;</span>,</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>    <span class="stringliteral">&quot;just&quot;</span>,</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>    <span class="stringliteral">&quot;lcar&quot;</span>,</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>    <span class="stringliteral">&quot;mort&quot;</span>,</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>    <span class="stringliteral">&quot;morx&quot;</span>,</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>    <span class="stringliteral">&quot;opbd&quot;</span>,</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>    <span class="stringliteral">&quot;prop&quot;</span>,</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>    <span class="stringliteral">&quot;trak&quot;</span>,</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>    <span class="stringliteral">&quot;Zapf&quot;</span>,</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>    <span class="stringliteral">&quot;Silf&quot;</span>,</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>    <span class="stringliteral">&quot;Glat&quot;</span>,</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>    <span class="stringliteral">&quot;Gloc&quot;</span>,</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>    <span class="stringliteral">&quot;Feat&quot;</span>,</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>    <span class="stringliteral">&quot;Sill&quot;</span>,</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>)</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span> </div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>woff2FlagsFormat = <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span><span class="stringliteral">        &gt; # big endian</span></div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span><span class="stringliteral">        flags: B  # table type and flags</span></div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span><span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span> </div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>woff2FlagsSize = sstruct.calcsize(woff2FlagsFormat)</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span> </div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>woff2UnknownTagFormat = <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span><span class="stringliteral">        &gt; # big endian</span></div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span><span class="stringliteral">        tag: 4s  # 4-byte tag (optional)</span></div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span><span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span> </div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>woff2UnknownTagSize = sstruct.calcsize(woff2UnknownTagFormat)</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span> </div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>woff2UnknownTagIndex = 0x3F</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span> </div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>woff2Base128MaxSize = 5</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>woff2DirectoryEntryMaxSize = (</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>    woff2FlagsSize + woff2UnknownTagSize + 2 * woff2Base128MaxSize</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>)</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span> </div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>woff2TransformedTableTags = (<span class="stringliteral">&quot;glyf&quot;</span>, <span class="stringliteral">&quot;loca&quot;</span>)</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span> </div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>woff2GlyfTableFormat = <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span><span class="stringliteral">        &gt; # big endian</span></div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span><span class="stringliteral">        version:                  H  # = 0x0000</span></div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span><span class="stringliteral">        optionFlags:              H  # Bit 0: we have overlapSimpleBitmap[], Bits 1-15: reserved</span></div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span><span class="stringliteral">        numGlyphs:                H  # Number of glyphs</span></div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span><span class="stringliteral">        indexFormat:              H  # Offset format for loca table</span></div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span><span class="stringliteral">        nContourStreamSize:       L  # Size of nContour stream</span></div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span><span class="stringliteral">        nPointsStreamSize:        L  # Size of nPoints stream</span></div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span><span class="stringliteral">        flagStreamSize:           L  # Size of flag stream</span></div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span><span class="stringliteral">        glyphStreamSize:          L  # Size of glyph stream</span></div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span><span class="stringliteral">        compositeStreamSize:      L  # Size of composite stream</span></div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span><span class="stringliteral">        bboxStreamSize:           L  # Comnined size of bboxBitmap and bboxStream</span></div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span><span class="stringliteral">        instructionStreamSize:    L  # Size of instruction stream</span></div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span><span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span> </div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>woff2GlyfTableFormatSize = sstruct.calcsize(woff2GlyfTableFormat)</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span> </div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>bboxFormat = <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span><span class="stringliteral">        &gt;   # big endian</span></div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span><span class="stringliteral">        xMin:               h</span></div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span><span class="stringliteral">        yMin:               h</span></div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span><span class="stringliteral">        xMax:               h</span></div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span><span class="stringliteral">        yMax:               h</span></div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span><span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span> </div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>woff2OverlapSimpleBitmapFlag = 0x0001</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span> </div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span> </div>
<div class="foldopen" id="foldopen00642" data-start="" data-end="">
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno"><a class="line" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#a18fce2a2ac77d224095786812158efb6">  642</a></span><span class="keyword">def </span><a class="code hl_function" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#a18fce2a2ac77d224095786812158efb6">getKnownTagIndex</a>(tag):</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>    <span class="stringliteral">&quot;&quot;&quot;Return index of &#39;tag&#39; in woff2KnownTags list. Return 63 if not found.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>        <span class="keywordflow">return</span> woff2KnownTags.index(tag)</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>    <span class="keywordflow">except</span> ValueError:</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>        <span class="keywordflow">return</span> woff2UnknownTagIndex</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span> </div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span> </div>
</div>
<div class="foldopen" id="foldopen00650" data-start="" data-end="">
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno"><a class="line" href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html">  650</a></span><span class="keyword">class </span><a class="code hl_class" href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html">WOFF2DirectoryEntry</a>(<a class="code hl_class" href="../../d6/d15/classDirectoryEntry.html">DirectoryEntry</a>):</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>    <span class="keyword">def </span>fromFile(self, file):</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>        pos = file.tell()</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>        data = file.read(woff2DirectoryEntryMaxSize)</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>        left = self.<a class="code hl_function" href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#a43afad8771fa3d5d04f695a4dfde8252">fromString</a>(data)</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>        consumed = len(data) - len(left)</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>        file.seek(pos + consumed)</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span> </div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>    <span class="keyword">def </span>fromString(self, data):</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>        <span class="keywordflow">if</span> len(data) &lt; 1:</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;can&#39;t read table &#39;flags&#39;: not enough data&quot;</span>)</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>        dummy, data = sstruct.unpack2(woff2FlagsFormat, data, self)</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>        <span class="keywordflow">if</span> self.flags &amp; 0x3F == 0x3F:</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>            <span class="comment"># if bits [0..5] of the flags byte == 63, read a 4-byte arbitrary tag value</span></div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>            <span class="keywordflow">if</span> len(data) &lt; woff2UnknownTagSize:</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>                <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;can&#39;t read table &#39;tag&#39;: not enough data&quot;</span>)</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>            dummy, data = sstruct.unpack2(woff2UnknownTagFormat, data, self)</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>            <span class="comment"># otherwise, tag is derived from a fixed &#39;Known Tags&#39; table</span></div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>            self.<a class="code hl_variable" href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#ae0e2a24003a6d265836be49baad047cc">tag</a> = woff2KnownTags[self.flags &amp; 0x3F]</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>        self.<a class="code hl_variable" href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#ae0e2a24003a6d265836be49baad047cc">tag</a> = <a class="code hl_class" href="../../d6/d75/classfontTools_1_1misc_1_1textTools_1_1Tag.html">Tag</a>(self.<a class="code hl_variable" href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#ae0e2a24003a6d265836be49baad047cc">tag</a>)</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>        self.<a class="code hl_variable" href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#a4f1994b627123f5ded840ecc6b37a0fd">origLength</a>, data = <a class="code hl_function" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#a6d671b0bb652cde6bd8bd0cac3ae8da4">unpackBase128</a>(data)</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>        self.<a class="code hl_variable" href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#aa8ac8c07d652a8a6b2a8a259922a9661">length</a> = self.<a class="code hl_variable" href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#a4f1994b627123f5ded840ecc6b37a0fd">origLength</a></div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>        <span class="keywordflow">if</span> self.<a class="code hl_variable" href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#afde3467185e5d04dc39dc6e08556511f">transformed</a>:</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>            self.<a class="code hl_variable" href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#aa8ac8c07d652a8a6b2a8a259922a9661">length</a>, data = <a class="code hl_function" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#a6d671b0bb652cde6bd8bd0cac3ae8da4">unpackBase128</a>(data)</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>            <span class="keywordflow">if</span> self.<a class="code hl_variable" href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#ae0e2a24003a6d265836be49baad047cc">tag</a> == <span class="stringliteral">&quot;loca&quot;</span> <span class="keywordflow">and</span> self.<a class="code hl_variable" href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#aa8ac8c07d652a8a6b2a8a259922a9661">length</a> != 0:</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>                <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;the transformLength of the &#39;loca&#39; table must be 0&quot;</span>)</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>        <span class="comment"># return left over data</span></div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>        <span class="keywordflow">return</span> data</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span> </div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>    <span class="keyword">def </span>toString(self):</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>        data = bytechr(self.flags)</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>        <span class="keywordflow">if</span> (self.flags &amp; 0x3F) == 0x3F:</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>            data += struct.pack(<span class="stringliteral">&quot;&gt;4s&quot;</span>, self.<a class="code hl_variable" href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#ae0e2a24003a6d265836be49baad047cc">tag</a>.tobytes())</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>        data += <a class="code hl_function" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#a8e695eafebd8649b313cafffd00d47fb">packBase128</a>(self.<a class="code hl_variable" href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#a4f1994b627123f5ded840ecc6b37a0fd">origLength</a>)</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>        <span class="keywordflow">if</span> self.<a class="code hl_variable" href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#afde3467185e5d04dc39dc6e08556511f">transformed</a>:</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>            data += <a class="code hl_function" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#a8e695eafebd8649b313cafffd00d47fb">packBase128</a>(self.<a class="code hl_variable" href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#aa8ac8c07d652a8a6b2a8a259922a9661">length</a>)</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>        <span class="keywordflow">return</span> data</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span> </div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>    <span class="preprocessor">@property</span></div>
<div class="foldopen" id="foldopen00690" data-start="" data-end="">
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno"><a class="line" href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#aa816f295f56013a3919240c1eb78553d">  690</a></span>    <span class="keyword">def </span>transformVersion(self):</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>        <span class="stringliteral">&quot;&quot;&quot;Return bits 6-7 of table entry&#39;s flags, which indicate the preprocessing</span></div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span><span class="stringliteral">        transformation version number (between 0 and 3).</span></div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>        <span class="keywordflow">return</span> self.flags &gt;&gt; 6</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span> </div>
</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>    <span class="preprocessor">@transformVersion.setter</span></div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>    <span class="keyword">def </span>transformVersion(self, value):</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>        <span class="keyword">assert</span> 0 &lt;= value &lt;= 3</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>        self.flags |= value &lt;&lt; 6</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span> </div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>    <span class="preprocessor">@property</span></div>
<div class="foldopen" id="foldopen00702" data-start="" data-end="">
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno"><a class="line" href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#ab7b786df8f62d05cbb190752b287d618">  702</a></span>    <span class="keyword">def </span>transformed(self):</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>        <span class="stringliteral">&quot;&quot;&quot;Return True if the table has any transformation, else return False.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>        <span class="comment"># For all tables in a font, except for &#39;glyf&#39; and &#39;loca&#39;, the transformation</span></div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>        <span class="comment"># version 0 indicates the null transform (where the original table data is</span></div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>        <span class="comment"># passed directly to the Brotli compressor). For &#39;glyf&#39; and &#39;loca&#39; tables,</span></div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>        <span class="comment"># transformation version 3 indicates the null transform</span></div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>        <span class="keywordflow">if</span> self.<a class="code hl_variable" href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#ae0e2a24003a6d265836be49baad047cc">tag</a> <span class="keywordflow">in</span> {<span class="stringliteral">&quot;glyf&quot;</span>, <span class="stringliteral">&quot;loca&quot;</span>}:</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>            <span class="keywordflow">return</span> self.<a class="code hl_variable" href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#abf8df43f7605556d1970e2fbc5af6611">transformVersion</a> != 3</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>            <span class="keywordflow">return</span> self.<a class="code hl_variable" href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#abf8df43f7605556d1970e2fbc5af6611">transformVersion</a> != 0</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span> </div>
</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>    <span class="preprocessor">@transformed.setter</span></div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>    <span class="keyword">def </span>transformed(self, booleanValue):</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>        <span class="comment"># here we assume that a non-null transform means version 0 for &#39;glyf&#39; and</span></div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>        <span class="comment"># &#39;loca&#39; and 1 for every other table (e.g. hmtx); but that may change as</span></div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>        <span class="comment"># new transformation formats are introduced in the future (if ever).</span></div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>        <span class="keywordflow">if</span> self.<a class="code hl_variable" href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#ae0e2a24003a6d265836be49baad047cc">tag</a> <span class="keywordflow">in</span> {<span class="stringliteral">&quot;glyf&quot;</span>, <span class="stringliteral">&quot;loca&quot;</span>}:</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>            self.<a class="code hl_variable" href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#abf8df43f7605556d1970e2fbc5af6611">transformVersion</a> = 3 <span class="keywordflow">if</span> <span class="keywordflow">not</span> booleanValue <span class="keywordflow">else</span> 0</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>            self.<a class="code hl_variable" href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#abf8df43f7605556d1970e2fbc5af6611">transformVersion</a> = int(booleanValue)</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span> </div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span> </div>
</div>
<div class="foldopen" id="foldopen00724" data-start="" data-end="">
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno"><a class="line" href="../../dd/dc6/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2LocaTable.html">  724</a></span><span class="keyword">class </span><a class="code hl_class" href="../../dd/dc6/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2LocaTable.html">WOFF2LocaTable</a>(<a class="code hl_class" href="../../de/d85/classgetTableClass.html">getTableClass</a>(<span class="stringliteral">&quot;loca&quot;</span>)):</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>    <span class="stringliteral">&quot;&quot;&quot;Same as parent class. The only difference is that it attempts to preserve</span></div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span><span class="stringliteral">    the &#39;indexFormat&#39; as encoded in the WOFF2 glyf table.</span></div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span> </div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>    <span class="keyword">def </span>__init__(self, tag=None):</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>        self.<a class="code hl_variable" href="../../dd/dc6/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2LocaTable.html#adb60184983369125a7ebb8679d676e45">tableTag</a> = <a class="code hl_class" href="../../d6/d75/classfontTools_1_1misc_1_1textTools_1_1Tag.html">Tag</a>(tag <span class="keywordflow">or</span> <span class="stringliteral">&quot;loca&quot;</span>)</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span> </div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>    <span class="keyword">def </span>compile(self, ttFont):</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>            max_location = max(self.<a class="code hl_variable" href="../../dd/dc6/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2LocaTable.html#a8274e2d7655b240c2f2ba55374806f1d">locations</a>)</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>        <span class="keywordflow">except</span> AttributeError:</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>            self.set([])</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>            max_location = 0</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>        <span class="keywordflow">if</span> <span class="stringliteral">&quot;glyf&quot;</span> <span class="keywordflow">in</span> ttFont <span class="keywordflow">and</span> hasattr(ttFont[<span class="stringliteral">&quot;glyf&quot;</span>], <span class="stringliteral">&quot;indexFormat&quot;</span>):</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>            <span class="comment"># copile loca using the indexFormat specified in the WOFF2 glyf table</span></div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>            indexFormat = ttFont[<span class="stringliteral">&quot;glyf&quot;</span>].indexFormat</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>            <span class="keywordflow">if</span> indexFormat == 0:</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>                <span class="keywordflow">if</span> max_location &gt;= 0x20000:</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>                    <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;indexFormat is 0 but local offsets &gt; 0x20000&quot;</span>)</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>                <span class="keywordflow">if</span> <span class="keywordflow">not</span> all(l % 2 == 0 <span class="keywordflow">for</span> l <span class="keywordflow">in</span> self.<a class="code hl_variable" href="../../dd/dc6/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2LocaTable.html#a8274e2d7655b240c2f2ba55374806f1d">locations</a>):</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>                    <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>                        <span class="stringliteral">&quot;indexFormat is 0 but local offsets not multiples of 2&quot;</span></div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>                    )</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>                locations = array.array(<span class="stringliteral">&quot;H&quot;</span>)</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>                <span class="keywordflow">for</span> location <span class="keywordflow">in</span> self.<a class="code hl_variable" href="../../dd/dc6/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2LocaTable.html#a8274e2d7655b240c2f2ba55374806f1d">locations</a>:</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>                    locations.append(location // 2)</div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>                locations = array.array(<span class="stringliteral">&quot;I&quot;</span>, self.<a class="code hl_variable" href="../../dd/dc6/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2LocaTable.html#a8274e2d7655b240c2f2ba55374806f1d">locations</a>)</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>            <span class="keywordflow">if</span> sys.byteorder != <span class="stringliteral">&quot;big&quot;</span>:</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>                locations.byteswap()</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>            data = locations.tobytes()</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>            <span class="comment"># use the most compact indexFormat given the current glyph offsets</span></div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>            data = super(WOFF2LocaTable, self).compile(ttFont)</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>        <span class="keywordflow">return</span> data</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span> </div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span> </div>
</div>
<div class="foldopen" id="foldopen00762" data-start="" data-end="">
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno"><a class="line" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html">  762</a></span><span class="keyword">class </span><a class="code hl_class" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html">WOFF2GlyfTable</a>(<a class="code hl_class" href="../../de/d85/classgetTableClass.html">getTableClass</a>(<span class="stringliteral">&quot;glyf&quot;</span>)):</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>    <span class="stringliteral">&quot;&quot;&quot;Decoder/Encoder for WOFF2 &#39;glyf&#39; table transform.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span> </div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>    subStreams = (</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>        <span class="stringliteral">&quot;nContourStream&quot;</span>,</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>        <span class="stringliteral">&quot;nPointsStream&quot;</span>,</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>        <span class="stringliteral">&quot;flagStream&quot;</span>,</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>        <span class="stringliteral">&quot;glyphStream&quot;</span>,</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>        <span class="stringliteral">&quot;compositeStream&quot;</span>,</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>        <span class="stringliteral">&quot;bboxStream&quot;</span>,</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>        <span class="stringliteral">&quot;instructionStream&quot;</span>,</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>    )</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span> </div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>    <span class="keyword">def </span>__init__(self, tag=None):</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>        self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a4f830cd0ff28272f07751600d7a57226">tableTag</a> = <a class="code hl_class" href="../../d6/d75/classfontTools_1_1misc_1_1textTools_1_1Tag.html">Tag</a>(tag <span class="keywordflow">or</span> <span class="stringliteral">&quot;glyf&quot;</span>)</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span> </div>
<div class="foldopen" id="foldopen00778" data-start="" data-end="">
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno"><a class="line" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a78a510a46c8b3c7628cc89c44c39e6d9">  778</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a78a510a46c8b3c7628cc89c44c39e6d9">reconstruct</a>(self, data, ttFont):</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>        <span class="stringliteral">&quot;&quot;&quot;Decompile transformed &#39;glyf&#39; data.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>        inputDataSize = len(data)</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span> </div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>        <span class="keywordflow">if</span> inputDataSize &lt; woff2GlyfTableFormatSize:</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;not enough &#39;glyf&#39; data&quot;</span>)</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>        dummy, data = sstruct.unpack2(woff2GlyfTableFormat, data, self)</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>        offset = woff2GlyfTableFormatSize</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span> </div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>        <span class="keywordflow">for</span> stream <span class="keywordflow">in</span> self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#ac2efcf579ab9362491d37dbaca13cfb4">subStreams</a>:</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>            size = getattr(self, stream + <span class="stringliteral">&quot;Size&quot;</span>)</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>            setattr(self, stream, data[:size])</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>            data = data[size:]</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>            offset += size</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span> </div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>        hasOverlapSimpleBitmap = self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a3902eceebb5eb64daf7bfe8b95cd3cbe">optionFlags</a> &amp; woff2OverlapSimpleBitmapFlag</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>        self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a2abf35b0f9d0456e4533b7c70a4ca0ba">overlapSimpleBitmap</a> = <span class="keywordtype">None</span></div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>        <span class="keywordflow">if</span> hasOverlapSimpleBitmap:</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>            overlapSimpleBitmapSize = (self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aad4e893b215d0a654f842f7433685036">numGlyphs</a> + 7) &gt;&gt; 3</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>            self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a2abf35b0f9d0456e4533b7c70a4ca0ba">overlapSimpleBitmap</a> = array.array(<span class="stringliteral">&quot;B&quot;</span>, data[:overlapSimpleBitmapSize])</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>            offset += overlapSimpleBitmapSize</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span> </div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>        <span class="keywordflow">if</span> offset != inputDataSize:</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>                <span class="stringliteral">&quot;incorrect size of transformed &#39;glyf&#39; table: expected %d, received %d bytes&quot;</span></div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>                % (offset, inputDataSize)</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>            )</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span> </div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>        bboxBitmapSize = ((self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aad4e893b215d0a654f842f7433685036">numGlyphs</a> + 31) &gt;&gt; 5) &lt;&lt; 2</div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>        bboxBitmap = self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#ad1e0a0eb613de6beb3ccd30da1788fd4">bboxStream</a>[:bboxBitmapSize]</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>        self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aa3733885e603b37d804ecefbee162f91">bboxBitmap</a> = array.array(<span class="stringliteral">&quot;B&quot;</span>, bboxBitmap)</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>        self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#ad1e0a0eb613de6beb3ccd30da1788fd4">bboxStream</a> = self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#ad1e0a0eb613de6beb3ccd30da1788fd4">bboxStream</a>[bboxBitmapSize:]</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span> </div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>        self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#ad8042b40cafda2fa1f13e34a0df22fa0">nContourStream</a> = array.array(<span class="stringliteral">&quot;h&quot;</span>, self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#ad8042b40cafda2fa1f13e34a0df22fa0">nContourStream</a>)</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>        <span class="keywordflow">if</span> sys.byteorder != <span class="stringliteral">&quot;big&quot;</span>:</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>            self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#ad8042b40cafda2fa1f13e34a0df22fa0">nContourStream</a>.byteswap()</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>        <span class="keyword">assert</span> len(self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#ad8042b40cafda2fa1f13e34a0df22fa0">nContourStream</a>) == self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aad4e893b215d0a654f842f7433685036">numGlyphs</a></div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span> </div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>        <span class="keywordflow">if</span> <span class="stringliteral">&quot;head&quot;</span> <span class="keywordflow">in</span> ttFont:</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>            ttFont[<span class="stringliteral">&quot;head&quot;</span>].indexToLocFormat = self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a0e2984bac4b71afe90780cd082f4fc3f">indexFormat</a></div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>            self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a0c1e35b30d4ebe1ce1391a45c590d44d">glyphOrder</a> = ttFont.getGlyphOrder()</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>        <span class="keywordflow">except</span>:</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>            self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a0c1e35b30d4ebe1ce1391a45c590d44d">glyphOrder</a> = <span class="keywordtype">None</span></div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>        <span class="keywordflow">if</span> self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a0c1e35b30d4ebe1ce1391a45c590d44d">glyphOrder</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>            self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a0c1e35b30d4ebe1ce1391a45c590d44d">glyphOrder</a> = [<span class="stringliteral">&quot;.notdef&quot;</span>]</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>            self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a0c1e35b30d4ebe1ce1391a45c590d44d">glyphOrder</a>.extend([<span class="stringliteral">&quot;glyph%.5d&quot;</span> % i <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(1, self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aad4e893b215d0a654f842f7433685036">numGlyphs</a>)])</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>            <span class="keywordflow">if</span> len(self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a0c1e35b30d4ebe1ce1391a45c590d44d">glyphOrder</a>) != self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aad4e893b215d0a654f842f7433685036">numGlyphs</a>:</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>                <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>                    <span class="stringliteral">&quot;incorrect glyphOrder: expected %d glyphs, found %d&quot;</span></div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>                    % (len(self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a0c1e35b30d4ebe1ce1391a45c590d44d">glyphOrder</a>), self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aad4e893b215d0a654f842f7433685036">numGlyphs</a>)</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>                )</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span> </div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>        glyphs = self.glyphs = {}</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>        <span class="keywordflow">for</span> glyphID, glyphName <span class="keywordflow">in</span> enumerate(self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a0c1e35b30d4ebe1ce1391a45c590d44d">glyphOrder</a>):</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>            glyph = self.<a class="code hl_function" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a4407402892f99e178d8fe22f8f242f53">_decodeGlyph</a>(glyphID)</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>            glyphs[glyphName] = glyph</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span> </div>
</div>
<div class="foldopen" id="foldopen00837" data-start="" data-end="">
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno"><a class="line" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a10da8dd9b8de27deb8507e9f3c7c6f70">  837</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a10da8dd9b8de27deb8507e9f3c7c6f70">transform</a>(self, ttFont):</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>        <span class="stringliteral">&quot;&quot;&quot;Return transformed &#39;glyf&#39; data&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>        self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aad4e893b215d0a654f842f7433685036">numGlyphs</a> = len(self.glyphs)</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>        <span class="keyword">assert</span> len(self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a0c1e35b30d4ebe1ce1391a45c590d44d">glyphOrder</a>) == self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aad4e893b215d0a654f842f7433685036">numGlyphs</a></div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>        <span class="keywordflow">if</span> <span class="stringliteral">&quot;maxp&quot;</span> <span class="keywordflow">in</span> ttFont:</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>            ttFont[<span class="stringliteral">&quot;maxp&quot;</span>].numGlyphs = self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aad4e893b215d0a654f842f7433685036">numGlyphs</a></div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>        self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a0e2984bac4b71afe90780cd082f4fc3f">indexFormat</a> = ttFont[<span class="stringliteral">&quot;head&quot;</span>].indexToLocFormat</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span> </div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>        <span class="keywordflow">for</span> stream <span class="keywordflow">in</span> self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#ac2efcf579ab9362491d37dbaca13cfb4">subStreams</a>:</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>            setattr(self, stream, b<span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>        bboxBitmapSize = ((self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aad4e893b215d0a654f842f7433685036">numGlyphs</a> + 31) &gt;&gt; 5) &lt;&lt; 2</div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>        self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aa3733885e603b37d804ecefbee162f91">bboxBitmap</a> = array.array(<span class="stringliteral">&quot;B&quot;</span>, [0] * bboxBitmapSize)</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span> </div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>        self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a2abf35b0f9d0456e4533b7c70a4ca0ba">overlapSimpleBitmap</a> = array.array(<span class="stringliteral">&quot;B&quot;</span>, [0] * ((self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aad4e893b215d0a654f842f7433685036">numGlyphs</a> + 7) &gt;&gt; 3))</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>        <span class="keywordflow">for</span> glyphID <span class="keywordflow">in</span> range(self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aad4e893b215d0a654f842f7433685036">numGlyphs</a>):</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>                self.<a class="code hl_function" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aece6072d57310b40bfe8ea5efe841820">_encodeGlyph</a>(glyphID)</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>            <span class="keywordflow">except</span> NotImplementedError:</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>                <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>        hasOverlapSimpleBitmap = any(self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a2abf35b0f9d0456e4533b7c70a4ca0ba">overlapSimpleBitmap</a>)</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span> </div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>        self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#ad1e0a0eb613de6beb3ccd30da1788fd4">bboxStream</a> = self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aa3733885e603b37d804ecefbee162f91">bboxBitmap</a>.tobytes() + self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#ad1e0a0eb613de6beb3ccd30da1788fd4">bboxStream</a></div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>        <span class="keywordflow">for</span> stream <span class="keywordflow">in</span> self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#ac2efcf579ab9362491d37dbaca13cfb4">subStreams</a>:</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>            setattr(self, stream + <span class="stringliteral">&quot;Size&quot;</span>, len(getattr(self, stream)))</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>        self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a18cc4e6a8484f6dd649a8dc31d79daa4">version</a> = 0</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>        self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a3902eceebb5eb64daf7bfe8b95cd3cbe">optionFlags</a> = 0</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>        <span class="keywordflow">if</span> hasOverlapSimpleBitmap:</div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>            self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a3902eceebb5eb64daf7bfe8b95cd3cbe">optionFlags</a> |= woff2OverlapSimpleBitmapFlag</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>        data = sstruct.pack(woff2GlyfTableFormat, self)</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>        data += bytesjoin([getattr(self, s) <span class="keywordflow">for</span> s <span class="keywordflow">in</span> self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#ac2efcf579ab9362491d37dbaca13cfb4">subStreams</a>])</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>        <span class="keywordflow">if</span> hasOverlapSimpleBitmap:</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>            data += self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a2abf35b0f9d0456e4533b7c70a4ca0ba">overlapSimpleBitmap</a>.tobytes()</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>        <span class="keywordflow">return</span> data</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span> </div>
</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>    <span class="keyword">def </span>_decodeGlyph(self, glyphID):</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>        glyph = <a class="code hl_function" href="../../df/d73/namespacefontTools_1_1ttLib_1_1ttFont.html#a072239b151d038f849c80faeb13ee14f">getTableModule</a>(<span class="stringliteral">&quot;glyf&quot;</span>).Glyph()</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>        glyph.numberOfContours = self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#ad8042b40cafda2fa1f13e34a0df22fa0">nContourStream</a>[glyphID]</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>        <span class="keywordflow">if</span> glyph.numberOfContours == 0:</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>            <span class="keywordflow">return</span> glyph</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>        <span class="keywordflow">elif</span> glyph.isComposite():</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>            self.<a class="code hl_function" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a3338837448134ee696c0a794f9e1f47b">_decodeComponents</a>(glyph)</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>            self.<a class="code hl_function" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a3cc8b2986921c4e9090c9821a65f49c9">_decodeCoordinates</a>(glyph)</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>            self.<a class="code hl_function" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a1d8ef4697c3650f3adb6d2ecaebcb342">_decodeOverlapSimpleFlag</a>(glyph, glyphID)</div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>        self.<a class="code hl_function" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a7318d76c5dedb34c267b6f2c4ab39a27">_decodeBBox</a>(glyphID, glyph)</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>        <span class="keywordflow">return</span> glyph</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span> </div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>    <span class="keyword">def </span>_decodeComponents(self, glyph):</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>        data = self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a0f43746262e6f23f95747f0d3b217a39">compositeStream</a></div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>        glyph.components = []</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>        more = 1</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>        haveInstructions = 0</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>        <span class="keywordflow">while</span> more:</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>            component = <a class="code hl_function" href="../../df/d73/namespacefontTools_1_1ttLib_1_1ttFont.html#a072239b151d038f849c80faeb13ee14f">getTableModule</a>(<span class="stringliteral">&quot;glyf&quot;</span>).GlyphComponent()</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>            more, haveInstr, data = component.decompile(data, self)</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>            haveInstructions = haveInstructions | haveInstr</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>            glyph.components.append(component)</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>        self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a0f43746262e6f23f95747f0d3b217a39">compositeStream</a> = data</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>        <span class="keywordflow">if</span> haveInstructions:</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>            self.<a class="code hl_function" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aa408553ea2e556d8dcb0f19b16c9129e">_decodeInstructions</a>(glyph)</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span> </div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>    <span class="keyword">def </span>_decodeCoordinates(self, glyph):</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>        data = self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aee887657cbb0faacffb3e8ecb6d32e58">nPointsStream</a></div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>        endPtsOfContours = []</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>        endPoint = -1</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(glyph.numberOfContours):</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>            ptsOfContour, data = <a class="code hl_function" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#a4e521aa126269c9b982b6f68bdef8f9d">unpack255UShort</a>(data)</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>            endPoint += ptsOfContour</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>            endPtsOfContours.append(endPoint)</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>        glyph.endPtsOfContours = endPtsOfContours</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>        self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aee887657cbb0faacffb3e8ecb6d32e58">nPointsStream</a> = data</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>        self.<a class="code hl_function" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a5f9db7167bfd42d42359b935b659e31d">_decodeTriplets</a>(glyph)</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>        self.<a class="code hl_function" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aa408553ea2e556d8dcb0f19b16c9129e">_decodeInstructions</a>(glyph)</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span> </div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>    <span class="keyword">def </span>_decodeOverlapSimpleFlag(self, glyph, glyphID):</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>        <span class="keywordflow">if</span> self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a2abf35b0f9d0456e4533b7c70a4ca0ba">overlapSimpleBitmap</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">or</span> glyph.numberOfContours &lt;= 0:</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>            <span class="keywordflow">return</span></div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>        byte = glyphID &gt;&gt; 3</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>        bit = glyphID &amp; 7</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>        <span class="keywordflow">if</span> self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a2abf35b0f9d0456e4533b7c70a4ca0ba">overlapSimpleBitmap</a>[byte] &amp; (0x80 &gt;&gt; bit):</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>            glyph.flags[0] |= _g_l_y_f.flagOverlapSimple</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span> </div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>    <span class="keyword">def </span>_decodeInstructions(self, glyph):</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>        glyphStream = self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aa0b4012fe5e269131043f4c96caf16ee">glyphStream</a></div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>        instructionStream = self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a168e70f0b8fbd53772e092875bae651f">instructionStream</a></div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>        instructionLength, glyphStream = <a class="code hl_function" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#a4e521aa126269c9b982b6f68bdef8f9d">unpack255UShort</a>(glyphStream)</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>        glyph.program = <a class="code hl_class" href="../../dc/dd8/classfontTools_1_1ttLib_1_1tables_1_1ttProgram_1_1Program.html">ttProgram.Program</a>()</div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>        glyph.program.fromBytecode(instructionStream[:instructionLength])</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>        self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aa0b4012fe5e269131043f4c96caf16ee">glyphStream</a> = glyphStream</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>        self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a168e70f0b8fbd53772e092875bae651f">instructionStream</a> = instructionStream[instructionLength:]</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span> </div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>    <span class="keyword">def </span>_decodeBBox(self, glyphID, glyph):</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>        haveBBox = bool(self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aa3733885e603b37d804ecefbee162f91">bboxBitmap</a>[glyphID &gt;&gt; 3] &amp; (0x80 &gt;&gt; (glyphID &amp; 7)))</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>        <span class="keywordflow">if</span> glyph.isComposite() <span class="keywordflow">and</span> <span class="keywordflow">not</span> haveBBox:</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;no bbox values for composite glyph %d&quot;</span> % glyphID)</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>        <span class="keywordflow">if</span> haveBBox:</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>            dummy, self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#ad1e0a0eb613de6beb3ccd30da1788fd4">bboxStream</a> = sstruct.unpack2(bboxFormat, self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#ad1e0a0eb613de6beb3ccd30da1788fd4">bboxStream</a>, glyph)</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>            glyph.recalcBounds(self)</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span> </div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>    <span class="keyword">def </span>_decodeTriplets(self, glyph):</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>        <span class="keyword">def </span>withSign(flag, baseval):</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>            <span class="keyword">assert</span> 0 &lt;= baseval <span class="keywordflow">and</span> baseval &lt; 65536, <span class="stringliteral">&quot;integer overflow&quot;</span></div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>            <span class="keywordflow">return</span> baseval <span class="keywordflow">if</span> flag &amp; 1 <span class="keywordflow">else</span> -baseval</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span> </div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>        nPoints = glyph.endPtsOfContours[-1] + 1</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>        flagSize = nPoints</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>        <span class="keywordflow">if</span> flagSize &gt; len(self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#af2f523cf116994eab914d05c3844ae96">flagStream</a>):</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;not enough &#39;flagStream&#39; data&quot;</span>)</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>        flagsData = self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#af2f523cf116994eab914d05c3844ae96">flagStream</a>[:flagSize]</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>        self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#af2f523cf116994eab914d05c3844ae96">flagStream</a> = self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#af2f523cf116994eab914d05c3844ae96">flagStream</a>[flagSize:]</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>        flags = array.array(<span class="stringliteral">&quot;B&quot;</span>, flagsData)</div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span> </div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>        triplets = array.array(<span class="stringliteral">&quot;B&quot;</span>, self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aa0b4012fe5e269131043f4c96caf16ee">glyphStream</a>)</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>        nTriplets = len(triplets)</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>        <span class="keyword">assert</span> nPoints &lt;= nTriplets</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span> </div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>        x = 0</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>        y = 0</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>        glyph.coordinates = <a class="code hl_function" href="../../df/d73/namespacefontTools_1_1ttLib_1_1ttFont.html#a072239b151d038f849c80faeb13ee14f">getTableModule</a>(<span class="stringliteral">&quot;glyf&quot;</span>).GlyphCoordinates.zeros(nPoints)</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>        glyph.flags = array.array(<span class="stringliteral">&quot;B&quot;</span>)</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>        tripletIndex = 0</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(nPoints):</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>            flag = flags[i]</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>            onCurve = <span class="keywordflow">not</span> bool(flag &gt;&gt; 7)</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>            flag &amp;= 0x7F</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>            <span class="keywordflow">if</span> flag &lt; 84:</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>                nBytes = 1</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>            <span class="keywordflow">elif</span> flag &lt; 120:</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>                nBytes = 2</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>            <span class="keywordflow">elif</span> flag &lt; 124:</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>                nBytes = 3</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>                nBytes = 4</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>            <span class="keyword">assert</span> (tripletIndex + nBytes) &lt;= nTriplets</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>            <span class="keywordflow">if</span> flag &lt; 10:</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>                dx = 0</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>                dy = withSign(flag, ((flag &amp; 14) &lt;&lt; 7) + triplets[tripletIndex])</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>            <span class="keywordflow">elif</span> flag &lt; 20:</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>                dx = withSign(flag, (((flag - 10) &amp; 14) &lt;&lt; 7) + triplets[tripletIndex])</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>                dy = 0</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>            <span class="keywordflow">elif</span> flag &lt; 84:</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>                b0 = flag - 20</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>                b1 = triplets[tripletIndex]</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>                dx = withSign(flag, 1 + (b0 &amp; 0x30) + (b1 &gt;&gt; 4))</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>                dy = withSign(flag &gt;&gt; 1, 1 + ((b0 &amp; 0x0C) &lt;&lt; 2) + (b1 &amp; 0x0F))</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>            <span class="keywordflow">elif</span> flag &lt; 120:</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>                b0 = flag - 84</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>                dx = withSign(flag, 1 + ((b0 // 12) &lt;&lt; 8) + triplets[tripletIndex])</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>                dy = withSign(</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>                    flag &gt;&gt; 1, 1 + (((b0 % 12) &gt;&gt; 2) &lt;&lt; 8) + triplets[tripletIndex + 1]</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>                )</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>            <span class="keywordflow">elif</span> flag &lt; 124:</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>                b2 = triplets[tripletIndex + 1]</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>                dx = withSign(flag, (triplets[tripletIndex] &lt;&lt; 4) + (b2 &gt;&gt; 4))</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>                dy = withSign(</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>                    flag &gt;&gt; 1, ((b2 &amp; 0x0F) &lt;&lt; 8) + triplets[tripletIndex + 2]</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>                )</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>                dx = withSign(</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>                    flag, (triplets[tripletIndex] &lt;&lt; 8) + triplets[tripletIndex + 1]</div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>                )</div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>                dy = withSign(</div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>                    flag &gt;&gt; 1,</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>                    (triplets[tripletIndex + 2] &lt;&lt; 8) + triplets[tripletIndex + 3],</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>                )</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>            tripletIndex += nBytes</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>            x += dx</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>            y += dy</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>            glyph.coordinates[i] = (x, y)</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>            glyph.flags.append(int(onCurve))</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>        bytesConsumed = tripletIndex</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>        self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aa0b4012fe5e269131043f4c96caf16ee">glyphStream</a> = self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aa0b4012fe5e269131043f4c96caf16ee">glyphStream</a>[bytesConsumed:]</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span> </div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>    <span class="keyword">def </span>_encodeGlyph(self, glyphID):</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>        glyphName = self.getGlyphName(glyphID)</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>        glyph = self[glyphName]</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>        self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#ad8042b40cafda2fa1f13e34a0df22fa0">nContourStream</a> += struct.pack(<span class="stringliteral">&quot;&gt;h&quot;</span>, glyph.numberOfContours)</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>        <span class="keywordflow">if</span> glyph.numberOfContours == 0:</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>            <span class="keywordflow">return</span></div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>        <span class="keywordflow">elif</span> glyph.isComposite():</div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>            self.<a class="code hl_function" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#adb68e2736c364f57ed23aa97d0944ff5">_encodeComponents</a>(glyph)</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>            self.<a class="code hl_function" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aafcde1bc8db2d5c94a6e4911610dd6b4">_encodeCoordinates</a>(glyph)</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>            self.<a class="code hl_function" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a52daef3dc619578a4d5d7edbf855085c">_encodeOverlapSimpleFlag</a>(glyph, glyphID)</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>        self.<a class="code hl_function" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#ace2f14dd2d156ef18390a78090279fb5">_encodeBBox</a>(glyphID, glyph)</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span> </div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>    <span class="keyword">def </span>_encodeComponents(self, glyph):</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>        lastcomponent = len(glyph.components) - 1</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>        more = 1</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>        haveInstructions = 0</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>        <span class="keywordflow">for</span> i, component <span class="keywordflow">in</span> enumerate(glyph.components):</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>            <span class="keywordflow">if</span> i == lastcomponent:</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>                haveInstructions = hasattr(glyph, <span class="stringliteral">&quot;program&quot;</span>)</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>                more = 0</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>            self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a0f43746262e6f23f95747f0d3b217a39">compositeStream</a> += component.compile(more, haveInstructions, self)</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>        <span class="keywordflow">if</span> haveInstructions:</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>            self.<a class="code hl_function" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a2b8ca6cea2ab1de975fed6866ae1ee05">_encodeInstructions</a>(glyph)</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span> </div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>    <span class="keyword">def </span>_encodeCoordinates(self, glyph):</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>        lastEndPoint = -1</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>        <span class="keywordflow">if</span> _g_l_y_f.flagCubic <span class="keywordflow">in</span> glyph.flags:</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>            <span class="keywordflow">raise</span> NotImplementedError</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>        <span class="keywordflow">for</span> endPoint <span class="keywordflow">in</span> glyph.endPtsOfContours:</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>            ptsOfContour = endPoint - lastEndPoint</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>            self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aee887657cbb0faacffb3e8ecb6d32e58">nPointsStream</a> += <a class="code hl_function" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#addc933d6962fd9e483cfbe0ba6f05269">pack255UShort</a>(ptsOfContour)</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>            lastEndPoint = endPoint</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>        self.<a class="code hl_function" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a5588f3b78040b9bc34689c21f3af5b09">_encodeTriplets</a>(glyph)</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>        self.<a class="code hl_function" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a2b8ca6cea2ab1de975fed6866ae1ee05">_encodeInstructions</a>(glyph)</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span> </div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>    <span class="keyword">def </span>_encodeOverlapSimpleFlag(self, glyph, glyphID):</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>        <span class="keywordflow">if</span> glyph.numberOfContours &lt;= 0:</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>            <span class="keywordflow">return</span></div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>        <span class="keywordflow">if</span> glyph.flags[0] &amp; _g_l_y_f.flagOverlapSimple:</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>            byte = glyphID &gt;&gt; 3</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>            bit = glyphID &amp; 7</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>            self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a2abf35b0f9d0456e4533b7c70a4ca0ba">overlapSimpleBitmap</a>[byte] |= 0x80 &gt;&gt; bit</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span> </div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>    <span class="keyword">def </span>_encodeInstructions(self, glyph):</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>        instructions = glyph.program.getBytecode()</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>        self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aa0b4012fe5e269131043f4c96caf16ee">glyphStream</a> += <a class="code hl_function" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#addc933d6962fd9e483cfbe0ba6f05269">pack255UShort</a>(len(instructions))</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>        self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a168e70f0b8fbd53772e092875bae651f">instructionStream</a> += instructions</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span> </div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>    <span class="keyword">def </span>_encodeBBox(self, glyphID, glyph):</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>        <span class="keyword">assert</span> glyph.numberOfContours != 0, <span class="stringliteral">&quot;empty glyph has no bbox&quot;</span></div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> glyph.isComposite():</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>            <span class="comment"># for simple glyphs, compare the encoded bounding box info with the calculated</span></div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>            <span class="comment"># values, and if they match omit the bounding box info</span></div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>            currentBBox = glyph.xMin, glyph.yMin, glyph.xMax, glyph.yMax</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>            calculatedBBox = calcIntBounds(glyph.coordinates)</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>            <span class="keywordflow">if</span> currentBBox == calculatedBBox:</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>                <span class="keywordflow">return</span></div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>        self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aa3733885e603b37d804ecefbee162f91">bboxBitmap</a>[glyphID &gt;&gt; 3] |= 0x80 &gt;&gt; (glyphID &amp; 7)</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>        self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#ad1e0a0eb613de6beb3ccd30da1788fd4">bboxStream</a> += sstruct.pack(bboxFormat, glyph)</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span> </div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>    <span class="keyword">def </span>_encodeTriplets(self, glyph):</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>        <span class="keyword">assert</span> len(glyph.coordinates) == len(glyph.flags)</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>        coordinates = glyph.coordinates.copy()</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>        coordinates.absoluteToRelative()</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span> </div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>        flags = array.array(<span class="stringliteral">&quot;B&quot;</span>)</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>        triplets = array.array(<span class="stringliteral">&quot;B&quot;</span>)</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>        <span class="keywordflow">for</span> i, (x, y) <span class="keywordflow">in</span> enumerate(coordinates):</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>            onCurve = glyph.flags[i] &amp; _g_l_y_f.flagOnCurve</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>            absX = abs(x)</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>            absY = abs(y)</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>            onCurveBit = 0 <span class="keywordflow">if</span> onCurve <span class="keywordflow">else</span> 128</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>            xSignBit = 0 <span class="keywordflow">if</span> (x &lt; 0) <span class="keywordflow">else</span> 1</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>            ySignBit = 0 <span class="keywordflow">if</span> (y &lt; 0) <span class="keywordflow">else</span> 1</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>            xySignBits = xSignBit + 2 * ySignBit</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span> </div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>            <span class="keywordflow">if</span> x == 0 <span class="keywordflow">and</span> absY &lt; 1280:</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>                flags.append(onCurveBit + ((absY &amp; 0xF00) &gt;&gt; 7) + ySignBit)</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>                triplets.append(absY &amp; 0xFF)</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>            <span class="keywordflow">elif</span> y == 0 <span class="keywordflow">and</span> absX &lt; 1280:</div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>                flags.append(onCurveBit + 10 + ((absX &amp; 0xF00) &gt;&gt; 7) + xSignBit)</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>                triplets.append(absX &amp; 0xFF)</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>            <span class="keywordflow">elif</span> absX &lt; 65 <span class="keywordflow">and</span> absY &lt; 65:</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>                flags.append(</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>                    onCurveBit</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>                    + 20</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>                    + ((absX - 1) &amp; 0x30)</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>                    + (((absY - 1) &amp; 0x30) &gt;&gt; 2)</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>                    + xySignBits</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>                )</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>                triplets.append((((absX - 1) &amp; 0xF) &lt;&lt; 4) | ((absY - 1) &amp; 0xF))</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>            <span class="keywordflow">elif</span> absX &lt; 769 <span class="keywordflow">and</span> absY &lt; 769:</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>                flags.append(</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>                    onCurveBit</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>                    + 84</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>                    + 12 * (((absX - 1) &amp; 0x300) &gt;&gt; 8)</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>                    + (((absY - 1) &amp; 0x300) &gt;&gt; 6)</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>                    + xySignBits</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>                )</div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>                triplets.append((absX - 1) &amp; 0xFF)</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>                triplets.append((absY - 1) &amp; 0xFF)</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>            <span class="keywordflow">elif</span> absX &lt; 4096 <span class="keywordflow">and</span> absY &lt; 4096:</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>                flags.append(onCurveBit + 120 + xySignBits)</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>                triplets.append(absX &gt;&gt; 4)</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>                triplets.append(((absX &amp; 0xF) &lt;&lt; 4) | (absY &gt;&gt; 8))</div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>                triplets.append(absY &amp; 0xFF)</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>                flags.append(onCurveBit + 124 + xySignBits)</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>                triplets.append(absX &gt;&gt; 8)</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>                triplets.append(absX &amp; 0xFF)</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>                triplets.append(absY &gt;&gt; 8)</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>                triplets.append(absY &amp; 0xFF)</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span> </div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>        self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#af2f523cf116994eab914d05c3844ae96">flagStream</a> += flags.tobytes()</div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>        self.<a class="code hl_variable" href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aa0b4012fe5e269131043f4c96caf16ee">glyphStream</a> += triplets.tobytes()</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span> </div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span> </div>
</div>
<div class="foldopen" id="foldopen01129" data-start="" data-end="">
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"><a class="line" href="../../d7/d0b/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2HmtxTable.html"> 1129</a></span><span class="keyword">class </span><a class="code hl_class" href="../../d7/d0b/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2HmtxTable.html">WOFF2HmtxTable</a>(<a class="code hl_class" href="../../de/d85/classgetTableClass.html">getTableClass</a>(<span class="stringliteral">&quot;hmtx&quot;</span>)):</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>    <span class="keyword">def </span>__init__(self, tag=None):</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>        self.<a class="code hl_variable" href="../../d7/d0b/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2HmtxTable.html#a58da22164cfef14ffa6ab506126463a0">tableTag</a> = <a class="code hl_class" href="../../d6/d75/classfontTools_1_1misc_1_1textTools_1_1Tag.html">Tag</a>(tag <span class="keywordflow">or</span> <span class="stringliteral">&quot;hmtx&quot;</span>)</div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span> </div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>    <span class="keyword">def </span>reconstruct(self, data, ttFont):</div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>        (flags,) = struct.unpack(<span class="stringliteral">&quot;&gt;B&quot;</span>, data[:1])</div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>        data = data[1:]</div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>        <span class="keywordflow">if</span> flags &amp; 0b11111100 != 0:</div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;Bits 2-7 of &#39;%s&#39; flags are reserved&quot;</span> % self.<a class="code hl_variable" href="../../d7/d0b/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2HmtxTable.html#a58da22164cfef14ffa6ab506126463a0">tableTag</a>)</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span> </div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>        <span class="comment"># When bit 0 is _not_ set, the lsb[] array is present</span></div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>        hasLsbArray = flags &amp; 1 == 0</div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>        <span class="comment"># When bit 1 is _not_ set, the leftSideBearing[] array is present</span></div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>        hasLeftSideBearingArray = flags &amp; 2 == 0</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>        <span class="keywordflow">if</span> hasLsbArray <span class="keywordflow">and</span> hasLeftSideBearingArray:</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span>                <span class="stringliteral">&quot;either bits 0 or 1 (or both) must set in transformed &#39;%s&#39; flags&quot;</span></div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>                % self.<a class="code hl_variable" href="../../d7/d0b/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2HmtxTable.html#a58da22164cfef14ffa6ab506126463a0">tableTag</a></div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>            )</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span> </div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>        glyfTable = ttFont[<span class="stringliteral">&quot;glyf&quot;</span>]</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>        headerTable = ttFont[<span class="stringliteral">&quot;hhea&quot;</span>]</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>        glyphOrder = glyfTable.glyphOrder</div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>        numGlyphs = len(glyphOrder)</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>        numberOfHMetrics = min(int(headerTable.numberOfHMetrics), numGlyphs)</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span> </div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>        <span class="keyword">assert</span> len(data) &gt;= 2 * numberOfHMetrics</div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>        advanceWidthArray = array.array(<span class="stringliteral">&quot;H&quot;</span>, data[: 2 * numberOfHMetrics])</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>        <span class="keywordflow">if</span> sys.byteorder != <span class="stringliteral">&quot;big&quot;</span>:</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>            advanceWidthArray.byteswap()</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>        data = data[2 * numberOfHMetrics :]</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span> </div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>        <span class="keywordflow">if</span> hasLsbArray:</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>            <span class="keyword">assert</span> len(data) &gt;= 2 * numberOfHMetrics</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>            lsbArray = array.array(<span class="stringliteral">&quot;h&quot;</span>, data[: 2 * numberOfHMetrics])</div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>            <span class="keywordflow">if</span> sys.byteorder != <span class="stringliteral">&quot;big&quot;</span>:</div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>                lsbArray.byteswap()</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>            data = data[2 * numberOfHMetrics :]</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>            <span class="comment"># compute (proportional) glyphs&#39; lsb from their xMin</span></div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span>            lsbArray = array.array(<span class="stringliteral">&quot;h&quot;</span>)</div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>            <span class="keywordflow">for</span> i, glyphName <span class="keywordflow">in</span> enumerate(glyphOrder):</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>                <span class="keywordflow">if</span> i &gt;= numberOfHMetrics:</div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>                    <span class="keywordflow">break</span></div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span>                glyph = glyfTable[glyphName]</div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>                xMin = getattr(glyph, <span class="stringliteral">&quot;xMin&quot;</span>, 0)</div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>                lsbArray.append(xMin)</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span> </div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>        numberOfSideBearings = numGlyphs - numberOfHMetrics</div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>        <span class="keywordflow">if</span> hasLeftSideBearingArray:</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>            <span class="keyword">assert</span> len(data) &gt;= 2 * numberOfSideBearings</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>            leftSideBearingArray = array.array(<span class="stringliteral">&quot;h&quot;</span>, data[: 2 * numberOfSideBearings])</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span>            <span class="keywordflow">if</span> sys.byteorder != <span class="stringliteral">&quot;big&quot;</span>:</div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>                leftSideBearingArray.byteswap()</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>            data = data[2 * numberOfSideBearings :]</div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span>            <span class="comment"># compute (monospaced) glyphs&#39; leftSideBearing from their xMin</span></div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span>            leftSideBearingArray = array.array(<span class="stringliteral">&quot;h&quot;</span>)</div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>            <span class="keywordflow">for</span> i, glyphName <span class="keywordflow">in</span> enumerate(glyphOrder):</div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span>                <span class="keywordflow">if</span> i &lt; numberOfHMetrics:</div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>                    <span class="keywordflow">continue</span></div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span>                glyph = glyfTable[glyphName]</div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>                xMin = getattr(glyph, <span class="stringliteral">&quot;xMin&quot;</span>, 0)</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>                leftSideBearingArray.append(xMin)</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span> </div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span>        <span class="keywordflow">if</span> data:</div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;too much &#39;%s&#39; table data&quot;</span> % self.<a class="code hl_variable" href="../../d7/d0b/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2HmtxTable.html#a58da22164cfef14ffa6ab506126463a0">tableTag</a>)</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span> </div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>        self.<a class="code hl_variable" href="../../d7/d0b/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2HmtxTable.html#aecd2ff8ce3e96444d71eae5f269258e6">metrics</a> = {}</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span>        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(numberOfHMetrics):</div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>            glyphName = glyphOrder[i]</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>            advanceWidth, lsb = advanceWidthArray[i], lsbArray[i]</div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span>            self.<a class="code hl_variable" href="../../d7/d0b/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2HmtxTable.html#aecd2ff8ce3e96444d71eae5f269258e6">metrics</a>[glyphName] = (advanceWidth, lsb)</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span>        lastAdvance = advanceWidthArray[-1]</div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(numberOfSideBearings):</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span>            glyphName = glyphOrder[i + numberOfHMetrics]</div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span>            self.<a class="code hl_variable" href="../../d7/d0b/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2HmtxTable.html#aecd2ff8ce3e96444d71eae5f269258e6">metrics</a>[glyphName] = (lastAdvance, leftSideBearingArray[i])</div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span> </div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>    <span class="keyword">def </span>transform(self, ttFont):</div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span>        glyphOrder = ttFont.getGlyphOrder()</div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span>        glyf = ttFont[<span class="stringliteral">&quot;glyf&quot;</span>]</div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span>        hhea = ttFont[<span class="stringliteral">&quot;hhea&quot;</span>]</div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>        numberOfHMetrics = hhea.numberOfHMetrics</div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span> </div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span>        <span class="comment"># check if any of the proportional glyphs has left sidebearings that</span></div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span>        <span class="comment"># differ from their xMin bounding box values.</span></div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span>        hasLsbArray = <span class="keyword">False</span></div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span>        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(numberOfHMetrics):</div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>            glyphName = glyphOrder[i]</div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span>            lsb = self.<a class="code hl_variable" href="../../d7/d0b/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2HmtxTable.html#aecd2ff8ce3e96444d71eae5f269258e6">metrics</a>[glyphName][1]</div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span>            <span class="keywordflow">if</span> lsb != getattr(glyf[glyphName], <span class="stringliteral">&quot;xMin&quot;</span>, 0):</div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span>                hasLsbArray = <span class="keyword">True</span></div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>                <span class="keywordflow">break</span></div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span> </div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span>        <span class="comment"># do the same for the monospaced glyphs (if any) at the end of hmtx table</span></div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span>        hasLeftSideBearingArray = <span class="keyword">False</span></div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(numberOfHMetrics, len(glyphOrder)):</div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>            glyphName = glyphOrder[i]</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>            lsb = self.<a class="code hl_variable" href="../../d7/d0b/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2HmtxTable.html#aecd2ff8ce3e96444d71eae5f269258e6">metrics</a>[glyphName][1]</div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>            <span class="keywordflow">if</span> lsb != getattr(glyf[glyphName], <span class="stringliteral">&quot;xMin&quot;</span>, 0):</div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span>                hasLeftSideBearingArray = <span class="keyword">True</span></div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>                <span class="keywordflow">break</span></div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span> </div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>        <span class="comment"># if we need to encode both sidebearings arrays, then no transformation is</span></div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>        <span class="comment"># applicable, and we must use the untransformed hmtx data</span></div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>        <span class="keywordflow">if</span> hasLsbArray <span class="keywordflow">and</span> hasLeftSideBearingArray:</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>            <span class="keywordflow">return</span></div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span> </div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>        <span class="comment"># set bit 0 and 1 when the respective arrays are _not_ present</span></div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>        flags = 0</div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasLsbArray:</div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>            flags |= 1 &lt;&lt; 0</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasLeftSideBearingArray:</div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span>            flags |= 1 &lt;&lt; 1</div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span> </div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>        data = struct.pack(<span class="stringliteral">&quot;&gt;B&quot;</span>, flags)</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span> </div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>        advanceWidthArray = array.array(</div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>            <span class="stringliteral">&quot;H&quot;</span>,</div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>            [</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>                self.<a class="code hl_variable" href="../../d7/d0b/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2HmtxTable.html#aecd2ff8ce3e96444d71eae5f269258e6">metrics</a>[glyphName][0]</div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>                <span class="keywordflow">for</span> i, glyphName <span class="keywordflow">in</span> enumerate(glyphOrder)</div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>                <span class="keywordflow">if</span> i &lt; numberOfHMetrics</div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span>            ],</div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span>        )</div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span>        <span class="keywordflow">if</span> sys.byteorder != <span class="stringliteral">&quot;big&quot;</span>:</div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span>            advanceWidthArray.byteswap()</div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>        data += advanceWidthArray.tobytes()</div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span> </div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span>        <span class="keywordflow">if</span> hasLsbArray:</div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>            lsbArray = array.array(</div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>                <span class="stringliteral">&quot;h&quot;</span>,</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>                [</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span>                    self.<a class="code hl_variable" href="../../d7/d0b/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2HmtxTable.html#aecd2ff8ce3e96444d71eae5f269258e6">metrics</a>[glyphName][1]</div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>                    <span class="keywordflow">for</span> i, glyphName <span class="keywordflow">in</span> enumerate(glyphOrder)</div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>                    <span class="keywordflow">if</span> i &lt; numberOfHMetrics</div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>                ],</div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>            )</div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span>            <span class="keywordflow">if</span> sys.byteorder != <span class="stringliteral">&quot;big&quot;</span>:</div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>                lsbArray.byteswap()</div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span>            data += lsbArray.tobytes()</div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span> </div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span>        <span class="keywordflow">if</span> hasLeftSideBearingArray:</div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>            leftSideBearingArray = array.array(</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>                <span class="stringliteral">&quot;h&quot;</span>,</div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span>                [</div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>                    self.<a class="code hl_variable" href="../../d7/d0b/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2HmtxTable.html#aecd2ff8ce3e96444d71eae5f269258e6">metrics</a>[glyphOrder[i]][1]</div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>                    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(numberOfHMetrics, len(glyphOrder))</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>                ],</div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>            )</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>            <span class="keywordflow">if</span> sys.byteorder != <span class="stringliteral">&quot;big&quot;</span>:</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>                leftSideBearingArray.byteswap()</div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>            data += leftSideBearingArray.tobytes()</div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span> </div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>        <span class="keywordflow">return</span> data</div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span> </div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span> </div>
</div>
<div class="foldopen" id="foldopen01286" data-start="" data-end="">
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"><a class="line" href="../../d2/d45/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2FlavorData.html"> 1286</a></span><span class="keyword">class </span><a class="code hl_class" href="../../d2/d45/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2FlavorData.html">WOFF2FlavorData</a>(<a class="code hl_class" href="../../db/d63/classWOFFFlavorData.html">WOFFFlavorData</a>):</div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>    Flavor = <span class="stringliteral">&quot;woff2&quot;</span></div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span> </div>
<div class="foldopen" id="foldopen01289" data-start="" data-end="">
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"><a class="line" href="../../d2/d45/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2FlavorData.html#a3e44f4f997db1d8c0f20843674017103"> 1289</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d2/d45/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2FlavorData.html#a3e44f4f997db1d8c0f20843674017103">__init__</a>(self, reader=None, data=None, transformedTables=None):</div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>        <span class="stringliteral">&quot;&quot;&quot;Data class that holds the WOFF2 header major/minor version, any</span></div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span><span class="stringliteral">        metadata or private data (as bytes strings), and the set of</span></div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span><span class="stringliteral">        table tags that have transformations applied (if reader is not None),</span></div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span><span class="stringliteral">        or will have once the WOFF2 font is compiled.</span></div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span><span class="stringliteral">        Args:</span></div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span><span class="stringliteral">                reader: an SFNTReader (or subclass) object to read flavor data from.</span></div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span><span class="stringliteral">                data: another WOFFFlavorData object to initialise data from.</span></div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span><span class="stringliteral">                transformedTables: set of strings containing table tags to be transformed.</span></div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span><span class="stringliteral">        Raises:</span></div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span><span class="stringliteral">                ImportError if the brotli module is not installed.</span></div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span><span class="stringliteral">        NOTE: The &#39;reader&#39; argument, on the one hand, and the &#39;data&#39; and</span></div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span><span class="stringliteral">        &#39;transformedTables&#39; arguments, on the other hand, are mutually exclusive.</span></div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> haveBrotli:</div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d8/d14/classImportError.html">ImportError</a>(<span class="stringliteral">&quot;No module named brotli&quot;</span>)</div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span> </div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span>        <span class="keywordflow">if</span> reader <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span>            <span class="keywordflow">if</span> data <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>                <span class="keywordflow">raise</span> <a class="code hl_class" href="../../dd/d00/classTypeError.html">TypeError</a>(<span class="stringliteral">&quot;&#39;reader&#39; and &#39;data&#39; arguments are mutually exclusive&quot;</span>)</div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>            <span class="keywordflow">if</span> transformedTables <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>                <span class="keywordflow">raise</span> <a class="code hl_class" href="../../dd/d00/classTypeError.html">TypeError</a>(</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span>                    <span class="stringliteral">&quot;&#39;reader&#39; and &#39;transformedTables&#39; arguments are mutually exclusive&quot;</span></div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span>                )</div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span> </div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span>        <span class="keywordflow">if</span> transformedTables <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> (</div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span>            <span class="stringliteral">&quot;glyf&quot;</span> <span class="keywordflow">in</span> transformedTables</div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span>            <span class="keywordflow">and</span> <span class="stringliteral">&quot;loca&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> transformedTables</div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span>            <span class="keywordflow">or</span> <span class="stringliteral">&quot;loca&quot;</span> <span class="keywordflow">in</span> transformedTables</div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span>            <span class="keywordflow">and</span> <span class="stringliteral">&quot;glyf&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> transformedTables</div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span>        ):</div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../de/d40/classValueError.html">ValueError</a>(<span class="stringliteral">&quot;&#39;glyf&#39; and &#39;loca&#39; must be transformed (or not) together&quot;</span>)</div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>        super(WOFF2FlavorData, self).<a class="code hl_function" href="../../d2/d45/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2FlavorData.html#a3e44f4f997db1d8c0f20843674017103">__init__</a>(reader=reader)</div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>        <span class="keywordflow">if</span> reader:</div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span>            transformedTables = [</div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>                tag <span class="keywordflow">for</span> tag, entry <span class="keywordflow">in</span> reader.tables.items() <span class="keywordflow">if</span> entry.transformed</div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span>            ]</div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>        <span class="keywordflow">elif</span> data:</div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>            self.<a class="code hl_variable" href="../../d2/d45/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2FlavorData.html#a7f0343a52332b2bfc66d64c0c355b8df">majorVersion</a> = data.majorVersion</div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span>            self.<a class="code hl_variable" href="../../d2/d45/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2FlavorData.html#a7f0343a52332b2bfc66d64c0c355b8df">majorVersion</a> = data.minorVersion</div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>            self.<a class="code hl_variable" href="../../d2/d45/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2FlavorData.html#a0d092e6871851521f726fd631b015f3c">metaData</a> = data.metaData</div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>            self.<a class="code hl_variable" href="../../d2/d45/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2FlavorData.html#ab631f9a54e2a3c597705d44b20024471">privData</a> = data.privData</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span>            <span class="keywordflow">if</span> transformedTables <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> hasattr(data, <span class="stringliteral">&quot;transformedTables&quot;</span>):</div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>                transformedTables = data.transformedTables</div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span> </div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>        <span class="keywordflow">if</span> transformedTables <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>            transformedTables = woff2TransformedTableTags</div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span> </div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span>        self.<a class="code hl_variable" href="../../d2/d45/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2FlavorData.html#ab4ed8d01429306fb0640ba633f7d629e">transformedTables</a> = set(transformedTables)</div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span> </div>
</div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>    <span class="keyword">def </span>_decompress(self, rawData):</div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>        <span class="keywordflow">return</span> brotli.decompress(rawData)</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span> </div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span> </div>
</div>
<div class="foldopen" id="foldopen01346" data-start="" data-end="">
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"><a class="line" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#a6d671b0bb652cde6bd8bd0cac3ae8da4"> 1346</a></span><span class="keyword">def </span><a class="code hl_function" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#a6d671b0bb652cde6bd8bd0cac3ae8da4">unpackBase128</a>(data):</div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span>    <span class="stringliteral">r&quot;&quot;&quot;Read one to five bytes from UIntBase128-encoded input string, and return</span></div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span><span class="stringliteral">    a tuple containing the decoded integer plus any leftover data.</span></div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span><span class="stringliteral">    &gt;&gt;&gt; unpackBase128(b&#39;\x3f\x00\x00&#39;) == (63, b&quot;\x00\x00&quot;)</span></div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span><span class="stringliteral">    True</span></div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span><span class="stringliteral">    &gt;&gt;&gt; unpackBase128(b&#39;\x8f\xff\xff\xff\x7f&#39;)[0] == 4294967295</span></div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span><span class="stringliteral">    True</span></div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span><span class="stringliteral">    &gt;&gt;&gt; unpackBase128(b&#39;\x80\x80\x3f&#39;)  # doctest: +IGNORE_EXCEPTION_DETAIL</span></div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span><span class="stringliteral">    Traceback (most recent call last):</span></div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span><span class="stringliteral">      File &quot;&lt;stdin&gt;&quot;, line 1, in ?</span></div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span><span class="stringliteral">    TTLibError: UIntBase128 value must not start with leading zeros</span></div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span><span class="stringliteral">    &gt;&gt;&gt; unpackBase128(b&#39;\x8f\xff\xff\xff\xff\x7f&#39;)[0]  # doctest: +IGNORE_EXCEPTION_DETAIL</span></div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span><span class="stringliteral">    Traceback (most recent call last):</span></div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span><span class="stringliteral">      File &quot;&lt;stdin&gt;&quot;, line 1, in ?</span></div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span><span class="stringliteral">    TTLibError: UIntBase128-encoded sequence is longer than 5 bytes</span></div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span><span class="stringliteral">    &gt;&gt;&gt; unpackBase128(b&#39;\x90\x80\x80\x80\x00&#39;)[0]  # doctest: +IGNORE_EXCEPTION_DETAIL</span></div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span><span class="stringliteral">    Traceback (most recent call last):</span></div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span><span class="stringliteral">      File &quot;&lt;stdin&gt;&quot;, line 1, in ?</span></div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span><span class="stringliteral">    TTLibError: UIntBase128 value exceeds 2**32-1</span></div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>    <span class="keywordflow">if</span> len(data) == 0:</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span>        <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;not enough data to unpack UIntBase128&quot;</span>)</div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>    result = 0</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span>    <span class="keywordflow">if</span> byteord(data[0]) == 0x80:</div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span>        <span class="comment"># font must be rejected if UIntBase128 value starts with 0x80</span></div>
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"> 1372</span>        <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;UIntBase128 value must not start with leading zeros&quot;</span>)</div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span>    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(woff2Base128MaxSize):</div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span>        <span class="keywordflow">if</span> len(data) == 0:</div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;not enough data to unpack UIntBase128&quot;</span>)</div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span>        code = byteord(data[0])</div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span>        data = data[1:]</div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span>        <span class="comment"># if any of the top seven bits are set then we&#39;re about to overflow</span></div>
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span>        <span class="keywordflow">if</span> result &amp; 0xFE000000:</div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;UIntBase128 value exceeds 2**32-1&quot;</span>)</div>
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"> 1381</span>        <span class="comment"># set current value = old value times 128 bitwise-or (byte bitwise-and 127)</span></div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"> 1382</span>        result = (result &lt;&lt; 7) | (code &amp; 0x7F)</div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span>        <span class="comment"># repeat until the most significant bit of byte is false</span></div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span>        <span class="keywordflow">if</span> (code &amp; 0x80) == 0:</div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span>            <span class="comment"># return result plus left over data</span></div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"> 1386</span>            <span class="keywordflow">return</span> result, data</div>
<div class="line"><a id="l01387" name="l01387"></a><span class="lineno"> 1387</span>    <span class="comment"># make sure not to exceed the size bound</span></div>
<div class="line"><a id="l01388" name="l01388"></a><span class="lineno"> 1388</span>    <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;UIntBase128-encoded sequence is longer than 5 bytes&quot;</span>)</div>
<div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span> </div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span> </div>
</div>
<div class="foldopen" id="foldopen01391" data-start="" data-end="">
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"><a class="line" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#ac23118fbdfbb5926ce7b994871779c8f"> 1391</a></span><span class="keyword">def </span><a class="code hl_function" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#ac23118fbdfbb5926ce7b994871779c8f">base128Size</a>(n):</div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span>    <span class="stringliteral">&quot;&quot;&quot;Return the length in bytes of a UIntBase128-encoded sequence with value n.</span></div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span><span class="stringliteral">    &gt;&gt;&gt; base128Size(0)</span></div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span><span class="stringliteral">    1</span></div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span><span class="stringliteral">    &gt;&gt;&gt; base128Size(24567)</span></div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span><span class="stringliteral">    3</span></div>
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span><span class="stringliteral">    &gt;&gt;&gt; base128Size(2**32-1)</span></div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span><span class="stringliteral">    5</span></div>
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"> 1400</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"> 1401</span>    <span class="keyword">assert</span> n &gt;= 0</div>
<div class="line"><a id="l01402" name="l01402"></a><span class="lineno"> 1402</span>    size = 1</div>
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"> 1403</span>    <span class="keywordflow">while</span> n &gt;= 128:</div>
<div class="line"><a id="l01404" name="l01404"></a><span class="lineno"> 1404</span>        size += 1</div>
<div class="line"><a id="l01405" name="l01405"></a><span class="lineno"> 1405</span>        n &gt;&gt;= 7</div>
<div class="line"><a id="l01406" name="l01406"></a><span class="lineno"> 1406</span>    <span class="keywordflow">return</span> size</div>
<div class="line"><a id="l01407" name="l01407"></a><span class="lineno"> 1407</span> </div>
<div class="line"><a id="l01408" name="l01408"></a><span class="lineno"> 1408</span> </div>
</div>
<div class="foldopen" id="foldopen01409" data-start="" data-end="">
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"><a class="line" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#a8e695eafebd8649b313cafffd00d47fb"> 1409</a></span><span class="keyword">def </span><a class="code hl_function" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#a8e695eafebd8649b313cafffd00d47fb">packBase128</a>(n):</div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"> 1410</span>    <span class="stringliteral">r&quot;&quot;&quot;Encode unsigned integer in range 0 to 2**32-1 (inclusive) to a string of</span></div>
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"> 1411</span><span class="stringliteral">    bytes using UIntBase128 variable-length encoding. Produce the shortest possible</span></div>
<div class="line"><a id="l01412" name="l01412"></a><span class="lineno"> 1412</span><span class="stringliteral">    encoding.</span></div>
<div class="line"><a id="l01413" name="l01413"></a><span class="lineno"> 1413</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l01414" name="l01414"></a><span class="lineno"> 1414</span><span class="stringliteral">    &gt;&gt;&gt; packBase128(63) == b&quot;\x3f&quot;</span></div>
<div class="line"><a id="l01415" name="l01415"></a><span class="lineno"> 1415</span><span class="stringliteral">    True</span></div>
<div class="line"><a id="l01416" name="l01416"></a><span class="lineno"> 1416</span><span class="stringliteral">    &gt;&gt;&gt; packBase128(2**32-1) == b&#39;\x8f\xff\xff\xff\x7f&#39;</span></div>
<div class="line"><a id="l01417" name="l01417"></a><span class="lineno"> 1417</span><span class="stringliteral">    True</span></div>
<div class="line"><a id="l01418" name="l01418"></a><span class="lineno"> 1418</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a id="l01419" name="l01419"></a><span class="lineno"> 1419</span>    <span class="keywordflow">if</span> n &lt; 0 <span class="keywordflow">or</span> n &gt;= 2**32:</div>
<div class="line"><a id="l01420" name="l01420"></a><span class="lineno"> 1420</span>        <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;UIntBase128 format requires 0 &lt;= integer &lt;= 2**32-1&quot;</span>)</div>
<div class="line"><a id="l01421" name="l01421"></a><span class="lineno"> 1421</span>    data = b<span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><a id="l01422" name="l01422"></a><span class="lineno"> 1422</span>    size = <a class="code hl_function" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#ac23118fbdfbb5926ce7b994871779c8f">base128Size</a>(n)</div>
<div class="line"><a id="l01423" name="l01423"></a><span class="lineno"> 1423</span>    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(size):</div>
<div class="line"><a id="l01424" name="l01424"></a><span class="lineno"> 1424</span>        b = (n &gt;&gt; (7 * (size - i - 1))) &amp; 0x7F</div>
<div class="line"><a id="l01425" name="l01425"></a><span class="lineno"> 1425</span>        <span class="keywordflow">if</span> i &lt; size - 1:</div>
<div class="line"><a id="l01426" name="l01426"></a><span class="lineno"> 1426</span>            b |= 0x80</div>
<div class="line"><a id="l01427" name="l01427"></a><span class="lineno"> 1427</span>        data += struct.pack(<span class="stringliteral">&quot;B&quot;</span>, b)</div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span>    <span class="keywordflow">return</span> data</div>
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"> 1429</span> </div>
<div class="line"><a id="l01430" name="l01430"></a><span class="lineno"> 1430</span> </div>
</div>
<div class="foldopen" id="foldopen01431" data-start="" data-end="">
<div class="line"><a id="l01431" name="l01431"></a><span class="lineno"><a class="line" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#a4e521aa126269c9b982b6f68bdef8f9d"> 1431</a></span><span class="keyword">def </span><a class="code hl_function" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#a4e521aa126269c9b982b6f68bdef8f9d">unpack255UShort</a>(data):</div>
<div class="line"><a id="l01432" name="l01432"></a><span class="lineno"> 1432</span>    <span class="stringliteral">&quot;&quot;&quot;Read one to three bytes from 255UInt16-encoded input string, and return a</span></div>
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"> 1433</span><span class="stringliteral">    tuple containing the decoded integer plus any leftover data.</span></div>
<div class="line"><a id="l01434" name="l01434"></a><span class="lineno"> 1434</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l01435" name="l01435"></a><span class="lineno"> 1435</span><span class="stringliteral">    &gt;&gt;&gt; unpack255UShort(bytechr(252))[0]</span></div>
<div class="line"><a id="l01436" name="l01436"></a><span class="lineno"> 1436</span><span class="stringliteral">    252</span></div>
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"> 1437</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l01438" name="l01438"></a><span class="lineno"> 1438</span><span class="stringliteral">    Note that some numbers (e.g. 506) can have multiple encodings:</span></div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span><span class="stringliteral">    &gt;&gt;&gt; unpack255UShort(struct.pack(&quot;BB&quot;, 254, 0))[0]</span></div>
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"> 1440</span><span class="stringliteral">    506</span></div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"> 1441</span><span class="stringliteral">    &gt;&gt;&gt; unpack255UShort(struct.pack(&quot;BB&quot;, 255, 253))[0]</span></div>
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"> 1442</span><span class="stringliteral">    506</span></div>
<div class="line"><a id="l01443" name="l01443"></a><span class="lineno"> 1443</span><span class="stringliteral">    &gt;&gt;&gt; unpack255UShort(struct.pack(&quot;BBB&quot;, 253, 1, 250))[0]</span></div>
<div class="line"><a id="l01444" name="l01444"></a><span class="lineno"> 1444</span><span class="stringliteral">    506</span></div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span>    code = byteord(data[:1])</div>
<div class="line"><a id="l01447" name="l01447"></a><span class="lineno"> 1447</span>    data = data[1:]</div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"> 1448</span>    <span class="keywordflow">if</span> code == 253:</div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span>        <span class="comment"># read two more bytes as an unsigned short</span></div>
<div class="line"><a id="l01450" name="l01450"></a><span class="lineno"> 1450</span>        <span class="keywordflow">if</span> len(data) &lt; 2:</div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"> 1451</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;not enough data to unpack 255UInt16&quot;</span>)</div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"> 1452</span>        (result,) = struct.unpack(<span class="stringliteral">&quot;&gt;H&quot;</span>, data[:2])</div>
<div class="line"><a id="l01453" name="l01453"></a><span class="lineno"> 1453</span>        data = data[2:]</div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span>    <span class="keywordflow">elif</span> code == 254:</div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"> 1455</span>        <span class="comment"># read another byte, plus 253 * 2</span></div>
<div class="line"><a id="l01456" name="l01456"></a><span class="lineno"> 1456</span>        <span class="keywordflow">if</span> len(data) == 0:</div>
<div class="line"><a id="l01457" name="l01457"></a><span class="lineno"> 1457</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;not enough data to unpack 255UInt16&quot;</span>)</div>
<div class="line"><a id="l01458" name="l01458"></a><span class="lineno"> 1458</span>        result = byteord(data[:1])</div>
<div class="line"><a id="l01459" name="l01459"></a><span class="lineno"> 1459</span>        result += 506</div>
<div class="line"><a id="l01460" name="l01460"></a><span class="lineno"> 1460</span>        data = data[1:]</div>
<div class="line"><a id="l01461" name="l01461"></a><span class="lineno"> 1461</span>    <span class="keywordflow">elif</span> code == 255:</div>
<div class="line"><a id="l01462" name="l01462"></a><span class="lineno"> 1462</span>        <span class="comment"># read another byte, plus 253</span></div>
<div class="line"><a id="l01463" name="l01463"></a><span class="lineno"> 1463</span>        <span class="keywordflow">if</span> len(data) == 0:</div>
<div class="line"><a id="l01464" name="l01464"></a><span class="lineno"> 1464</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;not enough data to unpack 255UInt16&quot;</span>)</div>
<div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span>        result = byteord(data[:1])</div>
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"> 1466</span>        result += 253</div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span>        data = data[1:]</div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"> 1469</span>        <span class="comment"># leave as is if lower than 253</span></div>
<div class="line"><a id="l01470" name="l01470"></a><span class="lineno"> 1470</span>        result = code</div>
<div class="line"><a id="l01471" name="l01471"></a><span class="lineno"> 1471</span>    <span class="comment"># return result plus left over data</span></div>
<div class="line"><a id="l01472" name="l01472"></a><span class="lineno"> 1472</span>    <span class="keywordflow">return</span> result, data</div>
<div class="line"><a id="l01473" name="l01473"></a><span class="lineno"> 1473</span> </div>
<div class="line"><a id="l01474" name="l01474"></a><span class="lineno"> 1474</span> </div>
</div>
<div class="foldopen" id="foldopen01475" data-start="" data-end="">
<div class="line"><a id="l01475" name="l01475"></a><span class="lineno"><a class="line" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#addc933d6962fd9e483cfbe0ba6f05269"> 1475</a></span><span class="keyword">def </span><a class="code hl_function" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#addc933d6962fd9e483cfbe0ba6f05269">pack255UShort</a>(value):</div>
<div class="line"><a id="l01476" name="l01476"></a><span class="lineno"> 1476</span>    <span class="stringliteral">r&quot;&quot;&quot;Encode unsigned integer in range 0 to 65535 (inclusive) to a bytestring</span></div>
<div class="line"><a id="l01477" name="l01477"></a><span class="lineno"> 1477</span><span class="stringliteral">    using 255UInt16 variable-length encoding.</span></div>
<div class="line"><a id="l01478" name="l01478"></a><span class="lineno"> 1478</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l01479" name="l01479"></a><span class="lineno"> 1479</span><span class="stringliteral">    &gt;&gt;&gt; pack255UShort(252) == b&#39;\xfc&#39;</span></div>
<div class="line"><a id="l01480" name="l01480"></a><span class="lineno"> 1480</span><span class="stringliteral">    True</span></div>
<div class="line"><a id="l01481" name="l01481"></a><span class="lineno"> 1481</span><span class="stringliteral">    &gt;&gt;&gt; pack255UShort(506) == b&#39;\xfe\x00&#39;</span></div>
<div class="line"><a id="l01482" name="l01482"></a><span class="lineno"> 1482</span><span class="stringliteral">    True</span></div>
<div class="line"><a id="l01483" name="l01483"></a><span class="lineno"> 1483</span><span class="stringliteral">    &gt;&gt;&gt; pack255UShort(762) == b&#39;\xfd\x02\xfa&#39;</span></div>
<div class="line"><a id="l01484" name="l01484"></a><span class="lineno"> 1484</span><span class="stringliteral">    True</span></div>
<div class="line"><a id="l01485" name="l01485"></a><span class="lineno"> 1485</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a id="l01486" name="l01486"></a><span class="lineno"> 1486</span>    <span class="keywordflow">if</span> value &lt; 0 <span class="keywordflow">or</span> value &gt; 0xFFFF:</div>
<div class="line"><a id="l01487" name="l01487"></a><span class="lineno"> 1487</span>        <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">TTLibError</a>(<span class="stringliteral">&quot;255UInt16 format requires 0 &lt;= integer &lt;= 65535&quot;</span>)</div>
<div class="line"><a id="l01488" name="l01488"></a><span class="lineno"> 1488</span>    <span class="keywordflow">if</span> value &lt; 253:</div>
<div class="line"><a id="l01489" name="l01489"></a><span class="lineno"> 1489</span>        <span class="keywordflow">return</span> struct.pack(<span class="stringliteral">&quot;&gt;B&quot;</span>, value)</div>
<div class="line"><a id="l01490" name="l01490"></a><span class="lineno"> 1490</span>    <span class="keywordflow">elif</span> value &lt; 506:</div>
<div class="line"><a id="l01491" name="l01491"></a><span class="lineno"> 1491</span>        <span class="keywordflow">return</span> struct.pack(<span class="stringliteral">&quot;&gt;BB&quot;</span>, 255, value - 253)</div>
<div class="line"><a id="l01492" name="l01492"></a><span class="lineno"> 1492</span>    <span class="keywordflow">elif</span> value &lt; 762:</div>
<div class="line"><a id="l01493" name="l01493"></a><span class="lineno"> 1493</span>        <span class="keywordflow">return</span> struct.pack(<span class="stringliteral">&quot;&gt;BB&quot;</span>, 254, value - 506)</div>
<div class="line"><a id="l01494" name="l01494"></a><span class="lineno"> 1494</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l01495" name="l01495"></a><span class="lineno"> 1495</span>        <span class="keywordflow">return</span> struct.pack(<span class="stringliteral">&quot;&gt;BH&quot;</span>, 253, value)</div>
<div class="line"><a id="l01496" name="l01496"></a><span class="lineno"> 1496</span> </div>
<div class="line"><a id="l01497" name="l01497"></a><span class="lineno"> 1497</span> </div>
</div>
<div class="foldopen" id="foldopen01498" data-start="" data-end="">
<div class="line"><a id="l01498" name="l01498"></a><span class="lineno"><a class="line" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#a584559d45cdf91accedf0f5863fb75dd"> 1498</a></span><span class="keyword">def </span><a class="code hl_function" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#a584559d45cdf91accedf0f5863fb75dd">compress</a>(input_file, output_file, transform_tables=None):</div>
<div class="line"><a id="l01499" name="l01499"></a><span class="lineno"> 1499</span>    <span class="stringliteral">&quot;&quot;&quot;Compress OpenType font to WOFF2.</span></div>
<div class="line"><a id="l01500" name="l01500"></a><span class="lineno"> 1500</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l01501" name="l01501"></a><span class="lineno"> 1501</span><span class="stringliteral">    Args:</span></div>
<div class="line"><a id="l01502" name="l01502"></a><span class="lineno"> 1502</span><span class="stringliteral">            input_file: a file path, file or file-like object (open in binary mode)</span></div>
<div class="line"><a id="l01503" name="l01503"></a><span class="lineno"> 1503</span><span class="stringliteral">                    containing an OpenType font (either CFF- or TrueType-flavored).</span></div>
<div class="line"><a id="l01504" name="l01504"></a><span class="lineno"> 1504</span><span class="stringliteral">            output_file: a file path, file or file-like object where to save the</span></div>
<div class="line"><a id="l01505" name="l01505"></a><span class="lineno"> 1505</span><span class="stringliteral">                    compressed WOFF2 font.</span></div>
<div class="line"><a id="l01506" name="l01506"></a><span class="lineno"> 1506</span><span class="stringliteral">            transform_tables: Optional[Iterable[str]]: a set of table tags for which</span></div>
<div class="line"><a id="l01507" name="l01507"></a><span class="lineno"> 1507</span><span class="stringliteral">                    to enable preprocessing transformations. By default, only &#39;glyf&#39;</span></div>
<div class="line"><a id="l01508" name="l01508"></a><span class="lineno"> 1508</span><span class="stringliteral">                    and &#39;loca&#39; tables are transformed. An empty set means disable all</span></div>
<div class="line"><a id="l01509" name="l01509"></a><span class="lineno"> 1509</span><span class="stringliteral">                    transformations.</span></div>
<div class="line"><a id="l01510" name="l01510"></a><span class="lineno"> 1510</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a id="l01511" name="l01511"></a><span class="lineno"> 1511</span>    log.info(<span class="stringliteral">&quot;Processing %s =&gt; %s&quot;</span> % (input_file, output_file))</div>
<div class="line"><a id="l01512" name="l01512"></a><span class="lineno"> 1512</span> </div>
<div class="line"><a id="l01513" name="l01513"></a><span class="lineno"> 1513</span>    font = <a class="code hl_class" href="../../d8/d0d/classfontTools_1_1ttLib_1_1ttFont_1_1TTFont.html">TTFont</a>(input_file, recalcBBoxes=<span class="keyword">False</span>, recalcTimestamp=<span class="keyword">False</span>)</div>
<div class="line"><a id="l01514" name="l01514"></a><span class="lineno"> 1514</span>    font.flavor = <span class="stringliteral">&quot;woff2&quot;</span></div>
<div class="line"><a id="l01515" name="l01515"></a><span class="lineno"> 1515</span> </div>
<div class="line"><a id="l01516" name="l01516"></a><span class="lineno"> 1516</span>    <span class="keywordflow">if</span> transform_tables <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a id="l01517" name="l01517"></a><span class="lineno"> 1517</span>        font.flavorData = <a class="code hl_class" href="../../d2/d45/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2FlavorData.html">WOFF2FlavorData</a>(</div>
<div class="line"><a id="l01518" name="l01518"></a><span class="lineno"> 1518</span>            data=font.flavorData, transformedTables=transform_tables</div>
<div class="line"><a id="l01519" name="l01519"></a><span class="lineno"> 1519</span>        )</div>
<div class="line"><a id="l01520" name="l01520"></a><span class="lineno"> 1520</span> </div>
<div class="line"><a id="l01521" name="l01521"></a><span class="lineno"> 1521</span>    font.save(output_file, reorderTables=<span class="keyword">False</span>)</div>
<div class="line"><a id="l01522" name="l01522"></a><span class="lineno"> 1522</span> </div>
<div class="line"><a id="l01523" name="l01523"></a><span class="lineno"> 1523</span> </div>
</div>
<div class="foldopen" id="foldopen01524" data-start="" data-end="">
<div class="line"><a id="l01524" name="l01524"></a><span class="lineno"><a class="line" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#ad8d4bd812e843bba21f2a3aee7f3352b"> 1524</a></span><span class="keyword">def </span><a class="code hl_function" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#ad8d4bd812e843bba21f2a3aee7f3352b">decompress</a>(input_file, output_file):</div>
<div class="line"><a id="l01525" name="l01525"></a><span class="lineno"> 1525</span>    <span class="stringliteral">&quot;&quot;&quot;Decompress WOFF2 font to OpenType font.</span></div>
<div class="line"><a id="l01526" name="l01526"></a><span class="lineno"> 1526</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l01527" name="l01527"></a><span class="lineno"> 1527</span><span class="stringliteral">    Args:</span></div>
<div class="line"><a id="l01528" name="l01528"></a><span class="lineno"> 1528</span><span class="stringliteral">            input_file: a file path, file or file-like object (open in binary mode)</span></div>
<div class="line"><a id="l01529" name="l01529"></a><span class="lineno"> 1529</span><span class="stringliteral">                    containing a compressed WOFF2 font.</span></div>
<div class="line"><a id="l01530" name="l01530"></a><span class="lineno"> 1530</span><span class="stringliteral">            output_file: a file path, file or file-like object where to save the</span></div>
<div class="line"><a id="l01531" name="l01531"></a><span class="lineno"> 1531</span><span class="stringliteral">                    decompressed OpenType font.</span></div>
<div class="line"><a id="l01532" name="l01532"></a><span class="lineno"> 1532</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a id="l01533" name="l01533"></a><span class="lineno"> 1533</span>    log.info(<span class="stringliteral">&quot;Processing %s =&gt; %s&quot;</span> % (input_file, output_file))</div>
<div class="line"><a id="l01534" name="l01534"></a><span class="lineno"> 1534</span> </div>
<div class="line"><a id="l01535" name="l01535"></a><span class="lineno"> 1535</span>    font = <a class="code hl_class" href="../../d8/d0d/classfontTools_1_1ttLib_1_1ttFont_1_1TTFont.html">TTFont</a>(input_file, recalcBBoxes=<span class="keyword">False</span>, recalcTimestamp=<span class="keyword">False</span>)</div>
<div class="line"><a id="l01536" name="l01536"></a><span class="lineno"> 1536</span>    font.flavor = <span class="keywordtype">None</span></div>
<div class="line"><a id="l01537" name="l01537"></a><span class="lineno"> 1537</span>    font.flavorData = <span class="keywordtype">None</span></div>
<div class="line"><a id="l01538" name="l01538"></a><span class="lineno"> 1538</span>    font.save(output_file, reorderTables=<span class="keyword">True</span>)</div>
<div class="line"><a id="l01539" name="l01539"></a><span class="lineno"> 1539</span> </div>
<div class="line"><a id="l01540" name="l01540"></a><span class="lineno"> 1540</span> </div>
</div>
<div class="foldopen" id="foldopen01541" data-start="" data-end="">
<div class="line"><a id="l01541" name="l01541"></a><span class="lineno"><a class="line" href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#ab5351bde10f9b7b01eef333b0f0e63cb"> 1541</a></span><span class="keyword">def </span><a class="code hl_namespace" href="../../d2/dc1/namespacemain.html">main</a>(args=None):</div>
<div class="line"><a id="l01542" name="l01542"></a><span class="lineno"> 1542</span>    <span class="stringliteral">&quot;&quot;&quot;Compress and decompress WOFF2 fonts&quot;&quot;&quot;</span></div>
<div class="line"><a id="l01543" name="l01543"></a><span class="lineno"> 1543</span>    <span class="keyword">import</span> argparse</div>
<div class="line"><a id="l01544" name="l01544"></a><span class="lineno"> 1544</span>    <span class="keyword">from</span> fontTools <span class="keyword">import</span> configLogger</div>
<div class="line"><a id="l01545" name="l01545"></a><span class="lineno"> 1545</span>    <span class="keyword">from</span> <a class="code hl_namespace" href="../../da/d01/namespacefontTools_1_1ttx.html">fontTools.ttx</a> <span class="keyword">import</span> makeOutputFileName</div>
<div class="line"><a id="l01546" name="l01546"></a><span class="lineno"> 1546</span> </div>
<div class="line"><a id="l01547" name="l01547"></a><span class="lineno"> 1547</span>    <span class="keyword">class </span>_HelpAction(argparse._HelpAction):</div>
<div class="line"><a id="l01548" name="l01548"></a><span class="lineno"> 1548</span>        <span class="keyword">def </span>__call__(self, parser, namespace, values, option_string=None):</div>
<div class="line"><a id="l01549" name="l01549"></a><span class="lineno"> 1549</span>            subparsers_actions = [</div>
<div class="line"><a id="l01550" name="l01550"></a><span class="lineno"> 1550</span>                action</div>
<div class="line"><a id="l01551" name="l01551"></a><span class="lineno"> 1551</span>                <span class="keywordflow">for</span> action <span class="keywordflow">in</span> parser._actions</div>
<div class="line"><a id="l01552" name="l01552"></a><span class="lineno"> 1552</span>                <span class="keywordflow">if</span> isinstance(action, argparse._SubParsersAction)</div>
<div class="line"><a id="l01553" name="l01553"></a><span class="lineno"> 1553</span>            ]</div>
<div class="line"><a id="l01554" name="l01554"></a><span class="lineno"> 1554</span>            <span class="keywordflow">for</span> subparsers_action <span class="keywordflow">in</span> subparsers_actions:</div>
<div class="line"><a id="l01555" name="l01555"></a><span class="lineno"> 1555</span>                <span class="keywordflow">for</span> choice, subparser <span class="keywordflow">in</span> subparsers_action.choices.items():</div>
<div class="line"><a id="l01556" name="l01556"></a><span class="lineno"> 1556</span>                    print(subparser.format_help())</div>
<div class="line"><a id="l01557" name="l01557"></a><span class="lineno"> 1557</span>            parser.exit()</div>
<div class="line"><a id="l01558" name="l01558"></a><span class="lineno"> 1558</span> </div>
<div class="line"><a id="l01559" name="l01559"></a><span class="lineno"> 1559</span>    <span class="keyword">class </span>_NoGlyfTransformAction(argparse.Action):</div>
<div class="line"><a id="l01560" name="l01560"></a><span class="lineno"> 1560</span>        <span class="keyword">def </span>__call__(self, parser, namespace, values, option_string=None):</div>
<div class="line"><a id="l01561" name="l01561"></a><span class="lineno"> 1561</span>            namespace.transform_tables.difference_update({<span class="stringliteral">&quot;glyf&quot;</span>, <span class="stringliteral">&quot;loca&quot;</span>})</div>
<div class="line"><a id="l01562" name="l01562"></a><span class="lineno"> 1562</span> </div>
<div class="line"><a id="l01563" name="l01563"></a><span class="lineno"> 1563</span>    <span class="keyword">class </span>_HmtxTransformAction(argparse.Action):</div>
<div class="line"><a id="l01564" name="l01564"></a><span class="lineno"> 1564</span>        <span class="keyword">def </span>__call__(self, parser, namespace, values, option_string=None):</div>
<div class="line"><a id="l01565" name="l01565"></a><span class="lineno"> 1565</span>            namespace.transform_tables.add(<span class="stringliteral">&quot;hmtx&quot;</span>)</div>
<div class="line"><a id="l01566" name="l01566"></a><span class="lineno"> 1566</span> </div>
<div class="line"><a id="l01567" name="l01567"></a><span class="lineno"> 1567</span>    parser = argparse.ArgumentParser(</div>
<div class="line"><a id="l01568" name="l01568"></a><span class="lineno"> 1568</span>        prog=<span class="stringliteral">&quot;fonttools ttLib.woff2&quot;</span>, description=main.__doc__, add_help=<span class="keyword">False</span></div>
<div class="line"><a id="l01569" name="l01569"></a><span class="lineno"> 1569</span>    )</div>
<div class="line"><a id="l01570" name="l01570"></a><span class="lineno"> 1570</span> </div>
<div class="line"><a id="l01571" name="l01571"></a><span class="lineno"> 1571</span>    parser.add_argument(</div>
<div class="line"><a id="l01572" name="l01572"></a><span class="lineno"> 1572</span>        <span class="stringliteral">&quot;-h&quot;</span>, <span class="stringliteral">&quot;--help&quot;</span>, action=_HelpAction, help=<span class="stringliteral">&quot;show this help message and exit&quot;</span></div>
<div class="line"><a id="l01573" name="l01573"></a><span class="lineno"> 1573</span>    )</div>
<div class="line"><a id="l01574" name="l01574"></a><span class="lineno"> 1574</span> </div>
<div class="line"><a id="l01575" name="l01575"></a><span class="lineno"> 1575</span>    parser_group = parser.add_subparsers(title=<span class="stringliteral">&quot;sub-commands&quot;</span>)</div>
<div class="line"><a id="l01576" name="l01576"></a><span class="lineno"> 1576</span>    parser_compress = parser_group.add_parser(</div>
<div class="line"><a id="l01577" name="l01577"></a><span class="lineno"> 1577</span>        <span class="stringliteral">&quot;compress&quot;</span>, description=<span class="stringliteral">&quot;Compress a TTF or OTF font to WOFF2&quot;</span></div>
<div class="line"><a id="l01578" name="l01578"></a><span class="lineno"> 1578</span>    )</div>
<div class="line"><a id="l01579" name="l01579"></a><span class="lineno"> 1579</span>    parser_decompress = parser_group.add_parser(</div>
<div class="line"><a id="l01580" name="l01580"></a><span class="lineno"> 1580</span>        <span class="stringliteral">&quot;decompress&quot;</span>, description=<span class="stringliteral">&quot;Decompress a WOFF2 font to OTF&quot;</span></div>
<div class="line"><a id="l01581" name="l01581"></a><span class="lineno"> 1581</span>    )</div>
<div class="line"><a id="l01582" name="l01582"></a><span class="lineno"> 1582</span> </div>
<div class="line"><a id="l01583" name="l01583"></a><span class="lineno"> 1583</span>    <span class="keywordflow">for</span> subparser <span class="keywordflow">in</span> (parser_compress, parser_decompress):</div>
<div class="line"><a id="l01584" name="l01584"></a><span class="lineno"> 1584</span>        group = subparser.add_mutually_exclusive_group(required=<span class="keyword">False</span>)</div>
<div class="line"><a id="l01585" name="l01585"></a><span class="lineno"> 1585</span>        group.add_argument(</div>
<div class="line"><a id="l01586" name="l01586"></a><span class="lineno"> 1586</span>            <span class="stringliteral">&quot;-v&quot;</span>,</div>
<div class="line"><a id="l01587" name="l01587"></a><span class="lineno"> 1587</span>            <span class="stringliteral">&quot;--verbose&quot;</span>,</div>
<div class="line"><a id="l01588" name="l01588"></a><span class="lineno"> 1588</span>            action=<span class="stringliteral">&quot;store_true&quot;</span>,</div>
<div class="line"><a id="l01589" name="l01589"></a><span class="lineno"> 1589</span>            help=<span class="stringliteral">&quot;print more messages to console&quot;</span>,</div>
<div class="line"><a id="l01590" name="l01590"></a><span class="lineno"> 1590</span>        )</div>
<div class="line"><a id="l01591" name="l01591"></a><span class="lineno"> 1591</span>        group.add_argument(</div>
<div class="line"><a id="l01592" name="l01592"></a><span class="lineno"> 1592</span>            <span class="stringliteral">&quot;-q&quot;</span>,</div>
<div class="line"><a id="l01593" name="l01593"></a><span class="lineno"> 1593</span>            <span class="stringliteral">&quot;--quiet&quot;</span>,</div>
<div class="line"><a id="l01594" name="l01594"></a><span class="lineno"> 1594</span>            action=<span class="stringliteral">&quot;store_true&quot;</span>,</div>
<div class="line"><a id="l01595" name="l01595"></a><span class="lineno"> 1595</span>            help=<span class="stringliteral">&quot;do not print messages to console&quot;</span>,</div>
<div class="line"><a id="l01596" name="l01596"></a><span class="lineno"> 1596</span>        )</div>
<div class="line"><a id="l01597" name="l01597"></a><span class="lineno"> 1597</span> </div>
<div class="line"><a id="l01598" name="l01598"></a><span class="lineno"> 1598</span>    parser_compress.add_argument(</div>
<div class="line"><a id="l01599" name="l01599"></a><span class="lineno"> 1599</span>        <span class="stringliteral">&quot;input_file&quot;</span>,</div>
<div class="line"><a id="l01600" name="l01600"></a><span class="lineno"> 1600</span>        metavar=<span class="stringliteral">&quot;INPUT&quot;</span>,</div>
<div class="line"><a id="l01601" name="l01601"></a><span class="lineno"> 1601</span>        help=<span class="stringliteral">&quot;the input OpenType font (.ttf or .otf)&quot;</span>,</div>
<div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span>    )</div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span>    parser_decompress.add_argument(</div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span>        <span class="stringliteral">&quot;input_file&quot;</span>,</div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span>        metavar=<span class="stringliteral">&quot;INPUT&quot;</span>,</div>
<div class="line"><a id="l01606" name="l01606"></a><span class="lineno"> 1606</span>        help=<span class="stringliteral">&quot;the input WOFF2 font&quot;</span>,</div>
<div class="line"><a id="l01607" name="l01607"></a><span class="lineno"> 1607</span>    )</div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span> </div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"> 1609</span>    parser_compress.add_argument(</div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span>        <span class="stringliteral">&quot;-o&quot;</span>,</div>
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"> 1611</span>        <span class="stringliteral">&quot;--output-file&quot;</span>,</div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span>        metavar=<span class="stringliteral">&quot;OUTPUT&quot;</span>,</div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span>        help=<span class="stringliteral">&quot;the output WOFF2 font&quot;</span>,</div>
<div class="line"><a id="l01614" name="l01614"></a><span class="lineno"> 1614</span>    )</div>
<div class="line"><a id="l01615" name="l01615"></a><span class="lineno"> 1615</span>    parser_decompress.add_argument(</div>
<div class="line"><a id="l01616" name="l01616"></a><span class="lineno"> 1616</span>        <span class="stringliteral">&quot;-o&quot;</span>,</div>
<div class="line"><a id="l01617" name="l01617"></a><span class="lineno"> 1617</span>        <span class="stringliteral">&quot;--output-file&quot;</span>,</div>
<div class="line"><a id="l01618" name="l01618"></a><span class="lineno"> 1618</span>        metavar=<span class="stringliteral">&quot;OUTPUT&quot;</span>,</div>
<div class="line"><a id="l01619" name="l01619"></a><span class="lineno"> 1619</span>        help=<span class="stringliteral">&quot;the output OpenType font&quot;</span>,</div>
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"> 1620</span>    )</div>
<div class="line"><a id="l01621" name="l01621"></a><span class="lineno"> 1621</span> </div>
<div class="line"><a id="l01622" name="l01622"></a><span class="lineno"> 1622</span>    transform_group = parser_compress.add_argument_group()</div>
<div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span>    transform_group.add_argument(</div>
<div class="line"><a id="l01624" name="l01624"></a><span class="lineno"> 1624</span>        <span class="stringliteral">&quot;--no-glyf-transform&quot;</span>,</div>
<div class="line"><a id="l01625" name="l01625"></a><span class="lineno"> 1625</span>        dest=<span class="stringliteral">&quot;transform_tables&quot;</span>,</div>
<div class="line"><a id="l01626" name="l01626"></a><span class="lineno"> 1626</span>        nargs=0,</div>
<div class="line"><a id="l01627" name="l01627"></a><span class="lineno"> 1627</span>        action=_NoGlyfTransformAction,</div>
<div class="line"><a id="l01628" name="l01628"></a><span class="lineno"> 1628</span>        help=<span class="stringliteral">&quot;Do not transform glyf (and loca) tables&quot;</span>,</div>
<div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span>    )</div>
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"> 1630</span>    transform_group.add_argument(</div>
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"> 1631</span>        <span class="stringliteral">&quot;--hmtx-transform&quot;</span>,</div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"> 1632</span>        dest=<span class="stringliteral">&quot;transform_tables&quot;</span>,</div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span>        nargs=0,</div>
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"> 1634</span>        action=_HmtxTransformAction,</div>
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"> 1635</span>        help=<span class="stringliteral">&quot;Enable optional transformation for &#39;hmtx&#39; table&quot;</span>,</div>
<div class="line"><a id="l01636" name="l01636"></a><span class="lineno"> 1636</span>    )</div>
<div class="line"><a id="l01637" name="l01637"></a><span class="lineno"> 1637</span> </div>
<div class="line"><a id="l01638" name="l01638"></a><span class="lineno"> 1638</span>    parser_compress.set_defaults(</div>
<div class="line"><a id="l01639" name="l01639"></a><span class="lineno"> 1639</span>        subcommand=compress,</div>
<div class="line"><a id="l01640" name="l01640"></a><span class="lineno"> 1640</span>        transform_tables={<span class="stringliteral">&quot;glyf&quot;</span>, <span class="stringliteral">&quot;loca&quot;</span>},</div>
<div class="line"><a id="l01641" name="l01641"></a><span class="lineno"> 1641</span>    )</div>
<div class="line"><a id="l01642" name="l01642"></a><span class="lineno"> 1642</span>    parser_decompress.set_defaults(subcommand=decompress)</div>
<div class="line"><a id="l01643" name="l01643"></a><span class="lineno"> 1643</span> </div>
<div class="line"><a id="l01644" name="l01644"></a><span class="lineno"> 1644</span>    options = vars(parser.parse_args(args))</div>
<div class="line"><a id="l01645" name="l01645"></a><span class="lineno"> 1645</span> </div>
<div class="line"><a id="l01646" name="l01646"></a><span class="lineno"> 1646</span>    subcommand = options.pop(<span class="stringliteral">&quot;subcommand&quot;</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><a id="l01647" name="l01647"></a><span class="lineno"> 1647</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> subcommand:</div>
<div class="line"><a id="l01648" name="l01648"></a><span class="lineno"> 1648</span>        parser.print_help()</div>
<div class="line"><a id="l01649" name="l01649"></a><span class="lineno"> 1649</span>        <span class="keywordflow">return</span></div>
<div class="line"><a id="l01650" name="l01650"></a><span class="lineno"> 1650</span> </div>
<div class="line"><a id="l01651" name="l01651"></a><span class="lineno"> 1651</span>    quiet = options.pop(<span class="stringliteral">&quot;quiet&quot;</span>)</div>
<div class="line"><a id="l01652" name="l01652"></a><span class="lineno"> 1652</span>    verbose = options.pop(<span class="stringliteral">&quot;verbose&quot;</span>)</div>
<div class="line"><a id="l01653" name="l01653"></a><span class="lineno"> 1653</span>    configLogger(</div>
<div class="line"><a id="l01654" name="l01654"></a><span class="lineno"> 1654</span>        level=(<span class="stringliteral">&quot;ERROR&quot;</span> <span class="keywordflow">if</span> quiet <span class="keywordflow">else</span> <span class="stringliteral">&quot;DEBUG&quot;</span> <span class="keywordflow">if</span> verbose <span class="keywordflow">else</span> <span class="stringliteral">&quot;INFO&quot;</span>),</div>
<div class="line"><a id="l01655" name="l01655"></a><span class="lineno"> 1655</span>    )</div>
<div class="line"><a id="l01656" name="l01656"></a><span class="lineno"> 1656</span> </div>
<div class="line"><a id="l01657" name="l01657"></a><span class="lineno"> 1657</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> options[<span class="stringliteral">&quot;output_file&quot;</span>]:</div>
<div class="line"><a id="l01658" name="l01658"></a><span class="lineno"> 1658</span>        <span class="keywordflow">if</span> subcommand <span class="keywordflow">is</span> compress:</div>
<div class="line"><a id="l01659" name="l01659"></a><span class="lineno"> 1659</span>            extension = <span class="stringliteral">&quot;.woff2&quot;</span></div>
<div class="line"><a id="l01660" name="l01660"></a><span class="lineno"> 1660</span>        <span class="keywordflow">elif</span> subcommand <span class="keywordflow">is</span> decompress:</div>
<div class="line"><a id="l01661" name="l01661"></a><span class="lineno"> 1661</span>            <span class="comment"># choose .ttf/.otf file extension depending on sfntVersion</span></div>
<div class="line"><a id="l01662" name="l01662"></a><span class="lineno"> 1662</span>            <span class="keyword">with</span> open(options[<span class="stringliteral">&quot;input_file&quot;</span>], <span class="stringliteral">&quot;rb&quot;</span>) <span class="keyword">as</span> f:</div>
<div class="line"><a id="l01663" name="l01663"></a><span class="lineno"> 1663</span>                f.seek(4)  <span class="comment"># skip &#39;wOF2&#39; signature</span></div>
<div class="line"><a id="l01664" name="l01664"></a><span class="lineno"> 1664</span>                sfntVersion = f.read(4)</div>
<div class="line"><a id="l01665" name="l01665"></a><span class="lineno"> 1665</span>            <span class="keyword">assert</span> len(sfntVersion) == 4, <span class="stringliteral">&quot;not enough data&quot;</span></div>
<div class="line"><a id="l01666" name="l01666"></a><span class="lineno"> 1666</span>            extension = <span class="stringliteral">&quot;.otf&quot;</span> <span class="keywordflow">if</span> sfntVersion == b<span class="stringliteral">&quot;OTTO&quot;</span> <span class="keywordflow">else</span> <span class="stringliteral">&quot;.ttf&quot;</span></div>
<div class="line"><a id="l01667" name="l01667"></a><span class="lineno"> 1667</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l01668" name="l01668"></a><span class="lineno"> 1668</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../d0/d44/classAssertionError.html">AssertionError</a>(subcommand)</div>
<div class="line"><a id="l01669" name="l01669"></a><span class="lineno"> 1669</span>        options[<span class="stringliteral">&quot;output_file&quot;</span>] = makeOutputFileName(</div>
<div class="line"><a id="l01670" name="l01670"></a><span class="lineno"> 1670</span>            options[<span class="stringliteral">&quot;input_file&quot;</span>], outputDir=<span class="keywordtype">None</span>, extension=extension</div>
<div class="line"><a id="l01671" name="l01671"></a><span class="lineno"> 1671</span>        )</div>
<div class="line"><a id="l01672" name="l01672"></a><span class="lineno"> 1672</span> </div>
<div class="line"><a id="l01673" name="l01673"></a><span class="lineno"> 1673</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><a id="l01674" name="l01674"></a><span class="lineno"> 1674</span>        subcommand(**options)</div>
<div class="line"><a id="l01675" name="l01675"></a><span class="lineno"> 1675</span>    <span class="keywordflow">except</span> TTLibError <span class="keyword">as</span> e:</div>
<div class="line"><a id="l01676" name="l01676"></a><span class="lineno"> 1676</span>        parser.error(e)</div>
<div class="line"><a id="l01677" name="l01677"></a><span class="lineno"> 1677</span> </div>
<div class="line"><a id="l01678" name="l01678"></a><span class="lineno"> 1678</span> </div>
</div>
<div class="line"><a id="l01679" name="l01679"></a><span class="lineno"> 1679</span><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&quot;__main__&quot;</span>:</div>
<div class="line"><a id="l01680" name="l01680"></a><span class="lineno"> 1680</span>    sys.exit(<a class="code hl_namespace" href="../../d2/dc1/namespacemain.html">main</a>())</div>
<div class="ttc" id="aclassAssertionError_html"><div class="ttname"><a href="../../d0/d44/classAssertionError.html">AssertionError</a></div></div>
<div class="ttc" id="aclassBytesIO_html"><div class="ttname"><a href="../../df/db7/classBytesIO.html">BytesIO</a></div></div>
<div class="ttc" id="aclassDirectoryEntry_html"><div class="ttname"><a href="../../d6/d15/classDirectoryEntry.html">DirectoryEntry</a></div></div>
<div class="ttc" id="aclassImportError_html"><div class="ttname"><a href="../../d8/d14/classImportError.html">ImportError</a></div></div>
<div class="ttc" id="aclassSFNTWriter_html"><div class="ttname"><a href="../../de/dfb/classSFNTWriter.html">SFNTWriter</a></div></div>
<div class="ttc" id="aclassTypeError_html"><div class="ttname"><a href="../../dd/d00/classTypeError.html">TypeError</a></div></div>
<div class="ttc" id="aclassValueError_html"><div class="ttname"><a href="../../de/d40/classValueError.html">ValueError</a></div></div>
<div class="ttc" id="aclassWOFFFlavorData_html"><div class="ttname"><a href="../../db/d63/classWOFFFlavorData.html">WOFFFlavorData</a></div></div>
<div class="ttc" id="aclassfontTools_1_1misc_1_1textTools_1_1Tag_html"><div class="ttname"><a href="../../d6/d75/classfontTools_1_1misc_1_1textTools_1_1Tag.html">fontTools.misc.textTools.Tag</a></div><div class="ttdef"><b>Definition</b> <a href="../../d2/d21/textTools_8py_source.html#l00011">textTools.py:11</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1TTLibError_html"><div class="ttname"><a href="../../d6/df3/classfontTools_1_1ttLib_1_1TTLibError.html">fontTools.ttLib.TTLibError</a></div><div class="ttdef"><b>Definition</b> <a href="../../dd/d31/fontTools_2ttLib_2____init_____8py_source.html#l00014">__init__.py:14</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader_html"><div class="ttname"><a href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html">fontTools.ttLib.sfnt.SFNTReader</a></div><div class="ttdef"><b>Definition</b> <a href="../../d3/d04/sfnt_8py_source.html#l00029">sfnt.py:29</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader_html_a125bdc762d3d23c09919d7f99a772f49"><div class="ttname"><a href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html#a125bdc762d3d23c09919d7f99a772f49">fontTools.ttLib.sfnt.SFNTReader.DirectoryEntry</a></div><div class="ttdeci">DirectoryEntry</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d04/sfnt_8py_source.html#l00053">sfnt.py:53</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader_html_a5b03186eefa0ba7022642a7a817d2ebc"><div class="ttname"><a href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html#a5b03186eefa0ba7022642a7a817d2ebc">fontTools.ttLib.sfnt.SFNTReader.numTables</a></div><div class="ttdeci">numTables</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d04/sfnt_8py_source.html#l00088">sfnt.py:88</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader_html_abb5219583f6804620162330d0632b8fb"><div class="ttname"><a href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html#abb5219583f6804620162330d0632b8fb">fontTools.ttLib.sfnt.SFNTReader.flavorData</a></div><div class="ttdeci">flavorData</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d04/sfnt_8py_source.html#l00052">sfnt.py:52</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader_html_acb3f048e4d1e7d9948114fe7bb75ff75"><div class="ttname"><a href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html#acb3f048e4d1e7d9948114fe7bb75ff75">fontTools.ttLib.sfnt.SFNTReader.tables</a></div><div class="ttdeci">tables</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d04/sfnt_8py_source.html#l00093">sfnt.py:93</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader_html_af147145cd6f95ffb586864f8942bdddc"><div class="ttname"><a href="../../d2/d29/classfontTools_1_1ttLib_1_1sfnt_1_1SFNTReader.html#af147145cd6f95ffb586864f8942bdddc">fontTools.ttLib.sfnt.SFNTReader.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d04/sfnt_8py_source.html#l00048">sfnt.py:48</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1tables_1_1ttProgram_1_1Program_html"><div class="ttname"><a href="../../dc/dd8/classfontTools_1_1ttLib_1_1tables_1_1ttProgram_1_1Program.html">fontTools.ttLib.tables.ttProgram.Program</a></div><div class="ttdef"><b>Definition</b> <a href="../../db/d45/ttProgram_8py_source.html#l00219">ttProgram.py:219</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1ttFont_1_1TTFont_html"><div class="ttname"><a href="../../d8/d0d/classfontTools_1_1ttLib_1_1ttFont_1_1TTFont.html">fontTools.ttLib.ttFont.TTFont</a></div><div class="ttdef"><b>Definition</b> <a href="../../da/d7f/ttFont_8py_source.html#l00022">ttFont.py:22</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry_html"><div class="ttname"><a href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html">fontTools.ttLib.woff2.WOFF2DirectoryEntry</a></div><div class="ttdef"><b>Definition</b> <a href="#l00650">woff2.py:650</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry_html_a43afad8771fa3d5d04f695a4dfde8252"><div class="ttname"><a href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#a43afad8771fa3d5d04f695a4dfde8252">fontTools.ttLib.woff2.WOFF2DirectoryEntry.fromString</a></div><div class="ttdeci">fromString(self, data)</div><div class="ttdef"><b>Definition</b> <a href="#l00658">woff2.py:658</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry_html_a4f1994b627123f5ded840ecc6b37a0fd"><div class="ttname"><a href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#a4f1994b627123f5ded840ecc6b37a0fd">fontTools.ttLib.woff2.WOFF2DirectoryEntry.origLength</a></div><div class="ttdeci">origLength</div><div class="ttdef"><b>Definition</b> <a href="#l00671">woff2.py:671</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry_html_aa8ac8c07d652a8a6b2a8a259922a9661"><div class="ttname"><a href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#aa8ac8c07d652a8a6b2a8a259922a9661">fontTools.ttLib.woff2.WOFF2DirectoryEntry.length</a></div><div class="ttdeci">length</div><div class="ttdef"><b>Definition</b> <a href="#l00672">woff2.py:672</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry_html_abf8df43f7605556d1970e2fbc5af6611"><div class="ttname"><a href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#abf8df43f7605556d1970e2fbc5af6611">fontTools.ttLib.woff2.WOFF2DirectoryEntry.transformVersion</a></div><div class="ttdeci">int transformVersion</div><div class="ttdef"><b>Definition</b> <a href="#l00719">woff2.py:719</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry_html_ae0e2a24003a6d265836be49baad047cc"><div class="ttname"><a href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#ae0e2a24003a6d265836be49baad047cc">fontTools.ttLib.woff2.WOFF2DirectoryEntry.tag</a></div><div class="ttdeci">str tag</div><div class="ttdef"><b>Definition</b> <a href="#l00669">woff2.py:669</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry_html_afde3467185e5d04dc39dc6e08556511f"><div class="ttname"><a href="../../d8/d8e/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2DirectoryEntry.html#afde3467185e5d04dc39dc6e08556511f">fontTools.ttLib.woff2.WOFF2DirectoryEntry.transformed</a></div><div class="ttdeci">transformed</div><div class="ttdef"><b>Definition</b> <a href="#l00673">woff2.py:673</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2FlavorData_html"><div class="ttname"><a href="../../d2/d45/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2FlavorData.html">fontTools.ttLib.woff2.WOFF2FlavorData</a></div><div class="ttdef"><b>Definition</b> <a href="#l01286">woff2.py:1286</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2FlavorData_html_a0d092e6871851521f726fd631b015f3c"><div class="ttname"><a href="../../d2/d45/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2FlavorData.html#a0d092e6871851521f726fd631b015f3c">fontTools.ttLib.woff2.WOFF2FlavorData.metaData</a></div><div class="ttdeci">metaData</div><div class="ttdef"><b>Definition</b> <a href="#l01332">woff2.py:1332</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2FlavorData_html_a3e44f4f997db1d8c0f20843674017103"><div class="ttname"><a href="../../d2/d45/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2FlavorData.html#a3e44f4f997db1d8c0f20843674017103">fontTools.ttLib.woff2.WOFF2FlavorData.__init__</a></div><div class="ttdeci">__init__(self, reader=None, data=None, transformedTables=None)</div><div class="ttdef"><b>Definition</b> <a href="#l01289">woff2.py:1289</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2FlavorData_html_a7f0343a52332b2bfc66d64c0c355b8df"><div class="ttname"><a href="../../d2/d45/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2FlavorData.html#a7f0343a52332b2bfc66d64c0c355b8df">fontTools.ttLib.woff2.WOFF2FlavorData.majorVersion</a></div><div class="ttdeci">majorVersion</div><div class="ttdef"><b>Definition</b> <a href="#l01330">woff2.py:1330</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2FlavorData_html_ab4ed8d01429306fb0640ba633f7d629e"><div class="ttname"><a href="../../d2/d45/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2FlavorData.html#ab4ed8d01429306fb0640ba633f7d629e">fontTools.ttLib.woff2.WOFF2FlavorData.transformedTables</a></div><div class="ttdeci">transformedTables</div><div class="ttdef"><b>Definition</b> <a href="#l01340">woff2.py:1340</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2FlavorData_html_ab631f9a54e2a3c597705d44b20024471"><div class="ttname"><a href="../../d2/d45/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2FlavorData.html#ab631f9a54e2a3c597705d44b20024471">fontTools.ttLib.woff2.WOFF2FlavorData.privData</a></div><div class="ttdeci">privData</div><div class="ttdef"><b>Definition</b> <a href="#l01333">woff2.py:1333</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html">fontTools.ttLib.woff2.WOFF2GlyfTable</a></div><div class="ttdef"><b>Definition</b> <a href="#l00762">woff2.py:762</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_a0c1e35b30d4ebe1ce1391a45c590d44d"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a0c1e35b30d4ebe1ce1391a45c590d44d">fontTools.ttLib.woff2.WOFF2GlyfTable.glyphOrder</a></div><div class="ttdeci">list glyphOrder</div><div class="ttdef"><b>Definition</b> <a href="#l00819">woff2.py:819</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_a0e2984bac4b71afe90780cd082f4fc3f"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a0e2984bac4b71afe90780cd082f4fc3f">fontTools.ttLib.woff2.WOFF2GlyfTable.indexFormat</a></div><div class="ttdeci">indexFormat</div><div class="ttdef"><b>Definition</b> <a href="#l00843">woff2.py:843</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_a0f43746262e6f23f95747f0d3b217a39"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a0f43746262e6f23f95747f0d3b217a39">fontTools.ttLib.woff2.WOFF2GlyfTable.compositeStream</a></div><div class="ttdeci">compositeStream</div><div class="ttdef"><b>Definition</b> <a href="#l00894">woff2.py:894</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_a10da8dd9b8de27deb8507e9f3c7c6f70"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a10da8dd9b8de27deb8507e9f3c7c6f70">fontTools.ttLib.woff2.WOFF2GlyfTable.transform</a></div><div class="ttdeci">transform(self, ttFont)</div><div class="ttdef"><b>Definition</b> <a href="#l00837">woff2.py:837</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_a168e70f0b8fbd53772e092875bae651f"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a168e70f0b8fbd53772e092875bae651f">fontTools.ttLib.woff2.WOFF2GlyfTable.instructionStream</a></div><div class="ttdeci">instructionStream</div><div class="ttdef"><b>Definition</b> <a href="#l00926">woff2.py:926</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_a18cc4e6a8484f6dd649a8dc31d79daa4"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a18cc4e6a8484f6dd649a8dc31d79daa4">fontTools.ttLib.woff2.WOFF2GlyfTable.version</a></div><div class="ttdeci">int version</div><div class="ttdef"><b>Definition</b> <a href="#l00861">woff2.py:861</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_a1d8ef4697c3650f3adb6d2ecaebcb342"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a1d8ef4697c3650f3adb6d2ecaebcb342">fontTools.ttLib.woff2.WOFF2GlyfTable._decodeOverlapSimpleFlag</a></div><div class="ttdeci">_decodeOverlapSimpleFlag(self, glyph, glyphID)</div><div class="ttdef"><b>Definition</b> <a href="#l00911">woff2.py:911</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_a2abf35b0f9d0456e4533b7c70a4ca0ba"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a2abf35b0f9d0456e4533b7c70a4ca0ba">fontTools.ttLib.woff2.WOFF2GlyfTable.overlapSimpleBitmap</a></div><div class="ttdeci">overlapSimpleBitmap</div><div class="ttdef"><b>Definition</b> <a href="#l00794">woff2.py:794</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_a2b8ca6cea2ab1de975fed6866ae1ee05"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a2b8ca6cea2ab1de975fed6866ae1ee05">fontTools.ttLib.woff2.WOFF2GlyfTable._encodeInstructions</a></div><div class="ttdeci">_encodeInstructions(self, glyph)</div><div class="ttdef"><b>Definition</b> <a href="#l01055">woff2.py:1055</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_a3338837448134ee696c0a794f9e1f47b"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a3338837448134ee696c0a794f9e1f47b">fontTools.ttLib.woff2.WOFF2GlyfTable._decodeComponents</a></div><div class="ttdeci">_decodeComponents(self, glyph)</div><div class="ttdef"><b>Definition</b> <a href="#l00884">woff2.py:884</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_a3902eceebb5eb64daf7bfe8b95cd3cbe"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a3902eceebb5eb64daf7bfe8b95cd3cbe">fontTools.ttLib.woff2.WOFF2GlyfTable.optionFlags</a></div><div class="ttdeci">int optionFlags</div><div class="ttdef"><b>Definition</b> <a href="#l00862">woff2.py:862</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_a3cc8b2986921c4e9090c9821a65f49c9"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a3cc8b2986921c4e9090c9821a65f49c9">fontTools.ttLib.woff2.WOFF2GlyfTable._decodeCoordinates</a></div><div class="ttdeci">_decodeCoordinates(self, glyph)</div><div class="ttdef"><b>Definition</b> <a href="#l00898">woff2.py:898</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_a4407402892f99e178d8fe22f8f242f53"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a4407402892f99e178d8fe22f8f242f53">fontTools.ttLib.woff2.WOFF2GlyfTable._decodeGlyph</a></div><div class="ttdeci">_decodeGlyph(self, glyphID)</div><div class="ttdef"><b>Definition</b> <a href="#l00871">woff2.py:871</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_a4f830cd0ff28272f07751600d7a57226"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a4f830cd0ff28272f07751600d7a57226">fontTools.ttLib.woff2.WOFF2GlyfTable.tableTag</a></div><div class="ttdeci">tableTag</div><div class="ttdef"><b>Definition</b> <a href="#l00776">woff2.py:776</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_a52daef3dc619578a4d5d7edbf855085c"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a52daef3dc619578a4d5d7edbf855085c">fontTools.ttLib.woff2.WOFF2GlyfTable._encodeOverlapSimpleFlag</a></div><div class="ttdeci">_encodeOverlapSimpleFlag(self, glyph, glyphID)</div><div class="ttdef"><b>Definition</b> <a href="#l01047">woff2.py:1047</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_a5588f3b78040b9bc34689c21f3af5b09"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a5588f3b78040b9bc34689c21f3af5b09">fontTools.ttLib.woff2.WOFF2GlyfTable._encodeTriplets</a></div><div class="ttdeci">_encodeTriplets(self, glyph)</div><div class="ttdef"><b>Definition</b> <a href="#l01072">woff2.py:1072</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_a5f9db7167bfd42d42359b935b659e31d"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a5f9db7167bfd42d42359b935b659e31d">fontTools.ttLib.woff2.WOFF2GlyfTable._decodeTriplets</a></div><div class="ttdeci">_decodeTriplets(self, glyph)</div><div class="ttdef"><b>Definition</b> <a href="#l00937">woff2.py:937</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_a7318d76c5dedb34c267b6f2c4ab39a27"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a7318d76c5dedb34c267b6f2c4ab39a27">fontTools.ttLib.woff2.WOFF2GlyfTable._decodeBBox</a></div><div class="ttdeci">_decodeBBox(self, glyphID, glyph)</div><div class="ttdef"><b>Definition</b> <a href="#l00928">woff2.py:928</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_a78a510a46c8b3c7628cc89c44c39e6d9"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#a78a510a46c8b3c7628cc89c44c39e6d9">fontTools.ttLib.woff2.WOFF2GlyfTable.reconstruct</a></div><div class="ttdeci">reconstruct(self, data, ttFont)</div><div class="ttdef"><b>Definition</b> <a href="#l00778">woff2.py:778</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_aa0b4012fe5e269131043f4c96caf16ee"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aa0b4012fe5e269131043f4c96caf16ee">fontTools.ttLib.woff2.WOFF2GlyfTable.glyphStream</a></div><div class="ttdeci">glyphStream</div><div class="ttdef"><b>Definition</b> <a href="#l00925">woff2.py:925</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_aa3733885e603b37d804ecefbee162f91"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aa3733885e603b37d804ecefbee162f91">fontTools.ttLib.woff2.WOFF2GlyfTable.bboxBitmap</a></div><div class="ttdeci">bboxBitmap</div><div class="ttdef"><b>Definition</b> <a href="#l00808">woff2.py:808</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_aa408553ea2e556d8dcb0f19b16c9129e"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aa408553ea2e556d8dcb0f19b16c9129e">fontTools.ttLib.woff2.WOFF2GlyfTable._decodeInstructions</a></div><div class="ttdeci">_decodeInstructions(self, glyph)</div><div class="ttdef"><b>Definition</b> <a href="#l00919">woff2.py:919</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_aad4e893b215d0a654f842f7433685036"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aad4e893b215d0a654f842f7433685036">fontTools.ttLib.woff2.WOFF2GlyfTable.numGlyphs</a></div><div class="ttdeci">numGlyphs</div><div class="ttdef"><b>Definition</b> <a href="#l00824">woff2.py:824</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_aafcde1bc8db2d5c94a6e4911610dd6b4"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aafcde1bc8db2d5c94a6e4911610dd6b4">fontTools.ttLib.woff2.WOFF2GlyfTable._encodeCoordinates</a></div><div class="ttdeci">_encodeCoordinates(self, glyph)</div><div class="ttdef"><b>Definition</b> <a href="#l01036">woff2.py:1036</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_ac2efcf579ab9362491d37dbaca13cfb4"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#ac2efcf579ab9362491d37dbaca13cfb4">fontTools.ttLib.woff2.WOFF2GlyfTable.subStreams</a></div><div class="ttdeci">tuple subStreams</div><div class="ttdef"><b>Definition</b> <a href="#l00765">woff2.py:765</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_ace2f14dd2d156ef18390a78090279fb5"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#ace2f14dd2d156ef18390a78090279fb5">fontTools.ttLib.woff2.WOFF2GlyfTable._encodeBBox</a></div><div class="ttdeci">_encodeBBox(self, glyphID, glyph)</div><div class="ttdef"><b>Definition</b> <a href="#l01060">woff2.py:1060</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_ad1e0a0eb613de6beb3ccd30da1788fd4"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#ad1e0a0eb613de6beb3ccd30da1788fd4">fontTools.ttLib.woff2.WOFF2GlyfTable.bboxStream</a></div><div class="ttdeci">bboxStream</div><div class="ttdef"><b>Definition</b> <a href="#l00809">woff2.py:809</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_ad8042b40cafda2fa1f13e34a0df22fa0"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#ad8042b40cafda2fa1f13e34a0df22fa0">fontTools.ttLib.woff2.WOFF2GlyfTable.nContourStream</a></div><div class="ttdeci">nContourStream</div><div class="ttdef"><b>Definition</b> <a href="#l00811">woff2.py:811</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_adb68e2736c364f57ed23aa97d0944ff5"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#adb68e2736c364f57ed23aa97d0944ff5">fontTools.ttLib.woff2.WOFF2GlyfTable._encodeComponents</a></div><div class="ttdeci">_encodeComponents(self, glyph)</div><div class="ttdef"><b>Definition</b> <a href="#l01024">woff2.py:1024</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_aece6072d57310b40bfe8ea5efe841820"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aece6072d57310b40bfe8ea5efe841820">fontTools.ttLib.woff2.WOFF2GlyfTable._encodeGlyph</a></div><div class="ttdeci">_encodeGlyph(self, glyphID)</div><div class="ttdef"><b>Definition</b> <a href="#l01011">woff2.py:1011</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_aee887657cbb0faacffb3e8ecb6d32e58"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#aee887657cbb0faacffb3e8ecb6d32e58">fontTools.ttLib.woff2.WOFF2GlyfTable.nPointsStream</a></div><div class="ttdeci">nPointsStream</div><div class="ttdef"><b>Definition</b> <a href="#l00907">woff2.py:907</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable_html_af2f523cf116994eab914d05c3844ae96"><div class="ttname"><a href="../../d9/d99/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2GlyfTable.html#af2f523cf116994eab914d05c3844ae96">fontTools.ttLib.woff2.WOFF2GlyfTable.flagStream</a></div><div class="ttdeci">flagStream</div><div class="ttdef"><b>Definition</b> <a href="#l00944">woff2.py:944</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2HmtxTable_html"><div class="ttname"><a href="../../d7/d0b/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2HmtxTable.html">fontTools.ttLib.woff2.WOFF2HmtxTable</a></div><div class="ttdef"><b>Definition</b> <a href="#l01129">woff2.py:1129</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2HmtxTable_html_a58da22164cfef14ffa6ab506126463a0"><div class="ttname"><a href="../../d7/d0b/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2HmtxTable.html#a58da22164cfef14ffa6ab506126463a0">fontTools.ttLib.woff2.WOFF2HmtxTable.tableTag</a></div><div class="ttdeci">tableTag</div><div class="ttdef"><b>Definition</b> <a href="#l01131">woff2.py:1131</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2HmtxTable_html_aecd2ff8ce3e96444d71eae5f269258e6"><div class="ttname"><a href="../../d7/d0b/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2HmtxTable.html#aecd2ff8ce3e96444d71eae5f269258e6">fontTools.ttLib.woff2.WOFF2HmtxTable.metrics</a></div><div class="ttdeci">dict metrics</div><div class="ttdef"><b>Definition</b> <a href="#l01197">woff2.py:1197</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2LocaTable_html"><div class="ttname"><a href="../../dd/dc6/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2LocaTable.html">fontTools.ttLib.woff2.WOFF2LocaTable</a></div><div class="ttdef"><b>Definition</b> <a href="#l00724">woff2.py:724</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2LocaTable_html_a8274e2d7655b240c2f2ba55374806f1d"><div class="ttname"><a href="../../dd/dc6/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2LocaTable.html#a8274e2d7655b240c2f2ba55374806f1d">fontTools.ttLib.woff2.WOFF2LocaTable.locations</a></div><div class="ttdeci">locations</div><div class="ttdef"><b>Definition</b> <a href="#l00749">woff2.py:749</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2LocaTable_html_adb60184983369125a7ebb8679d676e45"><div class="ttname"><a href="../../dd/dc6/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2LocaTable.html#adb60184983369125a7ebb8679d676e45">fontTools.ttLib.woff2.WOFF2LocaTable.tableTag</a></div><div class="ttdeci">tableTag</div><div class="ttdef"><b>Definition</b> <a href="#l00730">woff2.py:730</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader_html"><div class="ttname"><a href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html">fontTools.ttLib.woff2.WOFF2Reader</a></div><div class="ttdef"><b>Definition</b> <a href="#l00044">woff2.py:44</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader_html_a35d290b26f3673a8be3e084edac34c76"><div class="ttname"><a href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#a35d290b26f3673a8be3e084edac34c76">fontTools.ttLib.woff2.WOFF2Reader._reconstructLoca</a></div><div class="ttdeci">_reconstructLoca(self)</div><div class="ttdef"><b>Definition</b> <a href="#l00135">woff2.py:135</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader_html_a3d1f8f0210138d7ac1ca9b33f62c7b96"><div class="ttname"><a href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#a3d1f8f0210138d7ac1ca9b33f62c7b96">fontTools.ttLib.woff2.WOFF2Reader.__getitem__</a></div><div class="ttdeci">__getitem__(self, tag)</div><div class="ttdef"><b>Definition</b> <a href="#l00097">woff2.py:97</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader_html_a5740b7ea10b6335f23115a80374c9181"><div class="ttname"><a href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#a5740b7ea10b6335f23115a80374c9181">fontTools.ttLib.woff2.WOFF2Reader._reconstructHmtx</a></div><div class="ttdeci">_reconstructHmtx(self, data)</div><div class="ttdef"><b>Definition</b> <a href="#l00149">woff2.py:149</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader_html_a799c3cbf3da485c4f428eb72fc86aa44"><div class="ttname"><a href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#a799c3cbf3da485c4f428eb72fc86aa44">fontTools.ttLib.woff2.WOFF2Reader._decompileTable</a></div><div class="ttdeci">_decompileTable(self, tag)</div><div class="ttdef"><b>Definition</b> <a href="#l00167">woff2.py:167</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader_html_ad0f63b9fd6b28e2e9b7690dafb18b790"><div class="ttname"><a href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ad0f63b9fd6b28e2e9b7690dafb18b790">fontTools.ttLib.woff2.WOFF2Reader._reconstructGlyf</a></div><div class="ttdeci">_reconstructGlyf(self, data, padding=None)</div><div class="ttdef"><b>Definition</b> <a href="#l00123">woff2.py:123</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader_html_ad3d3012253e861e72e623caf59698672"><div class="ttname"><a href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ad3d3012253e861e72e623caf59698672">fontTools.ttLib.woff2.WOFF2Reader.transformBuffer</a></div><div class="ttdeci">transformBuffer</div><div class="ttdef"><b>Definition</b> <a href="#l00086">woff2.py:86</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader_html_ad577a9f90281e93f9a8993fa860cb55a"><div class="ttname"><a href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ad577a9f90281e93f9a8993fa860cb55a">fontTools.ttLib.woff2.WOFF2Reader.reconstructTable</a></div><div class="ttdeci">reconstructTable(self, tag)</div><div class="ttdef"><b>Definition</b> <a href="#l00107">woff2.py:107</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader_html_ae5995268a37ba401ef1c1ae339d2d501"><div class="ttname"><a href="../../d7/dd1/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Reader.html#ae5995268a37ba401ef1c1ae339d2d501">fontTools.ttLib.woff2.WOFF2Reader.ttFont</a></div><div class="ttdeci">ttFont</div><div class="ttdef"><b>Definition</b> <a href="#l00095">woff2.py:95</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html">fontTools.ttLib.woff2.WOFF2Writer</a></div><div class="ttdef"><b>Definition</b> <a href="#l00178">woff2.py:178</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a187f383c72d03785d521412c60bc6867"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a187f383c72d03785d521412c60bc6867">fontTools.ttLib.woff2.WOFF2Writer._transformTables</a></div><div class="ttdeci">_transformTables(self)</div><div class="ttdef"><b>Definition</b> <a href="#l00349">woff2.py:349</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a1b1cb08e5e2cc0bd14742da0c7b8e77a"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a1b1cb08e5e2cc0bd14742da0c7b8e77a">fontTools.ttLib.woff2.WOFF2Writer.flavorData</a></div><div class="ttdeci">flavorData</div><div class="ttdef"><b>Definition</b> <a href="#l00199">woff2.py:199</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a1cb05cc95f5a5734ec1b2ddc4ea2ac80"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a1cb05cc95f5a5734ec1b2ddc4ea2ac80">fontTools.ttLib.woff2.WOFF2Writer.directoryFormat</a></div><div class="ttdeci">directoryFormat</div><div class="ttdef"><b>Definition</b> <a href="#l00201">woff2.py:201</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a1cf20a23c553421b5f6657e9dcdba617"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a1cf20a23c553421b5f6657e9dcdba617">fontTools.ttLib.woff2.WOFF2Writer.searchRange</a></div><div class="ttdeci">searchRange</div><div class="ttdef"><b>Definition</b> <a href="#l00402">woff2.py:402</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a26bae8bd595ae608a2d04d9e93118fb2"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a26bae8bd595ae608a2d04d9e93118fb2">fontTools.ttLib.woff2.WOFF2Writer.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition</b> <a href="#l00196">woff2.py:196</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a2d407311bd2da3a0bc9497013f69e970"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a2d407311bd2da3a0bc9497013f69e970">fontTools.ttLib.woff2.WOFF2Writer.nextTableOffset</a></div><div class="ttdeci">int nextTableOffset</div><div class="ttdef"><b>Definition</b> <a href="#l00207">woff2.py:207</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a3860e306b4d9ac148d1b3ac4b9eaabe8"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a3860e306b4d9ac148d1b3ac4b9eaabe8">fontTools.ttLib.woff2.WOFF2Writer._calcSFNTChecksumsLengthsAndOffsets</a></div><div class="ttdeci">_calcSFNTChecksumsLengthsAndOffsets(self)</div><div class="ttdef"><b>Definition</b> <a href="#l00333">woff2.py:333</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a3effa38ac4bcf59e4045d5bb1aca9285"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a3effa38ac4bcf59e4045d5bb1aca9285">fontTools.ttLib.woff2.WOFF2Writer.sfntVersion</a></div><div class="ttdeci">str sfntVersion</div><div class="ttdef"><b>Definition</b> <a href="#l00198">woff2.py:198</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a4361304b7e8ea8d1fbb8e4ad41a98707"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4361304b7e8ea8d1fbb8e4ad41a98707">fontTools.ttLib.woff2.WOFF2Writer._writeFlavorData</a></div><div class="ttdeci">_writeFlavorData(self)</div><div class="ttdef"><b>Definition</b> <a href="#l00484">woff2.py:484</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a4b451bebfa5fd912fad48d4db3bd66a3"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4b451bebfa5fd912fad48d4db3bd66a3">fontTools.ttLib.woff2.WOFF2Writer.tables</a></div><div class="ttdeci">tables</div><div class="ttdef"><b>Definition</b> <a href="#l00210">woff2.py:210</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a4cf13dd2f1070620565ceeb758d52ec4"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a4cf13dd2f1070620565ceeb758d52ec4">fontTools.ttLib.woff2.WOFF2Writer.ttFont</a></div><div class="ttdeci">ttFont</div><div class="ttdef"><b>Definition</b> <a href="#l00213">woff2.py:213</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a53df5e6408eb264d1ed49669445599d9"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a53df5e6408eb264d1ed49669445599d9">fontTools.ttLib.woff2.WOFF2Writer._setHeadTransformFlag</a></div><div class="ttdeci">_setHeadTransformFlag(self)</div><div class="ttdef"><b>Definition</b> <a href="#l00302">woff2.py:302</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a5500889b4a254e708a4e99d0bd4976c6"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a5500889b4a254e708a4e99d0bd4976c6">fontTools.ttLib.woff2.WOFF2Writer.numTables</a></div><div class="ttdeci">numTables</div><div class="ttdef"><b>Definition</b> <a href="#l00197">woff2.py:197</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a578dc9b754e5a2fe494838e28562af53"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a578dc9b754e5a2fe494838e28562af53">fontTools.ttLib.woff2.WOFF2Writer._packTableDirectory</a></div><div class="ttdeci">_packTableDirectory(self)</div><div class="ttdef"><b>Definition</b> <a href="#l00477">woff2.py:477</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a64cc91fa159d80d6bd44538abedf0fe6"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a64cc91fa159d80d6bd44538abedf0fe6">fontTools.ttLib.woff2.WOFF2Writer.length</a></div><div class="ttdeci">length</div><div class="ttdef"><b>Definition</b> <a href="#l00278">woff2.py:278</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a65c7b1a46d54b47c6c25af1ce4217f36"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a65c7b1a46d54b47c6c25af1ce4217f36">fontTools.ttLib.woff2.WOFF2Writer.reserved</a></div><div class="ttdeci">int reserved</div><div class="ttdef"><b>Definition</b> <a href="#l00280">woff2.py:280</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a697bf2fb69406e534a44ccaf97733588"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a697bf2fb69406e534a44ccaf97733588">fontTools.ttLib.woff2.WOFF2Writer.metaLength</a></div><div class="ttdeci">metaLength</div><div class="ttdef"><b>Definition</b> <a href="#l00450">woff2.py:450</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a6a5870a4537b88b1163175e35aacf776"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a6a5870a4537b88b1163175e35aacf776">fontTools.ttLib.woff2.WOFF2Writer.writeMasterChecksum</a></div><div class="ttdeci">writeMasterChecksum(self)</div><div class="ttdef"><b>Definition</b> <a href="#l00424">woff2.py:424</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a6c0a204543657547a9f432b69143c69c"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a6c0a204543657547a9f432b69143c69c">fontTools.ttLib.woff2.WOFF2Writer._calcTotalSize</a></div><div class="ttdeci">_calcTotalSize(self)</div><div class="ttdef"><b>Definition</b> <a href="#l00430">woff2.py:430</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a7dafa7dba671d2a98f0ac67cb71ef302"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a7dafa7dba671d2a98f0ac67cb71ef302">fontTools.ttLib.woff2.WOFF2Writer.signature</a></div><div class="ttdeci">signature</div><div class="ttdef"><b>Definition</b> <a href="#l00205">woff2.py:205</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a7e5a0c6339981f55548b7cb94cc2e4f5"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a7e5a0c6339981f55548b7cb94cc2e4f5">fontTools.ttLib.woff2.WOFF2Writer.privLength</a></div><div class="ttdeci">privLength</div><div class="ttdef"><b>Definition</b> <a href="#l00459">woff2.py:459</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a84bc6d517921d6e47ec2ee6b13556445"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a84bc6d517921d6e47ec2ee6b13556445">fontTools.ttLib.woff2.WOFF2Writer.transformBuffer</a></div><div class="ttdeci">transformBuffer</div><div class="ttdef"><b>Definition</b> <a href="#l00208">woff2.py:208</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a8acf1a59fea44b11db8957b9c3acb62c"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a8acf1a59fea44b11db8957b9c3acb62c">fontTools.ttLib.woff2.WOFF2Writer.directorySize</a></div><div class="ttdeci">directorySize</div><div class="ttdef"><b>Definition</b> <a href="#l00202">woff2.py:202</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a8f7cdbcb3f039cffe727be5b420ad6c0"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a8f7cdbcb3f039cffe727be5b420ad6c0">fontTools.ttLib.woff2.WOFF2Writer.privOffset</a></div><div class="ttdeci">int privOffset</div><div class="ttdef"><b>Definition</b> <a href="#l00458">woff2.py:458</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a926f618239c18b90e788738838b34bc6"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a926f618239c18b90e788738838b34bc6">fontTools.ttLib.woff2.WOFF2Writer.entrySelector</a></div><div class="ttdeci">entrySelector</div><div class="ttdef"><b>Definition</b> <a href="#l00402">woff2.py:402</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a99c6121112a0b4bb2947474aae20dd9b"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a99c6121112a0b4bb2947474aae20dd9b">fontTools.ttLib.woff2.WOFF2Writer.minorVersion</a></div><div class="ttdeci">minorVersion</div><div class="ttdef"><b>Definition</b> <a href="#l00279">woff2.py:279</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_a9a62754d9d30e8568ef7d852c96d5f04"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#a9a62754d9d30e8568ef7d852c96d5f04">fontTools.ttLib.woff2.WOFF2Writer.__setitem__</a></div><div class="ttdeci">__setitem__(self, tag, data)</div><div class="ttdef"><b>Definition</b> <a href="#l00215">woff2.py:215</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_aa205881ff360c6ee30aa1071dd302292"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#aa205881ff360c6ee30aa1071dd302292">fontTools.ttLib.woff2.WOFF2Writer._calcFlavorDataOffsetsAndSize</a></div><div class="ttdeci">_calcFlavorDataOffsetsAndSize(self, start)</div><div class="ttdef"><b>Definition</b> <a href="#l00440">woff2.py:440</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_aa4a1c076d74d749ff46421a9b8da516b"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#aa4a1c076d74d749ff46421a9b8da516b">fontTools.ttLib.woff2.WOFF2Writer.close</a></div><div class="ttdeci">close(self)</div><div class="ttdef"><b>Definition</b> <a href="#l00233">woff2.py:233</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_aa4b5ca86d1e053e883de25885109d186"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#aa4b5ca86d1e053e883de25885109d186">fontTools.ttLib.woff2.WOFF2Writer._compileTable</a></div><div class="ttdeci">_compileTable(self, tag)</div><div class="ttdef"><b>Definition</b> <a href="#l00329">woff2.py:329</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_aa56ae13f6ed386f361846f89023cff02"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#aa56ae13f6ed386f361846f89023cff02">fontTools.ttLib.woff2.WOFF2Writer.metaOrigLength</a></div><div class="ttdeci">metaOrigLength</div><div class="ttdef"><b>Definition</b> <a href="#l00445">woff2.py:445</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_ab0e634cd6ecfd852e1d82ebc4ffadf19"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#ab0e634cd6ecfd852e1d82ebc4ffadf19">fontTools.ttLib.woff2.WOFF2Writer.compressedMetaData</a></div><div class="ttdeci">str compressedMetaData</div><div class="ttdef"><b>Definition</b> <a href="#l00447">woff2.py:447</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_abaec3db88c38c60ed2b09b753630a519"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#abaec3db88c38c60ed2b09b753630a519">fontTools.ttLib.woff2.WOFF2Writer.rangeShift</a></div><div class="ttdeci">rangeShift</div><div class="ttdef"><b>Definition</b> <a href="#l00402">woff2.py:402</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_abe0200f474e33f4b87b0a713dcef58b4"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#abe0200f474e33f4b87b0a713dcef58b4">fontTools.ttLib.woff2.WOFF2Writer._decompileTable</a></div><div class="ttdeci">_decompileTable(self, tag)</div><div class="ttdef"><b>Definition</b> <a href="#l00309">woff2.py:309</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_ac9ac397f3ca0b3c02e9b898467de2e02"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#ac9ac397f3ca0b3c02e9b898467de2e02">fontTools.ttLib.woff2.WOFF2Writer._calcMasterChecksum</a></div><div class="ttdeci">_calcMasterChecksum(self)</div><div class="ttdef"><b>Definition</b> <a href="#l00395">woff2.py:395</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_ae458791a81224bec3966ca10facdafeb"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#ae458791a81224bec3966ca10facdafeb">fontTools.ttLib.woff2.WOFF2Writer._getVersion</a></div><div class="ttdeci">_getVersion(self)</div><div class="ttdef"><b>Definition</b> <a href="#l00465">woff2.py:465</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_ae53953393399bdc998555a71d8c5752a"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#ae53953393399bdc998555a71d8c5752a">fontTools.ttLib.woff2.WOFF2Writer.totalCompressedSize</a></div><div class="ttdeci">totalCompressedSize</div><div class="ttdef"><b>Definition</b> <a href="#l00277">woff2.py:277</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_aea67f3e9dc8892a6fa877e5f03837ffb"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#aea67f3e9dc8892a6fa877e5f03837ffb">fontTools.ttLib.woff2.WOFF2Writer.DirectoryEntry</a></div><div class="ttdeci">DirectoryEntry</div><div class="ttdef"><b>Definition</b> <a href="#l00203">woff2.py:203</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_aeced29b438c8336d839a6265e38cd703"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#aeced29b438c8336d839a6265e38cd703">fontTools.ttLib.woff2.WOFF2Writer.transformTable</a></div><div class="ttdeci">transformTable(self, tag)</div><div class="ttdef"><b>Definition</b> <a href="#l00373">woff2.py:373</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_af311722139e4ac0da4b6a63222713bb2"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#af311722139e4ac0da4b6a63222713bb2">fontTools.ttLib.woff2.WOFF2Writer._normaliseGlyfAndLoca</a></div><div class="ttdeci">_normaliseGlyfAndLoca(self, padding=4)</div><div class="ttdef"><b>Definition</b> <a href="#l00287">woff2.py:287</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_af7b88487211aa90d4e552a61e4ab8680"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#af7b88487211aa90d4e552a61e4ab8680">fontTools.ttLib.woff2.WOFF2Writer.metaOffset</a></div><div class="ttdeci">int metaOffset</div><div class="ttdef"><b>Definition</b> <a href="#l00446">woff2.py:446</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_afc7f1240a232fb881b7941a7fc6aa3b5"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#afc7f1240a232fb881b7941a7fc6aa3b5">fontTools.ttLib.woff2.WOFF2Writer.majorVersion</a></div><div class="ttdeci">majorVersion</div><div class="ttdef"><b>Definition</b> <a href="#l00279">woff2.py:279</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer_html_afcbafd27f126c4647ab7c68ba924263a"><div class="ttname"><a href="../../d4/dd5/classfontTools_1_1ttLib_1_1woff2_1_1WOFF2Writer.html#afcbafd27f126c4647ab7c68ba924263a">fontTools.ttLib.woff2.WOFF2Writer.totalSfntSize</a></div><div class="ttdeci">totalSfntSize</div><div class="ttdef"><b>Definition</b> <a href="#l00272">woff2.py:272</a></div></div>
<div class="ttc" id="aclassgetTableClass_html"><div class="ttname"><a href="../../de/d85/classgetTableClass.html">getTableClass</a></div></div>
<div class="ttc" id="anamespacefontTools_1_1misc_1_1arrayTools_html"><div class="ttname"><a href="../../d6/d90/namespacefontTools_1_1misc_1_1arrayTools.html">fontTools.misc.arrayTools</a></div><div class="ttdef"><b>Definition</b> <a href="../../d5/d03/arrayTools_8py_source.html#l00001">arrayTools.py:1</a></div></div>
<div class="ttc" id="anamespacefontTools_1_1misc_1_1textTools_html"><div class="ttname"><a href="../../da/df5/namespacefontTools_1_1misc_1_1textTools.html">fontTools.misc.textTools</a></div><div class="ttdef"><b>Definition</b> <a href="../../d2/d21/textTools_8py_source.html#l00001">textTools.py:1</a></div></div>
<div class="ttc" id="anamespacefontTools_1_1misc_html"><div class="ttname"><a href="../../dd/d81/namespacefontTools_1_1misc.html">fontTools.misc</a></div><div class="ttdef"><b>Definition</b> <a href="../../db/d26/fontTools_2misc_2____init_____8py_source.html#l00001">__init__.py:1</a></div></div>
<div class="ttc" id="anamespacefontTools_1_1ttLib_1_1sfnt_html"><div class="ttname"><a href="../../d7/d20/namespacefontTools_1_1ttLib_1_1sfnt.html">fontTools.ttLib.sfnt</a></div><div class="ttdef"><b>Definition</b> <a href="../../d3/d04/sfnt_8py_source.html#l00001">sfnt.py:1</a></div></div>
<div class="ttc" id="anamespacefontTools_1_1ttLib_1_1tables_html"><div class="ttname"><a href="../../d0/dfa/namespacefontTools_1_1ttLib_1_1tables.html">fontTools.ttLib.tables</a></div><div class="ttdef"><b>Definition</b> <a href="../../db/d9b/fontTools_2ttLib_2tables_2____init_____8py_source.html#l00001">__init__.py:1</a></div></div>
<div class="ttc" id="anamespacefontTools_1_1ttLib_1_1ttFont_html_a072239b151d038f849c80faeb13ee14f"><div class="ttname"><a href="../../df/d73/namespacefontTools_1_1ttLib_1_1ttFont.html#a072239b151d038f849c80faeb13ee14f">fontTools.ttLib.ttFont.getTableModule</a></div><div class="ttdeci">getTableModule(tag)</div><div class="ttdef"><b>Definition</b> <a href="../../da/d7f/ttFont_8py_source.html#l00873">ttFont.py:873</a></div></div>
<div class="ttc" id="anamespacefontTools_1_1ttLib_1_1ttFont_html_a873c2075b95e23022bb33b318a0810a9"><div class="ttname"><a href="../../df/d73/namespacefontTools_1_1ttLib_1_1ttFont.html#a873c2075b95e23022bb33b318a0810a9">fontTools.ttLib.ttFont.getSearchRange</a></div><div class="ttdeci">getSearchRange(n, itemSize=16)</div><div class="ttdef"><b>Definition</b> <a href="../../da/d7f/ttFont_8py_source.html#l01140">ttFont.py:1140</a></div></div>
<div class="ttc" id="anamespacefontTools_1_1ttLib_1_1woff2_html_a18fce2a2ac77d224095786812158efb6"><div class="ttname"><a href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#a18fce2a2ac77d224095786812158efb6">fontTools.ttLib.woff2.getKnownTagIndex</a></div><div class="ttdeci">getKnownTagIndex(tag)</div><div class="ttdef"><b>Definition</b> <a href="#l00642">woff2.py:642</a></div></div>
<div class="ttc" id="anamespacefontTools_1_1ttLib_1_1woff2_html_a4e521aa126269c9b982b6f68bdef8f9d"><div class="ttname"><a href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#a4e521aa126269c9b982b6f68bdef8f9d">fontTools.ttLib.woff2.unpack255UShort</a></div><div class="ttdeci">unpack255UShort(data)</div><div class="ttdef"><b>Definition</b> <a href="#l01431">woff2.py:1431</a></div></div>
<div class="ttc" id="anamespacefontTools_1_1ttLib_1_1woff2_html_a584559d45cdf91accedf0f5863fb75dd"><div class="ttname"><a href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#a584559d45cdf91accedf0f5863fb75dd">fontTools.ttLib.woff2.compress</a></div><div class="ttdeci">compress(input_file, output_file, transform_tables=None)</div><div class="ttdef"><b>Definition</b> <a href="#l01498">woff2.py:1498</a></div></div>
<div class="ttc" id="anamespacefontTools_1_1ttLib_1_1woff2_html_a6d671b0bb652cde6bd8bd0cac3ae8da4"><div class="ttname"><a href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#a6d671b0bb652cde6bd8bd0cac3ae8da4">fontTools.ttLib.woff2.unpackBase128</a></div><div class="ttdeci">unpackBase128(data)</div><div class="ttdef"><b>Definition</b> <a href="#l01346">woff2.py:1346</a></div></div>
<div class="ttc" id="anamespacefontTools_1_1ttLib_1_1woff2_html_a8e695eafebd8649b313cafffd00d47fb"><div class="ttname"><a href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#a8e695eafebd8649b313cafffd00d47fb">fontTools.ttLib.woff2.packBase128</a></div><div class="ttdeci">packBase128(n)</div><div class="ttdef"><b>Definition</b> <a href="#l01409">woff2.py:1409</a></div></div>
<div class="ttc" id="anamespacefontTools_1_1ttLib_1_1woff2_html_ac23118fbdfbb5926ce7b994871779c8f"><div class="ttname"><a href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#ac23118fbdfbb5926ce7b994871779c8f">fontTools.ttLib.woff2.base128Size</a></div><div class="ttdeci">base128Size(n)</div><div class="ttdef"><b>Definition</b> <a href="#l01391">woff2.py:1391</a></div></div>
<div class="ttc" id="anamespacefontTools_1_1ttLib_1_1woff2_html_ad8d4bd812e843bba21f2a3aee7f3352b"><div class="ttname"><a href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#ad8d4bd812e843bba21f2a3aee7f3352b">fontTools.ttLib.woff2.decompress</a></div><div class="ttdeci">decompress(input_file, output_file)</div><div class="ttdef"><b>Definition</b> <a href="#l01524">woff2.py:1524</a></div></div>
<div class="ttc" id="anamespacefontTools_1_1ttLib_1_1woff2_html_addc933d6962fd9e483cfbe0ba6f05269"><div class="ttname"><a href="../../db/d44/namespacefontTools_1_1ttLib_1_1woff2.html#addc933d6962fd9e483cfbe0ba6f05269">fontTools.ttLib.woff2.pack255UShort</a></div><div class="ttdeci">pack255UShort(value)</div><div class="ttdef"><b>Definition</b> <a href="#l01475">woff2.py:1475</a></div></div>
<div class="ttc" id="anamespacefontTools_1_1ttLib_html"><div class="ttname"><a href="../../d6/d58/namespacefontTools_1_1ttLib.html">fontTools.ttLib</a></div><div class="ttdef"><b>Definition</b> <a href="../../dd/d31/fontTools_2ttLib_2____init_____8py_source.html#l00001">__init__.py:1</a></div></div>
<div class="ttc" id="anamespacefontTools_1_1ttx_html"><div class="ttname"><a href="../../da/d01/namespacefontTools_1_1ttx.html">fontTools.ttx</a></div><div class="ttdef"><b>Definition</b> <a href="../../d5/d62/ttx_8py_source.html#l00001">ttx.py:1</a></div></div>
<div class="ttc" id="anamespacemain_html"><div class="ttname"><a href="../../d2/dc1/namespacemain.html">main</a></div><div class="ttdef"><b>Definition</b> <a href="../../d9/da6/replication_202__embedding_2main_8py_source.html#l00001">main.py:1</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_f6da99e2877b0632a7e4a834e7483fed.html">llm-scripts</a></li><li class="navelem"><a class="el" href="../../dir_70c99b0173b62e0b00f95d6bf5d77b0f.html">testing</a></li><li class="navelem"><a class="el" href="../../dir_c90555aa24febdaeb0b43db3ed65d5d9.html">hypothesis-testing</a></li><li class="navelem"><a class="el" href="../../dir_5d121c57859a2187a176663451f456b7.html">hyp-env</a></li><li class="navelem"><a class="el" href="../../dir_bd811e5d8688c3c2df683649a5255528.html">lib</a></li><li class="navelem"><a class="el" href="../../dir_ed8133538883844379882c9fac17a38e.html">python3.12</a></li><li class="navelem"><a class="el" href="../../dir_ec5d4580713abd487320f8eae4ae4e88.html">site-packages</a></li><li class="navelem"><a class="el" href="../../dir_c4d341538d3f7931a3933ed496353c3d.html">fontTools</a></li><li class="navelem"><a class="el" href="../../dir_8ed40003cabdaea86422dcf74dd50ed8.html">ttLib</a></li><li class="navelem"><b>woff2.py</b></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
