<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Code Cloning Analysis: /home/jam/Research/IRES-2025/dev/src/llm-scripts/testing/hypothesis-testing/hyp-env/lib/python3.12/site-packages/matplotlib/backends/backend_ps.py Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Code Cloning Analysis
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d2/d96/backend__ps_8py_source.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">backend_ps.py</div></div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno"><a class="line" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html">    1</a></span><span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="stringliteral">A PostScript backend, which can produce both PostScript .ps and .eps.</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span> </div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="keyword">import</span> bisect</div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="keyword">import</span> codecs</div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="keyword">import</span> datetime</div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="keyword">from</span> enum <span class="keyword">import</span> Enum</div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="keyword">import</span> functools</div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="keyword">from</span> io <span class="keyword">import</span> StringIO</div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="keyword">import</span> itertools</div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="keyword">import</span> logging</div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="keyword">import</span> math</div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="keyword">import</span> os</div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="keyword">import</span> pathlib</div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="keyword">import</span> shutil</div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="keyword">import</span> struct</div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="keyword">from</span> tempfile <span class="keyword">import</span> TemporaryDirectory</div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="keyword">import</span> textwrap</div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="keyword">import</span> time</div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span> </div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="keyword">import</span> fontTools</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span> </div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="keyword">from</span> matplotlib <span class="keyword">import</span> _api, cbook, _path, _text_helpers</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="keyword">from</span> <a class="code hl_namespace" href="../../db/d6e/namespacematplotlib_1_1__afm.html">matplotlib._afm</a> <span class="keyword">import</span> AFM</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="keyword">from</span> <a class="code hl_namespace" href="../../df/dee/namespacematplotlib_1_1backend__bases.html">matplotlib.backend_bases</a> <span class="keyword">import</span> (</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>    _Backend, FigureCanvasBase, FigureManagerBase, RendererBase)</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="keyword">from</span> <a class="code hl_namespace" href="../../d3/d3f/namespacematplotlib_1_1cbook.html">matplotlib.cbook</a> <span class="keyword">import</span> is_writable_file_like, file_requires_unicode</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="keyword">from</span> <a class="code hl_namespace" href="../../db/d4c/namespacematplotlib_1_1font__manager.html">matplotlib.font_manager</a> <span class="keyword">import</span> get_font</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="keyword">from</span> matplotlib.ft2font <span class="keyword">import</span> LoadFlags</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="keyword">from</span> <a class="code hl_namespace" href="../../d5/dc5/namespacematplotlib_1_1__mathtext__data.html">matplotlib._mathtext_data</a> <span class="keyword">import</span> uni2type1</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="keyword">from</span> <a class="code hl_namespace" href="../../d6/dd9/namespacematplotlib_1_1path.html">matplotlib.path</a> <span class="keyword">import</span> Path</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="keyword">from</span> <a class="code hl_namespace" href="../../da/df5/namespacematplotlib_1_1texmanager.html">matplotlib.texmanager</a> <span class="keyword">import</span> TexManager</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="keyword">from</span> <a class="code hl_namespace" href="../../d0/d6a/namespacematplotlib_1_1transforms.html">matplotlib.transforms</a> <span class="keyword">import</span> Affine2D</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="keyword">from</span> <a class="code hl_namespace" href="../../d8/d81/namespacematplotlib_1_1backends_1_1backend__mixed.html">matplotlib.backends.backend_mixed</a> <span class="keyword">import</span> MixedModeRenderer</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="keyword">from</span> . <span class="keyword">import</span> _backend_pdf_ps</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span> </div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span> </div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>_log = logging.getLogger(__name__)</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>debugPS = <span class="keyword">False</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span> </div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span> </div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>papersize = {<span class="stringliteral">&#39;letter&#39;</span>: (8.5, 11),</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>             <span class="stringliteral">&#39;legal&#39;</span>: (8.5, 14),</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>             <span class="stringliteral">&#39;ledger&#39;</span>: (11, 17),</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>             <span class="stringliteral">&#39;a0&#39;</span>: (33.11, 46.81),</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>             <span class="stringliteral">&#39;a1&#39;</span>: (23.39, 33.11),</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>             <span class="stringliteral">&#39;a2&#39;</span>: (16.54, 23.39),</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>             <span class="stringliteral">&#39;a3&#39;</span>: (11.69, 16.54),</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>             <span class="stringliteral">&#39;a4&#39;</span>: (8.27, 11.69),</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>             <span class="stringliteral">&#39;a5&#39;</span>: (5.83, 8.27),</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>             <span class="stringliteral">&#39;a6&#39;</span>: (4.13, 5.83),</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>             <span class="stringliteral">&#39;a7&#39;</span>: (2.91, 4.13),</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>             <span class="stringliteral">&#39;a8&#39;</span>: (2.05, 2.91),</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>             <span class="stringliteral">&#39;a9&#39;</span>: (1.46, 2.05),</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>             <span class="stringliteral">&#39;a10&#39;</span>: (1.02, 1.46),</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>             <span class="stringliteral">&#39;b0&#39;</span>: (40.55, 57.32),</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>             <span class="stringliteral">&#39;b1&#39;</span>: (28.66, 40.55),</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>             <span class="stringliteral">&#39;b2&#39;</span>: (20.27, 28.66),</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>             <span class="stringliteral">&#39;b3&#39;</span>: (14.33, 20.27),</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>             <span class="stringliteral">&#39;b4&#39;</span>: (10.11, 14.33),</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>             <span class="stringliteral">&#39;b5&#39;</span>: (7.16, 10.11),</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>             <span class="stringliteral">&#39;b6&#39;</span>: (5.04, 7.16),</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>             <span class="stringliteral">&#39;b7&#39;</span>: (3.58, 5.04),</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>             <span class="stringliteral">&#39;b8&#39;</span>: (2.51, 3.58),</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>             <span class="stringliteral">&#39;b9&#39;</span>: (1.76, 2.51),</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>             <span class="stringliteral">&#39;b10&#39;</span>: (1.26, 1.76)}</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span> </div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span><span class="keyword">def </span>_nums_to_str(*args, sep=&quot; &quot;):</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>    <span class="keywordflow">return</span> sep.join(f<span class="stringliteral">&quot;{arg:1.3f}&quot;</span>.rstrip(<span class="stringliteral">&quot;0&quot;</span>).rstrip(<span class="stringliteral">&quot;.&quot;</span>) <span class="keywordflow">for</span> arg <span class="keywordflow">in</span> args)</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span> </div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span> </div>
<div class="foldopen" id="foldopen00076" data-start="" data-end="">
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno"><a class="line" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#aa96b8b298fd713b04cb716bb576553dd">   76</a></span><span class="keyword">def </span><a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#aa96b8b298fd713b04cb716bb576553dd">_move_path_to_path_or_stream</a>(src, dst):</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span><span class="stringliteral">    Move the contents of file at *src* to path-or-filelike *dst*.</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span><span class="stringliteral">    If *dst* is a path, the metadata of *src* are *not* copied.</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>    <span class="keywordflow">if</span> is_writable_file_like(dst):</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>        fh = (open(src, encoding=<span class="stringliteral">&#39;latin-1&#39;</span>)</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>              <span class="keywordflow">if</span> file_requires_unicode(dst)</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>              <span class="keywordflow">else</span> open(src, <span class="stringliteral">&#39;rb&#39;</span>))</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>        <span class="keyword">with</span> fh:</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>            shutil.copyfileobj(fh, dst)</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>        shutil.move(src, dst, copy_function=shutil.copyfile)</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span> </div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span> </div>
</div>
<div class="foldopen" id="foldopen00092" data-start="" data-end="">
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno"><a class="line" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#aae72ead8d639ade3f2070bb1fbbbf211">   92</a></span><span class="keyword">def </span><a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#aae72ead8d639ade3f2070bb1fbbbf211">_font_to_ps_type3</a>(font_path, chars):</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span><span class="stringliteral">    Subset *chars* from the font at *font_path* into a Type 3 font.</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span><span class="stringliteral">    ----------</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span><span class="stringliteral">    font_path : path-like</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span><span class="stringliteral">        Path to the font to be subsetted.</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span><span class="stringliteral">    chars : str</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span><span class="stringliteral">        The characters to include in the subsetted font.</span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span><span class="stringliteral">    Returns</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span><span class="stringliteral">    -------</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span><span class="stringliteral">    str</span></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span><span class="stringliteral">        The string representation of a Type 3 font, which can be included</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span><span class="stringliteral">        verbatim into a PostScript file.</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    font = get_font(font_path, hinting_factor=1)</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>    glyph_ids = [font.get_char_index(c) <span class="keywordflow">for</span> c <span class="keywordflow">in</span> chars]</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span> </div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    preamble = <span class="stringliteral">&quot;&quot;&quot;\</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span><span class="stringliteral">%!PS-Adobe-3.0 Resource-Font</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span><span class="stringliteral">%%Creator: Converted from TrueType to Type 3 by Matplotlib.</span></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span><span class="stringliteral">10 dict begin</span></div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span><span class="stringliteral">/FontName /{font_name} def</span></div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span><span class="stringliteral">/PaintType 0 def</span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span><span class="stringliteral">/FontMatrix [{inv_units_per_em} 0 0 {inv_units_per_em} 0 0] def</span></div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span><span class="stringliteral">/FontBBox [{bbox}] def</span></div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span><span class="stringliteral">/FontType 3 def</span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span><span class="stringliteral">/Encoding [{encoding}] def</span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span><span class="stringliteral">/CharStrings {num_glyphs} dict dup begin</span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span><span class="stringliteral">/.notdef 0 def</span></div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span><span class="stringliteral">&quot;&quot;&quot;</span>.format(font_name=font.postscript_name,</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>           inv_units_per_em=1 / font.units_per_EM,</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>           bbox=<span class="stringliteral">&quot; &quot;</span>.join(map(str, font.bbox)),</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>           encoding=<span class="stringliteral">&quot; &quot;</span>.join(f<span class="stringliteral">&quot;/{font.get_glyph_name(glyph_id)}&quot;</span></div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>                             <span class="keywordflow">for</span> glyph_id <span class="keywordflow">in</span> glyph_ids),</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>           num_glyphs=len(glyph_ids) + 1)</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>    postamble = <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span><span class="stringliteral">end readonly def</span></div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span><span class="stringliteral">/BuildGlyph {</span></div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span><span class="stringliteral"> exch begin</span></div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span><span class="stringliteral"> CharStrings exch</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span><span class="stringliteral"> 2 copy known not {pop /.notdef} if</span></div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span><span class="stringliteral"> true 3 1 roll get exec</span></div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span><span class="stringliteral"> end</span></div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span><span class="stringliteral">} _d</span></div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span><span class="stringliteral">/BuildChar {</span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span><span class="stringliteral"> 1 index /Encoding get exch get</span></div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span><span class="stringliteral"> 1 index /BuildGlyph get exec</span></div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span><span class="stringliteral">} _d</span></div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span><span class="stringliteral">FontName currentdict end definefont pop</span></div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span><span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span> </div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    entries = []</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>    <span class="keywordflow">for</span> glyph_id <span class="keywordflow">in</span> glyph_ids:</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>        g = font.load_glyph(glyph_id, LoadFlags.NO_SCALE)</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>        v, c = font.get_path()</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>        entries.append(</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>            <span class="stringliteral">&quot;/%(name)s{%(bbox)s sc\n&quot;</span> % {</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>                <span class="stringliteral">&quot;name&quot;</span>: font.get_glyph_name(glyph_id),</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>                <span class="stringliteral">&quot;bbox&quot;</span>: <span class="stringliteral">&quot; &quot;</span>.join(map(str, [g.horiAdvance, 0, *g.bbox])),</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>            }</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>            + _path.convert_to_string(</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>                <span class="comment"># Convert back to TrueType&#39;s internal units (1/64&#39;s).</span></div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>                <span class="comment"># (Other dimensions are already in these units.)</span></div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>                <a class="code hl_class" href="../../d7/d6d/classmatplotlib_1_1path_1_1Path.html">Path</a>(v * 64, c), <span class="keywordtype">None</span>, <span class="keywordtype">None</span>, <span class="keyword">False</span>, <span class="keywordtype">None</span>, 0,</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>                <span class="comment"># No code for quad Beziers triggers auto-conversion to cubics.</span></div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>                <span class="comment"># Drop intermediate closepolys (relying on the outline</span></div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>                <span class="comment"># decomposer always explicitly moving to the closing point</span></div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>                <span class="comment"># first).</span></div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>                [b<span class="stringliteral">&quot;m&quot;</span>, b<span class="stringliteral">&quot;l&quot;</span>, b<span class="stringliteral">&quot;&quot;</span>, b<span class="stringliteral">&quot;c&quot;</span>, b<span class="stringliteral">&quot;&quot;</span>], <span class="keyword">True</span>).decode(<span class="stringliteral">&quot;ascii&quot;</span>)</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>            + <span class="stringliteral">&quot;ce} _d&quot;</span></div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>        )</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span> </div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    <span class="keywordflow">return</span> preamble + <span class="stringliteral">&quot;\n&quot;</span>.join(entries) + postamble</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span> </div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span> </div>
</div>
<div class="foldopen" id="foldopen00173" data-start="" data-end="">
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno"><a class="line" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#ab570363ea76de5a1c0bcca746df2fb38">  173</a></span><span class="keyword">def </span><a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#ab570363ea76de5a1c0bcca746df2fb38">_font_to_ps_type42</a>(font_path, chars, fh):</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span><span class="stringliteral">    Subset *chars* from the font at *font_path* into a Type 42 font at *fh*.</span></div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span><span class="stringliteral">    ----------</span></div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span><span class="stringliteral">    font_path : path-like</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span><span class="stringliteral">        Path to the font to be subsetted.</span></div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span><span class="stringliteral">    chars : str</span></div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span><span class="stringliteral">        The characters to include in the subsetted font.</span></div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span><span class="stringliteral">    fh : file-like</span></div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span><span class="stringliteral">        Where to write the font.</span></div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>    subset_str = <span class="stringliteral">&#39;&#39;</span>.join(chr(c) <span class="keywordflow">for</span> c <span class="keywordflow">in</span> chars)</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    _log.debug(<span class="stringliteral">&quot;SUBSET %s characters: %s&quot;</span>, font_path, subset_str)</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>        kw = {}</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>        <span class="comment"># fix this once we support loading more fonts from a collection</span></div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>        <span class="comment"># https://github.com/matplotlib/matplotlib/issues/3135#issuecomment-571085541</span></div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>        <span class="keywordflow">if</span> font_path.endswith(<span class="stringliteral">&#39;.ttc&#39;</span>):</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>            kw[<span class="stringliteral">&#39;fontNumber&#39;</span>] = 0</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>        <span class="keyword">with</span> (<a class="code hl_class" href="../../d8/d0d/classfontTools_1_1ttLib_1_1ttFont_1_1TTFont.html">fontTools.ttLib.TTFont</a>(font_path, **kw) <span class="keyword">as</span> font,</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>              _backend_pdf_ps.get_glyphs_subset(font_path, subset_str) <span class="keyword">as</span> subset):</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>            fontdata = _backend_pdf_ps.font_as_file(subset).getvalue()</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>            _log.debug(</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>                <span class="stringliteral">&quot;SUBSET %s %d -&gt; %d&quot;</span>, font_path, os.stat(font_path).st_size,</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>                len(fontdata)</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>            )</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>            fh.write(<a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#aa2851422480b7b5989c914cd964bf394">_serialize_type42</a>(font, subset, fontdata))</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>    <span class="keywordflow">except</span> RuntimeError:</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>        _log.warning(</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>            <span class="stringliteral">&quot;The PostScript backend does not currently support the selected font (%s).&quot;</span>,</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>            font_path)</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>        <span class="keywordflow">raise</span></div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span> </div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span> </div>
</div>
<div class="foldopen" id="foldopen00209" data-start="" data-end="">
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno"><a class="line" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#aa2851422480b7b5989c914cd964bf394">  209</a></span><span class="keyword">def </span><a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#aa2851422480b7b5989c914cd964bf394">_serialize_type42</a>(font, subset, fontdata):</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span><span class="stringliteral">    Output a PostScript Type-42 format representation of font</span></div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span><span class="stringliteral">    ----------</span></div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span><span class="stringliteral">    font : fontTools.ttLib.ttFont.TTFont</span></div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span><span class="stringliteral">        The original font object</span></div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span><span class="stringliteral">    subset : fontTools.ttLib.ttFont.TTFont</span></div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span><span class="stringliteral">        The subset font object</span></div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span><span class="stringliteral">    fontdata : bytes</span></div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span><span class="stringliteral">        The raw font data in TTF format</span></div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span><span class="stringliteral">    Returns</span></div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span><span class="stringliteral">    -------</span></div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span><span class="stringliteral">    str</span></div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span><span class="stringliteral">        The Type-42 formatted font</span></div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    version, breakpoints = <a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#aa87b294002871ac0a6ecec570266292b">_version_and_breakpoints</a>(font.get(<span class="stringliteral">&#39;loca&#39;</span>), fontdata)</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>    post = font[<span class="stringliteral">&#39;post&#39;</span>]</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>    name = font[<span class="stringliteral">&#39;name&#39;</span>]</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>    chars = <a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#aa767e4bbb51a6ee0e31a9382065571b3">_generate_charstrings</a>(subset)</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>    sfnts = <a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#a57163fc9a89ac0e4591be44aaf859abc">_generate_sfnts</a>(fontdata, subset, breakpoints)</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>    <span class="keywordflow">return</span> textwrap.dedent(f<span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span><span class="stringliteral">        %%!PS-TrueTypeFont-{version[0]}.{version[1]}-{font[&#39;head&#39;].fontRevision:.7f}</span></div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span><span class="stringliteral">        10 dict begin</span></div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span><span class="stringliteral">        /FontType 42 def</span></div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span><span class="stringliteral">        /FontMatrix [1 0 0 1 0 0] def</span></div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span><span class="stringliteral">        /FontName /{name.getDebugName(6)} def</span></div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span><span class="stringliteral">        /FontInfo 7 dict dup begin</span></div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span><span class="stringliteral">        /FullName ({name.getDebugName(4)}) def</span></div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span><span class="stringliteral">        /FamilyName ({name.getDebugName(1)}) def</span></div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span><span class="stringliteral">        /Version ({name.getDebugName(5)}) def</span></div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span><span class="stringliteral">        /ItalicAngle {post.italicAngle} def</span></div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span><span class="stringliteral">        /isFixedPitch {&#39;true&#39; if post.isFixedPitch else &#39;false&#39;} def</span></div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span><span class="stringliteral">        /UnderlinePosition {post.underlinePosition} def</span></div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span><span class="stringliteral">        /UnderlineThickness {post.underlineThickness} def</span></div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span><span class="stringliteral">        end readonly def</span></div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span><span class="stringliteral">        /Encoding StandardEncoding def</span></div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span><span class="stringliteral">        /FontBBox [{_nums_to_str(*_bounds(font))}] def</span></div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span><span class="stringliteral">        /PaintType 0 def</span></div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span><span class="stringliteral">        /CIDMap 0 def</span></div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span><span class="stringliteral">        {chars}</span></div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span><span class="stringliteral">        {sfnts}</span></div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span><span class="stringliteral">        FontName currentdict end definefont pop</span></div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span><span class="stringliteral">        &quot;&quot;&quot;</span>)</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span> </div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span> </div>
</div>
<div class="foldopen" id="foldopen00257" data-start="" data-end="">
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno"><a class="line" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#aa87b294002871ac0a6ecec570266292b">  257</a></span><span class="keyword">def </span><a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#aa87b294002871ac0a6ecec570266292b">_version_and_breakpoints</a>(loca, fontdata):</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span><span class="stringliteral">    Read the version number of the font and determine sfnts breakpoints.</span></div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span><span class="stringliteral">    When a TrueType font file is written as a Type 42 font, it has to be</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span><span class="stringliteral">    broken into substrings of at most 65535 bytes. These substrings must</span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span><span class="stringliteral">    begin at font table boundaries or glyph boundaries in the glyf table.</span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span><span class="stringliteral">    This function determines all possible breakpoints and it is the caller&#39;s</span></div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span><span class="stringliteral">    responsibility to do the splitting.</span></div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span><span class="stringliteral">    Helper function for _font_to_ps_type42.</span></div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span><span class="stringliteral">    ----------</span></div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span><span class="stringliteral">    loca : fontTools.ttLib._l_o_c_a.table__l_o_c_a or None</span></div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span><span class="stringliteral">        The loca table of the font if available</span></div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span><span class="stringliteral">    fontdata : bytes</span></div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span><span class="stringliteral">        The raw data of the font</span></div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span><span class="stringliteral">    Returns</span></div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span><span class="stringliteral">    -------</span></div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span><span class="stringliteral">    version : tuple[int, int]</span></div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span><span class="stringliteral">        A 2-tuple of the major version number and minor version number.</span></div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span><span class="stringliteral">    breakpoints : list[int]</span></div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span><span class="stringliteral">        The breakpoints is a sorted list of offsets into fontdata; if loca is not</span></div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span><span class="stringliteral">        available, just the table boundaries.</span></div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>    v1, v2, numTables = struct.unpack(<span class="stringliteral">&#39;&gt;3h&#39;</span>, fontdata[:6])</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>    version = (v1, v2)</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span> </div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>    tables = {}</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(numTables):</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>        tag, _, offset, _ = struct.unpack(<span class="stringliteral">&#39;&gt;4sIII&#39;</span>, fontdata[12 + i*16:12 + (i+1)*16])</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>        tables[tag.decode(<span class="stringliteral">&#39;ascii&#39;</span>)] = offset</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>    <span class="keywordflow">if</span> loca <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>        glyf_breakpoints = {tables[<span class="stringliteral">&#39;glyf&#39;</span>] + offset <span class="keywordflow">for</span> offset <span class="keywordflow">in</span> loca.locations[:-1]}</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>        glyf_breakpoints = set()</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>    breakpoints = sorted({*tables.values(), *glyf_breakpoints, len(fontdata)})</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span> </div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>    <span class="keywordflow">return</span> version, breakpoints</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span> </div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span> </div>
</div>
<div class="foldopen" id="foldopen00300" data-start="" data-end="">
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno"><a class="line" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#afab470e7df753ecc2dbc73c52a198fe7">  300</a></span><span class="keyword">def </span><a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#afab470e7df753ecc2dbc73c52a198fe7">_bounds</a>(font):</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span><span class="stringliteral">    Compute the font bounding box, as if all glyphs were written</span></div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span><span class="stringliteral">    at the same start position.</span></div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span><span class="stringliteral">    Helper function for _font_to_ps_type42.</span></div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span><span class="stringliteral">    ----------</span></div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span><span class="stringliteral">    font : fontTools.ttLib.ttFont.TTFont</span></div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span><span class="stringliteral">        The font</span></div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span><span class="stringliteral">    Returns</span></div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span><span class="stringliteral">    -------</span></div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span><span class="stringliteral">    tuple</span></div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span><span class="stringliteral">        (xMin, yMin, xMax, yMax) of the combined bounding box</span></div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span><span class="stringliteral">        of all the glyphs in the font</span></div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>    gs = font.getGlyphSet(<span class="keyword">False</span>)</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>    pen = <a class="code hl_class" href="../../d8/dc5/classfontTools_1_1pens_1_1boundsPen_1_1BoundsPen.html">fontTools.pens.boundsPen.BoundsPen</a>(gs)</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>    <span class="keywordflow">for</span> name <span class="keywordflow">in</span> gs.keys():</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>        gs[name].draw(pen)</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>    <span class="keywordflow">return</span> pen.bounds <span class="keywordflow">or</span> (0, 0, 0, 0)</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span> </div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span> </div>
</div>
<div class="foldopen" id="foldopen00325" data-start="" data-end="">
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno"><a class="line" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#aa767e4bbb51a6ee0e31a9382065571b3">  325</a></span><span class="keyword">def </span><a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#aa767e4bbb51a6ee0e31a9382065571b3">_generate_charstrings</a>(font):</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span><span class="stringliteral">    Transform font glyphs into CharStrings</span></div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span><span class="stringliteral">    Helper function for _font_to_ps_type42.</span></div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span><span class="stringliteral">    ----------</span></div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span><span class="stringliteral">    font : fontTools.ttLib.ttFont.TTFont</span></div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span><span class="stringliteral">        The font</span></div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span><span class="stringliteral">    Returns</span></div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span><span class="stringliteral">    -------</span></div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span><span class="stringliteral">    str</span></div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span><span class="stringliteral">        A definition of the CharStrings dictionary in PostScript</span></div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>    go = font.getGlyphOrder()</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>    s = f<span class="stringliteral">&#39;/CharStrings {len(go)} dict dup begin\n&#39;</span></div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    <span class="keywordflow">for</span> i, name <span class="keywordflow">in</span> enumerate(go):</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>        s += f<span class="stringliteral">&#39;/{name} {i} def\n&#39;</span></div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>    s += <span class="stringliteral">&#39;end readonly def&#39;</span></div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>    <span class="keywordflow">return</span> s</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span> </div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span> </div>
</div>
<div class="foldopen" id="foldopen00349" data-start="" data-end="">
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno"><a class="line" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#a57163fc9a89ac0e4591be44aaf859abc">  349</a></span><span class="keyword">def </span><a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#a57163fc9a89ac0e4591be44aaf859abc">_generate_sfnts</a>(fontdata, font, breakpoints):</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span><span class="stringliteral">    Transform font data into PostScript sfnts format.</span></div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span><span class="stringliteral">    Helper function for _font_to_ps_type42.</span></div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span><span class="stringliteral">    ----------</span></div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span><span class="stringliteral">    fontdata : bytes</span></div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span><span class="stringliteral">        The raw data of the font</span></div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span><span class="stringliteral">    font : fontTools.ttLib.ttFont.TTFont</span></div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span><span class="stringliteral">        The fontTools font object</span></div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span><span class="stringliteral">    breakpoints : list</span></div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span><span class="stringliteral">        Sorted offsets of possible breakpoints</span></div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span><span class="stringliteral">    Returns</span></div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span><span class="stringliteral">    -------</span></div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span><span class="stringliteral">    str</span></div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span><span class="stringliteral">        The sfnts array for the font definition, consisting</span></div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span><span class="stringliteral">        of hex-encoded strings in PostScript format</span></div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>    s = <span class="stringliteral">&#39;/sfnts[&#39;</span></div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>    pos = 0</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>    <span class="keywordflow">while</span> pos &lt; len(fontdata):</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>        i = bisect.bisect_left(breakpoints, pos + 65534)</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>        newpos = breakpoints[i-1]</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>        <span class="keywordflow">if</span> newpos &lt;= pos:</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>            <span class="comment"># have to accept a larger string</span></div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>            newpos = breakpoints[-1]</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>        s += f<span class="stringliteral">&#39;&lt;{fontdata[pos:newpos].hex()}00&gt;&#39;</span>  <span class="comment"># Always NUL terminate.</span></div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>        pos = newpos</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>    s += <span class="stringliteral">&#39;]def&#39;</span></div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>    <span class="keywordflow">return</span> <span class="stringliteral">&#39;\n&#39;</span>.join(s[i:i+100] <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(0, len(s), 100))</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span> </div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span> </div>
</div>
<div class="foldopen" id="foldopen00384" data-start="" data-end="">
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno"><a class="line" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#afc7f0336c221b19b191a017ec38f9727">  384</a></span><span class="keyword">def </span><a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#afc7f0336c221b19b191a017ec38f9727">_log_if_debug_on</a>(meth):</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span><span class="stringliteral">    Wrap `RendererPS` method *meth* to emit a PS comment with the method name,</span></div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span><span class="stringliteral">    if the global flag `debugPS` is set.</span></div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>    <span class="preprocessor">@functools.wraps(meth)</span></div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>    <span class="keyword">def </span>wrapper(self, *args, **kwargs):</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>        <span class="keywordflow">if</span> debugPS:</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>            self._pswriter.write(f<span class="stringliteral">&quot;% {meth.__name__}\n&quot;</span>)</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>        <span class="keywordflow">return</span> meth(self, *args, **kwargs)</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span> </div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>    <span class="keywordflow">return</span> wrapper</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span> </div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span> </div>
</div>
<div class="foldopen" id="foldopen00398" data-start="" data-end="">
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno"><a class="line" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html">  398</a></span><span class="keyword">class </span><a class="code hl_class" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html">RendererPS</a>(<a class="code hl_class" href="../../da/d77/classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase.html">_backend_pdf_ps.RendererPDFPSBase</a>):</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span><span class="stringliteral">    The renderer handles all the drawing primitives using a graphics</span></div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span><span class="stringliteral">    context instance that controls the colors/styles.</span></div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span> </div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>    _afm_font_dir = cbook._get_data_path(<span class="stringliteral">&quot;fonts/afm&quot;</span>)</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>    _use_afm_rc_name = <span class="stringliteral">&quot;ps.useafm&quot;</span></div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span> </div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>    <span class="keyword">def </span>__init__(self, width, height, pswriter, imagedpi=72):</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>        <span class="comment"># Although postscript itself is dpi independent, we need to inform the</span></div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>        <span class="comment"># image code about a requested dpi to generate high resolution images</span></div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>        <span class="comment"># and them scale them before embedding them.</span></div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>        super().__init__(width, height)</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ca6be2a3b8d2d4e468f0482875d1834">_pswriter</a> = pswriter</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>        <span class="keywordflow">if</span> mpl.rcParams[<span class="stringliteral">&#39;text.usetex&#39;</span>]:</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>            self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a337cd9c2a56fb7181ed9c59a820b02f8">textcnt</a> = 0</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>            self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a4db439150b547e0e7cc42d1c480763d0">psfrag</a> = []</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#af5ddad781f61ad35a408149cb1c498bf">imagedpi</a> = imagedpi</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span> </div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>        <span class="comment"># current renderer state (None=uninitialised)</span></div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a9741d4fc04c8a7b5d24d41fc80c82cff">color</a> = <span class="keywordtype">None</span></div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a0cab6a6010b3cce17d8378360d2c9613">linewidth</a> = <span class="keywordtype">None</span></div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a12770e854540717857c7f98ce02cf472">linejoin</a> = <span class="keywordtype">None</span></div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#adb33d0ab82babb05eef5425ff90956e1">linecap</a> = <span class="keywordtype">None</span></div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ab561503c959df24bc3ebba97207b26">linedash</a> = <span class="keywordtype">None</span></div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#acaa9986fe93740d50865b1ec99a0f502">fontname</a> = <span class="keywordtype">None</span></div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a3a73de7fa5c86f8bfa3971b3ffc9b5ae">fontsize</a> = <span class="keywordtype">None</span></div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a757bfe78bbdc3bab14cb4fd11ccc9aa8">_hatches</a> = {}</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a7b6134f13e2a787ff72a74a582ea7841">image_magnification</a> = imagedpi / 72</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a640119723c04ce66bd39fbfb00be3b49">_clip_paths</a> = {}</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a58e6f503475b512d57b61b23c97a8710">_path_collection_id</a> = 0</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span> </div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a054561c327369470c9c7e928edf84c10">_character_tracker</a> = <a class="code hl_class" href="../../d7/d30/classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1CharacterTracker.html">_backend_pdf_ps.CharacterTracker</a>()</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a4a4222f06b3b40605ac418d59c7a2afd">_logwarn_once</a> = functools.cache(_log.warning)</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span> </div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>    <span class="keyword">def </span>_is_transparent(self, rgb_or_rgba):</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>        <span class="keywordflow">if</span> rgb_or_rgba <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>            <span class="keywordflow">return</span> <span class="keyword">True</span>  <span class="comment"># Consistent with rgbFace semantics.</span></div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>        <span class="keywordflow">elif</span> len(rgb_or_rgba) == 4:</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>            <span class="keywordflow">if</span> rgb_or_rgba[3] == 0:</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>                <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>            <span class="keywordflow">if</span> rgb_or_rgba[3] != 1:</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>                self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a4a4222f06b3b40605ac418d59c7a2afd">_logwarn_once</a>(</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>                    <span class="stringliteral">&quot;The PostScript backend does not support transparency; &quot;</span></div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>                    <span class="stringliteral">&quot;partially transparent artists will be rendered opaque.&quot;</span>)</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>            <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>        <span class="keywordflow">else</span>:  <span class="comment"># len() == 3.</span></div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>            <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span> </div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>    <span class="keyword">def </span>set_color(self, r, g, b, store=True):</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>        <span class="keywordflow">if</span> (r, g, b) != self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a9741d4fc04c8a7b5d24d41fc80c82cff">color</a>:</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>            self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ca6be2a3b8d2d4e468f0482875d1834">_pswriter</a>.write(f<span class="stringliteral">&quot;{_nums_to_str(r)} setgray\n&quot;</span></div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>                                 <span class="keywordflow">if</span> r == g == b <span class="keywordflow">else</span></div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>                                 f<span class="stringliteral">&quot;{_nums_to_str(r, g, b)} setrgbcolor\n&quot;</span>)</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>            <span class="keywordflow">if</span> store:</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>                self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a9741d4fc04c8a7b5d24d41fc80c82cff">color</a> = (r, g, b)</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span> </div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>    <span class="keyword">def </span>set_linewidth(self, linewidth, store=True):</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>        linewidth = float(linewidth)</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>        <span class="keywordflow">if</span> linewidth != self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a0cab6a6010b3cce17d8378360d2c9613">linewidth</a>:</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>            self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ca6be2a3b8d2d4e468f0482875d1834">_pswriter</a>.write(f<span class="stringliteral">&quot;{_nums_to_str(linewidth)} setlinewidth\n&quot;</span>)</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>            <span class="keywordflow">if</span> store:</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>                self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a0cab6a6010b3cce17d8378360d2c9613">linewidth</a> = linewidth</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span> </div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>    <span class="preprocessor">@staticmethod</span></div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>    <span class="keyword">def </span>_linejoin_cmd(linejoin):</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>        <span class="comment"># Support for directly passing integer values is for backcompat.</span></div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>        linejoin = {<span class="stringliteral">&#39;miter&#39;</span>: 0, <span class="stringliteral">&#39;round&#39;</span>: 1, <span class="stringliteral">&#39;bevel&#39;</span>: 2, 0: 0, 1: 1, 2: 2}[</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>            linejoin]</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>        <span class="keywordflow">return</span> f<span class="stringliteral">&quot;{linejoin:d} setlinejoin\n&quot;</span></div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span> </div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>    <span class="keyword">def </span>set_linejoin(self, linejoin, store=True):</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>        <span class="keywordflow">if</span> linejoin != self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a12770e854540717857c7f98ce02cf472">linejoin</a>:</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>            self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ca6be2a3b8d2d4e468f0482875d1834">_pswriter</a>.write(self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#ada541e2271fc257a64325deb5c727731">_linejoin_cmd</a>(linejoin))</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>            <span class="keywordflow">if</span> store:</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>                self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a12770e854540717857c7f98ce02cf472">linejoin</a> = linejoin</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span> </div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>    <span class="preprocessor">@staticmethod</span></div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>    <span class="keyword">def </span>_linecap_cmd(linecap):</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>        <span class="comment"># Support for directly passing integer values is for backcompat.</span></div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>        linecap = {<span class="stringliteral">&#39;butt&#39;</span>: 0, <span class="stringliteral">&#39;round&#39;</span>: 1, <span class="stringliteral">&#39;projecting&#39;</span>: 2, 0: 0, 1: 1, 2: 2}[</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>            linecap]</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>        <span class="keywordflow">return</span> f<span class="stringliteral">&quot;{linecap:d} setlinecap\n&quot;</span></div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span> </div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>    <span class="keyword">def </span>set_linecap(self, linecap, store=True):</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>        <span class="keywordflow">if</span> linecap != self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#adb33d0ab82babb05eef5425ff90956e1">linecap</a>:</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>            self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ca6be2a3b8d2d4e468f0482875d1834">_pswriter</a>.write(self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a481eaf9535daf40cef8986de2bed0131">_linecap_cmd</a>(linecap))</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>            <span class="keywordflow">if</span> store:</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>                self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#adb33d0ab82babb05eef5425ff90956e1">linecap</a> = linecap</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span> </div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>    <span class="keyword">def </span>set_linedash(self, offset, seq, store=True):</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>        <span class="keywordflow">if</span> self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ab561503c959df24bc3ebba97207b26">linedash</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>            oldo, oldseq = self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ab561503c959df24bc3ebba97207b26">linedash</a></div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>            <span class="keywordflow">if</span> np.array_equal(seq, oldseq) <span class="keywordflow">and</span> oldo == offset:</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>                <span class="keywordflow">return</span></div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span> </div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ca6be2a3b8d2d4e468f0482875d1834">_pswriter</a>.write(f<span class="stringliteral">&quot;[{_nums_to_str(*seq)}] {_nums_to_str(offset)} setdash\n&quot;</span></div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>                             <span class="keywordflow">if</span> seq <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> len(seq) <span class="keywordflow">else</span></div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>                             <span class="stringliteral">&quot;[] 0 setdash\n&quot;</span>)</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>        <span class="keywordflow">if</span> store:</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>            self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ab561503c959df24bc3ebba97207b26">linedash</a> = (offset, seq)</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span> </div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>    <span class="keyword">def </span>set_font(self, fontname, fontsize, store=True):</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>        <span class="keywordflow">if</span> (fontname, fontsize) != (self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#acaa9986fe93740d50865b1ec99a0f502">fontname</a>, self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a3a73de7fa5c86f8bfa3971b3ffc9b5ae">fontsize</a>):</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>            self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ca6be2a3b8d2d4e468f0482875d1834">_pswriter</a>.write(f<span class="stringliteral">&quot;/{fontname} {fontsize:1.3f} selectfont\n&quot;</span>)</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>            <span class="keywordflow">if</span> store:</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>                self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#acaa9986fe93740d50865b1ec99a0f502">fontname</a> = fontname</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>                self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a3a73de7fa5c86f8bfa3971b3ffc9b5ae">fontsize</a> = fontsize</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span> </div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>    <span class="keyword">def </span>create_hatch(self, hatch, linewidth):</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>        sidelen = 72</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>        <span class="keywordflow">if</span> hatch <span class="keywordflow">in</span> self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a757bfe78bbdc3bab14cb4fd11ccc9aa8">_hatches</a>:</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>            <span class="keywordflow">return</span> self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a757bfe78bbdc3bab14cb4fd11ccc9aa8">_hatches</a>[hatch]</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>        name = <span class="stringliteral">&#39;H%d&#39;</span> % len(self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a757bfe78bbdc3bab14cb4fd11ccc9aa8">_hatches</a>)</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>        pageheight = self.<a class="code hl_variable" href="../../da/d77/classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase.html#a131284b65ec191c070a364d1e1118555">height</a> * 72</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ca6be2a3b8d2d4e468f0482875d1834">_pswriter</a>.write(f<span class="stringliteral">&quot;&quot;&quot;\</span></div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span><span class="stringliteral">  &lt;&lt; /PatternType 1</span></div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span><span class="stringliteral">     /PaintType 2</span></div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span><span class="stringliteral">     /TilingType 2</span></div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span><span class="stringliteral">     /BBox[0 0 {sidelen:d} {sidelen:d}]</span></div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span><span class="stringliteral">     /XStep {sidelen:d}</span></div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span><span class="stringliteral">     /YStep {sidelen:d}</span></div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span><span class="stringliteral">     /PaintProc {{</span></div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span><span class="stringliteral">        pop</span></div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span><span class="stringliteral">        {linewidth:g} setlinewidth</span></div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span><span class="stringliteral">{self._convert_path(Path.hatch(hatch), Affine2D().scale(sidelen), simplify=False)}</span></div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span><span class="stringliteral">        gsave</span></div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span><span class="stringliteral">        fill</span></div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span><span class="stringliteral">        grestore</span></div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span><span class="stringliteral">        stroke</span></div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span><span class="stringliteral">     }} bind</span></div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span><span class="stringliteral">   &gt;&gt;</span></div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span><span class="stringliteral">   matrix</span></div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span><span class="stringliteral">   0 {pageheight:g} translate</span></div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span><span class="stringliteral">   makepattern</span></div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span><span class="stringliteral">   /{name} exch def</span></div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span><span class="stringliteral">&quot;&quot;&quot;</span>)</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a757bfe78bbdc3bab14cb4fd11ccc9aa8">_hatches</a>[hatch] = name</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>        <span class="keywordflow">return</span> name</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span> </div>
<div class="foldopen" id="foldopen00540" data-start="" data-end="">
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno"><a class="line" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#ae30356702ba1b1109b1686f1441bc612">  540</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#ae30356702ba1b1109b1686f1441bc612">get_image_magnification</a>(self):</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span><span class="stringliteral">        Get the factor by which to magnify images passed to draw_image.</span></div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span><span class="stringliteral">        Allows a backend to have images at a different resolution to other</span></div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span><span class="stringliteral">        artists.</span></div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>        <span class="keywordflow">return</span> self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a7b6134f13e2a787ff72a74a582ea7841">image_magnification</a></div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span> </div>
</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>    <span class="keyword">def </span>_convert_path(self, path, transform, clip=False, simplify=None):</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>        <span class="keywordflow">if</span> clip:</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>            clip = (0.0, 0.0, self.<a class="code hl_variable" href="../../da/d77/classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase.html#a55856d35dcfdf98307cb10fb3b1643ba">width</a> * 72.0, self.<a class="code hl_variable" href="../../da/d77/classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase.html#a131284b65ec191c070a364d1e1118555">height</a> * 72.0)</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>            clip = <span class="keywordtype">None</span></div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>        <span class="keywordflow">return</span> _path.convert_to_string(</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>            path, transform, clip, simplify, <span class="keywordtype">None</span>,</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>            6, [b<span class="stringliteral">&quot;m&quot;</span>, b<span class="stringliteral">&quot;l&quot;</span>, b<span class="stringliteral">&quot;&quot;</span>, b<span class="stringliteral">&quot;c&quot;</span>, b<span class="stringliteral">&quot;cl&quot;</span>], <span class="keyword">True</span>).decode(<span class="stringliteral">&quot;ascii&quot;</span>)</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span> </div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>    <span class="keyword">def </span>_get_clip_cmd(self, gc):</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>        clip = []</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>        rect = gc.get_clip_rectangle()</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>        <span class="keywordflow">if</span> rect <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>            clip.append(f<span class="stringliteral">&quot;{_nums_to_str(*rect.p0, *rect.size)} rectclip\n&quot;</span>)</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>        path, trf = gc.get_clip_path()</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>        <span class="keywordflow">if</span> path <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>            key = (path, id(trf))</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>            custom_clip_cmd = self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a640119723c04ce66bd39fbfb00be3b49">_clip_paths</a>.get(key)</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>            <span class="keywordflow">if</span> custom_clip_cmd <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>                custom_clip_cmd = <span class="stringliteral">&quot;c%d&quot;</span> % len(self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a640119723c04ce66bd39fbfb00be3b49">_clip_paths</a>)</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>                self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ca6be2a3b8d2d4e468f0482875d1834">_pswriter</a>.write(f<span class="stringliteral">&quot;&quot;&quot;\</span></div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span><span class="stringliteral">/{custom_clip_cmd} {{</span></div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span><span class="stringliteral">{self._convert_path(path, trf, simplify=False)}</span></div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span><span class="stringliteral">clip</span></div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span><span class="stringliteral">newpath</span></div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span><span class="stringliteral">}} bind def</span></div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span><span class="stringliteral">&quot;&quot;&quot;</span>)</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>                self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a640119723c04ce66bd39fbfb00be3b49">_clip_paths</a>[key] = custom_clip_cmd</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>            clip.append(f<span class="stringliteral">&quot;{custom_clip_cmd}\n&quot;</span>)</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>.join(clip)</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span> </div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>    <span class="preprocessor">@_log_if_debug_on</span></div>
<div class="foldopen" id="foldopen00580" data-start="" data-end="">
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno"><a class="line" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a57b06323c0ea632d4e60d96282caba3b">  580</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a57b06323c0ea632d4e60d96282caba3b">draw_image</a>(self, gc, x, y, im, transform=None):</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>        <span class="comment"># docstring inherited</span></div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span> </div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>        h, w = im.shape[:2]</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>        imagecmd = <span class="stringliteral">&quot;false 3 colorimage&quot;</span></div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>        data = im[::-1, :, :3]  <span class="comment"># Vertically flipped rgb values.</span></div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>        hexdata = data.tobytes().hex(<span class="stringliteral">&quot;\n&quot;</span>, -64)  <span class="comment"># Linewrap to 128 chars.</span></div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span> </div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>        <span class="keywordflow">if</span> transform <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>            matrix = <span class="stringliteral">&quot;1 0 0 1 0 0&quot;</span></div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>            xscale = w / self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a7b6134f13e2a787ff72a74a582ea7841">image_magnification</a></div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>            yscale = h / self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a7b6134f13e2a787ff72a74a582ea7841">image_magnification</a></div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>            matrix = <span class="stringliteral">&quot; &quot;</span>.join(map(str, transform.frozen().to_values()))</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>            xscale = 1.0</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>            yscale = 1.0</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span> </div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ca6be2a3b8d2d4e468f0482875d1834">_pswriter</a>.write(f<span class="stringliteral">&quot;&quot;&quot;\</span></div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span><span class="stringliteral">gsave</span></div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span><span class="stringliteral">{self._get_clip_cmd(gc)}</span></div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span><span class="stringliteral">{x:g} {y:g} translate</span></div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span><span class="stringliteral">[{matrix}] concat</span></div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span><span class="stringliteral">{xscale:g} {yscale:g} scale</span></div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span><span class="stringliteral">/DataString {w:d} string def</span></div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span><span class="stringliteral">{w:d} {h:d} 8 [ {w:d} 0 0 -{h:d} 0 {h:d} ]</span></div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span><span class="stringliteral">{{</span></div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span><span class="stringliteral">currentfile DataString readhexstring pop</span></div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span><span class="stringliteral">}} bind {imagecmd}</span></div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span><span class="stringliteral">{hexdata}</span></div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span><span class="stringliteral">grestore</span></div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span><span class="stringliteral">&quot;&quot;&quot;</span>)</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span> </div>
</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>    <span class="preprocessor">@_log_if_debug_on</span></div>
<div class="foldopen" id="foldopen00613" data-start="" data-end="">
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno"><a class="line" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#ac862e671995010ba90eb5d916bf82168">  613</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#ac862e671995010ba90eb5d916bf82168">draw_path</a>(self, gc, path, transform, rgbFace=None):</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>        <span class="comment"># docstring inherited</span></div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>        clip = rgbFace <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> gc.get_hatch_path() <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>        simplify = path.should_simplify <span class="keywordflow">and</span> clip</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>        ps = self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a2810ab9009dbdb0e0cc9cfea9279236d">_convert_path</a>(path, transform, clip=clip, simplify=simplify)</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>        self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#affed4a1d8eeb052f2d043fc7b9ca0a0a">_draw_ps</a>(ps, gc, rgbFace)</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span> </div>
</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>    <span class="preprocessor">@_log_if_debug_on</span></div>
<div class="foldopen" id="foldopen00621" data-start="" data-end="">
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno"><a class="line" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a5f75886be700b29a8ad011f4552a6f77">  621</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a5f75886be700b29a8ad011f4552a6f77">draw_markers</a>(</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>            self, gc, marker_path, marker_trans, path, trans, rgbFace=None):</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>        <span class="comment"># docstring inherited</span></div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span> </div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>        ps_color = (</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>            <span class="keywordtype">None</span></div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>            <span class="keywordflow">if</span> self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#aa9044e3440d679d0851ccf72b1e3e157">_is_transparent</a>(rgbFace)</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>            <span class="keywordflow">else</span> f<span class="stringliteral">&#39;{_nums_to_str(rgbFace[0])} setgray&#39;</span></div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>            <span class="keywordflow">if</span> rgbFace[0] == rgbFace[1] == rgbFace[2]</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>            <span class="keywordflow">else</span> f<span class="stringliteral">&#39;{_nums_to_str(*rgbFace[:3])} setrgbcolor&#39;</span>)</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span> </div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>        <span class="comment"># construct the generic marker command:</span></div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span> </div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>        <span class="comment"># don&#39;t want the translate to be global</span></div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>        ps_cmd = [<span class="stringliteral">&#39;/o {&#39;</span>, <span class="stringliteral">&#39;gsave&#39;</span>, <span class="stringliteral">&#39;newpath&#39;</span>, <span class="stringliteral">&#39;translate&#39;</span>]</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span> </div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>        lw = gc.get_linewidth()</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>        alpha = (gc.get_alpha()</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>                 <span class="keywordflow">if</span> gc.get_forced_alpha() <span class="keywordflow">or</span> len(gc.get_rgb()) == 3</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>                 <span class="keywordflow">else</span> gc.get_rgb()[3])</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>        stroke = lw &gt; 0 <span class="keywordflow">and</span> alpha &gt; 0</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>        <span class="keywordflow">if</span> stroke:</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>            ps_cmd.append(<span class="stringliteral">&#39;%.1f setlinewidth&#39;</span> % lw)</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>            ps_cmd.append(self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#ada541e2271fc257a64325deb5c727731">_linejoin_cmd</a>(gc.get_joinstyle()))</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>            ps_cmd.append(self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a481eaf9535daf40cef8986de2bed0131">_linecap_cmd</a>(gc.get_capstyle()))</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span> </div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>        ps_cmd.append(self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a2810ab9009dbdb0e0cc9cfea9279236d">_convert_path</a>(marker_path, marker_trans,</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>                                         simplify=<span class="keyword">False</span>))</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span> </div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>        <span class="keywordflow">if</span> rgbFace:</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>            <span class="keywordflow">if</span> stroke:</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>                ps_cmd.append(<span class="stringliteral">&#39;gsave&#39;</span>)</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>            <span class="keywordflow">if</span> ps_color:</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>                ps_cmd.extend([ps_color, <span class="stringliteral">&#39;fill&#39;</span>])</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>            <span class="keywordflow">if</span> stroke:</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>                ps_cmd.append(<span class="stringliteral">&#39;grestore&#39;</span>)</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span> </div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>        <span class="keywordflow">if</span> stroke:</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>            ps_cmd.append(<span class="stringliteral">&#39;stroke&#39;</span>)</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>        ps_cmd.extend([<span class="stringliteral">&#39;grestore&#39;</span>, <span class="stringliteral">&#39;} bind def&#39;</span>])</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span> </div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>        <span class="keywordflow">for</span> vertices, code <span class="keywordflow">in</span> path.iter_segments(</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>                trans,</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>                clip=(0, 0, self.<a class="code hl_variable" href="../../da/d77/classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase.html#a55856d35dcfdf98307cb10fb3b1643ba">width</a>*72, self.<a class="code hl_variable" href="../../da/d77/classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase.html#a131284b65ec191c070a364d1e1118555">height</a>*72),</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>                simplify=<span class="keyword">False</span>):</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>            <span class="keywordflow">if</span> len(vertices):</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>                x, y = vertices[-2:]</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>                ps_cmd.append(f<span class="stringliteral">&quot;{x:g} {y:g} o&quot;</span>)</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span> </div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>        ps = <span class="stringliteral">&#39;\n&#39;</span>.join(ps_cmd)</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>        self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#affed4a1d8eeb052f2d043fc7b9ca0a0a">_draw_ps</a>(ps, gc, rgbFace, fill=<span class="keyword">False</span>, stroke=<span class="keyword">False</span>)</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span> </div>
</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>    <span class="preprocessor">@_log_if_debug_on</span></div>
<div class="foldopen" id="foldopen00674" data-start="" data-end="">
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno"><a class="line" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#af1844bfbe6f6a7eee348d70f8cf566e1">  674</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#af1844bfbe6f6a7eee348d70f8cf566e1">draw_path_collection</a>(self, gc, master_transform, paths, all_transforms,</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>                             offsets, offset_trans, facecolors, edgecolors,</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>                             linewidths, linestyles, antialiaseds, urls,</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>                             offset_position):</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>        <span class="comment"># Is the optimization worth it? Rough calculation:</span></div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>        <span class="comment"># cost of emitting a path in-line is</span></div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>        <span class="comment">#     (len_path + 2) * uses_per_path</span></div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>        <span class="comment"># cost of definition+use is</span></div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>        <span class="comment">#     (len_path + 3) + 3 * uses_per_path</span></div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>        len_path = len(paths[0].vertices) <span class="keywordflow">if</span> len(paths) &gt; 0 <span class="keywordflow">else</span> 0</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>        uses_per_path = self.<a class="code hl_function" href="../../d0/da8/classmatplotlib_1_1backend__bases_1_1RendererBase.html#acc5626c67cc5540e78d9b5837d2afa79">_iter_collection_uses_per_path</a>(</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>            paths, all_transforms, offsets, facecolors, edgecolors)</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>        should_do_optimization = \</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>            len_path + 3 * uses_per_path + 3 &lt; (len_path + 2) * uses_per_path</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> should_do_optimization:</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>            <span class="keywordflow">return</span> RendererBase.draw_path_collection(</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>                self, gc, master_transform, paths, all_transforms,</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>                offsets, offset_trans, facecolors, edgecolors,</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>                linewidths, linestyles, antialiaseds, urls,</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>                offset_position)</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span> </div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>        path_codes = []</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>        <span class="keywordflow">for</span> i, (path, transform) <span class="keywordflow">in</span> enumerate(self.<a class="code hl_function" href="../../d0/da8/classmatplotlib_1_1backend__bases_1_1RendererBase.html#a17c473534904023236d40ef772cc239a">_iter_collection_raw_paths</a>(</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>                master_transform, paths, all_transforms)):</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>            name = <span class="stringliteral">&#39;p%d_%d&#39;</span> % (self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a58e6f503475b512d57b61b23c97a8710">_path_collection_id</a>, i)</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>            path_bytes = self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a2810ab9009dbdb0e0cc9cfea9279236d">_convert_path</a>(path, transform, simplify=<span class="keyword">False</span>)</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>            self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ca6be2a3b8d2d4e468f0482875d1834">_pswriter</a>.write(f<span class="stringliteral">&quot;&quot;&quot;\</span></div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span><span class="stringliteral">/{name} {{</span></div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span><span class="stringliteral">newpath</span></div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span><span class="stringliteral">translate</span></div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span><span class="stringliteral">{path_bytes}</span></div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span><span class="stringliteral">}} bind def</span></div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span><span class="stringliteral">&quot;&quot;&quot;</span>)</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>            path_codes.append(name)</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span> </div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>        <span class="keywordflow">for</span> xo, yo, path_id, gc0, rgbFace <span class="keywordflow">in</span> self.<a class="code hl_function" href="../../d0/da8/classmatplotlib_1_1backend__bases_1_1RendererBase.html#ad4885c56245f1820b77fae84e386fc07">_iter_collection</a>(</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>                gc, path_codes, offsets, offset_trans,</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>                facecolors, edgecolors, linewidths, linestyles,</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>                antialiaseds, urls, offset_position):</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>            ps = f<span class="stringliteral">&quot;{xo:g} {yo:g} {path_id}&quot;</span></div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>            self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#affed4a1d8eeb052f2d043fc7b9ca0a0a">_draw_ps</a>(ps, gc0, rgbFace)</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span> </div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a58e6f503475b512d57b61b23c97a8710">_path_collection_id</a> += 1</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span> </div>
</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>    <span class="preprocessor">@_log_if_debug_on</span></div>
<div class="foldopen" id="foldopen00719" data-start="" data-end="">
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno"><a class="line" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a8dc7ed4db78badc02959c9c29a3ff212">  719</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a8dc7ed4db78badc02959c9c29a3ff212">draw_tex</a>(self, gc, x, y, s, prop, angle, *, mtext=None):</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>        <span class="comment"># docstring inherited</span></div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>        <span class="keywordflow">if</span> self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#aa9044e3440d679d0851ccf72b1e3e157">_is_transparent</a>(gc.get_rgb()):</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>            <span class="keywordflow">return</span>  <span class="comment"># Special handling for fully transparent.</span></div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span> </div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasattr(self, <span class="stringliteral">&quot;psfrag&quot;</span>):</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>            self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a4a4222f06b3b40605ac418d59c7a2afd">_logwarn_once</a>(</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>                <span class="stringliteral">&quot;The PS backend determines usetex status solely based on &quot;</span></div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>                <span class="stringliteral">&quot;rcParams[&#39;text.usetex&#39;] and does not support having &quot;</span></div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>                <span class="stringliteral">&quot;usetex=True only for some elements; this element will thus &quot;</span></div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>                <span class="stringliteral">&quot;be rendered as if usetex=False.&quot;</span>)</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>            self.<a class="code hl_function" href="../../d0/da8/classmatplotlib_1_1backend__bases_1_1RendererBase.html#a5eaf90d1255ec46894a498109fcba232">draw_text</a>(gc, x, y, s, prop, angle, <span class="keyword">False</span>, mtext)</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>            <span class="keywordflow">return</span></div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span> </div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>        w, h, bl = self.<a class="code hl_function" href="../../d0/da8/classmatplotlib_1_1backend__bases_1_1RendererBase.html#a5949e6973c36e18d99075c10481b4d91">get_text_width_height_descent</a>(s, prop, ismath=<span class="stringliteral">&quot;TeX&quot;</span>)</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>        fontsize = prop.get_size_in_points()</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>        thetext = <span class="stringliteral">&#39;psmarker%d&#39;</span> % self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a337cd9c2a56fb7181ed9c59a820b02f8">textcnt</a></div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>        color = _nums_to_str(*gc.get_rgb()[:3], sep=<span class="stringliteral">&#39;,&#39;</span>)</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>        fontcmd = {<span class="stringliteral">&#39;sans-serif&#39;</span>: <span class="stringliteral">r&#39;{\sffamily %s}&#39;</span>,</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>                   <span class="stringliteral">&#39;monospace&#39;</span>: <span class="stringliteral">r&#39;{\ttfamily %s}&#39;</span>}.get(</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>                       mpl.rcParams[<span class="stringliteral">&#39;font.family&#39;</span>][0], <span class="stringliteral">r&#39;{\rmfamily %s}&#39;</span>)</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>        s = fontcmd % s</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>        tex = <span class="stringliteral">r&#39;\color[rgb]{%s} %s&#39;</span> % (color, s)</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span> </div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>        <span class="comment"># Stick to bottom-left alignment, so subtract descent from the text-normal</span></div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>        <span class="comment"># direction since text is normally positioned by its baseline.</span></div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>        rangle = np.radians(angle + 90)</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>        pos = _nums_to_str(x - bl * np.cos(rangle), y - bl * np.sin(rangle))</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a4db439150b547e0e7cc42d1c480763d0">psfrag</a>.append(</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>            <span class="stringliteral">r&#39;\psfrag{%s}[bl][bl][1][%f]{\fontsize{%f}{%f}%s}&#39;</span> % (</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>                thetext, angle, fontsize, fontsize*1.25, tex))</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span> </div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ca6be2a3b8d2d4e468f0482875d1834">_pswriter</a>.write(f<span class="stringliteral">&quot;&quot;&quot;\</span></div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span><span class="stringliteral">gsave</span></div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span><span class="stringliteral">{pos} moveto</span></div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span><span class="stringliteral">({thetext})</span></div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span><span class="stringliteral">show</span></div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span><span class="stringliteral">grestore</span></div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span><span class="stringliteral">&quot;&quot;&quot;</span>)</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a337cd9c2a56fb7181ed9c59a820b02f8">textcnt</a> += 1</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span> </div>
</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>    <span class="preprocessor">@_log_if_debug_on</span></div>
<div class="foldopen" id="foldopen00761" data-start="" data-end="">
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno"><a class="line" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a8134de56b3ea98eb7772ba46c4ecbdff">  761</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a8134de56b3ea98eb7772ba46c4ecbdff">draw_text</a>(self, gc, x, y, s, prop, angle, ismath=False, mtext=None):</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>        <span class="comment"># docstring inherited</span></div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span> </div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>        <span class="keywordflow">if</span> self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#aa9044e3440d679d0851ccf72b1e3e157">_is_transparent</a>(gc.get_rgb()):</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>            <span class="keywordflow">return</span>  <span class="comment"># Special handling for fully transparent.</span></div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span> </div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>        <span class="keywordflow">if</span> ismath == <span class="stringliteral">&#39;TeX&#39;</span>:</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>            <span class="keywordflow">return</span> self.<a class="code hl_function" href="../../d0/da8/classmatplotlib_1_1backend__bases_1_1RendererBase.html#adf772b793ed6652222aca7d21d8a0ae6">draw_tex</a>(gc, x, y, s, prop, angle)</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span> </div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>        <span class="keywordflow">if</span> ismath:</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>            <span class="keywordflow">return</span> self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a4b29ab79f42b9e94a106c9ac463cf245">draw_mathtext</a>(gc, x, y, s, prop, angle)</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span> </div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>        stream = []  <span class="comment"># list of (ps_name, x, char_name)</span></div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span> </div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>        <span class="keywordflow">if</span> mpl.rcParams[<span class="stringliteral">&#39;ps.useafm&#39;</span>]:</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>            font = self.<a class="code hl_function" href="../../da/d77/classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase.html#aa8087369e7d3e0e11b20b5ec9630cceb">_get_font_afm</a>(prop)</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>            ps_name = (font.postscript_name.encode(<span class="stringliteral">&quot;ascii&quot;</span>, <span class="stringliteral">&quot;replace&quot;</span>)</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>                        .decode(<span class="stringliteral">&quot;ascii&quot;</span>))</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>            scale = 0.001 * prop.get_size_in_points()</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>            thisx = 0</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>            last_name = <span class="keywordtype">None</span>  <span class="comment"># kerns returns 0 for None.</span></div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>            <span class="keywordflow">for</span> c <span class="keywordflow">in</span> s:</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>                name = uni2type1.get(ord(c), f<span class="stringliteral">&quot;uni{ord(c):04X}&quot;</span>)</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>                <span class="keywordflow">try</span>:</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>                    width = font.get_width_from_char_name(name)</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>                <span class="keywordflow">except</span> KeyError:</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>                    name = <span class="stringliteral">&#39;question&#39;</span></div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>                    width = font.get_width_char(<span class="stringliteral">&#39;?&#39;</span>)</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>                kern = font.get_kern_dist_from_name(last_name, name)</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>                last_name = name</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>                thisx += kern * scale</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>                stream.append((ps_name, thisx, name))</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>                thisx += width * scale</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span> </div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>            font = self.<a class="code hl_function" href="../../da/d77/classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase.html#adaae3c2f2d8888b2bab14a1abfc890b1">_get_font_ttf</a>(prop)</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>            self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a054561c327369470c9c7e928edf84c10">_character_tracker</a>.track(font, s)</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>            <span class="keywordflow">for</span> item <span class="keywordflow">in</span> _text_helpers.layout(s, font):</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>                ps_name = (item.ft_object.postscript_name</div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>                           .encode(<span class="stringliteral">&quot;ascii&quot;</span>, <span class="stringliteral">&quot;replace&quot;</span>).decode(<span class="stringliteral">&quot;ascii&quot;</span>))</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>                glyph_name = item.ft_object.get_glyph_name(item.glyph_idx)</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>                stream.append((ps_name, item.x, glyph_name))</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>        self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#af80283aeb624031b979557db4368c180">set_color</a>(*gc.get_rgb())</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span> </div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>        <span class="keywordflow">for</span> ps_name, group <span class="keywordflow">in</span> itertools. \</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>                groupby(stream, <span class="keyword">lambda</span> entry: entry[0]):</div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>            self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a1ac0b0108616cf6955d7829f60bcc6dd">set_font</a>(ps_name, prop.get_size_in_points(), <span class="keyword">False</span>)</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>            thetext = <span class="stringliteral">&quot;\n&quot;</span>.join(f<span class="stringliteral">&quot;{x:g} 0 m /{name:s} glyphshow&quot;</span></div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>                                <span class="keywordflow">for</span> _, x, name <span class="keywordflow">in</span> group)</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>            self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ca6be2a3b8d2d4e468f0482875d1834">_pswriter</a>.write(f<span class="stringliteral">&quot;&quot;&quot;\</span></div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span><span class="stringliteral">gsave</span></div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span><span class="stringliteral">{self._get_clip_cmd(gc)}</span></div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span><span class="stringliteral">{x:g} {y:g} translate</span></div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span><span class="stringliteral">{angle:g} rotate</span></div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span><span class="stringliteral">{thetext}</span></div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span><span class="stringliteral">grestore</span></div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span><span class="stringliteral">&quot;&quot;&quot;</span>)</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span> </div>
</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>    <span class="preprocessor">@_log_if_debug_on</span></div>
<div class="foldopen" id="foldopen00820" data-start="" data-end="">
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno"><a class="line" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a4b29ab79f42b9e94a106c9ac463cf245">  820</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a4b29ab79f42b9e94a106c9ac463cf245">draw_mathtext</a>(self, gc, x, y, s, prop, angle):</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>        <span class="stringliteral">&quot;&quot;&quot;Draw the math text using matplotlib.mathtext.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>        width, height, descent, glyphs, rects = \</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>            self.<a class="code hl_variable" href="../../d0/da8/classmatplotlib_1_1backend__bases_1_1RendererBase.html#a6ccfad0a85e2dda1bb5f7f50cbdbf4c9">_text2path</a>.mathtext_parser.parse(s, 72, prop)</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>        self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#af80283aeb624031b979557db4368c180">set_color</a>(*gc.get_rgb())</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ca6be2a3b8d2d4e468f0482875d1834">_pswriter</a>.write(</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>            f<span class="stringliteral">&quot;gsave\n&quot;</span></div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>            f<span class="stringliteral">&quot;{x:g} {y:g} translate\n&quot;</span></div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>            f<span class="stringliteral">&quot;{angle:g} rotate\n&quot;</span>)</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>        lastfont = <span class="keywordtype">None</span></div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>        <span class="keywordflow">for</span> font, fontsize, num, ox, oy <span class="keywordflow">in</span> glyphs:</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>            self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a054561c327369470c9c7e928edf84c10">_character_tracker</a>.track_glyph(font, num)</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>            <span class="keywordflow">if</span> (font.postscript_name, fontsize) != lastfont:</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>                lastfont = font.postscript_name, fontsize</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>                self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ca6be2a3b8d2d4e468f0482875d1834">_pswriter</a>.write(</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>                    f<span class="stringliteral">&quot;/{font.postscript_name} {fontsize} selectfont\n&quot;</span>)</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>            glyph_name = (</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>                font.get_name_char(chr(num)) <span class="keywordflow">if</span> isinstance(font, AFM) <span class="keywordflow">else</span></div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>                font.get_glyph_name(font.get_char_index(num)))</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>            self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ca6be2a3b8d2d4e468f0482875d1834">_pswriter</a>.write(</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>                f<span class="stringliteral">&quot;{ox:g} {oy:g} moveto\n&quot;</span></div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>                f<span class="stringliteral">&quot;/{glyph_name} glyphshow\n&quot;</span>)</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>        <span class="keywordflow">for</span> ox, oy, w, h <span class="keywordflow">in</span> rects:</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>            self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ca6be2a3b8d2d4e468f0482875d1834">_pswriter</a>.write(f<span class="stringliteral">&quot;{ox} {oy} {w} {h} rectfill\n&quot;</span>)</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ca6be2a3b8d2d4e468f0482875d1834">_pswriter</a>.write(<span class="stringliteral">&quot;grestore\n&quot;</span>)</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span> </div>
</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>    <span class="preprocessor">@_log_if_debug_on</span></div>
<div class="foldopen" id="foldopen00847" data-start="" data-end="">
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno"><a class="line" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a5fee983d9dbc11a5d8da52a1789c401b">  847</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a5fee983d9dbc11a5d8da52a1789c401b">draw_gouraud_triangles</a>(self, gc, points, colors, trans):</div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>        <span class="keyword">assert</span> len(points) == len(colors)</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>        <span class="keywordflow">if</span> len(points) == 0:</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>            <span class="keywordflow">return</span></div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>        <span class="keyword">assert</span> points.ndim == 3</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>        <span class="keyword">assert</span> points.shape[1] == 3</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>        <span class="keyword">assert</span> points.shape[2] == 2</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>        <span class="keyword">assert</span> colors.ndim == 3</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>        <span class="keyword">assert</span> colors.shape[1] == 3</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>        <span class="keyword">assert</span> colors.shape[2] == 4</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span> </div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>        shape = points.shape</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>        flat_points = points.reshape((shape[0] * shape[1], 2))</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>        flat_points = trans.transform(flat_points)</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>        flat_colors = colors.reshape((shape[0] * shape[1], 4))</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>        points_min = np.min(flat_points, axis=0) - (1 &lt;&lt; 12)</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>        points_max = np.max(flat_points, axis=0) + (1 &lt;&lt; 12)</div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>        factor = np.ceil((2 ** 32 - 1) / (points_max - points_min))</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span> </div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>        xmin, ymin = points_min</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>        xmax, ymax = points_max</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span> </div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>        data = np.empty(</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>            shape[0] * shape[1],</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>            dtype=[(<span class="stringliteral">&#39;flags&#39;</span>, <span class="stringliteral">&#39;u1&#39;</span>), (<span class="stringliteral">&#39;points&#39;</span>, <span class="stringliteral">&#39;2&gt;u4&#39;</span>), (<span class="stringliteral">&#39;colors&#39;</span>, <span class="stringliteral">&#39;3u1&#39;</span>)])</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>        data[<span class="stringliteral">&#39;flags&#39;</span>] = 0</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>        data[<span class="stringliteral">&#39;points&#39;</span>] = (flat_points - points_min) * factor</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>        data[<span class="stringliteral">&#39;colors&#39;</span>] = flat_colors[:, :3] * 255.0</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>        hexdata = data.tobytes().hex(<span class="stringliteral">&quot;\n&quot;</span>, -64)  <span class="comment"># Linewrap to 128 chars.</span></div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span> </div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>        self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ca6be2a3b8d2d4e468f0482875d1834">_pswriter</a>.write(f<span class="stringliteral">&quot;&quot;&quot;\</span></div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span><span class="stringliteral">gsave</span></div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span><span class="stringliteral">&lt;&lt; /ShadingType 4</span></div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span><span class="stringliteral">   /ColorSpace [/DeviceRGB]</span></div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span><span class="stringliteral">   /BitsPerCoordinate 32</span></div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span><span class="stringliteral">   /BitsPerComponent 8</span></div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span><span class="stringliteral">   /BitsPerFlag 8</span></div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span><span class="stringliteral">   /AntiAlias true</span></div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span><span class="stringliteral">   /Decode [ {xmin:g} {xmax:g} {ymin:g} {ymax:g} 0 1 0 1 0 1 ]</span></div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span><span class="stringliteral">   /DataSource &lt;</span></div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span><span class="stringliteral">{hexdata}</span></div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span><span class="stringliteral">&gt;</span></div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span><span class="stringliteral">&gt;&gt;</span></div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span><span class="stringliteral">shfill</span></div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span><span class="stringliteral">grestore</span></div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span><span class="stringliteral">&quot;&quot;&quot;</span>)</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span> </div>
</div>
<div class="foldopen" id="foldopen00894" data-start="" data-end="">
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno"><a class="line" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#affed4a1d8eeb052f2d043fc7b9ca0a0a">  894</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#affed4a1d8eeb052f2d043fc7b9ca0a0a">_draw_ps</a>(self, ps, gc, rgbFace, *, fill=True, stroke=True):</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span><span class="stringliteral">        Emit the PostScript snippet *ps* with all the attributes from *gc*</span></div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span><span class="stringliteral">        applied.  *ps* must consist of PostScript commands to construct a path.</span></div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span><span class="stringliteral">        The *fill* and/or *stroke* kwargs can be set to False if the *ps*</span></div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span><span class="stringliteral">        string already includes filling and/or stroking, in which case</span></div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span><span class="stringliteral">        `_draw_ps` is just supplying properties and clipping.</span></div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>        write = self.<a class="code hl_variable" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ca6be2a3b8d2d4e468f0482875d1834">_pswriter</a>.write</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>        mightstroke = (gc.get_linewidth() &gt; 0</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>                       <span class="keywordflow">and</span> <span class="keywordflow">not</span> self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#aa9044e3440d679d0851ccf72b1e3e157">_is_transparent</a>(gc.get_rgb()))</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> mightstroke:</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>            stroke = <span class="keyword">False</span></div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>        <span class="keywordflow">if</span> self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#aa9044e3440d679d0851ccf72b1e3e157">_is_transparent</a>(rgbFace):</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>            fill = <span class="keyword">False</span></div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>        hatch = gc.get_hatch()</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span> </div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>        <span class="keywordflow">if</span> mightstroke:</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>            self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#ae427b8b5a064427bfb5f9c41b3223c9f">set_linewidth</a>(gc.get_linewidth())</div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>            self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a1b8b395e90c030fa49fc3c39fbde61e3">set_linejoin</a>(gc.get_joinstyle())</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>            self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#aa62fe0b964daed13b656c56766a03ec5">set_linecap</a>(gc.get_capstyle())</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>            self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a5705536917fd0aa049aa86932cf006f3">set_linedash</a>(*gc.get_dashes())</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>        <span class="keywordflow">if</span> mightstroke <span class="keywordflow">or</span> hatch:</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>            self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#af80283aeb624031b979557db4368c180">set_color</a>(*gc.get_rgb()[:3])</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>        write(<span class="stringliteral">&#39;gsave\n&#39;</span>)</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span> </div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>        write(self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#ac73ffd7d2760a2513d952193fcb66397">_get_clip_cmd</a>(gc))</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span> </div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>        write(ps.strip())</div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>        write(<span class="stringliteral">&quot;\n&quot;</span>)</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span> </div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>        <span class="keywordflow">if</span> fill:</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>            <span class="keywordflow">if</span> stroke <span class="keywordflow">or</span> hatch:</div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>                write(<span class="stringliteral">&quot;gsave\n&quot;</span>)</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>            self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#af80283aeb624031b979557db4368c180">set_color</a>(*rgbFace[:3], store=<span class="keyword">False</span>)</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>            write(<span class="stringliteral">&quot;fill\n&quot;</span>)</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>            <span class="keywordflow">if</span> stroke <span class="keywordflow">or</span> hatch:</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>                write(<span class="stringliteral">&quot;grestore\n&quot;</span>)</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span> </div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>        <span class="keywordflow">if</span> hatch:</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>            hatch_name = self.<a class="code hl_function" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#ad37fa70d15f76a9f7cbe6adeb64e6d94">create_hatch</a>(hatch, gc.get_hatch_linewidth())</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>            write(<span class="stringliteral">&quot;gsave\n&quot;</span>)</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>            write(_nums_to_str(*gc.get_hatch_color()[:3]))</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>            write(f<span class="stringliteral">&quot; {hatch_name} setpattern fill grestore\n&quot;</span>)</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span> </div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>        <span class="keywordflow">if</span> stroke:</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>            write(<span class="stringliteral">&quot;stroke\n&quot;</span>)</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span> </div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>        write(<span class="stringliteral">&quot;grestore\n&quot;</span>)</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span> </div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span> </div>
</div>
</div>
<div class="foldopen" id="foldopen00946" data-start="" data-end="">
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno"><a class="line" href="../../db/d7c/classmatplotlib_1_1backends_1_1backend__ps_1_1__Orientation.html">  946</a></span><span class="keyword">class </span><a class="code hl_class" href="../../db/d7c/classmatplotlib_1_1backends_1_1backend__ps_1_1__Orientation.html">_Orientation</a>(<a class="code hl_class" href="../../d2/d55/classEnum.html">Enum</a>):</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>    portrait, landscape = range(2)</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span> </div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>    <span class="keyword">def </span>swap_if_landscape(self, shape):</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>        <span class="keywordflow">return</span> shape[::-1] <span class="keywordflow">if</span> self.<a class="code hl_variable" href="../../db/d7c/classmatplotlib_1_1backends_1_1backend__ps_1_1__Orientation.html#a09996de45e76277baf9267541ea79c41">name</a> == <span class="stringliteral">&quot;landscape&quot;</span> <span class="keywordflow">else</span> shape</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span> </div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span> </div>
</div>
<div class="foldopen" id="foldopen00953" data-start="" data-end="">
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno"><a class="line" href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html">  953</a></span><span class="keyword">class </span><a class="code hl_class" href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html">FigureCanvasPS</a>(<a class="code hl_class" href="../../d9/d5f/classmatplotlib_1_1backend__bases_1_1FigureCanvasBase.html">FigureCanvasBase</a>):</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>    fixed_dpi = 72</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>    filetypes = {<span class="stringliteral">&#39;ps&#39;</span>: <span class="stringliteral">&#39;Postscript&#39;</span>,</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>                 <span class="stringliteral">&#39;eps&#39;</span>: <span class="stringliteral">&#39;Encapsulated Postscript&#39;</span>}</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span> </div>
<div class="foldopen" id="foldopen00958" data-start="" data-end="">
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno"><a class="line" href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html#a95d663979aeb3f8d416193492ba331e5">  958</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html#a95d663979aeb3f8d416193492ba331e5">get_default_filetype</a>(self):</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>        <span class="keywordflow">return</span> <span class="stringliteral">&#39;ps&#39;</span></div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span> </div>
</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>    <span class="keyword">def </span>_print_ps(</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>            self, fmt, outfile, *,</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>            metadata=None, papertype=None, orientation=&#39;portrait&#39;,</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>            bbox_inches_restore=None, **kwargs):</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span> </div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>        dpi = self.<a class="code hl_variable" href="../../d9/d5f/classmatplotlib_1_1backend__bases_1_1FigureCanvasBase.html#aa5120a3253575aac5d0e280f5debcff7">figure</a>.dpi</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>        self.<a class="code hl_variable" href="../../d9/d5f/classmatplotlib_1_1backend__bases_1_1FigureCanvasBase.html#aa5120a3253575aac5d0e280f5debcff7">figure</a>.dpi = 72  <span class="comment"># Override the dpi kwarg</span></div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span> </div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>        dsc_comments = {}</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>        <span class="keywordflow">if</span> isinstance(outfile, (str, os.PathLike)):</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>            filename = pathlib.Path(outfile).name</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>            dsc_comments[<span class="stringliteral">&quot;Title&quot;</span>] = \</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>                filename.encode(<span class="stringliteral">&quot;ascii&quot;</span>, <span class="stringliteral">&quot;replace&quot;</span>).decode(<span class="stringliteral">&quot;ascii&quot;</span>)</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>        dsc_comments[<span class="stringliteral">&quot;Creator&quot;</span>] = (metadata <span class="keywordflow">or</span> {}).get(</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>            <span class="stringliteral">&quot;Creator&quot;</span>,</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>            f<span class="stringliteral">&quot;Matplotlib v{mpl.__version__}, https://matplotlib.org/&quot;</span>)</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>        <span class="comment"># See https://reproducible-builds.org/specs/source-date-epoch/</span></div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>        source_date_epoch = os.getenv(<span class="stringliteral">&quot;SOURCE_DATE_EPOCH&quot;</span>)</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>        dsc_comments[<span class="stringliteral">&quot;CreationDate&quot;</span>] = (</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>            datetime.datetime.fromtimestamp(</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>                int(source_date_epoch),</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>                datetime.timezone.utc).strftime(<span class="stringliteral">&quot;%a %b %d %H:%M:%S %Y&quot;</span>)</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>            <span class="keywordflow">if</span> source_date_epoch</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>            <span class="keywordflow">else</span> time.ctime())</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>        dsc_comments = <span class="stringliteral">&quot;\n&quot;</span>.join(</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>            f<span class="stringliteral">&quot;%%{k}: {v}&quot;</span> <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> dsc_comments.items())</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span> </div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>        <span class="keywordflow">if</span> papertype <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>            papertype = mpl.rcParams[<span class="stringliteral">&#39;ps.papersize&#39;</span>]</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>        papertype = papertype.lower()</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>        _api.check_in_list([<span class="stringliteral">&#39;figure&#39;</span>, *papersize], papertype=papertype)</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span> </div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>        orientation = _api.check_getitem(</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>            _Orientation, orientation=orientation.lower())</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span> </div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>        printer = (self.<a class="code hl_function" href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html#abc440dcf54a234feb6c391494ec557cc">_print_figure_tex</a></div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>                   <span class="keywordflow">if</span> mpl.rcParams[<span class="stringliteral">&#39;text.usetex&#39;</span>] <span class="keywordflow">else</span></div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>                   self.<a class="code hl_function" href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html#aeda3dc7bb2ea81736a2b347b266de134">_print_figure</a>)</div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>        printer(fmt, outfile, dpi=dpi, dsc_comments=dsc_comments,</div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>                orientation=orientation, papertype=papertype,</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>                bbox_inches_restore=bbox_inches_restore, **kwargs)</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span> </div>
<div class="foldopen" id="foldopen01003" data-start="" data-end="">
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"><a class="line" href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html#aeda3dc7bb2ea81736a2b347b266de134"> 1003</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html#aeda3dc7bb2ea81736a2b347b266de134">_print_figure</a>(</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>            self, fmt, outfile, *,</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>            dpi, dsc_comments, orientation, papertype,</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>            bbox_inches_restore=None):</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span><span class="stringliteral">        Render the figure to a filesystem path or a file-like object.</span></div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span><span class="stringliteral">        Parameters are as for `.print_figure`, except that *dsc_comments* is a</span></div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span><span class="stringliteral">        string containing Document Structuring Convention comments,</span></div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span><span class="stringliteral">        generated from the *metadata* parameter to `.print_figure`.</span></div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>        is_eps = fmt == <span class="stringliteral">&#39;eps&#39;</span></div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> (isinstance(outfile, (str, os.PathLike))</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>                <span class="keywordflow">or</span> is_writable_file_like(outfile)):</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="../../de/d40/classValueError.html">ValueError</a>(<span class="stringliteral">&quot;outfile must be a path or a file-like object&quot;</span>)</div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span> </div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>        <span class="comment"># find the appropriate papertype</span></div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>        width, height = self.<a class="code hl_variable" href="../../d9/d5f/classmatplotlib_1_1backend__bases_1_1FigureCanvasBase.html#aa5120a3253575aac5d0e280f5debcff7">figure</a>.get_size_inches()</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>        <span class="keywordflow">if</span> is_eps <span class="keywordflow">or</span> papertype == <span class="stringliteral">&#39;figure&#39;</span>:</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>            paper_width, paper_height = width, height</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>            paper_width, paper_height = orientation.swap_if_landscape(</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>                papersize[papertype])</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span> </div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>        <span class="comment"># center the figure on the paper</span></div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>        xo = 72 * 0.5 * (paper_width - width)</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>        yo = 72 * 0.5 * (paper_height - height)</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span> </div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>        llx = xo</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>        lly = yo</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>        urx = llx + self.<a class="code hl_variable" href="../../d9/d5f/classmatplotlib_1_1backend__bases_1_1FigureCanvasBase.html#aa5120a3253575aac5d0e280f5debcff7">figure</a>.bbox.width</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>        ury = lly + self.<a class="code hl_variable" href="../../d9/d5f/classmatplotlib_1_1backend__bases_1_1FigureCanvasBase.html#aa5120a3253575aac5d0e280f5debcff7">figure</a>.bbox.height</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>        rotation = 0</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>        <span class="keywordflow">if</span> orientation <span class="keywordflow">is</span> _Orientation.landscape:</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>            llx, lly, urx, ury = lly, llx, ury, urx</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>            xo, yo = 72 * paper_height - yo, xo</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>            rotation = 90</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>        bbox = (llx, lly, urx, ury)</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span> </div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>        self.<a class="code hl_variable" href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html#a254199f7f4c77b6964d6b159b085c091">_pswriter</a> = <a class="code hl_class" href="../../d1/d8d/classStringIO.html">StringIO</a>()</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span> </div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>        <span class="comment"># mixed mode rendering</span></div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>        ps_renderer = <a class="code hl_class" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html">RendererPS</a>(width, height, self.<a class="code hl_variable" href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html#a254199f7f4c77b6964d6b159b085c091">_pswriter</a>, imagedpi=dpi)</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>        renderer = <a class="code hl_class" href="../../d9/da4/classmatplotlib_1_1backends_1_1backend__mixed_1_1MixedModeRenderer.html">MixedModeRenderer</a>(</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>            self.<a class="code hl_variable" href="../../d9/d5f/classmatplotlib_1_1backend__bases_1_1FigureCanvasBase.html#aa5120a3253575aac5d0e280f5debcff7">figure</a>, width, height, dpi, ps_renderer,</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>            bbox_inches_restore=bbox_inches_restore)</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span> </div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>        self.<a class="code hl_variable" href="../../d9/d5f/classmatplotlib_1_1backend__bases_1_1FigureCanvasBase.html#aa5120a3253575aac5d0e280f5debcff7">figure</a>.<a class="code hl_function" href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html#a80d316181bdac38635efb4bb96cdbc8a">draw</a>(renderer)</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span> </div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>        <span class="keyword">def </span>print_figure_impl(fh):</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>            <span class="comment"># write the PostScript headers</span></div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>            <span class="keywordflow">if</span> is_eps:</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>                print(<span class="stringliteral">&quot;%!PS-Adobe-3.0 EPSF-3.0&quot;</span>, file=fh)</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>                print(<span class="stringliteral">&quot;%!PS-Adobe-3.0&quot;</span>, file=fh)</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>                <span class="keywordflow">if</span> papertype != <span class="stringliteral">&#39;figure&#39;</span>:</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>                    print(f<span class="stringliteral">&quot;%%DocumentPaperSizes: {papertype}&quot;</span>, file=fh)</div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>                print(<span class="stringliteral">&quot;%%Pages: 1&quot;</span>, file=fh)</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>            print(f<span class="stringliteral">&quot;%%LanguageLevel: 3\n&quot;</span></div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>                  f<span class="stringliteral">&quot;{dsc_comments}\n&quot;</span></div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>                  f<span class="stringliteral">&quot;%%Orientation: {orientation.name}\n&quot;</span></div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>                  f<span class="stringliteral">&quot;{_get_bbox_header(bbox)}\n&quot;</span></div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>                  f<span class="stringliteral">&quot;%%EndComments\n&quot;</span>,</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>                  end=<span class="stringliteral">&quot;&quot;</span>, file=fh)</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span> </div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>            Ndict = len(_psDefs)</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>            print(<span class="stringliteral">&quot;%%BeginProlog&quot;</span>, file=fh)</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> mpl.rcParams[<span class="stringliteral">&#39;ps.useafm&#39;</span>]:</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>                Ndict += len(ps_renderer._character_tracker.used)</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>            print(<span class="stringliteral">&quot;/mpldict %d dict def&quot;</span> % Ndict, file=fh)</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>            print(<span class="stringliteral">&quot;mpldict begin&quot;</span>, file=fh)</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>            print(<span class="stringliteral">&quot;\n&quot;</span>.join(_psDefs), file=fh)</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> mpl.rcParams[<span class="stringliteral">&#39;ps.useafm&#39;</span>]:</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>                <span class="keywordflow">for</span> font_path, chars \</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>                        <span class="keywordflow">in</span> ps_renderer._character_tracker.used.items():</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>                    <span class="keywordflow">if</span> <span class="keywordflow">not</span> chars:</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>                        <span class="keywordflow">continue</span></div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>                    fonttype = mpl.rcParams[<span class="stringliteral">&#39;ps.fonttype&#39;</span>]</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>                    <span class="comment"># Can&#39;t use more than 255 chars from a single Type 3 font.</span></div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>                    <span class="keywordflow">if</span> len(chars) &gt; 255:</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>                        fonttype = 42</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>                    fh.flush()</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>                    <span class="keywordflow">if</span> fonttype == 3:</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>                        fh.write(<a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#aae72ead8d639ade3f2070bb1fbbbf211">_font_to_ps_type3</a>(font_path, chars))</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>                    <span class="keywordflow">else</span>:  <span class="comment"># Type 42 only.</span></div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>                        <a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#ab570363ea76de5a1c0bcca746df2fb38">_font_to_ps_type42</a>(font_path, chars, fh)</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>            print(<span class="stringliteral">&quot;end&quot;</span>, file=fh)</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>            print(<span class="stringliteral">&quot;%%EndProlog&quot;</span>, file=fh)</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span> </div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> is_eps:</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>                print(<span class="stringliteral">&quot;%%Page: 1 1&quot;</span>, file=fh)</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>            print(<span class="stringliteral">&quot;mpldict begin&quot;</span>, file=fh)</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span> </div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>            print(<span class="stringliteral">&quot;%s translate&quot;</span> % _nums_to_str(xo, yo), file=fh)</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>            <span class="keywordflow">if</span> rotation:</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>                print(<span class="stringliteral">&quot;%d rotate&quot;</span> % rotation, file=fh)</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>            print(f<span class="stringliteral">&quot;0 0 {_nums_to_str(width*72, height*72)} rectclip&quot;</span>, file=fh)</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span> </div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>            <span class="comment"># write the figure</span></div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>            print(self.<a class="code hl_variable" href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html#a254199f7f4c77b6964d6b159b085c091">_pswriter</a>.getvalue(), file=fh)</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span> </div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>            <span class="comment"># write the trailer</span></div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>            print(<span class="stringliteral">&quot;end&quot;</span>, file=fh)</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>            print(<span class="stringliteral">&quot;showpage&quot;</span>, file=fh)</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> is_eps:</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>                print(<span class="stringliteral">&quot;%%EOF&quot;</span>, file=fh)</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>            fh.flush()</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span> </div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>        <span class="keywordflow">if</span> mpl.rcParams[<span class="stringliteral">&#39;ps.usedistiller&#39;</span>]:</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>            <span class="comment"># We are going to use an external program to process the output.</span></div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>            <span class="comment"># Write to a temporary file.</span></div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>            <span class="keyword">with</span> TemporaryDirectory() <span class="keyword">as</span> tmpdir:</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>                tmpfile = os.path.join(tmpdir, <span class="stringliteral">&quot;tmp.ps&quot;</span>)</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>                <span class="keyword">with</span> open(tmpfile, <span class="stringliteral">&#39;w&#39;</span>, encoding=<span class="stringliteral">&#39;latin-1&#39;</span>) <span class="keyword">as</span> fh:</div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>                    print_figure_impl(fh)</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>                <span class="keywordflow">if</span> mpl.rcParams[<span class="stringliteral">&#39;ps.usedistiller&#39;</span>] == <span class="stringliteral">&#39;ghostscript&#39;</span>:</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>                    _try_distill(gs_distill,</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>                                 tmpfile, is_eps, ptype=papertype, bbox=bbox)</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>                <span class="keywordflow">elif</span> mpl.rcParams[<span class="stringliteral">&#39;ps.usedistiller&#39;</span>] == <span class="stringliteral">&#39;xpdf&#39;</span>:</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>                    _try_distill(xpdf_distill,</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>                                 tmpfile, is_eps, ptype=papertype, bbox=bbox)</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>                <a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#aa96b8b298fd713b04cb716bb576553dd">_move_path_to_path_or_stream</a>(tmpfile, outfile)</div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span> </div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>        <span class="keywordflow">else</span>:  <span class="comment"># Write directly to outfile.</span></div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>            <span class="keyword">with</span> cbook.open_file_cm(outfile, <span class="stringliteral">&quot;w&quot;</span>, encoding=<span class="stringliteral">&quot;latin-1&quot;</span>) <span class="keyword">as</span> file:</div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>                <span class="keywordflow">if</span> <span class="keywordflow">not</span> file_requires_unicode(file):</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>                    file = codecs.getwriter(<span class="stringliteral">&quot;latin-1&quot;</span>)(file)</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>                print_figure_impl(file)</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span> </div>
</div>
<div class="foldopen" id="foldopen01132" data-start="" data-end="">
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"><a class="line" href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html#abc440dcf54a234feb6c391494ec557cc"> 1132</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html#abc440dcf54a234feb6c391494ec557cc">_print_figure_tex</a>(</div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>            self, fmt, outfile, *,</div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>            dpi, dsc_comments, orientation, papertype,</div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>            bbox_inches_restore=None):</div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span><span class="stringliteral">        If :rc:`text.usetex` is True, a temporary pair of tex/eps files</span></div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span><span class="stringliteral">        are created to allow tex to manage the text layout via the PSFrags</span></div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span><span class="stringliteral">        package. These files are processed to yield the final ps or eps file.</span></div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span><span class="stringliteral">        The rest of the behavior is as for `._print_figure`.</span></div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>        is_eps = fmt == <span class="stringliteral">&#39;eps&#39;</span></div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span> </div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span>        width, height = self.<a class="code hl_variable" href="../../d9/d5f/classmatplotlib_1_1backend__bases_1_1FigureCanvasBase.html#aa5120a3253575aac5d0e280f5debcff7">figure</a>.get_size_inches()</div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>        xo = 0</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>        yo = 0</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span> </div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>        llx = xo</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>        lly = yo</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>        urx = llx + self.<a class="code hl_variable" href="../../d9/d5f/classmatplotlib_1_1backend__bases_1_1FigureCanvasBase.html#aa5120a3253575aac5d0e280f5debcff7">figure</a>.bbox.width</div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>        ury = lly + self.<a class="code hl_variable" href="../../d9/d5f/classmatplotlib_1_1backend__bases_1_1FigureCanvasBase.html#aa5120a3253575aac5d0e280f5debcff7">figure</a>.bbox.height</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>        bbox = (llx, lly, urx, ury)</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span> </div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>        self.<a class="code hl_variable" href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html#a254199f7f4c77b6964d6b159b085c091">_pswriter</a> = <a class="code hl_class" href="../../d1/d8d/classStringIO.html">StringIO</a>()</div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span> </div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>        <span class="comment"># mixed mode rendering</span></div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>        ps_renderer = <a class="code hl_class" href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html">RendererPS</a>(width, height, self.<a class="code hl_variable" href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html#a254199f7f4c77b6964d6b159b085c091">_pswriter</a>, imagedpi=dpi)</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>        renderer = <a class="code hl_class" href="../../d9/da4/classmatplotlib_1_1backends_1_1backend__mixed_1_1MixedModeRenderer.html">MixedModeRenderer</a>(self.<a class="code hl_variable" href="../../d9/d5f/classmatplotlib_1_1backend__bases_1_1FigureCanvasBase.html#aa5120a3253575aac5d0e280f5debcff7">figure</a>,</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>                                     width, height, dpi, ps_renderer,</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>                                     bbox_inches_restore=bbox_inches_restore)</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span> </div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>        self.<a class="code hl_variable" href="../../d9/d5f/classmatplotlib_1_1backend__bases_1_1FigureCanvasBase.html#aa5120a3253575aac5d0e280f5debcff7">figure</a>.<a class="code hl_function" href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html#a80d316181bdac38635efb4bb96cdbc8a">draw</a>(renderer)</div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span> </div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>        <span class="comment"># write to a temp file, we&#39;ll move it to outfile when done</span></div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>        <span class="keyword">with</span> TemporaryDirectory() <span class="keyword">as</span> tmpdir:</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>            tmppath = pathlib.Path(tmpdir, <span class="stringliteral">&quot;tmp.ps&quot;</span>)</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>            tmppath.write_text(</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span>                f<span class="stringliteral">&quot;&quot;&quot;\</span></div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span><span class="stringliteral">%!PS-Adobe-3.0 EPSF-3.0</span></div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span><span class="stringliteral">%%LanguageLevel: 3</span></div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span><span class="stringliteral">{dsc_comments}</span></div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span><span class="stringliteral">{_get_bbox_header(bbox)}</span></div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span><span class="stringliteral">%%EndComments</span></div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span><span class="stringliteral">%%BeginProlog</span></div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span><span class="stringliteral">/mpldict {len(_psDefs)} dict def</span></div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span><span class="stringliteral">mpldict begin</span></div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span><span class="stringliteral">{&quot;&quot;.join(_psDefs)}</span></div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span><span class="stringliteral">end</span></div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span><span class="stringliteral">%%EndProlog</span></div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span><span class="stringliteral">mpldict begin</span></div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span><span class="stringliteral">{_nums_to_str(xo, yo)} translate</span></div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span><span class="stringliteral">0 0 {_nums_to_str(width*72, height*72)} rectclip</span></div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span><span class="stringliteral">{self._pswriter.getvalue()}</span></div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span><span class="stringliteral">end</span></div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span><span class="stringliteral">showpage</span></div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span><span class="stringliteral">&quot;&quot;&quot;</span>,</div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span>                encoding=<span class="stringliteral">&quot;latin-1&quot;</span>)</div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span> </div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span>            <span class="keywordflow">if</span> orientation <span class="keywordflow">is</span> _Orientation.landscape:  <span class="comment"># now, ready to rotate</span></div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>                width, height = height, width</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>                bbox = (lly, llx, ury, urx)</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span> </div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span>            <span class="comment"># set the paper size to the figure size if is_eps. The</span></div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>            <span class="comment"># resulting ps file has the given size with correct bounding</span></div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>            <span class="comment"># box so that there is no need to call &#39;pstoeps&#39;</span></div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>            <span class="keywordflow">if</span> is_eps <span class="keywordflow">or</span> papertype == <span class="stringliteral">&#39;figure&#39;</span>:</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span>                paper_width, paper_height = orientation.swap_if_landscape(</div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>                    self.<a class="code hl_variable" href="../../d9/d5f/classmatplotlib_1_1backend__bases_1_1FigureCanvasBase.html#aa5120a3253575aac5d0e280f5debcff7">figure</a>.get_size_inches())</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span>                paper_width, paper_height = papersize[papertype]</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span> </div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>            psfrag_rotated = <a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#a0ef1397c10149ca5bc338162f3aa98df">_convert_psfrags</a>(</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span>                tmppath, ps_renderer.psfrag, paper_width, paper_height,</div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span>                orientation.name)</div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span> </div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>            <span class="keywordflow">if</span> (mpl.rcParams[<span class="stringliteral">&#39;ps.usedistiller&#39;</span>] == <span class="stringliteral">&#39;ghostscript&#39;</span></div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span>                    <span class="keywordflow">or</span> mpl.rcParams[<span class="stringliteral">&#39;text.usetex&#39;</span>]):</div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span>                _try_distill(gs_distill,</div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span>                             tmppath, is_eps, ptype=papertype, bbox=bbox,</div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>                             rotated=psfrag_rotated)</div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span>            <span class="keywordflow">elif</span> mpl.rcParams[<span class="stringliteral">&#39;ps.usedistiller&#39;</span>] == <span class="stringliteral">&#39;xpdf&#39;</span>:</div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span>                _try_distill(xpdf_distill,</div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span>                             tmppath, is_eps, ptype=papertype, bbox=bbox,</div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span>                             rotated=psfrag_rotated)</div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span> </div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>            <a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#aa96b8b298fd713b04cb716bb576553dd">_move_path_to_path_or_stream</a>(tmppath, outfile)</div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span> </div>
</div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span>    print_ps = functools.partialmethod(_print_ps, <span class="stringliteral">&quot;ps&quot;</span>)</div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span>    print_eps = functools.partialmethod(_print_ps, <span class="stringliteral">&quot;eps&quot;</span>)</div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span> </div>
<div class="foldopen" id="foldopen01222" data-start="" data-end="">
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"><a class="line" href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html#a80d316181bdac38635efb4bb96cdbc8a"> 1222</a></span>    <span class="keyword">def </span><a class="code hl_function" href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html#a80d316181bdac38635efb4bb96cdbc8a">draw</a>(self):</div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span>        self.<a class="code hl_variable" href="../../d9/d5f/classmatplotlib_1_1backend__bases_1_1FigureCanvasBase.html#aa5120a3253575aac5d0e280f5debcff7">figure</a>.draw_without_rendering()</div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span>        <span class="keywordflow">return</span> super().<a class="code hl_function" href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html#a80d316181bdac38635efb4bb96cdbc8a">draw</a>()</div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span> </div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span> </div>
</div>
</div>
<div class="foldopen" id="foldopen01227" data-start="" data-end="">
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"><a class="line" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#a0ef1397c10149ca5bc338162f3aa98df"> 1227</a></span><span class="keyword">def </span><a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#a0ef1397c10149ca5bc338162f3aa98df">_convert_psfrags</a>(tmppath, psfrags, paper_width, paper_height, orientation):</div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span><span class="stringliteral">    When we want to use the LaTeX backend with postscript, we write PSFrag tags</span></div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span><span class="stringliteral">    to a temporary postscript file, each one marking a position for LaTeX to</span></div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span><span class="stringliteral">    render some text. convert_psfrags generates a LaTeX document containing the</span></div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span><span class="stringliteral">    commands to convert those tags to text. LaTeX/dvips produces the postscript</span></div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span><span class="stringliteral">    file that includes the actual text.</span></div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>    <span class="keyword">with</span> mpl.rc_context({</div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>            <span class="stringliteral">&quot;text.latex.preamble&quot;</span>:</div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>            mpl.rcParams[<span class="stringliteral">&quot;text.latex.preamble&quot;</span>] +</div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>            mpl.texmanager._usepackage_if_not_loaded(<span class="stringliteral">&quot;color&quot;</span>) +</div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span>            mpl.texmanager._usepackage_if_not_loaded(<span class="stringliteral">&quot;graphicx&quot;</span>) +</div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>            mpl.texmanager._usepackage_if_not_loaded(<span class="stringliteral">&quot;psfrag&quot;</span>) +</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>            <span class="stringliteral">r&quot;\geometry{papersize={%(width)sin,%(height)sin},margin=0in}&quot;</span></div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span>            % {<span class="stringliteral">&quot;width&quot;</span>: paper_width, <span class="stringliteral">&quot;height&quot;</span>: paper_height}</div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>    }):</div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>        dvifile = <a class="code hl_class" href="../../da/d93/classmatplotlib_1_1texmanager_1_1TexManager.html">TexManager</a>().make_dvi(</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>            <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>            <span class="stringliteral">r&quot;\begin{figure}&quot;</span><span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>            <span class="stringliteral">r&quot;  \centering\leavevmode&quot;</span><span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>            <span class="stringliteral">r&quot;  %(psfrags)s&quot;</span><span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>            <span class="stringliteral">r&quot;  \includegraphics*[angle=%(angle)s]{%(epsfile)s}&quot;</span><span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>            <span class="stringliteral">r&quot;\end{figure}&quot;</span></div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>            % {</div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span>                <span class="stringliteral">&quot;psfrags&quot;</span>: <span class="stringliteral">&quot;\n&quot;</span>.join(psfrags),</div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span>                <span class="stringliteral">&quot;angle&quot;</span>: 90 <span class="keywordflow">if</span> orientation == <span class="stringliteral">&#39;landscape&#39;</span> <span class="keywordflow">else</span> 0,</div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span>                <span class="stringliteral">&quot;epsfile&quot;</span>: tmppath.resolve().as_posix(),</div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span>            },</div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>            fontsize=10)  <span class="comment"># tex&#39;s default fontsize.</span></div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span> </div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span>    <span class="keyword">with</span> TemporaryDirectory() <span class="keyword">as</span> tmpdir:</div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>        psfile = os.path.join(tmpdir, <span class="stringliteral">&quot;tmp.ps&quot;</span>)</div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>        cbook._check_and_log_subprocess(</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>            [<span class="stringliteral">&#39;dvips&#39;</span>, <span class="stringliteral">&#39;-q&#39;</span>, <span class="stringliteral">&#39;-R0&#39;</span>, <span class="stringliteral">&#39;-o&#39;</span>, psfile, dvifile], _log)</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span>        shutil.move(psfile, tmppath)</div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span> </div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>    <span class="comment"># check if the dvips created a ps in landscape paper.  Somehow,</span></div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>    <span class="comment"># above latex+dvips results in a ps file in a landscape mode for a</span></div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>    <span class="comment"># certain figure sizes (e.g., 8.3in, 5.8in which is a5). And the</span></div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span>    <span class="comment"># bounding box of the final output got messed up. We check see if</span></div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>    <span class="comment"># the generated ps file is in landscape and return this</span></div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span>    <span class="comment"># information. The return value is used in pstoeps step to recover</span></div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span>    <span class="comment"># the correct bounding box. 2010-06-05 JJL</span></div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span>    <span class="keyword">with</span> open(tmppath) <span class="keyword">as</span> fh:</div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>        psfrag_rotated = <span class="stringliteral">&quot;Landscape&quot;</span> <span class="keywordflow">in</span> fh.read(1000)</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>    <span class="keywordflow">return</span> psfrag_rotated</div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span> </div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span> </div>
</div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span><span class="keyword">def </span>_try_distill(func, tmppath, *args, **kwargs):</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>        func(str(tmppath), *args, **kwargs)</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>    <span class="keywordflow">except</span> mpl.ExecutableNotFoundError <span class="keyword">as</span> exc:</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>        _log.warning(<span class="stringliteral">&quot;%s.  Distillation step skipped.&quot;</span>, exc)</div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span> </div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span> </div>
<div class="foldopen" id="foldopen01283" data-start="" data-end="">
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"><a class="line" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#a7e37128445bc02b4940c94ee9b15041e"> 1283</a></span><span class="keyword">def </span><a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#a7e37128445bc02b4940c94ee9b15041e">gs_distill</a>(tmpfile, eps=False, ptype=&#39;letter&#39;, bbox=None, rotated=False):</div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span><span class="stringliteral">    Use ghostscript&#39;s pswrite or epswrite device to distill a file.</span></div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span><span class="stringliteral">    This yields smaller files without illegal encapsulated postscript</span></div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span><span class="stringliteral">    operators. The output is low-level, converting text to outlines.</span></div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span> </div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>    <span class="keywordflow">if</span> eps:</div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>        paper_option = [<span class="stringliteral">&quot;-dEPSCrop&quot;</span>]</div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span>    <span class="keywordflow">elif</span> ptype == <span class="stringliteral">&quot;figure&quot;</span>:</div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>        <span class="comment"># The bbox will have its lower-left corner at (0, 0), so upper-right</span></div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>        <span class="comment"># corner corresponds with paper size.</span></div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>        paper_option = [f<span class="stringliteral">&quot;-dDEVICEWIDTHPOINTS={bbox[2]}&quot;</span>,</div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>                        f<span class="stringliteral">&quot;-dDEVICEHEIGHTPOINTS={bbox[3]}&quot;</span>]</div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span>        paper_option = [f<span class="stringliteral">&quot;-sPAPERSIZE={ptype}&quot;</span>]</div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span> </div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span>    psfile = tmpfile + <span class="stringliteral">&#39;.ps&#39;</span></div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span>    dpi = mpl.rcParams[<span class="stringliteral">&#39;ps.distiller.res&#39;</span>]</div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span> </div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>    cbook._check_and_log_subprocess(</div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>        [mpl._get_executable_info(<span class="stringliteral">&quot;gs&quot;</span>).executable,</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span>         <span class="stringliteral">&quot;-dBATCH&quot;</span>, <span class="stringliteral">&quot;-dNOPAUSE&quot;</span>, <span class="stringliteral">&quot;-r%d&quot;</span> % dpi, <span class="stringliteral">&quot;-sDEVICE=ps2write&quot;</span>,</div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>         *paper_option, f<span class="stringliteral">&quot;-sOutputFile={psfile}&quot;</span>, tmpfile],</div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>        _log)</div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span> </div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span>    os.remove(tmpfile)</div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span>    shutil.move(psfile, tmpfile)</div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span> </div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>    <span class="comment"># While it is best if above steps preserve the original bounding</span></div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>    <span class="comment"># box, there seem to be cases when it is not. For those cases,</span></div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span>    <span class="comment"># the original bbox can be restored during the pstoeps step.</span></div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span> </div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span>    <span class="keywordflow">if</span> eps:</div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span>        <span class="comment"># For some versions of gs, above steps result in a ps file where the</span></div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span>        <span class="comment"># original bbox is no more correct. Do not adjust bbox for now.</span></div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span>        <a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#af4749888ddb5c2f395d7dc4c91d8140d">pstoeps</a>(tmpfile, bbox, rotated=rotated)</div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span> </div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span> </div>
</div>
<div class="foldopen" id="foldopen01322" data-start="" data-end="">
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"><a class="line" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#ad5636bc7f224d43458781721d9253952"> 1322</a></span><span class="keyword">def </span><a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#ad5636bc7f224d43458781721d9253952">xpdf_distill</a>(tmpfile, eps=False, ptype=&#39;letter&#39;, bbox=None, rotated=False):</div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span><span class="stringliteral">    Use ghostscript&#39;s ps2pdf and xpdf&#39;s/poppler&#39;s pdftops to distill a file.</span></div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span><span class="stringliteral">    This yields smaller files without illegal encapsulated postscript</span></div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span><span class="stringliteral">    operators. This distiller is preferred, generating high-level postscript</span></div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span><span class="stringliteral">    output that treats text as text.</span></div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>    mpl._get_executable_info(<span class="stringliteral">&quot;gs&quot;</span>)  <span class="comment"># Effectively checks for ps2pdf.</span></div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>    mpl._get_executable_info(<span class="stringliteral">&quot;pdftops&quot;</span>)</div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span> </div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>    <span class="keywordflow">if</span> eps:</div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>        paper_option = [<span class="stringliteral">&quot;-dEPSCrop&quot;</span>]</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span>    <span class="keywordflow">elif</span> ptype == <span class="stringliteral">&quot;figure&quot;</span>:</div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>        <span class="comment"># The bbox will have its lower-left corner at (0, 0), so upper-right</span></div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>        <span class="comment"># corner corresponds with paper size.</span></div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>        paper_option = [f<span class="stringliteral">&quot;-dDEVICEWIDTHPOINTS#{bbox[2]}&quot;</span>,</div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>                        f<span class="stringliteral">&quot;-dDEVICEHEIGHTPOINTS#{bbox[3]}&quot;</span>]</div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span>        paper_option = [f<span class="stringliteral">&quot;-sPAPERSIZE#{ptype}&quot;</span>]</div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span> </div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>    <span class="keyword">with</span> TemporaryDirectory() <span class="keyword">as</span> tmpdir:</div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>        tmppdf = pathlib.Path(tmpdir, <span class="stringliteral">&quot;tmp.pdf&quot;</span>)</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span>        tmpps = pathlib.Path(tmpdir, <span class="stringliteral">&quot;tmp.ps&quot;</span>)</div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span>        <span class="comment"># Pass options as `-foo#bar` instead of `-foo=bar` to keep Windows</span></div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span>        <span class="comment"># happy (https://ghostscript.com/doc/9.56.1/Use.htm#MS_Windows).</span></div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span>        cbook._check_and_log_subprocess(</div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>            [<span class="stringliteral">&quot;ps2pdf&quot;</span>,</div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span>             <span class="stringliteral">&quot;-dAutoFilterColorImages#false&quot;</span>,</div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span>             <span class="stringliteral">&quot;-dAutoFilterGrayImages#false&quot;</span>,</div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span>             <span class="stringliteral">&quot;-sAutoRotatePages#None&quot;</span>,</div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span>             <span class="stringliteral">&quot;-sGrayImageFilter#FlateEncode&quot;</span>,</div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span>             <span class="stringliteral">&quot;-sColorImageFilter#FlateEncode&quot;</span>,</div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span>             *paper_option,</div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>             tmpfile, tmppdf], _log)</div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span>        cbook._check_and_log_subprocess(</div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span>            [<span class="stringliteral">&quot;pdftops&quot;</span>, <span class="stringliteral">&quot;-paper&quot;</span>, <span class="stringliteral">&quot;match&quot;</span>, <span class="stringliteral">&quot;-level3&quot;</span>, tmppdf, tmpps], _log)</div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span>        shutil.move(tmpps, tmpfile)</div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span>    <span class="keywordflow">if</span> eps:</div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span>        <a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#af4749888ddb5c2f395d7dc4c91d8140d">pstoeps</a>(tmpfile)</div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span> </div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span> </div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span><span class="preprocessor">@_api.deprecated(&quot;3.9&quot;)</span></div>
</div>
<div class="foldopen" id="foldopen01364" data-start="" data-end="">
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"><a class="line" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#ac9b463407fa1b417b09d57b315d50c0e"> 1364</a></span><span class="keyword">def </span><a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#ac9b463407fa1b417b09d57b315d50c0e">get_bbox_header</a>(lbrt, rotated=False):</div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span><span class="stringliteral">    Return a postscript header string for the given bbox lbrt=(l, b, r, t).</span></div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span><span class="stringliteral">    Optionally, return rotate command.</span></div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#a8c2b522317fb7c3c112d1ae1536ed41d">_get_bbox_header</a>(lbrt), (<a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#a00ed433cea8b943758f8779c6789c353">_get_rotate_command</a>(lbrt) <span class="keywordflow">if</span> rotated <span class="keywordflow">else</span> <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span> </div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span> </div>
</div>
<div class="foldopen" id="foldopen01372" data-start="" data-end="">
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"><a class="line" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#a8c2b522317fb7c3c112d1ae1536ed41d"> 1372</a></span><span class="keyword">def </span><a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#a8c2b522317fb7c3c112d1ae1536ed41d">_get_bbox_header</a>(lbrt):</div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span>    <span class="stringliteral">&quot;&quot;&quot;Return a PostScript header string for bounding box *lbrt*=(l, b, r, t).&quot;&quot;&quot;</span></div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span>    l, b, r, t = lbrt</div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span>    <span class="keywordflow">return</span> (f<span class="stringliteral">&quot;%%BoundingBox: {int(l)} {int(b)} {math.ceil(r)} {math.ceil(t)}\n&quot;</span></div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span>            f<span class="stringliteral">&quot;%%HiResBoundingBox: {l:.6f} {b:.6f} {r:.6f} {t:.6f}&quot;</span>)</div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span> </div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span> </div>
</div>
<div class="foldopen" id="foldopen01379" data-start="" data-end="">
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"><a class="line" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#a00ed433cea8b943758f8779c6789c353"> 1379</a></span><span class="keyword">def </span><a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#a00ed433cea8b943758f8779c6789c353">_get_rotate_command</a>(lbrt):</div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span>    <span class="stringliteral">&quot;&quot;&quot;Return a PostScript 90 rotation command for bounding box *lbrt*=(l, b, r, t).&quot;&quot;&quot;</span></div>
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"> 1381</span>    l, b, r, t = lbrt</div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"> 1382</span>    <span class="keywordflow">return</span> f<span class="stringliteral">&quot;{l+r:.2f} {0:.2f} translate\n90 rotate&quot;</span></div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span> </div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span> </div>
</div>
<div class="foldopen" id="foldopen01385" data-start="" data-end="">
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"><a class="line" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#af4749888ddb5c2f395d7dc4c91d8140d"> 1385</a></span><span class="keyword">def </span><a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#af4749888ddb5c2f395d7dc4c91d8140d">pstoeps</a>(tmpfile, bbox=None, rotated=False):</div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"> 1386</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l01387" name="l01387"></a><span class="lineno"> 1387</span><span class="stringliteral">    Convert the postscript to encapsulated postscript.  The bbox of</span></div>
<div class="line"><a id="l01388" name="l01388"></a><span class="lineno"> 1388</span><span class="stringliteral">    the eps file will be replaced with the given *bbox* argument. If</span></div>
<div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span><span class="stringliteral">    None, original bbox will be used.</span></div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span> </div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span>    epsfile = tmpfile + <span class="stringliteral">&#39;.eps&#39;</span></div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span>    <span class="keyword">with</span> open(epsfile, <span class="stringliteral">&#39;wb&#39;</span>) <span class="keyword">as</span> epsh, open(tmpfile, <span class="stringliteral">&#39;rb&#39;</span>) <span class="keyword">as</span> tmph:</div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span>        write = epsh.write</div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span>        <span class="comment"># Modify the header:</span></div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span>        <span class="keywordflow">for</span> line <span class="keywordflow">in</span> tmph:</div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span>            <span class="keywordflow">if</span> line.startswith(b<span class="stringliteral">&#39;%!PS&#39;</span>):</div>
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span>                write(b<span class="stringliteral">&quot;%!PS-Adobe-3.0 EPSF-3.0\n&quot;</span>)</div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span>                <span class="keywordflow">if</span> bbox:</div>
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"> 1400</span>                    write(<a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#a8c2b522317fb7c3c112d1ae1536ed41d">_get_bbox_header</a>(bbox).encode(<span class="stringliteral">&#39;ascii&#39;</span>) + b<span class="stringliteral">&#39;\n&#39;</span>)</div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"> 1401</span>            <span class="keywordflow">elif</span> line.startswith(b<span class="stringliteral">&#39;%%EndComments&#39;</span>):</div>
<div class="line"><a id="l01402" name="l01402"></a><span class="lineno"> 1402</span>                write(line)</div>
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"> 1403</span>                write(b<span class="stringliteral">&#39;%%BeginProlog\n&#39;</span></div>
<div class="line"><a id="l01404" name="l01404"></a><span class="lineno"> 1404</span>                      b<span class="stringliteral">&#39;save\n&#39;</span></div>
<div class="line"><a id="l01405" name="l01405"></a><span class="lineno"> 1405</span>                      b<span class="stringliteral">&#39;countdictstack\n&#39;</span></div>
<div class="line"><a id="l01406" name="l01406"></a><span class="lineno"> 1406</span>                      b<span class="stringliteral">&#39;mark\n&#39;</span></div>
<div class="line"><a id="l01407" name="l01407"></a><span class="lineno"> 1407</span>                      b<span class="stringliteral">&#39;newpath\n&#39;</span></div>
<div class="line"><a id="l01408" name="l01408"></a><span class="lineno"> 1408</span>                      b<span class="stringliteral">&#39;/showpage {} def\n&#39;</span></div>
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"> 1409</span>                      b<span class="stringliteral">&#39;/setpagedevice {pop} def\n&#39;</span></div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"> 1410</span>                      b<span class="stringliteral">&#39;%%EndProlog\n&#39;</span></div>
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"> 1411</span>                      b<span class="stringliteral">&#39;%%Page 1 1\n&#39;</span>)</div>
<div class="line"><a id="l01412" name="l01412"></a><span class="lineno"> 1412</span>                <span class="keywordflow">if</span> rotated:  <span class="comment"># The output eps file need to be rotated.</span></div>
<div class="line"><a id="l01413" name="l01413"></a><span class="lineno"> 1413</span>                    write(<a class="code hl_function" href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#a00ed433cea8b943758f8779c6789c353">_get_rotate_command</a>(bbox).encode(<span class="stringliteral">&#39;ascii&#39;</span>) + b<span class="stringliteral">&#39;\n&#39;</span>)</div>
<div class="line"><a id="l01414" name="l01414"></a><span class="lineno"> 1414</span>                <span class="keywordflow">break</span></div>
<div class="line"><a id="l01415" name="l01415"></a><span class="lineno"> 1415</span>            <span class="keywordflow">elif</span> bbox <span class="keywordflow">and</span> line.startswith((b<span class="stringliteral">&#39;%%Bound&#39;</span>, b<span class="stringliteral">&#39;%%HiResBound&#39;</span>,</div>
<div class="line"><a id="l01416" name="l01416"></a><span class="lineno"> 1416</span>                                           b<span class="stringliteral">&#39;%%DocumentMedia&#39;</span>, b<span class="stringliteral">&#39;%%Pages&#39;</span>)):</div>
<div class="line"><a id="l01417" name="l01417"></a><span class="lineno"> 1417</span>                <span class="keywordflow">pass</span></div>
<div class="line"><a id="l01418" name="l01418"></a><span class="lineno"> 1418</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l01419" name="l01419"></a><span class="lineno"> 1419</span>                write(line)</div>
<div class="line"><a id="l01420" name="l01420"></a><span class="lineno"> 1420</span>        <span class="comment"># Now rewrite the rest of the file, and modify the trailer.</span></div>
<div class="line"><a id="l01421" name="l01421"></a><span class="lineno"> 1421</span>        <span class="comment"># This is done in a second loop such that the header of the embedded</span></div>
<div class="line"><a id="l01422" name="l01422"></a><span class="lineno"> 1422</span>        <span class="comment"># eps file is not modified.</span></div>
<div class="line"><a id="l01423" name="l01423"></a><span class="lineno"> 1423</span>        <span class="keywordflow">for</span> line <span class="keywordflow">in</span> tmph:</div>
<div class="line"><a id="l01424" name="l01424"></a><span class="lineno"> 1424</span>            <span class="keywordflow">if</span> line.startswith(b<span class="stringliteral">&#39;%%EOF&#39;</span>):</div>
<div class="line"><a id="l01425" name="l01425"></a><span class="lineno"> 1425</span>                write(b<span class="stringliteral">&#39;cleartomark\n&#39;</span></div>
<div class="line"><a id="l01426" name="l01426"></a><span class="lineno"> 1426</span>                      b<span class="stringliteral">&#39;countdictstack\n&#39;</span></div>
<div class="line"><a id="l01427" name="l01427"></a><span class="lineno"> 1427</span>                      b<span class="stringliteral">&#39;exch sub { end } repeat\n&#39;</span></div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span>                      b<span class="stringliteral">&#39;restore\n&#39;</span></div>
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"> 1429</span>                      b<span class="stringliteral">&#39;showpage\n&#39;</span></div>
<div class="line"><a id="l01430" name="l01430"></a><span class="lineno"> 1430</span>                      b<span class="stringliteral">&#39;%%EOF\n&#39;</span>)</div>
<div class="line"><a id="l01431" name="l01431"></a><span class="lineno"> 1431</span>            <span class="keywordflow">elif</span> line.startswith(b<span class="stringliteral">&#39;%%PageBoundingBox&#39;</span>):</div>
<div class="line"><a id="l01432" name="l01432"></a><span class="lineno"> 1432</span>                <span class="keywordflow">pass</span></div>
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"> 1433</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l01434" name="l01434"></a><span class="lineno"> 1434</span>                write(line)</div>
<div class="line"><a id="l01435" name="l01435"></a><span class="lineno"> 1435</span> </div>
<div class="line"><a id="l01436" name="l01436"></a><span class="lineno"> 1436</span>    os.remove(tmpfile)</div>
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"> 1437</span>    shutil.move(epsfile, tmpfile)</div>
<div class="line"><a id="l01438" name="l01438"></a><span class="lineno"> 1438</span> </div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span> </div>
</div>
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"> 1440</span>FigureManagerPS = FigureManagerBase</div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"> 1441</span> </div>
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"> 1442</span> </div>
<div class="line"><a id="l01443" name="l01443"></a><span class="lineno"> 1443</span><span class="comment"># The following Python dictionary psDefs contains the entries for the</span></div>
<div class="line"><a id="l01444" name="l01444"></a><span class="lineno"> 1444</span><span class="comment"># PostScript dictionary mpldict.  This dictionary implements most of</span></div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span><span class="comment"># the matplotlib primitives and some abbreviations.</span></div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span><span class="comment">#</span></div>
<div class="line"><a id="l01447" name="l01447"></a><span class="lineno"> 1447</span><span class="comment"># References:</span></div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"> 1448</span><span class="comment"># https://www.adobe.com/content/dam/acom/en/devnet/actionscript/articles/PLRM.pdf</span></div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span><span class="comment"># http://preserve.mactech.com/articles/mactech/Vol.09/09.04/PostscriptTutorial</span></div>
<div class="line"><a id="l01450" name="l01450"></a><span class="lineno"> 1450</span><span class="comment"># http://www.math.ubc.ca/people/faculty/cass/graphics/text/www/</span></div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"> 1451</span><span class="comment">#</span></div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"> 1452</span> </div>
<div class="line"><a id="l01453" name="l01453"></a><span class="lineno"> 1453</span><span class="comment"># The usage comments use the notation of the operator summary</span></div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span><span class="comment"># in the PostScript Language reference manual.</span></div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"> 1455</span>_psDefs = [</div>
<div class="line"><a id="l01456" name="l01456"></a><span class="lineno"> 1456</span>    <span class="comment"># name proc  *_d*  -</span></div>
<div class="line"><a id="l01457" name="l01457"></a><span class="lineno"> 1457</span>    <span class="comment"># Note that this cannot be bound to /d, because when embedding a Type3 font</span></div>
<div class="line"><a id="l01458" name="l01458"></a><span class="lineno"> 1458</span>    <span class="comment"># we may want to define a &quot;d&quot; glyph using &quot;/d{...} d&quot; which would locally</span></div>
<div class="line"><a id="l01459" name="l01459"></a><span class="lineno"> 1459</span>    <span class="comment"># overwrite the definition.</span></div>
<div class="line"><a id="l01460" name="l01460"></a><span class="lineno"> 1460</span>    <span class="stringliteral">&quot;/_d { bind def } bind def&quot;</span>,</div>
<div class="line"><a id="l01461" name="l01461"></a><span class="lineno"> 1461</span>    <span class="comment"># x y  *m*  -</span></div>
<div class="line"><a id="l01462" name="l01462"></a><span class="lineno"> 1462</span>    <span class="stringliteral">&quot;/m { moveto } _d&quot;</span>,</div>
<div class="line"><a id="l01463" name="l01463"></a><span class="lineno"> 1463</span>    <span class="comment"># x y  *l*  -</span></div>
<div class="line"><a id="l01464" name="l01464"></a><span class="lineno"> 1464</span>    <span class="stringliteral">&quot;/l { lineto } _d&quot;</span>,</div>
<div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span>    <span class="comment"># x y  *r*  -</span></div>
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"> 1466</span>    <span class="stringliteral">&quot;/r { rlineto } _d&quot;</span>,</div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span>    <span class="comment"># x1 y1 x2 y2 x y *c*  -</span></div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span>    <span class="stringliteral">&quot;/c { curveto } _d&quot;</span>,</div>
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"> 1469</span>    <span class="comment"># *cl*  -</span></div>
<div class="line"><a id="l01470" name="l01470"></a><span class="lineno"> 1470</span>    <span class="stringliteral">&quot;/cl { closepath } _d&quot;</span>,</div>
<div class="line"><a id="l01471" name="l01471"></a><span class="lineno"> 1471</span>    <span class="comment"># *ce*  -</span></div>
<div class="line"><a id="l01472" name="l01472"></a><span class="lineno"> 1472</span>    <span class="stringliteral">&quot;/ce { closepath eofill } _d&quot;</span>,</div>
<div class="line"><a id="l01473" name="l01473"></a><span class="lineno"> 1473</span>    <span class="comment"># wx wy llx lly urx ury  *setcachedevice*  -</span></div>
<div class="line"><a id="l01474" name="l01474"></a><span class="lineno"> 1474</span>    <span class="stringliteral">&quot;/sc { setcachedevice } _d&quot;</span>,</div>
<div class="line"><a id="l01475" name="l01475"></a><span class="lineno"> 1475</span>]</div>
<div class="line"><a id="l01476" name="l01476"></a><span class="lineno"> 1476</span> </div>
<div class="line"><a id="l01477" name="l01477"></a><span class="lineno"> 1477</span> </div>
<div class="line"><a id="l01478" name="l01478"></a><span class="lineno"> 1478</span><span class="preprocessor">@_Backend.export</span></div>
<div class="foldopen" id="foldopen01479" data-start="" data-end="">
<div class="line"><a id="l01479" name="l01479"></a><span class="lineno"><a class="line" href="../../da/dca/classmatplotlib_1_1backends_1_1backend__ps_1_1__BackendPS.html"> 1479</a></span><span class="keyword">class </span><a class="code hl_class" href="../../da/dca/classmatplotlib_1_1backends_1_1backend__ps_1_1__BackendPS.html">_BackendPS</a>(<a class="code hl_class" href="../../df/dd0/classmatplotlib_1_1backend__bases_1_1__Backend.html">_Backend</a>):</div>
<div class="line"><a id="l01480" name="l01480"></a><span class="lineno"> 1480</span>    backend_version = <span class="stringliteral">&#39;Level II&#39;</span></div>
<div class="line"><a id="l01481" name="l01481"></a><span class="lineno"> 1481</span>    FigureCanvas = FigureCanvasPS</div>
</div>
<div class="ttc" id="aclassEnum_html"><div class="ttname"><a href="../../d2/d55/classEnum.html">Enum</a></div></div>
<div class="ttc" id="aclassStringIO_html"><div class="ttname"><a href="../../d1/d8d/classStringIO.html">StringIO</a></div></div>
<div class="ttc" id="aclassValueError_html"><div class="ttname"><a href="../../de/d40/classValueError.html">ValueError</a></div></div>
<div class="ttc" id="aclassfontTools_1_1pens_1_1boundsPen_1_1BoundsPen_html"><div class="ttname"><a href="../../d8/dc5/classfontTools_1_1pens_1_1boundsPen_1_1BoundsPen.html">fontTools.pens.boundsPen.BoundsPen</a></div><div class="ttdef"><b>Definition</b> <a href="../../d0/ddd/boundsPen_8py_source.html#l00068">boundsPen.py:68</a></div></div>
<div class="ttc" id="aclassfontTools_1_1ttLib_1_1ttFont_1_1TTFont_html"><div class="ttname"><a href="../../d8/d0d/classfontTools_1_1ttLib_1_1ttFont_1_1TTFont.html">fontTools.ttLib.ttFont.TTFont</a></div><div class="ttdef"><b>Definition</b> <a href="../../da/d7f/ttFont_8py_source.html#l00022">ttFont.py:22</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backend__bases_1_1FigureCanvasBase_html"><div class="ttname"><a href="../../d9/d5f/classmatplotlib_1_1backend__bases_1_1FigureCanvasBase.html">matplotlib.backend_bases.FigureCanvasBase</a></div><div class="ttdef"><b>Definition</b> <a href="../../d1/d0c/backend__bases_8py_source.html#l01661">backend_bases.py:1661</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backend__bases_1_1FigureCanvasBase_html_aa5120a3253575aac5d0e280f5debcff7"><div class="ttname"><a href="../../d9/d5f/classmatplotlib_1_1backend__bases_1_1FigureCanvasBase.html#aa5120a3253575aac5d0e280f5debcff7">matplotlib.backend_bases.FigureCanvasBase.figure</a></div><div class="ttdeci">figure</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d0c/backend__bases_8py_source.html#l01717">backend_bases.py:1717</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backend__bases_1_1RendererBase_html_a17c473534904023236d40ef772cc239a"><div class="ttname"><a href="../../d0/da8/classmatplotlib_1_1backend__bases_1_1RendererBase.html#a17c473534904023236d40ef772cc239a">matplotlib.backend_bases.RendererBase._iter_collection_raw_paths</a></div><div class="ttdeci">_iter_collection_raw_paths(self, master_transform, paths, all_transforms)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d0c/backend__bases_8py_source.html#l00290">backend_bases.py:291</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backend__bases_1_1RendererBase_html_a5949e6973c36e18d99075c10481b4d91"><div class="ttname"><a href="../../d0/da8/classmatplotlib_1_1backend__bases_1_1RendererBase.html#a5949e6973c36e18d99075c10481b4d91">matplotlib.backend_bases.RendererBase.get_text_width_height_descent</a></div><div class="ttdeci">get_text_width_height_descent(self, s, prop, ismath)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d0c/backend__bases_8py_source.html#l00555">backend_bases.py:555</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backend__bases_1_1RendererBase_html_a5eaf90d1255ec46894a498109fcba232"><div class="ttname"><a href="../../d0/da8/classmatplotlib_1_1backend__bases_1_1RendererBase.html#a5eaf90d1255ec46894a498109fcba232">matplotlib.backend_bases.RendererBase.draw_text</a></div><div class="ttdeci">draw_text(self, gc, x, y, s, prop, angle, ismath=False, mtext=None)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d0c/backend__bases_8py_source.html#l00494">backend_bases.py:494</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backend__bases_1_1RendererBase_html_a6ccfad0a85e2dda1bb5f7f50cbdbf4c9"><div class="ttname"><a href="../../d0/da8/classmatplotlib_1_1backend__bases_1_1RendererBase.html#a6ccfad0a85e2dda1bb5f7f50cbdbf4c9">matplotlib.backend_bases.RendererBase._text2path</a></div><div class="ttdeci">_text2path</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d0c/backend__bases_8py_source.html#l00153">backend_bases.py:153</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backend__bases_1_1RendererBase_html_acc5626c67cc5540e78d9b5837d2afa79"><div class="ttname"><a href="../../d0/da8/classmatplotlib_1_1backend__bases_1_1RendererBase.html#acc5626c67cc5540e78d9b5837d2afa79">matplotlib.backend_bases.RendererBase._iter_collection_uses_per_path</a></div><div class="ttdeci">_iter_collection_uses_per_path(self, paths, all_transforms, offsets, facecolors, edgecolors)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d0c/backend__bases_8py_source.html#l00319">backend_bases.py:320</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backend__bases_1_1RendererBase_html_ad4885c56245f1820b77fae84e386fc07"><div class="ttname"><a href="../../d0/da8/classmatplotlib_1_1backend__bases_1_1RendererBase.html#ad4885c56245f1820b77fae84e386fc07">matplotlib.backend_bases.RendererBase._iter_collection</a></div><div class="ttdeci">_iter_collection(self, gc, path_ids, offsets, offset_trans, facecolors, edgecolors, linewidths, linestyles, antialiaseds, urls, offset_position)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d0c/backend__bases_8py_source.html#l00336">backend_bases.py:338</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backend__bases_1_1RendererBase_html_adf772b793ed6652222aca7d21d8a0ae6"><div class="ttname"><a href="../../d0/da8/classmatplotlib_1_1backend__bases_1_1RendererBase.html#adf772b793ed6652222aca7d21d8a0ae6">matplotlib.backend_bases.RendererBase.draw_tex</a></div><div class="ttdeci">draw_tex(self, gc, x, y, s, prop, angle, *, mtext=None)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d0c/backend__bases_8py_source.html#l00471">backend_bases.py:471</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backend__bases_1_1__Backend_html"><div class="ttname"><a href="../../df/dd0/classmatplotlib_1_1backend__bases_1_1__Backend.html">matplotlib.backend_bases._Backend</a></div><div class="ttdef"><b>Definition</b> <a href="../../d1/d0c/backend__bases_8py_source.html#l03471">backend_bases.py:3471</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1CharacterTracker_html"><div class="ttname"><a href="../../d7/d30/classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1CharacterTracker.html">matplotlib.backends._backend_pdf_ps.CharacterTracker</a></div><div class="ttdef"><b>Definition</b> <a href="../../d0/d5b/__backend__pdf__ps_8py_source.html#l00098">_backend_pdf_ps.py:98</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase_html"><div class="ttname"><a href="../../da/d77/classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase.html">matplotlib.backends._backend_pdf_ps.RendererPDFPSBase</a></div><div class="ttdef"><b>Definition</b> <a href="../../d0/d5b/__backend__pdf__ps_8py_source.html#l00120">_backend_pdf_ps.py:120</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase_html_a131284b65ec191c070a364d1e1118555"><div class="ttname"><a href="../../da/d77/classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase.html#a131284b65ec191c070a364d1e1118555">matplotlib.backends._backend_pdf_ps.RendererPDFPSBase.height</a></div><div class="ttdeci">height</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d5b/__backend__pdf__ps_8py_source.html#l00128">_backend_pdf_ps.py:128</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase_html_a55856d35dcfdf98307cb10fb3b1643ba"><div class="ttname"><a href="../../da/d77/classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase.html#a55856d35dcfdf98307cb10fb3b1643ba">matplotlib.backends._backend_pdf_ps.RendererPDFPSBase.width</a></div><div class="ttdeci">width</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d5b/__backend__pdf__ps_8py_source.html#l00127">_backend_pdf_ps.py:127</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase_html_aa8087369e7d3e0e11b20b5ec9630cceb"><div class="ttname"><a href="../../da/d77/classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase.html#aa8087369e7d3e0e11b20b5ec9630cceb">matplotlib.backends._backend_pdf_ps.RendererPDFPSBase._get_font_afm</a></div><div class="ttdeci">_get_font_afm(self, prop)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d5b/__backend__pdf__ps_8py_source.html#l00173">_backend_pdf_ps.py:173</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase_html_adaae3c2f2d8888b2bab14a1abfc890b1"><div class="ttname"><a href="../../da/d77/classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase.html#adaae3c2f2d8888b2bab14a1abfc890b1">matplotlib.backends._backend_pdf_ps.RendererPDFPSBase._get_font_ttf</a></div><div class="ttdeci">_get_font_ttf(self, prop)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d5b/__backend__pdf__ps_8py_source.html#l00178">_backend_pdf_ps.py:178</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__mixed_1_1MixedModeRenderer_html"><div class="ttname"><a href="../../d9/da4/classmatplotlib_1_1backends_1_1backend__mixed_1_1MixedModeRenderer.html">matplotlib.backends.backend_mixed.MixedModeRenderer</a></div><div class="ttdef"><b>Definition</b> <a href="../../d5/d40/backend__mixed_8py_source.html#l00008">backend_mixed.py:8</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS_html"><div class="ttname"><a href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html">matplotlib.backends.backend_ps.FigureCanvasPS</a></div><div class="ttdef"><b>Definition</b> <a href="#l00953">backend_ps.py:953</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS_html_a254199f7f4c77b6964d6b159b085c091"><div class="ttname"><a href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html#a254199f7f4c77b6964d6b159b085c091">matplotlib.backends.backend_ps.FigureCanvasPS._pswriter</a></div><div class="ttdeci">_pswriter</div><div class="ttdef"><b>Definition</b> <a href="#l01042">backend_ps.py:1042</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS_html_a80d316181bdac38635efb4bb96cdbc8a"><div class="ttname"><a href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html#a80d316181bdac38635efb4bb96cdbc8a">matplotlib.backends.backend_ps.FigureCanvasPS.draw</a></div><div class="ttdeci">draw(self)</div><div class="ttdef"><b>Definition</b> <a href="#l01222">backend_ps.py:1222</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS_html_a95d663979aeb3f8d416193492ba331e5"><div class="ttname"><a href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html#a95d663979aeb3f8d416193492ba331e5">matplotlib.backends.backend_ps.FigureCanvasPS.get_default_filetype</a></div><div class="ttdeci">get_default_filetype(self)</div><div class="ttdef"><b>Definition</b> <a href="#l00958">backend_ps.py:958</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS_html_abc440dcf54a234feb6c391494ec557cc"><div class="ttname"><a href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html#abc440dcf54a234feb6c391494ec557cc">matplotlib.backends.backend_ps.FigureCanvasPS._print_figure_tex</a></div><div class="ttdeci">_print_figure_tex(self, fmt, outfile, *, dpi, dsc_comments, orientation, papertype, bbox_inches_restore=None)</div><div class="ttdef"><b>Definition</b> <a href="#l01132">backend_ps.py:1135</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS_html_aeda3dc7bb2ea81736a2b347b266de134"><div class="ttname"><a href="../../d6/d1c/classmatplotlib_1_1backends_1_1backend__ps_1_1FigureCanvasPS.html#aeda3dc7bb2ea81736a2b347b266de134">matplotlib.backends.backend_ps.FigureCanvasPS._print_figure</a></div><div class="ttdeci">_print_figure(self, fmt, outfile, *, dpi, dsc_comments, orientation, papertype, bbox_inches_restore=None)</div><div class="ttdef"><b>Definition</b> <a href="#l01003">backend_ps.py:1006</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html">matplotlib.backends.backend_ps.RendererPS</a></div><div class="ttdef"><b>Definition</b> <a href="#l00398">backend_ps.py:398</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_a054561c327369470c9c7e928edf84c10"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a054561c327369470c9c7e928edf84c10">matplotlib.backends.backend_ps.RendererPS._character_tracker</a></div><div class="ttdeci">_character_tracker</div><div class="ttdef"><b>Definition</b> <a href="#l00431">backend_ps.py:431</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_a0cab6a6010b3cce17d8378360d2c9613"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a0cab6a6010b3cce17d8378360d2c9613">matplotlib.backends.backend_ps.RendererPS.linewidth</a></div><div class="ttdeci">linewidth</div><div class="ttdef"><b>Definition</b> <a href="#l00420">backend_ps.py:420</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_a12770e854540717857c7f98ce02cf472"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a12770e854540717857c7f98ce02cf472">matplotlib.backends.backend_ps.RendererPS.linejoin</a></div><div class="ttdeci">linejoin</div><div class="ttdef"><b>Definition</b> <a href="#l00421">backend_ps.py:421</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_a1ac0b0108616cf6955d7829f60bcc6dd"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a1ac0b0108616cf6955d7829f60bcc6dd">matplotlib.backends.backend_ps.RendererPS.set_font</a></div><div class="ttdeci">set_font(self, fontname, fontsize, store=True)</div><div class="ttdef"><b>Definition</b> <a href="#l00501">backend_ps.py:501</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_a1b8b395e90c030fa49fc3c39fbde61e3"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a1b8b395e90c030fa49fc3c39fbde61e3">matplotlib.backends.backend_ps.RendererPS.set_linejoin</a></div><div class="ttdeci">set_linejoin(self, linejoin, store=True)</div><div class="ttdef"><b>Definition</b> <a href="#l00470">backend_ps.py:470</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_a2810ab9009dbdb0e0cc9cfea9279236d"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a2810ab9009dbdb0e0cc9cfea9279236d">matplotlib.backends.backend_ps.RendererPS._convert_path</a></div><div class="ttdeci">_convert_path(self, path, transform, clip=False, simplify=None)</div><div class="ttdef"><b>Definition</b> <a href="#l00548">backend_ps.py:548</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_a337cd9c2a56fb7181ed9c59a820b02f8"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a337cd9c2a56fb7181ed9c59a820b02f8">matplotlib.backends.backend_ps.RendererPS.textcnt</a></div><div class="ttdeci">int textcnt</div><div class="ttdef"><b>Definition</b> <a href="#l00414">backend_ps.py:414</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_a3a73de7fa5c86f8bfa3971b3ffc9b5ae"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a3a73de7fa5c86f8bfa3971b3ffc9b5ae">matplotlib.backends.backend_ps.RendererPS.fontsize</a></div><div class="ttdeci">fontsize</div><div class="ttdef"><b>Definition</b> <a href="#l00425">backend_ps.py:425</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_a481eaf9535daf40cef8986de2bed0131"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a481eaf9535daf40cef8986de2bed0131">matplotlib.backends.backend_ps.RendererPS._linecap_cmd</a></div><div class="ttdeci">_linecap_cmd(linecap)</div><div class="ttdef"><b>Definition</b> <a href="#l00477">backend_ps.py:477</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_a4a4222f06b3b40605ac418d59c7a2afd"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a4a4222f06b3b40605ac418d59c7a2afd">matplotlib.backends.backend_ps.RendererPS._logwarn_once</a></div><div class="ttdeci">_logwarn_once</div><div class="ttdef"><b>Definition</b> <a href="#l00432">backend_ps.py:432</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_a4b29ab79f42b9e94a106c9ac463cf245"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a4b29ab79f42b9e94a106c9ac463cf245">matplotlib.backends.backend_ps.RendererPS.draw_mathtext</a></div><div class="ttdeci">draw_mathtext(self, gc, x, y, s, prop, angle)</div><div class="ttdef"><b>Definition</b> <a href="#l00820">backend_ps.py:820</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_a4db439150b547e0e7cc42d1c480763d0"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a4db439150b547e0e7cc42d1c480763d0">matplotlib.backends.backend_ps.RendererPS.psfrag</a></div><div class="ttdeci">list psfrag</div><div class="ttdef"><b>Definition</b> <a href="#l00415">backend_ps.py:415</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_a5705536917fd0aa049aa86932cf006f3"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a5705536917fd0aa049aa86932cf006f3">matplotlib.backends.backend_ps.RendererPS.set_linedash</a></div><div class="ttdeci">set_linedash(self, offset, seq, store=True)</div><div class="ttdef"><b>Definition</b> <a href="#l00489">backend_ps.py:489</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_a57b06323c0ea632d4e60d96282caba3b"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a57b06323c0ea632d4e60d96282caba3b">matplotlib.backends.backend_ps.RendererPS.draw_image</a></div><div class="ttdeci">draw_image(self, gc, x, y, im, transform=None)</div><div class="ttdef"><b>Definition</b> <a href="#l00580">backend_ps.py:580</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_a58e6f503475b512d57b61b23c97a8710"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a58e6f503475b512d57b61b23c97a8710">matplotlib.backends.backend_ps.RendererPS._path_collection_id</a></div><div class="ttdeci">int _path_collection_id</div><div class="ttdef"><b>Definition</b> <a href="#l00429">backend_ps.py:429</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_a5f75886be700b29a8ad011f4552a6f77"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a5f75886be700b29a8ad011f4552a6f77">matplotlib.backends.backend_ps.RendererPS.draw_markers</a></div><div class="ttdeci">draw_markers(self, gc, marker_path, marker_trans, path, trans, rgbFace=None)</div><div class="ttdef"><b>Definition</b> <a href="#l00621">backend_ps.py:622</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_a5fee983d9dbc11a5d8da52a1789c401b"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a5fee983d9dbc11a5d8da52a1789c401b">matplotlib.backends.backend_ps.RendererPS.draw_gouraud_triangles</a></div><div class="ttdeci">draw_gouraud_triangles(self, gc, points, colors, trans)</div><div class="ttdef"><b>Definition</b> <a href="#l00847">backend_ps.py:847</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_a640119723c04ce66bd39fbfb00be3b49"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a640119723c04ce66bd39fbfb00be3b49">matplotlib.backends.backend_ps.RendererPS._clip_paths</a></div><div class="ttdeci">dict _clip_paths</div><div class="ttdef"><b>Definition</b> <a href="#l00428">backend_ps.py:428</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_a6ab561503c959df24bc3ebba97207b26"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ab561503c959df24bc3ebba97207b26">matplotlib.backends.backend_ps.RendererPS.linedash</a></div><div class="ttdeci">tuple linedash</div><div class="ttdef"><b>Definition</b> <a href="#l00423">backend_ps.py:423</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_a6ca6be2a3b8d2d4e468f0482875d1834"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a6ca6be2a3b8d2d4e468f0482875d1834">matplotlib.backends.backend_ps.RendererPS._pswriter</a></div><div class="ttdeci">_pswriter</div><div class="ttdef"><b>Definition</b> <a href="#l00412">backend_ps.py:412</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_a757bfe78bbdc3bab14cb4fd11ccc9aa8"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a757bfe78bbdc3bab14cb4fd11ccc9aa8">matplotlib.backends.backend_ps.RendererPS._hatches</a></div><div class="ttdeci">dict _hatches</div><div class="ttdef"><b>Definition</b> <a href="#l00426">backend_ps.py:426</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_a7b6134f13e2a787ff72a74a582ea7841"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a7b6134f13e2a787ff72a74a582ea7841">matplotlib.backends.backend_ps.RendererPS.image_magnification</a></div><div class="ttdeci">int image_magnification</div><div class="ttdef"><b>Definition</b> <a href="#l00427">backend_ps.py:427</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_a8134de56b3ea98eb7772ba46c4ecbdff"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a8134de56b3ea98eb7772ba46c4ecbdff">matplotlib.backends.backend_ps.RendererPS.draw_text</a></div><div class="ttdeci">draw_text(self, gc, x, y, s, prop, angle, ismath=False, mtext=None)</div><div class="ttdef"><b>Definition</b> <a href="#l00761">backend_ps.py:761</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_a8dc7ed4db78badc02959c9c29a3ff212"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a8dc7ed4db78badc02959c9c29a3ff212">matplotlib.backends.backend_ps.RendererPS.draw_tex</a></div><div class="ttdeci">draw_tex(self, gc, x, y, s, prop, angle, *, mtext=None)</div><div class="ttdef"><b>Definition</b> <a href="#l00719">backend_ps.py:719</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_a9741d4fc04c8a7b5d24d41fc80c82cff"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#a9741d4fc04c8a7b5d24d41fc80c82cff">matplotlib.backends.backend_ps.RendererPS.color</a></div><div class="ttdeci">tuple color</div><div class="ttdef"><b>Definition</b> <a href="#l00419">backend_ps.py:419</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_aa62fe0b964daed13b656c56766a03ec5"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#aa62fe0b964daed13b656c56766a03ec5">matplotlib.backends.backend_ps.RendererPS.set_linecap</a></div><div class="ttdeci">set_linecap(self, linecap, store=True)</div><div class="ttdef"><b>Definition</b> <a href="#l00483">backend_ps.py:483</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_aa9044e3440d679d0851ccf72b1e3e157"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#aa9044e3440d679d0851ccf72b1e3e157">matplotlib.backends.backend_ps.RendererPS._is_transparent</a></div><div class="ttdeci">_is_transparent(self, rgb_or_rgba)</div><div class="ttdef"><b>Definition</b> <a href="#l00434">backend_ps.py:434</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_ac73ffd7d2760a2513d952193fcb66397"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#ac73ffd7d2760a2513d952193fcb66397">matplotlib.backends.backend_ps.RendererPS._get_clip_cmd</a></div><div class="ttdeci">_get_clip_cmd(self, gc)</div><div class="ttdef"><b>Definition</b> <a href="#l00557">backend_ps.py:557</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_ac862e671995010ba90eb5d916bf82168"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#ac862e671995010ba90eb5d916bf82168">matplotlib.backends.backend_ps.RendererPS.draw_path</a></div><div class="ttdeci">draw_path(self, gc, path, transform, rgbFace=None)</div><div class="ttdef"><b>Definition</b> <a href="#l00613">backend_ps.py:613</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_acaa9986fe93740d50865b1ec99a0f502"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#acaa9986fe93740d50865b1ec99a0f502">matplotlib.backends.backend_ps.RendererPS.fontname</a></div><div class="ttdeci">fontname</div><div class="ttdef"><b>Definition</b> <a href="#l00424">backend_ps.py:424</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_ad37fa70d15f76a9f7cbe6adeb64e6d94"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#ad37fa70d15f76a9f7cbe6adeb64e6d94">matplotlib.backends.backend_ps.RendererPS.create_hatch</a></div><div class="ttdeci">create_hatch(self, hatch, linewidth)</div><div class="ttdef"><b>Definition</b> <a href="#l00508">backend_ps.py:508</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_ada541e2271fc257a64325deb5c727731"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#ada541e2271fc257a64325deb5c727731">matplotlib.backends.backend_ps.RendererPS._linejoin_cmd</a></div><div class="ttdeci">_linejoin_cmd(linejoin)</div><div class="ttdef"><b>Definition</b> <a href="#l00464">backend_ps.py:464</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_adb33d0ab82babb05eef5425ff90956e1"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#adb33d0ab82babb05eef5425ff90956e1">matplotlib.backends.backend_ps.RendererPS.linecap</a></div><div class="ttdeci">linecap</div><div class="ttdef"><b>Definition</b> <a href="#l00422">backend_ps.py:422</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_ae30356702ba1b1109b1686f1441bc612"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#ae30356702ba1b1109b1686f1441bc612">matplotlib.backends.backend_ps.RendererPS.get_image_magnification</a></div><div class="ttdeci">get_image_magnification(self)</div><div class="ttdef"><b>Definition</b> <a href="#l00540">backend_ps.py:540</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_ae427b8b5a064427bfb5f9c41b3223c9f"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#ae427b8b5a064427bfb5f9c41b3223c9f">matplotlib.backends.backend_ps.RendererPS.set_linewidth</a></div><div class="ttdeci">set_linewidth(self, linewidth, store=True)</div><div class="ttdef"><b>Definition</b> <a href="#l00456">backend_ps.py:456</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_af1844bfbe6f6a7eee348d70f8cf566e1"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#af1844bfbe6f6a7eee348d70f8cf566e1">matplotlib.backends.backend_ps.RendererPS.draw_path_collection</a></div><div class="ttdeci">draw_path_collection(self, gc, master_transform, paths, all_transforms, offsets, offset_trans, facecolors, edgecolors, linewidths, linestyles, antialiaseds, urls, offset_position)</div><div class="ttdef"><b>Definition</b> <a href="#l00674">backend_ps.py:677</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_af5ddad781f61ad35a408149cb1c498bf"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#af5ddad781f61ad35a408149cb1c498bf">matplotlib.backends.backend_ps.RendererPS.imagedpi</a></div><div class="ttdeci">imagedpi</div><div class="ttdef"><b>Definition</b> <a href="#l00416">backend_ps.py:416</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_af80283aeb624031b979557db4368c180"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#af80283aeb624031b979557db4368c180">matplotlib.backends.backend_ps.RendererPS.set_color</a></div><div class="ttdeci">set_color(self, r, g, b, store=True)</div><div class="ttdef"><b>Definition</b> <a href="#l00448">backend_ps.py:448</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS_html_affed4a1d8eeb052f2d043fc7b9ca0a0a"><div class="ttname"><a href="../../d9/dff/classmatplotlib_1_1backends_1_1backend__ps_1_1RendererPS.html#affed4a1d8eeb052f2d043fc7b9ca0a0a">matplotlib.backends.backend_ps.RendererPS._draw_ps</a></div><div class="ttdeci">_draw_ps(self, ps, gc, rgbFace, *, fill=True, stroke=True)</div><div class="ttdef"><b>Definition</b> <a href="#l00894">backend_ps.py:894</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1__BackendPS_html"><div class="ttname"><a href="../../da/dca/classmatplotlib_1_1backends_1_1backend__ps_1_1__BackendPS.html">matplotlib.backends.backend_ps._BackendPS</a></div><div class="ttdef"><b>Definition</b> <a href="#l01479">backend_ps.py:1479</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1__Orientation_html"><div class="ttname"><a href="../../db/d7c/classmatplotlib_1_1backends_1_1backend__ps_1_1__Orientation.html">matplotlib.backends.backend_ps._Orientation</a></div><div class="ttdef"><b>Definition</b> <a href="#l00946">backend_ps.py:946</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1backends_1_1backend__ps_1_1__Orientation_html_a09996de45e76277baf9267541ea79c41"><div class="ttname"><a href="../../db/d7c/classmatplotlib_1_1backends_1_1backend__ps_1_1__Orientation.html#a09996de45e76277baf9267541ea79c41">matplotlib.backends.backend_ps._Orientation.name</a></div><div class="ttdeci">str name</div><div class="ttdef"><b>Definition</b> <a href="#l00950">backend_ps.py:950</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1path_1_1Path_html"><div class="ttname"><a href="../../d7/d6d/classmatplotlib_1_1path_1_1Path.html">matplotlib.path.Path</a></div><div class="ttdef"><b>Definition</b> <a href="../../d0/d7a/path_8py_source.html#l00024">path.py:24</a></div></div>
<div class="ttc" id="aclassmatplotlib_1_1texmanager_1_1TexManager_html"><div class="ttname"><a href="../../da/d93/classmatplotlib_1_1texmanager_1_1TexManager.html">matplotlib.texmanager.TexManager</a></div><div class="ttdef"><b>Definition</b> <a href="../../db/d2c/texmanager_8py_source.html#l00056">texmanager.py:56</a></div></div>
<div class="ttc" id="anamespacematplotlib_1_1__afm_html"><div class="ttname"><a href="../../db/d6e/namespacematplotlib_1_1__afm.html">matplotlib._afm</a></div><div class="ttdef"><b>Definition</b> <a href="../../d0/d22/__afm_8py_source.html#l00001">_afm.py:1</a></div></div>
<div class="ttc" id="anamespacematplotlib_1_1__mathtext__data_html"><div class="ttname"><a href="../../d5/dc5/namespacematplotlib_1_1__mathtext__data.html">matplotlib._mathtext_data</a></div><div class="ttdef"><b>Definition</b> <a href="../../df/d91/__mathtext__data_8py_source.html#l00001">_mathtext_data.py:1</a></div></div>
<div class="ttc" id="anamespacematplotlib_1_1backend__bases_html"><div class="ttname"><a href="../../df/dee/namespacematplotlib_1_1backend__bases.html">matplotlib.backend_bases</a></div><div class="ttdef"><b>Definition</b> <a href="../../d1/d0c/backend__bases_8py_source.html#l00001">backend_bases.py:1</a></div></div>
<div class="ttc" id="anamespacematplotlib_1_1backends_1_1backend__mixed_html"><div class="ttname"><a href="../../d8/d81/namespacematplotlib_1_1backends_1_1backend__mixed.html">matplotlib.backends.backend_mixed</a></div><div class="ttdef"><b>Definition</b> <a href="../../d5/d40/backend__mixed_8py_source.html#l00001">backend_mixed.py:1</a></div></div>
<div class="ttc" id="anamespacematplotlib_1_1backends_1_1backend__ps_html_a00ed433cea8b943758f8779c6789c353"><div class="ttname"><a href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#a00ed433cea8b943758f8779c6789c353">matplotlib.backends.backend_ps._get_rotate_command</a></div><div class="ttdeci">_get_rotate_command(lbrt)</div><div class="ttdef"><b>Definition</b> <a href="#l01379">backend_ps.py:1379</a></div></div>
<div class="ttc" id="anamespacematplotlib_1_1backends_1_1backend__ps_html_a0ef1397c10149ca5bc338162f3aa98df"><div class="ttname"><a href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#a0ef1397c10149ca5bc338162f3aa98df">matplotlib.backends.backend_ps._convert_psfrags</a></div><div class="ttdeci">_convert_psfrags(tmppath, psfrags, paper_width, paper_height, orientation)</div><div class="ttdef"><b>Definition</b> <a href="#l01227">backend_ps.py:1227</a></div></div>
<div class="ttc" id="anamespacematplotlib_1_1backends_1_1backend__ps_html_a57163fc9a89ac0e4591be44aaf859abc"><div class="ttname"><a href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#a57163fc9a89ac0e4591be44aaf859abc">matplotlib.backends.backend_ps._generate_sfnts</a></div><div class="ttdeci">_generate_sfnts(fontdata, font, breakpoints)</div><div class="ttdef"><b>Definition</b> <a href="#l00349">backend_ps.py:349</a></div></div>
<div class="ttc" id="anamespacematplotlib_1_1backends_1_1backend__ps_html_a7e37128445bc02b4940c94ee9b15041e"><div class="ttname"><a href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#a7e37128445bc02b4940c94ee9b15041e">matplotlib.backends.backend_ps.gs_distill</a></div><div class="ttdeci">gs_distill(tmpfile, eps=False, ptype=&#39;letter&#39;, bbox=None, rotated=False)</div><div class="ttdef"><b>Definition</b> <a href="#l01283">backend_ps.py:1283</a></div></div>
<div class="ttc" id="anamespacematplotlib_1_1backends_1_1backend__ps_html_a8c2b522317fb7c3c112d1ae1536ed41d"><div class="ttname"><a href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#a8c2b522317fb7c3c112d1ae1536ed41d">matplotlib.backends.backend_ps._get_bbox_header</a></div><div class="ttdeci">_get_bbox_header(lbrt)</div><div class="ttdef"><b>Definition</b> <a href="#l01372">backend_ps.py:1372</a></div></div>
<div class="ttc" id="anamespacematplotlib_1_1backends_1_1backend__ps_html_aa2851422480b7b5989c914cd964bf394"><div class="ttname"><a href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#aa2851422480b7b5989c914cd964bf394">matplotlib.backends.backend_ps._serialize_type42</a></div><div class="ttdeci">_serialize_type42(font, subset, fontdata)</div><div class="ttdef"><b>Definition</b> <a href="#l00209">backend_ps.py:209</a></div></div>
<div class="ttc" id="anamespacematplotlib_1_1backends_1_1backend__ps_html_aa767e4bbb51a6ee0e31a9382065571b3"><div class="ttname"><a href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#aa767e4bbb51a6ee0e31a9382065571b3">matplotlib.backends.backend_ps._generate_charstrings</a></div><div class="ttdeci">_generate_charstrings(font)</div><div class="ttdef"><b>Definition</b> <a href="#l00325">backend_ps.py:325</a></div></div>
<div class="ttc" id="anamespacematplotlib_1_1backends_1_1backend__ps_html_aa87b294002871ac0a6ecec570266292b"><div class="ttname"><a href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#aa87b294002871ac0a6ecec570266292b">matplotlib.backends.backend_ps._version_and_breakpoints</a></div><div class="ttdeci">_version_and_breakpoints(loca, fontdata)</div><div class="ttdef"><b>Definition</b> <a href="#l00257">backend_ps.py:257</a></div></div>
<div class="ttc" id="anamespacematplotlib_1_1backends_1_1backend__ps_html_aa96b8b298fd713b04cb716bb576553dd"><div class="ttname"><a href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#aa96b8b298fd713b04cb716bb576553dd">matplotlib.backends.backend_ps._move_path_to_path_or_stream</a></div><div class="ttdeci">_move_path_to_path_or_stream(src, dst)</div><div class="ttdef"><b>Definition</b> <a href="#l00076">backend_ps.py:76</a></div></div>
<div class="ttc" id="anamespacematplotlib_1_1backends_1_1backend__ps_html_aae72ead8d639ade3f2070bb1fbbbf211"><div class="ttname"><a href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#aae72ead8d639ade3f2070bb1fbbbf211">matplotlib.backends.backend_ps._font_to_ps_type3</a></div><div class="ttdeci">_font_to_ps_type3(font_path, chars)</div><div class="ttdef"><b>Definition</b> <a href="#l00092">backend_ps.py:92</a></div></div>
<div class="ttc" id="anamespacematplotlib_1_1backends_1_1backend__ps_html_ab570363ea76de5a1c0bcca746df2fb38"><div class="ttname"><a href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#ab570363ea76de5a1c0bcca746df2fb38">matplotlib.backends.backend_ps._font_to_ps_type42</a></div><div class="ttdeci">_font_to_ps_type42(font_path, chars, fh)</div><div class="ttdef"><b>Definition</b> <a href="#l00173">backend_ps.py:173</a></div></div>
<div class="ttc" id="anamespacematplotlib_1_1backends_1_1backend__ps_html_ac9b463407fa1b417b09d57b315d50c0e"><div class="ttname"><a href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#ac9b463407fa1b417b09d57b315d50c0e">matplotlib.backends.backend_ps.get_bbox_header</a></div><div class="ttdeci">get_bbox_header(lbrt, rotated=False)</div><div class="ttdef"><b>Definition</b> <a href="#l01364">backend_ps.py:1364</a></div></div>
<div class="ttc" id="anamespacematplotlib_1_1backends_1_1backend__ps_html_ad5636bc7f224d43458781721d9253952"><div class="ttname"><a href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#ad5636bc7f224d43458781721d9253952">matplotlib.backends.backend_ps.xpdf_distill</a></div><div class="ttdeci">xpdf_distill(tmpfile, eps=False, ptype=&#39;letter&#39;, bbox=None, rotated=False)</div><div class="ttdef"><b>Definition</b> <a href="#l01322">backend_ps.py:1322</a></div></div>
<div class="ttc" id="anamespacematplotlib_1_1backends_1_1backend__ps_html_af4749888ddb5c2f395d7dc4c91d8140d"><div class="ttname"><a href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#af4749888ddb5c2f395d7dc4c91d8140d">matplotlib.backends.backend_ps.pstoeps</a></div><div class="ttdeci">pstoeps(tmpfile, bbox=None, rotated=False)</div><div class="ttdef"><b>Definition</b> <a href="#l01385">backend_ps.py:1385</a></div></div>
<div class="ttc" id="anamespacematplotlib_1_1backends_1_1backend__ps_html_afab470e7df753ecc2dbc73c52a198fe7"><div class="ttname"><a href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#afab470e7df753ecc2dbc73c52a198fe7">matplotlib.backends.backend_ps._bounds</a></div><div class="ttdeci">_bounds(font)</div><div class="ttdef"><b>Definition</b> <a href="#l00300">backend_ps.py:300</a></div></div>
<div class="ttc" id="anamespacematplotlib_1_1backends_1_1backend__ps_html_afc7f0336c221b19b191a017ec38f9727"><div class="ttname"><a href="../../da/da2/namespacematplotlib_1_1backends_1_1backend__ps.html#afc7f0336c221b19b191a017ec38f9727">matplotlib.backends.backend_ps._log_if_debug_on</a></div><div class="ttdeci">_log_if_debug_on(meth)</div><div class="ttdef"><b>Definition</b> <a href="#l00384">backend_ps.py:384</a></div></div>
<div class="ttc" id="anamespacematplotlib_1_1cbook_html"><div class="ttname"><a href="../../d3/d3f/namespacematplotlib_1_1cbook.html">matplotlib.cbook</a></div><div class="ttdef"><b>Definition</b> <a href="../../d7/dea/cbook_8py_source.html#l00001">cbook.py:1</a></div></div>
<div class="ttc" id="anamespacematplotlib_1_1font__manager_html"><div class="ttname"><a href="../../db/d4c/namespacematplotlib_1_1font__manager.html">matplotlib.font_manager</a></div><div class="ttdef"><b>Definition</b> <a href="../../d1/d9a/font__manager_8py_source.html#l00001">font_manager.py:1</a></div></div>
<div class="ttc" id="anamespacematplotlib_1_1path_html"><div class="ttname"><a href="../../d6/dd9/namespacematplotlib_1_1path.html">matplotlib.path</a></div><div class="ttdef"><b>Definition</b> <a href="../../d0/d7a/path_8py_source.html#l00001">path.py:1</a></div></div>
<div class="ttc" id="anamespacematplotlib_1_1texmanager_html"><div class="ttname"><a href="../../da/df5/namespacematplotlib_1_1texmanager.html">matplotlib.texmanager</a></div><div class="ttdef"><b>Definition</b> <a href="../../db/d2c/texmanager_8py_source.html#l00001">texmanager.py:1</a></div></div>
<div class="ttc" id="anamespacematplotlib_1_1transforms_html"><div class="ttname"><a href="../../d0/d6a/namespacematplotlib_1_1transforms.html">matplotlib.transforms</a></div><div class="ttdef"><b>Definition</b> <a href="../../d5/d7a/matplotlib_2transforms_8py_source.html#l00001">transforms.py:1</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_f6da99e2877b0632a7e4a834e7483fed.html">llm-scripts</a></li><li class="navelem"><a class="el" href="../../dir_70c99b0173b62e0b00f95d6bf5d77b0f.html">testing</a></li><li class="navelem"><a class="el" href="../../dir_c90555aa24febdaeb0b43db3ed65d5d9.html">hypothesis-testing</a></li><li class="navelem"><a class="el" href="../../dir_5d121c57859a2187a176663451f456b7.html">hyp-env</a></li><li class="navelem"><a class="el" href="../../dir_bd811e5d8688c3c2df683649a5255528.html">lib</a></li><li class="navelem"><a class="el" href="../../dir_ed8133538883844379882c9fac17a38e.html">python3.12</a></li><li class="navelem"><a class="el" href="../../dir_ec5d4580713abd487320f8eae4ae4e88.html">site-packages</a></li><li class="navelem"><a class="el" href="../../dir_b7d6549aff4d72877f68c88558aeb595.html">matplotlib</a></li><li class="navelem"><a class="el" href="../../dir_2f34045f6a6f1a6def3d1ba642b1f180.html">backends</a></li><li class="navelem"><b>backend_ps.py</b></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
