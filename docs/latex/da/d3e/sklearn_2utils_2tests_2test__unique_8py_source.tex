\doxysection{test\+\_\+unique.\+py}
\hypertarget{sklearn_2utils_2tests_2test__unique_8py_source}{}\label{sklearn_2utils_2tests_2test__unique_8py_source}\index{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/sklearn/utils/tests/test\_unique.py@{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/sklearn/utils/tests/test\_unique.py}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00001}\mbox{\hyperlink{namespacesklearn_1_1utils_1_1tests_1_1test__unique}{00001}}\ \textcolor{keyword}{import}\ numpy\ \textcolor{keyword}{as}\ np}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00002}00002\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacenumpy_1_1testing}{numpy.testing}}\ \textcolor{keyword}{import}\ assert\_array\_equal}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00003}00003\ }
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00004}00004\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacesklearn_1_1utils_1_1__unique}{sklearn.utils.\_unique}}\ \textcolor{keyword}{import}\ attach\_unique,\ cached\_unique}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00005}00005\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacesklearn_1_1utils_1_1validation}{sklearn.utils.validation}}\ \textcolor{keyword}{import}\ check\_array}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00006}00006\ }
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00007}00007\ }
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00008}00008\ \textcolor{keyword}{def\ }test\_attach\_unique\_attaches\_unique\_to\_array():}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00009}00009\ \ \ \ \ arr\ =\ np.array([1,\ 2,\ 2,\ 3,\ 4,\ 4,\ 5])}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00010}00010\ \ \ \ \ arr\_\ =\ attach\_unique(arr)}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00011}00011\ \ \ \ \ assert\_array\_equal(arr\_.dtype.metadata[\textcolor{stringliteral}{"{}unique"{}}],\ np.array([1,\ 2,\ 3,\ 4,\ 5]))}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00012}00012\ \ \ \ \ assert\_array\_equal(arr\_,\ arr)}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00013}00013\ }
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00014}00014\ }
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00015}00015\ \textcolor{keyword}{def\ }test\_cached\_unique\_returns\_cached\_unique():}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00016}00016\ \ \ \ \ my\_dtype\ =\ np.dtype(np.float64,\ metadata=\{\textcolor{stringliteral}{"{}unique"{}}:\ np.array([1,\ 2])\})}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00017}00017\ \ \ \ \ arr\ =\ np.array([1,\ 2,\ 2,\ 3,\ 4,\ 4,\ 5],\ dtype=my\_dtype)}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00018}00018\ \ \ \ \ assert\_array\_equal(cached\_unique(arr),\ np.array([1,\ 2]))}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00019}00019\ }
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00020}00020\ }
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00021}\mbox{\hyperlink{namespacesklearn_1_1utils_1_1tests_1_1test__unique_af22c72b02f7663bcd13e55c3cc0e94c7}{00021}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacesklearn_1_1utils_1_1tests_1_1test__unique_af22c72b02f7663bcd13e55c3cc0e94c7}{test\_attach\_unique\_not\_ndarray}}():}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00022}00022\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Test\ that\ when\ not\ np.ndarray,\ we\ don't\ touch\ the\ array."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00023}00023\ \ \ \ \ arr\ =\ [1,\ 2,\ 2,\ 3,\ 4,\ 4,\ 5]}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00024}00024\ \ \ \ \ arr\_\ =\ attach\_unique(arr)}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00025}00025\ \ \ \ \ \textcolor{keyword}{assert}\ arr\_\ \textcolor{keywordflow}{is}\ arr}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00026}00026\ }
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00027}00027\ }
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00028}\mbox{\hyperlink{namespacesklearn_1_1utils_1_1tests_1_1test__unique_a417f06206ca218189cd6b5fe027ff801}{00028}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacesklearn_1_1utils_1_1tests_1_1test__unique_a417f06206ca218189cd6b5fe027ff801}{test\_attach\_unique\_returns\_view}}():}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00029}00029\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Test\ that\ attach\_unique\ returns\ a\ view\ of\ the\ array."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00030}00030\ \ \ \ \ arr\ =\ np.array([1,\ 2,\ 2,\ 3,\ 4,\ 4,\ 5])}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00031}00031\ \ \ \ \ arr\_\ =\ attach\_unique(arr)}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00032}00032\ \ \ \ \ \textcolor{keyword}{assert}\ arr\_.base\ \textcolor{keywordflow}{is}\ arr}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00034}00034\ }
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00035}\mbox{\hyperlink{namespacesklearn_1_1utils_1_1tests_1_1test__unique_a2ad6162c9eb852a1b54aeb3d1b109505}{00035}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacesklearn_1_1utils_1_1tests_1_1test__unique_a2ad6162c9eb852a1b54aeb3d1b109505}{test\_attach\_unique\_return\_tuple}}():}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00036}00036\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Test\ return\_tuple\ argument\ of\ the\ function."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00037}00037\ \ \ \ \ arr\ =\ np.array([1,\ 2,\ 2,\ 3,\ 4,\ 4,\ 5])}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00038}00038\ \ \ \ \ arr\_tuple\ =\ attach\_unique(arr,\ return\_tuple=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00039}00039\ \ \ \ \ \textcolor{keyword}{assert}\ isinstance(arr\_tuple,\ tuple)}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00040}00040\ \ \ \ \ \textcolor{keyword}{assert}\ len(arr\_tuple)\ ==\ 1}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00041}00041\ \ \ \ \ assert\_array\_equal(arr\_tuple[0],\ arr)}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00043}00043\ \ \ \ \ arr\_single\ =\ attach\_unique(arr,\ return\_tuple=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00044}00044\ \ \ \ \ \textcolor{keyword}{assert}\ isinstance(arr\_single,\ np.ndarray)}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00045}00045\ \ \ \ \ assert\_array\_equal(arr\_single,\ arr)}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00046}00046\ }
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00047}00047\ }
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00048}\mbox{\hyperlink{namespacesklearn_1_1utils_1_1tests_1_1test__unique_a5647b1eb7f1f086492abbe38922918f7}{00048}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacesklearn_1_1utils_1_1tests_1_1test__unique_a5647b1eb7f1f086492abbe38922918f7}{test\_check\_array\_keeps\_unique}}():}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00049}00049\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Test\ that\ check\_array\ keeps\ the\ unique\ metadata."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00050}00050\ \ \ \ \ arr\ =\ np.array([[1,\ 2,\ 2,\ 3,\ 4,\ 4,\ 5]])}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00051}00051\ \ \ \ \ arr\_\ =\ attach\_unique(arr)}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00052}00052\ \ \ \ \ arr\_\ =\ check\_array(arr\_)}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00053}00053\ \ \ \ \ assert\_array\_equal(arr\_.dtype.metadata[\textcolor{stringliteral}{"{}unique"{}}],\ np.array([1,\ 2,\ 3,\ 4,\ 5]))}
\DoxyCodeLine{\Hypertarget{sklearn_2utils_2tests_2test__unique_8py_source_l00054}00054\ \ \ \ \ assert\_array\_equal(arr\_,\ arr)}

\end{DoxyCode}
