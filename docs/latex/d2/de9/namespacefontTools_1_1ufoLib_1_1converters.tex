\doxysection{font\+Tools.\+ufo\+Lib.\+converters Namespace Reference}
\hypertarget{namespacefontTools_1_1ufoLib_1_1converters}{}\label{namespacefontTools_1_1ufoLib_1_1converters}\index{fontTools.ufoLib.converters@{fontTools.ufoLib.converters}}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacefontTools_1_1ufoLib_1_1converters_a1132caa6a2b2e24e20e70a726093d23e}{convert\+UFO1\+Or\+UFO2\+Kerning\+To\+UFO3\+Kerning}} (kerning, groups, glyph\+Set=())
\item 
\mbox{\hyperlink{namespacefontTools_1_1ufoLib_1_1converters_a337f6bb6169a2fb5c1aa680e530ee3f5}{find\+Known\+Kerning\+Groups}} (groups)
\item 
\mbox{\hyperlink{namespacefontTools_1_1ufoLib_1_1converters_a4cfc14040b32689f11d5707b7ef6fcd1}{make\+Unique\+Group\+Name}} (name, group\+Names, counter=0)
\item 
\mbox{\hyperlink{namespacefontTools_1_1ufoLib_1_1converters_a6fef583a0d2701c097499cc104ad3652}{test}} ()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}Functions for converting UFO1 or UFO2 files into UFO3 format.

Currently provides functionality for converting kerning rules
and kerning groups. Conversion is only supported _from_ UFO1
or UFO2, and _to_ UFO3.
\end{DoxyVerb}
 

\doxysubsection{Function Documentation}
\Hypertarget{namespacefontTools_1_1ufoLib_1_1converters_a1132caa6a2b2e24e20e70a726093d23e}\index{fontTools.ufoLib.converters@{fontTools.ufoLib.converters}!convertUFO1OrUFO2KerningToUFO3Kerning@{convertUFO1OrUFO2KerningToUFO3Kerning}}
\index{convertUFO1OrUFO2KerningToUFO3Kerning@{convertUFO1OrUFO2KerningToUFO3Kerning}!fontTools.ufoLib.converters@{fontTools.ufoLib.converters}}
\doxysubsubsection{\texorpdfstring{convertUFO1OrUFO2KerningToUFO3Kerning()}{convertUFO1OrUFO2KerningToUFO3Kerning()}}
{\footnotesize\ttfamily \label{namespacefontTools_1_1ufoLib_1_1converters_a1132caa6a2b2e24e20e70a726093d23e} 
font\+Tools.\+ufo\+Lib.\+converters.\+convert\+UFO1\+Or\+UFO2\+Kerning\+To\+UFO3\+Kerning (\begin{DoxyParamCaption}\item[{}]{kerning}{, }\item[{}]{groups}{, }\item[{}]{glyph\+Set}{ = {\ttfamily ()}}\end{DoxyParamCaption})}

\begin{DoxyVerb}Convert kerning data in UFO1 or UFO2 syntax into UFO3 syntax.

Args:
  kerning:
      A dictionary containing the kerning rules defined in
      the UFO font, as used in :class:`.UFOReader` objects.
  groups:
      A dictionary containing the groups defined in the UFO
      font, as used in :class:`.UFOReader` objects.
  glyphSet:
    Optional; a set of glyph objects to skip (default: None).

Returns:
  1. A dictionary representing the converted kerning data.
  2. A copy of the groups dictionary, with all groups renamed to UFO3 syntax.
  3. A dictionary containing the mapping of old group names to new group names.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{converters_8py_source_l00012}{12}} of file \mbox{\hyperlink{converters_8py_source}{converters.\+py}}.



References \mbox{\hyperlink{converters_8py_source_l00087}{find\+Known\+Kerning\+Groups()}}, and \mbox{\hyperlink{converters_8py_source_l00153}{make\+Unique\+Group\+Name()}}.

\Hypertarget{namespacefontTools_1_1ufoLib_1_1converters_a337f6bb6169a2fb5c1aa680e530ee3f5}\index{fontTools.ufoLib.converters@{fontTools.ufoLib.converters}!findKnownKerningGroups@{findKnownKerningGroups}}
\index{findKnownKerningGroups@{findKnownKerningGroups}!fontTools.ufoLib.converters@{fontTools.ufoLib.converters}}
\doxysubsubsection{\texorpdfstring{findKnownKerningGroups()}{findKnownKerningGroups()}}
{\footnotesize\ttfamily \label{namespacefontTools_1_1ufoLib_1_1converters_a337f6bb6169a2fb5c1aa680e530ee3f5} 
font\+Tools.\+ufo\+Lib.\+converters.\+find\+Known\+Kerning\+Groups (\begin{DoxyParamCaption}\item[{}]{groups}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Find all kerning groups in a UFO1 or UFO2 font that use known prefixes.

In some cases, not all kerning groups will be referenced
by the kerning pairs in a UFO. The algorithm for locating
groups in :func:`convertUFO1OrUFO2KerningToUFO3Kerning` will
miss these unreferenced groups. By scanning for known prefixes,
this function will catch all of the prefixed groups.

The prefixes and sides by this function are:

@MMK_L_ - side 1
@MMK_R_ - side 2

as defined in the UFO1 specification.

Args:
    groups:
      A dictionary containing the groups defined in the UFO
      font, as read by :class:`.UFOReader`.

Returns:
    Two sets; the first containing the names of all
    first-side kerning groups identified in the ``groups``
    dictionary, and the second containing the names of all
    second-side kerning groups identified.

    "First-side" and "second-side" are with respect to the
    writing direction of the script.

    Example::

      >>> testGroups = {
      ...     "@MMK_L_1" : None,
      ...     "@MMK_L_2" : None,
      ...     "@MMK_L_3" : None,
      ...     "@MMK_R_1" : None,
      ...     "@MMK_R_2" : None,
      ...     "@MMK_R_3" : None,
      ...     "@MMK_l_1" : None,
      ...     "@MMK_r_1" : None,
      ...     "@MMK_X_1" : None,
      ...     "foo" : None,
      ... }
      >>> first, second = findKnownKerningGroups(testGroups)
      >>> sorted(first) == ['@MMK_L_1', '@MMK_L_2', '@MMK_L_3']
      True
      >>> sorted(second) == ['@MMK_R_1', '@MMK_R_2', '@MMK_R_3']
      True
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{converters_8py_source_l00087}{87}} of file \mbox{\hyperlink{converters_8py_source}{converters.\+py}}.



Referenced by \mbox{\hyperlink{converters_8py_source_l00012}{convert\+UFO1\+Or\+UFO2\+Kerning\+To\+UFO3\+Kerning()}}.

\Hypertarget{namespacefontTools_1_1ufoLib_1_1converters_a4cfc14040b32689f11d5707b7ef6fcd1}\index{fontTools.ufoLib.converters@{fontTools.ufoLib.converters}!makeUniqueGroupName@{makeUniqueGroupName}}
\index{makeUniqueGroupName@{makeUniqueGroupName}!fontTools.ufoLib.converters@{fontTools.ufoLib.converters}}
\doxysubsubsection{\texorpdfstring{makeUniqueGroupName()}{makeUniqueGroupName()}}
{\footnotesize\ttfamily \label{namespacefontTools_1_1ufoLib_1_1converters_a4cfc14040b32689f11d5707b7ef6fcd1} 
font\+Tools.\+ufo\+Lib.\+converters.\+make\+Unique\+Group\+Name (\begin{DoxyParamCaption}\item[{}]{name}{, }\item[{}]{group\+Names}{, }\item[{}]{counter}{ = {\ttfamily 0}}\end{DoxyParamCaption})}

\begin{DoxyVerb}Make a kerning group name that will be unique within the set of group names.

If the requested kerning group name already exists within the set, this
will return a new name by adding an incremented counter to the end
of the requested name.

Args:
    name:
      The requested kerning group name.
    groupNames:
      A list of the existing kerning group names.
    counter:
      Optional; a counter of group names already seen (default: 0). If
      :attr:`.counter` is not provided, the function will recurse,
      incrementing the value of :attr:`.counter` until it finds the
      first unused ``name+counter`` combination, and return that result.

Returns:
    A unique kerning group name composed of the requested name suffixed
    by the smallest available integer counter.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{converters_8py_source_l00153}{153}} of file \mbox{\hyperlink{converters_8py_source}{converters.\+py}}.



References \mbox{\hyperlink{converters_8py_source_l00153}{make\+Unique\+Group\+Name()}}.



Referenced by \mbox{\hyperlink{converters_8py_source_l00012}{convert\+UFO1\+Or\+UFO2\+Kerning\+To\+UFO3\+Kerning()}}, and \mbox{\hyperlink{converters_8py_source_l00153}{make\+Unique\+Group\+Name()}}.

\Hypertarget{namespacefontTools_1_1ufoLib_1_1converters_a6fef583a0d2701c097499cc104ad3652}\index{fontTools.ufoLib.converters@{fontTools.ufoLib.converters}!test@{test}}
\index{test@{test}!fontTools.ufoLib.converters@{fontTools.ufoLib.converters}}
\doxysubsubsection{\texorpdfstring{test()}{test()}}
{\footnotesize\ttfamily \label{namespacefontTools_1_1ufoLib_1_1converters_a6fef583a0d2701c097499cc104ad3652} 
font\+Tools.\+ufo\+Lib.\+converters.\+test (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Tests for :func:`.convertUFO1OrUFO2KerningToUFO3Kerning`.

No known prefixes.

>>> testKerning = {
...     "A" : {
...         "A" : 1,
...         "B" : 2,
...         "CGroup" : 3,
...         "DGroup" : 4
...     },
...     "BGroup" : {
...         "A" : 5,
...         "B" : 6,
...         "CGroup" : 7,
...         "DGroup" : 8
...     },
...     "CGroup" : {
...         "A" : 9,
...         "B" : 10,
...         "CGroup" : 11,
...         "DGroup" : 12
...     },
... }
>>> testGroups = {
...     "BGroup" : ["B"],
...     "CGroup" : ["C"],
...     "DGroup" : ["D"],
... }
>>> kerning, groups, maps = convertUFO1OrUFO2KerningToUFO3Kerning(
...     testKerning, testGroups, [])
>>> expected = {
...     "A" : {
...         "A": 1,
...         "B": 2,
...         "public.kern2.CGroup": 3,
...         "public.kern2.DGroup": 4
...     },
...     "public.kern1.BGroup": {
...         "A": 5,
...         "B": 6,
...         "public.kern2.CGroup": 7,
...         "public.kern2.DGroup": 8
...     },
...     "public.kern1.CGroup": {
...         "A": 9,
...         "B": 10,
...         "public.kern2.CGroup": 11,
...         "public.kern2.DGroup": 12
...     }
... }
>>> kerning == expected
True
>>> expected = {
...     "BGroup": ["B"],
...     "CGroup": ["C"],
...     "DGroup": ["D"],
...     "public.kern1.BGroup": ["B"],
...     "public.kern1.CGroup": ["C"],
...     "public.kern2.CGroup": ["C"],
...     "public.kern2.DGroup": ["D"],
... }
>>> groups == expected
True

Known prefixes.

>>> testKerning = {
...     "A" : {
...         "A" : 1,
...         "B" : 2,
...         "@MMK_R_CGroup" : 3,
...         "@MMK_R_DGroup" : 4
...     },
...     "@MMK_L_BGroup" : {
...         "A" : 5,
...         "B" : 6,
...         "@MMK_R_CGroup" : 7,
...         "@MMK_R_DGroup" : 8
...     },
...     "@MMK_L_CGroup" : {
...         "A" : 9,
...         "B" : 10,
...         "@MMK_R_CGroup" : 11,
...         "@MMK_R_DGroup" : 12
...     },
... }
>>> testGroups = {
...     "@MMK_L_BGroup" : ["B"],
...     "@MMK_L_CGroup" : ["C"],
...     "@MMK_L_XGroup" : ["X"],
...     "@MMK_R_CGroup" : ["C"],
...     "@MMK_R_DGroup" : ["D"],
...     "@MMK_R_XGroup" : ["X"],
... }
>>> kerning, groups, maps = convertUFO1OrUFO2KerningToUFO3Kerning(
...     testKerning, testGroups, [])
>>> expected = {
...     "A" : {
...         "A": 1,
...         "B": 2,
...         "public.kern2.CGroup": 3,
...         "public.kern2.DGroup": 4
...     },
...     "public.kern1.BGroup": {
...         "A": 5,
...         "B": 6,
...         "public.kern2.CGroup": 7,
...         "public.kern2.DGroup": 8
...     },
...     "public.kern1.CGroup": {
...         "A": 9,
...         "B": 10,
...         "public.kern2.CGroup": 11,
...         "public.kern2.DGroup": 12
...     }
... }
>>> kerning == expected
True
>>> expected = {
...     "@MMK_L_BGroup": ["B"],
...     "@MMK_L_CGroup": ["C"],
...     "@MMK_L_XGroup": ["X"],
...     "@MMK_R_CGroup": ["C"],
...     "@MMK_R_DGroup": ["D"],
...     "@MMK_R_XGroup": ["X"],
...     "public.kern1.BGroup": ["B"],
...     "public.kern1.CGroup": ["C"],
...     "public.kern1.XGroup": ["X"],
...     "public.kern2.CGroup": ["C"],
...     "public.kern2.DGroup": ["D"],
...     "public.kern2.XGroup": ["X"],
... }
>>> groups == expected
True

>>> from .validators import kerningValidator
>>> kerningValidator(kerning)
(True, None)

Mixture of known prefixes and groups without prefixes.

>>> testKerning = {
...     "A" : {
...         "A" : 1,
...         "B" : 2,
...         "@MMK_R_CGroup" : 3,
...         "DGroup" : 4
...     },
...     "BGroup" : {
...         "A" : 5,
...         "B" : 6,
...         "@MMK_R_CGroup" : 7,
...         "DGroup" : 8
...     },
...     "@MMK_L_CGroup" : {
...         "A" : 9,
...         "B" : 10,
...         "@MMK_R_CGroup" : 11,
...         "DGroup" : 12
...     },
... }
>>> testGroups = {
...     "BGroup" : ["B"],
...     "@MMK_L_CGroup" : ["C"],
...     "@MMK_R_CGroup" : ["C"],
...     "DGroup" : ["D"],
... }
>>> kerning, groups, maps = convertUFO1OrUFO2KerningToUFO3Kerning(
...     testKerning, testGroups, [])
>>> expected = {
...     "A" : {
...         "A": 1,
...         "B": 2,
...         "public.kern2.CGroup": 3,
...         "public.kern2.DGroup": 4
...     },
...     "public.kern1.BGroup": {
...         "A": 5,
...         "B": 6,
...         "public.kern2.CGroup": 7,
...         "public.kern2.DGroup": 8
...     },
...     "public.kern1.CGroup": {
...         "A": 9,
...         "B": 10,
...         "public.kern2.CGroup": 11,
...         "public.kern2.DGroup": 12
...     }
... }
>>> kerning == expected
True
>>> expected = {
...     "BGroup": ["B"],
...     "@MMK_L_CGroup": ["C"],
...     "@MMK_R_CGroup": ["C"],
...     "DGroup": ["D"],
...     "public.kern1.BGroup": ["B"],
...     "public.kern1.CGroup": ["C"],
...     "public.kern2.CGroup": ["C"],
...     "public.kern2.DGroup": ["D"],
... }
>>> groups == expected
True
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{converters_8py_source_l00186}{186}} of file \mbox{\hyperlink{converters_8py_source}{converters.\+py}}.

