\doxysection{test\+\_\+scalarmath.\+py}
\hypertarget{test__scalarmath_8py_source}{}\label{test__scalarmath_8py_source}\index{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/numpy/core/tests/test\_scalarmath.py@{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/numpy/core/tests/test\_scalarmath.py}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00001}\mbox{\hyperlink{namespacenumpy_1_1core_1_1tests_1_1test__scalarmath}{00001}}\ \textcolor{keyword}{import}\ contextlib}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00002}00002\ \textcolor{keyword}{import}\ sys}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00003}00003\ \textcolor{keyword}{import}\ warnings}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00004}00004\ \textcolor{keyword}{import}\ itertools}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00005}00005\ \textcolor{keyword}{import}\ operator}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00006}00006\ \textcolor{keyword}{import}\ platform}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00007}00007\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacenumpy_1_1__utils}{numpy.\_utils}}\ \textcolor{keyword}{import}\ \_pep440}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00008}00008\ \textcolor{keyword}{import}\ pytest}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00009}00009\ \textcolor{keyword}{from}\ hypothesis\ \textcolor{keyword}{import}\ given,\ settings}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00010}00010\ \textcolor{keyword}{from}\ hypothesis.strategies\ \textcolor{keyword}{import}\ sampled\_from}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00011}00011\ \textcolor{keyword}{from}\ hypothesis.extra\ \textcolor{keyword}{import}\ numpy\ \textcolor{keyword}{as}\ hynp}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00012}00012\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00013}00013\ \textcolor{keyword}{import}\ numpy\ \textcolor{keyword}{as}\ np}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00014}00014\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacenumpy_1_1testing}{numpy.testing}}\ \textcolor{keyword}{import}\ (}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00015}00015\ \ \ \ \ assert\_,\ assert\_equal,\ assert\_raises,\ assert\_almost\_equal,}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00016}00016\ \ \ \ \ assert\_array\_equal,\ IS\_PYPY,\ suppress\_warnings,\ \_gen\_alignment\_data,}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00017}00017\ \ \ \ \ assert\_warns,\ \_SUPPORTS\_SVE,}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00018}00018\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00019}00019\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00020}00020\ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00021}00021\ \ \ \ \ COMPILERS\ =\ np.show\_config(mode=\textcolor{stringliteral}{"{}dicts"{}})[\textcolor{stringliteral}{"{}Compilers"{}}]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00022}00022\ \ \ \ \ USING\_CLANG\_CL\ =\ COMPILERS[\textcolor{stringliteral}{"{}c"{}}][\textcolor{stringliteral}{"{}name"{}}]\ ==\ \textcolor{stringliteral}{"{}clang-\/cl"{}}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00023}00023\ \textcolor{keywordflow}{except}\ TypeError:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00024}00024\ \ \ \ \ USING\_CLANG\_CL\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00025}00025\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00026}00026\ types\ =\ [np.bool\_,\ np.byte,\ np.ubyte,\ np.short,\ np.ushort,\ np.intc,\ np.uintc,}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00027}00027\ \ \ \ \ \ \ \ \ \ np.int\_,\ np.uint,\ np.longlong,\ np.ulonglong,}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00028}00028\ \ \ \ \ \ \ \ \ \ np.single,\ np.double,\ np.longdouble,\ np.csingle,}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00029}00029\ \ \ \ \ \ \ \ \ \ np.cdouble,\ np.clongdouble]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00030}00030\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00031}00031\ floating\_types\ =\ np.floating.\_\_subclasses\_\_()}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00032}00032\ complex\_floating\_types\ =\ np.complexfloating.\_\_subclasses\_\_()}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00034}00034\ objecty\_things\ =\ [object(),\ \textcolor{keywordtype}{None}]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00035}00035\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00036}00036\ reasonable\_operators\_for\_scalars\ =\ [}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00037}00037\ \ \ \ \ operator.lt,\ operator.le,\ operator.eq,\ operator.ne,\ operator.ge,}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00038}00038\ \ \ \ \ operator.gt,\ operator.add,\ operator.floordiv,\ operator.mod,}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00039}00039\ \ \ \ \ operator.mul,\ operator.pow,\ operator.sub,\ operator.truediv,}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00040}00040\ ]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00041}00041\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00043}00043\ \textcolor{comment}{\#\ This\ compares\ scalarmath\ against\ ufuncs.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00044}00044\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00045}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestTypes}{00045}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestTypes}{TestTypes}}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00046}00046\ \ \ \ \ \textcolor{keyword}{def\ }test\_types(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00047}00047\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ atype\ \textcolor{keywordflow}{in}\ types:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00048}00048\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ atype(1)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00049}00049\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(a\ ==\ 1,\ \textcolor{stringliteral}{"{}error\ with\ \%r:\ got\ \%r"{}}\ \%\ (atype,\ a))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00050}00050\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00051}00051\ \ \ \ \ \textcolor{keyword}{def\ }test\_type\_add(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00052}00052\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ list\ of\ types}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00053}00053\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ k,\ atype\ \textcolor{keywordflow}{in}\ enumerate(types):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00054}00054\ \ \ \ \ \ \ \ \ \ \ \ \ a\_scalar\ =\ atype(3)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00055}00055\ \ \ \ \ \ \ \ \ \ \ \ \ a\_array\ =\ np.array([3],\ dtype=atype)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00056}00056\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ l,\ btype\ \textcolor{keywordflow}{in}\ enumerate(types):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00057}00057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ b\_scalar\ =\ btype(1)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00058}00058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ b\_array\ =\ np.array([1],\ dtype=btype)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00059}00059\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c\_scalar\ =\ a\_scalar\ +\ b\_scalar}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00060}00060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c\_array\ =\ a\_array\ +\ b\_array}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00061}00061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ It\ was\ comparing\ the\ type\ numbers,\ but\ the\ new\ ufunc}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00062}00062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ function-\/finding\ mechanism\ finds\ the\ lowest\ function}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00063}00063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ to\ which\ both\ inputs\ can\ be\ cast\ -\/\ which\ produces\ 'l'}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00064}00064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ when\ you\ do\ 'q'\ +\ 'b'.\ \ The\ old\ function\ finding\ mechanism}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00065}00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ skipped\ ahead\ based\ on\ the\ first\ argument,\ but\ that}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00066}00066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ does\ not\ produce\ properly\ symmetric\ results...}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00067}00067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(c\_scalar.dtype,\ c\_array.dtype,}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00068}00068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}error\ with\ types\ (\%d/'\%c'\ +\ \%d/'\%c')"{}}\ \%}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00069}00069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (k,\ np.dtype(atype).char,\ l,\ np.dtype(btype).char))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00070}00070\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00071}00071\ \ \ \ \ \textcolor{keyword}{def\ }test\_type\_create(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00072}00072\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ k,\ atype\ \textcolor{keywordflow}{in}\ enumerate(types):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00073}00073\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.array([1,\ 2,\ 3],\ atype)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00074}00074\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ atype([1,\ 2,\ 3])}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00075}00075\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(a,\ b)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00076}00076\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00077}00077\ \ \ \ \ \textcolor{keyword}{def\ }test\_leak(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00078}00078\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ leak\ of\ scalar\ objects}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00079}00079\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ a\ leak\ would\ show\ up\ in\ valgrind\ as\ still-\/reachable\ of\ \string~2.6MB}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00080}00080\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(200000):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00081}00081\ \ \ \ \ \ \ \ \ \ \ \ \ np.add(1,\ 1)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00082}00082\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00083}00083\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00084}00084\ \textcolor{keyword}{def\ }check\_ufunc\_scalar\_equivalence(op,\ arr1,\ arr2):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00085}00085\ \ \ \ \ scalar1\ =\ arr1[()]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00086}00086\ \ \ \ \ scalar2\ =\ arr2[()]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00087}00087\ \ \ \ \ \textcolor{keyword}{assert}\ isinstance(scalar1,\ np.generic)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00088}00088\ \ \ \ \ \textcolor{keyword}{assert}\ isinstance(scalar2,\ np.generic)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00089}00089\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00090}00090\ \ \ \ \ \textcolor{keywordflow}{if}\ arr1.dtype.kind\ ==\ \textcolor{stringliteral}{"{}c"{}}\ \textcolor{keywordflow}{or}\ arr2.dtype.kind\ ==\ \textcolor{stringliteral}{"{}c"{}}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00091}00091\ \ \ \ \ \ \ \ \ comp\_ops\ =\ \{operator.ge,\ operator.gt,\ operator.le,\ operator.lt\}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00092}00092\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ op\ \textcolor{keywordflow}{in}\ comp\_ops\ \textcolor{keywordflow}{and}\ (np.isnan(scalar1)\ \textcolor{keywordflow}{or}\ np.isnan(scalar2)):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00093}00093\ \ \ \ \ \ \ \ \ \ \ \ \ pytest.xfail(\textcolor{stringliteral}{"{}complex\ comp\ ufuncs\ use\ sort-\/order,\ scalars\ do\ not."{}})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00094}00094\ \ \ \ \ \textcolor{keywordflow}{if}\ op\ ==\ operator.pow\ \textcolor{keywordflow}{and}\ arr2.item()\ \textcolor{keywordflow}{in}\ [-\/1,\ 0,\ 0.5,\ 1,\ 2]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00095}00095\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ array**scalar\ special\ case\ can\ have\ different\ result\ dtype}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00096}00096\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ (Other\ powers\ may\ have\ issues\ also,\ but\ are\ not\ hit\ here.)}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00097}00097\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ TODO:\ It\ would\ be\ nice\ to\ resolve\ this\ issue.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00098}00098\ \ \ \ \ \ \ \ \ pytest.skip(\textcolor{stringliteral}{"{}array**2\ can\ have\ incorrect/weird\ result\ dtype"{}})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00099}00099\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00100}00100\ \ \ \ \ \textcolor{comment}{\#\ ignore\ fpe's\ since\ they\ may\ just\ mismatch\ for\ integers\ anyway.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00101}00101\ \ \ \ \ \textcolor{keyword}{with}\ warnings.catch\_warnings(),\ np.errstate(all=\textcolor{stringliteral}{"{}ignore"{}}):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00102}00102\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Comparisons\ DeprecationWarnings\ replacing\ errors\ (2022-\/03):}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00103}00103\ \ \ \ \ \ \ \ \ warnings.simplefilter(\textcolor{stringliteral}{"{}error"{}},\ DeprecationWarning)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00104}00104\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00105}00105\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ op(arr1,\ arr2)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00106}00106\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ Exception\ \textcolor{keyword}{as}\ e:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00107}00107\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(type(e)):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00108}00108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ op(scalar1,\ scalar2)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00109}00109\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00110}00110\ \ \ \ \ \ \ \ \ \ \ \ \ scalar\_res\ =\ op(scalar1,\ scalar2)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00111}00111\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(scalar\_res,\ res,\ strict=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00112}00112\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00113}00113\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00114}00114\ \textcolor{preprocessor}{@pytest.mark.slow}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00115}00115\ \textcolor{preprocessor}{@settings(max\_examples=10000,\ deadline=2000)}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00116}00116\ \textcolor{preprocessor}{@given(sampled\_from(reasonable\_operators\_for\_scalars)},}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00117}00117\ \ \ \ \ \ \ \ hynp.arrays(dtype=hynp.scalar\_dtypes(),\ shape=()),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00118}00118\ \ \ \ \ \ \ \ hynp.arrays(dtype=hynp.scalar\_dtypes(),\ shape=()))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00119}\mbox{\hyperlink{namespacenumpy_1_1core_1_1tests_1_1test__scalarmath_ada778f78437833880bbf6c485213a202}{00119}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacenumpy_1_1core_1_1tests_1_1test__scalarmath_ada778f78437833880bbf6c485213a202}{test\_array\_scalar\_ufunc\_equivalence}}(op,\ arr1,\ arr2):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00120}00120\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00121}00121\ \textcolor{stringliteral}{\ \ \ \ This\ is\ a\ thorough\ test\ attempting\ to\ cover\ important\ promotion\ paths}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00122}00122\ \textcolor{stringliteral}{\ \ \ \ and\ ensuring\ that\ arrays\ and\ scalars\ stay\ as\ aligned\ as\ possible.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00123}00123\ \textcolor{stringliteral}{\ \ \ \ However,\ if\ it\ creates\ troubles,\ it\ should\ maybe\ just\ be\ removed.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00124}00124\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00125}00125\ \ \ \ \ check\_ufunc\_scalar\_equivalence(op,\ arr1,\ arr2)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00126}00126\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00127}00127\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00128}00128\ \textcolor{preprocessor}{@pytest.mark.slow}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00129}00129\ \textcolor{preprocessor}{@given(sampled\_from(reasonable\_operators\_for\_scalars)},}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00130}00130\ \ \ \ \ \ \ \ hynp.scalar\_dtypes(),\ hynp.scalar\_dtypes())}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00131}00131\ \textcolor{keyword}{def\ }test\_array\_scalar\_ufunc\_dtypes(op,\ dt1,\ dt2):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00132}00132\ \ \ \ \ \textcolor{comment}{\#\ Same\ as\ above,\ but\ don't\ worry\ about\ sampling\ weird\ values\ so\ that\ we}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00133}00133\ \ \ \ \ \textcolor{comment}{\#\ do\ not\ have\ to\ sample\ as\ much}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00134}00134\ \ \ \ \ arr1\ =\ np.array(2,\ dtype=dt1)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00135}00135\ \ \ \ \ arr2\ =\ np.array(3,\ dtype=dt2)\ \ \textcolor{comment}{\#\ some\ power\ do\ weird\ things.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00136}00136\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00137}00137\ \ \ \ \ check\_ufunc\_scalar\_equivalence(op,\ arr1,\ arr2)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00138}00138\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00139}00139\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00140}00140\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}fscalar"{},\ [np.float16,\ np.float32])}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00141}00141\ \textcolor{keyword}{def\ }test\_int\_float\_promotion\_truediv(fscalar):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00142}00142\ \ \ \ \ \textcolor{comment}{\#\ Promotion\ for\ mixed\ int\ and\ float32/float16\ must\ not\ go\ to\ float64}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00143}00143\ \ \ \ \ i\ =\ np.int8(1)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00144}00144\ \ \ \ \ f\ =\ fscalar(1)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00145}00145\ \ \ \ \ expected\ =\ np.result\_type(i,\ f)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00146}00146\ \ \ \ \ \textcolor{keyword}{assert}\ (i\ /\ f).dtype\ ==\ expected}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00147}00147\ \ \ \ \ \textcolor{keyword}{assert}\ (f\ /\ i).dtype\ ==\ expected}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00148}00148\ \ \ \ \ \textcolor{comment}{\#\ But\ normal\ int\ /\ int\ true\ division\ goes\ to\ float64:}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00149}00149\ \ \ \ \ \textcolor{keyword}{assert}\ (i\ /\ i).dtype\ ==\ np.dtype(\textcolor{stringliteral}{"{}float64"{}})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00150}00150\ \ \ \ \ \textcolor{comment}{\#\ For\ int16,\ result\ has\ to\ be\ ast\ least\ float32\ (takes\ ufunc\ path):}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00151}00151\ \ \ \ \ \textcolor{keyword}{assert}\ (np.int16(1)\ /\ f).dtype\ ==\ np.dtype(\textcolor{stringliteral}{"{}float32"{}})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00152}00152\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00153}00153\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00154}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestBaseMath}{00154}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestBaseMath}{TestBaseMath}}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00155}00155\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.xfail(\_SUPPORTS\_SVE,\ reason="{}gh-\/22982"{})}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00156}00156\ \ \ \ \ \textcolor{keyword}{def\ }test\_blocked(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00157}00157\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ alignments\ offsets\ for\ simd\ instructions}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00158}00158\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ alignments\ for\ vz\ +\ 2\ *\ (vs\ -\/\ 1)\ +\ 1}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00159}00159\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt,\ sz\ \textcolor{keywordflow}{in}\ [(np.float32,\ 11),\ (np.float64,\ 7),\ (np.int32,\ 11)]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00160}00160\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ out,\ inp1,\ inp2,\ msg\ \textcolor{keywordflow}{in}\ \_gen\_alignment\_data(dtype=dt,}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00161}00161\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ type=\textcolor{stringliteral}{'binary'},}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00162}00162\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ max\_size=sz):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00163}00163\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ exp1\ =\ np.ones\_like(inp1)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00164}00164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ inp1[...]\ =\ np.ones\_like(inp1)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00165}00165\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ inp2[...]\ =\ np.zeros\_like(inp2)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00166}00166\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_almost\_equal(np.add(inp1,\ inp2),\ exp1,\ err\_msg=msg)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00167}00167\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_almost\_equal(np.add(inp1,\ 2),\ exp1\ +\ 2,\ err\_msg=msg)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00168}00168\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_almost\_equal(np.add(1,\ inp2),\ exp1,\ err\_msg=msg)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00169}00169\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00170}00170\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.add(inp1,\ inp2,\ out=out)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00171}00171\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_almost\_equal(out,\ exp1,\ err\_msg=msg)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00172}00172\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00173}00173\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ inp2[...]\ +=\ np.arange(inp2.size,\ dtype=dt)\ +\ 1}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00174}00174\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_almost\_equal(np.square(inp2),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00175}00175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.multiply(inp2,\ inp2),\ \ err\_msg=msg)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00176}00176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ skip\ true\ divide\ for\ ints}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00177}00177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ dt\ !=\ np.int32:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00178}00178\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_almost\_equal(np.reciprocal(inp2),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00179}00179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.divide(1,\ inp2),\ \ err\_msg=msg)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00180}00180\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00181}00181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ inp1[...]\ =\ np.ones\_like(inp1)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00182}00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.add(inp1,\ 2,\ out=out)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00183}00183\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_almost\_equal(out,\ exp1\ +\ 2,\ err\_msg=msg)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00184}00184\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ inp2[...]\ =\ np.ones\_like(inp2)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00185}00185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.add(2,\ inp2,\ out=out)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00186}00186\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_almost\_equal(out,\ exp1\ +\ 2,\ err\_msg=msg)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00187}00187\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00188}00188\ \ \ \ \ \textcolor{keyword}{def\ }test\_lower\_align(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00189}00189\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ data\ that\ is\ not\ aligned\ to\ element\ size}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00190}00190\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ i.e\ doubles\ are\ aligned\ to\ 4\ bytes\ on\ i386}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00191}00191\ \ \ \ \ \ \ \ \ d\ =\ np.zeros(23\ *\ 8,\ dtype=np.int8)[4:-\/4].view(np.float64)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00192}00192\ \ \ \ \ \ \ \ \ o\ =\ np.zeros(23\ *\ 8,\ dtype=np.int8)[4:-\/4].view(np.float64)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00193}00193\ \ \ \ \ \ \ \ \ assert\_almost\_equal(d\ +\ d,\ d\ *\ 2)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00194}00194\ \ \ \ \ \ \ \ \ np.add(d,\ d,\ out=o)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00195}00195\ \ \ \ \ \ \ \ \ np.add(np.ones\_like(d),\ d,\ out=o)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00196}00196\ \ \ \ \ \ \ \ \ np.add(d,\ np.ones\_like(d),\ out=o)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00197}00197\ \ \ \ \ \ \ \ \ np.add(np.ones\_like(d),\ d)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00198}00198\ \ \ \ \ \ \ \ \ np.add(d,\ np.ones\_like(d))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00199}00199\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00200}00200\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00201}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestPower}{00201}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestPower}{TestPower}}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00202}00202\ \ \ \ \ \textcolor{keyword}{def\ }test\_small\_types(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00203}00203\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ t\ \textcolor{keywordflow}{in}\ [np.int8,\ np.int16,\ np.float16]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00204}00204\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ t(3)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00205}00205\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ a\ **\ 4}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00206}00206\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(b\ ==\ 81,\ \textcolor{stringliteral}{"{}error\ with\ \%r:\ got\ \%r"{}}\ \%\ (t,\ b))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00207}00207\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00208}00208\ \ \ \ \ \textcolor{keyword}{def\ }test\_large\_types(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00209}00209\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ t\ \textcolor{keywordflow}{in}\ [np.int32,\ np.int64,\ np.float32,\ np.float64,\ np.longdouble]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00210}00210\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ t(51)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00211}00211\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ a\ **\ 4}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00212}00212\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}error\ with\ \%r:\ got\ \%r"{}}\ \%\ (t,\ b)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00213}00213\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ np.issubdtype(t,\ np.integer):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00214}00214\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(b\ ==\ 6765201,\ msg)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00215}00215\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00216}00216\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_almost\_equal(b,\ 6765201,\ err\_msg=msg)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00217}00217\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00218}00218\ \ \ \ \ \textcolor{keyword}{def\ }test\_integers\_to\_negative\_integer\_power(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00219}00219\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Note\ that\ the\ combination\ of\ uint64\ with\ a\ signed\ integer}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00220}00220\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ has\ common\ type\ np.float64.\ The\ other\ combinations\ should\ all}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00221}00221\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ raise\ a\ ValueError\ for\ integer\ **\ negative\ integer.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00222}00222\ \ \ \ \ \ \ \ \ exp\ =\ [np.array(-\/1,\ dt)[()]\ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ \textcolor{stringliteral}{'bhilq'}]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00223}00223\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00224}00224\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 1\ **\ -\/1\ possible\ special\ case}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00225}00225\ \ \ \ \ \ \ \ \ base\ =\ [np.array(1,\ dt)[()]\ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ \textcolor{stringliteral}{'bhilqBHILQ'}]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00226}00226\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i1,\ i2\ \textcolor{keywordflow}{in}\ itertools.product(base,\ exp):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00227}00227\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ i1.dtype\ !=\ np.uint64:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00228}00228\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ operator.pow,\ i1,\ i2)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00229}00229\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00230}00230\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ operator.pow(i1,\ i2)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00231}00231\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(res.dtype.type\ \textcolor{keywordflow}{is}\ np.float64)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00232}00232\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ 1.)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00233}00233\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00234}00234\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ -\/1\ **\ -\/1\ possible\ special\ case}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00235}00235\ \ \ \ \ \ \ \ \ base\ =\ [np.array(-\/1,\ dt)[()]\ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ \textcolor{stringliteral}{'bhilq'}]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00236}00236\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i1,\ i2\ \textcolor{keywordflow}{in}\ itertools.product(base,\ exp):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00237}00237\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ i1.dtype\ !=\ np.uint64:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00238}00238\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ operator.pow,\ i1,\ i2)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00239}00239\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00240}00240\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ operator.pow(i1,\ i2)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00241}00241\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(res.dtype.type\ \textcolor{keywordflow}{is}\ np.float64)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00242}00242\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ -\/1.)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00243}00243\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00244}00244\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 2\ **\ -\/1\ perhaps\ generic}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00245}00245\ \ \ \ \ \ \ \ \ base\ =\ [np.array(2,\ dt)[()]\ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ \textcolor{stringliteral}{'bhilqBHILQ'}]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00246}00246\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i1,\ i2\ \textcolor{keywordflow}{in}\ itertools.product(base,\ exp):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00247}00247\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ i1.dtype\ !=\ np.uint64:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00248}00248\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ operator.pow,\ i1,\ i2)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00249}00249\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00250}00250\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ operator.pow(i1,\ i2)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00251}00251\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(res.dtype.type\ \textcolor{keywordflow}{is}\ np.float64)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00252}00252\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ .5)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00253}00253\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00254}00254\ \ \ \ \ \textcolor{keyword}{def\ }test\_mixed\_types(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00255}00255\ \ \ \ \ \ \ \ \ typelist\ =\ [np.int8,\ np.int16,\ np.float16,}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00256}00256\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.float32,\ np.float64,\ np.int8,}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00257}00257\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.int16,\ np.int32,\ np.int64]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00258}00258\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ t1\ \textcolor{keywordflow}{in}\ typelist:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00259}00259\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ t2\ \textcolor{keywordflow}{in}\ typelist:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00260}00260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ t1(3)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00261}00261\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ t2(2)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00262}00262\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ a**b}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00263}00263\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ (\textcolor{stringliteral}{"{}error\ with\ \%r\ and\ \%r:"{}}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00264}00264\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}got\ \%r,\ expected\ \%r"{}})\ \%\ (t1,\ t2,\ result,\ 9)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00265}00265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ np.issubdtype(np.dtype(result),\ np.integer):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00266}00266\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(result\ ==\ 9,\ msg)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00267}00267\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00268}00268\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_almost\_equal(result,\ 9,\ err\_msg=msg)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00269}00269\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00270}00270\ \ \ \ \ \textcolor{keyword}{def\ }test\_modular\_power(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00271}00271\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ modular\ power\ is\ not\ implemented,\ so\ ensure\ it\ errors}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00272}00272\ \ \ \ \ \ \ \ \ a\ =\ 5}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00273}00273\ \ \ \ \ \ \ \ \ b\ =\ 4}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00274}00274\ \ \ \ \ \ \ \ \ c\ =\ 10}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00275}00275\ \ \ \ \ \ \ \ \ expected\ =\ pow(a,\ b,\ c)\ \ \textcolor{comment}{\#\ noqa:\ F841}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00276}00276\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ t\ \textcolor{keywordflow}{in}\ (np.int32,\ np.float32,\ np.complex64):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00277}00277\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ note\ that\ 3-\/operand\ power\ only\ dispatches\ on\ the\ first\ argument}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00278}00278\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ operator.pow,\ t(a),\ b,\ c)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00279}00279\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ operator.pow,\ np.array(t(a)),\ b,\ c)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00280}00280\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00281}00281\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00282}00282\ \textcolor{keyword}{def\ }floordiv\_and\_mod(x,\ y):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00283}00283\ \ \ \ \ \textcolor{keywordflow}{return}\ (x\ //\ y,\ x\ \%\ y)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00284}00284\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00285}00285\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00286}00286\ \textcolor{keyword}{def\ }\_signs(dt):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00287}00287\ \ \ \ \ \textcolor{keywordflow}{if}\ dt\ \textcolor{keywordflow}{in}\ np.typecodes[\textcolor{stringliteral}{'UnsignedInteger'}]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00288}00288\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (+1,)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00289}00289\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00290}00290\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (+1,\ -\/1)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00291}00291\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00292}00292\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00293}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestModulus}{00293}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestModulus}{TestModulus}}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00294}00294\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00295}00295\ \ \ \ \ \textcolor{keyword}{def\ }test\_modulus\_basic(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00296}00296\ \ \ \ \ \ \ \ \ dt\ =\ np.typecodes[\textcolor{stringliteral}{'AllInteger'}]\ +\ np.typecodes[\textcolor{stringliteral}{'Float'}]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00297}00297\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ op\ \textcolor{keywordflow}{in}\ [floordiv\_and\_mod,\ divmod]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00298}00298\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt1,\ dt2\ \textcolor{keywordflow}{in}\ itertools.product(dt,\ dt):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00299}00299\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ sg1,\ sg2\ \textcolor{keywordflow}{in}\ itertools.product(\_signs(dt1),\ \_signs(dt2)):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00300}00300\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fmt\ =\ \textcolor{stringliteral}{'op:\ \%s,\ dt1:\ \%s,\ dt2:\ \%s,\ sg1:\ \%s,\ sg2:\ \%s'}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00301}00301\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ fmt\ \%\ (op.\_\_name\_\_,\ dt1,\ dt2,\ sg1,\ sg2)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00302}00302\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.array(sg1*71,\ dtype=dt1)[()]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00303}00303\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ np.array(sg2*19,\ dtype=dt2)[()]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00304}00304\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ div,\ rem\ =\ op(a,\ b)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00305}00305\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(div*b\ +\ rem,\ a,\ err\_msg=msg)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00306}00306\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ sg2\ ==\ -\/1:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00307}00307\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(b\ <\ rem\ <=\ 0,\ msg)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00308}00308\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00309}00309\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(b\ >\ rem\ >=\ 0,\ msg)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00310}00310\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00311}00311\ \ \ \ \ \textcolor{keyword}{def\ }test\_float\_modulus\_exact(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00312}00312\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ that\ float\ results\ are\ exact\ for\ small\ integers.\ This\ also}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00313}00313\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ holds\ for\ the\ same\ integers\ scaled\ by\ powers\ of\ two.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00314}00314\ \ \ \ \ \ \ \ \ nlst\ =\ list(range(-\/127,\ 0))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00315}00315\ \ \ \ \ \ \ \ \ plst\ =\ list(range(1,\ 128))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00316}00316\ \ \ \ \ \ \ \ \ dividend\ =\ nlst\ +\ [0]\ +\ plst}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00317}00317\ \ \ \ \ \ \ \ \ divisor\ =\ nlst\ +\ plst}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00318}00318\ \ \ \ \ \ \ \ \ arg\ =\ list(itertools.product(dividend,\ divisor))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00319}00319\ \ \ \ \ \ \ \ \ tgt\ =\ list(divmod(*t)\ \textcolor{keywordflow}{for}\ t\ \textcolor{keywordflow}{in}\ arg)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00320}00320\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00321}00321\ \ \ \ \ \ \ \ \ a,\ b\ =\ np.array(arg,\ dtype=int).T}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00322}00322\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ convert\ exact\ integer\ results\ from\ Python\ to\ float\ so\ that}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00323}00323\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ signed\ zero\ can\ be\ used,\ it\ is\ checked.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00324}00324\ \ \ \ \ \ \ \ \ tgtdiv,\ tgtrem\ =\ np.array(tgt,\ dtype=float).T}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00325}00325\ \ \ \ \ \ \ \ \ tgtdiv\ =\ np.where((tgtdiv\ ==\ 0.0)\ \&\ ((b\ <\ 0)\ \string^\ (a\ <\ 0)),\ -\/0.0,\ tgtdiv)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00326}00326\ \ \ \ \ \ \ \ \ tgtrem\ =\ np.where((tgtrem\ ==\ 0.0)\ \&\ (b\ <\ 0),\ -\/0.0,\ tgtrem)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00327}00327\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00328}00328\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ op\ \textcolor{keywordflow}{in}\ [floordiv\_and\_mod,\ divmod]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00329}00329\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ np.typecodes[\textcolor{stringliteral}{'Float'}]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00330}00330\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{'op:\ \%s,\ dtype:\ \%s'}\ \%\ (op.\_\_name\_\_,\ dt)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00331}00331\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fa\ =\ a.astype(dt)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00332}00332\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fb\ =\ b.astype(dt)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00333}00333\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ use\ list\ comprehension\ so\ a\_\ and\ b\_\ are\ scalars}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00334}00334\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ div,\ rem\ =\ zip(*[op(a\_,\ b\_)\ \textcolor{keywordflow}{for}\ \ a\_,\ b\_\ \textcolor{keywordflow}{in}\ zip(fa,\ fb)])}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00335}00335\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(div,\ tgtdiv,\ err\_msg=msg)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00336}00336\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(rem,\ tgtrem,\ err\_msg=msg)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00337}00337\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00338}00338\ \ \ \ \ \textcolor{keyword}{def\ }test\_float\_modulus\_roundoff(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00339}00339\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/6127}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00340}00340\ \ \ \ \ \ \ \ \ dt\ =\ np.typecodes[\textcolor{stringliteral}{'Float'}]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00341}00341\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ op\ \textcolor{keywordflow}{in}\ [floordiv\_and\_mod,\ divmod]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00342}00342\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt1,\ dt2\ \textcolor{keywordflow}{in}\ itertools.product(dt,\ dt):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00343}00343\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ sg1,\ sg2\ \textcolor{keywordflow}{in}\ itertools.product((+1,\ -\/1),\ (+1,\ -\/1)):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00344}00344\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fmt\ =\ \textcolor{stringliteral}{'op:\ \%s,\ dt1:\ \%s,\ dt2:\ \%s,\ sg1:\ \%s,\ sg2:\ \%s'}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00345}00345\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ fmt\ \%\ (op.\_\_name\_\_,\ dt1,\ dt2,\ sg1,\ sg2)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00346}00346\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.array(sg1*78*6e-\/8,\ dtype=dt1)[()]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00347}00347\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ np.array(sg2*6e-\/8,\ dtype=dt2)[()]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00348}00348\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ div,\ rem\ =\ op(a,\ b)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00349}00349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Equal\ assertion\ should\ hold\ when\ fmod\ is\ used}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00350}00350\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(div*b\ +\ rem,\ a,\ err\_msg=msg)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00351}00351\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ sg2\ ==\ -\/1:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00352}00352\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(b\ <\ rem\ <=\ 0,\ msg)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00353}00353\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00354}00354\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(b\ >\ rem\ >=\ 0,\ msg)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00355}00355\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00356}00356\ \ \ \ \ \textcolor{keyword}{def\ }test\_float\_modulus\_corner\_cases(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00357}00357\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ remainder\ magnitude.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00358}00358\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ np.typecodes[\textcolor{stringliteral}{'Float'}]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00359}00359\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ np.array(1.0,\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00360}00360\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.nextafter(np.array(0.0,\ dtype=dt),\ -\/b)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00361}00361\ \ \ \ \ \ \ \ \ \ \ \ \ rem\ =\ operator.mod(a,\ b)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00362}00362\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(rem\ <=\ b,\ \textcolor{stringliteral}{'dt:\ \%s'}\ \%\ dt)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00363}00363\ \ \ \ \ \ \ \ \ \ \ \ \ rem\ =\ operator.mod(-\/a,\ -\/b)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00364}00364\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(rem\ >=\ -\/b,\ \textcolor{stringliteral}{'dt:\ \%s'}\ \%\ dt)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00365}00365\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00366}00366\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ nans,\ inf}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00367}00367\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ \mbox{\hyperlink{classnumpy_1_1testing_1_1__private_1_1utils_1_1suppress__warnings}{suppress\_warnings}}()\ \textcolor{keyword}{as}\ sup:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00368}00368\ \ \ \ \ \ \ \ \ \ \ \ \ sup.filter(RuntimeWarning,\ \textcolor{stringliteral}{"{}invalid\ value\ encountered\ in\ remainder"{}})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00369}00369\ \ \ \ \ \ \ \ \ \ \ \ \ sup.filter(RuntimeWarning,\ \textcolor{stringliteral}{"{}divide\ by\ zero\ encountered\ in\ remainder"{}})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00370}00370\ \ \ \ \ \ \ \ \ \ \ \ \ sup.filter(RuntimeWarning,\ \textcolor{stringliteral}{"{}divide\ by\ zero\ encountered\ in\ floor\_divide"{}})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00371}00371\ \ \ \ \ \ \ \ \ \ \ \ \ sup.filter(RuntimeWarning,\ \textcolor{stringliteral}{"{}divide\ by\ zero\ encountered\ in\ divmod"{}})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00372}00372\ \ \ \ \ \ \ \ \ \ \ \ \ sup.filter(RuntimeWarning,\ \textcolor{stringliteral}{"{}invalid\ value\ encountered\ in\ divmod"{}})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00373}00373\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ np.typecodes[\textcolor{stringliteral}{'Float'}]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00374}00374\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fone\ =\ np.array(1.0,\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00375}00375\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fzer\ =\ np.array(0.0,\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00376}00376\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ finf\ =\ np.array(np.inf,\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00377}00377\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fnan\ =\ np.array(np.nan,\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00378}00378\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rem\ =\ operator.mod(fone,\ fzer)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00379}00379\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.isnan(rem),\ \textcolor{stringliteral}{'dt:\ \%s'}\ \%\ dt)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00380}00380\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ MSVC\ 2008\ returns\ NaN\ here,\ so\ disable\ the\ check.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00381}00381\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#rem\ =\ operator.mod(fone,\ finf)}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00382}00382\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#assert\_(rem\ ==\ fone,\ 'dt:\ \%s'\ \%\ dt)}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00383}00383\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rem\ =\ operator.mod(fone,\ fnan)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00384}00384\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.isnan(rem),\ \textcolor{stringliteral}{'dt:\ \%s'}\ \%\ dt)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00385}00385\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rem\ =\ operator.mod(finf,\ fone)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00386}00386\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.isnan(rem),\ \textcolor{stringliteral}{'dt:\ \%s'}\ \%\ dt)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00387}00387\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ op\ \textcolor{keywordflow}{in}\ [floordiv\_and\_mod,\ divmod]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00388}00388\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ div,\ mod\ =\ op(fone,\ fzer)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00389}00389\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.isinf(div))\ \textcolor{keywordflow}{and}\ assert\_(np.isnan(mod))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00390}00390\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00391}00391\ \ \ \ \ \textcolor{keyword}{def\ }test\_inplace\_floordiv\_handling(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00392}00392\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ issue\ gh-\/12927}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00393}00393\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ this\ only\ applies\ to\ in-\/place\ floordiv\ //=,\ because\ the\ output\ type}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00394}00394\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ promotes\ to\ float\ which\ does\ not\ fit}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00395}00395\ \ \ \ \ \ \ \ \ a\ =\ np.array([1,\ 2],\ np.int64)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00396}00396\ \ \ \ \ \ \ \ \ b\ =\ np.array([1,\ 2],\ np.uint64)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00397}00397\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError,}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00398}00398\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ match=\textcolor{stringliteral}{r"{}Cannot\ cast\ ufunc\ 'floor\_divide'\ output\ from"{}}):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00399}00399\ \ \ \ \ \ \ \ \ \ \ \ \ a\ //=\ b}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00400}00400\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00401}00401\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00402}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestComplexDivision}{00402}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestComplexDivision}{TestComplexDivision}}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00403}00403\ \ \ \ \ \textcolor{keyword}{def\ }test\_zero\_division(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00404}00404\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ np.errstate(all=\textcolor{stringliteral}{"{}ignore"{}}):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00405}00405\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ t\ \textcolor{keywordflow}{in}\ [np.complex64,\ np.complex128]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00406}00406\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ t(0.0)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00407}00407\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ t(1.0)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00408}00408\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.isinf(b/a))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00409}00409\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ t(complex(np.inf,\ np.inf))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00410}00410\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.isinf(b/a))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00411}00411\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ t(complex(np.inf,\ np.nan))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00412}00412\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.isinf(b/a))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00413}00413\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ t(complex(np.nan,\ np.inf))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00414}00414\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.isinf(b/a))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00415}00415\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ t(complex(np.nan,\ np.nan))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00416}00416\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.isnan(b/a))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00417}00417\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ t(0.)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00418}00418\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.isnan(b/a))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00419}00419\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00420}00420\ \ \ \ \ \textcolor{keyword}{def\ }test\_signed\_zeros(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00421}00421\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ np.errstate(all=\textcolor{stringliteral}{"{}ignore"{}}):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00422}00422\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ t\ \textcolor{keywordflow}{in}\ [np.complex64,\ np.complex128]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00423}00423\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ tupled\ (numerator,\ denominator,\ expected)}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00424}00424\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ for\ testing\ as\ expected\ ==\ numerator/denominator}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00425}00425\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data\ =\ (}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00426}00426\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((\ 0.0,-\/1.0),\ (\ 0.0,\ 1.0),\ (-\/1.0,-\/0.0)),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00427}00427\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((\ 0.0,-\/1.0),\ (\ 0.0,-\/1.0),\ (\ 1.0,-\/0.0)),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00428}00428\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((\ 0.0,-\/1.0),\ (-\/0.0,-\/1.0),\ (\ 1.0,\ 0.0)),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00429}00429\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((\ 0.0,-\/1.0),\ (-\/0.0,\ 1.0),\ (-\/1.0,\ 0.0)),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00430}00430\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((\ 0.0,\ 1.0),\ (\ 0.0,-\/1.0),\ (-\/1.0,\ 0.0)),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00431}00431\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((\ 0.0,-\/1.0),\ (\ 0.0,-\/1.0),\ (\ 1.0,-\/0.0)),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00432}00432\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((-\/0.0,-\/1.0),\ (\ 0.0,-\/1.0),\ (\ 1.0,-\/0.0)),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00433}00433\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((-\/0.0,\ 1.0),\ (\ 0.0,-\/1.0),\ (-\/1.0,-\/0.0))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00434}00434\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00435}00435\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ cases\ \textcolor{keywordflow}{in}\ data:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00436}00436\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ n\ =\ cases[0]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00437}00437\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ cases[1]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00438}00438\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ex\ =\ cases[2]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00439}00439\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ t(complex(n[0],\ n[1]))\ /\ t(complex(d[0],\ d[1]))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00440}00440\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ real\ and\ imag\ parts\ separately\ to\ avoid\ comparison}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00441}00441\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ in\ array\ context,\ which\ does\ not\ account\ for\ signed\ zeros}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00442}00442\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(result.real,\ ex[0])}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00443}00443\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(result.imag,\ ex[1])}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00444}00444\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00445}00445\ \ \ \ \ \textcolor{keyword}{def\ }test\_branches(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00446}00446\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ np.errstate(all=\textcolor{stringliteral}{"{}ignore"{}}):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00447}00447\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ t\ \textcolor{keywordflow}{in}\ [np.complex64,\ np.complex128]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00448}00448\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ tupled\ (numerator,\ denominator,\ expected)}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00449}00449\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ for\ testing\ as\ expected\ ==\ numerator/denominator}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00450}00450\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data\ =\ list()}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00451}00451\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00452}00452\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ trigger\ branch:\ real(fabs(denom))\ >\ imag(fabs(denom))}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00453}00453\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ followed\ by\ else\ condition\ as\ neither\ are\ ==\ 0}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00454}00454\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data.append(((\ 2.0,\ 1.0),\ (\ 2.0,\ 1.0),\ (1.0,\ 0.0)))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00455}00455\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00456}00456\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ trigger\ branch:\ real(fabs(denom))\ >\ imag(fabs(denom))}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00457}00457\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ followed\ by\ if\ condition\ as\ both\ are\ ==\ 0}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00458}00458\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ is\ performed\ in\ test\_zero\_division(),\ so\ this\ is\ skipped}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00459}00459\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00460}00460\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ trigger\ else\ if\ branch:\ real(fabs(denom))\ <\ imag(fabs(denom))}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00461}00461\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data.append(((\ 1.0,\ 2.0),\ (\ 1.0,\ 2.0),\ (1.0,\ 0.0)))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00462}00462\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00463}00463\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ cases\ \textcolor{keywordflow}{in}\ data:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00464}00464\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ n\ =\ cases[0]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00465}00465\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ cases[1]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00466}00466\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ex\ =\ cases[2]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00467}00467\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ t(complex(n[0],\ n[1]))\ /\ t(complex(d[0],\ d[1]))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00468}00468\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ real\ and\ imag\ parts\ separately\ to\ avoid\ comparison}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00469}00469\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ in\ array\ context,\ which\ does\ not\ account\ for\ signed\ zeros}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00470}00470\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(result.real,\ ex[0])}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00471}00471\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(result.imag,\ ex[1])}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00472}00472\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00473}00473\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00474}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestConversion}{00474}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestConversion}{TestConversion}}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00475}00475\ \ \ \ \ \textcolor{keyword}{def\ }test\_int\_from\_long(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00476}00476\ \ \ \ \ \ \ \ \ l\ =\ [1e6,\ 1e12,\ 1e18,\ -\/1e6,\ -\/1e12,\ -\/1e18]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00477}00477\ \ \ \ \ \ \ \ \ li\ =\ [10**6,\ 10**12,\ 10**18,\ -\/10**6,\ -\/10**12,\ -\/10**18]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00478}00478\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ T\ \textcolor{keywordflow}{in}\ [\textcolor{keywordtype}{None},\ np.float64,\ np.int64]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00479}00479\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.array(l,\ dtype=T)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00480}00480\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal([int(\_m)\ \textcolor{keywordflow}{for}\ \_m\ \textcolor{keywordflow}{in}\ a],\ li)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00481}00481\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00482}00482\ \ \ \ \ \ \ \ \ a\ =\ np.array(l[:3],\ dtype=np.uint64)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00483}00483\ \ \ \ \ \ \ \ \ assert\_equal([int(\_m)\ \textcolor{keywordflow}{for}\ \_m\ \textcolor{keywordflow}{in}\ a],\ li[:3])}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00484}00484\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00485}00485\ \ \ \ \ \textcolor{keyword}{def\ }test\_iinfo\_long\_values(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00486}00486\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ code\ \textcolor{keywordflow}{in}\ \textcolor{stringliteral}{'bBhH'}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00487}00487\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.warns(DeprecationWarning):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00488}00488\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ np.array(np.iinfo(code).max\ +\ 1,\ dtype=code)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00489}00489\ \ \ \ \ \ \ \ \ \ \ \ \ tgt\ =\ np.iinfo(code).min}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00490}00490\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(res\ ==\ tgt)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00491}00491\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00492}00492\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ code\ \textcolor{keywordflow}{in}\ np.typecodes[\textcolor{stringliteral}{'AllInteger'}]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00493}00493\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ np.array(np.iinfo(code).max,\ dtype=code)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00494}00494\ \ \ \ \ \ \ \ \ \ \ \ \ tgt\ =\ np.iinfo(code).max}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00495}00495\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(res\ ==\ tgt)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00496}00496\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00497}00497\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ code\ \textcolor{keywordflow}{in}\ np.typecodes[\textcolor{stringliteral}{'AllInteger'}]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00498}00498\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ np.dtype(code).type(np.iinfo(code).max)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00499}00499\ \ \ \ \ \ \ \ \ \ \ \ \ tgt\ =\ np.iinfo(code).max}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00500}00500\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(res\ ==\ tgt)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00501}00501\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00502}00502\ \ \ \ \ \textcolor{keyword}{def\ }test\_int\_raise\_behaviour(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00503}00503\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }overflow\_error\_func(dtype):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00504}00504\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedtype}{dtype}}(np.iinfo(dtype).max\ +\ 1)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00505}00505\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00506}00506\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ code\ \textcolor{keywordflow}{in}\ [np.int\_,\ np.uint,\ np.longlong,\ np.ulonglong]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00507}00507\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(OverflowError,\ overflow\_error\_func,\ code)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00508}00508\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00509}00509\ \ \ \ \ \textcolor{keyword}{def\ }test\_int\_from\_infinite\_longdouble(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00510}00510\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/627}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00511}00511\ \ \ \ \ \ \ \ \ x\ =\ np.longdouble(np.inf)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00512}00512\ \ \ \ \ \ \ \ \ assert\_raises(OverflowError,\ int,\ x)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00513}00513\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ \mbox{\hyperlink{classnumpy_1_1testing_1_1__private_1_1utils_1_1suppress__warnings}{suppress\_warnings}}()\ \textcolor{keyword}{as}\ sup:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00514}00514\ \ \ \ \ \ \ \ \ \ \ \ \ sup.record(np.ComplexWarning)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00515}00515\ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ np.clongdouble(np.inf)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00516}00516\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(OverflowError,\ int,\ x)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00517}00517\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(len(sup.log),\ 1)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00518}00518\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00519}00519\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.skipif(not\ IS\_PYPY,\ reason="{}Test\ is\ PyPy\ only\ (gh-\/9972)}\textcolor{stringliteral}{"{})}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00520}00520\ \textcolor{stringliteral}{\ \ \ \ }\textcolor{keyword}{def\ }test\_int\_from\_infinite\_longdouble\_\_\_int\_\_(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00521}00521\ \ \ \ \ \ \ \ \ x\ =\ np.longdouble(np.inf)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00522}00522\ \ \ \ \ \ \ \ \ assert\_raises(OverflowError,\ x.\_\_int\_\_)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00523}00523\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ \mbox{\hyperlink{classnumpy_1_1testing_1_1__private_1_1utils_1_1suppress__warnings}{suppress\_warnings}}()\ \textcolor{keyword}{as}\ sup:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00524}00524\ \ \ \ \ \ \ \ \ \ \ \ \ sup.record(np.ComplexWarning)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00525}00525\ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ np.clongdouble(np.inf)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00526}00526\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(OverflowError,\ x.\_\_int\_\_)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00527}00527\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(len(sup.log),\ 1)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00528}00528\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00529}00529\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.skipif(np.finfo(np.double)}\ ==\ np.finfo(np.longdouble),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00530}00530\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ reason=\textcolor{stringliteral}{"{}long\ double\ is\ same\ as\ double"{}})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00531}00531\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.skipif(platform.machine()}.startswith(\textcolor{stringliteral}{"{}ppc"{}}),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00532}00532\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ reason=\textcolor{stringliteral}{"{}IBM\ double\ double"{}})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00533}00533\ \ \ \ \ \textcolor{keyword}{def\ }test\_int\_from\_huge\_longdouble(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00534}00534\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Produce\ a\ longdouble\ that\ would\ overflow\ a\ double,}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00535}00535\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ use\ exponent\ that\ avoids\ bug\ in\ Darwin\ pow\ function.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00536}00536\ \ \ \ \ \ \ \ \ exp\ =\ np.finfo(np.double).maxexp\ -\/\ 1}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00537}00537\ \ \ \ \ \ \ \ \ huge\_ld\ =\ 2\ *\ 1234\ *\ np.longdouble(2)\ **\ exp}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00538}00538\ \ \ \ \ \ \ \ \ huge\_i\ =\ 2\ *\ 1234\ *\ 2\ **\ exp}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00539}00539\ \ \ \ \ \ \ \ \ assert\_(huge\_ld\ !=\ np.inf)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00540}00540\ \ \ \ \ \ \ \ \ assert\_equal(int(huge\_ld),\ huge\_i)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00541}00541\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00542}00542\ \ \ \ \ \textcolor{keyword}{def\ }test\_int\_from\_longdouble(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00543}00543\ \ \ \ \ \ \ \ \ x\ =\ np.longdouble(1.5)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00544}00544\ \ \ \ \ \ \ \ \ assert\_equal(int(x),\ 1)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00545}00545\ \ \ \ \ \ \ \ \ x\ =\ np.longdouble(-\/10.5)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00546}00546\ \ \ \ \ \ \ \ \ assert\_equal(int(x),\ -\/10)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00547}00547\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00548}00548\ \ \ \ \ \textcolor{keyword}{def\ }test\_numpy\_scalar\_relational\_operators(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00549}00549\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ All\ integer}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00550}00550\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt1\ \textcolor{keywordflow}{in}\ np.typecodes[\textcolor{stringliteral}{'AllInteger'}]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00551}00551\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(1\ >\ np.array(0,\ dtype=dt1)[()],\ \textcolor{stringliteral}{"{}type\ \%s\ failed"{}}\ \%\ (dt1,))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00552}00552\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ 1\ <\ np.array(0,\ dtype=dt1)[()],\ \textcolor{stringliteral}{"{}type\ \%s\ failed"{}}\ \%\ (dt1,))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00553}00553\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00554}00554\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt2\ \textcolor{keywordflow}{in}\ np.typecodes[\textcolor{stringliteral}{'AllInteger'}]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00555}00555\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.array(1,\ dtype=dt1)[()]\ >\ np.array(0,\ dtype=dt2)[()],}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00556}00556\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}type\ \%s\ and\ \%s\ failed"{}}\ \%\ (dt1,\ dt2))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00557}00557\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ np.array(1,\ dtype=dt1)[()]\ <\ np.array(0,\ dtype=dt2)[()],}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00558}00558\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}type\ \%s\ and\ \%s\ failed"{}}\ \%\ (dt1,\ dt2))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00559}00559\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00560}00560\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#Unsigned\ integers}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00561}00561\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt1\ \textcolor{keywordflow}{in}\ \textcolor{stringliteral}{'BHILQP'}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00562}00562\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(-\/1\ <\ np.array(1,\ dtype=dt1)[()],\ \textcolor{stringliteral}{"{}type\ \%s\ failed"{}}\ \%\ (dt1,))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00563}00563\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ -\/1\ >\ np.array(1,\ dtype=dt1)[()],\ \textcolor{stringliteral}{"{}type\ \%s\ failed"{}}\ \%\ (dt1,))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00564}00564\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(-\/1\ !=\ np.array(1,\ dtype=dt1)[()],\ \textcolor{stringliteral}{"{}type\ \%s\ failed"{}}\ \%\ (dt1,))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00565}00565\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00566}00566\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#unsigned\ vs\ signed}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00567}00567\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt2\ \textcolor{keywordflow}{in}\ \textcolor{stringliteral}{'bhilqp'}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00568}00568\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.array(1,\ dtype=dt1)[()]\ >\ np.array(-\/1,\ dtype=dt2)[()],}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00569}00569\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}type\ \%s\ and\ \%s\ failed"{}}\ \%\ (dt1,\ dt2))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00570}00570\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ np.array(1,\ dtype=dt1)[()]\ <\ np.array(-\/1,\ dtype=dt2)[()],}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00571}00571\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}type\ \%s\ and\ \%s\ failed"{}}\ \%\ (dt1,\ dt2))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00572}00572\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.array(1,\ dtype=dt1)[()]\ !=\ np.array(-\/1,\ dtype=dt2)[()],}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00573}00573\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}type\ \%s\ and\ \%s\ failed"{}}\ \%\ (dt1,\ dt2))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00574}00574\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00575}00575\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#Signed\ integers\ and\ floats}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00576}00576\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt1\ \textcolor{keywordflow}{in}\ \textcolor{stringliteral}{'bhlqp'}\ +\ np.typecodes[\textcolor{stringliteral}{'Float'}]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00577}00577\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(1\ >\ np.array(-\/1,\ dtype=dt1)[()],\ \textcolor{stringliteral}{"{}type\ \%s\ failed"{}}\ \%\ (dt1,))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00578}00578\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ 1\ <\ np.array(-\/1,\ dtype=dt1)[()],\ \textcolor{stringliteral}{"{}type\ \%s\ failed"{}}\ \%\ (dt1,))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00579}00579\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(-\/1\ ==\ np.array(-\/1,\ dtype=dt1)[()],\ \textcolor{stringliteral}{"{}type\ \%s\ failed"{}}\ \%\ (dt1,))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00580}00580\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00581}00581\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt2\ \textcolor{keywordflow}{in}\ \textcolor{stringliteral}{'bhlqp'}\ +\ np.typecodes[\textcolor{stringliteral}{'Float'}]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00582}00582\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.array(1,\ dtype=dt1)[()]\ >\ np.array(-\/1,\ dtype=dt2)[()],}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00583}00583\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}type\ \%s\ and\ \%s\ failed"{}}\ \%\ (dt1,\ dt2))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00584}00584\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ np.array(1,\ dtype=dt1)[()]\ <\ np.array(-\/1,\ dtype=dt2)[()],}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00585}00585\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}type\ \%s\ and\ \%s\ failed"{}}\ \%\ (dt1,\ dt2))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00586}00586\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.array(-\/1,\ dtype=dt1)[()]\ ==\ np.array(-\/1,\ dtype=dt2)[()],}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00587}00587\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}type\ \%s\ and\ \%s\ failed"{}}\ \%\ (dt1,\ dt2))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00588}00588\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00589}00589\ \ \ \ \ \textcolor{keyword}{def\ }test\_scalar\_comparison\_to\_none(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00590}00590\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Scalars\ should\ just\ return\ False\ and\ not\ give\ a\ warnings.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00591}00591\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ comparisons\ are\ flagged\ by\ pep8,\ ignore\ that.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00592}00592\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ warnings.catch\_warnings(record=\textcolor{keyword}{True})\ \textcolor{keyword}{as}\ w:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00593}00593\ \ \ \ \ \ \ \ \ \ \ \ \ warnings.filterwarnings(\textcolor{stringliteral}{'always'},\ \textcolor{stringliteral}{''},\ FutureWarning)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00594}00594\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ np.float32(1)\ ==\ \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00595}00595\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ np.str\_(\textcolor{stringliteral}{'test'})\ ==\ \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00596}00596\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ This\ is\ dubious\ (see\ below):}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00597}00597\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ np.datetime64(\textcolor{stringliteral}{'NaT'})\ ==\ \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00598}00598\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00599}00599\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.float32(1)\ !=\ \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00600}00600\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.str\_(\textcolor{stringliteral}{'test'})\ !=\ \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00601}00601\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ This\ is\ dubious\ (see\ below):}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00602}00602\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.datetime64(\textcolor{stringliteral}{'NaT'})\ !=\ \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00603}00603\ \ \ \ \ \ \ \ \ assert\_(len(w)\ ==\ 0)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00604}00604\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00605}00605\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ For\ documentation\ purposes,\ this\ is\ why\ the\ datetime\ is\ dubious.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00606}00606\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ At\ the\ time\ of\ deprecation\ this\ was\ no\ behaviour\ change,\ but}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00607}00607\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ it\ has\ to\ be\ considered\ when\ the\ deprecations\ are\ done.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00608}00608\ \ \ \ \ \ \ \ \ assert\_(np.equal(np.datetime64(\textcolor{stringliteral}{'NaT'}),\ \textcolor{keywordtype}{None}))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00609}00609\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00610}00610\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00611}00611\ \textcolor{comment}{\#class\ TestRepr:}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00612}00612\ \textcolor{comment}{\#\ \ \ \ def\ test\_repr(self):}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00613}00613\ \textcolor{comment}{\#\ \ \ \ \ \ \ \ for\ t\ in\ types:}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00614}00614\ \textcolor{comment}{\#\ \ \ \ \ \ \ \ \ \ \ \ val\ =\ t(1197346475.0137341)}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00615}00615\ \textcolor{comment}{\#\ \ \ \ \ \ \ \ \ \ \ \ val\_repr\ =\ repr(val)}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00616}00616\ \textcolor{comment}{\#\ \ \ \ \ \ \ \ \ \ \ \ val2\ =\ eval(val\_repr)}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00617}00617\ \textcolor{comment}{\#\ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(\ val,\ val2\ )}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00618}00618\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00619}00619\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00620}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestRepr}{00620}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestRepr}{TestRepr}}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00621}00621\ \ \ \ \ \textcolor{keyword}{def\ }\_test\_type\_repr(self,\ t):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00622}00622\ \ \ \ \ \ \ \ \ finfo\ =\ np.finfo(t)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00623}00623\ \ \ \ \ \ \ \ \ last\_fraction\_bit\_idx\ =\ finfo.nexp\ +\ finfo.nmant}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00624}00624\ \ \ \ \ \ \ \ \ last\_exponent\_bit\_idx\ =\ finfo.nexp}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00625}00625\ \ \ \ \ \ \ \ \ storage\_bytes\ =\ np.dtype(t).itemsize*8}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00626}00626\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ could\ add\ some\ more\ types\ to\ the\ list\ below}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00627}00627\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ which\ \textcolor{keywordflow}{in}\ [\textcolor{stringliteral}{'small\ denorm'},\ \textcolor{stringliteral}{'small\ norm'}]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00628}00628\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Values\ from\ https://en.wikipedia.org/wiki/IEEE\_754}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00629}00629\ \ \ \ \ \ \ \ \ \ \ \ \ constr\ =\ np.array([0x00]*storage\_bytes,\ dtype=np.uint8)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00630}00630\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ which\ ==\ \textcolor{stringliteral}{'small\ denorm'}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00631}00631\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ byte\ =\ last\_fraction\_bit\_idx\ //\ 8}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00632}00632\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bytebit\ =\ 7-\/(last\_fraction\_bit\_idx\ \%\ 8)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00633}00633\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ constr[byte]\ =\ 1\ <<\ bytebit}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00634}00634\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ which\ ==\ \textcolor{stringliteral}{'small\ norm'}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00635}00635\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ byte\ =\ last\_exponent\_bit\_idx\ //\ 8}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00636}00636\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bytebit\ =\ 7-\/(last\_exponent\_bit\_idx\ \%\ 8)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00637}00637\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ constr[byte]\ =\ 1\ <<\ bytebit}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00638}00638\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00639}00639\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classValueError}{ValueError}}(\textcolor{stringliteral}{'hmm'})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00640}00640\ \ \ \ \ \ \ \ \ \ \ \ \ val\ =\ constr.view(t)[0]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00641}00641\ \ \ \ \ \ \ \ \ \ \ \ \ val\_repr\ =\ repr(val)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00642}00642\ \ \ \ \ \ \ \ \ \ \ \ \ val2\ =\ t(eval(val\_repr))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00643}00643\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ (val2\ ==\ 0\ \textcolor{keywordflow}{and}\ val\ <\ 1e-\/100):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00644}00644\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(val,\ val2)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00645}00645\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00646}00646\ \ \ \ \ \textcolor{keyword}{def\ }test\_float\_repr(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00647}00647\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ long\ double\ test\ cannot\ work,\ because\ eval\ goes\ through\ a\ python}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00648}00648\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ float}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00649}00649\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ t\ \textcolor{keywordflow}{in}\ [np.float32,\ np.float64]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00650}00650\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestRepr_acdbe97d5c04fd4794709b2a5284aa7a6}{\_test\_type\_repr}}(t)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00651}00651\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00652}00652\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00653}00653\ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ IS\_PYPY:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00654}00654\ \ \ \ \ \textcolor{comment}{\#\ sys.getsizeof()\ is\ not\ valid\ on\ PyPy}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00655}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestSizeOf}{00655}}\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestSizeOf}{TestSizeOf}}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00656}00656\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00657}00657\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }test\_equal\_nbytes(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00658}00658\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ type\ \textcolor{keywordflow}{in}\ types:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00659}00659\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ type(0)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00660}00660\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(sys.getsizeof(x)\ >\ x.nbytes)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00661}00661\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00662}00662\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }test\_error(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00663}00663\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.float32()}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00664}00664\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ d.\_\_sizeof\_\_,\ \textcolor{stringliteral}{"{}a"{}})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00665}00665\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00666}00666\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00667}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestMultiply}{00667}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestMultiply}{TestMultiply}}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00668}00668\ \ \ \ \ \textcolor{keyword}{def\ }test\_seq\_repeat(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00669}00669\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ that\ basic\ sequences\ get\ repeated\ when\ multiplied\ with}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00670}00670\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ numpy\ integers.\ And\ errors\ are\ raised\ when\ multiplied\ with\ others.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00671}00671\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Some\ of\ this\ behaviour\ may\ be\ controversial\ and\ could\ be\ open\ for}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00672}00672\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ change.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00673}00673\ \ \ \ \ \ \ \ \ accepted\_types\ =\ set(np.typecodes[\textcolor{stringliteral}{"{}AllInteger"{}}])}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00674}00674\ \ \ \ \ \ \ \ \ deprecated\_types\ =\ \{\textcolor{stringliteral}{'?'}\}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00675}00675\ \ \ \ \ \ \ \ \ forbidden\_types\ =\ (}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00676}00676\ \ \ \ \ \ \ \ \ \ \ \ \ set(np.typecodes[\textcolor{stringliteral}{"{}All"{}}])\ -\/\ accepted\_types\ -\/\ deprecated\_types)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00677}00677\ \ \ \ \ \ \ \ \ forbidden\_types\ -\/=\ \{\textcolor{stringliteral}{'V'}\}\ \ \textcolor{comment}{\#\ can't\ default-\/construct\ void\ scalars}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00678}00678\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00679}00679\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ seq\_type\ \textcolor{keywordflow}{in}\ (list,\ tuple):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00680}00680\ \ \ \ \ \ \ \ \ \ \ \ \ seq\ =\ seq\_type([1,\ 2,\ 3])}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00681}00681\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ numpy\_type\ \textcolor{keywordflow}{in}\ accepted\_types:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00682}00682\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ i\ =\ np.dtype(numpy\_type).type(2)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00683}00683\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(seq\ *\ i,\ seq\ *\ int(i))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00684}00684\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(i\ *\ seq,\ int(i)\ *\ seq)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00685}00685\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00686}00686\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ numpy\_type\ \textcolor{keywordflow}{in}\ deprecated\_types:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00687}00687\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ i\ =\ np.dtype(numpy\_type).type()}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00688}00688\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00689}00689\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_warns(DeprecationWarning,\ operator.mul,\ seq,\ i),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00690}00690\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ seq\ *\ int(i))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00691}00691\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00692}00692\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_warns(DeprecationWarning,\ operator.mul,\ i,\ seq),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00693}00693\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ int(i)\ *\ seq)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00694}00694\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00695}00695\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ numpy\_type\ \textcolor{keywordflow}{in}\ forbidden\_types:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00696}00696\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ i\ =\ np.dtype(numpy\_type).type()}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00697}00697\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ operator.mul,\ seq,\ i)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00698}00698\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ operator.mul,\ i,\ seq)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00699}00699\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00700}00700\ \ \ \ \ \textcolor{keyword}{def\ }test\_no\_seq\_repeat\_basic\_array\_like(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00701}00701\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ that\ an\ array-\/like\ which\ does\ not\ know\ how\ to\ be\ multiplied}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00702}00702\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ does\ not\ attempt\ sequence\ repeat\ (raise\ TypeError).}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00703}00703\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ See\ also\ gh-\/7428.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00704}00704\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }ArrayLike:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00705}00705\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self,\ arr):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00706}00706\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestMultiply_a2f5c6bb72dece13f45b51217f3bd471e}{arr}}\ =\ arr}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00707}00707\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_array\_\_(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00708}00708\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestMultiply_a2f5c6bb72dece13f45b51217f3bd471e}{arr}}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00709}00709\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00710}00710\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ for\ simple\ ArrayLike\ above\ and\ memoryviews\ (original\ report)}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00711}00711\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ arr\_like\ \textcolor{keywordflow}{in}\ (ArrayLike(np.ones(3)),\ memoryview(np.ones(3))):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00712}00712\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(arr\_like\ *\ np.float32(3.),\ np.full(3,\ 3.))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00713}00713\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(np.float32(3.)\ *\ arr\_like,\ np.full(3,\ 3.))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00714}00714\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(arr\_like\ *\ np.int\_(3),\ np.full(3,\ 3))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00715}00715\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(np.int\_(3)\ *\ arr\_like,\ np.full(3,\ 3))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00716}00716\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00717}00717\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00718}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestNegative}{00718}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestNegative}{TestNegative}}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00719}00719\ \ \ \ \ \textcolor{keyword}{def\ }test\_exceptions(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00720}00720\ \ \ \ \ \ \ \ \ a\ =\ np.ones((),\ dtype=np.bool\_)[()]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00721}00721\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ operator.neg,\ a)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00722}00722\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00723}00723\ \ \ \ \ \textcolor{keyword}{def\ }test\_result(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00724}00724\ \ \ \ \ \ \ \ \ types\ =\ np.typecodes[\textcolor{stringliteral}{'AllInteger'}]\ +\ np.typecodes[\textcolor{stringliteral}{'AllFloat'}]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00725}00725\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ \mbox{\hyperlink{classnumpy_1_1testing_1_1__private_1_1utils_1_1suppress__warnings}{suppress\_warnings}}()\ \textcolor{keyword}{as}\ sup:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00726}00726\ \ \ \ \ \ \ \ \ \ \ \ \ sup.filter(RuntimeWarning)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00727}00727\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ types:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00728}00728\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.ones((),\ dtype=dt)[()]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00729}00729\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ dt\ \textcolor{keywordflow}{in}\ np.typecodes[\textcolor{stringliteral}{'UnsignedInteger'}]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00730}00730\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ st\ =\ np.dtype(dt).type}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00731}00731\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ max\ =\ st(np.iinfo(dt).max)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00732}00732\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(operator.neg(a),\ max)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00733}00733\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00734}00734\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(operator.neg(a)\ +\ a,\ 0)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00735}00735\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00736}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestSubtract}{00736}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestSubtract}{TestSubtract}}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00737}00737\ \ \ \ \ \textcolor{keyword}{def\ }test\_exceptions(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00738}00738\ \ \ \ \ \ \ \ \ a\ =\ np.ones((),\ dtype=np.bool\_)[()]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00739}00739\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ operator.sub,\ a,\ a)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00740}00740\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00741}00741\ \ \ \ \ \textcolor{keyword}{def\ }test\_result(self):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00742}00742\ \ \ \ \ \ \ \ \ types\ =\ np.typecodes[\textcolor{stringliteral}{'AllInteger'}]\ +\ np.typecodes[\textcolor{stringliteral}{'AllFloat'}]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00743}00743\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ \mbox{\hyperlink{classnumpy_1_1testing_1_1__private_1_1utils_1_1suppress__warnings}{suppress\_warnings}}()\ \textcolor{keyword}{as}\ sup:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00744}00744\ \ \ \ \ \ \ \ \ \ \ \ \ sup.filter(RuntimeWarning)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00745}00745\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ types:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00746}00746\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.ones((),\ dtype=dt)[()]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00747}00747\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(operator.sub(a,\ a),\ 0)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00748}00748\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00749}00749\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00750}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestAbs}{00750}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestAbs}{TestAbs}}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00751}00751\ \ \ \ \ \textcolor{keyword}{def\ }\_test\_abs\_func(self,\ absfunc,\ test\_dtype):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00752}00752\ \ \ \ \ \ \ \ \ x\ =\ test\_dtype(-\/1.5)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00753}00753\ \ \ \ \ \ \ \ \ assert\_equal(absfunc(x),\ 1.5)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00754}00754\ \ \ \ \ \ \ \ \ x\ =\ test\_dtype(0.0)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00755}00755\ \ \ \ \ \ \ \ \ res\ =\ absfunc(x)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00756}00756\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ assert\_equal()\ checks\ zero\ signedness}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00757}00757\ \ \ \ \ \ \ \ \ assert\_equal(res,\ 0.0)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00758}00758\ \ \ \ \ \ \ \ \ x\ =\ test\_dtype(-\/0.0)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00759}00759\ \ \ \ \ \ \ \ \ res\ =\ absfunc(x)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00760}00760\ \ \ \ \ \ \ \ \ assert\_equal(res,\ 0.0)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00761}00761\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00762}00762\ \ \ \ \ \ \ \ \ x\ =\ test\_dtype(np.finfo(test\_dtype).max)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00763}00763\ \ \ \ \ \ \ \ \ assert\_equal(absfunc(x),\ x.real)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00764}00764\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00765}00765\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ \mbox{\hyperlink{classnumpy_1_1testing_1_1__private_1_1utils_1_1suppress__warnings}{suppress\_warnings}}()\ \textcolor{keyword}{as}\ sup:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00766}00766\ \ \ \ \ \ \ \ \ \ \ \ \ sup.filter(UserWarning)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00767}00767\ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ test\_dtype(np.finfo(test\_dtype).tiny)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00768}00768\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(absfunc(x),\ x.real)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00769}00769\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00770}00770\ \ \ \ \ \ \ \ \ x\ =\ test\_dtype(np.finfo(test\_dtype).min)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00771}00771\ \ \ \ \ \ \ \ \ assert\_equal(absfunc(x),\ -\/x.real)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00772}00772\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00773}00773\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}dtype"{},\ floating\_types\ +\ complex\_floating\_types)}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00774}00774\ \ \ \ \ \textcolor{keyword}{def\ }test\_builtin\_abs(self,\ dtype):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00775}00775\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00776}00776\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sys.platform\ ==\ \textcolor{stringliteral}{"{}cygwin"{}}\ \textcolor{keywordflow}{and}\ dtype\ ==\ np.clongdouble\ \textcolor{keywordflow}{and}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00777}00777\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00778}00778\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_pep440.parse(platform.release().\mbox{\hyperlink{namespacenumpy_1_1lib_1_1shape__base_ad006c162baf5c4ae852b8b7a912732c0}{split}}(\textcolor{stringliteral}{"{}-\/"{}})[0])}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00779}00779\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <\ \mbox{\hyperlink{classnumpy_1_1__utils_1_1__pep440_1_1Version}{\_pep440.Version}}(\textcolor{stringliteral}{"{}3.3.0"{}})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00780}00780\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00781}00781\ \ \ \ \ \ \ \ \ ):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00782}00782\ \ \ \ \ \ \ \ \ \ \ \ \ pytest.xfail(}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00783}00783\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ reason=\textcolor{stringliteral}{"{}absl\ is\ computed\ in\ double\ precision\ on\ cygwin\ <\ 3.3"{}}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00784}00784\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00785}00785\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestAbs_af1e14ee14c5dfa4d26a3e01355721719}{\_test\_abs\_func}}(abs,\ dtype)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00786}00786\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00787}00787\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}dtype"{},\ floating\_types\ +\ complex\_floating\_types)}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00788}00788\ \ \ \ \ \textcolor{keyword}{def\ }test\_numpy\_abs(self,\ dtype):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00789}00789\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00790}00790\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sys.platform\ ==\ \textcolor{stringliteral}{"{}cygwin"{}}\ \textcolor{keywordflow}{and}\ dtype\ ==\ np.clongdouble\ \textcolor{keywordflow}{and}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00791}00791\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00792}00792\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_pep440.parse(platform.release().\mbox{\hyperlink{namespacenumpy_1_1lib_1_1shape__base_ad006c162baf5c4ae852b8b7a912732c0}{split}}(\textcolor{stringliteral}{"{}-\/"{}})[0])}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00793}00793\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <\ \mbox{\hyperlink{classnumpy_1_1__utils_1_1__pep440_1_1Version}{\_pep440.Version}}(\textcolor{stringliteral}{"{}3.3.0"{}})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00794}00794\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00795}00795\ \ \ \ \ \ \ \ \ ):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00796}00796\ \ \ \ \ \ \ \ \ \ \ \ \ pytest.xfail(}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00797}00797\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ reason=\textcolor{stringliteral}{"{}absl\ is\ computed\ in\ double\ precision\ on\ cygwin\ <\ 3.3"{}}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00798}00798\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00799}00799\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestAbs_af1e14ee14c5dfa4d26a3e01355721719}{\_test\_abs\_func}}(np.abs,\ dtype)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00800}00800\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00801}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestBitShifts}{00801}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestBitShifts}{TestBitShifts}}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00802}00802\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00803}00803\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize('type\_code',\ np.typecodes['AllInteger'])}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00804}00804\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{'op'},}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00805}00805\ \ \ \ \ \ \ \ \ [operator.rshift,\ operator.lshift],\ ids=[\textcolor{stringliteral}{'>>'},\ \textcolor{stringliteral}{'<<'}])}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00806}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestBitShifts_adff06c44f9f49a53575d2112f72d27ba}{00806}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestBitShifts_adff06c44f9f49a53575d2112f72d27ba}{test\_shift\_all\_bits}}(self,\ type\_code,\ op):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00807}00807\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Shifts\ where\ the\ shift\ amount\ is\ the\ width\ of\ the\ type\ or\ wider\ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00808}00808\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00809}00809\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ USING\_CLANG\_CL\ \textcolor{keywordflow}{and}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00810}00810\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ type\_code\ \textcolor{keywordflow}{in}\ (\textcolor{stringliteral}{"{}l"{}},\ \textcolor{stringliteral}{"{}L"{}})\ \textcolor{keywordflow}{and}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00811}00811\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ op\ \textcolor{keywordflow}{is}\ operator.lshift}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00812}00812\ \ \ \ \ \ \ \ \ ):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00813}00813\ \ \ \ \ \ \ \ \ \ \ \ \ pytest.xfail(\textcolor{stringliteral}{"{}Failing\ on\ clang-\/cl\ builds"{}})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00814}00814\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/2449}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00815}00815\ \ \ \ \ \ \ \ \ dt\ =\ np.dtype(type\_code)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00816}00816\ \ \ \ \ \ \ \ \ nbits\ =\ dt.itemsize\ *\ 8}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00817}00817\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ val\ \textcolor{keywordflow}{in}\ [5,\ -\/5]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00818}00818\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ shift\ \textcolor{keywordflow}{in}\ [nbits,\ nbits\ +\ 4]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00819}00819\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ val\_scl\ =\ np.array(val).astype(dt)[()]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00820}00820\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shift\_scl\ =\ dt.type(shift)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00821}00821\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\_scl\ =\ op(val\_scl,\ shift\_scl)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00822}00822\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ val\_scl\ <\ 0\ \textcolor{keywordflow}{and}\ op\ \textcolor{keywordflow}{is}\ operator.rshift:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00823}00823\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ sign\ bit\ is\ preserved}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00824}00824\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(res\_scl,\ -\/1)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00825}00825\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00826}00826\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(res\_scl,\ 0)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00827}00827\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00828}00828\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Result\ on\ scalars\ should\ be\ the\ same\ as\ on\ arrays}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00829}00829\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ val\_arr\ =\ np.array([val\_scl]*32,\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00830}00830\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shift\_arr\ =\ np.array([shift]*32,\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00831}00831\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\_arr\ =\ op(val\_arr,\ shift\_arr)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00832}00832\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(res\_arr,\ res\_scl)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00833}00833\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00834}00834\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00835}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestHash}{00835}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__scalarmath_1_1TestHash}{TestHash}}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00836}00836\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}type\_code"{},\ np.typecodes['AllInteger'])}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00837}00837\ \ \ \ \ \textcolor{keyword}{def\ }test\_integer\_hashes(self,\ type\_code):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00838}00838\ \ \ \ \ \ \ \ \ scalar\ =\ np.dtype(type\_code).type}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00839}00839\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(128):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00840}00840\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ hash(i)\ ==\ hash(scalar(i))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00841}00841\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00842}00842\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}type\_code"{},\ np.typecodes['AllFloat'])}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00843}00843\ \ \ \ \ \textcolor{keyword}{def\ }test\_float\_and\_complex\_hashes(self,\ type\_code):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00844}00844\ \ \ \ \ \ \ \ \ scalar\ =\ np.dtype(type\_code).type}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00845}00845\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ val\ \textcolor{keywordflow}{in}\ [np.pi,\ np.inf,\ 3,\ 6.]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00846}00846\ \ \ \ \ \ \ \ \ \ \ \ \ numpy\_val\ =\ scalar(val)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00847}00847\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Cast\ back\ to\ Python,\ in\ case\ the\ NumPy\ scalar\ has\ less\ precision}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00848}00848\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ numpy\_val.dtype.kind\ ==\ \textcolor{stringliteral}{'c'}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00849}00849\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ val\ =\ complex(numpy\_val)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00850}00850\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00851}00851\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ val\ =\ float(numpy\_val)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00852}00852\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ val\ ==\ numpy\_val}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00853}00853\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ hash(val)\ ==\ hash(numpy\_val)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00854}00854\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00855}00855\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ hash(float(np.nan))\ !=\ hash(float(np.nan)):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00856}00856\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ If\ Python\ distinguishes\ different\ NaNs\ we\ do\ so\ too\ (gh-\/18833)}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00857}00857\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ hash(scalar(np.nan))\ !=\ hash(scalar(np.nan))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00858}00858\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00859}00859\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}type\_code"{},\ np.typecodes['Complex'])}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00860}00860\ \ \ \ \ \textcolor{keyword}{def\ }test\_complex\_hashes(self,\ type\_code):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00861}00861\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ some\ complex\ valued\ hashes\ specifically:}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00862}00862\ \ \ \ \ \ \ \ \ scalar\ =\ np.dtype(type\_code).type}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00863}00863\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ val\ \textcolor{keywordflow}{in}\ [np.pi+1j,\ np.inf-\/3j,\ 3j,\ 6.+1j]:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00864}00864\ \ \ \ \ \ \ \ \ \ \ \ \ numpy\_val\ =\ scalar(val)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00865}00865\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ hash(complex(numpy\_val))\ ==\ hash(numpy\_val)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00866}00866\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00867}00867\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00868}00868\ \textcolor{preprocessor}{@contextlib.contextmanager}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00869}00869\ \textcolor{keyword}{def\ }recursionlimit(n):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00870}00870\ \ \ \ \ o\ =\ sys.getrecursionlimit()}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00871}00871\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00872}00872\ \ \ \ \ \ \ \ \ sys.setrecursionlimit(n)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00873}00873\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{yield}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00874}00874\ \ \ \ \ \textcolor{keywordflow}{finally}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00875}00875\ \ \ \ \ \ \ \ \ sys.setrecursionlimit(o)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00876}00876\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00877}00877\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00878}00878\ \textcolor{preprocessor}{@given(sampled\_from(objecty\_things)},}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00879}00879\ \ \ \ \ \ \ \ sampled\_from(reasonable\_operators\_for\_scalars),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00880}00880\ \ \ \ \ \ \ \ sampled\_from(types))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00881}00881\ \textcolor{keyword}{def\ }test\_operator\_object\_left(o,\ op,\ type\_):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00882}00882\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00883}00883\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ recursionlimit(200):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00884}00884\ \ \ \ \ \ \ \ \ \ \ \ \ op(o,\ type\_(1))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00885}00885\ \ \ \ \ \textcolor{keywordflow}{except}\ TypeError:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00886}00886\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00887}00887\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00888}00888\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00889}00889\ \textcolor{preprocessor}{@given(sampled\_from(objecty\_things)},}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00890}00890\ \ \ \ \ \ \ \ sampled\_from(reasonable\_operators\_for\_scalars),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00891}00891\ \ \ \ \ \ \ \ sampled\_from(types))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00892}00892\ \textcolor{keyword}{def\ }test\_operator\_object\_right(o,\ op,\ type\_):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00893}00893\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00894}00894\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ recursionlimit(200):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00895}00895\ \ \ \ \ \ \ \ \ \ \ \ \ op(type\_(1),\ o)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00896}00896\ \ \ \ \ \textcolor{keywordflow}{except}\ TypeError:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00897}00897\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00898}00898\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00899}00899\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00900}00900\ \textcolor{preprocessor}{@given(sampled\_from(reasonable\_operators\_for\_scalars)},}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00901}00901\ \ \ \ \ \ \ \ sampled\_from(types),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00902}00902\ \ \ \ \ \ \ \ sampled\_from(types))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00903}00903\ \textcolor{keyword}{def\ }test\_operator\_scalars(op,\ type1,\ type2):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00904}00904\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00905}00905\ \ \ \ \ \ \ \ \ op(type1(1),\ type2(1))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00906}00906\ \ \ \ \ \textcolor{keywordflow}{except}\ TypeError:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00907}00907\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00908}00908\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00909}00909\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00910}00910\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}op"{},\ reasonable\_operators\_for\_scalars)}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00911}00911\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}val"{},\ [None,\ 2**64])}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00912}00912\ \textcolor{keyword}{def\ }test\_longdouble\_inf\_loop(op,\ val):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00913}00913\ \ \ \ \ \textcolor{comment}{\#\ Note:\ The\ 2**64\ value\ will\ pass\ once\ NEP\ 50\ is\ adopted.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00914}00914\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00915}00915\ \ \ \ \ \ \ \ \ op(np.longdouble(3),\ val)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00916}00916\ \ \ \ \ \textcolor{keywordflow}{except}\ TypeError:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00917}00917\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00918}00918\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00919}00919\ \ \ \ \ \ \ \ \ op(val,\ np.longdouble(3))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00920}00920\ \ \ \ \ \textcolor{keywordflow}{except}\ TypeError:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00921}00921\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00922}00922\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00923}00923\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00924}00924\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}op"{},\ reasonable\_operators\_for\_scalars)}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00925}00925\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}val"{},\ [None,\ 2**64])}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00926}00926\ \textcolor{keyword}{def\ }test\_clongdouble\_inf\_loop(op,\ val):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00927}00927\ \ \ \ \ \textcolor{comment}{\#\ Note:\ The\ 2**64\ value\ will\ pass\ once\ NEP\ 50\ is\ adopted.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00928}00928\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00929}00929\ \ \ \ \ \ \ \ \ op(np.clongdouble(3),\ val)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00930}00930\ \ \ \ \ \textcolor{keywordflow}{except}\ TypeError:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00931}00931\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00932}00932\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00933}00933\ \ \ \ \ \ \ \ \ op(val,\ np.longdouble(3))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00934}00934\ \ \ \ \ \textcolor{keywordflow}{except}\ TypeError:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00935}00935\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00936}00936\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00937}00937\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00938}00938\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}dtype"{},\ np.typecodes["{}AllInteger"{}])}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00939}00939\ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{"{}operation"{}},\ [}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00940}00940\ \ \ \ \ \ \ \ \ \textcolor{keyword}{lambda}\ min,\ max:\ max\ +\ max,}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00941}00941\ \ \ \ \ \ \ \ \ \textcolor{keyword}{lambda}\ min,\ max:\ min\ -\/\ max,}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00942}00942\ \ \ \ \ \ \ \ \ \textcolor{keyword}{lambda}\ min,\ max:\ max\ *\ max],\ ids=[\textcolor{stringliteral}{"{}+"{}},\ \textcolor{stringliteral}{"{}-\/"{}},\ \textcolor{stringliteral}{"{}*"{}}])}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00943}00943\ \textcolor{keyword}{def\ }test\_scalar\_integer\_operation\_overflow(dtype,\ operation):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00944}00944\ \ \ \ \ st\ =\ np.dtype(dtype).type}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00945}00945\ \ \ \ \ min\ =\ st(np.iinfo(dtype).min)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00946}00946\ \ \ \ \ max\ =\ st(np.iinfo(dtype).max)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00947}00947\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00948}00948\ \ \ \ \ \textcolor{keyword}{with}\ pytest.warns(RuntimeWarning,\ match=\textcolor{stringliteral}{"{}overflow\ encountered"{}}):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00949}00949\ \ \ \ \ \ \ \ \ operation(min,\ max)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00950}00950\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00951}00951\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00952}00952\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}dtype"{},\ np.typecodes["{}Integer"{}])}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00953}00953\ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{"{}operation"{}},\ [}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00954}00954\ \ \ \ \ \ \ \ \ \textcolor{keyword}{lambda}\ min,\ neg\_1:\ -\/min,}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00955}00955\ \ \ \ \ \ \ \ \ \textcolor{keyword}{lambda}\ min,\ neg\_1:\ abs(min),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00956}00956\ \ \ \ \ \ \ \ \ \textcolor{keyword}{lambda}\ min,\ neg\_1:\ min\ *\ neg\_1,}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00957}00957\ \ \ \ \ \ \ \ \ pytest.param(\textcolor{keyword}{lambda}\ min,\ neg\_1:\ min\ //\ neg\_1,}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00958}00958\ \ \ \ \ \ \ \ \ \ \ \ \ marks=pytest.mark.skip(reason=\textcolor{stringliteral}{"{}broken\ on\ some\ platforms"{}}))],}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00959}00959\ \ \ \ \ \ \ \ \ ids=[\textcolor{stringliteral}{"{}neg"{}},\ \textcolor{stringliteral}{"{}abs"{}},\ \textcolor{stringliteral}{"{}*"{}},\ \textcolor{stringliteral}{"{}//"{}}])}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00960}00960\ \textcolor{keyword}{def\ }test\_scalar\_signed\_integer\_overflow(dtype,\ operation):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00961}00961\ \ \ \ \ \textcolor{comment}{\#\ The\ minimum\ signed\ integer\ can\ "{}overflow"{}\ for\ some\ additional\ operations}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00962}00962\ \ \ \ \ st\ =\ np.dtype(dtype).type}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00963}00963\ \ \ \ \ min\ =\ st(np.iinfo(dtype).min)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00964}00964\ \ \ \ \ neg\_1\ =\ st(-\/1)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00965}00965\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00966}00966\ \ \ \ \ \textcolor{keyword}{with}\ pytest.warns(RuntimeWarning,\ match=\textcolor{stringliteral}{"{}overflow\ encountered"{}}):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00967}00967\ \ \ \ \ \ \ \ \ operation(min,\ neg\_1)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00968}00968\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00969}00969\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00970}00970\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}dtype"{},\ np.typecodes["{}UnsignedInteger"{}])}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00971}00971\ \textcolor{keyword}{def\ }test\_scalar\_unsigned\_integer\_overflow(dtype):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00972}00972\ \ \ \ \ val\ =\ np.dtype(dtype).type(8)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00973}00973\ \ \ \ \ \textcolor{keyword}{with}\ pytest.warns(RuntimeWarning,\ match=\textcolor{stringliteral}{"{}overflow\ encountered"{}}):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00974}00974\ \ \ \ \ \ \ \ \ -\/val}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00975}00975\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00976}00976\ \ \ \ \ zero\ =\ np.dtype(dtype).type(0)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00977}00977\ \ \ \ \ -\/zero\ \ \textcolor{comment}{\#\ does\ not\ warn}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00978}00978\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00979}00979\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}dtype"{},\ np.typecodes["{}AllInteger"{}])}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00980}00980\ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{"{}operation"{}},\ [}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00981}00981\ \ \ \ \ \ \ \ \ \textcolor{keyword}{lambda}\ val,\ zero:\ val\ //\ zero,}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00982}00982\ \ \ \ \ \ \ \ \ \textcolor{keyword}{lambda}\ val,\ zero:\ val\ \%\ zero,\ ],\ ids=[\textcolor{stringliteral}{"{}//"{}},\ \textcolor{stringliteral}{"{}\%"{}}])}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00983}00983\ \textcolor{keyword}{def\ }test\_scalar\_integer\_operation\_divbyzero(dtype,\ operation):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00984}00984\ \ \ \ \ st\ =\ np.dtype(dtype).type}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00985}00985\ \ \ \ \ val\ =\ st(100)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00986}00986\ \ \ \ \ zero\ =\ st(0)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00987}00987\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00988}00988\ \ \ \ \ \textcolor{keyword}{with}\ pytest.warns(RuntimeWarning,\ match=\textcolor{stringliteral}{"{}divide\ by\ zero"{}}):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00989}00989\ \ \ \ \ \ \ \ \ operation(val,\ zero)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00990}00990\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00991}00991\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00992}00992\ ops\_with\_names\ =\ [}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00993}00993\ \ \ \ \ (\textcolor{stringliteral}{"{}\_\_lt\_\_"{}},\ \textcolor{stringliteral}{"{}\_\_gt\_\_"{}},\ operator.lt,\ \textcolor{keyword}{True}),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00994}00994\ \ \ \ \ (\textcolor{stringliteral}{"{}\_\_le\_\_"{}},\ \textcolor{stringliteral}{"{}\_\_ge\_\_"{}},\ operator.le,\ \textcolor{keyword}{True}),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00995}00995\ \ \ \ \ (\textcolor{stringliteral}{"{}\_\_eq\_\_"{}},\ \textcolor{stringliteral}{"{}\_\_eq\_\_"{}},\ operator.eq,\ \textcolor{keyword}{True}),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00996}00996\ \ \ \ \ \textcolor{comment}{\#\ Note\ \_\_op\_\_\ and\ \_\_rop\_\_\ may\ be\ identical\ here:}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00997}00997\ \ \ \ \ (\textcolor{stringliteral}{"{}\_\_ne\_\_"{}},\ \textcolor{stringliteral}{"{}\_\_ne\_\_"{}},\ operator.ne,\ \textcolor{keyword}{True}),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00998}00998\ \ \ \ \ (\textcolor{stringliteral}{"{}\_\_gt\_\_"{}},\ \textcolor{stringliteral}{"{}\_\_lt\_\_"{}},\ operator.gt,\ \textcolor{keyword}{True}),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l00999}00999\ \ \ \ \ (\textcolor{stringliteral}{"{}\_\_ge\_\_"{}},\ \textcolor{stringliteral}{"{}\_\_le\_\_"{}},\ operator.ge,\ \textcolor{keyword}{True}),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01000}01000\ \ \ \ \ (\textcolor{stringliteral}{"{}\_\_floordiv\_\_"{}},\ \textcolor{stringliteral}{"{}\_\_rfloordiv\_\_"{}},\ operator.floordiv,\ \textcolor{keyword}{False}),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01001}01001\ \ \ \ \ (\textcolor{stringliteral}{"{}\_\_truediv\_\_"{}},\ \textcolor{stringliteral}{"{}\_\_rtruediv\_\_"{}},\ operator.truediv,\ \textcolor{keyword}{False}),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01002}01002\ \ \ \ \ (\textcolor{stringliteral}{"{}\_\_add\_\_"{}},\ \textcolor{stringliteral}{"{}\_\_radd\_\_"{}},\ operator.add,\ \textcolor{keyword}{False}),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01003}01003\ \ \ \ \ (\textcolor{stringliteral}{"{}\_\_mod\_\_"{}},\ \textcolor{stringliteral}{"{}\_\_rmod\_\_"{}},\ operator.mod,\ \textcolor{keyword}{False}),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01004}01004\ \ \ \ \ (\textcolor{stringliteral}{"{}\_\_mul\_\_"{}},\ \textcolor{stringliteral}{"{}\_\_rmul\_\_"{}},\ operator.mul,\ \textcolor{keyword}{False}),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01005}01005\ \ \ \ \ (\textcolor{stringliteral}{"{}\_\_pow\_\_"{}},\ \textcolor{stringliteral}{"{}\_\_rpow\_\_"{}},\ operator.pow,\ \textcolor{keyword}{False}),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01006}01006\ \ \ \ \ (\textcolor{stringliteral}{"{}\_\_sub\_\_"{}},\ \textcolor{stringliteral}{"{}\_\_rsub\_\_"{}},\ operator.sub,\ \textcolor{keyword}{False}),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01007}01007\ ]}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01008}01008\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01009}01009\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01010}01010\ \textcolor{preprocessor}{@pytest.mark.parametrize(["{}\_\_op\_\_"{},\ "{}\_\_rop\_\_"{},\ "{}op"{},\ "{}cmp"{}],\ ops\_with\_names)}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01011}01011\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}sctype"{},\ [np.float32,\ np.float64,\ np.longdouble])}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01012}\mbox{\hyperlink{namespacenumpy_1_1core_1_1tests_1_1test__scalarmath_ad7456d0484c12be90800151597297bb5}{01012}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacenumpy_1_1core_1_1tests_1_1test__scalarmath_ad7456d0484c12be90800151597297bb5}{test\_subclass\_deferral}}(sctype,\ \_\_op\_\_,\ \_\_rop\_\_,\ op,\ cmp):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01013}01013\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01014}01014\ \textcolor{stringliteral}{\ \ \ \ This\ test\ covers\ scalar\ subclass\ deferral.\ \ Note\ that\ this\ is\ exceedingly}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01015}01015\ \textcolor{stringliteral}{\ \ \ \ complicated,\ especially\ since\ it\ tends\ to\ fall\ back\ to\ the\ array\ paths\ and}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01016}01016\ \textcolor{stringliteral}{\ \ \ \ these\ additionally\ add\ the\ "{}array\ priority"{}\ mechanism.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01017}01017\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01018}01018\ \textcolor{stringliteral}{\ \ \ \ The\ behaviour\ was\ modified\ subtly\ in\ 1.22\ (to\ make\ it\ closer\ to\ how\ Python}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01019}01019\ \textcolor{stringliteral}{\ \ \ \ scalars\ work).\ \ Due\ to\ its\ complexity\ and\ the\ fact\ that\ subclassing\ NumPy}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01020}01020\ \textcolor{stringliteral}{\ \ \ \ scalars\ is\ probably\ a\ bad\ idea\ to\ begin\ with.\ \ There\ is\ probably\ room}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01021}01021\ \textcolor{stringliteral}{\ \ \ \ for\ adjustments\ here.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01022}01022\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01023}01023\ \ \ \ \ \textcolor{keyword}{class\ }myf\_simple1(sctype):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01024}01024\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01025}01025\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01026}01026\ \ \ \ \ \textcolor{keyword}{class\ }myf\_simple2(sctype):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01027}01027\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01028}01028\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01029}01029\ \ \ \ \ \textcolor{keyword}{def\ }op\_func(self,\ other):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01030}01030\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_\_op\_\_}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01031}01031\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01032}01032\ \ \ \ \ \textcolor{keyword}{def\ }rop\_func(self,\ other):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01033}01033\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_\_rop\_\_}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01034}01034\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01035}01035\ \ \ \ \ myf\_op\ =\ type(\textcolor{stringliteral}{"{}myf\_op"{}},\ (sctype,),\ \{\_\_op\_\_:\ op\_func,\ \_\_rop\_\_:\ rop\_func\})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01036}01036\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01037}01037\ \ \ \ \ \textcolor{comment}{\#\ inheritance\ has\ to\ override,\ or\ this\ is\ correctly\ lost:}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01038}01038\ \ \ \ \ res\ =\ op(myf\_simple1(1),\ myf\_simple2(2))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01039}01039\ \ \ \ \ \textcolor{keyword}{assert}\ type(res)\ ==\ sctype\ \textcolor{keywordflow}{or}\ type(res)\ ==\ np.bool\_}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01040}01040\ \ \ \ \ \textcolor{keyword}{assert}\ op(myf\_simple1(1),\ myf\_simple2(2))\ ==\ op(1,\ 2)\ \ \textcolor{comment}{\#\ inherited}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01041}01041\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01042}01042\ \ \ \ \ \textcolor{comment}{\#\ Two\ independent\ subclasses\ do\ not\ really\ define\ an\ order.\ \ This\ could}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01043}01043\ \ \ \ \ \textcolor{comment}{\#\ be\ attempted,\ but\ we\ do\ not\ since\ Python's\ \`{}int`\ does\ neither:}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01044}01044\ \ \ \ \ \textcolor{keyword}{assert}\ op(myf\_op(1),\ myf\_simple1(2))\ ==\ \_\_op\_\_}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01045}01045\ \ \ \ \ \textcolor{keyword}{assert}\ op(myf\_simple1(1),\ myf\_op(2))\ ==\ op(1,\ 2)\ \ \textcolor{comment}{\#\ inherited}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01046}01046\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01047}01047\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01048}01048\ \textcolor{keyword}{def\ }test\_longdouble\_complex():}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01049}01049\ \ \ \ \ \textcolor{comment}{\#\ Simple\ test\ to\ check\ longdouble\ and\ complex\ combinations,\ since\ these}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01050}01050\ \ \ \ \ \textcolor{comment}{\#\ need\ to\ go\ through\ promotion,\ which\ longdouble\ needs\ to\ be\ careful\ about.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01051}01051\ \ \ \ \ x\ =\ np.longdouble(1)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01052}01052\ \ \ \ \ \textcolor{keyword}{assert}\ x\ +\ 1j\ ==\ 1+1j}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01053}01053\ \ \ \ \ \textcolor{keyword}{assert}\ 1j\ +\ x\ ==\ 1+1j}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01054}01054\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01055}01055\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01056}01056\ \textcolor{preprocessor}{@pytest.mark.parametrize(["{}\_\_op\_\_"{},\ "{}\_\_rop\_\_"{},\ "{}op"{},\ "{}cmp"{}],\ ops\_with\_names)}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01057}01057\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}subtype"{},\ [float,\ int,\ complex,\ np.float16])}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01058}01058\ \textcolor{preprocessor}{@np.\_no\_nep50\_warning()}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01059}01059\ \textcolor{keyword}{def\ }test\_pyscalar\_subclasses(subtype,\ \_\_op\_\_,\ \_\_rop\_\_,\ op,\ cmp):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01060}01060\ \ \ \ \ \textcolor{keyword}{def\ }op\_func(self,\ other):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01061}01061\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_\_op\_\_}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01062}01062\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01063}01063\ \ \ \ \ \textcolor{keyword}{def\ }rop\_func(self,\ other):}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01064}01064\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_\_rop\_\_}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01065}01065\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01066}01066\ \ \ \ \ \textcolor{comment}{\#\ Check\ that\ deferring\ is\ indicated\ using\ \`{}\_\_array\_ufunc\_\_`:}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01067}01067\ \ \ \ \ myt\ =\ type(\textcolor{stringliteral}{"{}myt"{}},\ (subtype,),}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01068}01068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\_\_op\_\_:\ op\_func,\ \_\_rop\_\_:\ rop\_func,\ \textcolor{stringliteral}{"{}\_\_array\_ufunc\_\_"{}}:\ \textcolor{keywordtype}{None}\})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01069}01069\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01070}01070\ \ \ \ \ \textcolor{comment}{\#\ Just\ like\ normally,\ we\ should\ never\ presume\ we\ can\ modify\ the\ float.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01071}01071\ \ \ \ \ \textcolor{keyword}{assert}\ op(myt(1),\ np.float64(2))\ ==\ \_\_op\_\_}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01072}01072\ \ \ \ \ \textcolor{keyword}{assert}\ op(np.float64(1),\ myt(2))\ ==\ \_\_rop\_\_}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01073}01073\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01074}01074\ \ \ \ \ \textcolor{keywordflow}{if}\ op\ \textcolor{keywordflow}{in}\ \{operator.mod,\ operator.floordiv\}\ \textcolor{keywordflow}{and}\ subtype\ ==\ complex:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01075}01075\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \ \textcolor{comment}{\#\ module\ is\ not\ support\ for\ complex.\ \ Do\ not\ test.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01076}01076\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01077}01077\ \ \ \ \ \textcolor{keywordflow}{if}\ \_\_rop\_\_\ ==\ \_\_op\_\_:}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01078}01078\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01079}01079\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01080}01080\ \ \ \ \ \textcolor{comment}{\#\ When\ no\ deferring\ is\ indicated,\ subclasses\ are\ handled\ normally.}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01081}01081\ \ \ \ \ myt\ =\ type(\textcolor{stringliteral}{"{}myt"{}},\ (subtype,),\ \{\_\_rop\_\_:\ rop\_func\})}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01082}01082\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01083}01083\ \ \ \ \ \textcolor{comment}{\#\ Check\ for\ float32,\ as\ a\ float\ subclass\ float64\ may\ behave\ differently}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01084}01084\ \ \ \ \ res\ =\ op(myt(1),\ np.float16(2))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01085}01085\ \ \ \ \ expected\ =\ op(subtype(1),\ np.float16(2))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01086}01086\ \ \ \ \ \textcolor{keyword}{assert}\ res\ ==\ expected}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01087}01087\ \ \ \ \ \textcolor{keyword}{assert}\ type(res)\ ==\ type(expected)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01088}01088\ \ \ \ \ res\ =\ op(np.float32(2),\ myt(1))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01089}01089\ \ \ \ \ expected\ =\ op(np.float32(2),\ subtype(1))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01090}01090\ \ \ \ \ \textcolor{keyword}{assert}\ res\ ==\ expected}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01091}01091\ \ \ \ \ \textcolor{keyword}{assert}\ type(res)\ ==\ type(expected)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01092}01092\ }
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01093}01093\ \ \ \ \ \textcolor{comment}{\#\ Same\ check\ for\ longdouble:}}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01094}01094\ \ \ \ \ res\ =\ op(myt(1),\ np.longdouble(2))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01095}01095\ \ \ \ \ expected\ =\ op(subtype(1),\ np.longdouble(2))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01096}01096\ \ \ \ \ \textcolor{keyword}{assert}\ res\ ==\ expected}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01097}01097\ \ \ \ \ \textcolor{keyword}{assert}\ type(res)\ ==\ type(expected)}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01098}01098\ \ \ \ \ res\ =\ op(np.float32(2),\ myt(1))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01099}01099\ \ \ \ \ expected\ =\ op(np.longdouble(2),\ subtype(1))}
\DoxyCodeLine{\Hypertarget{test__scalarmath_8py_source_l01100}01100\ \ \ \ \ \textcolor{keyword}{assert}\ res\ ==\ expected}

\end{DoxyCode}
