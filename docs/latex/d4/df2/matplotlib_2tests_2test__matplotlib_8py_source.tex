\doxysection{test\+\_\+matplotlib.\+py}
\hypertarget{matplotlib_2tests_2test__matplotlib_8py_source}{}\label{matplotlib_2tests_2test__matplotlib_8py_source}\index{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/matplotlib/tests/test\_matplotlib.py@{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/matplotlib/tests/test\_matplotlib.py}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00001}\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__matplotlib}{00001}}\ \textcolor{keyword}{import}\ os}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00002}00002\ \textcolor{keyword}{import}\ subprocess}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00003}00003\ \textcolor{keyword}{import}\ sys}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00004}00004\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00005}00005\ \textcolor{keyword}{import}\ pytest}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00006}00006\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00007}00007\ \textcolor{keyword}{import}\ matplotlib}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00008}00008\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacematplotlib_1_1testing}{matplotlib.testing}}\ \textcolor{keyword}{import}\ subprocess\_run\_for\_testing}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00009}00009\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00010}00010\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00011}00011\ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{'version\_str,\ version\_tuple'},\ [}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00012}00012\ \ \ \ \ (\textcolor{stringliteral}{'3.5.0'},\ (3,\ 5,\ 0,\ \textcolor{stringliteral}{'final'},\ 0)),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00013}00013\ \ \ \ \ (\textcolor{stringliteral}{'3.5.0rc2'},\ (3,\ 5,\ 0,\ \textcolor{stringliteral}{'candidate'},\ 2)),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00014}00014\ \ \ \ \ (\textcolor{stringliteral}{'3.5.0.dev820+g6768ef8c4c'},\ (3,\ 5,\ 0,\ \textcolor{stringliteral}{'alpha'},\ 820)),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00015}00015\ \ \ \ \ (\textcolor{stringliteral}{'3.5.0.post820+g6768ef8c4c'},\ (3,\ 5,\ 1,\ \textcolor{stringliteral}{'alpha'},\ 820)),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00016}00016\ ])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00017}00017\ \textcolor{keyword}{def\ }test\_parse\_to\_version\_info(version\_str,\ version\_tuple):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00018}00018\ \ \ \ \ \textcolor{keyword}{assert}\ \mbox{\hyperlink{namespacematplotlib_a041648622b0066311797f3ec18109cfd}{matplotlib.\_parse\_to\_version\_info}}(version\_str)\ ==\ version\_tuple}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00019}00019\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00020}00020\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00021}00021\ \textcolor{preprocessor}{@pytest.mark.skipif}(sys.platform\ ==\ \textcolor{stringliteral}{"{}win32"{}},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00022}00022\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ reason=\textcolor{stringliteral}{"{}chmod()\ doesn't\ work\ as\ is\ on\ Windows"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00023}00023\ \textcolor{preprocessor}{@pytest.mark.skipif(sys.platform\ !=\ "{}win32"{}\ and\ os.geteuid()}\ ==\ 0,}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00024}00024\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ reason=\textcolor{stringliteral}{"{}chmod()\ doesn't\ work\ as\ root"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00025}\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__matplotlib_afe3afd77c561e4a090d484576f3bb72b}{00025}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__matplotlib_afe3afd77c561e4a090d484576f3bb72b}{test\_tmpconfigdir\_warning}}(tmp\_path):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00026}00026\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Test\ that\ a\ warning\ is\ emitted\ if\ a\ temporary\ configdir\ must\ be\ used."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00027}00027\ \ \ \ \ mode\ =\ os.stat(tmp\_path).st\_mode}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00028}00028\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00029}00029\ \ \ \ \ \ \ \ \ os.chmod(tmp\_path,\ 0)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00030}00030\ \ \ \ \ \ \ \ \ proc\ =\ subprocess\_run\_for\_testing(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00031}00031\ \ \ \ \ \ \ \ \ \ \ \ \ [sys.executable,\ \textcolor{stringliteral}{"{}-\/c"{}},\ \textcolor{stringliteral}{"{}import\ matplotlib"{}}],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00032}00032\ \ \ \ \ \ \ \ \ \ \ \ \ env=\{**os.environ,\ \textcolor{stringliteral}{"{}MPLCONFIGDIR"{}}:\ str(tmp\_path)\},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00033}00033\ \ \ \ \ \ \ \ \ \ \ \ \ stderr=subprocess.PIPE,\ text=\textcolor{keyword}{True},\ check=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00034}00034\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ \textcolor{stringliteral}{"{}set\ the\ MPLCONFIGDIR"{}}\ \textcolor{keywordflow}{in}\ proc.stderr}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00035}00035\ \ \ \ \ \textcolor{keywordflow}{finally}:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00036}00036\ \ \ \ \ \ \ \ \ os.chmod(tmp\_path,\ mode)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00037}00037\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00038}00038\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00039}00039\ \textcolor{keyword}{def\ }test\_importable\_with\_no\_home(tmp\_path):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00040}00040\ \ \ \ \ subprocess\_run\_for\_testing(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00041}00041\ \ \ \ \ \ \ \ \ [sys.executable,\ \textcolor{stringliteral}{"{}-\/c"{}},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00042}00042\ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}import\ pathlib;\ pathlib.Path.home\ =\ lambda\ *args:\ 1/0;\ "{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00043}00043\ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}import\ matplotlib.pyplot"{}}],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00044}00044\ \ \ \ \ \ \ \ \ env=\{**os.environ,\ \textcolor{stringliteral}{"{}MPLCONFIGDIR"{}}:\ str(tmp\_path)\},\ check=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00045}00045\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00046}00046\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00047}\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__matplotlib_a14f3f5562d4494aaaddff665316a31dc}{00047}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__matplotlib_a14f3f5562d4494aaaddff665316a31dc}{test\_use\_doc\_standard\_backends}}():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00048}00048\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00049}00049\ \textcolor{stringliteral}{\ \ \ \ Test\ that\ the\ standard\ backends\ mentioned\ in\ the\ docstring\ of}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00050}00050\ \textcolor{stringliteral}{\ \ \ \ matplotlib.use()\ are\ the\ same\ as\ in\ matplotlib.rcsetup.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00051}00051\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00052}00052\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespaceparse}{parse}}(key):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00053}00053\ \ \ \ \ \ \ \ \ backends\ =\ []}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00054}00054\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ line\ \textcolor{keywordflow}{in}\ matplotlib.use.\_\_doc\_\_.split(key)[1].split(\textcolor{stringliteral}{'\(\backslash\)n'}):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00055}00055\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ line.strip():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00056}00056\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00057}00057\ \ \ \ \ \ \ \ \ \ \ \ \ backends\ +=\ [e.strip().lower()\ \textcolor{keywordflow}{for}\ e\ \textcolor{keywordflow}{in}\ line.split(\textcolor{stringliteral}{','})\ \textcolor{keywordflow}{if}\ e]}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00058}00058\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ backends}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00059}00059\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00060}00060\ \ \ \ \ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacematplotlib_1_1backends}{matplotlib.backends}}\ \textcolor{keyword}{import}\ BackendFilter,\ backend\_registry}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00061}00061\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00062}00062\ \ \ \ \ \textcolor{keyword}{assert}\ (set(\mbox{\hyperlink{namespaceparse}{parse}}(\textcolor{stringliteral}{'-\/\ interactive\ backends:\(\backslash\)n'}))\ ==}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00063}00063\ \ \ \ \ \ \ \ \ \ \ \ \ set(backend\_registry.list\_builtin(BackendFilter.INTERACTIVE)))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00064}00064\ \ \ \ \ \textcolor{keyword}{assert}\ (set(\mbox{\hyperlink{namespaceparse}{parse}}(\textcolor{stringliteral}{'-\/\ non-\/interactive\ backends:\(\backslash\)n'}))\ ==}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00065}00065\ \ \ \ \ \ \ \ \ \ \ \ \ set(backend\_registry.list\_builtin(BackendFilter.NON\_INTERACTIVE)))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00066}00066\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00067}00067\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00068}\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__matplotlib_ae3de0db6d7c0241f0a42407e52dcd076}{00068}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__matplotlib_ae3de0db6d7c0241f0a42407e52dcd076}{test\_importable\_with\_\_OO}}():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00069}00069\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00070}00070\ \textcolor{stringliteral}{\ \ \ \ When\ using\ -\/OO\ or\ export\ PYTHONOPTIMIZE=2,\ docstrings\ are\ discarded,}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00071}00071\ \textcolor{stringliteral}{\ \ \ \ this\ simple\ test\ may\ prevent\ something\ like\ issue\ \#17970.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00072}00072\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00073}00073\ \ \ \ \ program\ =\ (}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00074}00074\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}import\ matplotlib\ as\ mpl;\ "{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00075}00075\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}import\ matplotlib.pyplot\ as\ plt;\ "{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00076}00076\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}import\ matplotlib.cbook\ as\ cbook;\ "{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00077}00077\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}import\ matplotlib.patches\ as\ mpatches"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00078}00078\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00079}00079\ \ \ \ \ subprocess\_run\_for\_testing(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00080}00080\ \ \ \ \ \ \ \ \ [sys.executable,\ \textcolor{stringliteral}{"{}-\/OO"{}},\ \textcolor{stringliteral}{"{}-\/c"{}},\ program],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00081}00081\ \ \ \ \ \ \ \ \ env=\{**os.environ,\ \textcolor{stringliteral}{"{}MPLBACKEND"{}}:\ \textcolor{stringliteral}{"{}"{}}\},\ check=\textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__matplotlib_8py_source_l00082}00082\ \ \ \ \ \ \ \ \ )}

\end{DoxyCode}
