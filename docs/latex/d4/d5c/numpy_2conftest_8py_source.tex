\doxysection{conftest.\+py}
\hypertarget{numpy_2conftest_8py_source}{}\label{numpy_2conftest_8py_source}\index{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/numpy/conftest.py@{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/numpy/conftest.py}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00001}\mbox{\hyperlink{namespacenumpy_1_1conftest}{00001}}\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00002}00002\ \textcolor{stringliteral}{Pytest\ configuration\ and\ fixtures\ for\ the\ Numpy\ test\ suite.}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00003}00003\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00004}00004\ \textcolor{keyword}{import}\ os}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00005}00005\ \textcolor{keyword}{import}\ tempfile}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00006}00006\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00007}00007\ \textcolor{keyword}{import}\ hypothesis}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00008}00008\ \textcolor{keyword}{import}\ pytest}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00009}00009\ \textcolor{keyword}{import}\ numpy}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00010}00010\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00011}00011\ \textcolor{keyword}{from}\ numpy.core.\_multiarray\_tests\ \textcolor{keyword}{import}\ get\_fpu\_mode}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00012}00012\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00013}00013\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00014}00014\ \_old\_fpu\_mode\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00015}00015\ \_collect\_results\ =\ \{\}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00016}00016\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00017}00017\ \textcolor{comment}{\#\ Use\ a\ known\ and\ persistent\ tmpdir\ for\ hypothesis'\ caches,\ which}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00018}00018\ \textcolor{comment}{\#\ can\ be\ automatically\ cleared\ by\ the\ OS\ or\ user.}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00019}00019\ hypothesis.configuration.set\_hypothesis\_home\_dir(}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00020}00020\ \ \ \ \ os.path.join(tempfile.gettempdir(),\ \textcolor{stringliteral}{"{}.hypothesis"{}})}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00021}00021\ )}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00022}00022\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00023}00023\ \textcolor{comment}{\#\ We\ register\ two\ custom\ profiles\ for\ Numpy\ -\/\ for\ details\ see}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00024}00024\ \textcolor{comment}{\#\ https://hypothesis.readthedocs.io/en/latest/settings.html}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00025}00025\ \textcolor{comment}{\#\ The\ first\ is\ designed\ for\ our\ own\ CI\ runs;\ the\ latter\ also\ }}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00026}00026\ \textcolor{comment}{\#\ forces\ determinism\ and\ is\ designed\ for\ use\ via\ np.test()}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00027}00027\ hypothesis.settings.register\_profile(}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00028}00028\ \ \ \ \ name=\textcolor{stringliteral}{"{}numpy-\/profile"{}},\ deadline=\textcolor{keywordtype}{None},\ print\_blob=\textcolor{keyword}{True},}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00029}00029\ )}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00030}00030\ hypothesis.settings.register\_profile(}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00031}00031\ \ \ \ \ name=\textcolor{stringliteral}{"{}np.test()\ profile"{}},}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00032}00032\ \ \ \ \ deadline=\textcolor{keywordtype}{None},\ print\_blob=\textcolor{keyword}{True},\ database=\textcolor{keywordtype}{None},\ derandomize=\textcolor{keyword}{True},}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00033}00033\ \ \ \ \ suppress\_health\_check=list(hypothesis.HealthCheck),}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00034}00034\ )}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00035}00035\ \textcolor{comment}{\#\ Note\ that\ the\ default\ profile\ is\ chosen\ based\ on\ the\ presence\ }}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00036}00036\ \textcolor{comment}{\#\ of\ pytest.ini,\ but\ can\ be\ overridden\ by\ passing\ the\ }}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00037}00037\ \textcolor{comment}{\#\ -\/-\/hypothesis-\/profile=NAME\ argument\ to\ pytest.}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00038}00038\ \_pytest\_ini\ =\ os.path.join(os.path.dirname(\_\_file\_\_),\ \textcolor{stringliteral}{"{}.."{}},\ \textcolor{stringliteral}{"{}pytest.ini"{}})}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00039}00039\ hypothesis.settings.load\_profile(}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00040}00040\ \ \ \ \ \textcolor{stringliteral}{"{}numpy-\/profile"{}}\ \textcolor{keywordflow}{if}\ os.path.isfile(\_pytest\_ini)\ \textcolor{keywordflow}{else}\ \textcolor{stringliteral}{"{}np.test()\ profile"{}}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00041}00041\ )}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00043}00043\ \textcolor{comment}{\#\ The\ experimentalAPI\ is\ used\ in\ \_umath\_tests}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00044}00044\ os.environ[\textcolor{stringliteral}{"{}NUMPY\_EXPERIMENTAL\_DTYPE\_API"{}}]\ =\ \textcolor{stringliteral}{"{}1"{}}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00045}00045\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00046}00046\ \textcolor{keyword}{def\ }pytest\_configure(config):}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00047}00047\ \ \ \ \ config.addinivalue\_line(\textcolor{stringliteral}{"{}markers"{}},}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00048}00048\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}valgrind\_error:\ Tests\ that\ are\ known\ to\ error\ under\ valgrind."{}})}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00049}00049\ \ \ \ \ config.addinivalue\_line(\textcolor{stringliteral}{"{}markers"{}},}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00050}00050\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}leaks\_references:\ Tests\ that\ are\ known\ to\ leak\ references."{}})}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00051}00051\ \ \ \ \ config.addinivalue\_line(\textcolor{stringliteral}{"{}markers"{}},}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00052}00052\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}slow:\ Tests\ that\ are\ very\ slow."{}})}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00053}00053\ \ \ \ \ config.addinivalue\_line(\textcolor{stringliteral}{"{}markers"{}},}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00054}00054\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}slow\_pypy:\ Tests\ that\ are\ very\ slow\ on\ pypy."{}})}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00055}00055\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00056}00056\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00057}00057\ \textcolor{keyword}{def\ }pytest\_addoption(parser):}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00058}00058\ \ \ \ \ parser.addoption(\textcolor{stringliteral}{"{}-\/-\/available-\/memory"{}},\ action=\textcolor{stringliteral}{"{}store"{}},\ default=\textcolor{keywordtype}{None},}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00059}00059\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ help=(\textcolor{stringliteral}{"{}Set\ amount\ of\ memory\ available\ for\ running\ the\ "{}}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00060}00060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}test\ suite.\ This\ can\ result\ to\ tests\ requiring\ "{}}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00061}00061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}especially\ large\ amounts\ of\ memory\ to\ be\ skipped.\ "{}}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00062}00062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Equivalent\ to\ setting\ environment\ variable\ "{}}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00063}00063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}NPY\_AVAILABLE\_MEM.\ Default:\ determined"{}}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00064}00064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}automatically."{}}))}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00065}00065\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00066}00066\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00067}00067\ \textcolor{keyword}{def\ }pytest\_sessionstart(session):}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00068}00068\ \ \ \ \ available\_mem\ =\ session.config.getoption(\textcolor{stringliteral}{'available\_memory'})}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00069}00069\ \ \ \ \ \textcolor{keywordflow}{if}\ available\_mem\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00070}00070\ \ \ \ \ \ \ \ \ os.environ[\textcolor{stringliteral}{'NPY\_AVAILABLE\_MEM'}]\ =\ available\_mem}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00071}00071\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00072}00072\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00073}00073\ \textcolor{comment}{\#FIXME\ when\ yield\ tests\ are\ gone.}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00074}00074\ \textcolor{preprocessor}{@pytest.hookimpl()}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00075}\mbox{\hyperlink{namespacenumpy_1_1conftest_a343b1fe2522014f45ec65b5a2f59e3f1}{00075}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacenumpy_1_1conftest_a343b1fe2522014f45ec65b5a2f59e3f1}{pytest\_itemcollected}}(item):}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00076}00076\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00077}00077\ \textcolor{stringliteral}{\ \ \ \ Check\ FPU\ precision\ mode\ was\ not\ changed\ during\ test\ collection.}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00078}00078\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00079}00079\ \textcolor{stringliteral}{\ \ \ \ The\ clumsy\ way\ we\ do\ it\ here\ is\ mainly\ necessary\ because\ numpy}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00080}00080\ \textcolor{stringliteral}{\ \ \ \ still\ uses\ yield\ tests,\ which\ can\ execute\ code\ at\ test\ collection}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00081}00081\ \textcolor{stringliteral}{\ \ \ \ time.}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00082}00082\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00083}00083\ \ \ \ \ \textcolor{keyword}{global}\ \_old\_fpu\_mode}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00084}00084\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00085}00085\ \ \ \ \ mode\ =\ get\_fpu\_mode()}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00086}00086\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00087}00087\ \ \ \ \ \textcolor{keywordflow}{if}\ \_old\_fpu\_mode\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00088}00088\ \ \ \ \ \ \ \ \ \_old\_fpu\_mode\ =\ mode}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00089}00089\ \ \ \ \ \textcolor{keywordflow}{elif}\ mode\ !=\ \_old\_fpu\_mode:}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00090}00090\ \ \ \ \ \ \ \ \ \_collect\_results[item]\ =\ (\_old\_fpu\_mode,\ mode)}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00091}00091\ \ \ \ \ \ \ \ \ \_old\_fpu\_mode\ =\ mode}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00092}00092\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00093}00093\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00094}00094\ \textcolor{preprocessor}{@pytest.fixture(scope="{}function"{},\ autouse=True)}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00095}\mbox{\hyperlink{namespacenumpy_1_1conftest_a85b7ba37b2b520f0ce4f654816c2b96b}{00095}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacenumpy_1_1conftest_a85b7ba37b2b520f0ce4f654816c2b96b}{check\_fpu\_mode}}(request):}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00096}00096\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00097}00097\ \textcolor{stringliteral}{\ \ \ \ Check\ FPU\ precision\ mode\ was\ not\ changed\ during\ the\ test.}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00098}00098\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00099}00099\ \ \ \ \ old\_mode\ =\ get\_fpu\_mode()}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00100}00100\ \ \ \ \ \textcolor{keywordflow}{yield}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00101}00101\ \ \ \ \ new\_mode\ =\ get\_fpu\_mode()}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00102}00102\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00103}00103\ \ \ \ \ \textcolor{keywordflow}{if}\ old\_mode\ !=\ new\_mode:}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00104}00104\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classAssertionError}{AssertionError}}(\textcolor{stringliteral}{"{}FPU\ precision\ mode\ changed\ from\ \{0:\#x\}\ to\ \{1:\#x\}"{}}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00105}00105\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ during\ the\ test"{}}.format(old\_mode,\ new\_mode))}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00106}00106\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00107}00107\ \ \ \ \ collect\_result\ =\ \_collect\_results.get(request.node)}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00108}00108\ \ \ \ \ \textcolor{keywordflow}{if}\ collect\_result\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00109}00109\ \ \ \ \ \ \ \ \ old\_mode,\ new\_mode\ =\ collect\_result}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00110}00110\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classAssertionError}{AssertionError}}(\textcolor{stringliteral}{"{}FPU\ precision\ mode\ changed\ from\ \{0:\#x\}\ to\ \{1:\#x\}"{}}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00111}00111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ when\ collecting\ the\ test"{}}.format(old\_mode,}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00112}00112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ new\_mode))}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00113}00113\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00114}00114\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00115}00115\ \textcolor{preprocessor}{@pytest.fixture(autouse=True)}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00116}00116\ \textcolor{keyword}{def\ }add\_np(doctest\_namespace):}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00117}00117\ \ \ \ \ doctest\_namespace[\textcolor{stringliteral}{'np'}]\ =\ numpy}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00118}00118\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00119}00119\ \textcolor{preprocessor}{@pytest.fixture(autouse=True)}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00120}00120\ \textcolor{keyword}{def\ }env\_setup(monkeypatch):}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00121}00121\ \ \ \ \ monkeypatch.setenv(\textcolor{stringliteral}{'PYTHONHASHSEED'},\ \textcolor{stringliteral}{'0'})}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00122}00122\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00123}00123\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00124}00124\ \textcolor{preprocessor}{@pytest.fixture(params=[True,\ False])}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00125}\mbox{\hyperlink{namespacenumpy_1_1conftest_a1f06fe59e18085823c311c138b020f31}{00125}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacenumpy_1_1conftest_a1f06fe59e18085823c311c138b020f31}{weak\_promotion}}(request):}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00126}00126\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00127}00127\ \textcolor{stringliteral}{\ \ \ \ Fixture\ to\ ensure\ "{}legacy"{}\ promotion\ state\ or\ change\ it\ to\ use\ the\ new}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00128}00128\ \textcolor{stringliteral}{\ \ \ \ weak\ promotion\ (plus\ warning).\ \ \`{}old\_promotion\`{}\ should\ be\ used\ as\ a}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00129}00129\ \textcolor{stringliteral}{\ \ \ \ parameter\ in\ the\ function.}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00130}00130\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00131}00131\ \ \ \ \ state\ =\ numpy.\_get\_promotion\_state()}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00132}00132\ \ \ \ \ \textcolor{keywordflow}{if}\ request.param:}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00133}00133\ \ \ \ \ \ \ \ \ numpy.\_set\_promotion\_state(\textcolor{stringliteral}{"{}weak\_and\_warn"{}})}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00134}00134\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00135}00135\ \ \ \ \ \ \ \ \ numpy.\_set\_promotion\_state(\textcolor{stringliteral}{"{}legacy"{}})}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00136}00136\ }
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00137}00137\ \ \ \ \ \textcolor{keywordflow}{yield}\ request.param}
\DoxyCodeLine{\Hypertarget{numpy_2conftest_8py_source_l00138}00138\ \ \ \ \ numpy.\_set\_promotion\_state(state)}

\end{DoxyCode}
