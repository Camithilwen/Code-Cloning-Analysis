\doxysection{main.\+Embedding\+Model\+Manager Class Reference}
\hypertarget{classmain_1_1EmbeddingModelManager}{}\label{classmain_1_1EmbeddingModelManager}\index{main.EmbeddingModelManager@{main.EmbeddingModelManager}}


Embedding Model Management Class.  




Collaboration diagram for main.\+Embedding\+Model\+Manager\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=251pt]{de/dd9/classmain_1_1EmbeddingModelManager__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classmain_1_1EmbeddingModelManager_a555c8052cfb7e1e2a78366fb1a44ccc0}{\+\_\+\+\_\+init\+\_\+\+\_\+}} (self)
\begin{DoxyCompactList}\small\item\em Defines embedding models and configures CUDA if a compatible GPU is present. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classmain_1_1EmbeddingModelManager_a901bb55862deafee2cf6954984f5335a}{aggressive\+\_\+cleanup}} (self)
\begin{DoxyCompactList}\small\item\em Performs aggressive interpreter and torch memory cleanup between model loads. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classmain_1_1EmbeddingModelManager_a1649b133897294b3bf70420b8503680b}{load\+\_\+model}} (self, model\+\_\+name)
\begin{DoxyCompactList}\small\item\em Loads model and verifies embedding dimensions. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classmain_1_1EmbeddingModelManager_a70007d9407f26a5d9ef09c81df22235d}{chunk\+\_\+text}} (self, text, max\+\_\+length=500)
\begin{DoxyCompactList}\small\item\em Chunks long text files to prevent memory overflow while preserving content. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classmain_1_1EmbeddingModelManager_a95ca0983364857f926ce667a8336a1fd}{embed\+\_\+texts}} (self, texts, model\+\_\+name, batch\+\_\+size=8)
\begin{DoxyCompactList}\small\item\em Generates embeddings with aggressive memory management and chunking. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classmain_1_1EmbeddingModelManager_a75d6b05723dcf7d50e3b4ec527be250d}{get\+\_\+dimension}} (self, model\+\_\+name)
\begin{DoxyCompactList}\small\item\em Gets the embedding dimension for a specific model. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classmain_1_1EmbeddingModelManager_a70ec712b0fcfaba7542be332e14aecc8}{cleanup}} (self)
\begin{DoxyCompactList}\small\item\em Cleans up loaded models and frees GPU memory. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
dict \mbox{\hyperlink{classmain_1_1EmbeddingModelManager_a78a0944a7b54b4c1e6c2a9769ab40e13}{model\+\_\+configs}}
\item 
\mbox{\hyperlink{classmain_1_1EmbeddingModelManager_a61a340861a79d351a207d2268b028374}{current\+\_\+model}} = None
\item 
\mbox{\hyperlink{classmain_1_1EmbeddingModelManager_a6bdef14139c90f01ca38df1f421a9da7}{current\+\_\+model\+\_\+name}} = None
\item 
str \mbox{\hyperlink{classmain_1_1EmbeddingModelManager_a0a9b5e29c7b748e2adad53d60efddaea}{device}} = "{}cuda"{} if torch.\+cuda.\+is\+\_\+available() else "{}cpu"{}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Embedding Model Management Class. 

Defines, loads, manages, and cleans up the repository embedding process. 

Definition at line \mbox{\hyperlink{main_8py_source_l00035}{35}} of file \mbox{\hyperlink{main_8py_source}{main.\+py}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classmain_1_1EmbeddingModelManager_a555c8052cfb7e1e2a78366fb1a44ccc0}\index{main.EmbeddingModelManager@{main.EmbeddingModelManager}!\_\_init\_\_@{\_\_init\_\_}}
\index{\_\_init\_\_@{\_\_init\_\_}!main.EmbeddingModelManager@{main.EmbeddingModelManager}}
\doxysubsubsection{\texorpdfstring{\_\_init\_\_()}{\_\_init\_\_()}}
{\footnotesize\ttfamily \label{classmain_1_1EmbeddingModelManager_a555c8052cfb7e1e2a78366fb1a44ccc0} 
main.\+Embedding\+Model\+Manager.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self}{}\end{DoxyParamCaption})}



Defines embedding models and configures CUDA if a compatible GPU is present. 

CPU will be used in lieu of an available GPU.


\begin{DoxyParams}{Parameters}
{\em self} & Object pointer \\
\hline
{\em self.\+model\+\_\+configs} & Contains embedding model configuration in JSON format. \\
\hline
{\em dimension} & Final size of vector embeddings. \\
\hline
{\em id} & Locally defined short ID for each model. @oaram trust\+\_\+remote\+\_\+code Boolean Required for the huggingface API to retrieve models with remotely defined code. \\
\hline
{\em max\+\_\+seq\+\_\+length} & Sequencing variable used during data chunking. \\
\hline
{\em self.\+current\+\_\+model} & Sentence\+Transformer object containing an embedding model. Initialized to None. \\
\hline
{\em self.\+current\+\_\+model\+\_\+name} & String holding the model name. @oaram self.\+device cuda OR cpu \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{main_8py_source_l00042}{42}} of file \mbox{\hyperlink{main_8py_source}{main.\+py}}.



\doxysubsection{Member Function Documentation}
\Hypertarget{classmain_1_1EmbeddingModelManager_a901bb55862deafee2cf6954984f5335a}\index{main.EmbeddingModelManager@{main.EmbeddingModelManager}!aggressive\_cleanup@{aggressive\_cleanup}}
\index{aggressive\_cleanup@{aggressive\_cleanup}!main.EmbeddingModelManager@{main.EmbeddingModelManager}}
\doxysubsubsection{\texorpdfstring{aggressive\_cleanup()}{aggressive\_cleanup()}}
{\footnotesize\ttfamily \label{classmain_1_1EmbeddingModelManager_a901bb55862deafee2cf6954984f5335a} 
main.\+Embedding\+Model\+Manager.\+aggressive\+\_\+cleanup (\begin{DoxyParamCaption}\item[{}]{self}{}\end{DoxyParamCaption})}



Performs aggressive interpreter and torch memory cleanup between model loads. 



Definition at line \mbox{\hyperlink{main_8py_source_l00089}{89}} of file \mbox{\hyperlink{main_8py_source}{main.\+py}}.

\Hypertarget{classmain_1_1EmbeddingModelManager_a70007d9407f26a5d9ef09c81df22235d}\index{main.EmbeddingModelManager@{main.EmbeddingModelManager}!chunk\_text@{chunk\_text}}
\index{chunk\_text@{chunk\_text}!main.EmbeddingModelManager@{main.EmbeddingModelManager}}
\doxysubsubsection{\texorpdfstring{chunk\_text()}{chunk\_text()}}
{\footnotesize\ttfamily \label{classmain_1_1EmbeddingModelManager_a70007d9407f26a5d9ef09c81df22235d} 
main.\+Embedding\+Model\+Manager.\+chunk\+\_\+text (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{text}{, }\item[{}]{max\+\_\+length}{ = {\ttfamily 500}}\end{DoxyParamCaption})}



Chunks long text files to prevent memory overflow while preserving content. 

\begin{DoxyReturn}{Returns}
Overlapping chunks to maintain context. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{main_8py_source_l00151}{151}} of file \mbox{\hyperlink{main_8py_source}{main.\+py}}.

\Hypertarget{classmain_1_1EmbeddingModelManager_a70ec712b0fcfaba7542be332e14aecc8}\index{main.EmbeddingModelManager@{main.EmbeddingModelManager}!cleanup@{cleanup}}
\index{cleanup@{cleanup}!main.EmbeddingModelManager@{main.EmbeddingModelManager}}
\doxysubsubsection{\texorpdfstring{cleanup()}{cleanup()}}
{\footnotesize\ttfamily \label{classmain_1_1EmbeddingModelManager_a70ec712b0fcfaba7542be332e14aecc8} 
main.\+Embedding\+Model\+Manager.\+cleanup (\begin{DoxyParamCaption}\item[{}]{self}{}\end{DoxyParamCaption})}



Cleans up loaded models and frees GPU memory. 



Definition at line \mbox{\hyperlink{main_8py_source_l00233}{233}} of file \mbox{\hyperlink{main_8py_source}{main.\+py}}.

\Hypertarget{classmain_1_1EmbeddingModelManager_a95ca0983364857f926ce667a8336a1fd}\index{main.EmbeddingModelManager@{main.EmbeddingModelManager}!embed\_texts@{embed\_texts}}
\index{embed\_texts@{embed\_texts}!main.EmbeddingModelManager@{main.EmbeddingModelManager}}
\doxysubsubsection{\texorpdfstring{embed\_texts()}{embed\_texts()}}
{\footnotesize\ttfamily \label{classmain_1_1EmbeddingModelManager_a95ca0983364857f926ce667a8336a1fd} 
main.\+Embedding\+Model\+Manager.\+embed\+\_\+texts (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{texts}{, }\item[{}]{model\+\_\+name}{, }\item[{}]{batch\+\_\+size}{ = {\ttfamily 8}}\end{DoxyParamCaption})}



Generates embeddings with aggressive memory management and chunking. 

Small batch sizes intended for use with a P100 GPU through Kaggle. \begin{DoxyReturn}{Returns}
Lists containing complete embeddings and raw text metadata. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{main_8py_source_l00171}{171}} of file \mbox{\hyperlink{main_8py_source}{main.\+py}}.

\Hypertarget{classmain_1_1EmbeddingModelManager_a75d6b05723dcf7d50e3b4ec527be250d}\index{main.EmbeddingModelManager@{main.EmbeddingModelManager}!get\_dimension@{get\_dimension}}
\index{get\_dimension@{get\_dimension}!main.EmbeddingModelManager@{main.EmbeddingModelManager}}
\doxysubsubsection{\texorpdfstring{get\_dimension()}{get\_dimension()}}
{\footnotesize\ttfamily \label{classmain_1_1EmbeddingModelManager_a75d6b05723dcf7d50e3b4ec527be250d} 
main.\+Embedding\+Model\+Manager.\+get\+\_\+dimension (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{model\+\_\+name}{}\end{DoxyParamCaption})}



Gets the embedding dimension for a specific model. 



Definition at line \mbox{\hyperlink{main_8py_source_l00229}{229}} of file \mbox{\hyperlink{main_8py_source}{main.\+py}}.

\Hypertarget{classmain_1_1EmbeddingModelManager_a1649b133897294b3bf70420b8503680b}\index{main.EmbeddingModelManager@{main.EmbeddingModelManager}!load\_model@{load\_model}}
\index{load\_model@{load\_model}!main.EmbeddingModelManager@{main.EmbeddingModelManager}}
\doxysubsubsection{\texorpdfstring{load\_model()}{load\_model()}}
{\footnotesize\ttfamily \label{classmain_1_1EmbeddingModelManager_a1649b133897294b3bf70420b8503680b} 
main.\+Embedding\+Model\+Manager.\+load\+\_\+model (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{model\+\_\+name}{}\end{DoxyParamCaption})}



Loads model and verifies embedding dimensions. 

\begin{DoxyReturn}{Returns}
An embedding model as a Sentence\+Transformer object. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{main_8py_source_l00106}{106}} of file \mbox{\hyperlink{main_8py_source}{main.\+py}}.



\doxysubsection{Member Data Documentation}
\Hypertarget{classmain_1_1EmbeddingModelManager_a61a340861a79d351a207d2268b028374}\index{main.EmbeddingModelManager@{main.EmbeddingModelManager}!current\_model@{current\_model}}
\index{current\_model@{current\_model}!main.EmbeddingModelManager@{main.EmbeddingModelManager}}
\doxysubsubsection{\texorpdfstring{current\_model}{current\_model}}
{\footnotesize\ttfamily \label{classmain_1_1EmbeddingModelManager_a61a340861a79d351a207d2268b028374} 
main.\+Embedding\+Model\+Manager.\+current\+\_\+model = None}



Definition at line \mbox{\hyperlink{main_8py_source_l00077}{77}} of file \mbox{\hyperlink{main_8py_source}{main.\+py}}.

\Hypertarget{classmain_1_1EmbeddingModelManager_a6bdef14139c90f01ca38df1f421a9da7}\index{main.EmbeddingModelManager@{main.EmbeddingModelManager}!current\_model\_name@{current\_model\_name}}
\index{current\_model\_name@{current\_model\_name}!main.EmbeddingModelManager@{main.EmbeddingModelManager}}
\doxysubsubsection{\texorpdfstring{current\_model\_name}{current\_model\_name}}
{\footnotesize\ttfamily \label{classmain_1_1EmbeddingModelManager_a6bdef14139c90f01ca38df1f421a9da7} 
main.\+Embedding\+Model\+Manager.\+current\+\_\+model\+\_\+name = None}



Definition at line \mbox{\hyperlink{main_8py_source_l00078}{78}} of file \mbox{\hyperlink{main_8py_source}{main.\+py}}.

\Hypertarget{classmain_1_1EmbeddingModelManager_a0a9b5e29c7b748e2adad53d60efddaea}\index{main.EmbeddingModelManager@{main.EmbeddingModelManager}!device@{device}}
\index{device@{device}!main.EmbeddingModelManager@{main.EmbeddingModelManager}}
\doxysubsubsection{\texorpdfstring{device}{device}}
{\footnotesize\ttfamily \label{classmain_1_1EmbeddingModelManager_a0a9b5e29c7b748e2adad53d60efddaea} 
str main.\+Embedding\+Model\+Manager.\+device = "{}cuda"{} if torch.\+cuda.\+is\+\_\+available() else "{}cpu"{}}



Definition at line \mbox{\hyperlink{main_8py_source_l00079}{79}} of file \mbox{\hyperlink{main_8py_source}{main.\+py}}.

\Hypertarget{classmain_1_1EmbeddingModelManager_a78a0944a7b54b4c1e6c2a9769ab40e13}\index{main.EmbeddingModelManager@{main.EmbeddingModelManager}!model\_configs@{model\_configs}}
\index{model\_configs@{model\_configs}!main.EmbeddingModelManager@{main.EmbeddingModelManager}}
\doxysubsubsection{\texorpdfstring{model\_configs}{model\_configs}}
{\footnotesize\ttfamily \label{classmain_1_1EmbeddingModelManager_a78a0944a7b54b4c1e6c2a9769ab40e13} 
dict main.\+Embedding\+Model\+Manager.\+model\+\_\+configs}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}jinaai/jina-\/embeddings-\/v2-\/base-\/code"{}}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}dimension"{}}:\ 768,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}id"{}}:\ \textcolor{stringliteral}{"{}jina"{}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}trust\_remote\_code"{}}:\ \textcolor{keyword}{False},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}max\_seq\_length"{}}:\ 512}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}nomic-\/ai/CodeRankEmbed"{}}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}dimension"{}}:\ 256,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}id"{}}:\ \textcolor{stringliteral}{"{}sfr2br"{}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}trust\_remote\_code"{}}:\ \textcolor{keyword}{True},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}max\_seq\_length"{}}:\ 256}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}codesage/codesage-\/large-\/v2"{}}:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}dimension"{}}:\ 1024,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}id"{}}:\ \textcolor{stringliteral}{"{}codesage"{}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}trust\_remote\_code"{}}:\ \textcolor{keyword}{True},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}max\_seq\_length"{}}:\ 512}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}

\end{DoxyCode}


Definition at line \mbox{\hyperlink{main_8py_source_l00055}{55}} of file \mbox{\hyperlink{main_8py_source}{main.\+py}}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
/home/jam/\+Research/\+IRES-\/2025/dev/replication/02\+\_\+embedding/main.\+py\end{DoxyCompactItemize}
