\doxysection{test\+\_\+backend\+\_\+qt.\+py}
\hypertarget{test__backend__qt_8py_source}{}\label{test__backend__qt_8py_source}\index{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/matplotlib/tests/test\_backend\_qt.py@{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/matplotlib/tests/test\_backend\_qt.py}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00001}\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__backend__qt}{00001}}\ \textcolor{keyword}{import}\ copy}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00002}00002\ \textcolor{keyword}{import}\ importlib}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00003}00003\ \textcolor{keyword}{import}\ os}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00004}00004\ \textcolor{keyword}{import}\ signal}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00005}00005\ \textcolor{keyword}{import}\ sys}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00006}00006\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00007}00007\ \textcolor{keyword}{from}\ datetime\ \textcolor{keyword}{import}\ date,\ datetime}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00008}00008\ \textcolor{keyword}{from}\ unittest\ \textcolor{keyword}{import}\ mock}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00009}00009\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00010}00010\ \textcolor{keyword}{import}\ pytest}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00011}00011\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00012}00012\ \textcolor{keyword}{import}\ matplotlib}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00013}00013\ \textcolor{keyword}{from}\ matplotlib\ \textcolor{keyword}{import}\ pyplot\ \textcolor{keyword}{as}\ plt}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00014}00014\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacematplotlib_1_1__pylab__helpers}{matplotlib.\_pylab\_helpers}}\ \textcolor{keyword}{import}\ Gcf}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00015}00015\ \textcolor{keyword}{from}\ matplotlib\ \textcolor{keyword}{import}\ \_c\_internal\_utils}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00016}00016\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00017}00017\ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00018}00018\ \ \ \ \ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacematplotlib_1_1backends_1_1qt__compat}{matplotlib.backends.qt\_compat}}\ \textcolor{keyword}{import}\ QtGui\ \ \textcolor{comment}{\#\ type:\ ignore[attr-\/defined]\ \ \#\ noqa:\ E501,\ F401}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00019}00019\ \ \ \ \ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacematplotlib_1_1backends_1_1qt__compat}{matplotlib.backends.qt\_compat}}\ \textcolor{keyword}{import}\ QtWidgets\ \ \textcolor{comment}{\#\ type:\ ignore[attr-\/defined]}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00020}00020\ \ \ \ \ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacematplotlib_1_1backends_1_1qt__editor}{matplotlib.backends.qt\_editor}}\ \textcolor{keyword}{import}\ \_formlayout}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00021}00021\ \textcolor{keywordflow}{except}\ ImportError:}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00022}00022\ \ \ \ \ pytestmark\ =\ pytest.mark.skip(\textcolor{stringliteral}{'No\ usable\ Qt\ bindings'})}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00024}00024\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00025}00025\ \_test\_timeout\ =\ 60\ \ \textcolor{comment}{\#\ A\ reasonably\ safe\ value\ for\ slower\ architectures.}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00026}00026\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00027}00027\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00028}00028\ \textcolor{preprocessor}{@pytest.fixture}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00029}00029\ \textcolor{keyword}{def\ }qt\_core(request):}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00030}00030\ \ \ \ \ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacematplotlib_1_1backends_1_1qt__compat}{matplotlib.backends.qt\_compat}}\ \textcolor{keyword}{import}\ QtCore}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00031}00031\ \ \ \ \ \textcolor{keywordflow}{return}\ QtCore}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00032}00032\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00034}00034\ \textcolor{preprocessor}{@pytest.mark.backend('QtAgg',\ skip\_on\_importerror=True)}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00035}00035\ \textcolor{keyword}{def\ }test\_fig\_close():}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00036}00036\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00037}00037\ \ \ \ \ \textcolor{comment}{\#\ save\ the\ state\ of\ Gcf.figs}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00038}00038\ \ \ \ \ init\_figs\ =\ copy.copy(Gcf.figs)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00039}00039\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00040}00040\ \ \ \ \ \textcolor{comment}{\#\ make\ a\ figure\ using\ pyplot\ interface}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00041}00041\ \ \ \ \ fig\ =\ plt.figure()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00043}00043\ \ \ \ \ \textcolor{comment}{\#\ simulate\ user\ clicking\ the\ close\ button\ by\ reaching\ in}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00044}00044\ \ \ \ \ \textcolor{comment}{\#\ and\ calling\ close\ on\ the\ underlying\ Qt\ object}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00045}00045\ \ \ \ \ fig.canvas.manager.window.close()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00046}00046\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00047}00047\ \ \ \ \ \textcolor{comment}{\#\ assert\ that\ we\ have\ removed\ the\ reference\ to\ the\ FigureManager}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00048}00048\ \ \ \ \ \textcolor{comment}{\#\ that\ got\ added\ by\ plt.figure()}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00049}00049\ \ \ \ \ \textcolor{keyword}{assert}\ init\_figs\ ==\ Gcf.figs}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00050}00050\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00051}00051\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00052}00052\ \textcolor{preprocessor}{@pytest.mark.parametrize}(}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00053}00053\ \ \ \ \ \textcolor{stringliteral}{"{}qt\_key,\ qt\_mods,\ answer"{}},}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00054}00054\ \ \ \ \ [}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00055}00055\ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}Key\_A"{}},\ [\textcolor{stringliteral}{"{}ShiftModifier"{}}],\ \textcolor{stringliteral}{"{}A"{}}),}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00056}00056\ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}Key\_A"{}},\ [],\ \textcolor{stringliteral}{"{}a"{}}),}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00057}00057\ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}Key\_A"{}},\ [\textcolor{stringliteral}{"{}ControlModifier"{}}],\ (\textcolor{stringliteral}{"{}ctrl+a"{}})),}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00058}00058\ \ \ \ \ \ \ \ \ (}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00059}00059\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Key\_Aacute"{}},}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00060}00060\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}ShiftModifier"{}}],}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00061}00061\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)N\{LATIN\ CAPITAL\ LETTER\ A\ WITH\ ACUTE\}"{}},}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00062}00062\ \ \ \ \ \ \ \ \ ),}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00063}00063\ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}Key\_Aacute"{}},\ [],\ \textcolor{stringliteral}{"{}\(\backslash\)N\{LATIN\ SMALL\ LETTER\ A\ WITH\ ACUTE\}"{}}),}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00064}00064\ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}Key\_Control"{}},\ [\textcolor{stringliteral}{"{}AltModifier"{}}],\ (\textcolor{stringliteral}{"{}alt+control"{}})),}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00065}00065\ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}Key\_Alt"{}},\ [\textcolor{stringliteral}{"{}ControlModifier"{}}],\ \textcolor{stringliteral}{"{}ctrl+alt"{}}),}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00066}00066\ \ \ \ \ \ \ \ \ (}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00067}00067\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Key\_Aacute"{}},}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00068}00068\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}ControlModifier"{}},\ \textcolor{stringliteral}{"{}AltModifier"{}},\ \textcolor{stringliteral}{"{}MetaModifier"{}}],}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00069}00069\ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}ctrl+alt+meta+\(\backslash\)N\{LATIN\ SMALL\ LETTER\ A\ WITH\ ACUTE\}"{}}),}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00070}00070\ \ \ \ \ \ \ \ \ ),}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00071}00071\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ We\ do\ not\ currently\ map\ the\ media\ keys,\ this\ may\ change\ in\ the}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00072}00072\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ future.\ \ This\ means\ the\ callback\ will\ never\ fire}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00073}00073\ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}Key\_Play"{}},\ [],\ \textcolor{keywordtype}{None}),}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00074}00074\ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}Key\_Backspace"{}},\ [],\ \textcolor{stringliteral}{"{}backspace"{}}),}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00075}00075\ \ \ \ \ \ \ \ \ (}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00076}00076\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Key\_Backspace"{}},}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00077}00077\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}ControlModifier"{}}],}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00078}00078\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}ctrl+backspace"{}},}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00079}00079\ \ \ \ \ \ \ \ \ ),}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00080}00080\ \ \ \ \ ],}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00081}00081\ \ \ \ \ ids=[}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00082}00082\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'shift'},}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00083}00083\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'lower'},}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00084}00084\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'control'},}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00085}00085\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'unicode\_upper'},}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00086}00086\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'unicode\_lower'},}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00087}00087\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'alt\_control'},}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00088}00088\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'control\_alt'},}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00089}00089\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'modifier\_order'},}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00090}00090\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'non\_unicode\_key'},}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00091}00091\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'backspace'},}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00092}00092\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'backspace\_mod'},}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00093}00093\ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00094}00094\ )}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00095}00095\ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{'backend'},\ [}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00096}00096\ \ \ \ \ \textcolor{comment}{\#\ Note:\ the\ value\ is\ irrelevant;\ the\ important\ part\ is\ the\ marker.}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00097}00097\ \ \ \ \ pytest.param(}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00098}00098\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'Qt5Agg'},}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00099}00099\ \ \ \ \ \ \ \ \ marks=pytest.mark.backend(\textcolor{stringliteral}{'Qt5Agg'},\ skip\_on\_importerror=\textcolor{keyword}{True})),}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00100}00100\ \ \ \ \ pytest.param(}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00101}00101\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'QtAgg'},}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00102}00102\ \ \ \ \ \ \ \ \ marks=pytest.mark.backend(\textcolor{stringliteral}{'QtAgg'},\ skip\_on\_importerror=\textcolor{keyword}{True})),}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00103}00103\ ])}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00104}\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__backend__qt_a3e71944e229891197454b8e7bb4e9063}{00104}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__backend__qt_a3e71944e229891197454b8e7bb4e9063}{test\_correct\_key}}(backend,\ qt\_core,\ qt\_key,\ qt\_mods,\ answer,\ monkeypatch):}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00105}00105\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00106}00106\ \textcolor{stringliteral}{\ \ \ \ Make\ a\ figure.}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00107}00107\ \textcolor{stringliteral}{\ \ \ \ Send\ a\ key\_press\_event\ event\ (using\ non-\/public,\ qtX\ backend\ specific\ api).}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00108}00108\ \textcolor{stringliteral}{\ \ \ \ Catch\ the\ event.}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00109}00109\ \textcolor{stringliteral}{\ \ \ \ Assert\ sent\ and\ caught\ keys\ are\ the\ same.}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00110}00110\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00111}00111\ \ \ \ \ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacematplotlib_1_1backends_1_1qt__compat}{matplotlib.backends.qt\_compat}}\ \textcolor{keyword}{import}\ \_to\_int,\ QtCore}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00112}00112\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00113}00113\ \ \ \ \ \textcolor{keywordflow}{if}\ sys.platform\ ==\ \textcolor{stringliteral}{"{}darwin"{}}\ \textcolor{keywordflow}{and}\ answer\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00114}00114\ \ \ \ \ \ \ \ \ answer\ =\ answer.replace(\textcolor{stringliteral}{"{}ctrl"{}},\ \textcolor{stringliteral}{"{}cmd"{}})}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00115}00115\ \ \ \ \ \ \ \ \ answer\ =\ answer.replace(\textcolor{stringliteral}{"{}control"{}},\ \textcolor{stringliteral}{"{}cmd"{}})}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00116}00116\ \ \ \ \ \ \ \ \ answer\ =\ answer.replace(\textcolor{stringliteral}{"{}meta"{}},\ \textcolor{stringliteral}{"{}ctrl"{}})}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00117}00117\ \ \ \ \ result\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00118}00118\ \ \ \ \ qt\_mod\ =\ QtCore.Qt.KeyboardModifier.NoModifier}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00119}00119\ \ \ \ \ \textcolor{keywordflow}{for}\ mod\ \textcolor{keywordflow}{in}\ qt\_mods:}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00120}00120\ \ \ \ \ \ \ \ \ qt\_mod\ |=\ getattr(QtCore.Qt.KeyboardModifier,\ mod)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00121}00121\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00122}00122\ \ \ \ \ \textcolor{keyword}{class\ }\_Event:}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00123}00123\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }isAutoRepeat(self):\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00124}00124\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def}\ key(self):\ \textcolor{keywordflow}{return}\ \_to\_int(getattr(QtCore.Qt.Key,\ qt\_key))}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00125}00125\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00126}00126\ \ \ \ \ monkeypatch.setattr(QtWidgets.QApplication,\ \textcolor{stringliteral}{"{}keyboardModifiers"{}},}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00127}00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{lambda}\ self:\ qt\_mod)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00128}00128\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00129}00129\ \ \ \ \ \textcolor{keyword}{def\ }on\_key\_press(event):}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00130}00130\ \ \ \ \ \ \ \ \ nonlocal\ result}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00131}00131\ \ \ \ \ \ \ \ \ result\ =\ event.key}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00132}00132\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00133}00133\ \ \ \ \ qt\_canvas\ =\ plt.figure().canvas}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00134}00134\ \ \ \ \ qt\_canvas.mpl\_connect(\textcolor{stringliteral}{'key\_press\_event'},\ on\_key\_press)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00135}00135\ \ \ \ \ qt\_canvas.keyPressEvent(\_Event())}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00136}00136\ \ \ \ \ \textcolor{keyword}{assert}\ result\ ==\ answer}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00137}00137\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00138}00138\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00139}00139\ \textcolor{preprocessor}{@pytest.mark.backend('QtAgg',\ skip\_on\_importerror=True)}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00140}\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__backend__qt_a8d44b906c6e412e70470bb431a1e3e9a}{00140}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__backend__qt_a8d44b906c6e412e70470bb431a1e3e9a}{test\_device\_pixel\_ratio\_change}}():}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00141}00141\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00142}00142\ \textcolor{stringliteral}{\ \ \ \ Make\ sure\ that\ if\ the\ pixel\ ratio\ changes,\ the\ figure\ dpi\ changes\ but\ the}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00143}00143\ \textcolor{stringliteral}{\ \ \ \ widget\ remains\ the\ same\ logical\ size.}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00144}00144\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00145}00145\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00146}00146\ \ \ \ \ prop\ =\ \textcolor{stringliteral}{'matplotlib.backends.backend\_qt.FigureCanvasQT.devicePixelRatioF'}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00147}00147\ \ \ \ \ \textcolor{keyword}{with}\ mock.patch(prop)\ \textcolor{keyword}{as}\ p:}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00148}00148\ \ \ \ \ \ \ \ \ p.return\_value\ =\ 3}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00149}00149\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00150}00150\ \ \ \ \ \ \ \ \ fig\ =\ plt.figure(figsize=(5,\ 2),\ dpi=120)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00151}00151\ \ \ \ \ \ \ \ \ qt\_canvas\ =\ fig.canvas}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00152}00152\ \ \ \ \ \ \ \ \ qt\_canvas.show()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00153}00153\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00154}00154\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }set\_device\_pixel\_ratio(ratio):}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00155}00155\ \ \ \ \ \ \ \ \ \ \ \ \ p.return\_value\ =\ ratio}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00156}00156\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00157}00157\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ value\ here\ doesn't\ matter,\ as\ we\ can't\ mock\ the\ C++\ QScreen}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00158}00158\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ object,\ but\ can\ override\ the\ functional\ wrapper\ around\ it.}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00159}00159\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Emitting\ this\ event\ is\ simply\ to\ trigger\ the\ DPI\ change\ handler}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00160}00160\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ in\ Matplotlib\ in\ the\ same\ manner\ that\ it\ would\ occur\ normally.}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00161}00161\ \ \ \ \ \ \ \ \ \ \ \ \ screen.logicalDotsPerInchChanged.emit(96)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00162}00162\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00163}00163\ \ \ \ \ \ \ \ \ \ \ \ \ qt\_canvas.draw()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00164}00164\ \ \ \ \ \ \ \ \ \ \ \ \ qt\_canvas.flush\_events()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00165}00165\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00166}00166\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Make\ sure\ the\ mocking\ worked}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00167}00167\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ qt\_canvas.device\_pixel\_ratio\ ==\ ratio}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00168}00168\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00169}00169\ \ \ \ \ \ \ \ \ qt\_canvas.manager.show()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00170}00170\ \ \ \ \ \ \ \ \ size\ =\ qt\_canvas.size()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00171}00171\ \ \ \ \ \ \ \ \ screen\ =\ qt\_canvas.window().windowHandle().screen()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00172}00172\ \ \ \ \ \ \ \ \ set\_device\_pixel\_ratio(3)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00173}00173\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00174}00174\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ DPI\ and\ the\ renderer\ width/height\ change}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00175}00175\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ fig.dpi\ ==\ 360}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00176}00176\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ qt\_canvas.renderer.width\ ==\ 1800}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00177}00177\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ qt\_canvas.renderer.height\ ==\ 720}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00178}00178\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00179}00179\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ actual\ widget\ size\ and\ figure\ logical\ size\ don't\ change.}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00180}00180\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ size.width()\ ==\ 600}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00181}00181\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ size.height()\ ==\ 240}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00182}00182\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ qt\_canvas.get\_width\_height()\ ==\ (600,\ 240)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00183}00183\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ (fig.get\_size\_inches()\ ==\ (5,\ 2)).all()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00184}00184\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00185}00185\ \ \ \ \ \ \ \ \ set\_device\_pixel\_ratio(2)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00186}00186\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00187}00187\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ DPI\ and\ the\ renderer\ width/height\ change}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00188}00188\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ fig.dpi\ ==\ 240}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00189}00189\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ qt\_canvas.renderer.width\ ==\ 1200}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00190}00190\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ qt\_canvas.renderer.height\ ==\ 480}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00191}00191\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00192}00192\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ actual\ widget\ size\ and\ figure\ logical\ size\ don't\ change.}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00193}00193\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ size.width()\ ==\ 600}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00194}00194\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ size.height()\ ==\ 240}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00195}00195\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ qt\_canvas.get\_width\_height()\ ==\ (600,\ 240)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00196}00196\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ (fig.get\_size\_inches()\ ==\ (5,\ 2)).all()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00197}00197\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00198}00198\ \ \ \ \ \ \ \ \ set\_device\_pixel\_ratio(1.5)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00199}00199\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00200}00200\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ DPI\ and\ the\ renderer\ width/height\ change}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00201}00201\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ fig.dpi\ ==\ 180}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00202}00202\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ qt\_canvas.renderer.width\ ==\ 900}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00203}00203\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ qt\_canvas.renderer.height\ ==\ 360}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00204}00204\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00205}00205\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ actual\ widget\ size\ and\ figure\ logical\ size\ don't\ change.}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00206}00206\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ size.width()\ ==\ 600}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00207}00207\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ size.height()\ ==\ 240}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00208}00208\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ qt\_canvas.get\_width\_height()\ ==\ (600,\ 240)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00209}00209\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ (fig.get\_size\_inches()\ ==\ (5,\ 2)).all()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00210}00210\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00211}00211\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00212}00212\ \textcolor{preprocessor}{@pytest.mark.backend('QtAgg',\ skip\_on\_importerror=True)}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00213}00213\ \textcolor{keyword}{def\ }test\_subplottool():}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00214}00214\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00215}00215\ \ \ \ \ \textcolor{keyword}{with}\ mock.patch(\textcolor{stringliteral}{"{}matplotlib.backends.qt\_compat.\_exec"{}},\ \textcolor{keyword}{lambda}\ obj:\ \textcolor{keywordtype}{None}):}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00216}00216\ \ \ \ \ \ \ \ \ fig.canvas.manager.toolbar.configure\_subplots()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00217}00217\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00218}00218\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00219}00219\ \textcolor{preprocessor}{@pytest.mark.backend('QtAgg',\ skip\_on\_importerror=True)}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00220}00220\ \textcolor{keyword}{def\ }test\_figureoptions():}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00221}00221\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00222}00222\ \ \ \ \ ax.plot([1,\ 2])}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00223}00223\ \ \ \ \ ax.imshow([[1]])}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00224}00224\ \ \ \ \ ax.scatter(range(3),\ range(3),\ c=range(3))}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00225}00225\ \ \ \ \ \textcolor{keyword}{with}\ mock.patch(\textcolor{stringliteral}{"{}matplotlib.backends.qt\_compat.\_exec"{}},\ \textcolor{keyword}{lambda}\ obj:\ \textcolor{keywordtype}{None}):}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00226}00226\ \ \ \ \ \ \ \ \ fig.canvas.manager.toolbar.edit\_parameters()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00227}00227\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00228}00228\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00229}00229\ \textcolor{preprocessor}{@pytest.mark.backend('QtAgg',\ skip\_on\_importerror=True)}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00230}00230\ \textcolor{keyword}{def\ }test\_save\_figure\_return():}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00231}00231\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00232}00232\ \ \ \ \ ax.imshow([[1]])}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00233}00233\ \ \ \ \ prop\ =\ \textcolor{stringliteral}{"{}matplotlib.backends.qt\_compat.QtWidgets.QFileDialog.getSaveFileName"{}}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00234}00234\ \ \ \ \ \textcolor{keyword}{with}\ mock.patch(prop,\ return\_value=(\textcolor{stringliteral}{"{}foobar.png"{}},\ \textcolor{keywordtype}{None})):}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00235}00235\ \ \ \ \ \ \ \ \ fname\ =\ fig.canvas.manager.toolbar.save\_figure()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00236}00236\ \ \ \ \ \ \ \ \ os.remove(\textcolor{stringliteral}{"{}foobar.png"{}})}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00237}00237\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ fname\ ==\ \textcolor{stringliteral}{"{}foobar.png"{}}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00238}00238\ \ \ \ \ \textcolor{keyword}{with}\ mock.patch(prop,\ return\_value=(\textcolor{keywordtype}{None},\ \textcolor{keywordtype}{None})):}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00239}00239\ \ \ \ \ \ \ \ \ fname\ =\ fig.canvas.manager.toolbar.save\_figure()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00240}00240\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ fname\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00241}00241\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00242}00242\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00243}00243\ \textcolor{preprocessor}{@pytest.mark.backend('QtAgg',\ skip\_on\_importerror=True)}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00244}00244\ \textcolor{keyword}{def\ }test\_figureoptions\_with\_datetime\_axes():}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00245}00245\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00246}00246\ \ \ \ \ xydata\ =\ [}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00247}00247\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdatetime}{datetime}}(year=2021,\ month=1,\ day=1),}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00248}00248\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdatetime}{datetime}}(year=2021,\ month=2,\ day=1)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00249}00249\ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00250}00250\ \ \ \ \ ax.plot(xydata,\ xydata)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00251}00251\ \ \ \ \ \textcolor{keyword}{with}\ mock.patch(\textcolor{stringliteral}{"{}matplotlib.backends.qt\_compat.\_exec"{}},\ \textcolor{keyword}{lambda}\ obj:\ \textcolor{keywordtype}{None}):}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00252}00252\ \ \ \ \ \ \ \ \ fig.canvas.manager.toolbar.edit\_parameters()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00253}00253\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00254}00254\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00255}00255\ \textcolor{preprocessor}{@pytest.mark.backend('QtAgg',\ skip\_on\_importerror=True)}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00256}00256\ \textcolor{keyword}{def\ }test\_double\_resize():}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00257}00257\ \ \ \ \ \textcolor{comment}{\#\ Check\ that\ resizing\ a\ figure\ twice\ keeps\ the\ same\ window\ size}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00258}00258\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00259}00259\ \ \ \ \ fig.canvas.draw()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00260}00260\ \ \ \ \ window\ =\ fig.canvas.manager.window}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00261}00261\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00262}00262\ \ \ \ \ w,\ h\ =\ 3,\ 2}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00263}00263\ \ \ \ \ fig.set\_size\_inches(w,\ h)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00264}00264\ \ \ \ \ \textcolor{keyword}{assert}\ fig.canvas.width()\ ==\ w\ *\ matplotlib.rcParams[\textcolor{stringliteral}{'figure.dpi'}]}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00265}00265\ \ \ \ \ \textcolor{keyword}{assert}\ fig.canvas.height()\ ==\ h\ *\ matplotlib.rcParams[\textcolor{stringliteral}{'figure.dpi'}]}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00266}00266\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00267}00267\ \ \ \ \ old\_width\ =\ window.width()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00268}00268\ \ \ \ \ old\_height\ =\ window.height()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00269}00269\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00270}00270\ \ \ \ \ fig.set\_size\_inches(w,\ h)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00271}00271\ \ \ \ \ \textcolor{keyword}{assert}\ window.width()\ ==\ old\_width}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00272}00272\ \ \ \ \ \textcolor{keyword}{assert}\ window.height()\ ==\ old\_height}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00273}00273\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00274}00274\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00275}00275\ \textcolor{preprocessor}{@pytest.mark.backend('QtAgg',\ skip\_on\_importerror=True)}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00276}00276\ \textcolor{keyword}{def\ }test\_canvas\_reinit():}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00277}00277\ \ \ \ \ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacematplotlib_1_1backends_1_1backend__qtagg}{matplotlib.backends.backend\_qtagg}}\ \textcolor{keyword}{import}\ FigureCanvasQTAgg}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00278}00278\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00279}00279\ \ \ \ \ called\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00280}00280\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00281}00281\ \ \ \ \ \textcolor{keyword}{def\ }crashing\_callback(fig,\ stale):}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00282}00282\ \ \ \ \ \ \ \ \ nonlocal\ called}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00283}00283\ \ \ \ \ \ \ \ \ fig.canvas.draw\_idle()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00284}00284\ \ \ \ \ \ \ \ \ called\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00285}00285\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00286}00286\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00287}00287\ \ \ \ \ fig.stale\_callback\ =\ crashing\_callback}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00288}00288\ \ \ \ \ \textcolor{comment}{\#\ this\ should\ not\ raise}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00289}00289\ \ \ \ \ canvas\ =\ FigureCanvasQTAgg(fig)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00290}00290\ \ \ \ \ fig.stale\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00291}00291\ \ \ \ \ \textcolor{keyword}{assert}\ called}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00292}00292\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00293}00293\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00294}00294\ \textcolor{preprocessor}{@pytest.mark.backend('Qt5Agg',\ skip\_on\_importerror=True)}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00295}00295\ \textcolor{keyword}{def\ }test\_form\_widget\_get\_with\_datetime\_and\_date\_fields():}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00296}00296\ \ \ \ \ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacematplotlib_1_1backends_1_1backend__qt}{matplotlib.backends.backend\_qt}}\ \textcolor{keyword}{import}\ \_create\_qApp}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00297}00297\ \ \ \ \ \_create\_qApp()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00298}00298\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00299}00299\ \ \ \ \ form\ =\ [}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00300}00300\ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}Datetime\ field"{}},\ \mbox{\hyperlink{classdatetime}{datetime}}(year=2021,\ month=3,\ day=11)),}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00301}00301\ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}Date\ field"{}},\ date(year=2021,\ month=3,\ day=11))}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00302}00302\ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00303}00303\ \ \ \ \ widget\ =\ \mbox{\hyperlink{classmatplotlib_1_1backends_1_1qt__editor_1_1__formlayout_1_1FormWidget}{\_formlayout.FormWidget}}(form)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00304}00304\ \ \ \ \ widget.setup()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00305}00305\ \ \ \ \ values\ =\ widget.get()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00306}00306\ \ \ \ \ \textcolor{keyword}{assert}\ values\ ==\ [}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00307}00307\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdatetime}{datetime}}(year=2021,\ month=3,\ day=11),}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00308}00308\ \ \ \ \ \ \ \ \ date(year=2021,\ month=3,\ day=11)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00309}00309\ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00310}00310\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00311}00311\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00312}00312\ \textcolor{keyword}{def\ }\_get\_testable\_qt\_backends():}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00313}00313\ \ \ \ \ envs\ =\ []}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00314}00314\ \ \ \ \ \textcolor{keywordflow}{for}\ deps,\ env\ \textcolor{keywordflow}{in}\ [}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00315}00315\ \ \ \ \ \ \ \ \ \ \ \ \ ([qt\_api],\ \{\textcolor{stringliteral}{"{}MPLBACKEND"{}}:\ \textcolor{stringliteral}{"{}qtagg"{}},\ \textcolor{stringliteral}{"{}QT\_API"{}}:\ qt\_api\})}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00316}00316\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ qt\_api\ \textcolor{keywordflow}{in}\ [\textcolor{stringliteral}{"{}PyQt6"{}},\ \textcolor{stringliteral}{"{}PySide6"{}},\ \textcolor{stringliteral}{"{}PyQt5"{}},\ \textcolor{stringliteral}{"{}PySide2"{}}]}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00317}00317\ \ \ \ \ ]:}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00318}00318\ \ \ \ \ \ \ \ \ reason\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00319}00319\ \ \ \ \ \ \ \ \ missing\ =\ [dep\ \textcolor{keywordflow}{for}\ dep\ \textcolor{keywordflow}{in}\ deps\ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ importlib.util.find\_spec(dep)]}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00320}00320\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sys.platform\ ==\ \textcolor{stringliteral}{"{}linux"{}}\ \textcolor{keywordflow}{and}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00321}00321\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{not}\ \_c\_internal\_utils.display\_is\_valid()):}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00322}00322\ \ \ \ \ \ \ \ \ \ \ \ \ reason\ =\ \textcolor{stringliteral}{"{}\$DISPLAY\ and\ \$WAYLAND\_DISPLAY\ are\ unset"{}}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00323}00323\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ missing:}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00324}00324\ \ \ \ \ \ \ \ \ \ \ \ \ reason\ =\ \textcolor{stringliteral}{"{}\{\}\ cannot\ be\ imported"{}}.format(\textcolor{stringliteral}{"{},\ "{}}.join(missing))}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00325}00325\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ env[\textcolor{stringliteral}{"{}MPLBACKEND"{}}]\ ==\ \textcolor{stringliteral}{'macosx'}\ \textcolor{keywordflow}{and}\ os.environ.get(\textcolor{stringliteral}{'TF\_BUILD'}):}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00326}00326\ \ \ \ \ \ \ \ \ \ \ \ \ reason\ =\ \textcolor{stringliteral}{"{}macosx\ backend\ fails\ on\ Azure"{}}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00327}00327\ \ \ \ \ \ \ \ \ marks\ =\ []}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00328}00328\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ reason:}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00329}00329\ \ \ \ \ \ \ \ \ \ \ \ \ marks.append(pytest.mark.skip(}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00330}00330\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ reason=f\textcolor{stringliteral}{"{}Skipping\ \{env\}\ because\ \{reason\}"{}}))}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00331}00331\ \ \ \ \ \ \ \ \ envs.append(pytest.param(env,\ marks=marks,\ id=str(env)))}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00332}00332\ \ \ \ \ \textcolor{keywordflow}{return}\ envs}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00333}00333\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00334}00334\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00335}00335\ \textcolor{preprocessor}{@pytest.mark.backend('QtAgg',\ skip\_on\_importerror=True)}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00336}00336\ \textcolor{keyword}{def\ }test\_fig\_sigint\_override(qt\_core):}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00337}00337\ \ \ \ \ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacematplotlib_1_1backends_1_1backend__qt5}{matplotlib.backends.backend\_qt5}}\ \textcolor{keyword}{import}\ \_BackendQT5}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00338}00338\ \ \ \ \ \textcolor{comment}{\#\ Create\ a\ figure}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00339}00339\ \ \ \ \ plt.figure()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00340}00340\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00341}00341\ \ \ \ \ \textcolor{comment}{\#\ Variable\ to\ access\ the\ handler\ from\ the\ inside\ of\ the\ event\ loop}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00342}00342\ \ \ \ \ event\_loop\_handler\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00343}00343\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00344}00344\ \ \ \ \ \textcolor{comment}{\#\ Callback\ to\ fire\ during\ event\ loop:\ save\ SIGINT\ handler,\ then\ exit}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00345}00345\ \ \ \ \ \textcolor{keyword}{def\ }fire\_signal\_and\_quit():}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00346}00346\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Save\ event\ loop\ signal}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00347}00347\ \ \ \ \ \ \ \ \ nonlocal\ event\_loop\_handler}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00348}00348\ \ \ \ \ \ \ \ \ event\_loop\_handler\ =\ signal.getsignal(signal.SIGINT)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00349}00349\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00350}00350\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Request\ event\ loop\ exit}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00351}00351\ \ \ \ \ \ \ \ \ qt\_core.QCoreApplication.exit()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00352}00352\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00353}00353\ \ \ \ \ \textcolor{comment}{\#\ Timer\ to\ exit\ event\ loop}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00354}00354\ \ \ \ \ qt\_core.QTimer.singleShot(0,\ fire\_signal\_and\_quit)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00355}00355\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00356}00356\ \ \ \ \ \textcolor{comment}{\#\ Save\ original\ SIGINT\ handler}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00357}00357\ \ \ \ \ original\_handler\ =\ signal.getsignal(signal.SIGINT)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00358}00358\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00359}00359\ \ \ \ \ \textcolor{comment}{\#\ Use\ our\ own\ SIGINT\ handler\ to\ be\ 100\%\ sure\ this\ is\ working}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00360}00360\ \ \ \ \ \textcolor{keyword}{def\ }custom\_handler(signum,\ frame):}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00361}00361\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00362}00362\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00363}00363\ \ \ \ \ signal.signal(signal.SIGINT,\ custom\_handler)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00364}00364\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00365}00365\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00366}00366\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ mainloop()\ sets\ SIGINT,\ starts\ Qt\ event\ loop\ (which\ triggers\ timer}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00367}00367\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ and\ exits)\ and\ then\ mainloop()\ resets\ SIGINT}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00368}00368\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classmatplotlib_1_1backend__bases_1_1__Backend_a06fcee4482ec592c56699c1b8ecf729c}{matplotlib.backends.backend\_qt.\_BackendQT.mainloop}}()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00369}00369\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00370}00370\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Assert:\ signal\ handler\ during\ loop\ execution\ is\ changed}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00371}00371\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ (can't\ test\ equality\ with\ func)}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00372}00372\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ event\_loop\_handler\ !=\ custom\_handler}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00373}00373\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00374}00374\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Assert:\ current\ signal\ handler\ is\ the\ same\ as\ the\ one\ we\ set\ before}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00375}00375\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ signal.getsignal(signal.SIGINT)\ ==\ custom\_handler}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00376}00376\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00377}00377\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Repeat\ again\ to\ test\ that\ SIG\_DFL\ and\ SIG\_IGN\ will\ not\ be\ overridden}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00378}00378\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ custom\_handler\ \textcolor{keywordflow}{in}\ (signal.SIG\_DFL,\ signal.SIG\_IGN):}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00379}00379\ \ \ \ \ \ \ \ \ \ \ \ \ qt\_core.QTimer.singleShot(0,\ fire\_signal\_and\_quit)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00380}00380\ \ \ \ \ \ \ \ \ \ \ \ \ signal.signal(signal.SIGINT,\ custom\_handler)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00381}00381\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00382}00382\ \ \ \ \ \ \ \ \ \ \ \ \ \_BackendQT5.mainloop()}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00383}00383\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00384}00384\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ event\_loop\_handler\ ==\ custom\_handler}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00385}00385\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ signal.getsignal(signal.SIGINT)\ ==\ custom\_handler}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00386}00386\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00387}00387\ \ \ \ \ \textcolor{keywordflow}{finally}:}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00388}00388\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Reset\ SIGINT\ handler\ to\ what\ it\ was\ before\ the\ test}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00389}00389\ \ \ \ \ \ \ \ \ signal.signal(signal.SIGINT,\ original\_handler)}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00390}00390\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00391}00391\ }
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00392}00392\ \textcolor{preprocessor}{@pytest.mark.backend('QtAgg',\ skip\_on\_importerror=True)}}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00393}00393\ \textcolor{keyword}{def\ }test\_ipython():}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00394}00394\ \ \ \ \ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacematplotlib_1_1testing}{matplotlib.testing}}\ \textcolor{keyword}{import}\ ipython\_in\_subprocess}
\DoxyCodeLine{\Hypertarget{test__backend__qt_8py_source_l00395}00395\ \ \ \ \ ipython\_in\_subprocess(\textcolor{stringliteral}{"{}qt"{}},\ \{(8,\ 24):\ \textcolor{stringliteral}{"{}qtagg"{}},\ (8,\ 15):\ \textcolor{stringliteral}{"{}QtAgg"{}},\ (7,\ 0):\ \textcolor{stringliteral}{"{}Qt5Agg"{}}\})}

\end{DoxyCode}
