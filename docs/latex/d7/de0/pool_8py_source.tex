\doxysection{pool.\+py}
\hypertarget{pool_8py_source}{}\label{pool_8py_source}\index{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/joblib/pool.py@{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/joblib/pool.py}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00001}\mbox{\hyperlink{namespacejoblib_1_1pool}{00001}}\ \textcolor{stringliteral}{"{}"{}"{}Custom\ implementation\ of\ multiprocessing.Pool\ with\ custom\ pickler.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00002}00002\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00003}00003\ \textcolor{stringliteral}{This\ module\ provides\ efficient\ ways\ of\ working\ with\ data\ stored\ in}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00004}00004\ \textcolor{stringliteral}{shared\ memory\ with\ numpy.memmap\ arrays\ without\ inducing\ any\ memory}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00005}00005\ \textcolor{stringliteral}{copy\ between\ the\ parent\ and\ child\ processes.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00006}00006\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00007}00007\ \textcolor{stringliteral}{This\ module\ should\ not\ be\ imported\ if\ multiprocessing\ is\ not}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00008}00008\ \textcolor{stringliteral}{available\ as\ it\ implements\ subclasses\ of\ multiprocessing\ Pool}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00009}00009\ \textcolor{stringliteral}{that\ uses\ a\ custom\ alternative\ to\ SimpleQueue.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00010}00010\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00011}00011\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00012}00012\ \textcolor{comment}{\#\ Author:\ Olivier\ Grisel\ <olivier.grisel@ensta.org>}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00013}00013\ \textcolor{comment}{\#\ Copyright:\ 2012,\ Olivier\ Grisel}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00014}00014\ \textcolor{comment}{\#\ License:\ BSD\ 3\ clause}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00015}00015\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00016}00016\ \textcolor{keyword}{import}\ copyreg}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00017}00017\ \textcolor{keyword}{import}\ sys}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00018}00018\ \textcolor{keyword}{import}\ warnings}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00019}00019\ \textcolor{keyword}{from}\ time\ \textcolor{keyword}{import}\ sleep}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00020}00020\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00021}00021\ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00022}00022\ \ \ \ \ WindowsError}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00023}00023\ \textcolor{keywordflow}{except}\ NameError:}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00024}00024\ \ \ \ \ WindowsError\ =\ type(\textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00025}00025\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00026}00026\ \textcolor{keyword}{from}\ io\ \textcolor{keyword}{import}\ BytesIO}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00027}00027\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00028}00028\ \textcolor{comment}{\#\ We\ need\ the\ class\ definition\ to\ derive\ from\ it,\ not\ the\ multiprocessing.Pool}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00029}00029\ \textcolor{comment}{\#\ factory\ function}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00030}00030\ \textcolor{keyword}{from}\ multiprocessing.pool\ \textcolor{keyword}{import}\ Pool}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00031}00031\ \textcolor{keyword}{from}\ pickle\ \textcolor{keyword}{import}\ HIGHEST\_PROTOCOL,\ Pickler}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00032}00032\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00033}00033\ \textcolor{keyword}{from}\ .\_memmapping\_reducer\ \textcolor{keyword}{import}\ TemporaryResourcesManager,\ get\_memmapping\_reducers}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00034}00034\ \textcolor{keyword}{from}\ .\_multiprocessing\_helpers\ \textcolor{keyword}{import}\ assert\_spawning,\ mp}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00035}00035\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00036}00036\ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00037}00037\ \ \ \ \ \textcolor{keyword}{import}\ numpy\ \textcolor{keyword}{as}\ np}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00038}00038\ \textcolor{keywordflow}{except}\ ImportError:}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00039}00039\ \ \ \ \ np\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00040}00040\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00041}00041\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00044}00044\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00045}00045\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00046}\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePickler}{00046}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePickler}{CustomizablePickler}}(\mbox{\hyperlink{classPickler}{Pickler}}):}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00047}00047\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Pickler\ that\ accepts\ custom\ reducers.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00048}00048\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00049}00049\ \textcolor{stringliteral}{\ \ \ \ TODO\ python2\_drop\ :\ can\ this\ be\ simplified\ ?}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00050}00050\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00051}00051\ \textcolor{stringliteral}{\ \ \ \ HIGHEST\_PROTOCOL\ is\ selected\ by\ default\ as\ this\ pickler\ is\ used}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00052}00052\ \textcolor{stringliteral}{\ \ \ \ to\ pickle\ ephemeral\ datastructures\ for\ interprocess\ communication}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00053}00053\ \textcolor{stringliteral}{\ \ \ \ hence\ no\ backward\ compatibility\ is\ required.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00054}00054\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00055}00055\ \textcolor{stringliteral}{\ \ \ \ \`{}reducers\`{}\ is\ expected\ to\ be\ a\ dictionary\ with\ key/values}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00056}00056\ \textcolor{stringliteral}{\ \ \ \ being\ \`{}(type,\ callable)\`{}\ pairs\ where\ \`{}callable\`{}\ is\ a\ function\ that}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00057}00057\ \textcolor{stringliteral}{\ \ \ \ give\ an\ instance\ of\ \`{}type\`{}\ will\ return\ a\ tuple\ \`{}(constructor,}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00058}00058\ \textcolor{stringliteral}{\ \ \ \ tuple\_of\_objects)\`{}\ to\ rebuild\ an\ instance\ out\ of\ the\ pickled}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00059}00059\ \textcolor{stringliteral}{\ \ \ \ \`{}tuple\_of\_objects\`{}\ as\ would\ return\ a\ \`{}\_\_reduce\_\_\`{}\ method.\ See\ the}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00060}00060\ \textcolor{stringliteral}{\ \ \ \ standard\ library\ documentation\ on\ pickling\ for\ more\ details.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00061}00061\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00062}00062\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00063}00063\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00064}00064\ \ \ \ \ \textcolor{comment}{\#\ We\ override\ the\ pure\ Python\ pickler\ as\ its\ the\ only\ way\ to\ be\ able\ to}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00065}00065\ \ \ \ \ \textcolor{comment}{\#\ customize\ the\ dispatch\ table\ without\ side\ effects\ in\ Python\ 2.7}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00066}00066\ \ \ \ \ \textcolor{comment}{\#\ to\ 3.2.\ For\ Python\ 3.3+\ leverage\ the\ new\ dispatch\_table}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00067}00067\ \ \ \ \ \textcolor{comment}{\#\ feature\ from\ https://bugs.python.org/issue14166\ that\ makes\ it\ possible}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00068}00068\ \ \ \ \ \textcolor{comment}{\#\ to\ use\ the\ C\ implementation\ of\ the\ Pickler\ which\ is\ faster.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00069}00069\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00070}00070\ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self,\ writer,\ reducers=None,\ protocol=HIGHEST\_PROTOCOL):}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00071}00071\ \ \ \ \ \ \ \ \ Pickler.\_\_init\_\_(self,\ writer,\ protocol=protocol)}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00072}00072\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ reducers\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00073}00073\ \ \ \ \ \ \ \ \ \ \ \ \ reducers\ =\ \{\}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00074}00074\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ hasattr(Pickler,\ \textcolor{stringliteral}{"{}dispatch"{}}):}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00075}00075\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Make\ the\ dispatch\ registry\ an\ instance\ level\ attribute\ instead\ of}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00076}00076\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ a\ reference\ to\ the\ class\ dictionary\ under\ Python\ 2}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00077}00077\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePickler_a1d38133d37070610a33abdbf8e3da1d0}{dispatch}}\ =\ Pickler.dispatch.copy()}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00078}00078\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00079}00079\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Under\ Python\ 3\ initialize\ the\ dispatch\ table\ with\ a\ copy\ of\ the}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00080}00080\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ default\ registry}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00081}00081\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePickler_a518e614d645974b96016ea993289c134}{dispatch\_table}}\ =\ copyreg.dispatch\_table.copy()}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00082}00082\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ type,\ reduce\_func\ \textcolor{keywordflow}{in}\ reducers.items():}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00083}00083\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePickler_a50b9c90b9b4a3d608cbddb55a970de81}{register}}(type,\ reduce\_func)}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00084}00084\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00085}\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePickler_a50b9c90b9b4a3d608cbddb55a970de81}{00085}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePickler_a50b9c90b9b4a3d608cbddb55a970de81}{register}}(self,\ type,\ reduce\_func):}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00086}00086\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Attach\ a\ reducer\ function\ to\ a\ given\ type\ in\ the\ dispatch\ table."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00087}00087\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ hasattr(Pickler,\ \textcolor{stringliteral}{"{}dispatch"{}}):}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00088}00088\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Python\ 2\ pickler\ dispatching\ is\ not\ explicitly\ customizable.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00089}00089\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Let\ us\ use\ a\ closure\ to\ workaround\ this\ limitation.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00090}00090\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }dispatcher(self,\ obj):}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00091}00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ reduced\ =\ reduce\_func(obj)}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00092}00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.save\_reduce(obj=obj,\ *reduced)}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00093}00093\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00094}00094\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePickler_a1d38133d37070610a33abdbf8e3da1d0}{dispatch}}[type]\ =\ dispatcher}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00095}00095\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00096}00096\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePickler_a518e614d645974b96016ea993289c134}{dispatch\_table}}[type]\ =\ reduce\_func}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00097}00097\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00098}00098\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00099}\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue}{00099}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue}{CustomizablePicklingQueue}}(object):}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00100}00100\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Locked\ Pipe\ implementation\ that\ uses\ a\ customizable\ pickler.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00101}00101\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00102}00102\ \textcolor{stringliteral}{\ \ \ \ This\ class\ is\ an\ alternative\ to\ the\ multiprocessing\ implementation}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00103}00103\ \textcolor{stringliteral}{\ \ \ \ of\ SimpleQueue\ in\ order\ to\ make\ it\ possible\ to\ pass\ custom}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00104}00104\ \textcolor{stringliteral}{\ \ \ \ pickling\ reducers,\ for\ instance\ to\ avoid\ memory\ copy\ when\ passing}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00105}00105\ \textcolor{stringliteral}{\ \ \ \ memory\ mapped\ datastructures.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00106}00106\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00107}00107\ \textcolor{stringliteral}{\ \ \ \ \`{}reducers\`{}\ is\ expected\ to\ be\ a\ dict\ with\ key\ /\ values\ being}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00108}00108\ \textcolor{stringliteral}{\ \ \ \ \`{}(type,\ callable)\`{}\ pairs\ where\ \`{}callable\`{}\ is\ a\ function\ that,\ given\ an}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00109}00109\ \textcolor{stringliteral}{\ \ \ \ instance\ of\ \`{}type\`{},\ will\ return\ a\ tuple\ \`{}(constructor,\ tuple\_of\_objects)\`{}}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00110}00110\ \textcolor{stringliteral}{\ \ \ \ to\ rebuild\ an\ instance\ out\ of\ the\ pickled\ \`{}tuple\_of\_objects\`{}\ as\ would}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00111}00111\ \textcolor{stringliteral}{\ \ \ \ return\ a\ \`{}\_\_reduce\_\_\`{}\ method.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00112}00112\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00113}00113\ \textcolor{stringliteral}{\ \ \ \ See\ the\ standard\ library\ documentation\ on\ pickling\ for\ more\ details.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00114}00114\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00115}00115\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00116}00116\ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self,\ context,\ reducers=None):}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00117}00117\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a5eee6e82b3dfe8940fd72267e6d8d472}{\_reducers}}\ =\ reducers}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00118}00118\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a0e2d02da59b990d202037b7af9ac75d3}{\_reader}},\ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a5ae55645b0d638da1b6f0e0935c50692}{\_writer}}\ =\ context.Pipe(duplex=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00119}00119\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a8e8eb366795ccde39bb8596f960599e7}{\_rlock}}\ =\ context.Lock()}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00120}00120\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ sys.platform\ ==\ \textcolor{stringliteral}{"{}win32"{}}:}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00121}00121\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a7544fefd38484aba281721bda291c675}{\_wlock}}\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00122}00122\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00123}00123\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a7544fefd38484aba281721bda291c675}{\_wlock}}\ =\ context.Lock()}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00124}00124\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a6405eec6b53e5f8f15f3970b9abbeba9}{\_make\_methods}}()}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00125}00125\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00126}00126\ \ \ \ \ \textcolor{keyword}{def\ }\_\_getstate\_\_(self):}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00127}00127\ \ \ \ \ \ \ \ \ assert\_spawning(self)}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00128}00128\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a0e2d02da59b990d202037b7af9ac75d3}{\_reader}},\ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a5ae55645b0d638da1b6f0e0935c50692}{\_writer}},\ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a8e8eb366795ccde39bb8596f960599e7}{\_rlock}},\ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a7544fefd38484aba281721bda291c675}{\_wlock}},\ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a5eee6e82b3dfe8940fd72267e6d8d472}{\_reducers}})}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00129}00129\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00130}00130\ \ \ \ \ \textcolor{keyword}{def\ }\_\_setstate\_\_(self,\ state):}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00131}00131\ \ \ \ \ \ \ \ \ (self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a0e2d02da59b990d202037b7af9ac75d3}{\_reader}},\ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a5ae55645b0d638da1b6f0e0935c50692}{\_writer}},\ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a8e8eb366795ccde39bb8596f960599e7}{\_rlock}},\ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a7544fefd38484aba281721bda291c675}{\_wlock}},\ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a5eee6e82b3dfe8940fd72267e6d8d472}{\_reducers}})\ =\ state}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00132}00132\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a6405eec6b53e5f8f15f3970b9abbeba9}{\_make\_methods}}()}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00133}00133\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00134}00134\ \ \ \ \ \textcolor{keyword}{def\ }empty(self):}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00135}00135\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keywordflow}{not}\ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a0e2d02da59b990d202037b7af9ac75d3}{\_reader}}.poll()}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00136}00136\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00137}00137\ \ \ \ \ \textcolor{keyword}{def\ }\_make\_methods(self):}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00138}00138\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a3a62e3d43e46994694bd2ae899dd2d72}{\_recv}}\ =\ recv\ =\ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a0e2d02da59b990d202037b7af9ac75d3}{\_reader}}.recv}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00139}00139\ \ \ \ \ \ \ \ \ racquire,\ rrelease\ =\ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a8e8eb366795ccde39bb8596f960599e7}{\_rlock}}.acquire,\ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a8e8eb366795ccde39bb8596f960599e7}{\_rlock}}.release}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00140}00140\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00141}00141\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }get():}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00142}00142\ \ \ \ \ \ \ \ \ \ \ \ \ racquire()}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00143}00143\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00144}00144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ recv()}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00145}00145\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{finally}:}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00146}00146\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rrelease()}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00147}00147\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00148}00148\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a99df4209d2682ef41632bfa734aae48c}{get}}\ =\ get}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00149}00149\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00150}00150\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a5eee6e82b3dfe8940fd72267e6d8d472}{\_reducers}}:}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00151}00151\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00152}00152\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }send(obj):}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00153}00153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ buffer\ =\ \mbox{\hyperlink{classBytesIO}{BytesIO}}()}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00154}00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePickler}{CustomizablePickler}}(buffer,\ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a5eee6e82b3dfe8940fd72267e6d8d472}{\_reducers}}).dump(obj)}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00155}00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a5ae55645b0d638da1b6f0e0935c50692}{\_writer}}.send\_bytes(buffer.getvalue())}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00156}00156\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00157}00157\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a43472c578cbeb54815df89498c2cc8da}{\_send}}\ =\ send}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00158}00158\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00159}00159\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a43472c578cbeb54815df89498c2cc8da}{\_send}}\ =\ send\ =\ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a5ae55645b0d638da1b6f0e0935c50692}{\_writer}}.send}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00160}00160\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a7544fefd38484aba281721bda291c675}{\_wlock}}\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00161}00161\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ writes\ to\ a\ message\ oriented\ win32\ pipe\ are\ atomic}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00162}00162\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_afb2a7380591419efbd5dddc624461fb5}{put}}\ =\ send}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00163}00163\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00164}00164\ \ \ \ \ \ \ \ \ \ \ \ \ wlock\_acquire,\ wlock\_release\ =\ (self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a7544fefd38484aba281721bda291c675}{\_wlock}}.acquire,\ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_a7544fefd38484aba281721bda291c675}{\_wlock}}.release)}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00165}00165\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00166}00166\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }put(obj):}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00167}00167\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ wlock\_acquire()}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00168}00168\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00169}00169\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ send(obj)}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00170}00170\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{finally}:}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00171}00171\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ wlock\_release()}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00172}00172\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00173}00173\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue_afb2a7380591419efbd5dddc624461fb5}{put}}\ =\ put}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00174}00174\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00175}00175\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00176}\mbox{\hyperlink{classjoblib_1_1pool_1_1PicklingPool}{00176}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classjoblib_1_1pool_1_1PicklingPool}{PicklingPool}}(\mbox{\hyperlink{classPool}{Pool}}):}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00177}00177\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Pool\ implementation\ with\ customizable\ pickling\ reducers.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00178}00178\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00179}00179\ \textcolor{stringliteral}{\ \ \ \ This\ is\ useful\ to\ control\ how\ data\ is\ shipped\ between\ processes}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00180}00180\ \textcolor{stringliteral}{\ \ \ \ and\ makes\ it\ possible\ to\ use\ shared\ memory\ without\ useless}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00181}00181\ \textcolor{stringliteral}{\ \ \ \ copies\ induces\ by\ the\ default\ pickling\ methods\ of\ the\ original}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00182}00182\ \textcolor{stringliteral}{\ \ \ \ objects\ passed\ as\ arguments\ to\ dispatch.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00183}00183\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00184}00184\ \textcolor{stringliteral}{\ \ \ \ \`{}forward\_reducers\`{}\ and\ \`{}backward\_reducers\`{}\ are\ expected\ to\ be}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00185}00185\ \textcolor{stringliteral}{\ \ \ \ dictionaries\ with\ key/values\ being\ \`{}(type,\ callable)\`{}\ pairs\ where}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00186}00186\ \textcolor{stringliteral}{\ \ \ \ \`{}callable\`{}\ is\ a\ function\ that,\ given\ an\ instance\ of\ \`{}type\`{},\ will\ return\ a}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00187}00187\ \textcolor{stringliteral}{\ \ \ \ tuple\ \`{}(constructor,\ tuple\_of\_objects)\`{}\ to\ rebuild\ an\ instance\ out\ of\ the}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00188}00188\ \textcolor{stringliteral}{\ \ \ \ pickled\ \`{}tuple\_of\_objects\`{}\ as\ would\ return\ a\ \`{}\_\_reduce\_\_\`{}\ method.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00189}00189\ \textcolor{stringliteral}{\ \ \ \ See\ the\ standard\ library\ documentation\ about\ pickling\ for\ more\ details.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00190}00190\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00191}00191\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00192}00192\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00193}00193\ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00194}00194\ \ \ \ \ \ \ \ \ self,\ processes=None,\ forward\_reducers=None,\ backward\_reducers=None,\ **kwargs}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00195}00195\ \ \ \ \ ):}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00196}00196\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ forward\_reducers\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00197}00197\ \ \ \ \ \ \ \ \ \ \ \ \ forward\_reducers\ =\ dict()}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00198}00198\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ backward\_reducers\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00199}00199\ \ \ \ \ \ \ \ \ \ \ \ \ backward\_reducers\ =\ dict()}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00200}00200\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1PicklingPool_a153aee6e25e14aff7673df3a6e1ffa26}{\_forward\_reducers}}\ =\ forward\_reducers}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00201}00201\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1PicklingPool_a7662da73a97266fdc4a4836ef7fb2927}{\_backward\_reducers}}\ =\ backward\_reducers}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00202}00202\ \ \ \ \ \ \ \ \ poolargs\ =\ dict(processes=processes)}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00203}00203\ \ \ \ \ \ \ \ \ poolargs.update(kwargs)}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00204}00204\ \ \ \ \ \ \ \ \ super(PicklingPool,\ self).\_\_init\_\_(**poolargs)}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00205}00205\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00206}00206\ \ \ \ \ \textcolor{keyword}{def\ }\_setup\_queues(self):}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00207}00207\ \ \ \ \ \ \ \ \ context\ =\ getattr(self,\ \textcolor{stringliteral}{"{}\_ctx"{}},\ mp)}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00208}00208\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1PicklingPool_a1dd38de709ca4eb36d11a299a64e5392}{\_inqueue}}\ =\ \mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue}{CustomizablePicklingQueue}}(context,\ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1PicklingPool_a153aee6e25e14aff7673df3a6e1ffa26}{\_forward\_reducers}})}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00209}00209\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1PicklingPool_a5c712855b469ec7b9a7c9e6b39223a40}{\_outqueue}}\ =\ \mbox{\hyperlink{classjoblib_1_1pool_1_1CustomizablePicklingQueue}{CustomizablePicklingQueue}}(context,\ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1PicklingPool_a7662da73a97266fdc4a4836ef7fb2927}{\_backward\_reducers}})}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00210}00210\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1PicklingPool_a6fbdc854d325261b43769ebae9776ebe}{\_quick\_put}}\ =\ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1PicklingPool_a1dd38de709ca4eb36d11a299a64e5392}{\_inqueue}}.\_send}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00211}00211\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1PicklingPool_a83f1ae82fb2bb9ff896565368b3399b2}{\_quick\_get}}\ =\ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1PicklingPool_a5c712855b469ec7b9a7c9e6b39223a40}{\_outqueue}}.\_recv}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00212}00212\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00213}00213\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00214}\mbox{\hyperlink{classjoblib_1_1pool_1_1MemmappingPool}{00214}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classjoblib_1_1pool_1_1MemmappingPool}{MemmappingPool}}(\mbox{\hyperlink{classjoblib_1_1pool_1_1PicklingPool}{PicklingPool}}):}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00215}00215\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Process\ pool\ that\ shares\ large\ arrays\ to\ avoid\ memory\ copy.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00216}00216\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00217}00217\ \textcolor{stringliteral}{\ \ \ \ This\ drop-\/in\ replacement\ for\ \`{}multiprocessing.pool.Pool\`{}\ makes}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00218}00218\ \textcolor{stringliteral}{\ \ \ \ it\ possible\ to\ work\ efficiently\ with\ shared\ memory\ in\ a\ numpy}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00219}00219\ \textcolor{stringliteral}{\ \ \ \ context.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00220}00220\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00221}00221\ \textcolor{stringliteral}{\ \ \ \ Existing\ instances\ of\ numpy.memmap\ are\ preserved:\ the\ child}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00222}00222\ \textcolor{stringliteral}{\ \ \ \ suprocesses\ will\ have\ access\ to\ the\ same\ shared\ memory\ in\ the}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00223}00223\ \textcolor{stringliteral}{\ \ \ \ original\ mode\ except\ for\ the\ 'w+'\ mode\ that\ is\ automatically}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00224}00224\ \textcolor{stringliteral}{\ \ \ \ transformed\ as\ 'r+'\ to\ avoid\ zeroing\ the\ original\ data\ upon}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00225}00225\ \textcolor{stringliteral}{\ \ \ \ instantiation.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00226}00226\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00227}00227\ \textcolor{stringliteral}{\ \ \ \ Furthermore\ large\ arrays\ from\ the\ parent\ process\ are\ automatically}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00228}00228\ \textcolor{stringliteral}{\ \ \ \ dumped\ to\ a\ temporary\ folder\ on\ the\ filesystem\ such\ as\ child}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00229}00229\ \textcolor{stringliteral}{\ \ \ \ processes\ to\ access\ their\ content\ via\ memmapping\ (file\ system}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00230}00230\ \textcolor{stringliteral}{\ \ \ \ backed\ shared\ memory).}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00231}00231\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00232}00232\ \textcolor{stringliteral}{\ \ \ \ Note:\ it\ is\ important\ to\ call\ the\ terminate\ method\ to\ collect}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00233}00233\ \textcolor{stringliteral}{\ \ \ \ the\ temporary\ folder\ used\ by\ the\ pool.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00234}00234\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00235}00235\ \textcolor{stringliteral}{\ \ \ \ Parameters}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00236}00236\ \textcolor{stringliteral}{\ \ \ \ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00237}00237\ \textcolor{stringliteral}{\ \ \ \ processes:\ int,\ optional}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00238}00238\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Number\ of\ worker\ processes\ running\ concurrently\ in\ the\ pool.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00239}00239\ \textcolor{stringliteral}{\ \ \ \ initializer:\ callable,\ optional}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00240}00240\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Callable\ executed\ on\ worker\ process\ creation.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00241}00241\ \textcolor{stringliteral}{\ \ \ \ initargs:\ tuple,\ optional}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00242}00242\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Arguments\ passed\ to\ the\ initializer\ callable.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00243}00243\ \textcolor{stringliteral}{\ \ \ \ temp\_folder:\ (str,\ callable)\ optional}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00244}00244\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ If\ str:}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00245}00245\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ Folder\ to\ be\ used\ by\ the\ pool\ for\ memmapping\ large\ arrays}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00246}00246\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ for\ sharing\ memory\ with\ worker\ processes.\ If\ None,\ this\ will\ try\ in}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00247}00247\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ order:}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00248}00248\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ -\/\ a\ folder\ pointed\ by\ the\ JOBLIB\_TEMP\_FOLDER\ environment\ variable,}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00249}00249\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ -\/\ /dev/shm\ if\ the\ folder\ exists\ and\ is\ writable:\ this\ is\ a\ RAMdisk}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00250}00250\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ filesystem\ available\ by\ default\ on\ modern\ Linux\ distributions,}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00251}00251\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ -\/\ the\ default\ system\ temporary\ folder\ that\ can\ be\ overridden}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00252}00252\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ with\ TMP,\ TMPDIR\ or\ TEMP\ environment\ variables,\ typically\ /tmp}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00253}00253\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ under\ Unix\ operating\ systems.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00254}00254\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ if\ callable:}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00255}00255\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ An\ callable\ in\ charge\ of\ dynamically\ resolving\ a\ temporary\ folder}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00256}00256\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ for\ memmapping\ large\ arrays.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00257}00257\ \textcolor{stringliteral}{\ \ \ \ max\_nbytes\ int\ or\ None,\ optional,\ 1e6\ by\ default}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00258}00258\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Threshold\ on\ the\ size\ of\ arrays\ passed\ to\ the\ workers\ that}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00259}00259\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ triggers\ automated\ memory\ mapping\ in\ temp\_folder.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00260}00260\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Use\ None\ to\ disable\ memmapping\ of\ large\ arrays.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00261}00261\ \textcolor{stringliteral}{\ \ \ \ mmap\_mode:\ \{'r+',\ 'r',\ 'w+',\ 'c'\}}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00262}00262\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Memmapping\ mode\ for\ numpy\ arrays\ passed\ to\ workers.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00263}00263\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ See\ 'max\_nbytes'\ parameter\ documentation\ for\ more\ details.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00264}00264\ \textcolor{stringliteral}{\ \ \ \ forward\_reducers:\ dictionary,\ optional}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00265}00265\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Reducers\ used\ to\ pickle\ objects\ passed\ from\ main\ process\ to\ worker}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00266}00266\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ processes:\ see\ below.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00267}00267\ \textcolor{stringliteral}{\ \ \ \ backward\_reducers:\ dictionary,\ optional}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00268}00268\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Reducers\ used\ to\ pickle\ return\ values\ from\ workers\ back\ to\ the}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00269}00269\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ main\ process.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00270}00270\ \textcolor{stringliteral}{\ \ \ \ verbose:\ int,\ optional}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00271}00271\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Make\ it\ possible\ to\ monitor\ how\ the\ communication\ of\ numpy\ arrays}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00272}00272\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ with\ the\ subprocess\ is\ handled\ (pickling\ or\ memmapping)}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00273}00273\ \textcolor{stringliteral}{\ \ \ \ prewarm:\ bool\ or\ str,\ optional,\ "{}auto"{}\ by\ default.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00274}00274\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ If\ True,\ force\ a\ read\ on\ newly\ memmapped\ array\ to\ make\ sure\ that\ OS}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00275}00275\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ pre-\/cache\ it\ in\ memory.\ This\ can\ be\ useful\ to\ avoid\ concurrent\ disk}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00276}00276\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ access\ when\ the\ same\ data\ array\ is\ passed\ to\ different\ worker}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00277}00277\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ processes.\ If\ "{}auto"{}\ (by\ default),\ prewarm\ is\ set\ to\ True,\ unless\ the}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00278}00278\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Linux\ shared\ memory\ partition\ /dev/shm\ is\ available\ and\ used\ as\ temp}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00279}00279\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ folder.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00280}00280\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00281}00281\ \textcolor{stringliteral}{\ \ \ \ \`{}forward\_reducers\`{}\ and\ \`{}backward\_reducers\`{}\ are\ expected\ to\ be}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00282}00282\ \textcolor{stringliteral}{\ \ \ \ dictionaries\ with\ key/values\ being\ \`{}(type,\ callable)\`{}\ pairs\ where}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00283}00283\ \textcolor{stringliteral}{\ \ \ \ \`{}callable\`{}\ is\ a\ function\ that\ give\ an\ instance\ of\ \`{}type\`{}\ will\ return}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00284}00284\ \textcolor{stringliteral}{\ \ \ \ a\ tuple\ \`{}(constructor,\ tuple\_of\_objects)\`{}\ to\ rebuild\ an\ instance\ out}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00285}00285\ \textcolor{stringliteral}{\ \ \ \ of\ the\ pickled\ \`{}tuple\_of\_objects\`{}\ as\ would\ return\ a\ \`{}\_\_reduce\_\_\`{}}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00286}00286\ \textcolor{stringliteral}{\ \ \ \ method.\ See\ the\ standard\ library\ documentation\ on\ pickling\ for\ more}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00287}00287\ \textcolor{stringliteral}{\ \ \ \ details.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00288}00288\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00289}00289\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00290}00290\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00291}00291\ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00292}00292\ \ \ \ \ \ \ \ \ self,}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00293}00293\ \ \ \ \ \ \ \ \ processes=None,}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00294}00294\ \ \ \ \ \ \ \ \ temp\_folder=None,}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00295}00295\ \ \ \ \ \ \ \ \ max\_nbytes=1e6,}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00296}00296\ \ \ \ \ \ \ \ \ mmap\_mode="{}r"{},}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00297}00297\ \ \ \ \ \ \ \ \ forward\_reducers=None,}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00298}00298\ \ \ \ \ \ \ \ \ backward\_reducers=None,}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00299}00299\ \ \ \ \ \ \ \ \ verbose=0,}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00300}00300\ \ \ \ \ \ \ \ \ prewarm=False,}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00301}00301\ \ \ \ \ \ \ \ \ **kwargs,}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00302}00302\ \ \ \ \ ):}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00303}00303\ \ \ \ \ \ \ \ \ manager\ =\ \mbox{\hyperlink{classjoblib_1_1__memmapping__reducer_1_1TemporaryResourcesManager}{TemporaryResourcesManager}}(temp\_folder)}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00304}00304\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1MemmappingPool_a07861014ca18f2e8b6e94343e764e3b8}{\_temp\_folder\_manager}}\ =\ manager}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00305}00305\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00306}00306\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ usage\ of\ a\ temp\_folder\_resolver\ over\ a\ simple\ temp\_folder\ is}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00307}00307\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ superfluous\ for\ multiprocessing\ pools,\ as\ they\ don't\ get\ reused,\ see}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00308}00308\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ get\_memmapping\_executor\ for\ more\ details.\ We\ still\ use\ it\ for\ code}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00309}00309\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ simplicity.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00310}00310\ \ \ \ \ \ \ \ \ forward\_reducers,\ backward\_reducers\ =\ get\_memmapping\_reducers(}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00311}00311\ \ \ \ \ \ \ \ \ \ \ \ \ temp\_folder\_resolver=manager.resolve\_temp\_folder\_name,}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00312}00312\ \ \ \ \ \ \ \ \ \ \ \ \ max\_nbytes=max\_nbytes,}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00313}00313\ \ \ \ \ \ \ \ \ \ \ \ \ mmap\_mode=mmap\_mode,}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00314}00314\ \ \ \ \ \ \ \ \ \ \ \ \ forward\_reducers=forward\_reducers,}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00315}00315\ \ \ \ \ \ \ \ \ \ \ \ \ backward\_reducers=backward\_reducers,}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00316}00316\ \ \ \ \ \ \ \ \ \ \ \ \ verbose=verbose,}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00317}00317\ \ \ \ \ \ \ \ \ \ \ \ \ unlink\_on\_gc\_collect=\textcolor{keyword}{False},}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00318}00318\ \ \ \ \ \ \ \ \ \ \ \ \ prewarm=prewarm,}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00319}00319\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00320}00320\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00321}00321\ \ \ \ \ \ \ \ \ poolargs\ =\ dict(}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00322}00322\ \ \ \ \ \ \ \ \ \ \ \ \ processes=processes,}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00323}00323\ \ \ \ \ \ \ \ \ \ \ \ \ forward\_reducers=forward\_reducers,}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00324}00324\ \ \ \ \ \ \ \ \ \ \ \ \ backward\_reducers=backward\_reducers,}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00325}00325\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00326}00326\ \ \ \ \ \ \ \ \ poolargs.update(kwargs)}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00327}00327\ \ \ \ \ \ \ \ \ super(MemmappingPool,\ self).\_\_init\_\_(**poolargs)}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00328}00328\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00329}00329\ \ \ \ \ \textcolor{keyword}{def\ }terminate(self):}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00330}00330\ \ \ \ \ \ \ \ \ n\_retries\ =\ 10}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00331}00331\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(n\_retries):}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00332}00332\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00333}00333\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ super(MemmappingPool,\ self).terminate()}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00334}00334\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00335}00335\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ OSError\ \textcolor{keyword}{as}\ e:}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00336}00336\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ isinstance(e,\ WindowsError):}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00337}00337\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Workaround\ \ occasional\ "{}[Error\ 5]\ Access\ is\ denied"{}\ issue}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00338}00338\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ when\ trying\ to\ terminate\ a\ process\ under\ windows.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00339}00339\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sleep(0.1)}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00340}00340\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ i\ +\ 1\ ==\ n\_retries:}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00341}00341\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ warnings.warn(}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00342}00342\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Failed\ to\ terminate\ worker\ processes\ in"{}}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00343}00343\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ multiprocessing\ pool:\ \%r"{}}\ \%\ e}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00344}00344\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00345}00345\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00346}00346\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Clean\ up\ the\ temporary\ resources\ as\ the\ workers\ should\ now\ be\ off.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00347}00347\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1MemmappingPool_a07861014ca18f2e8b6e94343e764e3b8}{\_temp\_folder\_manager}}.\_clean\_temporary\_resources()}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00348}00348\ }
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00349}00349\ \ \ \ \ \textcolor{preprocessor}{@property}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00350}00350\ \ \ \ \ \textcolor{keyword}{def\ }\_temp\_folder(self):}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00351}00351\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Legacy\ property\ in\ tests.\ could\ be\ removed\ if\ we\ refactored\ the}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00352}00352\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ memmapping\ tests.\ SHOULD\ ONLY\ BE\ USED\ IN\ TESTS!}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00353}00353\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ We\ cache\ this\ property\ because\ it\ is\ called\ late\ in\ the\ tests\ -\/\ at}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00354}00354\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ this\ point,\ all\ context\ have\ been\ unregistered,\ and}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00355}00355\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ resolve\_temp\_folder\_name\ raises\ an\ error.}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00356}00356\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ getattr(self,\ \textcolor{stringliteral}{"{}\_cached\_temp\_folder"{}},\ \textcolor{keywordtype}{None})\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00357}00357\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1MemmappingPool_a537e290b7441c91c5b7155ed07c05edd}{\_cached\_temp\_folder}}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00358}00358\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00359}00359\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1MemmappingPool_a537e290b7441c91c5b7155ed07c05edd}{\_cached\_temp\_folder}}\ =\ (}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00360}00360\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1MemmappingPool_a07861014ca18f2e8b6e94343e764e3b8}{\_temp\_folder\_manager}}.resolve\_temp\_folder\_name()}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00361}00361\ \ \ \ \ \ \ \ \ \ \ \ \ )\ \ \textcolor{comment}{\#\ noqa}}
\DoxyCodeLine{\Hypertarget{pool_8py_source_l00362}00362\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self.\mbox{\hyperlink{classjoblib_1_1pool_1_1MemmappingPool_a537e290b7441c91c5b7155ed07c05edd}{\_cached\_temp\_folder}}}

\end{DoxyCode}
