\doxysection{test\+\_\+common.\+py}
\hypertarget{pandas_2tests_2io_2test__common_8py_source}{}\label{pandas_2tests_2io_2test__common_8py_source}\index{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/pandas/tests/io/test\_common.py@{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/pandas/tests/io/test\_common.py}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00001}\mbox{\hyperlink{namespacepandas_1_1tests_1_1io_1_1test__common}{00001}}\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00002}00002\ \textcolor{stringliteral}{Tests\ for\ the\ pandas.io.common\ functionalities}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00003}00003\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00004}00004\ \textcolor{keyword}{import}\ codecs}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00005}00005\ \textcolor{keyword}{import}\ errno}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00006}00006\ \textcolor{keyword}{from}\ functools\ \textcolor{keyword}{import}\ partial}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00007}00007\ \textcolor{keyword}{from}\ io\ \textcolor{keyword}{import}\ (}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00008}00008\ \ \ \ \ BytesIO,}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00009}00009\ \ \ \ \ StringIO,}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00010}00010\ \ \ \ \ UnsupportedOperation,}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00011}00011\ )}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00012}00012\ \textcolor{keyword}{import}\ mmap}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00013}00013\ \textcolor{keyword}{import}\ os}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00014}00014\ \textcolor{keyword}{from}\ pathlib\ \textcolor{keyword}{import}\ Path}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00015}00015\ \textcolor{keyword}{import}\ pickle}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00016}00016\ \textcolor{keyword}{import}\ tempfile}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00017}00017\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00018}00018\ \textcolor{keyword}{import}\ numpy\ \textcolor{keyword}{as}\ np}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00019}00019\ \textcolor{keyword}{import}\ pytest}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00020}00020\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00021}00021\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacepandas_1_1compat}{pandas.compat}}\ \textcolor{keyword}{import}\ is\_platform\_windows}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00022}00022\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacepandas_1_1compat_1_1pyarrow}{pandas.compat.pyarrow}}\ \textcolor{keyword}{import}\ pa\_version\_under19p0}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00023}00023\ \textcolor{keyword}{import}\ \mbox{\hyperlink{namespacepandas_1_1util_1_1__test__decorators}{pandas.util.\_test\_decorators}}\ \textcolor{keyword}{as}\ td}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00024}00024\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00025}00025\ \textcolor{keyword}{import}\ pandas\ \textcolor{keyword}{as}\ pd}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00026}00026\ \textcolor{keyword}{import}\ \mbox{\hyperlink{namespacepandas_1_1__testing}{pandas.\_testing}}\ \textcolor{keyword}{as}\ tm}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00027}00027\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00028}00028\ \textcolor{keyword}{import}\ \mbox{\hyperlink{namespacepandas_1_1io_1_1common}{pandas.io.common}}\ \textcolor{keyword}{as}\ icom}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00029}00029\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00030}00030\ pytestmark\ =\ pytest.mark.filterwarnings(}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00031}00031\ \ \ \ \ \textcolor{stringliteral}{"{}ignore:Passing\ a\ BlockManager\ to\ DataFrame:DeprecationWarning"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00032}00032\ )}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00034}00034\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00035}\mbox{\hyperlink{classpandas_1_1tests_1_1io_1_1test__common_1_1CustomFSPath}{00035}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classpandas_1_1tests_1_1io_1_1test__common_1_1CustomFSPath}{CustomFSPath}}:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00036}00036\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}For\ testing\ fspath\ on\ unknown\ objects"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00037}00037\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00038}00038\ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self,\ path)\ -\/>\ None:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00039}00039\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classpandas_1_1tests_1_1io_1_1test__common_1_1CustomFSPath_a87d2b73de8521d6f0dfd9a8b4c83955b}{path}}\ =\ path}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00040}00040\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00041}00041\ \ \ \ \ \textcolor{keyword}{def\ }\_\_fspath\_\_(self):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00042}00042\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self.\mbox{\hyperlink{classpandas_1_1tests_1_1io_1_1test__common_1_1CustomFSPath_a87d2b73de8521d6f0dfd9a8b4c83955b}{path}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00043}00043\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00044}00044\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00045}00045\ \textcolor{comment}{\#\ Functions\ that\ consume\ a\ string\ path\ and\ return\ a\ string\ or\ path-\/like\ object}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00046}00046\ path\_types\ =\ [str,\ CustomFSPath,\ Path]}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00047}00047\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00048}00048\ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00049}00049\ \ \ \ \ \textcolor{keyword}{from}\ py.path\ \textcolor{keyword}{import}\ local\ \textcolor{keyword}{as}\ LocalPath}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00050}00050\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00051}00051\ \ \ \ \ path\_types.append(LocalPath)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00052}00052\ \textcolor{keywordflow}{except}\ ImportError:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00053}00053\ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00054}00054\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00055}00055\ HERE\ =\ os.path.abspath(os.path.dirname(\_\_file\_\_))}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00056}00056\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00057}00057\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00058}00058\ \textcolor{comment}{\#\ https://github.com/cython/cython/issues/1720}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00059}\mbox{\hyperlink{classpandas_1_1tests_1_1io_1_1test__common_1_1TestCommonIOCapabilities}{00059}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classpandas_1_1tests_1_1io_1_1test__common_1_1TestCommonIOCapabilities}{TestCommonIOCapabilities}}:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00060}00060\ \ \ \ \ data1\ =\ \textcolor{stringliteral}{"{}"{}"{}index,A,B,C,D}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00061}00061\ \textcolor{stringliteral}{foo,2,3,4,5}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00062}00062\ \textcolor{stringliteral}{bar,7,8,9,10}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00063}00063\ \textcolor{stringliteral}{baz,12,13,14,15}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00064}00064\ \textcolor{stringliteral}{qux,12,13,14,15}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00065}00065\ \textcolor{stringliteral}{foo2,12,13,14,15}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00066}00066\ \textcolor{stringliteral}{bar2,12,13,14,15}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00067}00067\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00068}00068\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00069}00069\ \ \ \ \ \textcolor{keyword}{def\ }test\_expand\_user(self):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00070}00070\ \ \ \ \ \ \ \ \ filename\ =\ \textcolor{stringliteral}{"{}\string~/sometest"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00071}00071\ \ \ \ \ \ \ \ \ expanded\_name\ =\ icom.\_expand\_user(filename)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00072}00072\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00073}00073\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ expanded\_name\ !=\ filename}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00074}00074\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ os.path.isabs(expanded\_name)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00075}00075\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ os.path.expanduser(filename)\ ==\ expanded\_name}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00076}00076\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00077}00077\ \ \ \ \ \textcolor{keyword}{def\ }test\_expand\_user\_normal\_path(self):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00078}00078\ \ \ \ \ \ \ \ \ filename\ =\ \textcolor{stringliteral}{"{}/somefolder/sometest"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00079}00079\ \ \ \ \ \ \ \ \ expanded\_name\ =\ icom.\_expand\_user(filename)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00080}00080\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00081}00081\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ expanded\_name\ ==\ filename}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00082}00082\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ os.path.expanduser(filename)\ ==\ expanded\_name}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00083}00083\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00084}00084\ \ \ \ \ \textcolor{keyword}{def\ }test\_stringify\_path\_pathlib(self):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00085}00085\ \ \ \ \ \ \ \ \ rel\_path\ =\ icom.stringify\_path(Path(\textcolor{stringliteral}{"{}."{}}))}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00086}00086\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ rel\_path\ ==\ \textcolor{stringliteral}{"{}."{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00087}00087\ \ \ \ \ \ \ \ \ redundant\_path\ =\ icom.stringify\_path(Path(\textcolor{stringliteral}{"{}foo//bar"{}}))}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00088}00088\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ redundant\_path\ ==\ os.path.join(\textcolor{stringliteral}{"{}foo"{}},\ \textcolor{stringliteral}{"{}bar"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00089}00089\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00090}00090\ \ \ \ \ \textcolor{preprocessor}{@td.skip\_if\_no("{}py.path"{})}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00091}00091\ \ \ \ \ \textcolor{keyword}{def\ }test\_stringify\_path\_localpath(self):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00092}00092\ \ \ \ \ \ \ \ \ path\ =\ os.path.join(\textcolor{stringliteral}{"{}foo"{}},\ \textcolor{stringliteral}{"{}bar"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00093}00093\ \ \ \ \ \ \ \ \ abs\_path\ =\ os.path.abspath(path)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00094}00094\ \ \ \ \ \ \ \ \ lpath\ =\ LocalPath(path)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00095}00095\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ icom.stringify\_path(lpath)\ ==\ abs\_path}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00096}00096\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00097}00097\ \ \ \ \ \textcolor{keyword}{def\ }test\_stringify\_path\_fspath(self):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00098}00098\ \ \ \ \ \ \ \ \ p\ =\ \mbox{\hyperlink{classpandas_1_1tests_1_1io_1_1test__common_1_1CustomFSPath}{CustomFSPath}}(\textcolor{stringliteral}{"{}foo/bar.csv"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00099}00099\ \ \ \ \ \ \ \ \ result\ =\ icom.stringify\_path(p)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00100}00100\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ result\ ==\ \textcolor{stringliteral}{"{}foo/bar.csv"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00101}00101\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00102}00102\ \ \ \ \ \textcolor{keyword}{def\ }test\_stringify\_file\_and\_path\_like(self):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00103}00103\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ GH\ 38125:\ do\ not\ stringify\ file\ objects\ that\ are\ also\ path-\/like}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00104}00104\ \ \ \ \ \ \ \ \ fsspec\ =\ pytest.importorskip(\textcolor{stringliteral}{"{}fsspec"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00105}00105\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ tm.ensure\_clean()\ \textcolor{keyword}{as}\ path:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00106}00106\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ fsspec.open(f\textcolor{stringliteral}{"{}file://\{path\}"{}},\ mode=\textcolor{stringliteral}{"{}wb"{}})\ \textcolor{keyword}{as}\ fsspec\_obj:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00107}00107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ fsspec\_obj\ ==\ icom.stringify\_path(fsspec\_obj)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00108}00108\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00109}00109\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}path\_type"{},\ path\_types)}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00110}00110\ \ \ \ \ \textcolor{keyword}{def\ }test\_infer\_compression\_from\_path(self,\ compression\_format,\ path\_type):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00111}00111\ \ \ \ \ \ \ \ \ extension,\ expected\ =\ compression\_format}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00112}00112\ \ \ \ \ \ \ \ \ path\ =\ path\_type(\textcolor{stringliteral}{"{}foo/bar.csv"{}}\ +\ extension)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00113}00113\ \ \ \ \ \ \ \ \ compression\ =\ icom.infer\_compression(path,\ compression=\textcolor{stringliteral}{"{}infer"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00114}00114\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ compression\ ==\ expected}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00115}00115\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00116}00116\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}path\_type"{},\ [str,\ CustomFSPath,\ Path])}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00117}00117\ \ \ \ \ \textcolor{keyword}{def\ }test\_get\_handle\_with\_path(self,\ path\_type):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00118}00118\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ ignore\ LocalPath:\ it\ creates\ strange\ paths:\ /absolute/\string~/sometest}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00119}00119\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ tempfile.TemporaryDirectory(dir=Path.home())\ \textcolor{keyword}{as}\ tmp:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00120}00120\ \ \ \ \ \ \ \ \ \ \ \ \ filename\ =\ path\_type(\textcolor{stringliteral}{"{}\string~/"{}}\ +\ Path(tmp).name\ +\ \textcolor{stringliteral}{"{}/sometest"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00121}00121\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ icom.get\_handle(filename,\ \textcolor{stringliteral}{"{}w"{}})\ \textcolor{keyword}{as}\ handles:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00122}00122\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ Path(handles.handle.name).is\_absolute()}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00123}00123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ os.path.expanduser(filename)\ ==\ handles.handle.name}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00124}00124\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00125}00125\ \ \ \ \ \textcolor{keyword}{def\ }test\_get\_handle\_with\_buffer(self):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00126}00126\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ \mbox{\hyperlink{classStringIO}{StringIO}}()\ \textcolor{keyword}{as}\ input\_buffer:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00127}00127\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ icom.get\_handle(input\_buffer,\ \textcolor{stringliteral}{"{}r"{}})\ \textcolor{keyword}{as}\ handles:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00128}00128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ handles.handle\ ==\ input\_buffer}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00129}00129\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ \textcolor{keywordflow}{not}\ input\_buffer.closed}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00130}00130\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ input\_buffer.closed}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00131}00131\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00132}00132\ \ \ \ \ \textcolor{comment}{\#\ Test\ that\ BytesIOWrapper(get\_handle)\ returns\ correct\ amount\ of\ bytes\ every\ time}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00133}00133\ \ \ \ \ \textcolor{keyword}{def\ }test\_bytesiowrapper\_returns\_correct\_bytes(self):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00134}00134\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ latin1,\ ucs-\/2,\ and\ ucs-\/4\ chars}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00135}00135\ \ \ \ \ \ \ \ \ data\ =\ \textcolor{stringliteral}{"{}"{}"{}a,b,c}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00136}00136\ \textcolor{stringliteral}{1,2,3}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00137}00137\ \textcolor{stringliteral}{©,®,®}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00138}00138\ \textcolor{stringliteral}{Look,a\ snake,🐍"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00139}00139\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ icom.get\_handle(\mbox{\hyperlink{classStringIO}{StringIO}}(data),\ \textcolor{stringliteral}{"{}rb"{}},\ is\_text=\textcolor{keyword}{False})\ \textcolor{keyword}{as}\ handles:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00140}00140\ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ b\textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00141}00141\ \ \ \ \ \ \ \ \ \ \ \ \ chunksize\ =\ 5}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00142}00142\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ \textcolor{keyword}{True}:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00143}00143\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ chunk\ =\ handles.handle.read(chunksize)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00144}00144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Make\ sure\ each\ chunk\ is\ correct\ amount\ of\ bytes}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00145}00145\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ len(chunk)\ <=\ chunksize}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00146}00146\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ len(chunk)\ <\ chunksize:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00147}00147\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Can\ be\ less\ amount\ of\ bytes,\ but\ only\ at\ EOF}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00148}00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ which\ happens\ when\ read\ returns\ empty}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00149}00149\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ len(handles.handle.read())\ ==\ 0}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00150}00150\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result\ +=\ chunk}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00151}00151\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00152}00152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result\ +=\ chunk}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00153}00153\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ result\ ==\ data.encode(\textcolor{stringliteral}{"{}utf-\/8"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00154}00154\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00155}00155\ \ \ \ \ \textcolor{comment}{\#\ Test\ that\ pyarrow\ can\ handle\ a\ file\ opened\ with\ get\_handle}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00156}00156\ \ \ \ \ \textcolor{keyword}{def\ }test\_get\_handle\_pyarrow\_compat(self):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00157}00157\ \ \ \ \ \ \ \ \ pa\_csv\ =\ pytest.importorskip(\textcolor{stringliteral}{"{}pyarrow.csv"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00158}00158\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00159}00159\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ latin1,\ ucs-\/2,\ and\ ucs-\/4\ chars}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00160}00160\ \ \ \ \ \ \ \ \ data\ =\ \textcolor{stringliteral}{"{}"{}"{}a,b,c}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00161}00161\ \textcolor{stringliteral}{1,2,3}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00162}00162\ \textcolor{stringliteral}{©,®,®}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00163}00163\ \textcolor{stringliteral}{Look,a\ snake,🐍"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00164}00164\ \ \ \ \ \ \ \ \ expected\ =\ pd.DataFrame(}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00165}00165\ \ \ \ \ \ \ \ \ \ \ \ \ \{\textcolor{stringliteral}{"{}a"{}}:\ [\textcolor{stringliteral}{"{}1"{}},\ \textcolor{stringliteral}{"{}©"{}},\ \textcolor{stringliteral}{"{}Look"{}}],\ \textcolor{stringliteral}{"{}b"{}}:\ [\textcolor{stringliteral}{"{}2"{}},\ \textcolor{stringliteral}{"{}®"{}},\ \textcolor{stringliteral}{"{}a\ snake"{}}],\ \textcolor{stringliteral}{"{}c"{}}:\ [\textcolor{stringliteral}{"{}3"{}},\ \textcolor{stringliteral}{"{}®"{}},\ \textcolor{stringliteral}{"{}🐍"{}}]\}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00166}00166\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00167}00167\ \ \ \ \ \ \ \ \ s\ =\ \mbox{\hyperlink{classStringIO}{StringIO}}(data)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00168}00168\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ icom.get\_handle(s,\ \textcolor{stringliteral}{"{}rb"{}},\ is\_text=\textcolor{keyword}{False})\ \textcolor{keyword}{as}\ handles:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00169}00169\ \ \ \ \ \ \ \ \ \ \ \ \ df\ =\ pa\_csv.read\_csv(handles.handle).to\_pandas()}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00170}00170\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ pa\_version\_under19p0:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00171}00171\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ expected\ =\ expected.astype(\textcolor{stringliteral}{"{}object"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00172}00172\ \ \ \ \ \ \ \ \ \ \ \ \ tm.assert\_frame\_equal(df,\ expected)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00173}00173\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ \textcolor{keywordflow}{not}\ s.closed}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00174}00174\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00175}00175\ \ \ \ \ \textcolor{keyword}{def\ }test\_iterator(self):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00176}00176\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pd.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(self.\mbox{\hyperlink{classpandas_1_1tests_1_1io_1_1test__common_1_1TestCommonIOCapabilities_a05871edf0a901c9c39cce4c1b0b7d5f9}{data1}}),\ chunksize=1)\ \textcolor{keyword}{as}\ reader:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00177}00177\ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ pd.concat(reader,\ ignore\_index=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00178}00178\ \ \ \ \ \ \ \ \ expected\ =\ pd.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(self.\mbox{\hyperlink{classpandas_1_1tests_1_1io_1_1test__common_1_1TestCommonIOCapabilities_a05871edf0a901c9c39cce4c1b0b7d5f9}{data1}}))}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00179}00179\ \ \ \ \ \ \ \ \ tm.assert\_frame\_equal(result,\ expected)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00180}00180\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00181}00181\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ GH12153}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00182}00182\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pd.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(self.\mbox{\hyperlink{classpandas_1_1tests_1_1io_1_1test__common_1_1TestCommonIOCapabilities_a05871edf0a901c9c39cce4c1b0b7d5f9}{data1}}),\ chunksize=1)\ \textcolor{keyword}{as}\ it:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00183}00183\ \ \ \ \ \ \ \ \ \ \ \ \ first\ =\ next(it)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00184}00184\ \ \ \ \ \ \ \ \ \ \ \ \ tm.assert\_frame\_equal(first,\ expected.iloc[[0]])}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00185}00185\ \ \ \ \ \ \ \ \ \ \ \ \ tm.assert\_frame\_equal(pd.concat(it),\ expected.iloc[1:])}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00186}00186\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00187}00187\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00188}00188\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}reader,\ module,\ error\_class,\ fn\_ext"{}},}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00189}00189\ \ \ \ \ \ \ \ \ [}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00190}00190\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.read\_csv,\ \textcolor{stringliteral}{"{}os"{}},\ FileNotFoundError,\ \textcolor{stringliteral}{"{}csv"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00191}00191\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.read\_fwf,\ \textcolor{stringliteral}{"{}os"{}},\ FileNotFoundError,\ \textcolor{stringliteral}{"{}txt"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00192}00192\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.read\_excel,\ \textcolor{stringliteral}{"{}xlrd"{}},\ FileNotFoundError,\ \textcolor{stringliteral}{"{}xlsx"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00193}00193\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.read\_feather,\ \textcolor{stringliteral}{"{}pyarrow"{}},\ OSError,\ \textcolor{stringliteral}{"{}feather"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00194}00194\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.read\_hdf,\ \textcolor{stringliteral}{"{}tables"{}},\ FileNotFoundError,\ \textcolor{stringliteral}{"{}h5"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00195}00195\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.read\_stata,\ \textcolor{stringliteral}{"{}os"{}},\ FileNotFoundError,\ \textcolor{stringliteral}{"{}dta"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00196}00196\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.read\_sas,\ \textcolor{stringliteral}{"{}os"{}},\ FileNotFoundError,\ \textcolor{stringliteral}{"{}sas7bdat"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00197}00197\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.read\_json,\ \textcolor{stringliteral}{"{}os"{}},\ FileNotFoundError,\ \textcolor{stringliteral}{"{}json"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00198}00198\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.read\_pickle,\ \textcolor{stringliteral}{"{}os"{}},\ FileNotFoundError,\ \textcolor{stringliteral}{"{}pickle"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00199}00199\ \ \ \ \ \ \ \ \ ],}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00200}00200\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00201}00201\ \ \ \ \ \textcolor{keyword}{def\ }test\_read\_non\_existent(self,\ reader,\ module,\ error\_class,\ fn\_ext):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00202}00202\ \ \ \ \ \ \ \ \ pytest.importorskip(module)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00203}00203\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00204}00204\ \ \ \ \ \ \ \ \ path\ =\ os.path.join(HERE,\ \textcolor{stringliteral}{"{}data"{}},\ \textcolor{stringliteral}{"{}does\_not\_exist."{}}\ +\ fn\_ext)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00205}00205\ \ \ \ \ \ \ \ \ msg1\ =\ rf\textcolor{stringliteral}{"{}File\ (b')?.+does\_not\_exist\(\backslash\).\{fn\_ext\}'?\ does\ not\ exist"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00206}00206\ \ \ \ \ \ \ \ \ msg2\ =\ rf\textcolor{stringliteral}{"{}\(\backslash\)[Errno\ 2\(\backslash\)]\ No\ such\ file\ or\ directory:\ '.+does\_not\_exist\(\backslash\).\{fn\_ext\}'"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00207}00207\ \ \ \ \ \ \ \ \ msg3\ =\ \textcolor{stringliteral}{"{}Expected\ object\ or\ value"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00208}00208\ \ \ \ \ \ \ \ \ msg4\ =\ \textcolor{stringliteral}{"{}path\_or\_buf\ needs\ to\ be\ a\ string\ file\ path\ or\ file-\/like"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00209}00209\ \ \ \ \ \ \ \ \ msg5\ =\ (}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00210}00210\ \ \ \ \ \ \ \ \ \ \ \ \ rf\textcolor{stringliteral}{"{}\(\backslash\)[Errno\ 2\(\backslash\)]\ File\ .+does\_not\_exist\(\backslash\).\{fn\_ext\}\ does\ not\ exist:\ "{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00211}00211\ \ \ \ \ \ \ \ \ \ \ \ \ rf\textcolor{stringliteral}{"{}'.+does\_not\_exist\(\backslash\).\{fn\_ext\}'"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00212}00212\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00213}00213\ \ \ \ \ \ \ \ \ msg6\ =\ rf\textcolor{stringliteral}{"{}\(\backslash\)[Errno\ 2\(\backslash\)]\ 没有那个文件或目录:\ '.+does\_not\_exist\(\backslash\).\{fn\_ext\}'"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00214}00214\ \ \ \ \ \ \ \ \ msg7\ =\ (}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00215}00215\ \ \ \ \ \ \ \ \ \ \ \ \ rf\textcolor{stringliteral}{"{}\(\backslash\)[Errno\ 2\(\backslash\)]\ File\ o\ directory\ non\ esistente:\ '.+does\_not\_exist\(\backslash\).\{fn\_ext\}'"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00216}00216\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00217}00217\ \ \ \ \ \ \ \ \ msg8\ =\ rf\textcolor{stringliteral}{"{}Failed\ to\ open\ local\ file.+does\_not\_exist\(\backslash\).\{fn\_ext\}"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00218}00218\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00219}00219\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00220}00220\ \ \ \ \ \ \ \ \ \ \ \ \ error\_class,}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00221}00221\ \ \ \ \ \ \ \ \ \ \ \ \ match=rf\textcolor{stringliteral}{"{}(\{msg1\}|\{msg2\}|\{msg3\}|\{msg4\}|\{msg5\}|\{msg6\}|\{msg7\}|\{msg8\})"{}},}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00222}00222\ \ \ \ \ \ \ \ \ ):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00223}00223\ \ \ \ \ \ \ \ \ \ \ \ \ reader(path)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00224}00224\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00225}00225\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00226}00226\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}method,\ module,\ error\_class,\ fn\_ext"{}},}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00227}00227\ \ \ \ \ \ \ \ \ [}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00228}00228\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.DataFrame.to\_csv,\ \textcolor{stringliteral}{"{}os"{}},\ OSError,\ \textcolor{stringliteral}{"{}csv"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00229}00229\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.DataFrame.to\_html,\ \textcolor{stringliteral}{"{}os"{}},\ OSError,\ \textcolor{stringliteral}{"{}html"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00230}00230\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.DataFrame.to\_excel,\ \textcolor{stringliteral}{"{}xlrd"{}},\ OSError,\ \textcolor{stringliteral}{"{}xlsx"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00231}00231\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.DataFrame.to\_feather,\ \textcolor{stringliteral}{"{}pyarrow"{}},\ OSError,\ \textcolor{stringliteral}{"{}feather"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00232}00232\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.DataFrame.to\_parquet,\ \textcolor{stringliteral}{"{}pyarrow"{}},\ OSError,\ \textcolor{stringliteral}{"{}parquet"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00233}00233\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.DataFrame.to\_stata,\ \textcolor{stringliteral}{"{}os"{}},\ OSError,\ \textcolor{stringliteral}{"{}dta"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00234}00234\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.DataFrame.to\_json,\ \textcolor{stringliteral}{"{}os"{}},\ OSError,\ \textcolor{stringliteral}{"{}json"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00235}00235\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.DataFrame.to\_pickle,\ \textcolor{stringliteral}{"{}os"{}},\ OSError,\ \textcolor{stringliteral}{"{}pickle"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00236}00236\ \ \ \ \ \ \ \ \ ],}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00237}00237\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00238}00238\ \ \ \ \ \textcolor{comment}{\#\ NOTE:\ Missing\ parent\ directory\ for\ pd.DataFrame.to\_hdf\ is\ handled\ by\ PyTables}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00239}00239\ \ \ \ \ \textcolor{keyword}{def\ }test\_write\_missing\_parent\_directory(self,\ method,\ module,\ error\_class,\ fn\_ext):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00240}00240\ \ \ \ \ \ \ \ \ pytest.importorskip(module)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00241}00241\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00242}00242\ \ \ \ \ \ \ \ \ dummy\_frame\ =\ pd.DataFrame(\{\textcolor{stringliteral}{"{}a"{}}:\ [1,\ 2,\ 3],\ \textcolor{stringliteral}{"{}b"{}}:\ [2,\ 3,\ 4],\ \textcolor{stringliteral}{"{}c"{}}:\ [3,\ 4,\ 5]\})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00243}00243\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00244}00244\ \ \ \ \ \ \ \ \ path\ =\ os.path.join(HERE,\ \textcolor{stringliteral}{"{}data"{}},\ \textcolor{stringliteral}{"{}missing\_folder"{}},\ \textcolor{stringliteral}{"{}does\_not\_exist."{}}\ +\ fn\_ext)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00245}00245\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00246}00246\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00247}00247\ \ \ \ \ \ \ \ \ \ \ \ \ error\_class,}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00248}00248\ \ \ \ \ \ \ \ \ \ \ \ \ match=\textcolor{stringliteral}{r"{}Cannot\ save\ file\ into\ a\ non-\/existent\ directory:\ .*missing\_folder"{}},}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00249}00249\ \ \ \ \ \ \ \ \ ):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00250}00250\ \ \ \ \ \ \ \ \ \ \ \ \ method(dummy\_frame,\ path)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00251}00251\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00252}00252\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00253}00253\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}reader,\ module,\ error\_class,\ fn\_ext"{}},}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00254}00254\ \ \ \ \ \ \ \ \ [}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00255}00255\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.read\_csv,\ \textcolor{stringliteral}{"{}os"{}},\ FileNotFoundError,\ \textcolor{stringliteral}{"{}csv"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00256}00256\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.read\_table,\ \textcolor{stringliteral}{"{}os"{}},\ FileNotFoundError,\ \textcolor{stringliteral}{"{}csv"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00257}00257\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.read\_fwf,\ \textcolor{stringliteral}{"{}os"{}},\ FileNotFoundError,\ \textcolor{stringliteral}{"{}txt"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00258}00258\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.read\_excel,\ \textcolor{stringliteral}{"{}xlrd"{}},\ FileNotFoundError,\ \textcolor{stringliteral}{"{}xlsx"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00259}00259\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.read\_feather,\ \textcolor{stringliteral}{"{}pyarrow"{}},\ OSError,\ \textcolor{stringliteral}{"{}feather"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00260}00260\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.read\_hdf,\ \textcolor{stringliteral}{"{}tables"{}},\ FileNotFoundError,\ \textcolor{stringliteral}{"{}h5"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00261}00261\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.read\_stata,\ \textcolor{stringliteral}{"{}os"{}},\ FileNotFoundError,\ \textcolor{stringliteral}{"{}dta"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00262}00262\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.read\_sas,\ \textcolor{stringliteral}{"{}os"{}},\ FileNotFoundError,\ \textcolor{stringliteral}{"{}sas7bdat"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00263}00263\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.read\_json,\ \textcolor{stringliteral}{"{}os"{}},\ FileNotFoundError,\ \textcolor{stringliteral}{"{}json"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00264}00264\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.read\_pickle,\ \textcolor{stringliteral}{"{}os"{}},\ FileNotFoundError,\ \textcolor{stringliteral}{"{}pickle"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00265}00265\ \ \ \ \ \ \ \ \ ],}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00266}00266\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00267}00267\ \ \ \ \ \textcolor{keyword}{def\ }test\_read\_expands\_user\_home\_dir(}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00268}00268\ \ \ \ \ \ \ \ \ self,\ reader,\ module,\ error\_class,\ fn\_ext,\ monkeypatch}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00269}00269\ \ \ \ \ ):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00270}00270\ \ \ \ \ \ \ \ \ pytest.importorskip(module)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00271}00271\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00272}00272\ \ \ \ \ \ \ \ \ path\ =\ os.path.join(\textcolor{stringliteral}{"{}\string~"{}},\ \textcolor{stringliteral}{"{}does\_not\_exist."{}}\ +\ fn\_ext)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00273}00273\ \ \ \ \ \ \ \ \ monkeypatch.setattr(icom,\ \textcolor{stringliteral}{"{}\_expand\_user"{}},\ \textcolor{keyword}{lambda}\ x:\ os.path.join(\textcolor{stringliteral}{"{}foo"{}},\ x))}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00274}00274\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00275}00275\ \ \ \ \ \ \ \ \ msg1\ =\ rf\textcolor{stringliteral}{"{}File\ (b')?.+does\_not\_exist\(\backslash\).\{fn\_ext\}'?\ does\ not\ exist"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00276}00276\ \ \ \ \ \ \ \ \ msg2\ =\ rf\textcolor{stringliteral}{"{}\(\backslash\)[Errno\ 2\(\backslash\)]\ No\ such\ file\ or\ directory:\ '.+does\_not\_exist\(\backslash\).\{fn\_ext\}'"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00277}00277\ \ \ \ \ \ \ \ \ msg3\ =\ \textcolor{stringliteral}{"{}Unexpected\ character\ found\ when\ decoding\ 'false'"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00278}00278\ \ \ \ \ \ \ \ \ msg4\ =\ \textcolor{stringliteral}{"{}path\_or\_buf\ needs\ to\ be\ a\ string\ file\ path\ or\ file-\/like"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00279}00279\ \ \ \ \ \ \ \ \ msg5\ =\ (}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00280}00280\ \ \ \ \ \ \ \ \ \ \ \ \ rf\textcolor{stringliteral}{"{}\(\backslash\)[Errno\ 2\(\backslash\)]\ File\ .+does\_not\_exist\(\backslash\).\{fn\_ext\}\ does\ not\ exist:\ "{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00281}00281\ \ \ \ \ \ \ \ \ \ \ \ \ rf\textcolor{stringliteral}{"{}'.+does\_not\_exist\(\backslash\).\{fn\_ext\}'"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00282}00282\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00283}00283\ \ \ \ \ \ \ \ \ msg6\ =\ rf\textcolor{stringliteral}{"{}\(\backslash\)[Errno\ 2\(\backslash\)]\ 没有那个文件或目录:\ '.+does\_not\_exist\(\backslash\).\{fn\_ext\}'"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00284}00284\ \ \ \ \ \ \ \ \ msg7\ =\ (}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00285}00285\ \ \ \ \ \ \ \ \ \ \ \ \ rf\textcolor{stringliteral}{"{}\(\backslash\)[Errno\ 2\(\backslash\)]\ File\ o\ directory\ non\ esistente:\ '.+does\_not\_exist\(\backslash\).\{fn\_ext\}'"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00286}00286\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00287}00287\ \ \ \ \ \ \ \ \ msg8\ =\ rf\textcolor{stringliteral}{"{}Failed\ to\ open\ local\ file.+does\_not\_exist\(\backslash\).\{fn\_ext\}"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00288}00288\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00289}00289\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00290}00290\ \ \ \ \ \ \ \ \ \ \ \ \ error\_class,}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00291}00291\ \ \ \ \ \ \ \ \ \ \ \ \ match=rf\textcolor{stringliteral}{"{}(\{msg1\}|\{msg2\}|\{msg3\}|\{msg4\}|\{msg5\}|\{msg6\}|\{msg7\}|\{msg8\})"{}},}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00292}00292\ \ \ \ \ \ \ \ \ ):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00293}00293\ \ \ \ \ \ \ \ \ \ \ \ \ reader(path)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00294}00294\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00295}00295\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00296}00296\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}reader,\ module,\ path"{}},}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00297}00297\ \ \ \ \ \ \ \ \ [}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00298}00298\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.read\_csv,\ \textcolor{stringliteral}{"{}os"{}},\ (\textcolor{stringliteral}{"{}io"{}},\ \textcolor{stringliteral}{"{}data"{}},\ \textcolor{stringliteral}{"{}csv"{}},\ \textcolor{stringliteral}{"{}iris.csv"{}})),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00299}00299\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.read\_table,\ \textcolor{stringliteral}{"{}os"{}},\ (\textcolor{stringliteral}{"{}io"{}},\ \textcolor{stringliteral}{"{}data"{}},\ \textcolor{stringliteral}{"{}csv"{}},\ \textcolor{stringliteral}{"{}iris.csv"{}})),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00300}00300\ \ \ \ \ \ \ \ \ \ \ \ \ (}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00301}00301\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pd.read\_fwf,}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00302}00302\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}os"{}},}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00303}00303\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}io"{}},\ \textcolor{stringliteral}{"{}data"{}},\ \textcolor{stringliteral}{"{}fixed\_width"{}},\ \textcolor{stringliteral}{"{}fixed\_width\_format.txt"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00304}00304\ \ \ \ \ \ \ \ \ \ \ \ \ ),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00305}00305\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.read\_excel,\ \textcolor{stringliteral}{"{}xlrd"{}},\ (\textcolor{stringliteral}{"{}io"{}},\ \textcolor{stringliteral}{"{}data"{}},\ \textcolor{stringliteral}{"{}excel"{}},\ \textcolor{stringliteral}{"{}test1.xlsx"{}})),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00306}00306\ \ \ \ \ \ \ \ \ \ \ \ \ (}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00307}00307\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pd.read\_feather,}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00308}00308\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}pyarrow"{}},}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00309}00309\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}io"{}},\ \textcolor{stringliteral}{"{}data"{}},\ \textcolor{stringliteral}{"{}feather"{}},\ \textcolor{stringliteral}{"{}feather-\/0\_3\_1.feather"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00310}00310\ \ \ \ \ \ \ \ \ \ \ \ \ ),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00311}00311\ \ \ \ \ \ \ \ \ \ \ \ \ pytest.param(}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00312}00312\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pd.read\_hdf,}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00313}00313\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}tables"{}},}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00314}00314\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}io"{}},\ \textcolor{stringliteral}{"{}data"{}},\ \textcolor{stringliteral}{"{}legacy\_hdf"{}},\ \textcolor{stringliteral}{"{}datetimetz\_object.h5"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00315}00315\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ cleaned-\/up\ in\ https://github.com/pandas-\/dev/pandas/pull/57387\ on\ main}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00316}00316\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ marks=pytest.mark.xfail(reason=\textcolor{stringliteral}{"{}TODO(infer\_string)"{}},\ strict=\textcolor{keyword}{False}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00317}00317\ \ \ \ \ \ \ \ \ \ \ \ \ ),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00318}00318\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.read\_stata,\ \textcolor{stringliteral}{"{}os"{}},\ (\textcolor{stringliteral}{"{}io"{}},\ \textcolor{stringliteral}{"{}data"{}},\ \textcolor{stringliteral}{"{}stata"{}},\ \textcolor{stringliteral}{"{}stata10\_115.dta"{}})),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00319}00319\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.read\_sas,\ \textcolor{stringliteral}{"{}os"{}},\ (\textcolor{stringliteral}{"{}io"{}},\ \textcolor{stringliteral}{"{}sas"{}},\ \textcolor{stringliteral}{"{}data"{}},\ \textcolor{stringliteral}{"{}test1.sas7bdat"{}})),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00320}00320\ \ \ \ \ \ \ \ \ \ \ \ \ (pd.read\_json,\ \textcolor{stringliteral}{"{}os"{}},\ (\textcolor{stringliteral}{"{}io"{}},\ \textcolor{stringliteral}{"{}json"{}},\ \textcolor{stringliteral}{"{}data"{}},\ \textcolor{stringliteral}{"{}tsframe\_v012.json"{}})),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00321}00321\ \ \ \ \ \ \ \ \ \ \ \ \ (}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00322}00322\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pd.read\_pickle,}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00323}00323\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}os"{}},}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00324}00324\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}io"{}},\ \textcolor{stringliteral}{"{}data"{}},\ \textcolor{stringliteral}{"{}pickle"{}},\ \textcolor{stringliteral}{"{}categorical.0.25.0.pickle"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00325}00325\ \ \ \ \ \ \ \ \ \ \ \ \ ),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00326}00326\ \ \ \ \ \ \ \ \ ],}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00327}00327\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00328}00328\ \ \ \ \ \textcolor{keyword}{def\ }test\_read\_fspath\_all(self,\ reader,\ module,\ path,\ datapath):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00329}00329\ \ \ \ \ \ \ \ \ pytest.importorskip(module)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00330}00330\ \ \ \ \ \ \ \ \ path\ =\ datapath(*path)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00331}00331\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00332}00332\ \ \ \ \ \ \ \ \ mypath\ =\ \mbox{\hyperlink{classpandas_1_1tests_1_1io_1_1test__common_1_1CustomFSPath}{CustomFSPath}}(path)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00333}00333\ \ \ \ \ \ \ \ \ result\ =\ reader(mypath)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00334}00334\ \ \ \ \ \ \ \ \ expected\ =\ reader(path)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00335}00335\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00336}00336\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ path.endswith(\textcolor{stringliteral}{"{}.pickle"{}}):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00337}00337\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ categorical}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00338}00338\ \ \ \ \ \ \ \ \ \ \ \ \ tm.assert\_categorical\_equal(result,\ expected)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00339}00339\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00340}00340\ \ \ \ \ \ \ \ \ \ \ \ \ tm.assert\_frame\_equal(result,\ expected)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00341}00341\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00342}00342\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00343}00343\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}writer\_name,\ writer\_kwargs,\ module"{}},}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00344}00344\ \ \ \ \ \ \ \ \ [}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00345}00345\ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}to\_csv"{}},\ \{\},\ \textcolor{stringliteral}{"{}os"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00346}00346\ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}to\_excel"{}},\ \{\textcolor{stringliteral}{"{}engine"{}}:\ \textcolor{stringliteral}{"{}openpyxl"{}}\},\ \textcolor{stringliteral}{"{}openpyxl"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00347}00347\ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}to\_feather"{}},\ \{\},\ \textcolor{stringliteral}{"{}pyarrow"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00348}00348\ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}to\_html"{}},\ \{\},\ \textcolor{stringliteral}{"{}os"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00349}00349\ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}to\_json"{}},\ \{\},\ \textcolor{stringliteral}{"{}os"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00350}00350\ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}to\_latex"{}},\ \{\},\ \textcolor{stringliteral}{"{}os"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00351}00351\ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}to\_pickle"{}},\ \{\},\ \textcolor{stringliteral}{"{}os"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00352}00352\ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}to\_stata"{}},\ \{\textcolor{stringliteral}{"{}time\_stamp"{}}:\ pd.to\_datetime(\textcolor{stringliteral}{"{}2019-\/01-\/01\ 00:00"{}})\},\ \textcolor{stringliteral}{"{}os"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00353}00353\ \ \ \ \ \ \ \ \ ],}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00354}00354\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00355}00355\ \ \ \ \ \textcolor{keyword}{def\ }test\_write\_fspath\_all(self,\ writer\_name,\ writer\_kwargs,\ module):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00356}00356\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ writer\_name\ \textcolor{keywordflow}{in}\ [\textcolor{stringliteral}{"{}to\_latex"{}}]:\ \ \textcolor{comment}{\#\ uses\ Styler\ implementation}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00357}00357\ \ \ \ \ \ \ \ \ \ \ \ \ pytest.importorskip(\textcolor{stringliteral}{"{}jinja2"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00358}00358\ \ \ \ \ \ \ \ \ p1\ =\ tm.ensure\_clean(\textcolor{stringliteral}{"{}string"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00359}00359\ \ \ \ \ \ \ \ \ p2\ =\ tm.ensure\_clean(\textcolor{stringliteral}{"{}fspath"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00360}00360\ \ \ \ \ \ \ \ \ df\ =\ pd.DataFrame(\{\textcolor{stringliteral}{"{}A"{}}:\ [1,\ 2]\})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00361}00361\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00362}00362\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ p1\ \textcolor{keyword}{as}\ string,\ p2\ \textcolor{keyword}{as}\ fspath:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00363}00363\ \ \ \ \ \ \ \ \ \ \ \ \ pytest.importorskip(module)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00364}00364\ \ \ \ \ \ \ \ \ \ \ \ \ mypath\ =\ \mbox{\hyperlink{classpandas_1_1tests_1_1io_1_1test__common_1_1CustomFSPath}{CustomFSPath}}(fspath)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00365}00365\ \ \ \ \ \ \ \ \ \ \ \ \ writer\ =\ getattr(df,\ writer\_name)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00366}00366\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00367}00367\ \ \ \ \ \ \ \ \ \ \ \ \ writer(string,\ **writer\_kwargs)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00368}00368\ \ \ \ \ \ \ \ \ \ \ \ \ writer(mypath,\ **writer\_kwargs)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00369}00369\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(string,\ \textcolor{stringliteral}{"{}rb"{}})\ \textcolor{keyword}{as}\ f\_str,\ open(fspath,\ \textcolor{stringliteral}{"{}rb"{}})\ \textcolor{keyword}{as}\ f\_path:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00370}00370\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ writer\_name\ ==\ \textcolor{stringliteral}{"{}to\_excel"{}}:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00371}00371\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ binary\ representation\ of\ excel\ contains\ time\ creation}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00372}00372\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ data\ that\ causes\ flaky\ CI\ failures}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00373}00373\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ pd.read\_excel(f\_str,\ **writer\_kwargs)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00374}00374\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ expected\ =\ pd.read\_excel(f\_path,\ **writer\_kwargs)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00375}00375\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tm.assert\_frame\_equal(result,\ expected)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00376}00376\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00377}00377\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ f\_str.read()}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00378}00378\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ expected\ =\ f\_path.read()}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00379}00379\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ result\ ==\ expected}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00380}00380\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00381}00381\ \ \ \ \ \textcolor{keyword}{def\ }test\_write\_fspath\_hdf5(self):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00382}00382\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Same\ test\ as\ write\_fspath\_all,\ except\ HDF5\ files\ aren't}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00383}00383\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ necessarily\ byte-\/for-\/byte\ identical\ for\ a\ given\ dataframe,\ so\ we'll}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00384}00384\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ have\ to\ read\ and\ compare\ equality}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00385}00385\ \ \ \ \ \ \ \ \ pytest.importorskip(\textcolor{stringliteral}{"{}tables"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00386}00386\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00387}00387\ \ \ \ \ \ \ \ \ df\ =\ pd.DataFrame(\{\textcolor{stringliteral}{"{}A"{}}:\ [1,\ 2]\})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00388}00388\ \ \ \ \ \ \ \ \ p1\ =\ tm.ensure\_clean(\textcolor{stringliteral}{"{}string"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00389}00389\ \ \ \ \ \ \ \ \ p2\ =\ tm.ensure\_clean(\textcolor{stringliteral}{"{}fspath"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00390}00390\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00391}00391\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ p1\ \textcolor{keyword}{as}\ string,\ p2\ \textcolor{keyword}{as}\ fspath:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00392}00392\ \ \ \ \ \ \ \ \ \ \ \ \ mypath\ =\ \mbox{\hyperlink{classpandas_1_1tests_1_1io_1_1test__common_1_1CustomFSPath}{CustomFSPath}}(fspath)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00393}00393\ \ \ \ \ \ \ \ \ \ \ \ \ df.to\_hdf(mypath,\ key=\textcolor{stringliteral}{"{}bar"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00394}00394\ \ \ \ \ \ \ \ \ \ \ \ \ df.to\_hdf(string,\ key=\textcolor{stringliteral}{"{}bar"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00395}00395\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00396}00396\ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ pd.read\_hdf(fspath,\ key=\textcolor{stringliteral}{"{}bar"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00397}00397\ \ \ \ \ \ \ \ \ \ \ \ \ expected\ =\ pd.read\_hdf(string,\ key=\textcolor{stringliteral}{"{}bar"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00398}00398\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00399}00399\ \ \ \ \ \ \ \ \ tm.assert\_frame\_equal(result,\ expected)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00400}00400\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00401}00401\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00402}00402\ \textcolor{preprocessor}{@pytest.fixture}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00403}00403\ \textcolor{keyword}{def\ }mmap\_file(datapath):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00404}00404\ \ \ \ \ \textcolor{keywordflow}{return}\ datapath(\textcolor{stringliteral}{"{}io"{}},\ \textcolor{stringliteral}{"{}data"{}},\ \textcolor{stringliteral}{"{}csv"{}},\ \textcolor{stringliteral}{"{}test\_mmap.csv"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00405}00405\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00406}00406\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00407}\mbox{\hyperlink{classpandas_1_1tests_1_1io_1_1test__common_1_1TestMMapWrapper}{00407}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classpandas_1_1tests_1_1io_1_1test__common_1_1TestMMapWrapper}{TestMMapWrapper}}:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00408}00408\ \ \ \ \ \textcolor{keyword}{def\ }test\_constructor\_bad\_file(self,\ mmap\_file):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00409}00409\ \ \ \ \ \ \ \ \ non\_file\ =\ \mbox{\hyperlink{classStringIO}{StringIO}}(\textcolor{stringliteral}{"{}I\ am\ not\ a\ file"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00410}00410\ \ \ \ \ \ \ \ \ non\_file.fileno\ =\ \textcolor{keyword}{lambda}:\ -\/1}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00411}00411\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00412}00412\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ the\ error\ raised\ is\ different\ on\ Windows}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00413}00413\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ is\_platform\_windows():}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00414}00414\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}The\ parameter\ is\ incorrect"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00415}00415\ \ \ \ \ \ \ \ \ \ \ \ \ err\ =\ OSError}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00416}00416\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00417}00417\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}[Errno\ 22]"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00418}00418\ \ \ \ \ \ \ \ \ \ \ \ \ err\ =\ mmap.error}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00419}00419\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00420}00420\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(err,\ match=msg):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00421}00421\ \ \ \ \ \ \ \ \ \ \ \ \ icom.\_maybe\_memory\_map(non\_file,\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00422}00422\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00423}00423\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(mmap\_file,\ encoding=\textcolor{stringliteral}{"{}utf-\/8"{}})\ \textcolor{keyword}{as}\ target:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00424}00424\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00425}00425\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00426}00426\ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}I/O\ operation\ on\ closed\ file"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00427}00427\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError,\ match=msg):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00428}00428\ \ \ \ \ \ \ \ \ \ \ \ \ icom.\_maybe\_memory\_map(target,\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00429}00429\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00430}00430\ \ \ \ \ \textcolor{keyword}{def\ }test\_next(self,\ mmap\_file):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00431}00431\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(mmap\_file,\ encoding=\textcolor{stringliteral}{"{}utf-\/8"{}})\ \textcolor{keyword}{as}\ target:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00432}00432\ \ \ \ \ \ \ \ \ \ \ \ \ lines\ =\ target.readlines()}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00433}00433\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00434}00434\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ icom.get\_handle(}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00435}00435\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ target,\ \textcolor{stringliteral}{"{}r"{}},\ is\_text=\textcolor{keyword}{True},\ memory\_map=\textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00436}00436\ \ \ \ \ \ \ \ \ \ \ \ \ )\ \textcolor{keyword}{as}\ wrappers:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00437}00437\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ wrapper\ =\ wrappers.handle}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00438}00438\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ isinstance(wrapper.buffer.buffer,\ mmap.mmap)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00439}00439\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00440}00440\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ line\ \textcolor{keywordflow}{in}\ lines:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00441}00441\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ next\_line\ =\ next(wrapper)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00442}00442\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ next\_line.strip()\ ==\ line.strip()}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00443}00443\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00444}00444\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(StopIteration,\ match=\textcolor{stringliteral}{r"{}\string^\$"{}}):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00445}00445\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ next(wrapper)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00446}00446\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00447}00447\ \ \ \ \ \textcolor{keyword}{def\ }test\_unknown\_engine(self):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00448}00448\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ tm.ensure\_clean()\ \textcolor{keyword}{as}\ path:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00449}00449\ \ \ \ \ \ \ \ \ \ \ \ \ df\ =\ pd.DataFrame(}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00450}00450\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 1.1\ *\ np.arange(120).reshape((30,\ 4)),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00451}00451\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ columns=pd.Index(list(\textcolor{stringliteral}{"{}ABCD"{}})),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00452}00452\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ index=pd.Index([f\textcolor{stringliteral}{"{}i-\/\{i\}"{}}\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(30)]),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00453}00453\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00454}00454\ \ \ \ \ \ \ \ \ \ \ \ \ df.to\_csv(path)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00455}00455\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError,\ match=\textcolor{stringliteral}{"{}Unknown\ engine"{}}):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00456}00456\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pd.read\_csv(path,\ engine=\textcolor{stringliteral}{"{}pyt"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00457}00457\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00458}\mbox{\hyperlink{classpandas_1_1tests_1_1io_1_1test__common_1_1TestMMapWrapper_a0d817dfc76eba6cb16c4240c00931f30}{00458}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classpandas_1_1tests_1_1io_1_1test__common_1_1TestMMapWrapper_a0d817dfc76eba6cb16c4240c00931f30}{test\_binary\_mode}}(self):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00459}00459\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00460}00460\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ 'encoding'\ shouldn't\ be\ passed\ to\ 'open'\ in\ binary\ mode.}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00461}00461\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00462}00462\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ GH\ 35058}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00463}00463\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00464}00464\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ tm.ensure\_clean()\ \textcolor{keyword}{as}\ path:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00465}00465\ \ \ \ \ \ \ \ \ \ \ \ \ df\ =\ pd.DataFrame(}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00466}00466\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 1.1\ *\ np.arange(120).reshape((30,\ 4)),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00467}00467\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ columns=pd.Index(list(\textcolor{stringliteral}{"{}ABCD"{}})),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00468}00468\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ index=pd.Index([f\textcolor{stringliteral}{"{}i-\/\{i\}"{}}\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(30)]),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00469}00469\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00470}00470\ \ \ \ \ \ \ \ \ \ \ \ \ df.to\_csv(path,\ mode=\textcolor{stringliteral}{"{}w+b"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00471}00471\ \ \ \ \ \ \ \ \ \ \ \ \ tm.assert\_frame\_equal(df,\ pd.read\_csv(path,\ index\_col=0))}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00472}00472\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00473}00473\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}encoding"{},\ ["{}utf-\/16"{},\ "{}utf-\/32"{}])}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00474}00474\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}compression\_"{},\ ["{}bz2"{},\ "{}xz"{}])}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00475}\mbox{\hyperlink{classpandas_1_1tests_1_1io_1_1test__common_1_1TestMMapWrapper_acb5554016ddae684ba629804c6b08b19}{00475}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classpandas_1_1tests_1_1io_1_1test__common_1_1TestMMapWrapper_acb5554016ddae684ba629804c6b08b19}{test\_warning\_missing\_utf\_bom}}(self,\ encoding,\ compression\_):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00476}00476\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00477}00477\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ bz2\ and\ xz\ do\ not\ write\ the\ byte\ order\ mark\ (BOM)\ for\ utf-\/16/32.}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00478}00478\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00479}00479\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ https://stackoverflow.com/questions/55171439}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00480}00480\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00481}00481\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ GH\ 35681}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00482}00482\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00483}00483\ \ \ \ \ \ \ \ \ df\ =\ pd.DataFrame(}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00484}00484\ \ \ \ \ \ \ \ \ \ \ \ \ 1.1\ *\ np.arange(120).reshape((30,\ 4)),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00485}00485\ \ \ \ \ \ \ \ \ \ \ \ \ columns=pd.Index(list(\textcolor{stringliteral}{"{}ABCD"{}})),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00486}00486\ \ \ \ \ \ \ \ \ \ \ \ \ index=pd.Index([f\textcolor{stringliteral}{"{}i-\/\{i\}"{}}\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(30)]),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00487}00487\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00488}00488\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ tm.ensure\_clean()\ \textcolor{keyword}{as}\ path:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00489}00489\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ tm.assert\_produces\_warning(UnicodeWarning):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00490}00490\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ df.to\_csv(path,\ compression=compression\_,\ encoding=encoding)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00491}00491\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00492}00492\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ reading\ should\ fail\ (otherwise\ we\ wouldn't\ need\ the\ warning)}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00493}00493\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ (}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00494}00494\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{r"{}UTF-\/\(\backslash\)d+\ stream\ does\ not\ start\ with\ BOM|"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00495}00495\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{r"{}'utf-\/\(\backslash\)d+'\ codec\ can't\ decode\ byte"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00496}00496\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00497}00497\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(UnicodeError,\ match=msg):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00498}00498\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pd.read\_csv(path,\ compression=compression\_,\ encoding=encoding)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00499}00499\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00500}00500\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00501}00501\ \textcolor{keyword}{def\ }test\_is\_fsspec\_url():}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00502}00502\ \ \ \ \ \textcolor{keyword}{assert}\ icom.is\_fsspec\_url(\textcolor{stringliteral}{"{}gcs://pandas/somethingelse.com"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00503}00503\ \ \ \ \ \textcolor{keyword}{assert}\ icom.is\_fsspec\_url(\textcolor{stringliteral}{"{}gs://pandas/somethingelse.com"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00504}00504\ \ \ \ \ \textcolor{comment}{\#\ the\ following\ is\ the\ only\ remote\ URL\ that\ is\ handled\ without\ fsspec}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00505}00505\ \ \ \ \ \textcolor{keyword}{assert}\ \textcolor{keywordflow}{not}\ icom.is\_fsspec\_url(\textcolor{stringliteral}{"{}http://pandas/somethingelse.com"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00506}00506\ \ \ \ \ \textcolor{keyword}{assert}\ \textcolor{keywordflow}{not}\ icom.is\_fsspec\_url(\textcolor{stringliteral}{"{}random:pandas/somethingelse.com"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00507}00507\ \ \ \ \ \textcolor{keyword}{assert}\ \textcolor{keywordflow}{not}\ icom.is\_fsspec\_url(\textcolor{stringliteral}{"{}/local/path"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00508}00508\ \ \ \ \ \textcolor{keyword}{assert}\ \textcolor{keywordflow}{not}\ icom.is\_fsspec\_url(\textcolor{stringliteral}{"{}relative/local/path"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00509}00509\ \ \ \ \ \textcolor{comment}{\#\ fsspec\ URL\ in\ string\ should\ not\ be\ recognized}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00510}00510\ \ \ \ \ \textcolor{keyword}{assert}\ \textcolor{keywordflow}{not}\ icom.is\_fsspec\_url(\textcolor{stringliteral}{"{}this\ is\ not\ fsspec://url"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00511}00511\ \ \ \ \ \textcolor{keyword}{assert}\ \textcolor{keywordflow}{not}\ icom.is\_fsspec\_url(\textcolor{stringliteral}{"{}\{'url':\ 'gs://pandas/somethingelse.com'\}"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00512}00512\ \ \ \ \ \textcolor{comment}{\#\ accept\ everything\ that\ conforms\ to\ RFC\ 3986\ schema}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00513}00513\ \ \ \ \ \textcolor{keyword}{assert}\ icom.is\_fsspec\_url(\textcolor{stringliteral}{"{}RFC-\/3986+compliant.spec://something"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00514}00514\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00515}00515\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00516}00516\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}encoding"{},\ [None,\ "{}utf-\/8"{}])}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00517}00517\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}format"{},\ ["{}csv"{},\ "{}json"{}])}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00518}00518\ \textcolor{keyword}{def\ }test\_codecs\_encoding(encoding,\ format):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00519}00519\ \ \ \ \ \textcolor{comment}{\#\ GH39247}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00520}00520\ \ \ \ \ expected\ =\ pd.DataFrame(}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00521}00521\ \ \ \ \ \ \ \ \ 1.1\ *\ np.arange(120).reshape((30,\ 4)),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00522}00522\ \ \ \ \ \ \ \ \ columns=pd.Index(list(\textcolor{stringliteral}{"{}ABCD"{}})),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00523}00523\ \ \ \ \ \ \ \ \ index=pd.Index([f\textcolor{stringliteral}{"{}i-\/\{i\}"{}}\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(30)]),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00524}00524\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00525}00525\ \ \ \ \ \textcolor{keyword}{with}\ tm.ensure\_clean()\ \textcolor{keyword}{as}\ path:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00526}00526\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ codecs.open(path,\ mode=\textcolor{stringliteral}{"{}w"{}},\ encoding=encoding)\ \textcolor{keyword}{as}\ handle:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00527}00527\ \ \ \ \ \ \ \ \ \ \ \ \ getattr(expected,\ f\textcolor{stringliteral}{"{}to\_\{format\}"{}})(handle)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00528}00528\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ codecs.open(path,\ mode=\textcolor{stringliteral}{"{}r"{}},\ encoding=encoding)\ \textcolor{keyword}{as}\ handle:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00529}00529\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ format\ ==\ \textcolor{stringliteral}{"{}csv"{}}:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00530}00530\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ df\ =\ pd.read\_csv(handle,\ index\_col=0)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00531}00531\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00532}00532\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ df\ =\ pd.read\_json(handle)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00533}00533\ \ \ \ \ tm.assert\_frame\_equal(expected,\ df)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00534}00534\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00535}00535\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00536}00536\ \textcolor{keyword}{def\ }test\_codecs\_get\_writer\_reader():}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00537}00537\ \ \ \ \ \textcolor{comment}{\#\ GH39247}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00538}00538\ \ \ \ \ expected\ =\ pd.DataFrame(}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00539}00539\ \ \ \ \ \ \ \ \ 1.1\ *\ np.arange(120).reshape((30,\ 4)),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00540}00540\ \ \ \ \ \ \ \ \ columns=pd.Index(list(\textcolor{stringliteral}{"{}ABCD"{}})),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00541}00541\ \ \ \ \ \ \ \ \ index=pd.Index([f\textcolor{stringliteral}{"{}i-\/\{i\}"{}}\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(30)]),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00542}00542\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00543}00543\ \ \ \ \ \textcolor{keyword}{with}\ tm.ensure\_clean()\ \textcolor{keyword}{as}\ path:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00544}00544\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(path,\ \textcolor{stringliteral}{"{}wb"{}})\ \textcolor{keyword}{as}\ handle:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00545}00545\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ codecs.getwriter(\textcolor{stringliteral}{"{}utf-\/8"{}})(handle)\ \textcolor{keyword}{as}\ encoded:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00546}00546\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ expected.to\_csv(encoded)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00547}00547\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(path,\ \textcolor{stringliteral}{"{}rb"{}})\ \textcolor{keyword}{as}\ handle:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00548}00548\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ codecs.getreader(\textcolor{stringliteral}{"{}utf-\/8"{}})(handle)\ \textcolor{keyword}{as}\ encoded:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00549}00549\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ df\ =\ pd.read\_csv(encoded,\ index\_col=0)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00550}00550\ \ \ \ \ tm.assert\_frame\_equal(expected,\ df)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00551}00551\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00552}00552\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00553}00553\ \textcolor{preprocessor}{@pytest.mark.parametrize}(}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00554}00554\ \ \ \ \ \textcolor{stringliteral}{"{}io\_class,mode,msg"{}},}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00555}00555\ \ \ \ \ [}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00556}00556\ \ \ \ \ \ \ \ \ (BytesIO,\ \textcolor{stringliteral}{"{}t"{}},\ \textcolor{stringliteral}{"{}a\ bytes-\/like\ object\ is\ required,\ not\ 'str'"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00557}00557\ \ \ \ \ \ \ \ \ (StringIO,\ \textcolor{stringliteral}{"{}b"{}},\ \textcolor{stringliteral}{"{}string\ argument\ expected,\ got\ 'bytes'"{}}),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00558}00558\ \ \ \ \ ],}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00559}00559\ )}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00560}00560\ \textcolor{keyword}{def\ }test\_explicit\_encoding(io\_class,\ mode,\ msg):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00561}00561\ \ \ \ \ \textcolor{comment}{\#\ GH39247;\ this\ test\ makes\ sure\ that\ if\ a\ user\ provides\ mode="{}*t"{}\ or\ "{}*b"{},}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00562}00562\ \ \ \ \ \textcolor{comment}{\#\ it\ is\ used.\ In\ the\ case\ of\ this\ test\ it\ leads\ to\ an\ error\ as\ intentionally\ the}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00563}00563\ \ \ \ \ \textcolor{comment}{\#\ wrong\ mode\ is\ requested}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00564}00564\ \ \ \ \ expected\ =\ pd.DataFrame(}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00565}00565\ \ \ \ \ \ \ \ \ 1.1\ *\ np.arange(120).reshape((30,\ 4)),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00566}00566\ \ \ \ \ \ \ \ \ columns=pd.Index(list(\textcolor{stringliteral}{"{}ABCD"{}})),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00567}00567\ \ \ \ \ \ \ \ \ index=pd.Index([f\textcolor{stringliteral}{"{}i-\/\{i\}"{}}\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(30)]),}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00568}00568\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00569}00569\ \ \ \ \ \textcolor{keyword}{with}\ io\_class()\ \textcolor{keyword}{as}\ buffer:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00570}00570\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError,\ match=msg):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00571}00571\ \ \ \ \ \ \ \ \ \ \ \ \ expected.to\_csv(buffer,\ mode=f\textcolor{stringliteral}{"{}w\{mode\}"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00572}00572\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00573}00573\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00574}00574\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}encoding\_errors"{},\ [None,\ "{}strict"{},\ "{}replace"{}])}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00575}00575\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}format"{},\ ["{}csv"{},\ "{}json"{}])}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00576}00576\ \textcolor{keyword}{def\ }test\_encoding\_errors(encoding\_errors,\ format):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00577}00577\ \ \ \ \ \textcolor{comment}{\#\ GH39450}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00578}00578\ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}'utf-\/8'\ codec\ can't\ decode\ byte"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00579}00579\ \ \ \ \ bad\_encoding\ =\ b\textcolor{stringliteral}{"{}\(\backslash\)xe4"{}}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00580}00580\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00581}00581\ \ \ \ \ \textcolor{keywordflow}{if}\ format\ ==\ \textcolor{stringliteral}{"{}csv"{}}:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00582}00582\ \ \ \ \ \ \ \ \ content\ =\ b\textcolor{stringliteral}{"{},"{}}\ +\ bad\_encoding\ +\ b\textcolor{stringliteral}{"{}\(\backslash\)n"{}}\ +\ bad\_encoding\ *\ 2\ +\ b\textcolor{stringliteral}{"{},"{}}\ +\ bad\_encoding}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00583}00583\ \ \ \ \ \ \ \ \ reader\ =\ partial(pd.read\_csv,\ index\_col=0)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00584}00584\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00585}00585\ \ \ \ \ \ \ \ \ content\ =\ (}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00586}00586\ \ \ \ \ \ \ \ \ \ \ \ \ b\textcolor{stringliteral}{'\{"{}'}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00587}00587\ \ \ \ \ \ \ \ \ \ \ \ \ +\ bad\_encoding\ *\ 2}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00588}00588\ \ \ \ \ \ \ \ \ \ \ \ \ +\ b\textcolor{stringliteral}{'"{}:\ \{"{}'}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00589}00589\ \ \ \ \ \ \ \ \ \ \ \ \ +\ bad\_encoding}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00590}00590\ \ \ \ \ \ \ \ \ \ \ \ \ +\ b\textcolor{stringliteral}{'"{}:"{}'}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00591}00591\ \ \ \ \ \ \ \ \ \ \ \ \ +\ bad\_encoding}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00592}00592\ \ \ \ \ \ \ \ \ \ \ \ \ +\ b\textcolor{stringliteral}{'"{}\}\}'}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00593}00593\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00594}00594\ \ \ \ \ \ \ \ \ reader\ =\ partial(pd.read\_json,\ orient=\textcolor{stringliteral}{"{}index"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00595}00595\ \ \ \ \ \textcolor{keyword}{with}\ tm.ensure\_clean()\ \textcolor{keyword}{as}\ path:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00596}00596\ \ \ \ \ \ \ \ \ file\ =\ Path(path)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00597}00597\ \ \ \ \ \ \ \ \ file.write\_bytes(content)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00598}00598\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00599}00599\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ encoding\_errors\ !=\ \textcolor{stringliteral}{"{}replace"{}}:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00600}00600\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(UnicodeDecodeError,\ match=msg):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00601}00601\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ reader(path,\ encoding\_errors=encoding\_errors)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00602}00602\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00603}00603\ \ \ \ \ \ \ \ \ \ \ \ \ df\ =\ reader(path,\ encoding\_errors=encoding\_errors)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00604}00604\ \ \ \ \ \ \ \ \ \ \ \ \ decoded\ =\ bad\_encoding.decode(errors=encoding\_errors)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00605}00605\ \ \ \ \ \ \ \ \ \ \ \ \ expected\ =\ pd.DataFrame(\{decoded:\ [decoded]\},\ index=[decoded\ *\ 2])}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00606}00606\ \ \ \ \ \ \ \ \ \ \ \ \ tm.assert\_frame\_equal(df,\ expected)}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00607}00607\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00608}00608\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00609}00609\ \textcolor{keyword}{def\ }test\_bad\_encdoing\_errors():}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00610}00610\ \ \ \ \ \textcolor{comment}{\#\ GH\ 39777}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00611}00611\ \ \ \ \ \textcolor{keyword}{with}\ tm.ensure\_clean()\ \textcolor{keyword}{as}\ path:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00612}00612\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(LookupError,\ match=\textcolor{stringliteral}{"{}unknown\ error\ handler\ name"{}}):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00613}00613\ \ \ \ \ \ \ \ \ \ \ \ \ icom.get\_handle(path,\ \textcolor{stringliteral}{"{}w"{}},\ errors=\textcolor{stringliteral}{"{}bad"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00614}00614\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00615}00615\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00616}00616\ \textcolor{keyword}{def\ }test\_errno\_attribute():}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00617}00617\ \ \ \ \ \textcolor{comment}{\#\ GH\ 13872}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00618}00618\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(FileNotFoundError,\ match=\textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)[Errno\ 2\(\backslash\)\(\backslash\)]"{}})\ \textcolor{keyword}{as}\ err:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00619}00619\ \ \ \ \ \ \ \ \ pd.read\_csv(\textcolor{stringliteral}{"{}doesnt\_exist"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00620}00620\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ err.errno\ ==\ errno.ENOENT}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00621}00621\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00622}00622\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00623}00623\ \textcolor{keyword}{def\ }test\_fail\_mmap():}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00624}00624\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(UnsupportedOperation,\ match=\textcolor{stringliteral}{"{}fileno"{}}):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00625}00625\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ \mbox{\hyperlink{classBytesIO}{BytesIO}}()\ \textcolor{keyword}{as}\ buffer:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00626}00626\ \ \ \ \ \ \ \ \ \ \ \ \ icom.get\_handle(buffer,\ \textcolor{stringliteral}{"{}rb"{}},\ memory\_map=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00627}00627\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00628}00628\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00629}00629\ \textcolor{keyword}{def\ }test\_close\_on\_error():}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00630}00630\ \ \ \ \ \textcolor{comment}{\#\ GH\ 47136}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00631}00631\ \ \ \ \ \textcolor{keyword}{class\ }TestError:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00632}00632\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }close(self):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00633}00633\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classOSError}{OSError}}(\textcolor{stringliteral}{"{}test"{}})}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00634}00634\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00635}00635\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(OSError,\ match=\textcolor{stringliteral}{"{}test"{}}):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00636}00636\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ \mbox{\hyperlink{classBytesIO}{BytesIO}}()\ \textcolor{keyword}{as}\ buffer:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00637}00637\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ icom.get\_handle(buffer,\ \textcolor{stringliteral}{"{}rb"{}})\ \textcolor{keyword}{as}\ handles:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00638}00638\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ handles.created\_handles.append(TestError())}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00639}00639\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00640}00640\ }
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00641}00641\ \textcolor{preprocessor}{@pytest.mark.parametrize}(}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00642}00642\ \ \ \ \ \textcolor{stringliteral}{"{}reader"{}},}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00643}00643\ \ \ \ \ [}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00644}00644\ \ \ \ \ \ \ \ \ pd.read\_csv,}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00645}00645\ \ \ \ \ \ \ \ \ pd.read\_fwf,}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00646}00646\ \ \ \ \ \ \ \ \ pd.read\_excel,}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00647}00647\ \ \ \ \ \ \ \ \ pd.read\_feather,}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00648}00648\ \ \ \ \ \ \ \ \ pd.read\_hdf,}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00649}00649\ \ \ \ \ \ \ \ \ pd.read\_stata,}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00650}00650\ \ \ \ \ \ \ \ \ pd.read\_sas,}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00651}00651\ \ \ \ \ \ \ \ \ pd.read\_json,}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00652}00652\ \ \ \ \ \ \ \ \ pd.read\_pickle,}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00653}00653\ \ \ \ \ ],}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00654}00654\ )}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00655}00655\ \textcolor{keyword}{def\ }test\_pickle\_reader(reader):}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00656}00656\ \ \ \ \ \textcolor{comment}{\#\ GH\ 22265}}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00657}00657\ \ \ \ \ \textcolor{keyword}{with}\ \mbox{\hyperlink{classBytesIO}{BytesIO}}()\ \textcolor{keyword}{as}\ buffer:}
\DoxyCodeLine{\Hypertarget{pandas_2tests_2io_2test__common_8py_source_l00658}00658\ \ \ \ \ \ \ \ \ pickle.dump(reader,\ buffer)}

\end{DoxyCode}
