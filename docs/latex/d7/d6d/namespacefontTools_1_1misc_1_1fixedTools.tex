\doxysection{font\+Tools.\+misc.\+fixed\+Tools Namespace Reference}
\hypertarget{namespacefontTools_1_1misc_1_1fixedTools}{}\label{namespacefontTools_1_1misc_1_1fixedTools}\index{fontTools.misc.fixedTools@{fontTools.misc.fixedTools}}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacefontTools_1_1misc_1_1fixedTools_a1a3ef8b9e34094c9f16283f9cdf13ff2}{fixed\+To\+Float}} (value, precision\+Bits)
\item 
\mbox{\hyperlink{namespacefontTools_1_1misc_1_1fixedTools_a93f64d5f942e5e4595cbac138789dc30}{float\+To\+Fixed}} (value, precision\+Bits)
\item 
\mbox{\hyperlink{namespacefontTools_1_1misc_1_1fixedTools_a8be3ecc75ea3dbd47cb2a6e694794df5}{float\+To\+Fixed\+To\+Float}} (value, precision\+Bits)
\item 
\mbox{\hyperlink{namespacefontTools_1_1misc_1_1fixedTools_a0cd54c36c76287d50d06121dbad2f45f}{fixed\+To\+Str}} (value, precision\+Bits)
\item 
\mbox{\hyperlink{namespacefontTools_1_1misc_1_1fixedTools_a6f54c1606acd472799fdc0b9bdf2190f}{str\+To\+Fixed}} (string, precision\+Bits)
\item 
\mbox{\hyperlink{namespacefontTools_1_1misc_1_1fixedTools_ab0f3017c07e3cfaf8ad41709f77ca5dc}{str\+To\+Fixed\+To\+Float}} (string, precision\+Bits)
\item 
\mbox{\hyperlink{namespacefontTools_1_1misc_1_1fixedTools_ad1f43fe8c4ede729ec61ce4c49ea59b9}{float\+To\+Fixed\+To\+Str}} (value, precision\+Bits)
\item 
\mbox{\hyperlink{namespacefontTools_1_1misc_1_1fixedTools_a414ba78cb2b5c022c229dc19396d8a6a}{ensure\+Version\+Is\+Long}} (value)
\item 
\mbox{\hyperlink{namespacefontTools_1_1misc_1_1fixedTools_a33786c250201a793489679b57b346dd2}{version\+To\+Fixed}} (value)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacefontTools_1_1misc_1_1fixedTools_af7e522f51df89c41363f136ee74dd631}{log}} = logging.\+get\+Logger(\mbox{\hyperlink{class____name____}{\+\_\+\+\_\+name\+\_\+\+\_\+}})
\item 
list \mbox{\hyperlink{namespacefontTools_1_1misc_1_1fixedTools_a6a6b5393bd1e31f91fda2ff179821205}{\+\_\+\+\_\+all\+\_\+\+\_\+}}
\item 
int \mbox{\hyperlink{namespacefontTools_1_1misc_1_1fixedTools_a91262f3364d2b110f054577438d68e21}{MAX\+\_\+\+F2\+DOT14}} = 0x7\+FFF / (1 $<$$<$ 14)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}The `OpenType specification <https://docs.microsoft.com/en-us/typography/opentype/spec/otff#data-types>`_
defines two fixed-point data types:

``Fixed``
    A 32-bit signed fixed-point number with a 16 bit twos-complement
    magnitude component and 16 fractional bits.
``F2DOT14``
    A 16-bit signed fixed-point number with a 2 bit twos-complement
    magnitude component and 14 fractional bits.

To support reading and writing data with these data types, this module provides
functions for converting between fixed-point, float and string representations.

.. data:: MAX_F2DOT14

    The maximum value that can still fit in an F2Dot14. (1.99993896484375)
\end{DoxyVerb}
 

\doxysubsection{Function Documentation}
\Hypertarget{namespacefontTools_1_1misc_1_1fixedTools_a414ba78cb2b5c022c229dc19396d8a6a}\index{fontTools.misc.fixedTools@{fontTools.misc.fixedTools}!ensureVersionIsLong@{ensureVersionIsLong}}
\index{ensureVersionIsLong@{ensureVersionIsLong}!fontTools.misc.fixedTools@{fontTools.misc.fixedTools}}
\doxysubsubsection{\texorpdfstring{ensureVersionIsLong()}{ensureVersionIsLong()}}
{\footnotesize\ttfamily \label{namespacefontTools_1_1misc_1_1fixedTools_a414ba78cb2b5c022c229dc19396d8a6a} 
font\+Tools.\+misc.\+fixed\+Tools.\+ensure\+Version\+Is\+Long (\begin{DoxyParamCaption}\item[{}]{value}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Ensure a table version is an unsigned long.

OpenType table version numbers are expressed as a single unsigned long
comprising of an unsigned short major version and unsigned short minor
version. This function detects if the value to be used as a version number
looks too small (i.e. is less than ``0x10000``), and converts it to
fixed-point using :func:`floatToFixed` if so.

Args:
        value (Number): a candidate table version number.

Returns:
        int: A table version number, possibly corrected to fixed-point.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{fixedTools_8py_source_l00216}{216}} of file \mbox{\hyperlink{fixedTools_8py_source}{fixed\+Tools.\+py}}.



References \mbox{\hyperlink{fixedTools_8py_source_l00063}{float\+To\+Fixed()}}.



Referenced by \mbox{\hyperlink{fixedTools_8py_source_l00242}{version\+To\+Fixed()}}.

\Hypertarget{namespacefontTools_1_1misc_1_1fixedTools_a1a3ef8b9e34094c9f16283f9cdf13ff2}\index{fontTools.misc.fixedTools@{fontTools.misc.fixedTools}!fixedToFloat@{fixedToFloat}}
\index{fixedToFloat@{fixedToFloat}!fontTools.misc.fixedTools@{fontTools.misc.fixedTools}}
\doxysubsubsection{\texorpdfstring{fixedToFloat()}{fixedToFloat()}}
{\footnotesize\ttfamily \label{namespacefontTools_1_1misc_1_1fixedTools_a1a3ef8b9e34094c9f16283f9cdf13ff2} 
font\+Tools.\+misc.\+fixed\+Tools.\+fixed\+To\+Float (\begin{DoxyParamCaption}\item[{}]{value}{, }\item[{}]{precision\+Bits}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Converts a fixed-point number to a float given the number of
precision bits.

Args:
        value (int): Number in fixed-point format.
        precisionBits (int): Number of precision bits.

Returns:
        Floating point value.

Examples::

        >>> import math
        >>> f = fixedToFloat(-10139, precisionBits=14)
        >>> math.isclose(f, -0.61883544921875)
        True
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{fixedTools_8py_source_l00042}{42}} of file \mbox{\hyperlink{fixedTools_8py_source}{fixed\+Tools.\+py}}.

\Hypertarget{namespacefontTools_1_1misc_1_1fixedTools_a0cd54c36c76287d50d06121dbad2f45f}\index{fontTools.misc.fixedTools@{fontTools.misc.fixedTools}!fixedToStr@{fixedToStr}}
\index{fixedToStr@{fixedToStr}!fontTools.misc.fixedTools@{fontTools.misc.fixedTools}}
\doxysubsubsection{\texorpdfstring{fixedToStr()}{fixedToStr()}}
{\footnotesize\ttfamily \label{namespacefontTools_1_1misc_1_1fixedTools_a0cd54c36c76287d50d06121dbad2f45f} 
font\+Tools.\+misc.\+fixed\+Tools.\+fixed\+To\+Str (\begin{DoxyParamCaption}\item[{}]{value}{, }\item[{}]{precision\+Bits}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Converts a fixed-point number to a string representing a decimal float.

This chooses the float that has the shortest decimal representation (the least
number of fractional decimal digits).

For example, to convert a fixed-point number in a 2.14 format, use
``precisionBits=14``::

        >>> fixedToStr(-10139, precisionBits=14)
        '-0.61884'

This is pretty slow compared to the simple division used in ``fixedToFloat``.
Use sporadically when you need to serialize or print the fixed-point number in
a human-readable form.
It uses nearestMultipleShortestRepr under the hood.

Args:
        value (int): The fixed-point value to convert.
        precisionBits (int): Number of precision bits, *up to a maximum of 16*.

Returns:
        str: A string representation of the value.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{fixedTools_8py_source_l00113}{113}} of file \mbox{\hyperlink{fixedTools_8py_source}{fixed\+Tools.\+py}}.

\Hypertarget{namespacefontTools_1_1misc_1_1fixedTools_a93f64d5f942e5e4595cbac138789dc30}\index{fontTools.misc.fixedTools@{fontTools.misc.fixedTools}!floatToFixed@{floatToFixed}}
\index{floatToFixed@{floatToFixed}!fontTools.misc.fixedTools@{fontTools.misc.fixedTools}}
\doxysubsubsection{\texorpdfstring{floatToFixed()}{floatToFixed()}}
{\footnotesize\ttfamily \label{namespacefontTools_1_1misc_1_1fixedTools_a93f64d5f942e5e4595cbac138789dc30} 
font\+Tools.\+misc.\+fixed\+Tools.\+float\+To\+Fixed (\begin{DoxyParamCaption}\item[{}]{value}{, }\item[{}]{precision\+Bits}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Converts a float to a fixed-point number given the number of
precision bits.

Args:
        value (float): Floating point value.
        precisionBits (int): Number of precision bits.

Returns:
        int: Fixed-point representation.

Examples::

        >>> floatToFixed(-0.61883544921875, precisionBits=14)
        -10139
        >>> floatToFixed(-0.61884, precisionBits=14)
        -10139
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{fixedTools_8py_source_l00063}{63}} of file \mbox{\hyperlink{fixedTools_8py_source}{fixed\+Tools.\+py}}.



Referenced by \mbox{\hyperlink{fixedTools_8py_source_l00216}{ensure\+Version\+Is\+Long()}}.

\Hypertarget{namespacefontTools_1_1misc_1_1fixedTools_a8be3ecc75ea3dbd47cb2a6e694794df5}\index{fontTools.misc.fixedTools@{fontTools.misc.fixedTools}!floatToFixedToFloat@{floatToFixedToFloat}}
\index{floatToFixedToFloat@{floatToFixedToFloat}!fontTools.misc.fixedTools@{fontTools.misc.fixedTools}}
\doxysubsubsection{\texorpdfstring{floatToFixedToFloat()}{floatToFixedToFloat()}}
{\footnotesize\ttfamily \label{namespacefontTools_1_1misc_1_1fixedTools_a8be3ecc75ea3dbd47cb2a6e694794df5} 
font\+Tools.\+misc.\+fixed\+Tools.\+float\+To\+Fixed\+To\+Float (\begin{DoxyParamCaption}\item[{}]{value}{, }\item[{}]{precision\+Bits}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Converts a float to a fixed-point number and back again.

By converting the float to fixed, rounding it, and converting it back
to float again, this returns a floating point values which is exactly
representable in fixed-point format.

Note: this **is** equivalent to ``fixedToFloat(floatToFixed(value))``.

Args:
        value (float): The input floating point value.
        precisionBits (int): Number of precision bits.

Returns:
        float: The transformed and rounded value.

Examples::
        >>> import math
        >>> f1 = -0.61884
        >>> f2 = floatToFixedToFloat(-0.61884, precisionBits=14)
        >>> f1 != f2
        True
        >>> math.isclose(f2, -0.61883544921875)
        True
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{fixedTools_8py_source_l00084}{84}} of file \mbox{\hyperlink{fixedTools_8py_source}{fixed\+Tools.\+py}}.

\Hypertarget{namespacefontTools_1_1misc_1_1fixedTools_ad1f43fe8c4ede729ec61ce4c49ea59b9}\index{fontTools.misc.fixedTools@{fontTools.misc.fixedTools}!floatToFixedToStr@{floatToFixedToStr}}
\index{floatToFixedToStr@{floatToFixedToStr}!fontTools.misc.fixedTools@{fontTools.misc.fixedTools}}
\doxysubsubsection{\texorpdfstring{floatToFixedToStr()}{floatToFixedToStr()}}
{\footnotesize\ttfamily \label{namespacefontTools_1_1misc_1_1fixedTools_ad1f43fe8c4ede729ec61ce4c49ea59b9} 
font\+Tools.\+misc.\+fixed\+Tools.\+float\+To\+Fixed\+To\+Str (\begin{DoxyParamCaption}\item[{}]{value}{, }\item[{}]{precision\+Bits}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Convert float to string with fixed-point rounding.

This uses the shortest decimal representation (ie. the least
number of fractional decimal digits) to represent the equivalent
fixed-point number with ``precisionBits`` fractional binary digits.
It uses nearestMultipleShortestRepr under the hood.

>>> floatToFixedToStr(-0.61883544921875, precisionBits=14)
'-0.61884'

Args:
        value (float): The float value to convert.
        precisionBits (int): Number of precision bits, *up to a maximum of 16*.

Returns:
        str: A string representation of the value.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{fixedTools_8py_source_l00193}{193}} of file \mbox{\hyperlink{fixedTools_8py_source}{fixed\+Tools.\+py}}.

\Hypertarget{namespacefontTools_1_1misc_1_1fixedTools_a6f54c1606acd472799fdc0b9bdf2190f}\index{fontTools.misc.fixedTools@{fontTools.misc.fixedTools}!strToFixed@{strToFixed}}
\index{strToFixed@{strToFixed}!fontTools.misc.fixedTools@{fontTools.misc.fixedTools}}
\doxysubsubsection{\texorpdfstring{strToFixed()}{strToFixed()}}
{\footnotesize\ttfamily \label{namespacefontTools_1_1misc_1_1fixedTools_a6f54c1606acd472799fdc0b9bdf2190f} 
font\+Tools.\+misc.\+fixed\+Tools.\+str\+To\+Fixed (\begin{DoxyParamCaption}\item[{}]{string}{, }\item[{}]{precision\+Bits}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Converts a string representing a decimal float to a fixed-point number.

Args:
        string (str): A string representing a decimal float.
        precisionBits (int): Number of precision bits, *up to a maximum of 16*.

Returns:
        int: Fixed-point representation.

Examples::

        >>> ## to convert a float string to a 2.14 fixed-point number:
        >>> strToFixed('-0.61884', precisionBits=14)
        -10139
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{fixedTools_8py_source_l00141}{141}} of file \mbox{\hyperlink{fixedTools_8py_source}{fixed\+Tools.\+py}}.

\Hypertarget{namespacefontTools_1_1misc_1_1fixedTools_ab0f3017c07e3cfaf8ad41709f77ca5dc}\index{fontTools.misc.fixedTools@{fontTools.misc.fixedTools}!strToFixedToFloat@{strToFixedToFloat}}
\index{strToFixedToFloat@{strToFixedToFloat}!fontTools.misc.fixedTools@{fontTools.misc.fixedTools}}
\doxysubsubsection{\texorpdfstring{strToFixedToFloat()}{strToFixedToFloat()}}
{\footnotesize\ttfamily \label{namespacefontTools_1_1misc_1_1fixedTools_ab0f3017c07e3cfaf8ad41709f77ca5dc} 
font\+Tools.\+misc.\+fixed\+Tools.\+str\+To\+Fixed\+To\+Float (\begin{DoxyParamCaption}\item[{}]{string}{, }\item[{}]{precision\+Bits}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Convert a string to a decimal float with fixed-point rounding.

This first converts string to a float, then turns it into a fixed-point
number with ``precisionBits`` fractional binary digits, then back to a
float again.

This is simply a shorthand for fixedToFloat(floatToFixed(float(s))).

Args:
        string (str): A string representing a decimal float.
        precisionBits (int): Number of precision bits.

Returns:
        float: The transformed and rounded value.

Examples::

        >>> import math
        >>> s = '-0.61884'
        >>> bits = 14
        >>> f = strToFixedToFloat(s, precisionBits=bits)
        >>> math.isclose(f, -0.61883544921875)
        True
        >>> f == fixedToFloat(floatToFixed(float(s), precisionBits=bits), precisionBits=bits)
        True
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{fixedTools_8py_source_l00161}{161}} of file \mbox{\hyperlink{fixedTools_8py_source}{fixed\+Tools.\+py}}.

\Hypertarget{namespacefontTools_1_1misc_1_1fixedTools_a33786c250201a793489679b57b346dd2}\index{fontTools.misc.fixedTools@{fontTools.misc.fixedTools}!versionToFixed@{versionToFixed}}
\index{versionToFixed@{versionToFixed}!fontTools.misc.fixedTools@{fontTools.misc.fixedTools}}
\doxysubsubsection{\texorpdfstring{versionToFixed()}{versionToFixed()}}
{\footnotesize\ttfamily \label{namespacefontTools_1_1misc_1_1fixedTools_a33786c250201a793489679b57b346dd2} 
font\+Tools.\+misc.\+fixed\+Tools.\+version\+To\+Fixed (\begin{DoxyParamCaption}\item[{}]{value}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Ensure a table version number is fixed-point.

Args:
        value (str): a candidate table version number.

Returns:
        int: A table version number, possibly corrected to fixed-point.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{fixedTools_8py_source_l00242}{242}} of file \mbox{\hyperlink{fixedTools_8py_source}{fixed\+Tools.\+py}}.



References \mbox{\hyperlink{fixedTools_8py_source_l00216}{ensure\+Version\+Is\+Long()}}.



\doxysubsection{Variable Documentation}
\Hypertarget{namespacefontTools_1_1misc_1_1fixedTools_a6a6b5393bd1e31f91fda2ff179821205}\index{fontTools.misc.fixedTools@{fontTools.misc.fixedTools}!\_\_all\_\_@{\_\_all\_\_}}
\index{\_\_all\_\_@{\_\_all\_\_}!fontTools.misc.fixedTools@{fontTools.misc.fixedTools}}
\doxysubsubsection{\texorpdfstring{\_\_all\_\_}{\_\_all\_\_}}
{\footnotesize\ttfamily \label{namespacefontTools_1_1misc_1_1fixedTools_a6a6b5393bd1e31f91fda2ff179821205} 
list font\+Tools.\+misc.\+fixed\+Tools.\+\_\+\+\_\+all\+\_\+\+\_\+\hspace{0.3cm}{\ttfamily [private]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ =\ \ [}
\DoxyCodeLine{00002\ \ \ \ \ \textcolor{stringliteral}{"{}MAX\_F2DOT14"{}},}
\DoxyCodeLine{00003\ \ \ \ \ \textcolor{stringliteral}{"{}fixedToFloat"{}},}
\DoxyCodeLine{00004\ \ \ \ \ \textcolor{stringliteral}{"{}floatToFixed"{}},}
\DoxyCodeLine{00005\ \ \ \ \ \textcolor{stringliteral}{"{}floatToFixedToFloat"{}},}
\DoxyCodeLine{00006\ \ \ \ \ \textcolor{stringliteral}{"{}floatToFixedToStr"{}},}
\DoxyCodeLine{00007\ \ \ \ \ \textcolor{stringliteral}{"{}fixedToStr"{}},}
\DoxyCodeLine{00008\ \ \ \ \ \textcolor{stringliteral}{"{}strToFixed"{}},}
\DoxyCodeLine{00009\ \ \ \ \ \textcolor{stringliteral}{"{}strToFixedToFloat"{}},}
\DoxyCodeLine{00010\ \ \ \ \ \textcolor{stringliteral}{"{}ensureVersionIsLong"{}},}
\DoxyCodeLine{00011\ \ \ \ \ \textcolor{stringliteral}{"{}versionToFixed"{}},}
\DoxyCodeLine{00012\ ]}

\end{DoxyCode}


Definition at line \mbox{\hyperlink{fixedTools_8py_source_l00025}{25}} of file \mbox{\hyperlink{fixedTools_8py_source}{fixed\+Tools.\+py}}.

\Hypertarget{namespacefontTools_1_1misc_1_1fixedTools_af7e522f51df89c41363f136ee74dd631}\index{fontTools.misc.fixedTools@{fontTools.misc.fixedTools}!log@{log}}
\index{log@{log}!fontTools.misc.fixedTools@{fontTools.misc.fixedTools}}
\doxysubsubsection{\texorpdfstring{log}{log}}
{\footnotesize\ttfamily \label{namespacefontTools_1_1misc_1_1fixedTools_af7e522f51df89c41363f136ee74dd631} 
font\+Tools.\+misc.\+fixed\+Tools.\+log = logging.\+get\+Logger(\mbox{\hyperlink{class____name____}{\+\_\+\+\_\+name\+\_\+\+\_\+}})}



Definition at line \mbox{\hyperlink{fixedTools_8py_source_l00023}{23}} of file \mbox{\hyperlink{fixedTools_8py_source}{fixed\+Tools.\+py}}.

\Hypertarget{namespacefontTools_1_1misc_1_1fixedTools_a91262f3364d2b110f054577438d68e21}\index{fontTools.misc.fixedTools@{fontTools.misc.fixedTools}!MAX\_F2DOT14@{MAX\_F2DOT14}}
\index{MAX\_F2DOT14@{MAX\_F2DOT14}!fontTools.misc.fixedTools@{fontTools.misc.fixedTools}}
\doxysubsubsection{\texorpdfstring{MAX\_F2DOT14}{MAX\_F2DOT14}}
{\footnotesize\ttfamily \label{namespacefontTools_1_1misc_1_1fixedTools_a91262f3364d2b110f054577438d68e21} 
int font\+Tools.\+misc.\+fixed\+Tools.\+MAX\+\_\+\+F2\+DOT14 = 0x7\+FFF / (1 $<$$<$ 14)}



Definition at line \mbox{\hyperlink{fixedTools_8py_source_l00039}{39}} of file \mbox{\hyperlink{fixedTools_8py_source}{fixed\+Tools.\+py}}.

