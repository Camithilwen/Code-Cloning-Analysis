\doxysection{test\+\_\+c\+\_\+parser\+\_\+only.\+py}
\hypertarget{test__c__parser__only_8py_source}{}\label{test__c__parser__only_8py_source}\index{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/pandas/tests/io/parser/test\_c\_parser\_only.py@{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/pandas/tests/io/parser/test\_c\_parser\_only.py}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00001}\mbox{\hyperlink{namespacepandas_1_1tests_1_1io_1_1parser_1_1test__c__parser__only}{00001}}\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00002}00002\ \textcolor{stringliteral}{Tests\ that\ apply\ specifically\ to\ the\ CParser.\ Unless\ specifically\ stated}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00003}00003\ \textcolor{stringliteral}{as\ a\ CParser-\/specific\ issue,\ the\ goal\ is\ to\ eventually\ move\ as\ many\ of}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00004}00004\ \textcolor{stringliteral}{these\ tests\ out\ of\ this\ module\ as\ soon\ as\ the\ Python\ parser\ can\ accept}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00005}00005\ \textcolor{stringliteral}{further\ arguments\ when\ parsing.}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00006}00006\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00007}00007\ \textcolor{keyword}{from}\ decimal\ \textcolor{keyword}{import}\ Decimal}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00008}00008\ \textcolor{keyword}{from}\ io\ \textcolor{keyword}{import}\ (}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00009}00009\ \ \ \ \ BytesIO,}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00010}00010\ \ \ \ \ StringIO,}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00011}00011\ \ \ \ \ TextIOWrapper,}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00012}00012\ )}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00013}00013\ \textcolor{keyword}{import}\ mmap}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00014}00014\ \textcolor{keyword}{import}\ os}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00015}00015\ \textcolor{keyword}{import}\ tarfile}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00016}00016\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00017}00017\ \textcolor{keyword}{import}\ numpy\ \textcolor{keyword}{as}\ np}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00018}00018\ \textcolor{keyword}{import}\ pytest}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00019}00019\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00020}00020\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacepandas_1_1compat_1_1numpy}{pandas.compat.numpy}}\ \textcolor{keyword}{import}\ np\_version\_gte1p24}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00021}00021\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacepandas_1_1errors}{pandas.errors}}\ \textcolor{keyword}{import}\ (}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00022}00022\ \ \ \ \ ParserError,}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00023}00023\ \ \ \ \ ParserWarning,}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00024}00024\ )}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00025}00025\ \textcolor{keyword}{import}\ \mbox{\hyperlink{namespacepandas_1_1util_1_1__test__decorators}{pandas.util.\_test\_decorators}}\ \textcolor{keyword}{as}\ td}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00026}00026\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00027}00027\ \textcolor{keyword}{from}\ pandas\ \textcolor{keyword}{import}\ (}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00028}00028\ \ \ \ \ DataFrame,}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00029}00029\ \ \ \ \ concat,}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00030}00030\ )}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00031}00031\ \textcolor{keyword}{import}\ \mbox{\hyperlink{namespacepandas_1_1__testing}{pandas.\_testing}}\ \textcolor{keyword}{as}\ tm}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00032}00032\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00034}00034\ \textcolor{preprocessor}{@pytest.mark.parametrize}(}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00035}00035\ \ \ \ \ \textcolor{stringliteral}{"{}malformed"{}},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00036}00036\ \ \ \ \ [\textcolor{stringliteral}{"{}1\(\backslash\)r1\(\backslash\)r1\(\backslash\)r\ 1\(\backslash\)r\ 1\(\backslash\)r"{}},\ \textcolor{stringliteral}{"{}1\(\backslash\)r1\(\backslash\)r1\(\backslash\)r\ 1\(\backslash\)r\ 1\(\backslash\)r11\(\backslash\)r"{}},\ \textcolor{stringliteral}{"{}1\(\backslash\)r1\(\backslash\)r1\(\backslash\)r\ 1\(\backslash\)r\ 1\(\backslash\)r11\(\backslash\)r1\(\backslash\)r"{}}],}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00037}00037\ \ \ \ \ ids=[\textcolor{stringliteral}{"{}words\ pointer"{}},\ \textcolor{stringliteral}{"{}stream\ pointer"{}},\ \textcolor{stringliteral}{"{}lines\ pointer"{}}],}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00038}00038\ )}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00039}00039\ \textcolor{keyword}{def\ }test\_buffer\_overflow(c\_parser\_only,\ malformed):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00040}00040\ \ \ \ \ \textcolor{comment}{\#\ see\ gh-\/9205:\ test\ certain\ malformed\ input\ files\ that\ cause}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00041}00041\ \ \ \ \ \textcolor{comment}{\#\ buffer\ overflows\ in\ tokenizer.c}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00042}00042\ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}Buffer\ overflow\ caught\ -\/\ possible\ malformed\ input\ file."{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00043}00043\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00044}00044\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00045}00045\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ParserError,\ match=msg):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00046}00046\ \ \ \ \ \ \ \ \ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(malformed))}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00047}00047\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00048}00048\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00049}00049\ \textcolor{keyword}{def\ }test\_delim\_whitespace\_custom\_terminator(c\_parser\_only):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00050}00050\ \ \ \ \ \textcolor{comment}{\#\ See\ gh-\/12912}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00051}00051\ \ \ \ \ data\ =\ \textcolor{stringliteral}{"{}a\ b\ c\string~1\ 2\ 3\string~4\ 5\ 6\string~7\ 8\ 9"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00052}00052\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00053}00053\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00054}00054\ \ \ \ \ depr\_msg\ =\ \textcolor{stringliteral}{"{}The\ 'delim\_whitespace'\ keyword\ in\ pd.read\_csv\ is\ deprecated"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00055}00055\ \ \ \ \ \textcolor{keyword}{with}\ tm.assert\_produces\_warning(}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00056}00056\ \ \ \ \ \ \ \ \ FutureWarning,\ match=depr\_msg,\ check\_stacklevel=\textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00057}00057\ \ \ \ \ ):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00058}00058\ \ \ \ \ \ \ \ \ df\ =\ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(data),\ lineterminator=\textcolor{stringliteral}{"{}\string~"{}},\ delim\_whitespace=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00059}00059\ \ \ \ \ expected\ =\ DataFrame([[1,\ 2,\ 3],\ [4,\ 5,\ 6],\ [7,\ 8,\ 9]],\ columns=[\textcolor{stringliteral}{"{}a"{}},\ \textcolor{stringliteral}{"{}b"{}},\ \textcolor{stringliteral}{"{}c"{}}])}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00060}00060\ \ \ \ \ tm.assert\_frame\_equal(df,\ expected)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00061}00061\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00062}00062\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00063}00063\ \textcolor{keyword}{def\ }test\_dtype\_and\_names\_error(c\_parser\_only):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00064}00064\ \ \ \ \ \textcolor{comment}{\#\ see\ gh-\/8833:\ passing\ both\ dtype\ and\ names}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00065}00065\ \ \ \ \ \textcolor{comment}{\#\ resulting\ in\ an\ error\ reporting\ issue}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00066}00066\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00067}00067\ \ \ \ \ data\ =\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00068}00068\ \textcolor{stringliteral}{1.0\ 1}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00069}00069\ \textcolor{stringliteral}{2.0\ 2}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00070}00070\ \textcolor{stringliteral}{3.0\ 3}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00071}00071\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00072}00072\ \ \ \ \ \textcolor{comment}{\#\ base\ cases}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00073}00073\ \ \ \ \ result\ =\ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(data),\ sep=\textcolor{stringliteral}{r"{}\(\backslash\)s+"{}},\ header=\textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00074}00074\ \ \ \ \ expected\ =\ DataFrame([[1.0,\ 1],\ [2.0,\ 2],\ [3.0,\ 3]])}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00075}00075\ \ \ \ \ tm.assert\_frame\_equal(result,\ expected)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00076}00076\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00077}00077\ \ \ \ \ result\ =\ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(data),\ sep=\textcolor{stringliteral}{r"{}\(\backslash\)s+"{}},\ header=\textcolor{keywordtype}{None},\ names=[\textcolor{stringliteral}{"{}a"{}},\ \textcolor{stringliteral}{"{}b"{}}])}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00078}00078\ \ \ \ \ expected\ =\ DataFrame([[1.0,\ 1],\ [2.0,\ 2],\ [3.0,\ 3]],\ columns=[\textcolor{stringliteral}{"{}a"{}},\ \textcolor{stringliteral}{"{}b"{}}])}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00079}00079\ \ \ \ \ tm.assert\_frame\_equal(result,\ expected)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00080}00080\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00081}00081\ \ \ \ \ \textcolor{comment}{\#\ fallback\ casting}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00082}00082\ \ \ \ \ result\ =\ parser.read\_csv(}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00083}00083\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classStringIO}{StringIO}}(data),\ sep=\textcolor{stringliteral}{r"{}\(\backslash\)s+"{}},\ header=\textcolor{keywordtype}{None},\ names=[\textcolor{stringliteral}{"{}a"{}},\ \textcolor{stringliteral}{"{}b"{}}],\ dtype=\{\textcolor{stringliteral}{"{}a"{}}:\ np.int32\}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00084}00084\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00085}00085\ \ \ \ \ expected\ =\ DataFrame([[1,\ 1],\ [2,\ 2],\ [3,\ 3]],\ columns=[\textcolor{stringliteral}{"{}a"{}},\ \textcolor{stringliteral}{"{}b"{}}])}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00086}00086\ \ \ \ \ expected[\textcolor{stringliteral}{"{}a"{}}]\ =\ expected[\textcolor{stringliteral}{"{}a"{}}].astype(np.int32)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00087}00087\ \ \ \ \ tm.assert\_frame\_equal(result,\ expected)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00088}00088\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00089}00089\ \ \ \ \ data\ =\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00090}00090\ \textcolor{stringliteral}{1.0\ 1}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00091}00091\ \textcolor{stringliteral}{nan\ 2}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00092}00092\ \textcolor{stringliteral}{3.0\ 3}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00093}00093\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00094}00094\ \ \ \ \ \textcolor{comment}{\#\ fallback\ casting,\ but\ not\ castable}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00095}00095\ \ \ \ \ warning\ =\ RuntimeWarning\ \textcolor{keywordflow}{if}\ np\_version\_gte1p24\ \textcolor{keywordflow}{else}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00096}00096\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError,\ match=\textcolor{stringliteral}{"{}cannot\ safely\ convert"{}}):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00097}00097\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ tm.assert\_produces\_warning(warning,\ check\_stacklevel=\textcolor{keyword}{False}):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00098}00098\ \ \ \ \ \ \ \ \ \ \ \ \ parser.read\_csv(}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00099}00099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classStringIO}{StringIO}}(data),}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00100}00100\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sep=\textcolor{stringliteral}{r"{}\(\backslash\)s+"{}},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00101}00101\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ header=\textcolor{keywordtype}{None},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00102}00102\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ names=[\textcolor{stringliteral}{"{}a"{}},\ \textcolor{stringliteral}{"{}b"{}}],}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00103}00103\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=\{\textcolor{stringliteral}{"{}a"{}}:\ np.int32\},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00104}00104\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00105}00105\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00106}00106\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00107}00107\ \textcolor{preprocessor}{@pytest.mark.parametrize}(}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00108}00108\ \ \ \ \ \textcolor{stringliteral}{"{}match,kwargs"{}},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00109}00109\ \ \ \ \ [}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00110}00110\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ For\ each\ of\ these\ cases,\ all\ of\ the\ dtypes\ are\ valid,\ just\ unsupported.}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00111}00111\ \ \ \ \ \ \ \ \ (}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00112}00112\ \ \ \ \ \ \ \ \ \ \ \ \ (}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00113}00113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}the\ dtype\ datetime64\ is\ not\ supported\ for\ parsing,\ "{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00114}00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}pass\ this\ column\ using\ parse\_dates\ instead"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00115}00115\ \ \ \ \ \ \ \ \ \ \ \ \ ),}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00116}00116\ \ \ \ \ \ \ \ \ \ \ \ \ \{\textcolor{stringliteral}{"{}dtype"{}}:\ \{\textcolor{stringliteral}{"{}A"{}}:\ \textcolor{stringliteral}{"{}datetime64"{}},\ \textcolor{stringliteral}{"{}B"{}}:\ \textcolor{stringliteral}{"{}float64"{}}\}\},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00117}00117\ \ \ \ \ \ \ \ \ ),}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00118}00118\ \ \ \ \ \ \ \ \ (}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00119}00119\ \ \ \ \ \ \ \ \ \ \ \ \ (}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00120}00120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}the\ dtype\ datetime64\ is\ not\ supported\ for\ parsing,\ "{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00121}00121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}pass\ this\ column\ using\ parse\_dates\ instead"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00122}00122\ \ \ \ \ \ \ \ \ \ \ \ \ ),}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00123}00123\ \ \ \ \ \ \ \ \ \ \ \ \ \{\textcolor{stringliteral}{"{}dtype"{}}:\ \{\textcolor{stringliteral}{"{}A"{}}:\ \textcolor{stringliteral}{"{}datetime64"{}},\ \textcolor{stringliteral}{"{}B"{}}:\ \textcolor{stringliteral}{"{}float64"{}}\},\ \textcolor{stringliteral}{"{}parse\_dates"{}}:\ [\textcolor{stringliteral}{"{}B"{}}]\},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00124}00124\ \ \ \ \ \ \ \ \ ),}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00125}00125\ \ \ \ \ \ \ \ \ (}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00126}00126\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}the\ dtype\ timedelta64\ is\ not\ supported\ for\ parsing"{}},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00127}00127\ \ \ \ \ \ \ \ \ \ \ \ \ \{\textcolor{stringliteral}{"{}dtype"{}}:\ \{\textcolor{stringliteral}{"{}A"{}}:\ \textcolor{stringliteral}{"{}timedelta64"{}},\ \textcolor{stringliteral}{"{}B"{}}:\ \textcolor{stringliteral}{"{}float64"{}}\}\},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00128}00128\ \ \ \ \ \ \ \ \ ),}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00129}00129\ \ \ \ \ \ \ \ \ (}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00130}00130\ \ \ \ \ \ \ \ \ \ \ \ \ f\textcolor{stringliteral}{"{}the\ dtype\ \{tm.ENDIAN\}U8\ is\ not\ supported\ for\ parsing"{}},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00131}00131\ \ \ \ \ \ \ \ \ \ \ \ \ \{\textcolor{stringliteral}{"{}dtype"{}}:\ \{\textcolor{stringliteral}{"{}A"{}}:\ \textcolor{stringliteral}{"{}U8"{}}\}\},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00132}00132\ \ \ \ \ \ \ \ \ ),}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00133}00133\ \ \ \ \ ],}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00134}00134\ \ \ \ \ ids=[\textcolor{stringliteral}{"{}dt64-\/0"{}},\ \textcolor{stringliteral}{"{}dt64-\/1"{}},\ \textcolor{stringliteral}{"{}td64"{}},\ f\textcolor{stringliteral}{"{}\{tm.ENDIAN\}U8"{}}],}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00135}00135\ )}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00136}00136\ \textcolor{keyword}{def\ }test\_unsupported\_dtype(c\_parser\_only,\ match,\ kwargs):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00137}00137\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00138}00138\ \ \ \ \ df\ =\ DataFrame(}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00139}00139\ \ \ \ \ \ \ \ \ np.random.default\_rng(2).\mbox{\hyperlink{namespacerandom}{random}}((5,\ 2)),}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00140}00140\ \ \ \ \ \ \ \ \ columns=list(\textcolor{stringliteral}{"{}AB"{}}),}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00141}00141\ \ \ \ \ \ \ \ \ index=[\textcolor{stringliteral}{"{}1A"{}},\ \textcolor{stringliteral}{"{}1B"{}},\ \textcolor{stringliteral}{"{}1C"{}},\ \textcolor{stringliteral}{"{}1D"{}},\ \textcolor{stringliteral}{"{}1E"{}}],}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00142}00142\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00143}00143\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00144}00144\ \ \ \ \ \textcolor{keyword}{with}\ tm.ensure\_clean(\textcolor{stringliteral}{"{}\_\_unsupported\_dtype\_\_.csv"{}})\ \textcolor{keyword}{as}\ path:}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00145}00145\ \ \ \ \ \ \ \ \ df.to\_csv(path)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00146}00146\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00147}00147\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError,\ match=match):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00148}00148\ \ \ \ \ \ \ \ \ \ \ \ \ parser.read\_csv(path,\ index\_col=0,\ **kwargs)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00149}00149\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00150}00150\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00151}00151\ \textcolor{preprocessor}{@td.skip\_if\_32bit}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00152}00152\ \textcolor{preprocessor}{@pytest.mark.slow}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00153}00153\ \textcolor{comment}{\#\ test\ numbers\ between\ 1\ and\ 2}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00154}00154\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}num"{},\ np.linspace(1.0,\ 2.0,\ num=21)})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00155}00155\ \textcolor{keyword}{def\ }test\_precise\_conversion(c\_parser\_only,\ num):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00156}00156\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00157}00157\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00158}00158\ \ \ \ \ normal\_errors\ =\ []}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00159}00159\ \ \ \ \ precise\_errors\ =\ []}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00160}00160\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00161}00161\ \ \ \ \ \textcolor{keyword}{def\ }error(val:\ float,\ actual\_val:\ Decimal)\ -\/>\ Decimal:}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00162}00162\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ abs(Decimal(f\textcolor{stringliteral}{"{}\{val:.100\}"{}})\ -\/\ actual\_val)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00163}00163\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00164}00164\ \ \ \ \ \textcolor{comment}{\#\ 25\ decimal\ digits\ of\ precision}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00165}00165\ \ \ \ \ text\ =\ f\textcolor{stringliteral}{"{}a\(\backslash\)n\{num:.25\}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00166}00166\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00167}00167\ \ \ \ \ normal\_val\ =\ float(}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00168}00168\ \ \ \ \ \ \ \ \ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(text),\ float\_precision=\textcolor{stringliteral}{"{}legacy"{}})[\textcolor{stringliteral}{"{}a"{}}][0]}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00169}00169\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00170}00170\ \ \ \ \ precise\_val\ =\ float(parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(text),\ float\_precision=\textcolor{stringliteral}{"{}high"{}})[\textcolor{stringliteral}{"{}a"{}}][0])}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00171}00171\ \ \ \ \ roundtrip\_val\ =\ float(}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00172}00172\ \ \ \ \ \ \ \ \ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(text),\ float\_precision=\textcolor{stringliteral}{"{}round\_trip"{}})[\textcolor{stringliteral}{"{}a"{}}][0]}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00173}00173\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00174}00174\ \ \ \ \ actual\_val\ =\ Decimal(text[2:])}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00175}00175\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00176}00176\ \ \ \ \ normal\_errors.append(error(normal\_val,\ actual\_val))}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00177}00177\ \ \ \ \ precise\_errors.append(error(precise\_val,\ actual\_val))}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00178}00178\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00179}00179\ \ \ \ \ \textcolor{comment}{\#\ round-\/trip\ should\ match\ float()}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00180}00180\ \ \ \ \ \textcolor{keyword}{assert}\ roundtrip\_val\ ==\ float(text[2:])}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00181}00181\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00182}00182\ \ \ \ \ \textcolor{keyword}{assert}\ sum(precise\_errors)\ <=\ sum(normal\_errors)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00183}00183\ \ \ \ \ \textcolor{keyword}{assert}\ max(precise\_errors)\ <=\ max(normal\_errors)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00184}00184\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00185}00185\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00186}00186\ \textcolor{keyword}{def\ }test\_usecols\_dtypes(c\_parser\_only,\ using\_infer\_string):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00187}00187\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00188}00188\ \ \ \ \ data\ =\ \textcolor{stringliteral}{"{}"{}"{}\(\backslash\)}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00189}00189\ \textcolor{stringliteral}{1,2,3}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00190}00190\ \textcolor{stringliteral}{4,5,6}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00191}00191\ \textcolor{stringliteral}{7,8,9}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00192}00192\ \textcolor{stringliteral}{10,11,12"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00193}00193\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00194}00194\ \ \ \ \ result\ =\ parser.read\_csv(}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00195}00195\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classStringIO}{StringIO}}(data),}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00196}00196\ \ \ \ \ \ \ \ \ usecols=(0,\ 1,\ 2),}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00197}00197\ \ \ \ \ \ \ \ \ names=(\textcolor{stringliteral}{"{}a"{}},\ \textcolor{stringliteral}{"{}b"{}},\ \textcolor{stringliteral}{"{}c"{}}),}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00198}00198\ \ \ \ \ \ \ \ \ header=\textcolor{keywordtype}{None},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00199}00199\ \ \ \ \ \ \ \ \ converters=\{\textcolor{stringliteral}{"{}a"{}}:\ str\},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00200}00200\ \ \ \ \ \ \ \ \ dtype=\{\textcolor{stringliteral}{"{}b"{}}:\ int,\ \textcolor{stringliteral}{"{}c"{}}:\ float\},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00201}00201\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00202}00202\ \ \ \ \ result2\ =\ parser.read\_csv(}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00203}00203\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classStringIO}{StringIO}}(data),}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00204}00204\ \ \ \ \ \ \ \ \ usecols=(0,\ 2),}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00205}00205\ \ \ \ \ \ \ \ \ names=(\textcolor{stringliteral}{"{}a"{}},\ \textcolor{stringliteral}{"{}b"{}},\ \textcolor{stringliteral}{"{}c"{}}),}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00206}00206\ \ \ \ \ \ \ \ \ header=\textcolor{keywordtype}{None},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00207}00207\ \ \ \ \ \ \ \ \ converters=\{\textcolor{stringliteral}{"{}a"{}}:\ str\},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00208}00208\ \ \ \ \ \ \ \ \ dtype=\{\textcolor{stringliteral}{"{}b"{}}:\ int,\ \textcolor{stringliteral}{"{}c"{}}:\ float\},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00209}00209\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00210}00210\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00211}00211\ \ \ \ \ \textcolor{keywordflow}{if}\ using\_infer\_string:}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00212}00212\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ (result.dtypes\ ==\ [\textcolor{stringliteral}{"{}string"{}},\ int,\ float]).all()}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00213}00213\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ (result2.dtypes\ ==\ [\textcolor{stringliteral}{"{}string"{}},\ float]).all()}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00214}00214\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00215}00215\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ (result.dtypes\ ==\ [object,\ int,\ float]).all()}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00216}00216\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ (result2.dtypes\ ==\ [object,\ float]).all()}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00217}00217\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00218}00218\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00219}00219\ \textcolor{keyword}{def\ }test\_disable\_bool\_parsing(c\_parser\_only):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00220}00220\ \ \ \ \ \textcolor{comment}{\#\ see\ gh-\/2090}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00221}00221\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00222}00222\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00223}00223\ \ \ \ \ data\ =\ \textcolor{stringliteral}{"{}"{}"{}A,B,C}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00224}00224\ \textcolor{stringliteral}{Yes,No,Yes}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00225}00225\ \textcolor{stringliteral}{No,Yes,Yes}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00226}00226\ \textcolor{stringliteral}{Yes,,Yes}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00227}00227\ \textcolor{stringliteral}{No,No,No"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00228}00228\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00229}00229\ \ \ \ \ result\ =\ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(data),\ dtype=object)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00230}00230\ \ \ \ \ \textcolor{keyword}{assert}\ (result.dtypes\ ==\ object).all()}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00231}00231\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00232}00232\ \ \ \ \ result\ =\ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(data),\ dtype=object,\ na\_filter=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00233}00233\ \ \ \ \ \textcolor{keyword}{assert}\ result[\textcolor{stringliteral}{"{}B"{}}][2]\ ==\ \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00234}00234\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00235}00235\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00236}00236\ \textcolor{keyword}{def\ }test\_custom\_lineterminator(c\_parser\_only):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00237}00237\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00238}00238\ \ \ \ \ data\ =\ \textcolor{stringliteral}{"{}a,b,c\string~1,2,3\string~4,5,6"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00239}00239\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00240}00240\ \ \ \ \ result\ =\ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(data),\ lineterminator=\textcolor{stringliteral}{"{}\string~"{}})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00241}00241\ \ \ \ \ expected\ =\ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(data.replace(\textcolor{stringliteral}{"{}\string~"{}},\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}})))}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00242}00242\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00243}00243\ \ \ \ \ tm.assert\_frame\_equal(result,\ expected)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00244}00244\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00245}00245\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00246}00246\ \textcolor{keyword}{def\ }test\_parse\_ragged\_csv(c\_parser\_only):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00247}00247\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00248}00248\ \ \ \ \ data\ =\ \textcolor{stringliteral}{"{}"{}"{}1,2,3}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00249}00249\ \textcolor{stringliteral}{1,2,3,4}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00250}00250\ \textcolor{stringliteral}{1,2,3,4,5}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00251}00251\ \textcolor{stringliteral}{1,2}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00252}00252\ \textcolor{stringliteral}{1,2,3,4"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00253}00253\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00254}00254\ \ \ \ \ nice\_data\ =\ \textcolor{stringliteral}{"{}"{}"{}1,2,3,,}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00255}00255\ \textcolor{stringliteral}{1,2,3,4,}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00256}00256\ \textcolor{stringliteral}{1,2,3,4,5}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00257}00257\ \textcolor{stringliteral}{1,2,,,}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00258}00258\ \textcolor{stringliteral}{1,2,3,4,"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00259}00259\ \ \ \ \ result\ =\ parser.read\_csv(}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00260}00260\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classStringIO}{StringIO}}(data),\ header=\textcolor{keywordtype}{None},\ names=[\textcolor{stringliteral}{"{}a"{}},\ \textcolor{stringliteral}{"{}b"{}},\ \textcolor{stringliteral}{"{}c"{}},\ \textcolor{stringliteral}{"{}d"{}},\ \textcolor{stringliteral}{"{}e"{}}]}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00261}00261\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00262}00262\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00263}00263\ \ \ \ \ expected\ =\ parser.read\_csv(}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00264}00264\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classStringIO}{StringIO}}(nice\_data),\ header=\textcolor{keywordtype}{None},\ names=[\textcolor{stringliteral}{"{}a"{}},\ \textcolor{stringliteral}{"{}b"{}},\ \textcolor{stringliteral}{"{}c"{}},\ \textcolor{stringliteral}{"{}d"{}},\ \textcolor{stringliteral}{"{}e"{}}]}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00265}00265\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00266}00266\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00267}00267\ \ \ \ \ tm.assert\_frame\_equal(result,\ expected)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00268}00268\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00269}00269\ \ \ \ \ \textcolor{comment}{\#\ too\ many\ columns,\ cause\ segfault\ if\ not\ careful}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00270}00270\ \ \ \ \ data\ =\ \textcolor{stringliteral}{"{}1,2\(\backslash\)n3,4,5"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00271}00271\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00272}00272\ \ \ \ \ result\ =\ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(data),\ header=\textcolor{keywordtype}{None},\ names=range(50))}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00273}00273\ \ \ \ \ expected\ =\ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(data),\ header=\textcolor{keywordtype}{None},\ names=range(3)).reindex(}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00274}00274\ \ \ \ \ \ \ \ \ columns=range(50)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00275}00275\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00276}00276\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00277}00277\ \ \ \ \ tm.assert\_frame\_equal(result,\ expected)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00278}00278\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00279}00279\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00280}00280\ \textcolor{keyword}{def\ }test\_tokenize\_CR\_with\_quoting(c\_parser\_only):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00281}00281\ \ \ \ \ \textcolor{comment}{\#\ see\ gh-\/3453}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00282}00282\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00283}00283\ \ \ \ \ data\ =\ \textcolor{stringliteral}{'\ a,b,c\(\backslash\)r"{}a,b"{},"{}e,d"{},"{}f,f"{}'}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00284}00284\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00285}00285\ \ \ \ \ result\ =\ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(data),\ header=\textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00286}00286\ \ \ \ \ expected\ =\ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(data.replace(\textcolor{stringliteral}{"{}\(\backslash\)r"{}},\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}})),\ header=\textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00287}00287\ \ \ \ \ tm.assert\_frame\_equal(result,\ expected)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00288}00288\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00289}00289\ \ \ \ \ result\ =\ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(data))}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00290}00290\ \ \ \ \ expected\ =\ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(data.replace(\textcolor{stringliteral}{"{}\(\backslash\)r"{}},\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}})))}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00291}00291\ \ \ \ \ tm.assert\_frame\_equal(result,\ expected)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00292}00292\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00293}00293\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00294}00294\ \textcolor{preprocessor}{@pytest.mark.slow}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00295}00295\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}count"{},\ [3\ *\ 2**n\ for\ n\ in\ range(6)}])}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00296}00296\ \textcolor{keyword}{def\ }test\_grow\_boundary\_at\_cap(c\_parser\_only,\ count):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00297}00297\ \ \ \ \ \textcolor{comment}{\#\ See\ gh-\/12494}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00298}00298\ \ \ \ \ \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00299}00299\ \ \ \ \ \textcolor{comment}{\#\ Cause\ of\ error\ was\ that\ the\ C\ parser}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00300}00300\ \ \ \ \ \textcolor{comment}{\#\ was\ not\ increasing\ the\ buffer\ size\ when}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00301}00301\ \ \ \ \ \textcolor{comment}{\#\ the\ desired\ space\ would\ fill\ the\ buffer}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00302}00302\ \ \ \ \ \textcolor{comment}{\#\ to\ capacity,\ which\ would\ later\ cause\ a}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00303}00303\ \ \ \ \ \textcolor{comment}{\#\ buffer\ overflow\ error\ when\ checking\ the}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00304}00304\ \ \ \ \ \textcolor{comment}{\#\ EOF\ terminator\ of\ the\ CSV\ stream.}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00305}00305\ \ \ \ \ \textcolor{comment}{\#\ 3\ *\ 2\string^n\ commas\ was\ observed\ to\ break\ the\ parser}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00306}00306\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00307}00307\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00308}00308\ \ \ \ \ \textcolor{keyword}{with}\ \mbox{\hyperlink{classStringIO}{StringIO}}(\textcolor{stringliteral}{"{},"{}}\ *\ count)\ \textcolor{keyword}{as}\ s:}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00309}00309\ \ \ \ \ \ \ \ \ expected\ =\ DataFrame(columns=[f\textcolor{stringliteral}{"{}Unnamed:\ \{i\}"{}}\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(count\ +\ 1)])}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00310}00310\ \ \ \ \ \ \ \ \ df\ =\ parser.read\_csv(s)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00311}00311\ \ \ \ \ tm.assert\_frame\_equal(df,\ expected)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00312}00312\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00313}00313\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00314}00314\ \textcolor{preprocessor}{@pytest.mark.slow}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00315}00315\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}encoding"{},\ [None,\ "{}utf-\/8"{}])}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00316}00316\ \textcolor{keyword}{def\ }test\_parse\_trim\_buffers(c\_parser\_only,\ encoding):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00317}00317\ \ \ \ \ \textcolor{comment}{\#\ This\ test\ is\ part\ of\ a\ bugfix\ for\ gh-\/13703.\ It\ attempts\ to}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00318}00318\ \ \ \ \ \textcolor{comment}{\#\ to\ stress\ the\ system\ memory\ allocator,\ to\ cause\ it\ to\ move\ the}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00319}00319\ \ \ \ \ \textcolor{comment}{\#\ stream\ buffer\ and\ either\ let\ the\ OS\ reclaim\ the\ region,\ or\ let}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00320}00320\ \ \ \ \ \textcolor{comment}{\#\ other\ memory\ requests\ of\ parser\ otherwise\ modify\ the\ contents}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00321}00321\ \ \ \ \ \textcolor{comment}{\#\ of\ memory\ space,\ where\ it\ was\ formally\ located.}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00322}00322\ \ \ \ \ \textcolor{comment}{\#\ This\ test\ is\ designed\ to\ cause\ a\ \`{}segfault`\ with\ unpatched}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00323}00323\ \ \ \ \ \textcolor{comment}{\#\ \`{}tokenizer.c`.\ Sometimes\ the\ test\ fails\ on\ \`{}segfault`,\ other}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00324}00324\ \ \ \ \ \textcolor{comment}{\#\ times\ it\ fails\ due\ to\ memory\ corruption,\ which\ causes\ the}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00325}00325\ \ \ \ \ \textcolor{comment}{\#\ loaded\ DataFrame\ to\ differ\ from\ the\ expected\ one.}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00326}00326\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00327}00327\ \ \ \ \ \textcolor{comment}{\#\ Also\ force\ 'utf-\/8'\ encoding,\ so\ that\ \`{}\_string\_convert`\ would\ take}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00328}00328\ \ \ \ \ \textcolor{comment}{\#\ a\ different\ execution\ branch.}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00329}00329\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00330}00330\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00331}00331\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00332}00332\ \ \ \ \ \textcolor{comment}{\#\ Generate\ a\ large\ mixed-\/type\ CSV\ file\ on-\/the-\/fly\ (one\ record\ is}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00333}00333\ \ \ \ \ \textcolor{comment}{\#\ approx\ 1.5KiB).}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00334}00334\ \ \ \ \ record\_\ =\ (}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00335}00335\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}9999-\/9,99:99,,,,ZZ,ZZ,,,ZZZ-\/ZZZZ,.Z-\/ZZZZ,-\/9.99,,,9.99,Z"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00336}00336\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}ZZZZ,,-\/99,9,ZZZ-\/ZZZZ,ZZ-\/ZZZZ,,9.99,ZZZ-\/ZZZZZ,ZZZ-\/ZZZZZ,"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00337}00337\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}ZZZ-\/ZZZZ,ZZZ-\/ZZZZ,ZZZ-\/ZZZZ,ZZZ-\/ZZZZ,ZZZ-\/ZZZZ,ZZZ-\/ZZZZ,9"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00338}00338\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}99,ZZZ-\/ZZZZ,,ZZ-\/ZZZZ,,,,,ZZZZ,ZZZ-\/ZZZZZ,ZZZ-\/ZZZZ,,,9,9,"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00339}00339\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}9,9,99,99,999,999,ZZZZZ,ZZZ-\/ZZZZZ,ZZZ-\/ZZZZ,9,ZZ-\/ZZZZ,9."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00340}00340\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}99,ZZ-\/ZZZZ,ZZ-\/ZZZZ,,,,ZZZZ,,,ZZ,ZZ,,,,,,,,,,,,,9,,,999."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00341}00341\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}99,999.99,,,ZZZZZ,,,Z9,,,,,,,ZZZ,ZZZ,,,,,,,,,,,ZZZZZ,ZZ"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00342}00342\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}ZZZ,ZZZ-\/ZZZZZZ,ZZZ-\/ZZZZZZ,ZZ-\/ZZZZ,ZZ-\/ZZZZ,ZZ-\/ZZZZ,ZZ-\/ZZ"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00343}00343\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}ZZ,,,999999,999999,ZZZ,ZZZ,,,ZZZ,ZZZ,999.99,999.99,,,,Z"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00344}00344\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}ZZ-\/ZZZ,ZZZ-\/ZZZ,-\/9.99,-\/9.99,9,9,,99,,9.99,9.99,9,9,9.99,"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00345}00345\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}9.99,,,,9.99,9.99,,99,,99,9.99,9.99,,,ZZZ,ZZZ,,999.99,,"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00346}00346\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}999.99,ZZZ,ZZZ-\/ZZZZ,ZZZ-\/ZZZZ,,,ZZZZZ,ZZZZZ,ZZZ,ZZZ,9,9,"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00347}00347\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{},,,,,ZZZ-\/ZZZZ,ZZZ999Z,,,999.99,,999.99,ZZZ-\/ZZZZ,,,9.999"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00348}00348\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{},9.999,9.999,9.999,-\/9.999,-\/9.999,-\/9.999,-\/9.999,9.999,9."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00349}00349\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}999,9.999,9.999,9.999,9.999,9.999,9.999,99999,ZZZ-\/ZZZZ,"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00350}00350\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{},9.99,ZZZ,,,,,,,,ZZZ,,,,,9,,,,9,,,,,,,,,,ZZZ-\/ZZZZ,ZZZ-\/Z"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00351}00351\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}ZZZ,,ZZZZZ,ZZZZZ,ZZZZZ,ZZZZZ,,,9.99,,ZZ-\/ZZZZ,ZZ-\/ZZZZ,ZZ"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00352}00352\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{},999,,,,ZZ-\/ZZZZ,ZZZ,ZZZ,ZZZ-\/ZZZZ,ZZZ-\/ZZZZ,,,99.99,99.99"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00353}00353\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{},,,9.99,9.99,9.99,9.99,ZZZ-\/ZZZZ,,,ZZZ-\/ZZZZZ,,,,,-\/9.99,-\/"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00354}00354\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}9.99,-\/9.99,-\/9.99,,,,,,,,,ZZZ-\/ZZZZ,,9,9.99,9.99,99ZZ,,-\/9"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00355}00355\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}.99,-\/9.99,ZZZ-\/ZZZZ,,,,,,,ZZZ-\/ZZZZ,9.99,9.99,9999,,,,,,,"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00356}00356\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{},,,-\/9.9,Z/Z-\/ZZZZ,999.99,9.99,,999.99,ZZ-\/ZZZZ,ZZ-\/ZZZZ,9."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00357}00357\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}99,9.99,9.99,9.99,9.99,9.99,,ZZZ-\/ZZZZZ,ZZZ-\/ZZZZZ,ZZZ-\/ZZ"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00358}00358\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}ZZZ,ZZZ-\/ZZZZZ,ZZZ-\/ZZZZZ,ZZZ,ZZZ,ZZZ,ZZZ,9.99,,,-\/9.99,ZZ"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00359}00359\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}-\/ZZZZ,-\/999.99,,-\/9999,,999.99,,,,999.99,99.99,,,ZZ-\/ZZZZZ"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00360}00360\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}ZZZ,ZZ-\/ZZZZ-\/ZZZZZZZ,,,,ZZ-\/ZZ-\/ZZZZZZZZ,ZZZZZZZZ,ZZZ-\/ZZZZ"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00361}00361\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{},9999,999.99,ZZZ-\/ZZZZ,-\/9.99,-\/9.99,ZZZ-\/ZZZZ,99:99:99,,99"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00362}00362\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{},99,,9.99,,-\/99.99,,,,,,9.99,ZZZ-\/ZZZZ,-\/9.99,-\/9.99,9.99,9"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00363}00363\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}.99,,ZZZ,,,,,,,ZZZ,ZZZ,,,,,"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00364}00364\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00365}00365\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00366}00366\ \ \ \ \ \textcolor{comment}{\#\ Set\ the\ number\ of\ lines\ so\ that\ a\ call\ to\ \`{}parser\_trim\_buffers`}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00367}00367\ \ \ \ \ \textcolor{comment}{\#\ is\ triggered:\ after\ a\ couple\ of\ full\ chunks\ are\ consumed\ a}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00368}00368\ \ \ \ \ \textcolor{comment}{\#\ relatively\ small\ 'residual'\ chunk\ would\ cause\ reallocation}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00369}00369\ \ \ \ \ \textcolor{comment}{\#\ within\ the\ parser.}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00370}00370\ \ \ \ \ chunksize,\ n\_lines\ =\ 128,\ 2\ *\ 128\ +\ 15}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00371}00371\ \ \ \ \ csv\_data\ =\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}.join([record\_]\ *\ n\_lines)\ +\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00372}00372\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00373}00373\ \ \ \ \ \textcolor{comment}{\#\ We\ will\ use\ StringIO\ to\ load\ the\ CSV\ from\ this\ text\ buffer.}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00374}00374\ \ \ \ \ \textcolor{comment}{\#\ pd.read\_csv()\ will\ iterate\ over\ the\ file\ in\ chunks\ and\ will}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00375}00375\ \ \ \ \ \textcolor{comment}{\#\ finally\ read\ a\ residual\ chunk\ of\ really\ small\ size.}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00376}00376\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00377}00377\ \ \ \ \ \textcolor{comment}{\#\ Generate\ the\ expected\ output:\ manually\ create\ the\ dataframe}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00378}00378\ \ \ \ \ \textcolor{comment}{\#\ by\ splitting\ by\ comma\ and\ repeating\ the\ \`{}n\_lines`\ times.}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00379}00379\ \ \ \ \ row\ =\ tuple(val\_\ \textcolor{keywordflow}{if}\ val\_\ \textcolor{keywordflow}{else}\ np.nan\ \textcolor{keywordflow}{for}\ val\_\ \textcolor{keywordflow}{in}\ record\_.split(\textcolor{stringliteral}{"{},"{}}))}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00380}00380\ \ \ \ \ expected\ =\ DataFrame(}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00381}00381\ \ \ \ \ \ \ \ \ [row\ \textcolor{keywordflow}{for}\ \_\ \textcolor{keywordflow}{in}\ range(n\_lines)],\ dtype=object,\ columns=\textcolor{keywordtype}{None},\ index=\textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00382}00382\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00383}00383\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00384}00384\ \ \ \ \ \textcolor{comment}{\#\ Iterate\ over\ the\ CSV\ file\ in\ chunks\ of\ \`{}chunksize`\ lines}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00385}00385\ \ \ \ \ \textcolor{keyword}{with}\ parser.read\_csv(}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00386}00386\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classStringIO}{StringIO}}(csv\_data),}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00387}00387\ \ \ \ \ \ \ \ \ header=\textcolor{keywordtype}{None},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00388}00388\ \ \ \ \ \ \ \ \ dtype=object,}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00389}00389\ \ \ \ \ \ \ \ \ chunksize=chunksize,}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00390}00390\ \ \ \ \ \ \ \ \ encoding=encoding,}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00391}00391\ \ \ \ \ )\ \textcolor{keyword}{as}\ chunks\_:}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00392}00392\ \ \ \ \ \ \ \ \ result\ =\ concat(chunks\_,\ axis=0,\ ignore\_index=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00393}00393\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00394}00394\ \ \ \ \ \textcolor{comment}{\#\ Check\ for\ data\ corruption\ if\ there\ was\ no\ segfault}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00395}00395\ \ \ \ \ tm.assert\_frame\_equal(result,\ expected)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00396}00396\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00397}00397\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00398}00398\ \textcolor{keyword}{def\ }test\_internal\_null\_byte(c\_parser\_only):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00399}00399\ \ \ \ \ \textcolor{comment}{\#\ see\ gh-\/14012}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00400}00400\ \ \ \ \ \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00401}00401\ \ \ \ \ \textcolor{comment}{\#\ The\ null\ byte\ ('\(\backslash\)x00')\ should\ not\ be\ used\ as\ a}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00402}00402\ \ \ \ \ \textcolor{comment}{\#\ true\ line\ terminator,\ escape\ character,\ or\ comment}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00403}00403\ \ \ \ \ \textcolor{comment}{\#\ character,\ only\ as\ a\ placeholder\ to\ indicate\ that}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00404}00404\ \ \ \ \ \textcolor{comment}{\#\ none\ was\ specified.}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00405}00405\ \ \ \ \ \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00406}00406\ \ \ \ \ \textcolor{comment}{\#\ This\ test\ should\ be\ moved\ to\ test\_common.py\ ONLY\ when}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00407}00407\ \ \ \ \ \textcolor{comment}{\#\ Python's\ csv\ class\ supports\ parsing\ '\(\backslash\)x00'.}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00408}00408\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00409}00409\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00410}00410\ \ \ \ \ names\ =\ [\textcolor{stringliteral}{"{}a"{}},\ \textcolor{stringliteral}{"{}b"{}},\ \textcolor{stringliteral}{"{}c"{}}]}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00411}00411\ \ \ \ \ data\ =\ \textcolor{stringliteral}{"{}1,2,3\(\backslash\)n4,\(\backslash\)x00,6\(\backslash\)n7,8,9"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00412}00412\ \ \ \ \ expected\ =\ DataFrame([[1,\ 2.0,\ 3],\ [4,\ np.nan,\ 6],\ [7,\ 8,\ 9]],\ columns=names)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00413}00413\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00414}00414\ \ \ \ \ result\ =\ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(data),\ names=names)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00415}00415\ \ \ \ \ tm.assert\_frame\_equal(result,\ expected)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00416}00416\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00417}00417\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00418}00418\ \textcolor{keyword}{def\ }test\_read\_nrows\_large(c\_parser\_only):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00419}00419\ \ \ \ \ \textcolor{comment}{\#\ gh-\/7626\ -\/\ Read\ only\ nrows\ of\ data\ in\ for\ large\ inputs\ (>262144b)}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00420}00420\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00421}00421\ \ \ \ \ header\_narrow\ =\ \textcolor{stringliteral}{"{}\(\backslash\)t"{}}.join([\textcolor{stringliteral}{"{}COL\_HEADER\_"{}}\ +\ str(i)\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(10)])\ +\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00422}00422\ \ \ \ \ data\_narrow\ =\ \textcolor{stringliteral}{"{}\(\backslash\)t"{}}.join([\textcolor{stringliteral}{"{}somedatasomedatasomedata1"{}}\ \textcolor{keywordflow}{for}\ \_\ \textcolor{keywordflow}{in}\ range(10)])\ +\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00423}00423\ \ \ \ \ header\_wide\ =\ \textcolor{stringliteral}{"{}\(\backslash\)t"{}}.join([\textcolor{stringliteral}{"{}COL\_HEADER\_"{}}\ +\ str(i)\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(15)])\ +\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00424}00424\ \ \ \ \ data\_wide\ =\ \textcolor{stringliteral}{"{}\(\backslash\)t"{}}.join([\textcolor{stringliteral}{"{}somedatasomedatasomedata2"{}}\ \textcolor{keywordflow}{for}\ \_\ \textcolor{keywordflow}{in}\ range(15)])\ +\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00425}00425\ \ \ \ \ test\_input\ =\ header\_narrow\ +\ data\_narrow\ *\ 1050\ +\ header\_wide\ +\ data\_wide\ *\ 2}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00426}00426\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00427}00427\ \ \ \ \ df\ =\ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(test\_input),\ sep=\textcolor{stringliteral}{"{}\(\backslash\)t"{}},\ nrows=1010)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00428}00428\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00429}00429\ \ \ \ \ \textcolor{keyword}{assert}\ df.size\ ==\ 1010\ *\ 10}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00430}00430\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00431}00431\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00432}00432\ \textcolor{keyword}{def\ }test\_float\_precision\_round\_trip\_with\_text(c\_parser\_only):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00433}00433\ \ \ \ \ \textcolor{comment}{\#\ see\ gh-\/15140}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00434}00434\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00435}00435\ \ \ \ \ df\ =\ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(\textcolor{stringliteral}{"{}a"{}}),\ header=\textcolor{keywordtype}{None},\ float\_precision=\textcolor{stringliteral}{"{}round\_trip"{}})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00436}00436\ \ \ \ \ tm.assert\_frame\_equal(df,\ DataFrame(\{0:\ [\textcolor{stringliteral}{"{}a"{}}]\}))}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00437}00437\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00438}00438\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00439}00439\ \textcolor{keyword}{def\ }test\_large\_difference\_in\_columns(c\_parser\_only):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00440}00440\ \ \ \ \ \textcolor{comment}{\#\ see\ gh-\/14125}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00441}00441\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00442}00442\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00443}00443\ \ \ \ \ count\ =\ 10000}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00444}00444\ \ \ \ \ large\_row\ =\ (\textcolor{stringliteral}{"{}X,"{}}\ *\ count)[:-\/1]\ +\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00445}00445\ \ \ \ \ normal\_row\ =\ \textcolor{stringliteral}{"{}XXXXXX\ XXXXXX,111111111111111\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00446}00446\ \ \ \ \ test\_input\ =\ (large\_row\ +\ normal\_row\ *\ 6)[:-\/1]}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00447}00447\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00448}00448\ \ \ \ \ result\ =\ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(test\_input),\ header=\textcolor{keywordtype}{None},\ usecols=[0])}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00449}00449\ \ \ \ \ rows\ =\ test\_input.split(\textcolor{stringliteral}{"{}\(\backslash\)n"{}})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00450}00450\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00451}00451\ \ \ \ \ expected\ =\ DataFrame([row.split(\textcolor{stringliteral}{"{},"{}})[0]\ \textcolor{keywordflow}{for}\ row\ \textcolor{keywordflow}{in}\ rows])}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00452}00452\ \ \ \ \ tm.assert\_frame\_equal(result,\ expected)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00453}00453\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00454}00454\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00455}00455\ \textcolor{keyword}{def\ }test\_data\_after\_quote(c\_parser\_only):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00456}00456\ \ \ \ \ \textcolor{comment}{\#\ see\ gh-\/15910}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00457}00457\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00458}00458\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00459}00459\ \ \ \ \ data\ =\ \textcolor{stringliteral}{'a\(\backslash\)n1\(\backslash\)n"{}b"{}a'}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00460}00460\ \ \ \ \ result\ =\ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(data))}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00461}00461\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00462}00462\ \ \ \ \ expected\ =\ DataFrame(\{\textcolor{stringliteral}{"{}a"{}}:\ [\textcolor{stringliteral}{"{}1"{}},\ \textcolor{stringliteral}{"{}ba"{}}]\})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00463}00463\ \ \ \ \ tm.assert\_frame\_equal(result,\ expected)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00464}00464\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00465}00465\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00466}00466\ \textcolor{keyword}{def\ }test\_comment\_whitespace\_delimited(c\_parser\_only):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00467}00467\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00468}00468\ \ \ \ \ test\_input\ =\ \textcolor{stringliteral}{"{}"{}"{}\(\backslash\)}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00469}00469\ \textcolor{stringliteral}{1\ 2}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00470}00470\ \textcolor{stringliteral}{2\ 2\ 3}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00471}00471\ \textcolor{stringliteral}{3\ 2\ 3\ \#\ 3\ fields}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00472}00472\ \textcolor{stringliteral}{4\ 2\ 3\#\ 3\ fields}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00473}00473\ \textcolor{stringliteral}{5\ 2\ \#\ 2\ fields}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00474}00474\ \textcolor{stringliteral}{6\ 2\#\ 2\ fields}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00475}00475\ \textcolor{stringliteral}{7\ \#\ 1\ field,\ NaN}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00476}00476\ \textcolor{stringliteral}{8\#\ 1\ field,\ NaN}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00477}00477\ \textcolor{stringliteral}{9\ 2\ 3\ \#\ skipped\ line}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00478}00478\ \textcolor{stringliteral}{\#\ comment"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00479}00479\ \ \ \ \ \textcolor{keyword}{with}\ tm.assert\_produces\_warning(}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00480}00480\ \ \ \ \ \ \ \ \ ParserWarning,\ match=\textcolor{stringliteral}{"{}Skipping\ line"{}},\ check\_stacklevel=\textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00481}00481\ \ \ \ \ ):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00482}00482\ \ \ \ \ \ \ \ \ df\ =\ parser.read\_csv(}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00483}00483\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classStringIO}{StringIO}}(test\_input),}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00484}00484\ \ \ \ \ \ \ \ \ \ \ \ \ comment=\textcolor{stringliteral}{"{}\#"{}},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00485}00485\ \ \ \ \ \ \ \ \ \ \ \ \ header=\textcolor{keywordtype}{None},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00486}00486\ \ \ \ \ \ \ \ \ \ \ \ \ delimiter=\textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)s+"{}},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00487}00487\ \ \ \ \ \ \ \ \ \ \ \ \ skiprows=0,}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00488}00488\ \ \ \ \ \ \ \ \ \ \ \ \ on\_bad\_lines=\textcolor{stringliteral}{"{}warn"{}},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00489}00489\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00490}00490\ \ \ \ \ expected\ =\ DataFrame([[1,\ 2],\ [5,\ 2],\ [6,\ 2],\ [7,\ np.nan],\ [8,\ np.nan]])}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00491}00491\ \ \ \ \ tm.assert\_frame\_equal(df,\ expected)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00492}00492\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00493}00493\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00494}00494\ \textcolor{keyword}{def\ }test\_file\_like\_no\_next(c\_parser\_only):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00495}00495\ \ \ \ \ \textcolor{comment}{\#\ gh-\/16530:\ the\ file-\/like\ need\ not\ have\ a\ "{}next"{}\ or\ "{}\_\_next\_\_"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00496}00496\ \ \ \ \ \textcolor{comment}{\#\ attribute\ despite\ having\ an\ "{}\_\_iter\_\_"{}\ attribute.}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00497}00497\ \ \ \ \ \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00498}00498\ \ \ \ \ \textcolor{comment}{\#\ NOTE:\ This\ is\ only\ true\ for\ the\ C\ engine,\ not\ Python\ engine.}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00499}00499\ \ \ \ \ \textcolor{keyword}{class\ }NoNextBuffer(\mbox{\hyperlink{classStringIO}{StringIO}}):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00500}00500\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_next\_\_(self):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00501}00501\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classAttributeError}{AttributeError}}(\textcolor{stringliteral}{"{}No\ next\ method"{}})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00502}00502\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00503}00503\ \ \ \ \ \ \ \ \ next\ =\ \_\_next\_\_}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00504}00504\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00505}00505\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00506}00506\ \ \ \ \ data\ =\ \textcolor{stringliteral}{"{}a\(\backslash\)n1"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00507}00507\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00508}00508\ \ \ \ \ expected\ =\ DataFrame(\{\textcolor{stringliteral}{"{}a"{}}:\ [1]\})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00509}00509\ \ \ \ \ result\ =\ parser.read\_csv(NoNextBuffer(data))}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00510}00510\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00511}00511\ \ \ \ \ tm.assert\_frame\_equal(result,\ expected)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00512}00512\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00513}00513\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00514}00514\ \textcolor{keyword}{def\ }test\_buffer\_rd\_bytes\_bad\_unicode(c\_parser\_only):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00515}00515\ \ \ \ \ \textcolor{comment}{\#\ see\ gh-\/22748}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00516}00516\ \ \ \ \ t\ =\ \mbox{\hyperlink{classBytesIO}{BytesIO}}(b\textcolor{stringliteral}{"{}\(\backslash\)xB0"{}})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00517}00517\ \ \ \ \ t\ =\ \mbox{\hyperlink{classTextIOWrapper}{TextIOWrapper}}(t,\ encoding=\textcolor{stringliteral}{"{}ascii"{}},\ errors=\textcolor{stringliteral}{"{}surrogateescape"{}})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00518}00518\ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}'utf-\/8'\ codec\ can't\ encode\ character"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00519}00519\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(UnicodeError,\ match=msg):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00520}00520\ \ \ \ \ \ \ \ \ c\_parser\_only.read\_csv(t,\ encoding=\textcolor{stringliteral}{"{}UTF-\/8"{}})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00521}00521\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00522}00522\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00523}00523\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}tar\_suffix"{},\ ["{}.tar"{},\ "{}.tar.gz"{}])}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00524}00524\ \textcolor{keyword}{def\ }test\_read\_tarfile(c\_parser\_only,\ csv\_dir\_path,\ tar\_suffix):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00525}00525\ \ \ \ \ \textcolor{comment}{\#\ see\ gh-\/16530}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00526}00526\ \ \ \ \ \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00527}00527\ \ \ \ \ \textcolor{comment}{\#\ Unfortunately,\ Python's\ CSV\ library\ can't\ handle}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00528}00528\ \ \ \ \ \textcolor{comment}{\#\ tarfile\ objects\ (expects\ string,\ not\ bytes\ when}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00529}00529\ \ \ \ \ \textcolor{comment}{\#\ iterating\ through\ a\ file-\/like).}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00530}00530\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00531}00531\ \ \ \ \ tar\_path\ =\ os.path.join(csv\_dir\_path,\ \textcolor{stringliteral}{"{}tar\_csv"{}}\ +\ tar\_suffix)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00532}00532\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00533}00533\ \ \ \ \ \textcolor{keyword}{with}\ tarfile.open(tar\_path,\ \textcolor{stringliteral}{"{}r"{}})\ \textcolor{keyword}{as}\ tar:}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00534}00534\ \ \ \ \ \ \ \ \ data\_file\ =\ tar.extractfile(\textcolor{stringliteral}{"{}tar\_data.csv"{}})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00535}00535\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00536}00536\ \ \ \ \ \ \ \ \ out\ =\ parser.read\_csv(data\_file)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00537}00537\ \ \ \ \ \ \ \ \ expected\ =\ DataFrame(\{\textcolor{stringliteral}{"{}a"{}}:\ [1]\})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00538}00538\ \ \ \ \ \ \ \ \ tm.assert\_frame\_equal(out,\ expected)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00539}00539\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00540}00540\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00541}00541\ \textcolor{keyword}{def\ }test\_chunk\_whitespace\_on\_boundary(c\_parser\_only):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00542}00542\ \ \ \ \ \textcolor{comment}{\#\ see\ gh-\/9735:\ this\ issue\ is\ C\ parser-\/specific\ (bug\ when}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00543}00543\ \ \ \ \ \textcolor{comment}{\#\ parsing\ whitespace\ and\ characters\ at\ chunk\ boundary)}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00544}00544\ \ \ \ \ \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00545}00545\ \ \ \ \ \textcolor{comment}{\#\ This\ test\ case\ has\ a\ field\ too\ large\ for\ the\ Python\ parser\ /\ CSV\ library.}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00546}00546\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00547}00547\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00548}00548\ \ \ \ \ chunk1\ =\ \textcolor{stringliteral}{"{}a"{}}\ *\ (1024\ *\ 256\ -\/\ 2)\ +\ \textcolor{stringliteral}{"{}\(\backslash\)na"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00549}00549\ \ \ \ \ chunk2\ =\ \textcolor{stringliteral}{"{}\(\backslash\)n\ a"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00550}00550\ \ \ \ \ result\ =\ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(chunk1\ +\ chunk2),\ header=\textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00551}00551\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00552}00552\ \ \ \ \ expected\ =\ DataFrame([\textcolor{stringliteral}{"{}a"{}}\ *\ (1024\ *\ 256\ -\/\ 2),\ \textcolor{stringliteral}{"{}a"{}},\ \textcolor{stringliteral}{"{}\ a"{}}])}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00553}00553\ \ \ \ \ tm.assert\_frame\_equal(result,\ expected)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00554}00554\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00555}00555\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00556}00556\ \textcolor{keyword}{def\ }test\_file\_handles\_mmap(c\_parser\_only,\ csv1):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00557}00557\ \ \ \ \ \textcolor{comment}{\#\ gh-\/14418}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00558}00558\ \ \ \ \ \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00559}00559\ \ \ \ \ \textcolor{comment}{\#\ Don't\ close\ user\ provided\ file\ handles.}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00560}00560\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00561}00561\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00562}00562\ \ \ \ \ \textcolor{keyword}{with}\ open(csv1,\ encoding=\textcolor{stringliteral}{"{}utf-\/8"{}})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00563}00563\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ mmap.mmap(f.fileno(),\ 0,\ access=mmap.ACCESS\_READ)\ \textcolor{keyword}{as}\ m:}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00564}00564\ \ \ \ \ \ \ \ \ \ \ \ \ parser.read\_csv(m)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00565}00565\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ \textcolor{keywordflow}{not}\ m.closed}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00566}00566\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00567}00567\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00568}00568\ \textcolor{keyword}{def\ }test\_file\_binary\_mode(c\_parser\_only):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00569}00569\ \ \ \ \ \textcolor{comment}{\#\ see\ gh-\/23779}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00570}00570\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00571}00571\ \ \ \ \ expected\ =\ DataFrame([[1,\ 2,\ 3],\ [4,\ 5,\ 6]])}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00572}00572\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00573}00573\ \ \ \ \ \textcolor{keyword}{with}\ tm.ensure\_clean()\ \textcolor{keyword}{as}\ path:}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00574}00574\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(path,\ \textcolor{stringliteral}{"{}w"{}},\ encoding=\textcolor{stringliteral}{"{}utf-\/8"{}})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00575}00575\ \ \ \ \ \ \ \ \ \ \ \ \ f.write(\textcolor{stringliteral}{"{}1,2,3\(\backslash\)n4,5,6"{}})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00576}00576\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00577}00577\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(path,\ \textcolor{stringliteral}{"{}rb"{}})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00578}00578\ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ parser.read\_csv(f,\ header=\textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00579}00579\ \ \ \ \ \ \ \ \ \ \ \ \ tm.assert\_frame\_equal(result,\ expected)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00580}00580\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00581}00581\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00582}00582\ \textcolor{keyword}{def\ }test\_unix\_style\_breaks(c\_parser\_only):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00583}00583\ \ \ \ \ \textcolor{comment}{\#\ GH\ 11020}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00584}00584\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00585}00585\ \ \ \ \ \textcolor{keyword}{with}\ tm.ensure\_clean()\ \textcolor{keyword}{as}\ path:}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00586}00586\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(path,\ \textcolor{stringliteral}{"{}w"{}},\ newline=\textcolor{stringliteral}{"{}\(\backslash\)n"{}},\ encoding=\textcolor{stringliteral}{"{}utf-\/8"{}})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00587}00587\ \ \ \ \ \ \ \ \ \ \ \ \ f.write(\textcolor{stringliteral}{"{}blah\(\backslash\)n\(\backslash\)ncol\_1,col\_2,col\_3\(\backslash\)n\(\backslash\)n"{}})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00588}00588\ \ \ \ \ \ \ \ \ result\ =\ parser.read\_csv(path,\ skiprows=2,\ encoding=\textcolor{stringliteral}{"{}utf-\/8"{}},\ engine=\textcolor{stringliteral}{"{}c"{}})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00589}00589\ \ \ \ \ expected\ =\ DataFrame(columns=[\textcolor{stringliteral}{"{}col\_1"{}},\ \textcolor{stringliteral}{"{}col\_2"{}},\ \textcolor{stringliteral}{"{}col\_3"{}}])}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00590}00590\ \ \ \ \ tm.assert\_frame\_equal(result,\ expected)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00591}00591\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00592}00592\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00593}00593\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}float\_precision"{},\ [None,\ "{}legacy"{},\ "{}high"{},\ "{}round\_trip"{}])}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00594}00594\ \textcolor{preprocessor}{@pytest.mark.parametrize}(}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00595}00595\ \ \ \ \ \textcolor{stringliteral}{"{}data,thousands,decimal"{}},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00596}00596\ \ \ \ \ [}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00597}00597\ \ \ \ \ \ \ \ \ (}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00598}00598\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}A|B|C}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00599}00599\ \textcolor{stringliteral}{1|2,334.01|5}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00600}00600\ \textcolor{stringliteral}{10|13|10.}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00601}00601\ \textcolor{stringliteral}{"{}"{}"{}},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00602}00602\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{},"{}},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00603}00603\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}."{}},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00604}00604\ \ \ \ \ \ \ \ \ ),}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00605}00605\ \ \ \ \ \ \ \ \ (}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00606}00606\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}A|B|C}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00607}00607\ \textcolor{stringliteral}{1|2.334,01|5}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00608}00608\ \textcolor{stringliteral}{10|13|10,}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00609}00609\ \textcolor{stringliteral}{"{}"{}"{}},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00610}00610\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}."{}},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00611}00611\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{},"{}},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00612}00612\ \ \ \ \ \ \ \ \ ),}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00613}00613\ \ \ \ \ ],}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00614}00614\ )}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00615}00615\ \textcolor{keyword}{def\ }test\_1000\_sep\_with\_decimal(}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00616}00616\ \ \ \ \ c\_parser\_only,\ data,\ thousands,\ decimal,\ float\_precision}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00617}00617\ ):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00618}00618\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00619}00619\ \ \ \ \ expected\ =\ DataFrame(\{\textcolor{stringliteral}{"{}A"{}}:\ [1,\ 10],\ \textcolor{stringliteral}{"{}B"{}}:\ [2334.01,\ 13],\ \textcolor{stringliteral}{"{}C"{}}:\ [5,\ 10.0]\})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00620}00620\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00621}00621\ \ \ \ \ result\ =\ parser.read\_csv(}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00622}00622\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classStringIO}{StringIO}}(data),}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00623}00623\ \ \ \ \ \ \ \ \ sep=\textcolor{stringliteral}{"{}|"{}},}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00624}00624\ \ \ \ \ \ \ \ \ thousands=thousands,}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00625}00625\ \ \ \ \ \ \ \ \ decimal=decimal,}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00626}00626\ \ \ \ \ \ \ \ \ float\_precision=float\_precision,}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00627}00627\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00628}00628\ \ \ \ \ tm.assert\_frame\_equal(result,\ expected)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00629}00629\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00630}00630\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00631}00631\ \textcolor{keyword}{def\ }test\_float\_precision\_options(c\_parser\_only):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00632}00632\ \ \ \ \ \textcolor{comment}{\#\ GH\ 17154,\ 36228}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00633}00633\ \ \ \ \ parser\ =\ c\_parser\_only}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00634}00634\ \ \ \ \ s\ =\ \textcolor{stringliteral}{"{}foo\(\backslash\)n243.164\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00635}00635\ \ \ \ \ df\ =\ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(s))}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00636}00636\ \ \ \ \ df2\ =\ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(s),\ float\_precision=\textcolor{stringliteral}{"{}high"{}})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00637}00637\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00638}00638\ \ \ \ \ tm.assert\_frame\_equal(df,\ df2)}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00639}00639\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00640}00640\ \ \ \ \ df3\ =\ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(s),\ float\_precision=\textcolor{stringliteral}{"{}legacy"{}})}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00641}00641\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00642}00642\ \ \ \ \ \textcolor{keyword}{assert}\ \textcolor{keywordflow}{not}\ df.iloc[0,\ 0]\ ==\ df3.iloc[0,\ 0]}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00643}00643\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00644}00644\ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}Unrecognized\ float\_precision\ option:\ junk"{}}}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00645}00645\ }
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00646}00646\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError,\ match=msg):}
\DoxyCodeLine{\Hypertarget{test__c__parser__only_8py_source_l00647}00647\ \ \ \ \ \ \ \ \ parser.read\_csv(\mbox{\hyperlink{classStringIO}{StringIO}}(s),\ float\_precision=\textcolor{stringliteral}{"{}junk"{}})}

\end{DoxyCode}
