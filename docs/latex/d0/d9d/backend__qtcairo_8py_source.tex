\doxysection{backend\+\_\+qtcairo.\+py}
\hypertarget{backend__qtcairo_8py_source}{}\label{backend__qtcairo_8py_source}\index{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/matplotlib/backends/backend\_qtcairo.py@{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/matplotlib/backends/backend\_qtcairo.py}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00001}\mbox{\hyperlink{namespacematplotlib_1_1backends_1_1backend__qtcairo}{00001}}\ \textcolor{keyword}{import}\ ctypes}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00003}00003\ \textcolor{keyword}{from}\ .backend\_cairo\ \textcolor{keyword}{import}\ cairo,\ FigureCanvasCairo}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00004}00004\ \textcolor{keyword}{from}\ .backend\_qt\ \textcolor{keyword}{import}\ \_BackendQT,\ FigureCanvasQT}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00005}00005\ \textcolor{keyword}{from}\ .qt\_compat\ \textcolor{keyword}{import}\ QT\_API,\ QtCore,\ QtGui}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00006}00006\ }
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00007}00007\ }
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00008}\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__qtcairo_1_1FigureCanvasQTCairo}{00008}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__qtcairo_1_1FigureCanvasQTCairo}{FigureCanvasQTCairo}}(\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__cairo_1_1FigureCanvasCairo}{FigureCanvasCairo}},\ \mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__qt_1_1FigureCanvasQT}{FigureCanvasQT}}):}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00009}\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__qtcairo_1_1FigureCanvasQTCairo_a179afe1a51ea0d4de17cd9db012e008f}{00009}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__qtcairo_1_1FigureCanvasQTCairo_a179afe1a51ea0d4de17cd9db012e008f}{draw}}(self):}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00010}00010\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ hasattr(self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__cairo_1_1FigureCanvasCairo_ae1c90758a8376a40caf256f74c456473}{\_renderer}}.gc,\ \textcolor{stringliteral}{"{}ctx"{}}):}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00011}00011\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__cairo_1_1FigureCanvasCairo_ae1c90758a8376a40caf256f74c456473}{\_renderer}}.dpi\ =\ self.\mbox{\hyperlink{classmatplotlib_1_1backend__bases_1_1FigureCanvasBase_aa5120a3253575aac5d0e280f5debcff7}{figure}}.dpi}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00012}00012\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backend__bases_1_1FigureCanvasBase_aa5120a3253575aac5d0e280f5debcff7}{figure}}.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__qtcairo_1_1FigureCanvasQTCairo_a179afe1a51ea0d4de17cd9db012e008f}{draw}}(self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__cairo_1_1FigureCanvasCairo_ae1c90758a8376a40caf256f74c456473}{\_renderer}})}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00013}00013\ \ \ \ \ \ \ \ \ super().\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__qtcairo_1_1FigureCanvasQTCairo_a179afe1a51ea0d4de17cd9db012e008f}{draw}}()}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00014}00014\ }
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00015}00015\ \ \ \ \ \textcolor{keyword}{def\ }paintEvent(self,\ event):}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00016}00016\ \ \ \ \ \ \ \ \ width\ =\ int(self.\mbox{\hyperlink{classmatplotlib_1_1backend__bases_1_1FigureCanvasBase_a2337de2cd76bdf2b939373dd1efaed4e}{device\_pixel\_ratio}}\ *\ self.width())}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00017}00017\ \ \ \ \ \ \ \ \ height\ =\ int(self.\mbox{\hyperlink{classmatplotlib_1_1backend__bases_1_1FigureCanvasBase_a2337de2cd76bdf2b939373dd1efaed4e}{device\_pixel\_ratio}}\ *\ self.height())}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00018}00018\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (width,\ height)\ !=\ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__cairo_1_1FigureCanvasCairo_ae1c90758a8376a40caf256f74c456473}{\_renderer}}.get\_canvas\_width\_height():}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00019}00019\ \ \ \ \ \ \ \ \ \ \ \ \ surface\ =\ cairo.ImageSurface(cairo.FORMAT\_ARGB32,\ width,\ height)}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00020}00020\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__cairo_1_1FigureCanvasCairo_ae1c90758a8376a40caf256f74c456473}{\_renderer}}.set\_context(cairo.Context(surface))}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00021}00021\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__cairo_1_1FigureCanvasCairo_ae1c90758a8376a40caf256f74c456473}{\_renderer}}.dpi\ =\ self.\mbox{\hyperlink{classmatplotlib_1_1backend__bases_1_1FigureCanvasBase_aa5120a3253575aac5d0e280f5debcff7}{figure}}.dpi}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00022}00022\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backend__bases_1_1FigureCanvasBase_aa5120a3253575aac5d0e280f5debcff7}{figure}}.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__qtcairo_1_1FigureCanvasQTCairo_a179afe1a51ea0d4de17cd9db012e008f}{draw}}(self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__cairo_1_1FigureCanvasCairo_ae1c90758a8376a40caf256f74c456473}{\_renderer}})}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00023}00023\ \ \ \ \ \ \ \ \ buf\ =\ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__cairo_1_1FigureCanvasCairo_ae1c90758a8376a40caf256f74c456473}{\_renderer}}.gc.ctx.get\_target().get\_data()}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00024}00024\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ QT\_API\ ==\ \textcolor{stringliteral}{"{}PyQt6"{}}:}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00025}00025\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{from}\ PyQt6\ \textcolor{keyword}{import}\ sip}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00026}00026\ \ \ \ \ \ \ \ \ \ \ \ \ ptr\ =\ int(sip.voidptr(buf))}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00027}00027\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00028}00028\ \ \ \ \ \ \ \ \ \ \ \ \ ptr\ =\ buf}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00029}00029\ \ \ \ \ \ \ \ \ qimage\ =\ QtGui.QImage(}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00030}00030\ \ \ \ \ \ \ \ \ \ \ \ \ ptr,\ width,\ height,}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00031}00031\ \ \ \ \ \ \ \ \ \ \ \ \ QtGui.QImage.Format.Format\_ARGB32\_Premultiplied)}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00032}00032\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Adjust\ the\ buf\ reference\ count\ to\ work\ around\ a\ memory\ leak\ bug\ in}}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00033}00033\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ QImage\ under\ PySide.}}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00034}00034\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ QT\_API\ ==\ \textcolor{stringliteral}{"{}PySide2"{}}\ \textcolor{keywordflow}{and}\ QtCore.\_\_version\_info\_\_\ <\ (5,\ 12):}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00035}00035\ \ \ \ \ \ \ \ \ \ \ \ \ ctypes.c\_long.from\_address(id(buf)).value\ =\ 1}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00036}00036\ \ \ \ \ \ \ \ \ qimage.setDevicePixelRatio(self.\mbox{\hyperlink{classmatplotlib_1_1backend__bases_1_1FigureCanvasBase_a2337de2cd76bdf2b939373dd1efaed4e}{device\_pixel\_ratio}})}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00037}00037\ \ \ \ \ \ \ \ \ painter\ =\ QtGui.QPainter(self)}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00038}00038\ \ \ \ \ \ \ \ \ painter.eraseRect(event.rect())}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00039}00039\ \ \ \ \ \ \ \ \ painter.drawImage(0,\ 0,\ qimage)}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00040}00040\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__qt_1_1FigureCanvasQT_af819d57a5965b2d5b361b4b5bf2eef76}{\_draw\_rect\_callback}}(painter)}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00041}00041\ \ \ \ \ \ \ \ \ painter.end()}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00043}00043\ }
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00044}00044\ \textcolor{preprocessor}{@\_BackendQT.export}}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00045}\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__qtcairo_1_1__BackendQTCairo}{00045}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__qtcairo_1_1__BackendQTCairo}{\_BackendQTCairo}}(\mbox{\hyperlink{classmatplotlib_1_1backends_1_1backend__qt_1_1__BackendQT}{\_BackendQT}}):}
\DoxyCodeLine{\Hypertarget{backend__qtcairo_8py_source_l00046}00046\ \ \ \ \ FigureCanvas\ =\ FigureCanvasQTCairo}

\end{DoxyCode}
