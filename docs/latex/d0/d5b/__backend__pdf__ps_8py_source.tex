\doxysection{\+\_\+backend\+\_\+pdf\+\_\+ps.\+py}
\hypertarget{__backend__pdf__ps_8py_source}{}\label{__backend__pdf__ps_8py_source}\index{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/matplotlib/backends/\_backend\_pdf\_ps.py@{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/matplotlib/backends/\_backend\_pdf\_ps.py}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00001}\mbox{\hyperlink{namespacematplotlib_1_1backends_1_1__backend__pdf__ps}{00001}}\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00002}00002\ \textcolor{stringliteral}{Common\ functionality\ between\ the\ PDF\ and\ PS\ backends.}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00003}00003\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00004}00004\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00005}00005\ \textcolor{keyword}{from}\ io\ \textcolor{keyword}{import}\ BytesIO}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00006}00006\ \textcolor{keyword}{import}\ functools}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00007}00007\ \textcolor{keyword}{import}\ logging}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00008}00008\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00009}00009\ \textcolor{keyword}{from}\ fontTools\ \textcolor{keyword}{import}\ subset}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00010}00010\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00011}00011\ \textcolor{keyword}{import}\ matplotlib\ \textcolor{keyword}{as}\ mpl}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00012}00012\ \textcolor{keyword}{from}\ ..\ \textcolor{keyword}{import}\ font\_manager,\ ft2font}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00013}00013\ \textcolor{keyword}{from}\ ..\_afm\ \textcolor{keyword}{import}\ AFM}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00014}00014\ \textcolor{keyword}{from}\ ..backend\_bases\ \textcolor{keyword}{import}\ RendererBase}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00015}00015\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00016}00016\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00017}00017\ \textcolor{preprocessor}{@functools.lru\_cache(50)}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00018}00018\ \textcolor{keyword}{def\ }\_cached\_get\_afm\_from\_fname(fname):}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00019}00019\ \ \ \ \ \textcolor{keyword}{with}\ open(fname,\ \textcolor{stringliteral}{"{}rb"{}})\ \textcolor{keyword}{as}\ fh:}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00020}00020\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classmatplotlib_1_1__afm_1_1AFM}{AFM}}(fh)}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00021}00021\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00022}00022\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00023}\mbox{\hyperlink{namespacematplotlib_1_1backends_1_1__backend__pdf__ps_ac1fd5743cb0913420c3cd58bb0d263c3}{00023}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacematplotlib_1_1backends_1_1__backend__pdf__ps_ac1fd5743cb0913420c3cd58bb0d263c3}{get\_glyphs\_subset}}(fontfile,\ characters):}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00024}00024\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00025}00025\ \textcolor{stringliteral}{\ \ \ \ Subset\ a\ TTF\ font}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00026}00026\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00027}00027\ \textcolor{stringliteral}{\ \ \ \ Reads\ the\ named\ fontfile\ and\ restricts\ the\ font\ to\ the\ characters.}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00028}00028\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00029}00029\ \textcolor{stringliteral}{\ \ \ \ Parameters}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00030}00030\ \textcolor{stringliteral}{\ \ \ \ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00031}00031\ \textcolor{stringliteral}{\ \ \ \ fontfile\ :\ str}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00032}00032\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Path\ to\ the\ font\ file}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00033}00033\ \textcolor{stringliteral}{\ \ \ \ characters\ :\ str}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00034}00034\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Continuous\ set\ of\ characters\ to\ include\ in\ subset}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00035}00035\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00036}00036\ \textcolor{stringliteral}{\ \ \ \ Returns}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00037}00037\ \textcolor{stringliteral}{\ \ \ \ -\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00038}00038\ \textcolor{stringliteral}{\ \ \ \ fontTools.ttLib.ttFont.TTFont}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00039}00039\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ An\ open\ font\ object\ representing\ the\ subset,\ which\ needs\ to}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00040}00040\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ be\ closed\ by\ the\ caller.}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00041}00041\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00043}00043\ \ \ \ \ options\ =\ \mbox{\hyperlink{classfontTools_1_1subset_1_1Options}{subset.Options}}(glyph\_names=\textcolor{keyword}{True},\ recommended\_glyphs=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00044}00044\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00045}00045\ \ \ \ \ \textcolor{comment}{\#\ Prevent\ subsetting\ extra\ tables.}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00046}00046\ \ \ \ \ options.drop\_tables\ +=\ [}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00047}00047\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'FFTM'},\ \ \textcolor{comment}{\#\ FontForge\ Timestamp.}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00048}00048\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'PfEd'},\ \ \textcolor{comment}{\#\ FontForge\ personal\ table.}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00049}00049\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'BDF'},\ \ \textcolor{comment}{\#\ X11\ BDF\ header.}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00050}00050\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'meta'},\ \ \textcolor{comment}{\#\ Metadata\ stores\ design/supported\ languages\ (meaningless\ for\ subsets).}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00051}00051\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'MERG'},\ \ \textcolor{comment}{\#\ Merge\ Table.}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00052}00052\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'TSIV'},\ \ \textcolor{comment}{\#\ Microsoft\ Visual\ TrueType\ extension.}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00053}00053\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'Zapf'},\ \ \textcolor{comment}{\#\ Information\ about\ the\ individual\ glyphs\ in\ the\ font.}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00054}00054\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'bdat'},\ \ \textcolor{comment}{\#\ The\ bitmap\ data\ table.}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00055}00055\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'bloc'},\ \ \textcolor{comment}{\#\ The\ bitmap\ location\ table.}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00056}00056\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'cidg'},\ \ \textcolor{comment}{\#\ CID\ to\ Glyph\ ID\ table\ (Apple\ Advanced\ Typography).}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00057}00057\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'fdsc'},\ \ \textcolor{comment}{\#\ The\ font\ descriptors\ table.}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00058}00058\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'feat'},\ \ \textcolor{comment}{\#\ Feature\ name\ table\ (Apple\ Advanced\ Typography).}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00059}00059\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'fmtx'},\ \ \textcolor{comment}{\#\ The\ Font\ Metrics\ Table.}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00060}00060\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'fond'},\ \ \textcolor{comment}{\#\ Data-\/fork\ font\ information\ (Apple\ Advanced\ Typography).}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00061}00061\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'just'},\ \ \textcolor{comment}{\#\ The\ justification\ table\ (Apple\ Advanced\ Typography).}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00062}00062\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'kerx'},\ \ \textcolor{comment}{\#\ An\ extended\ kerning\ table\ (Apple\ Advanced\ Typography).}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00063}00063\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'ltag'},\ \ \textcolor{comment}{\#\ Language\ Tag.}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00064}00064\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'morx'},\ \ \textcolor{comment}{\#\ Extended\ Glyph\ Metamorphosis\ Table.}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00065}00065\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'trak'},\ \ \textcolor{comment}{\#\ Tracking\ table.}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00066}00066\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'xref'},\ \ \textcolor{comment}{\#\ The\ cross-\/reference\ table\ (some\ Apple\ font\ tooling\ information).}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00067}00067\ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00068}00068\ \ \ \ \ \textcolor{comment}{\#\ if\ fontfile\ is\ a\ ttc,\ specify\ font\ number}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00069}00069\ \ \ \ \ \textcolor{keywordflow}{if}\ fontfile.endswith(\textcolor{stringliteral}{"{}.ttc"{}}):}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00070}00070\ \ \ \ \ \ \ \ \ options.font\_number\ =\ 0}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00071}00071\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00072}00072\ \ \ \ \ font\ =\ subset.load\_font(fontfile,\ options)}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00073}00073\ \ \ \ \ subsetter\ =\ \mbox{\hyperlink{classfontTools_1_1subset_1_1Subsetter}{subset.Subsetter}}(options=options)}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00074}00074\ \ \ \ \ subsetter.populate(text=characters)}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00075}00075\ \ \ \ \ subsetter.subset(font)}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00076}00076\ \ \ \ \ \textcolor{keywordflow}{return}\ font}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00077}00077\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00078}00078\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00079}\mbox{\hyperlink{namespacematplotlib_1_1backends_1_1__backend__pdf__ps_acf704c978c95d4377a00c74744095480}{00079}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacematplotlib_1_1backends_1_1__backend__pdf__ps_acf704c978c95d4377a00c74744095480}{font\_as\_file}}(font):}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00080}00080\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00081}00081\ \textcolor{stringliteral}{\ \ \ \ Convert\ a\ TTFont\ object\ into\ a\ file-\/like\ object.}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00082}00082\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00083}00083\ \textcolor{stringliteral}{\ \ \ \ Parameters}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00084}00084\ \textcolor{stringliteral}{\ \ \ \ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00085}00085\ \textcolor{stringliteral}{\ \ \ \ font\ :\ fontTools.ttLib.ttFont.TTFont}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00086}00086\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ A\ font\ object}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00087}00087\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00088}00088\ \textcolor{stringliteral}{\ \ \ \ Returns}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00089}00089\ \textcolor{stringliteral}{\ \ \ \ -\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00090}00090\ \textcolor{stringliteral}{\ \ \ \ BytesIO}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00091}00091\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ A\ file\ object\ with\ the\ font\ saved\ into\ it}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00092}00092\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00093}00093\ \ \ \ \ fh\ =\ \mbox{\hyperlink{classBytesIO}{BytesIO}}()}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00094}00094\ \ \ \ \ font.save(fh,\ reorderTables=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00095}00095\ \ \ \ \ \textcolor{keywordflow}{return}\ fh}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00096}00096\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00097}00097\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00098}\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1CharacterTracker}{00098}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1CharacterTracker}{CharacterTracker}}:}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00099}00099\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00100}00100\ \textcolor{stringliteral}{\ \ \ \ Helper\ for\ font\ subsetting\ by\ the\ pdf\ and\ ps\ backends.}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00101}00101\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00102}00102\ \textcolor{stringliteral}{\ \ \ \ Maintains\ a\ mapping\ of\ font\ paths\ to\ the\ set\ of\ character\ codepoints\ that}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00103}00103\ \textcolor{stringliteral}{\ \ \ \ are\ being\ used\ from\ that\ font.}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00104}00104\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00105}00105\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00106}00106\ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self):}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00107}00107\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1CharacterTracker_a739cde313e3bdf72e866f44f8d675d84}{used}}\ =\ \{\}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00108}00108\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00109}\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1CharacterTracker_a804b9b3746be389190acb31c2deff8f7}{00109}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1CharacterTracker_a804b9b3746be389190acb31c2deff8f7}{track}}(self,\ font,\ s):}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00110}00110\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Record\ that\ string\ *s*\ is\ being\ typeset\ using\ font\ *font*."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00111}00111\ \ \ \ \ \ \ \ \ char\_to\_font\ =\ font.\_get\_fontmap(s)}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00112}00112\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ \_c,\ \_f\ \textcolor{keywordflow}{in}\ char\_to\_font.items():}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00113}00113\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1CharacterTracker_a739cde313e3bdf72e866f44f8d675d84}{used}}.setdefault(\_f.fname,\ set()).add(ord(\_c))}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00114}00114\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00115}\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1CharacterTracker_a3fd37f23f273068af1c8096afd757eaa}{00115}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1CharacterTracker_a3fd37f23f273068af1c8096afd757eaa}{track\_glyph}}(self,\ font,\ glyph):}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00116}00116\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Record\ that\ codepoint\ *glyph*\ is\ being\ typeset\ using\ font\ *font*."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00117}00117\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1CharacterTracker_a739cde313e3bdf72e866f44f8d675d84}{used}}.setdefault(font.fname,\ set()).add(glyph)}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00118}00118\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00119}00119\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00120}\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase}{00120}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase}{RendererPDFPSBase}}(\mbox{\hyperlink{classmatplotlib_1_1backend__bases_1_1RendererBase}{RendererBase}}):}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00121}00121\ \ \ \ \ \textcolor{comment}{\#\ The\ following\ attributes\ must\ be\ defined\ by\ the\ subclasses:}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00122}00122\ \ \ \ \ \textcolor{comment}{\#\ -\/\ \_afm\_font\_dir}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00123}00123\ \ \ \ \ \textcolor{comment}{\#\ -\/\ \_use\_afm\_rc\_name}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00124}00124\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00125}00125\ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self,\ width,\ height):}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00126}00126\ \ \ \ \ \ \ \ \ super().\_\_init\_\_()}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00127}00127\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase_a55856d35dcfdf98307cb10fb3b1643ba}{width}}\ =\ width}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00128}00128\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase_a131284b65ec191c070a364d1e1118555}{height}}\ =\ height}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00129}00129\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00130}\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase_a809fd8a1254b36897dfd1512cbd27409}{00130}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase_a809fd8a1254b36897dfd1512cbd27409}{flipy}}(self):}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00131}00131\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ docstring\ inherited}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00132}00132\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{False}\ \ \textcolor{comment}{\#\ y\ increases\ from\ bottom\ to\ top.}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00133}00133\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00134}\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase_a5775f981528279b0e3dde5a8ce849e48}{00134}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase_a5775f981528279b0e3dde5a8ce849e48}{option\_scale\_image}}(self):}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00135}00135\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ docstring\ inherited}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00136}00136\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{True}\ \ \textcolor{comment}{\#\ PDF\ and\ PS\ support\ arbitrary\ image\ scaling.}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00137}00137\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00138}\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase_af5468d00405ef90ba8870ec0fa919fa7}{00138}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase_af5468d00405ef90ba8870ec0fa919fa7}{option\_image\_nocomposite}}(self):}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00139}00139\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ docstring\ inherited}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00140}00140\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Decide\ whether\ to\ composite\ image\ based\ on\ rcParam\ value.}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00141}00141\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keywordflow}{not}\ mpl.rcParams[\textcolor{stringliteral}{"{}image.composite\_image"{}}]}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00142}00142\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00143}\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase_aee3e804b690304abbfb9793a43f8a737}{00143}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase_aee3e804b690304abbfb9793a43f8a737}{get\_canvas\_width\_height}}(self):}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00144}00144\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ docstring\ inherited}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00145}00145\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase_a55856d35dcfdf98307cb10fb3b1643ba}{width}}\ *\ 72.0,\ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase_a131284b65ec191c070a364d1e1118555}{height}}\ *\ 72.0}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00146}00146\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00147}\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase_a032a9a45f4c931057aab11dac5e395c4}{00147}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase_a032a9a45f4c931057aab11dac5e395c4}{get\_text\_width\_height\_descent}}(self,\ s,\ prop,\ ismath):}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00148}00148\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ docstring\ inherited}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00149}00149\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ismath\ ==\ \textcolor{stringliteral}{"{}TeX"{}}:}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00150}00150\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ super().\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase_a032a9a45f4c931057aab11dac5e395c4}{get\_text\_width\_height\_descent}}(s,\ prop,\ ismath)}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00151}00151\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ ismath:}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00152}00152\ \ \ \ \ \ \ \ \ \ \ \ \ parse\ =\ self.\mbox{\hyperlink{classmatplotlib_1_1backend__bases_1_1RendererBase_a6ccfad0a85e2dda1bb5f7f50cbdbf4c9}{\_text2path}}.mathtext\_parser.parse(s,\ 72,\ prop)}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00153}00153\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ parse.width,\ parse.height,\ parse.depth}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00154}00154\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ mpl.rcParams[self.\_use\_afm\_rc\_name]:}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00155}00155\ \ \ \ \ \ \ \ \ \ \ \ \ font\ =\ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase_aa8087369e7d3e0e11b20b5ec9630cceb}{\_get\_font\_afm}}(prop)}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00156}00156\ \ \ \ \ \ \ \ \ \ \ \ \ l,\ b,\ w,\ h,\ d\ =\ font.get\_str\_bbox\_and\_descent(s)}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00157}00157\ \ \ \ \ \ \ \ \ \ \ \ \ scale\ =\ prop.get\_size\_in\_points()\ /\ 1000}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00158}00158\ \ \ \ \ \ \ \ \ \ \ \ \ w\ *=\ scale}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00159}00159\ \ \ \ \ \ \ \ \ \ \ \ \ h\ *=\ scale}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00160}00160\ \ \ \ \ \ \ \ \ \ \ \ \ d\ *=\ scale}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00161}00161\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ w,\ h,\ d}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00162}00162\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00163}00163\ \ \ \ \ \ \ \ \ \ \ \ \ font\ =\ self.\mbox{\hyperlink{classmatplotlib_1_1backends_1_1__backend__pdf__ps_1_1RendererPDFPSBase_adaae3c2f2d8888b2bab14a1abfc890b1}{\_get\_font\_ttf}}(prop)}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00164}00164\ \ \ \ \ \ \ \ \ \ \ \ \ font.set\_text(s,\ 0.0,\ flags=ft2font.LoadFlags.NO\_HINTING)}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00165}00165\ \ \ \ \ \ \ \ \ \ \ \ \ w,\ h\ =\ font.get\_width\_height()}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00166}00166\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ font.get\_descent()}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00167}00167\ \ \ \ \ \ \ \ \ \ \ \ \ scale\ =\ 1\ /\ 64}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00168}00168\ \ \ \ \ \ \ \ \ \ \ \ \ w\ *=\ scale}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00169}00169\ \ \ \ \ \ \ \ \ \ \ \ \ h\ *=\ scale}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00170}00170\ \ \ \ \ \ \ \ \ \ \ \ \ d\ *=\ scale}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00171}00171\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ w,\ h,\ d}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00172}00172\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00173}00173\ \ \ \ \ \textcolor{keyword}{def\ }\_get\_font\_afm(self,\ prop):}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00174}00174\ \ \ \ \ \ \ \ \ fname\ =\ font\_manager.findfont(}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00175}00175\ \ \ \ \ \ \ \ \ \ \ \ \ prop,\ fontext=\textcolor{stringliteral}{"{}afm"{}},\ directory=self.\_afm\_font\_dir)}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00176}00176\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_cached\_get\_afm\_from\_fname(fname)}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00177}00177\ }
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00178}00178\ \ \ \ \ \textcolor{keyword}{def\ }\_get\_font\_ttf(self,\ prop):}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00179}00179\ \ \ \ \ \ \ \ \ fnames\ =\ font\_manager.fontManager.\_find\_fonts\_by\_props(prop)}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00180}00180\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00181}00181\ \ \ \ \ \ \ \ \ \ \ \ \ font\ =\ font\_manager.get\_font(fnames)}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00182}00182\ \ \ \ \ \ \ \ \ \ \ \ \ font.clear()}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00183}00183\ \ \ \ \ \ \ \ \ \ \ \ \ font.set\_size(prop.get\_size\_in\_points(),\ 72)}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00184}00184\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ font}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00185}00185\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ RuntimeError:}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00186}00186\ \ \ \ \ \ \ \ \ \ \ \ \ logging.getLogger(\_\_name\_\_).warning(}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00187}00187\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}The\ PostScript/PDF\ backend\ does\ not\ currently\ "{}}}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00188}00188\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}support\ the\ selected\ font\ (\%s)."{}},\ fnames)}
\DoxyCodeLine{\Hypertarget{__backend__pdf__ps_8py_source_l00189}00189\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}}

\end{DoxyCode}
