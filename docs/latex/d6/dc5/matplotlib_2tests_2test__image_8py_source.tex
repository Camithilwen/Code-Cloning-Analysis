\doxysection{test\+\_\+image.\+py}
\hypertarget{matplotlib_2tests_2test__image_8py_source}{}\label{matplotlib_2tests_2test__image_8py_source}\index{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/matplotlib/tests/test\_image.py@{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/matplotlib/tests/test\_image.py}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00001}\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__image}{00001}}\ \textcolor{keyword}{from}\ contextlib\ \textcolor{keyword}{import}\ ExitStack}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00002}00002\ \textcolor{keyword}{from}\ copy\ \textcolor{keyword}{import}\ copy}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00003}00003\ \textcolor{keyword}{import}\ functools}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00004}00004\ \textcolor{keyword}{import}\ io}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00005}00005\ \textcolor{keyword}{import}\ os}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00006}00006\ \textcolor{keyword}{from}\ pathlib\ \textcolor{keyword}{import}\ Path}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00007}00007\ \textcolor{keyword}{import}\ platform}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00008}00008\ \textcolor{keyword}{import}\ sys}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00009}00009\ \textcolor{keyword}{import}\ urllib.request}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00010}00010\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00011}00011\ \textcolor{keyword}{import}\ numpy\ \textcolor{keyword}{as}\ np}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00012}00012\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacenumpy_1_1testing}{numpy.testing}}\ \textcolor{keyword}{import}\ assert\_array\_equal}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00013}00013\ \textcolor{keyword}{from}\ PIL\ \textcolor{keyword}{import}\ Image}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00014}00014\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00015}00015\ \textcolor{keyword}{import}\ matplotlib\ \textcolor{keyword}{as}\ mpl}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00016}00016\ \textcolor{keyword}{from}\ matplotlib\ \textcolor{keyword}{import}\ (}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00017}00017\ \ \ \ \ colors,\ image\ \textcolor{keyword}{as}\ mimage,\ patches,\ pyplot\ \textcolor{keyword}{as}\ plt,\ style,\ rcParams)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00018}00018\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacematplotlib_1_1image}{matplotlib.image}}\ \textcolor{keyword}{import}\ (AxesImage,\ BboxImage,\ FigureImage,}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00019}00019\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ NonUniformImage,\ PcolorImage)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00020}00020\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacematplotlib_1_1testing_1_1decorators}{matplotlib.testing.decorators}}\ \textcolor{keyword}{import}\ check\_figures\_equal,\ image\_comparison}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00021}00021\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacematplotlib_1_1transforms}{matplotlib.transforms}}\ \textcolor{keyword}{import}\ Bbox,\ Affine2D,\ TransformedBbox}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00022}00022\ \textcolor{keyword}{import}\ \mbox{\hyperlink{namespacematplotlib_1_1ticker}{matplotlib.ticker}}\ \textcolor{keyword}{as}\ mticker}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00024}00024\ \textcolor{keyword}{import}\ pytest}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00025}00025\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00026}00026\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00027}00027\ \textcolor{preprocessor}{@image\_comparison(['interp\_alpha.png'],\ remove\_text=True)}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00028}\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__image_aedda2a1937d0e9d8a7c030b4f27386a1}{00028}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__image_aedda2a1937d0e9d8a7c030b4f27386a1}{test\_alpha\_interp}}():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00029}00029\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Test\ the\ interpolation\ of\ the\ alpha\ channel\ on\ RGBA\ images"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00030}00030\ \ \ \ \ fig,\ (axl,\ axr)\ =\ plt.subplots(1,\ 2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00031}00031\ \ \ \ \ \textcolor{comment}{\#\ full\ green\ image}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00032}00032\ \ \ \ \ img\ =\ np.zeros((5,\ 5,\ 4))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00033}00033\ \ \ \ \ img[...,\ 1]\ =\ np.ones((5,\ 5))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00034}00034\ \ \ \ \ \textcolor{comment}{\#\ transparent\ under\ main\ diagonal}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00035}00035\ \ \ \ \ img[...,\ 3]\ =\ np.tril(np.ones((5,\ 5),\ dtype=np.uint8))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00036}00036\ \ \ \ \ axl.imshow(img,\ interpolation=\textcolor{stringliteral}{"{}none"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00037}00037\ \ \ \ \ axr.imshow(img,\ interpolation=\textcolor{stringliteral}{"{}bilinear"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00038}00038\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00039}00039\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00040}00040\ \textcolor{preprocessor}{@image\_comparison}([\textcolor{stringliteral}{'interp\_nearest\_vs\_none'}],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00041}00041\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ extensions=[\textcolor{stringliteral}{'pdf'},\ \textcolor{stringliteral}{'svg'}],\ remove\_text=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00042}\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__image_a1686a8aa6af3f135782b083691a7755e}{00042}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__image_a1686a8aa6af3f135782b083691a7755e}{test\_interp\_nearest\_vs\_none}}():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00043}00043\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Test\ the\ effect\ of\ "{}nearest"{}\ and\ "{}none"{}\ interpolation"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00044}00044\ \ \ \ \ \textcolor{comment}{\#\ Setting\ dpi\ to\ something\ really\ small\ makes\ the\ difference\ very}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00045}00045\ \ \ \ \ \textcolor{comment}{\#\ visible.\ This\ works\ fine\ with\ pdf,\ since\ the\ dpi\ setting\ doesn't}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00046}00046\ \ \ \ \ \textcolor{comment}{\#\ affect\ anything\ but\ images,\ but\ the\ agg\ output\ becomes\ unusably}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00047}00047\ \ \ \ \ \textcolor{comment}{\#\ small.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00048}00048\ \ \ \ \ rcParams[\textcolor{stringliteral}{'savefig.dpi'}]\ =\ 3}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00049}00049\ \ \ \ \ X\ =\ np.array([[[218,\ 165,\ 32],\ [122,\ 103,\ 238]],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00050}00050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[127,\ 255,\ 0],\ [255,\ 99,\ 71]]],\ dtype=np.uint8)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00051}00051\ \ \ \ \ fig,\ (ax1,\ ax2)\ =\ plt.subplots(1,\ 2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00052}00052\ \ \ \ \ ax1.imshow(X,\ interpolation=\textcolor{stringliteral}{'none'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00053}00053\ \ \ \ \ ax1.set\_title(\textcolor{stringliteral}{'interpolation\ none'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00054}00054\ \ \ \ \ ax2.imshow(X,\ interpolation=\textcolor{stringliteral}{'nearest'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00055}00055\ \ \ \ \ ax2.set\_title(\textcolor{stringliteral}{'interpolation\ nearest'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00056}00056\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00057}00057\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00058}00058\ \textcolor{preprocessor}{@pytest.mark.parametrize('suppressComposite',\ [False,\ True])}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00059}00059\ \textcolor{preprocessor}{@image\_comparison(['figimage'],\ extensions=['png',\ 'pdf'])}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00060}00060\ \textcolor{keyword}{def\ }test\_figimage(suppressComposite):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00061}00061\ \ \ \ \ fig\ =\ plt.figure(figsize=(2,\ 2),\ dpi=100)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00062}00062\ \ \ \ \ fig.suppressComposite\ =\ suppressComposite}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00063}00063\ \ \ \ \ x,\ y\ =\ np.ix\_(np.arange(100)\ /\ 100.0,\ np.arange(100)\ /\ 100)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00064}00064\ \ \ \ \ z\ =\ np.sin(x**2\ +\ y**2\ -\/\ x*y)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00065}00065\ \ \ \ \ c\ =\ np.sin(20*x**2\ +\ 50*y**2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00066}00066\ \ \ \ \ img\ =\ z\ +\ c/5}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00067}00067\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00068}00068\ \ \ \ \ fig.figimage(img,\ xo=0,\ yo=0,\ origin=\textcolor{stringliteral}{'lower'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00069}00069\ \ \ \ \ fig.figimage(img[::-\/1,\ :],\ xo=0,\ yo=100,\ origin=\textcolor{stringliteral}{'lower'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00070}00070\ \ \ \ \ fig.figimage(img[:,\ ::-\/1],\ xo=100,\ yo=0,\ origin=\textcolor{stringliteral}{'lower'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00071}00071\ \ \ \ \ fig.figimage(img[::-\/1,\ ::-\/1],\ xo=100,\ yo=100,\ origin=\textcolor{stringliteral}{'lower'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00072}00072\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00073}00073\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00074}00074\ \textcolor{keyword}{def\ }test\_image\_python\_io():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00075}00075\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00076}00076\ \ \ \ \ ax.plot([1,\ 2,\ 3])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00077}00077\ \ \ \ \ buffer\ =\ io.BytesIO()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00078}00078\ \ \ \ \ fig.savefig(buffer)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00079}00079\ \ \ \ \ buffer.seek(0)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00080}00080\ \ \ \ \ plt.imread(buffer)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00081}00081\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00082}00082\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00083}00083\ \textcolor{preprocessor}{@pytest.mark.parametrize}(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00084}00084\ \ \ \ \ \textcolor{stringliteral}{"{}img\_size,\ fig\_size,\ interpolation"{}},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00085}00085\ \ \ \ \ [(5,\ 2,\ \textcolor{stringliteral}{"{}hanning"{}}),\ \ \textcolor{comment}{\#\ data\ larger\ than\ figure.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00086}00086\ \ \ \ \ \ (5,\ 5,\ \textcolor{stringliteral}{"{}nearest"{}}),\ \ \textcolor{comment}{\#\ exact\ resample.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00087}00087\ \ \ \ \ \ (5,\ 10,\ \textcolor{stringliteral}{"{}nearest"{}}),\ \ \textcolor{comment}{\#\ double\ sample.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00088}00088\ \ \ \ \ \ (3,\ 2.9,\ \textcolor{stringliteral}{"{}hanning"{}}),\ \ \textcolor{comment}{\#\ <3\ upsample.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00089}00089\ \ \ \ \ \ (3,\ 9.1,\ \textcolor{stringliteral}{"{}nearest"{}}),\ \ \textcolor{comment}{\#\ >3\ upsample.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00090}00090\ \ \ \ \ \ ])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00091}00091\ \textcolor{preprocessor}{@check\_figures\_equal(extensions=['png'])}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00092}00092\ \textcolor{keyword}{def\ }test\_imshow\_antialiased(fig\_test,\ fig\_ref,}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00093}00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ img\_size,\ fig\_size,\ interpolation):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00094}00094\ \ \ \ \ np.random.seed(19680801)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00095}00095\ \ \ \ \ dpi\ =\ plt.rcParams[\textcolor{stringliteral}{"{}savefig.dpi"{}}]}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00096}00096\ \ \ \ \ A\ =\ np.random.rand(int(dpi\ *\ img\_size),\ int(dpi\ *\ img\_size))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00097}00097\ \ \ \ \ \textcolor{keywordflow}{for}\ fig\ \textcolor{keywordflow}{in}\ [fig\_test,\ fig\_ref]:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00098}00098\ \ \ \ \ \ \ \ \ fig.set\_size\_inches(fig\_size,\ fig\_size)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00099}00099\ \ \ \ \ ax\ =\ fig\_test.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00100}00100\ \ \ \ \ ax.set\_position([0,\ 0,\ 1,\ 1])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00101}00101\ \ \ \ \ ax.imshow(A,\ interpolation=\textcolor{stringliteral}{'auto'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00102}00102\ \ \ \ \ ax\ =\ fig\_ref.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00103}00103\ \ \ \ \ ax.set\_position([0,\ 0,\ 1,\ 1])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00104}00104\ \ \ \ \ ax.imshow(A,\ interpolation=interpolation)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00105}00105\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00106}00106\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00107}00107\ \textcolor{preprocessor}{@check\_figures\_equal(extensions=['png'])}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00108}00108\ \textcolor{keyword}{def\ }test\_imshow\_zoom(fig\_test,\ fig\_ref):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00109}00109\ \ \ \ \ \textcolor{comment}{\#\ should\ be\ less\ than\ 3\ upsample,\ so\ should\ be\ nearest...}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00110}00110\ \ \ \ \ np.random.seed(19680801)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00111}00111\ \ \ \ \ dpi\ =\ plt.rcParams[\textcolor{stringliteral}{"{}savefig.dpi"{}}]}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00112}00112\ \ \ \ \ A\ =\ np.random.rand(int(dpi\ *\ 3),\ int(dpi\ *\ 3))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00113}00113\ \ \ \ \ \textcolor{keywordflow}{for}\ fig\ \textcolor{keywordflow}{in}\ [fig\_test,\ fig\_ref]:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00114}00114\ \ \ \ \ \ \ \ \ fig.set\_size\_inches(2.9,\ 2.9)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00115}00115\ \ \ \ \ ax\ =\ fig\_test.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00116}00116\ \ \ \ \ ax.imshow(A,\ interpolation=\textcolor{stringliteral}{'auto'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00117}00117\ \ \ \ \ ax.set\_xlim([10,\ 20])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00118}00118\ \ \ \ \ ax.set\_ylim([10,\ 20])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00119}00119\ \ \ \ \ ax\ =\ fig\_ref.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00120}00120\ \ \ \ \ ax.imshow(A,\ interpolation=\textcolor{stringliteral}{'nearest'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00121}00121\ \ \ \ \ ax.set\_xlim([10,\ 20])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00122}00122\ \ \ \ \ ax.set\_ylim([10,\ 20])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00123}00123\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00124}00124\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00125}00125\ \textcolor{preprocessor}{@check\_figures\_equal(extensions=['png'])}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00126}00126\ \textcolor{keyword}{def\ }test\_imshow\_pil(fig\_test,\ fig\_ref):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00127}00127\ \ \ \ \ style.use(\textcolor{stringliteral}{"{}default"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00128}00128\ \ \ \ \ png\_path\ =\ Path(\_\_file\_\_).parent\ /\ \textcolor{stringliteral}{"{}baseline\_images/pngsuite/basn3p04.png"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00129}00129\ \ \ \ \ tiff\_path\ =\ Path(\_\_file\_\_).parent\ /\ \textcolor{stringliteral}{"{}baseline\_images/test\_image/uint16.tif"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00130}00130\ \ \ \ \ axs\ =\ fig\_test.subplots(2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00131}00131\ \ \ \ \ axs[0].imshow(Image.open(png\_path))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00132}00132\ \ \ \ \ axs[1].imshow(Image.open(tiff\_path))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00133}00133\ \ \ \ \ axs\ =\ fig\_ref.subplots(2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00134}00134\ \ \ \ \ axs[0].imshow(plt.imread(png\_path))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00135}00135\ \ \ \ \ axs[1].imshow(plt.imread(tiff\_path))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00136}00136\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00137}00137\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00138}00138\ \textcolor{keyword}{def\ }test\_imread\_pil\_uint16():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00139}00139\ \ \ \ \ img\ =\ plt.imread(os.path.join(os.path.dirname(\_\_file\_\_),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00140}00140\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'baseline\_images'},\ \textcolor{stringliteral}{'test\_image'},\ \textcolor{stringliteral}{'uint16.tif'}))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00141}00141\ \ \ \ \ \textcolor{keyword}{assert}\ img.dtype\ ==\ np.uint16}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00142}00142\ \ \ \ \ \textcolor{keyword}{assert}\ np.sum(img)\ ==\ 134184960}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00143}00143\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00144}00144\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00145}00145\ \textcolor{keyword}{def\ }test\_imread\_fspath():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00146}00146\ \ \ \ \ img\ =\ plt.imread(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00147}00147\ \ \ \ \ \ \ \ \ Path(\_\_file\_\_).parent\ /\ \textcolor{stringliteral}{'baseline\_images/test\_image/uint16.tif'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00148}00148\ \ \ \ \ \textcolor{keyword}{assert}\ img.dtype\ ==\ np.uint16}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00149}00149\ \ \ \ \ \textcolor{keyword}{assert}\ np.sum(img)\ ==\ 134184960}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00150}00150\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00151}00151\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00152}00152\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}fmt"{},\ ["{}png"{},\ "{}jpg"{},\ "{}jpeg"{},\ "{}tiff"{}])}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00153}00153\ \textcolor{keyword}{def\ }test\_imsave(fmt):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00154}00154\ \ \ \ \ has\_alpha\ =\ fmt\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ [\textcolor{stringliteral}{"{}jpg"{}},\ \textcolor{stringliteral}{"{}jpeg"{}}]}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00155}00155\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00156}00156\ \ \ \ \ \textcolor{comment}{\#\ The\ goal\ here\ is\ that\ the\ user\ can\ specify\ an\ output\ logical\ DPI}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00157}00157\ \ \ \ \ \textcolor{comment}{\#\ for\ the\ image,\ but\ this\ will\ not\ actually\ add\ any\ extra\ pixels}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00158}00158\ \ \ \ \ \textcolor{comment}{\#\ to\ the\ image,\ it\ will\ merely\ be\ used\ for\ metadata\ purposes.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00159}00159\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00160}00160\ \ \ \ \ \textcolor{comment}{\#\ So\ we\ do\ the\ traditional\ case\ (dpi\ ==\ 1),\ and\ the\ new\ case\ (dpi}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00161}00161\ \ \ \ \ \textcolor{comment}{\#\ ==\ 100)\ and\ read\ the\ resulting\ PNG\ files\ back\ in\ and\ make\ sure}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00162}00162\ \ \ \ \ \textcolor{comment}{\#\ the\ data\ is\ 100\%\ identical.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00163}00163\ \ \ \ \ np.random.seed(1)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00164}00164\ \ \ \ \ \textcolor{comment}{\#\ The\ height\ of\ 1856\ pixels\ was\ selected\ because\ going\ through\ creating\ an}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00165}00165\ \ \ \ \ \textcolor{comment}{\#\ actual\ dpi=100\ figure\ to\ save\ the\ image\ to\ a\ Pillow-\/provided\ format\ would}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00166}00166\ \ \ \ \ \textcolor{comment}{\#\ cause\ a\ rounding\ error\ resulting\ in\ a\ final\ image\ of\ shape\ 1855.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00167}00167\ \ \ \ \ data\ =\ np.random.rand(1856,\ 2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00168}00168\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00169}00169\ \ \ \ \ buff\_dpi1\ =\ io.BytesIO()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00170}00170\ \ \ \ \ plt.imsave(buff\_dpi1,\ data,\ format=fmt,\ dpi=1)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00171}00171\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00172}00172\ \ \ \ \ buff\_dpi100\ =\ io.BytesIO()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00173}00173\ \ \ \ \ plt.imsave(buff\_dpi100,\ data,\ format=fmt,\ dpi=100)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00174}00174\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00175}00175\ \ \ \ \ buff\_dpi1.seek(0)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00176}00176\ \ \ \ \ arr\_dpi1\ =\ plt.imread(buff\_dpi1,\ format=fmt)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00177}00177\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00178}00178\ \ \ \ \ buff\_dpi100.seek(0)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00179}00179\ \ \ \ \ arr\_dpi100\ =\ plt.imread(buff\_dpi100,\ format=fmt)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00180}00180\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00181}00181\ \ \ \ \ \textcolor{keyword}{assert}\ arr\_dpi1.shape\ ==\ (1856,\ 2,\ 3\ +\ has\_alpha)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00182}00182\ \ \ \ \ \textcolor{keyword}{assert}\ arr\_dpi100.shape\ ==\ (1856,\ 2,\ 3\ +\ has\_alpha)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00183}00183\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00184}00184\ \ \ \ \ assert\_array\_equal(arr\_dpi1,\ arr\_dpi100)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00185}00185\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00186}00186\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00187}00187\ \textcolor{keyword}{def\ }test\_imsave\_python\_sequences():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00188}00188\ \ \ \ \ \textcolor{comment}{\#\ Tests\ saving\ an\ image\ with\ data\ passed\ using\ Python\ sequence\ types}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00189}00189\ \ \ \ \ \textcolor{comment}{\#\ such\ as\ lists\ or\ tuples.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00190}00190\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00191}00191\ \ \ \ \ \textcolor{comment}{\#\ RGB\ image:\ 3\ rows\ ×\ 2\ columns,\ with\ float\ values\ in\ [0.0,\ 1.0]}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00192}00192\ \ \ \ \ img\_data\ =\ [}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00193}00193\ \ \ \ \ \ \ \ \ [(1.0,\ 0.0,\ 0.0),\ (0.0,\ 1.0,\ 0.0)],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00194}00194\ \ \ \ \ \ \ \ \ [(0.0,\ 0.0,\ 1.0),\ (1.0,\ 1.0,\ 0.0)],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00195}00195\ \ \ \ \ \ \ \ \ [(0.0,\ 1.0,\ 1.0),\ (1.0,\ 0.0,\ 1.0)],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00196}00196\ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00197}00197\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00198}00198\ \ \ \ \ buff\ =\ io.BytesIO()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00199}00199\ \ \ \ \ plt.imsave(buff,\ img\_data,\ format=\textcolor{stringliteral}{"{}png"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00200}00200\ \ \ \ \ buff.seek(0)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00201}00201\ \ \ \ \ read\_img\ =\ plt.imread(buff)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00202}00202\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00203}00203\ \ \ \ \ assert\_array\_equal(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00204}00204\ \ \ \ \ \ \ \ \ np.array(img\_data),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00205}00205\ \ \ \ \ \ \ \ \ read\_img[:,\ :,\ :3]\ \ \textcolor{comment}{\#\ Drop\ alpha\ if\ present}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00206}00206\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00207}00207\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00208}00208\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00209}00209\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}origin"{},\ ["{}upper"{},\ "{}lower"{}])}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00210}00210\ \textcolor{keyword}{def\ }test\_imsave\_rgba\_origin(origin):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00211}00211\ \ \ \ \ \textcolor{comment}{\#\ test\ that\ imsave\ always\ passes\ c-\/contiguous\ arrays\ down\ to\ pillow}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00212}00212\ \ \ \ \ buf\ =\ io.BytesIO()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00213}00213\ \ \ \ \ result\ =\ np.zeros((10,\ 10,\ 4),\ dtype=\textcolor{stringliteral}{'uint8'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00214}00214\ \ \ \ \ mimage.imsave(buf,\ arr=result,\ format=\textcolor{stringliteral}{"{}png"{}},\ origin=origin)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00215}00215\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00216}00216\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00217}00217\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}fmt"{},\ ["{}png"{},\ "{}pdf"{},\ "{}ps"{},\ "{}eps"{},\ "{}svg"{}])}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00218}00218\ \textcolor{keyword}{def\ }test\_imsave\_fspath(fmt):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00219}00219\ \ \ \ \ plt.imsave(Path(os.devnull),\ np.array([[0,\ 1]]),\ format=fmt)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00220}00220\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00221}00221\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00222}00222\ \textcolor{keyword}{def\ }test\_imsave\_color\_alpha():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00223}00223\ \ \ \ \ \textcolor{comment}{\#\ Test\ that\ imsave\ accept\ arrays\ with\ ndim=3\ where\ the\ third\ dimension\ is}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00224}00224\ \ \ \ \ \textcolor{comment}{\#\ color\ and\ alpha\ without\ raising\ any\ exceptions,\ and\ that\ the\ data\ is}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00225}00225\ \ \ \ \ \textcolor{comment}{\#\ acceptably\ preserved\ through\ a\ save/read\ roundtrip.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00226}00226\ \ \ \ \ np.random.seed(1)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00227}00227\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00228}00228\ \ \ \ \ \textcolor{keywordflow}{for}\ origin\ \textcolor{keywordflow}{in}\ [\textcolor{stringliteral}{'lower'},\ \textcolor{stringliteral}{'upper'}]:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00229}00229\ \ \ \ \ \ \ \ \ data\ =\ np.random.rand(16,\ 16,\ 4)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00230}00230\ \ \ \ \ \ \ \ \ buff\ =\ io.BytesIO()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00231}00231\ \ \ \ \ \ \ \ \ plt.imsave(buff,\ data,\ origin=origin,\ format=\textcolor{stringliteral}{"{}png"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00232}00232\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00233}00233\ \ \ \ \ \ \ \ \ buff.seek(0)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00234}00234\ \ \ \ \ \ \ \ \ arr\_buf\ =\ plt.imread(buff)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00235}00235\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00236}00236\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Recreate\ the\ float\ -\/>\ uint8\ conversion\ of\ the\ data}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00237}00237\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ We\ can\ only\ expect\ to\ be\ the\ same\ with\ 8\ bits\ of\ precision,}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00238}00238\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ since\ that's\ what\ the\ PNG\ file\ used.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00239}00239\ \ \ \ \ \ \ \ \ data\ =\ (255*data).astype(\textcolor{stringliteral}{'uint8'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00240}00240\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ origin\ ==\ \textcolor{stringliteral}{'lower'}:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00241}00241\ \ \ \ \ \ \ \ \ \ \ \ \ data\ =\ data[::-\/1]}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00242}00242\ \ \ \ \ \ \ \ \ arr\_buf\ =\ (255*arr\_buf).astype(\textcolor{stringliteral}{'uint8'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00243}00243\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00244}00244\ \ \ \ \ \ \ \ \ assert\_array\_equal(data,\ arr\_buf)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00245}00245\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00246}00246\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00247}00247\ \textcolor{keyword}{def\ }test\_imsave\_pil\_kwargs\_png():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00248}00248\ \ \ \ \ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacePIL_1_1PngImagePlugin}{PIL.PngImagePlugin}}\ \textcolor{keyword}{import}\ PngInfo}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00249}00249\ \ \ \ \ buf\ =\ io.BytesIO()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00250}00250\ \ \ \ \ pnginfo\ =\ PngInfo()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00251}00251\ \ \ \ \ pnginfo.add\_text(\textcolor{stringliteral}{"{}Software"{}},\ \textcolor{stringliteral}{"{}test"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00252}00252\ \ \ \ \ plt.imsave(buf,\ [[0,\ 1],\ [2,\ 3]],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00253}00253\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ format=\textcolor{stringliteral}{"{}png"{}},\ pil\_kwargs=\{\textcolor{stringliteral}{"{}pnginfo"{}}:\ pnginfo\})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00254}00254\ \ \ \ \ im\ =\ Image.open(buf)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00255}00255\ \ \ \ \ \textcolor{keyword}{assert}\ im.info[\textcolor{stringliteral}{"{}Software"{}}]\ ==\ \textcolor{stringliteral}{"{}test"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00256}00256\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00257}00257\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00258}00258\ \textcolor{keyword}{def\ }test\_imsave\_pil\_kwargs\_tiff():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00259}00259\ \ \ \ \ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacePIL_1_1TiffTags}{PIL.TiffTags}}\ \textcolor{keyword}{import}\ TAGS\_V2\ \textcolor{keyword}{as}\ TAGS}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00260}00260\ \ \ \ \ buf\ =\ io.BytesIO()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00261}00261\ \ \ \ \ pil\_kwargs\ =\ \{\textcolor{stringliteral}{"{}description"{}}:\ \textcolor{stringliteral}{"{}test\ image"{}}\}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00262}00262\ \ \ \ \ plt.imsave(buf,\ [[0,\ 1],\ [2,\ 3]],\ format=\textcolor{stringliteral}{"{}tiff"{}},\ pil\_kwargs=pil\_kwargs)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00263}00263\ \ \ \ \ \textcolor{keyword}{assert}\ len(pil\_kwargs)\ ==\ 1}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00264}00264\ \ \ \ \ im\ =\ Image.open(buf)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00265}00265\ \ \ \ \ tags\ =\ \{TAGS[k].name:\ v\ \textcolor{keywordflow}{for}\ k,\ v\ \textcolor{keywordflow}{in}\ im.tag\_v2.items()\}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00266}00266\ \ \ \ \ \textcolor{keyword}{assert}\ tags[\textcolor{stringliteral}{"{}ImageDescription"{}}]\ ==\ \textcolor{stringliteral}{"{}test\ image"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00267}00267\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00268}00268\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00269}00269\ \textcolor{preprocessor}{@image\_comparison(['image\_alpha'],\ remove\_text=True)}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00270}00270\ \textcolor{keyword}{def\ }test\_image\_alpha():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00271}00271\ \ \ \ \ np.random.seed(0)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00272}00272\ \ \ \ \ Z\ =\ np.random.rand(6,\ 6)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00273}00273\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00274}00274\ \ \ \ \ fig,\ (ax1,\ ax2,\ ax3)\ =\ plt.subplots(1,\ 3)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00275}00275\ \ \ \ \ ax1.imshow(Z,\ alpha=1.0,\ interpolation=\textcolor{stringliteral}{'none'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00276}00276\ \ \ \ \ ax2.imshow(Z,\ alpha=0.5,\ interpolation=\textcolor{stringliteral}{'none'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00277}00277\ \ \ \ \ ax3.imshow(Z,\ alpha=0.5,\ interpolation=\textcolor{stringliteral}{'nearest'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00278}00278\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00279}00279\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00280}00280\ \textcolor{preprocessor}{@mpl.style.context('mpl20')}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00281}00281\ \textcolor{preprocessor}{@check\_figures\_equal(extensions=['png'])}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00282}00282\ \textcolor{keyword}{def\ }test\_imshow\_alpha(fig\_test,\ fig\_ref):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00283}00283\ \ \ \ \ np.random.seed(19680801)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00284}00284\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00285}00285\ \ \ \ \ rgbf\ =\ np.random.rand(6,\ 6,\ 3)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00286}00286\ \ \ \ \ rgbu\ =\ np.uint8(rgbf\ *\ 255)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00287}00287\ \ \ \ \ ((ax0,\ ax1),\ (ax2,\ ax3))\ =\ fig\_test.subplots(2,\ 2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00288}00288\ \ \ \ \ ax0.imshow(rgbf,\ alpha=0.5)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00289}00289\ \ \ \ \ ax1.imshow(rgbf,\ alpha=0.75)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00290}00290\ \ \ \ \ ax2.imshow(rgbu,\ alpha=0.5)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00291}00291\ \ \ \ \ ax3.imshow(rgbu,\ alpha=0.75)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00292}00292\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00293}00293\ \ \ \ \ rgbaf\ =\ np.concatenate((rgbf,\ np.ones((6,\ 6,\ 1))),\ axis=2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00294}00294\ \ \ \ \ rgbau\ =\ np.concatenate((rgbu,\ np.full((6,\ 6,\ 1),\ 255,\ np.uint8)),\ axis=2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00295}00295\ \ \ \ \ ((ax0,\ ax1),\ (ax2,\ ax3))\ =\ fig\_ref.subplots(2,\ 2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00296}00296\ \ \ \ \ rgbaf[:,\ :,\ 3]\ =\ 0.5}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00297}00297\ \ \ \ \ ax0.imshow(rgbaf)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00298}00298\ \ \ \ \ rgbaf[:,\ :,\ 3]\ =\ 0.75}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00299}00299\ \ \ \ \ ax1.imshow(rgbaf)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00300}00300\ \ \ \ \ rgbau[:,\ :,\ 3]\ =\ 127}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00301}00301\ \ \ \ \ ax2.imshow(rgbau)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00302}00302\ \ \ \ \ rgbau[:,\ :,\ 3]\ =\ 191}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00303}00303\ \ \ \ \ ax3.imshow(rgbau)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00304}00304\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00305}00305\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00306}00306\ \textcolor{keyword}{def\ }test\_cursor\_data():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00307}00307\ \ \ \ \ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacematplotlib_1_1backend__bases}{matplotlib.backend\_bases}}\ \textcolor{keyword}{import}\ MouseEvent}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00308}00308\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00309}00309\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00310}00310\ \ \ \ \ im\ =\ ax.imshow(np.arange(100).reshape(10,\ 10),\ origin=\textcolor{stringliteral}{'upper'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00311}00311\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00312}00312\ \ \ \ \ x,\ y\ =\ 4,\ 4}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00313}00313\ \ \ \ \ xdisp,\ ydisp\ =\ ax.transData.transform([x,\ y])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00314}00314\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00315}00315\ \ \ \ \ event\ =\ MouseEvent(\textcolor{stringliteral}{'motion\_notify\_event'},\ fig.canvas,\ xdisp,\ ydisp)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00316}00316\ \ \ \ \ \textcolor{keyword}{assert}\ im.get\_cursor\_data(event)\ ==\ 44}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00317}00317\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00318}00318\ \ \ \ \ \textcolor{comment}{\#\ Now\ try\ for\ a\ point\ outside\ the\ image}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00319}00319\ \ \ \ \ \textcolor{comment}{\#\ Tests\ issue\ \#4957}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00320}00320\ \ \ \ \ x,\ y\ =\ 10.1,\ 4}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00321}00321\ \ \ \ \ xdisp,\ ydisp\ =\ ax.transData.transform([x,\ y])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00322}00322\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00323}00323\ \ \ \ \ event\ =\ MouseEvent(\textcolor{stringliteral}{'motion\_notify\_event'},\ fig.canvas,\ xdisp,\ ydisp)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00324}00324\ \ \ \ \ \textcolor{keyword}{assert}\ im.get\_cursor\_data(event)\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00325}00325\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00326}00326\ \ \ \ \ \textcolor{comment}{\#\ Hmm,\ something\ is\ wrong\ here...\ I\ get\ 0,\ not\ None...}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00327}00327\ \ \ \ \ \textcolor{comment}{\#\ But,\ this\ works\ further\ down\ in\ the\ tests\ with\ extents\ flipped}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00328}00328\ \ \ \ \ \textcolor{comment}{\#\ x,\ y\ =\ 0.1,\ -\/0.1}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00329}00329\ \ \ \ \ \textcolor{comment}{\#\ xdisp,\ ydisp\ =\ ax.transData.transform([x,\ y])}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00330}00330\ \ \ \ \ \textcolor{comment}{\#\ event\ =\ MouseEvent('motion\_notify\_event',\ fig.canvas,\ xdisp,\ ydisp)}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00331}00331\ \ \ \ \ \textcolor{comment}{\#\ z\ =\ im.get\_cursor\_data(event)}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00332}00332\ \ \ \ \ \textcolor{comment}{\#\ assert\ z\ is\ None,\ "{}Did\ not\ get\ None,\ got\ \%d"{}\ \%\ z}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00333}00333\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00334}00334\ \ \ \ \ ax.clear()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00335}00335\ \ \ \ \ \textcolor{comment}{\#\ Now\ try\ with\ the\ extents\ flipped.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00336}00336\ \ \ \ \ im\ =\ ax.imshow(np.arange(100).reshape(10,\ 10),\ origin=\textcolor{stringliteral}{'lower'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00337}00337\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00338}00338\ \ \ \ \ x,\ y\ =\ 4,\ 4}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00339}00339\ \ \ \ \ xdisp,\ ydisp\ =\ ax.transData.transform([x,\ y])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00340}00340\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00341}00341\ \ \ \ \ event\ =\ MouseEvent(\textcolor{stringliteral}{'motion\_notify\_event'},\ fig.canvas,\ xdisp,\ ydisp)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00342}00342\ \ \ \ \ \textcolor{keyword}{assert}\ im.get\_cursor\_data(event)\ ==\ 44}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00343}00343\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00344}00344\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00345}00345\ \ \ \ \ im\ =\ ax.imshow(np.arange(100).reshape(10,\ 10),\ extent=[0,\ 0.5,\ 0,\ 0.5])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00346}00346\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00347}00347\ \ \ \ \ x,\ y\ =\ 0.25,\ 0.25}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00348}00348\ \ \ \ \ xdisp,\ ydisp\ =\ ax.transData.transform([x,\ y])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00349}00349\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00350}00350\ \ \ \ \ event\ =\ MouseEvent(\textcolor{stringliteral}{'motion\_notify\_event'},\ fig.canvas,\ xdisp,\ ydisp)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00351}00351\ \ \ \ \ \textcolor{keyword}{assert}\ im.get\_cursor\_data(event)\ ==\ 55}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00352}00352\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00353}00353\ \ \ \ \ \textcolor{comment}{\#\ Now\ try\ for\ a\ point\ outside\ the\ image}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00354}00354\ \ \ \ \ \textcolor{comment}{\#\ Tests\ issue\ \#4957}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00355}00355\ \ \ \ \ x,\ y\ =\ 0.75,\ 0.25}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00356}00356\ \ \ \ \ xdisp,\ ydisp\ =\ ax.transData.transform([x,\ y])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00357}00357\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00358}00358\ \ \ \ \ event\ =\ MouseEvent(\textcolor{stringliteral}{'motion\_notify\_event'},\ fig.canvas,\ xdisp,\ ydisp)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00359}00359\ \ \ \ \ \textcolor{keyword}{assert}\ im.get\_cursor\_data(event)\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00360}00360\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00361}00361\ \ \ \ \ x,\ y\ =\ 0.01,\ -\/0.01}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00362}00362\ \ \ \ \ xdisp,\ ydisp\ =\ ax.transData.transform([x,\ y])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00363}00363\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00364}00364\ \ \ \ \ event\ =\ MouseEvent(\textcolor{stringliteral}{'motion\_notify\_event'},\ fig.canvas,\ xdisp,\ ydisp)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00365}00365\ \ \ \ \ \textcolor{keyword}{assert}\ im.get\_cursor\_data(event)\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00366}00366\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00367}00367\ \ \ \ \ \textcolor{comment}{\#\ Now\ try\ with\ additional\ transform\ applied\ to\ the\ image\ artist}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00368}00368\ \ \ \ \ trans\ =\ \mbox{\hyperlink{classmatplotlib_1_1transforms_1_1Affine2D}{Affine2D}}().scale(2).rotate(0.5)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00369}00369\ \ \ \ \ im\ =\ ax.imshow(np.arange(100).reshape(10,\ 10),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00370}00370\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ transform=trans\ +\ ax.transData)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00371}00371\ \ \ \ \ x,\ y\ =\ 3,\ 10}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00372}00372\ \ \ \ \ xdisp,\ ydisp\ =\ ax.transData.transform([x,\ y])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00373}00373\ \ \ \ \ event\ =\ MouseEvent(\textcolor{stringliteral}{'motion\_notify\_event'},\ fig.canvas,\ xdisp,\ ydisp)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00374}00374\ \ \ \ \ \textcolor{keyword}{assert}\ im.get\_cursor\_data(event)\ ==\ 44}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00375}00375\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00376}00376\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00377}00377\ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{"{}xy,\ data"{}},\ [}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00378}00378\ \ \ \ \ \textcolor{comment}{\#\ x/y\ coords\ chosen\ to\ be\ 0.5\ above\ boundaries\ so\ they\ lie\ within\ image\ pixels}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00379}00379\ \ \ \ \ [[0.5,\ 0.5],\ 0\ +\ 0],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00380}00380\ \ \ \ \ [[0.5,\ 1.5],\ 0\ +\ 1],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00381}00381\ \ \ \ \ [[4.5,\ 0.5],\ 16\ +\ 0],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00382}00382\ \ \ \ \ [[8.5,\ 0.5],\ 16\ +\ 0],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00383}00383\ \ \ \ \ [[9.5,\ 2.5],\ 81\ +\ 4],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00384}00384\ \ \ \ \ [[-\/1,\ 0.5],\ \textcolor{keywordtype}{None}],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00385}00385\ \ \ \ \ [[0.5,\ -\/1],\ \textcolor{keywordtype}{None}],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00386}00386\ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00387}00387\ )}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00388}00388\ \textcolor{keyword}{def\ }test\_cursor\_data\_nonuniform(xy,\ data):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00389}00389\ \ \ \ \ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacematplotlib_1_1backend__bases}{matplotlib.backend\_bases}}\ \textcolor{keyword}{import}\ MouseEvent}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00390}00390\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00391}00391\ \ \ \ \ \textcolor{comment}{\#\ Non-\/linear\ set\ of\ x-\/values}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00392}00392\ \ \ \ \ x\ =\ np.array([0,\ 1,\ 4,\ 9,\ 16])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00393}00393\ \ \ \ \ y\ =\ np.array([0,\ 1,\ 2,\ 3,\ 4])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00394}00394\ \ \ \ \ z\ =\ x[np.newaxis,\ :]**2\ +\ y[:,\ np.newaxis]**2}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00395}00395\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00396}00396\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00397}00397\ \ \ \ \ im\ =\ \mbox{\hyperlink{classmatplotlib_1_1image_1_1NonUniformImage}{NonUniformImage}}(ax,\ extent=(x.min(),\ x.max(),\ y.min(),\ y.max()))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00398}00398\ \ \ \ \ im.set\_data(x,\ y,\ z)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00399}00399\ \ \ \ \ ax.add\_image(im)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00400}00400\ \ \ \ \ \textcolor{comment}{\#\ Set\ lower\ min\ lim\ so\ we\ can\ test\ cursor\ outside\ image}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00401}00401\ \ \ \ \ ax.set\_xlim(x.min()\ -\/\ 2,\ x.max())}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00402}00402\ \ \ \ \ ax.set\_ylim(y.min()\ -\/\ 2,\ y.max())}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00403}00403\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00404}00404\ \ \ \ \ xdisp,\ ydisp\ =\ ax.transData.transform(xy)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00405}00405\ \ \ \ \ event\ =\ MouseEvent(\textcolor{stringliteral}{'motion\_notify\_event'},\ fig.canvas,\ xdisp,\ ydisp)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00406}00406\ \ \ \ \ \textcolor{keyword}{assert}\ im.get\_cursor\_data(event)\ ==\ data,\ (im.get\_cursor\_data(event),\ data)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00407}00407\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00408}00408\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00409}00409\ \textcolor{preprocessor}{@pytest.mark.parametrize}(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00410}00410\ \ \ \ \ \textcolor{stringliteral}{"{}data,\ text"{}},\ [}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00411}00411\ \ \ \ \ \ \ \ \ ([[10001,\ 10000]],\ \textcolor{stringliteral}{"{}[10001.000]"{}}),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00412}00412\ \ \ \ \ \ \ \ \ ([[.123,\ .987]],\ \textcolor{stringliteral}{"{}[0.123]"{}}),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00413}00413\ \ \ \ \ \ \ \ \ ([[np.nan,\ 1,\ 2]],\ \textcolor{stringliteral}{"{}[]"{}}),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00414}00414\ \ \ \ \ \ \ \ \ ([[1,\ 1+1e-\/15]],\ \textcolor{stringliteral}{"{}[1.0000000000000000]"{}}),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00415}00415\ \ \ \ \ \ \ \ \ ([[-\/1,\ -\/1]],\ \textcolor{stringliteral}{"{}[-\/1.0]"{}}),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00416}00416\ \ \ \ \ \ \ \ \ ([[0,\ 0]],\ \textcolor{stringliteral}{"{}[0.00]"{}}),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00417}00417\ \ \ \ \ ])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00418}00418\ \textcolor{keyword}{def\ }test\_format\_cursor\_data(data,\ text):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00419}00419\ \ \ \ \ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacematplotlib_1_1backend__bases}{matplotlib.backend\_bases}}\ \textcolor{keyword}{import}\ MouseEvent}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00420}00420\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00421}00421\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00422}00422\ \ \ \ \ im\ =\ ax.imshow(data)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00423}00423\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00424}00424\ \ \ \ \ xdisp,\ ydisp\ =\ ax.transData.transform([0,\ 0])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00425}00425\ \ \ \ \ event\ =\ MouseEvent(\textcolor{stringliteral}{'motion\_notify\_event'},\ fig.canvas,\ xdisp,\ ydisp)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00426}00426\ \ \ \ \ \textcolor{keyword}{assert}\ im.format\_cursor\_data(im.get\_cursor\_data(event))\ ==\ text}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00427}00427\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00428}00428\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00429}00429\ \textcolor{preprocessor}{@image\_comparison(['image\_clip'],\ style='mpl20')}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00430}00430\ \textcolor{keyword}{def\ }test\_image\_clip():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00431}00431\ \ \ \ \ d\ =\ [[1,\ 2],\ [3,\ 4]]}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00432}00432\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00433}00433\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00434}00434\ \ \ \ \ im\ =\ ax.imshow(d)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00435}00435\ \ \ \ \ patch\ =\ \mbox{\hyperlink{classmatplotlib_1_1patches_1_1Circle}{patches.Circle}}((0,\ 0),\ radius=1,\ transform=ax.transData)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00436}00436\ \ \ \ \ im.set\_clip\_path(patch)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00437}00437\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00438}00438\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00439}00439\ \textcolor{preprocessor}{@image\_comparison(['image\_cliprect'],\ style='mpl20')}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00440}00440\ \textcolor{keyword}{def\ }test\_image\_cliprect():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00441}00441\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00442}00442\ \ \ \ \ d\ =\ [[1,\ 2],\ [3,\ 4]]}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00443}00443\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00444}00444\ \ \ \ \ im\ =\ ax.imshow(d,\ extent=(0,\ 5,\ 0,\ 5))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00445}00445\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00446}00446\ \ \ \ \ rect\ =\ \mbox{\hyperlink{classmatplotlib_1_1patches_1_1Rectangle}{patches.Rectangle}}(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00447}00447\ \ \ \ \ \ \ \ \ xy=(1,\ 1),\ width=2,\ height=2,\ transform=im.axes.transData)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00448}00448\ \ \ \ \ im.set\_clip\_path(rect)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00449}00449\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00450}00450\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00451}00451\ \textcolor{preprocessor}{@check\_figures\_equal(extensions=['png'])}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00452}00452\ \textcolor{keyword}{def\ }test\_imshow\_10\_10\_1(fig\_test,\ fig\_ref):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00453}00453\ \ \ \ \ \textcolor{comment}{\#\ 10x10x1\ should\ be\ the\ same\ as\ 10x10}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00454}00454\ \ \ \ \ arr\ =\ np.arange(100).reshape((10,\ 10,\ 1))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00455}00455\ \ \ \ \ ax\ =\ fig\_ref.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00456}00456\ \ \ \ \ ax.imshow(arr[:,\ :,\ 0],\ interpolation=\textcolor{stringliteral}{"{}bilinear"{}},\ extent=(1,\ 2,\ 1,\ 2))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00457}00457\ \ \ \ \ ax.set\_xlim(0,\ 3)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00458}00458\ \ \ \ \ ax.set\_ylim(0,\ 3)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00459}00459\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00460}00460\ \ \ \ \ ax\ =\ fig\_test.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00461}00461\ \ \ \ \ ax.imshow(arr,\ interpolation=\textcolor{stringliteral}{"{}bilinear"{}},\ extent=(1,\ 2,\ 1,\ 2))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00462}00462\ \ \ \ \ ax.set\_xlim(0,\ 3)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00463}00463\ \ \ \ \ ax.set\_ylim(0,\ 3)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00464}00464\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00465}00465\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00466}00466\ \textcolor{keyword}{def\ }test\_imshow\_10\_10\_2():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00467}00467\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00468}00468\ \ \ \ \ arr\ =\ np.arange(200).reshape((10,\ 10,\ 2))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00469}00469\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00470}00470\ \ \ \ \ \ \ \ \ ax.imshow(arr)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00471}00471\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00472}00472\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00473}00473\ \textcolor{keyword}{def\ }test\_imshow\_10\_10\_5():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00474}00474\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00475}00475\ \ \ \ \ arr\ =\ np.arange(500).reshape((10,\ 10,\ 5))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00476}00476\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00477}00477\ \ \ \ \ \ \ \ \ ax.imshow(arr)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00478}00478\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00479}00479\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00480}00480\ \textcolor{preprocessor}{@image\_comparison(['no\_interpolation\_origin'],\ remove\_text=True)}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00481}00481\ \textcolor{keyword}{def\ }test\_no\_interpolation\_origin():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00482}00482\ \ \ \ \ fig,\ axs\ =\ plt.subplots(2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00483}00483\ \ \ \ \ axs[0].imshow(np.arange(100).reshape((2,\ 50)),\ origin=\textcolor{stringliteral}{"{}lower"{}},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00484}00484\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ interpolation=\textcolor{stringliteral}{'none'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00485}00485\ \ \ \ \ axs[1].imshow(np.arange(100).reshape((2,\ 50)),\ interpolation=\textcolor{stringliteral}{'none'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00486}00486\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00487}00487\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00488}00488\ \textcolor{preprocessor}{@image\_comparison(['image\_shift'],\ remove\_text=True,\ extensions=['pdf',\ 'svg'])}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00489}00489\ \textcolor{keyword}{def\ }test\_image\_shift():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00490}00490\ \ \ \ \ imgData\ =\ [[1\ /\ x\ +\ 1\ /\ y\ \textcolor{keywordflow}{for}\ x\ \textcolor{keywordflow}{in}\ range(1,\ 100)]\ \textcolor{keywordflow}{for}\ y\ \textcolor{keywordflow}{in}\ range(1,\ 100)]}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00491}00491\ \ \ \ \ tMin\ =\ 734717.945208}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00492}00492\ \ \ \ \ tMax\ =\ 734717.946366}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00493}00493\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00494}00494\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00495}00495\ \ \ \ \ ax.imshow(imgData,\ norm=colors.LogNorm(),\ interpolation=\textcolor{stringliteral}{'none'},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00496}00496\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ extent=(tMin,\ tMax,\ 1,\ 100))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00497}00497\ \ \ \ \ ax.set\_aspect(\textcolor{stringliteral}{'auto'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00498}00498\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00499}00499\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00500}00500\ \textcolor{keyword}{def\ }test\_image\_edges():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00501}00501\ \ \ \ \ fig\ =\ plt.figure(figsize=[1,\ 1])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00502}00502\ \ \ \ \ ax\ =\ fig.add\_axes([0,\ 0,\ 1,\ 1],\ frameon=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00503}00503\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00504}00504\ \ \ \ \ data\ =\ np.tile(np.arange(12),\ 15).reshape(20,\ 9)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00505}00505\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00506}00506\ \ \ \ \ im\ =\ ax.imshow(data,\ origin=\textcolor{stringliteral}{'upper'},\ extent=[-\/10,\ 10,\ -\/10,\ 10],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00507}00507\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ interpolation=\textcolor{stringliteral}{'none'},\ cmap=\textcolor{stringliteral}{'gray'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00508}00508\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00509}00509\ \ \ \ \ x\ =\ y\ =\ 2}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00510}00510\ \ \ \ \ ax.set\_xlim([-\/x,\ x])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00511}00511\ \ \ \ \ ax.set\_ylim([-\/y,\ y])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00512}00512\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00513}00513\ \ \ \ \ ax.set\_xticks([])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00514}00514\ \ \ \ \ ax.set\_yticks([])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00515}00515\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00516}00516\ \ \ \ \ buf\ =\ io.BytesIO()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00517}00517\ \ \ \ \ fig.savefig(buf,\ facecolor=(0,\ 1,\ 0))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00518}00518\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00519}00519\ \ \ \ \ buf.seek(0)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00520}00520\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00521}00521\ \ \ \ \ im\ =\ plt.imread(buf)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00522}00522\ \ \ \ \ r,\ g,\ b,\ a\ =\ sum(im[:,\ 0])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00523}00523\ \ \ \ \ r,\ g,\ b,\ a\ =\ sum(im[:,\ -\/1])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00524}00524\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00525}00525\ \ \ \ \ \textcolor{keyword}{assert}\ g\ !=\ 100,\ \textcolor{stringliteral}{'Expected\ a\ non-\/green\ edge\ -\/\ but\ sadly,\ it\ was.'}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00526}00526\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00527}00527\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00528}00528\ \textcolor{preprocessor}{@image\_comparison}([\textcolor{stringliteral}{'image\_composite\_background'}],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00529}00529\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ remove\_text=\textcolor{keyword}{True},\ style=\textcolor{stringliteral}{'mpl20'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00530}00530\ \textcolor{keyword}{def\ }test\_image\_composite\_background():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00531}00531\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00532}00532\ \ \ \ \ arr\ =\ np.arange(12).reshape(4,\ 3)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00533}00533\ \ \ \ \ ax.imshow(arr,\ extent=[0,\ 2,\ 15,\ 0])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00534}00534\ \ \ \ \ ax.imshow(arr,\ extent=[4,\ 6,\ 15,\ 0])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00535}00535\ \ \ \ \ ax.set\_facecolor((1,\ 0,\ 0,\ 0.5))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00536}00536\ \ \ \ \ ax.set\_xlim([0,\ 12])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00537}00537\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00538}00538\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00539}00539\ \textcolor{preprocessor}{@image\_comparison(['image\_composite\_alpha'],\ remove\_text=True)}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00540}\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__image_a542d716c576fae0ab23b77147b4ec317}{00540}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__image_a542d716c576fae0ab23b77147b4ec317}{test\_image\_composite\_alpha}}():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00541}00541\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00542}00542\ \textcolor{stringliteral}{\ \ \ \ Tests\ that\ the\ alpha\ value\ is\ recognized\ and\ correctly\ applied\ in\ the}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00543}00543\ \textcolor{stringliteral}{\ \ \ \ process\ of\ compositing\ images\ together.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00544}00544\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00545}00545\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00546}00546\ \ \ \ \ arr\ =\ np.zeros((11,\ 21,\ 4))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00547}00547\ \ \ \ \ arr[:,\ :,\ 0]\ =\ 1}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00548}00548\ \ \ \ \ arr[:,\ :,\ 3]\ =\ np.concatenate(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00549}00549\ \ \ \ \ \ \ \ \ (np.arange(0,\ 1.1,\ 0.1),\ np.arange(0,\ 1,\ 0.1)[::-\/1]))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00550}00550\ \ \ \ \ arr2\ =\ np.zeros((21,\ 11,\ 4))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00551}00551\ \ \ \ \ arr2[:,\ :,\ 0]\ =\ 1}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00552}00552\ \ \ \ \ arr2[:,\ :,\ 1]\ =\ 1}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00553}00553\ \ \ \ \ arr2[:,\ :,\ 3]\ =\ np.concatenate(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00554}00554\ \ \ \ \ \ \ \ \ (np.arange(0,\ 1.1,\ 0.1),\ np.arange(0,\ 1,\ 0.1)[::-\/1]))[:,\ np.newaxis]}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00555}00555\ \ \ \ \ ax.imshow(arr,\ extent=[1,\ 2,\ 5,\ 0],\ alpha=0.3)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00556}00556\ \ \ \ \ ax.imshow(arr,\ extent=[2,\ 3,\ 5,\ 0],\ alpha=0.6)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00557}00557\ \ \ \ \ ax.imshow(arr,\ extent=[3,\ 4,\ 5,\ 0])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00558}00558\ \ \ \ \ ax.imshow(arr2,\ extent=[0,\ 5,\ 1,\ 2])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00559}00559\ \ \ \ \ ax.imshow(arr2,\ extent=[0,\ 5,\ 2,\ 3],\ alpha=0.6)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00560}00560\ \ \ \ \ ax.imshow(arr2,\ extent=[0,\ 5,\ 3,\ 4],\ alpha=0.3)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00561}00561\ \ \ \ \ ax.set\_facecolor((0,\ 0.5,\ 0,\ 1))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00562}00562\ \ \ \ \ ax.set\_xlim([0,\ 5])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00563}00563\ \ \ \ \ ax.set\_ylim([5,\ 0])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00564}00564\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00565}00565\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00566}00566\ \textcolor{preprocessor}{@check\_figures\_equal(extensions=["{}pdf"{}])}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00567}00567\ \textcolor{keyword}{def\ }test\_clip\_path\_disables\_compositing(fig\_test,\ fig\_ref):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00568}00568\ \ \ \ \ t\ =\ np.arange(9).reshape((3,\ 3))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00569}00569\ \ \ \ \ \textcolor{keywordflow}{for}\ fig\ \textcolor{keywordflow}{in}\ [fig\_test,\ fig\_ref]:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00570}00570\ \ \ \ \ \ \ \ \ ax\ =\ fig.add\_subplot()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00571}00571\ \ \ \ \ \ \ \ \ ax.imshow(t,\ clip\_path=(mpl.path.Path([(0,\ 0),\ (0,\ 1),\ (1,\ 0)]),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00572}00572\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ax.transData))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00573}00573\ \ \ \ \ \ \ \ \ ax.imshow(t,\ clip\_path=(mpl.path.Path([(1,\ 1),\ (1,\ 2),\ (2,\ 1)]),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00574}00574\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ax.transData))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00575}00575\ \ \ \ \ fig\_ref.suppressComposite\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00576}00576\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00577}00577\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00578}00578\ \textcolor{preprocessor}{@image\_comparison}([\textcolor{stringliteral}{'rasterize\_10dpi'}],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00579}00579\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ extensions=[\textcolor{stringliteral}{'pdf'},\ \textcolor{stringliteral}{'svg'}],\ remove\_text=\textcolor{keyword}{True},\ style=\textcolor{stringliteral}{'mpl20'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00580}00580\ \textcolor{keyword}{def\ }test\_rasterize\_dpi():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00581}00581\ \ \ \ \ \textcolor{comment}{\#\ This\ test\ should\ check\ rasterized\ rendering\ with\ high\ output\ resolution.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00582}00582\ \ \ \ \ \textcolor{comment}{\#\ It\ plots\ a\ rasterized\ line\ and\ a\ normal\ image\ with\ imshow.\ \ So\ it\ will}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00583}00583\ \ \ \ \ \textcolor{comment}{\#\ catch\ when\ images\ end\ up\ in\ the\ wrong\ place\ in\ case\ of\ non-\/standard\ dpi}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00584}00584\ \ \ \ \ \textcolor{comment}{\#\ setting.\ \ Instead\ of\ high-\/res\ rasterization\ I\ use\ low-\/res.\ \ Therefore}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00585}00585\ \ \ \ \ \textcolor{comment}{\#\ the\ fact\ that\ the\ resolution\ is\ non-\/standard\ is\ easily\ checked\ by}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00586}00586\ \ \ \ \ \textcolor{comment}{\#\ image\_comparison.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00587}00587\ \ \ \ \ img\ =\ np.asarray([[1,\ 2],\ [3,\ 4]])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00588}00588\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00589}00589\ \ \ \ \ fig,\ axs\ =\ plt.subplots(1,\ 3,\ figsize=(3,\ 1))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00590}00590\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00591}00591\ \ \ \ \ axs[0].imshow(img)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00592}00592\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00593}00593\ \ \ \ \ axs[1].plot([0,\ 1],\ [0,\ 1],\ linewidth=20.,\ rasterized=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00594}00594\ \ \ \ \ axs[1].set(xlim=(0,\ 1),\ ylim=(-\/1,\ 2))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00595}00595\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00596}00596\ \ \ \ \ axs[2].plot([0,\ 1],\ [0,\ 1],\ linewidth=20.)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00597}00597\ \ \ \ \ axs[2].set(xlim=(0,\ 1),\ ylim=(-\/1,\ 2))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00598}00598\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00599}00599\ \ \ \ \ \textcolor{comment}{\#\ Low-\/dpi\ PDF\ rasterization\ errors\ prevent\ proper\ image\ comparison\ tests.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00600}00600\ \ \ \ \ \textcolor{comment}{\#\ Hide\ detailed\ structures\ like\ the\ axes\ spines.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00601}00601\ \ \ \ \ \textcolor{keywordflow}{for}\ ax\ \textcolor{keywordflow}{in}\ axs:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00602}00602\ \ \ \ \ \ \ \ \ ax.set\_xticks([])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00603}00603\ \ \ \ \ \ \ \ \ ax.set\_yticks([])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00604}00604\ \ \ \ \ \ \ \ \ ax.spines[:].set\_visible(\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00605}00605\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00606}00606\ \ \ \ \ rcParams[\textcolor{stringliteral}{'savefig.dpi'}]\ =\ 10}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00607}00607\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00608}00608\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00609}00609\ \textcolor{preprocessor}{@image\_comparison(['bbox\_image\_inverted'],\ remove\_text=True,\ style='mpl20')}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00610}00610\ \textcolor{keyword}{def\ }test\_bbox\_image\_inverted():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00611}00611\ \ \ \ \ \textcolor{comment}{\#\ This\ is\ just\ used\ to\ produce\ an\ image\ to\ feed\ to\ BboxImage}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00612}00612\ \ \ \ \ image\ =\ np.arange(100).reshape((10,\ 10))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00613}00613\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00614}00614\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00615}00615\ \ \ \ \ bbox\_im\ =\ \mbox{\hyperlink{classmatplotlib_1_1image_1_1BboxImage}{BboxImage}}(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00616}00616\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classmatplotlib_1_1transforms_1_1TransformedBbox}{TransformedBbox}}(\mbox{\hyperlink{classmatplotlib_1_1transforms_1_1Bbox}{Bbox}}([[100,\ 100],\ [0,\ 0]]),\ ax.transData),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00617}00617\ \ \ \ \ \ \ \ \ interpolation=\textcolor{stringliteral}{'nearest'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00618}00618\ \ \ \ \ bbox\_im.set\_data(image)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00619}00619\ \ \ \ \ bbox\_im.set\_clip\_on(\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00620}00620\ \ \ \ \ ax.set\_xlim(0,\ 100)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00621}00621\ \ \ \ \ ax.set\_ylim(0,\ 100)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00622}00622\ \ \ \ \ ax.add\_artist(bbox\_im)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00623}00623\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00624}00624\ \ \ \ \ image\ =\ np.identity(10)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00625}00625\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00626}00626\ \ \ \ \ bbox\_im\ =\ \mbox{\hyperlink{classmatplotlib_1_1image_1_1BboxImage}{BboxImage}}(\mbox{\hyperlink{classmatplotlib_1_1transforms_1_1TransformedBbox}{TransformedBbox}}(\mbox{\hyperlink{classmatplotlib_1_1transforms_1_1Bbox}{Bbox}}([[0.1,\ 0.2],\ [0.3,\ 0.25]]),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00627}00627\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ax.get\_figure().transFigure),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00628}00628\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ interpolation=\textcolor{stringliteral}{'nearest'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00629}00629\ \ \ \ \ bbox\_im.set\_data(image)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00630}00630\ \ \ \ \ bbox\_im.set\_clip\_on(\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00631}00631\ \ \ \ \ ax.add\_artist(bbox\_im)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00632}00632\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00633}00633\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00634}00634\ \textcolor{keyword}{def\ }test\_get\_window\_extent\_for\_AxisImage():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00635}00635\ \ \ \ \ \textcolor{comment}{\#\ Create\ a\ figure\ of\ known\ size\ (1000x1000\ pixels),\ place\ an\ image}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00636}00636\ \ \ \ \ \textcolor{comment}{\#\ object\ at\ a\ given\ location\ and\ check\ that\ get\_window\_extent()}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00637}00637\ \ \ \ \ \textcolor{comment}{\#\ returns\ the\ correct\ bounding\ box\ values\ (in\ pixels).}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00638}00638\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00639}00639\ \ \ \ \ im\ =\ np.array([[0.25,\ 0.75,\ 1.0,\ 0.75],\ [0.1,\ 0.65,\ 0.5,\ 0.4],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00640}00640\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0.6,\ 0.3,\ 0.0,\ 0.2],\ [0.7,\ 0.9,\ 0.4,\ 0.6]])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00641}00641\ \ \ \ \ fig,\ ax\ =\ plt.subplots(figsize=(10,\ 10),\ dpi=100)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00642}00642\ \ \ \ \ ax.set\_position([0,\ 0,\ 1,\ 1])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00643}00643\ \ \ \ \ ax.set\_xlim(0,\ 1)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00644}00644\ \ \ \ \ ax.set\_ylim(0,\ 1)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00645}00645\ \ \ \ \ im\_obj\ =\ ax.imshow(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00646}00646\ \ \ \ \ \ \ \ \ im,\ extent=[0.4,\ 0.7,\ 0.2,\ 0.9],\ interpolation=\textcolor{stringliteral}{'nearest'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00647}00647\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00648}00648\ \ \ \ \ fig.canvas.draw()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00649}00649\ \ \ \ \ renderer\ =\ fig.canvas.renderer}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00650}00650\ \ \ \ \ im\_bbox\ =\ im\_obj.get\_window\_extent(renderer)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00651}00651\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00652}00652\ \ \ \ \ assert\_array\_equal(im\_bbox.get\_points(),\ [[400,\ 200],\ [700,\ 900]])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00653}00653\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00654}00654\ \ \ \ \ fig,\ ax\ =\ plt.subplots(figsize=(10,\ 10),\ dpi=100)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00655}00655\ \ \ \ \ ax.set\_position([0,\ 0,\ 1,\ 1])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00656}00656\ \ \ \ \ ax.set\_xlim(1,\ 2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00657}00657\ \ \ \ \ ax.set\_ylim(0,\ 1)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00658}00658\ \ \ \ \ im\_obj\ =\ ax.imshow(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00659}00659\ \ \ \ \ \ \ \ \ im,\ extent=[0.4,\ 0.7,\ 0.2,\ 0.9],\ interpolation=\textcolor{stringliteral}{'nearest'},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00660}00660\ \ \ \ \ \ \ \ \ transform=ax.transAxes)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00661}00661\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00662}00662\ \ \ \ \ fig.canvas.draw()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00663}00663\ \ \ \ \ renderer\ =\ fig.canvas.renderer}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00664}00664\ \ \ \ \ im\_bbox\ =\ im\_obj.get\_window\_extent(renderer)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00665}00665\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00666}00666\ \ \ \ \ assert\_array\_equal(im\_bbox.get\_points(),\ [[400,\ 200],\ [700,\ 900]])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00667}00667\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00668}00668\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00669}00669\ \textcolor{preprocessor}{@image\_comparison}([\textcolor{stringliteral}{'zoom\_and\_clip\_upper\_origin.png'}],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00670}00670\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ remove\_text=\textcolor{keyword}{True},\ style=\textcolor{stringliteral}{'mpl20'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00671}00671\ \textcolor{keyword}{def\ }test\_zoom\_and\_clip\_upper\_origin():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00672}00672\ \ \ \ \ image\ =\ np.arange(100)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00673}00673\ \ \ \ \ image\ =\ image.reshape((10,\ 10))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00674}00674\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00675}00675\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00676}00676\ \ \ \ \ ax.imshow(image)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00677}00677\ \ \ \ \ ax.set\_ylim(2.0,\ -\/0.5)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00678}00678\ \ \ \ \ ax.set\_xlim(-\/0.5,\ 2.0)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00679}00679\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00680}00680\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00681}00681\ \textcolor{keyword}{def\ }test\_nonuniformimage\_setcmap():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00682}00682\ \ \ \ \ ax\ =\ plt.gca()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00683}00683\ \ \ \ \ im\ =\ \mbox{\hyperlink{classmatplotlib_1_1image_1_1NonUniformImage}{NonUniformImage}}(ax)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00684}00684\ \ \ \ \ im.set\_cmap(\textcolor{stringliteral}{'Blues'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00685}00685\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00686}00686\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00687}00687\ \textcolor{keyword}{def\ }test\_nonuniformimage\_setnorm():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00688}00688\ \ \ \ \ ax\ =\ plt.gca()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00689}00689\ \ \ \ \ im\ =\ \mbox{\hyperlink{classmatplotlib_1_1image_1_1NonUniformImage}{NonUniformImage}}(ax)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00690}00690\ \ \ \ \ im.set\_norm(plt.Normalize())}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00691}00691\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00692}00692\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00693}00693\ \textcolor{keyword}{def\ }test\_jpeg\_2d():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00694}00694\ \ \ \ \ \textcolor{comment}{\#\ smoke\ test\ that\ mode-\/L\ pillow\ images\ work.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00695}00695\ \ \ \ \ imd\ =\ np.ones((10,\ 10),\ dtype=\textcolor{stringliteral}{'uint8'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00696}00696\ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(10):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00697}00697\ \ \ \ \ \ \ \ \ imd[i,\ :]\ =\ np.linspace(0.0,\ 1.0,\ 10)\ *\ 255}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00698}00698\ \ \ \ \ im\ =\ Image.new(\textcolor{stringliteral}{'L'},\ (10,\ 10))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00699}00699\ \ \ \ \ im.putdata(imd.flatten())}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00700}00700\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00701}00701\ \ \ \ \ ax.imshow(im)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00702}00702\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00703}00703\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00704}00704\ \textcolor{keyword}{def\ }test\_jpeg\_alpha():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00705}00705\ \ \ \ \ plt.figure(figsize=(1,\ 1),\ dpi=300)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00706}00706\ \ \ \ \ \textcolor{comment}{\#\ Create\ an\ image\ that\ is\ all\ black,\ with\ a\ gradient\ from\ 0-\/1\ in}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00707}00707\ \ \ \ \ \textcolor{comment}{\#\ the\ alpha\ channel\ from\ left\ to\ right.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00708}00708\ \ \ \ \ im\ =\ np.zeros((300,\ 300,\ 4),\ dtype=float)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00709}00709\ \ \ \ \ im[...,\ 3]\ =\ np.linspace(0.0,\ 1.0,\ 300)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00710}00710\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00711}00711\ \ \ \ \ plt.figimage(im)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00712}00712\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00713}00713\ \ \ \ \ buff\ =\ io.BytesIO()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00714}00714\ \ \ \ \ plt.savefig(buff,\ facecolor=\textcolor{stringliteral}{"{}red"{}},\ format=\textcolor{stringliteral}{'jpg'},\ dpi=300)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00715}00715\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00716}00716\ \ \ \ \ buff.seek(0)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00717}00717\ \ \ \ \ image\ =\ Image.open(buff)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00718}00718\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00719}00719\ \ \ \ \ \textcolor{comment}{\#\ If\ this\ fails,\ there\ will\ be\ only\ one\ color\ (all\ black).\ If\ this}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00720}00720\ \ \ \ \ \textcolor{comment}{\#\ is\ working,\ we\ should\ have\ all\ 256\ shades\ of\ grey\ represented.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00721}00721\ \ \ \ \ num\_colors\ =\ len(image.getcolors(256))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00722}00722\ \ \ \ \ \textcolor{keyword}{assert}\ 175\ <=\ num\_colors\ <=\ 230}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00723}00723\ \ \ \ \ \textcolor{comment}{\#\ The\ fully\ transparent\ part\ should\ be\ red.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00724}00724\ \ \ \ \ corner\_pixel\ =\ image.getpixel((0,\ 0))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00725}00725\ \ \ \ \ \textcolor{keyword}{assert}\ corner\_pixel\ ==\ (254,\ 0,\ 0)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00726}00726\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00727}00727\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00728}00728\ \textcolor{keyword}{def\ }test\_axesimage\_setdata():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00729}00729\ \ \ \ \ ax\ =\ plt.gca()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00730}00730\ \ \ \ \ im\ =\ \mbox{\hyperlink{classmatplotlib_1_1image_1_1AxesImage}{AxesImage}}(ax)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00731}00731\ \ \ \ \ z\ =\ np.arange(12,\ dtype=float).reshape((4,\ 3))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00732}00732\ \ \ \ \ im.set\_data(z)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00733}00733\ \ \ \ \ z[0,\ 0]\ =\ 9.9}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00734}00734\ \ \ \ \ \textcolor{keyword}{assert}\ im.\_A[0,\ 0]\ ==\ 0,\ \textcolor{stringliteral}{'value\ changed'}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00735}00735\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00736}00736\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00737}00737\ \textcolor{keyword}{def\ }test\_figureimage\_setdata():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00738}00738\ \ \ \ \ fig\ =\ plt.gcf()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00739}00739\ \ \ \ \ im\ =\ \mbox{\hyperlink{classmatplotlib_1_1image_1_1FigureImage}{FigureImage}}(fig)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00740}00740\ \ \ \ \ z\ =\ np.arange(12,\ dtype=float).reshape((4,\ 3))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00741}00741\ \ \ \ \ im.set\_data(z)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00742}00742\ \ \ \ \ z[0,\ 0]\ =\ 9.9}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00743}00743\ \ \ \ \ \textcolor{keyword}{assert}\ im.\_A[0,\ 0]\ ==\ 0,\ \textcolor{stringliteral}{'value\ changed'}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00744}00744\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00745}00745\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00746}00746\ \textcolor{preprocessor}{@pytest.mark.parametrize}(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00747}00747\ \ \ \ \ \textcolor{stringliteral}{"{}image\_cls,x,y,a"{}},\ [}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00748}00748\ \ \ \ \ \ \ \ \ (NonUniformImage,}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00749}00749\ \ \ \ \ \ \ \ \ \ np.arange(3.),\ np.arange(4.),\ np.arange(12.).reshape((4,\ 3))),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00750}00750\ \ \ \ \ \ \ \ \ (PcolorImage,}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00751}00751\ \ \ \ \ \ \ \ \ \ np.arange(3.),\ np.arange(4.),\ np.arange(6.).reshape((3,\ 2))),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00752}00752\ \ \ \ \ ])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00753}00753\ \textcolor{keyword}{def\ }test\_setdata\_xya(image\_cls,\ x,\ y,\ a):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00754}00754\ \ \ \ \ ax\ =\ plt.gca()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00755}00755\ \ \ \ \ im\ =\ image\_cls(ax)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00756}00756\ \ \ \ \ im.set\_data(x,\ y,\ a)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00757}00757\ \ \ \ \ x[0]\ =\ y[0]\ =\ a[0,\ 0]\ =\ 9.9}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00758}00758\ \ \ \ \ \textcolor{keyword}{assert}\ im.\_A[0,\ 0]\ ==\ im.\_Ax[0]\ ==\ im.\_Ay[0]\ ==\ 0,\ \textcolor{stringliteral}{'value\ changed'}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00759}00759\ \ \ \ \ im.set\_data(x,\ y,\ a.reshape((*a.shape,\ -\/1)))\ \ \textcolor{comment}{\#\ Just\ a\ smoketest.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00760}00760\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00761}00761\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00762}00762\ \textcolor{keyword}{def\ }test\_minimized\_rasterized():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00763}00763\ \ \ \ \ \textcolor{comment}{\#\ This\ ensures\ that\ the\ rasterized\ content\ in\ the\ colorbars\ is}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00764}00764\ \ \ \ \ \textcolor{comment}{\#\ only\ as\ thick\ as\ the\ colorbar,\ and\ doesn't\ extend\ to\ other\ parts}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00765}00765\ \ \ \ \ \textcolor{comment}{\#\ of\ the\ image.\ \ See\ \#5814.\ \ While\ the\ original\ bug\ exists\ only}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00766}00766\ \ \ \ \ \textcolor{comment}{\#\ in\ Postscript,\ the\ best\ way\ to\ detect\ it\ is\ to\ generate\ SVG}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00767}00767\ \ \ \ \ \textcolor{comment}{\#\ and\ then\ parse\ the\ output\ to\ make\ sure\ the\ two\ colorbar\ images}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00768}00768\ \ \ \ \ \textcolor{comment}{\#\ are\ the\ same\ size.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00769}00769\ \ \ \ \ \textcolor{keyword}{from}\ xml.etree\ \textcolor{keyword}{import}\ ElementTree}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00770}00770\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00771}00771\ \ \ \ \ np.random.seed(0)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00772}00772\ \ \ \ \ data\ =\ np.random.rand(10,\ 10)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00773}00773\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00774}00774\ \ \ \ \ fig,\ ax\ =\ plt.subplots(1,\ 2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00775}00775\ \ \ \ \ p1\ =\ ax[0].pcolormesh(data)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00776}00776\ \ \ \ \ p2\ =\ ax[1].pcolormesh(data)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00777}00777\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00778}00778\ \ \ \ \ plt.colorbar(p1,\ ax=ax[0])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00779}00779\ \ \ \ \ plt.colorbar(p2,\ ax=ax[1])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00780}00780\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00781}00781\ \ \ \ \ buff\ =\ io.BytesIO()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00782}00782\ \ \ \ \ plt.savefig(buff,\ format=\textcolor{stringliteral}{'svg'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00783}00783\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00784}00784\ \ \ \ \ buff\ =\ io.BytesIO(buff.getvalue())}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00785}00785\ \ \ \ \ tree\ =\ ElementTree.parse(buff)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00786}00786\ \ \ \ \ width\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00787}00787\ \ \ \ \ \textcolor{keywordflow}{for}\ image\ \textcolor{keywordflow}{in}\ tree.iter(\textcolor{stringliteral}{'image'}):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00788}00788\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ width\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00789}00789\ \ \ \ \ \ \ \ \ \ \ \ \ width\ =\ image[\textcolor{stringliteral}{'width'}]}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00790}00790\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00791}00791\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ image[\textcolor{stringliteral}{'width'}]\ !=\ width:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00792}00792\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00793}00793\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00794}00794\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00795}00795\ \textcolor{keyword}{def\ }test\_load\_from\_url():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00796}00796\ \ \ \ \ path\ =\ Path(\_\_file\_\_).parent\ /\ \textcolor{stringliteral}{"{}baseline\_images/pngsuite/basn3p04.png"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00797}00797\ \ \ \ \ url\ =\ (\textcolor{stringliteral}{'file:'}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00798}00798\ \ \ \ \ \ \ \ \ \ \ \ +\ (\textcolor{stringliteral}{'///'}\ \textcolor{keywordflow}{if}\ sys.platform\ ==\ \textcolor{stringliteral}{'win32'}\ \textcolor{keywordflow}{else}\ \textcolor{stringliteral}{''})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00799}00799\ \ \ \ \ \ \ \ \ \ \ \ +\ path.resolve().as\_posix())}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00800}00800\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError,\ match=\textcolor{stringliteral}{"{}Please\ open\ the\ URL"{}}):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00801}00801\ \ \ \ \ \ \ \ \ plt.imread(url)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00802}00802\ \ \ \ \ \textcolor{keyword}{with}\ urllib.request.urlopen(url)\ \textcolor{keyword}{as}\ file:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00803}00803\ \ \ \ \ \ \ \ \ plt.imread(file)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00804}00804\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00805}00805\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00806}00806\ \textcolor{preprocessor}{@image\_comparison(['log\_scale\_image'],\ remove\_text=True)}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00807}00807\ \textcolor{keyword}{def\ }test\_log\_scale\_image():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00808}00808\ \ \ \ \ Z\ =\ np.zeros((10,\ 10))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00809}00809\ \ \ \ \ Z[::2]\ =\ 1}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00810}00810\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00811}00811\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00812}00812\ \ \ \ \ ax.imshow(Z,\ extent=[1,\ 100,\ 1,\ 100],\ cmap=\textcolor{stringliteral}{'viridis'},\ vmax=1,\ vmin=-\/1,}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00813}00813\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ aspect=\textcolor{stringliteral}{'auto'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00814}00814\ \ \ \ \ ax.set(yscale=\textcolor{stringliteral}{'log'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00815}00815\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00816}00816\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00817}00817\ \textcolor{preprocessor}{@image\_comparison(['rotate\_image'],\ remove\_text=True)}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00818}00818\ \textcolor{keyword}{def\ }test\_rotate\_image():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00819}00819\ \ \ \ \ delta\ =\ 0.25}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00820}00820\ \ \ \ \ x\ =\ y\ =\ np.arange(-\/3.0,\ 3.0,\ delta)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00821}00821\ \ \ \ \ X,\ Y\ =\ np.meshgrid(x,\ y)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00822}00822\ \ \ \ \ Z1\ =\ np.exp(-\/(X**2\ +\ Y**2)\ /\ 2)\ /\ (2\ *\ np.pi)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00823}00823\ \ \ \ \ Z2\ =\ (np.exp(-\/(((X\ -\/\ 1)\ /\ 1.5)**2\ +\ ((Y\ -\/\ 1)\ /\ 0.5)**2)\ /\ 2)\ /}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00824}00824\ \ \ \ \ \ \ \ \ \ \ (2\ *\ np.pi\ *\ 0.5\ *\ 1.5))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00825}00825\ \ \ \ \ Z\ =\ Z2\ -\/\ Z1\ \ \textcolor{comment}{\#\ difference\ of\ Gaussians}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00826}00826\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00827}00827\ \ \ \ \ fig,\ ax1\ =\ plt.subplots(1,\ 1)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00828}00828\ \ \ \ \ im1\ =\ ax1.imshow(Z,\ interpolation=\textcolor{stringliteral}{'none'},\ cmap=\textcolor{stringliteral}{'viridis'},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00829}00829\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ origin=\textcolor{stringliteral}{'lower'},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00830}00830\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ extent=[-\/2,\ 4,\ -\/3,\ 2],\ clip\_on=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00831}00831\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00832}00832\ \ \ \ \ trans\_data2\ =\ \mbox{\hyperlink{classmatplotlib_1_1transforms_1_1Affine2D}{Affine2D}}().rotate\_deg(30)\ +\ ax1.transData}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00833}00833\ \ \ \ \ im1.set\_transform(trans\_data2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00834}00834\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00835}00835\ \ \ \ \ \textcolor{comment}{\#\ display\ intended\ extent\ of\ the\ image}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00836}00836\ \ \ \ \ x1,\ x2,\ y1,\ y2\ =\ im1.get\_extent()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00837}00837\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00838}00838\ \ \ \ \ ax1.plot([x1,\ x2,\ x2,\ x1,\ x1],\ [y1,\ y1,\ y2,\ y2,\ y1],\ \textcolor{stringliteral}{"{}r-\/-\/"{}},\ lw=3,}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00839}00839\ \ \ \ \ \ \ \ \ \ \ \ \ \ transform=trans\_data2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00840}00840\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00841}00841\ \ \ \ \ ax1.set\_xlim(2,\ 5)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00842}00842\ \ \ \ \ ax1.set\_ylim(0,\ 4)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00843}00843\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00844}00844\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00845}00845\ \textcolor{keyword}{def\ }test\_image\_preserve\_size():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00846}00846\ \ \ \ \ buff\ =\ io.BytesIO()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00847}00847\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00848}00848\ \ \ \ \ im\ =\ np.zeros((481,\ 321))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00849}00849\ \ \ \ \ plt.imsave(buff,\ im,\ format=\textcolor{stringliteral}{"{}png"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00850}00850\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00851}00851\ \ \ \ \ buff.seek(0)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00852}00852\ \ \ \ \ img\ =\ plt.imread(buff)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00853}00853\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00854}00854\ \ \ \ \ \textcolor{keyword}{assert}\ img.shape[:2]\ ==\ im.shape}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00855}00855\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00856}00856\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00857}00857\ \textcolor{keyword}{def\ }test\_image\_preserve\_size2():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00858}00858\ \ \ \ \ n\ =\ 7}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00859}00859\ \ \ \ \ data\ =\ np.identity(n,\ float)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00860}00860\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00861}00861\ \ \ \ \ fig\ =\ plt.figure(figsize=(n,\ n),\ frameon=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00862}00862\ \ \ \ \ ax\ =\ fig.add\_axes((0.0,\ 0.0,\ 1.0,\ 1.0))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00863}00863\ \ \ \ \ ax.set\_axis\_off()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00864}00864\ \ \ \ \ ax.imshow(data,\ interpolation=\textcolor{stringliteral}{'nearest'},\ origin=\textcolor{stringliteral}{'lower'},\ aspect=\textcolor{stringliteral}{'auto'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00865}00865\ \ \ \ \ buff\ =\ io.BytesIO()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00866}00866\ \ \ \ \ fig.savefig(buff,\ dpi=1)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00867}00867\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00868}00868\ \ \ \ \ buff.seek(0)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00869}00869\ \ \ \ \ img\ =\ plt.imread(buff)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00870}00870\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00871}00871\ \ \ \ \ \textcolor{keyword}{assert}\ img.shape\ ==\ (7,\ 7,\ 4)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00872}00872\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00873}00873\ \ \ \ \ assert\_array\_equal(np.asarray(img[:,\ :,\ 0],\ bool),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00874}00874\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.identity(n,\ bool)[::-\/1])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00875}00875\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00876}00876\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00877}00877\ \textcolor{preprocessor}{@image\_comparison(['mask\_image\_over\_under.png'],\ remove\_text=True,\ tol=1.0)}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00878}00878\ \textcolor{keyword}{def\ }test\_mask\_image\_over\_under():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00879}00879\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00880}00880\ \ \ \ \ delta\ =\ 0.025}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00881}00881\ \ \ \ \ x\ =\ y\ =\ np.arange(-\/3.0,\ 3.0,\ delta)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00882}00882\ \ \ \ \ X,\ Y\ =\ np.meshgrid(x,\ y)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00883}00883\ \ \ \ \ Z1\ =\ np.exp(-\/(X**2\ +\ Y**2)\ /\ 2)\ /\ (2\ *\ np.pi)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00884}00884\ \ \ \ \ Z2\ =\ (np.exp(-\/(((X\ -\/\ 1)\ /\ 1.5)**2\ +\ ((Y\ -\/\ 1)\ /\ 0.5)**2)\ /\ 2)\ /}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00885}00885\ \ \ \ \ \ \ \ \ \ \ (2\ *\ np.pi\ *\ 0.5\ *\ 1.5))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00886}00886\ \ \ \ \ Z\ =\ 10*(Z2\ -\/\ Z1)\ \ \textcolor{comment}{\#\ difference\ of\ Gaussians}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00887}00887\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00888}00888\ \ \ \ \ palette\ =\ plt.cm.gray.with\_extremes(over=\textcolor{stringliteral}{'r'},\ under=\textcolor{stringliteral}{'g'},\ bad=\textcolor{stringliteral}{'b'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00889}00889\ \ \ \ \ Zm\ =\ np.ma.masked\_where(Z\ >\ 1.2,\ Z)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00890}00890\ \ \ \ \ fig,\ (ax1,\ ax2)\ =\ plt.subplots(1,\ 2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00891}00891\ \ \ \ \ im\ =\ ax1.imshow(Zm,\ interpolation=\textcolor{stringliteral}{'bilinear'},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00892}00892\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cmap=palette,}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00893}00893\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ norm=\mbox{\hyperlink{classmatplotlib_1_1colors_1_1Normalize}{colors.Normalize}}(vmin=-\/1.0,\ vmax=1.0,\ clip=\textcolor{keyword}{False}),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00894}00894\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ origin=\textcolor{stringliteral}{'lower'},\ extent=[-\/3,\ 3,\ -\/3,\ 3])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00895}00895\ \ \ \ \ ax1.set\_title(\textcolor{stringliteral}{'Green=low,\ Red=high,\ Blue=bad'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00896}00896\ \ \ \ \ fig.colorbar(im,\ extend=\textcolor{stringliteral}{'both'},\ orientation=\textcolor{stringliteral}{'horizontal'},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00897}00897\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ax=ax1,\ aspect=10)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00898}00898\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00899}00899\ \ \ \ \ im\ =\ ax2.imshow(Zm,\ interpolation=\textcolor{stringliteral}{'nearest'},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00900}00900\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cmap=palette,}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00901}00901\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ norm=\mbox{\hyperlink{classmatplotlib_1_1colors_1_1BoundaryNorm}{colors.BoundaryNorm}}([-\/1,\ -\/0.5,\ -\/0.2,\ 0,\ 0.2,\ 0.5,\ 1],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00902}00902\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ncolors=256,\ clip=\textcolor{keyword}{False}),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00903}00903\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ origin=\textcolor{stringliteral}{'lower'},\ extent=[-\/3,\ 3,\ -\/3,\ 3])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00904}00904\ \ \ \ \ ax2.set\_title(\textcolor{stringliteral}{'With\ BoundaryNorm'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00905}00905\ \ \ \ \ fig.colorbar(im,\ extend=\textcolor{stringliteral}{'both'},\ spacing=\textcolor{stringliteral}{'proportional'},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00906}00906\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ orientation=\textcolor{stringliteral}{'horizontal'},\ ax=ax2,\ aspect=10)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00907}00907\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00908}00908\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00909}00909\ \textcolor{preprocessor}{@image\_comparison(['mask\_image'],\ remove\_text=True)}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00910}00910\ \textcolor{keyword}{def\ }test\_mask\_image():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00911}00911\ \ \ \ \ \textcolor{comment}{\#\ Test\ mask\ image\ two\ ways:\ Using\ nans\ and\ using\ a\ masked\ array.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00912}00912\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00913}00913\ \ \ \ \ fig,\ (ax1,\ ax2)\ =\ plt.subplots(1,\ 2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00914}00914\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00915}00915\ \ \ \ \ A\ =\ np.ones((5,\ 5))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00916}00916\ \ \ \ \ A[1:2,\ 1:2]\ =\ np.nan}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00917}00917\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00918}00918\ \ \ \ \ ax1.imshow(A,\ interpolation=\textcolor{stringliteral}{'nearest'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00919}00919\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00920}00920\ \ \ \ \ A\ =\ np.zeros((5,\ 5),\ dtype=bool)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00921}00921\ \ \ \ \ A[1:2,\ 1:2]\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00922}00922\ \ \ \ \ A\ =\ np.ma.masked\_array(np.ones((5,\ 5),\ dtype=np.uint16),\ A)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00923}00923\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00924}00924\ \ \ \ \ ax2.imshow(A,\ interpolation=\textcolor{stringliteral}{'nearest'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00925}00925\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00926}00926\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00927}00927\ \textcolor{keyword}{def\ }test\_mask\_image\_all():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00928}00928\ \ \ \ \ \textcolor{comment}{\#\ Test\ behavior\ with\ an\ image\ that\ is\ entirely\ masked\ does\ not\ warn}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00929}00929\ \ \ \ \ data\ =\ np.full((2,\ 2),\ np.nan)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00930}00930\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00931}00931\ \ \ \ \ ax.imshow(data)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00932}00932\ \ \ \ \ fig.canvas.draw\_idle()\ \ \textcolor{comment}{\#\ would\ emit\ a\ warning}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00933}00933\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00934}00934\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00935}00935\ \textcolor{preprocessor}{@image\_comparison(['imshow\_endianess.png'],\ remove\_text=True)}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00936}00936\ \textcolor{keyword}{def\ }test\_imshow\_endianess():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00937}00937\ \ \ \ \ x\ =\ np.arange(10)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00938}00938\ \ \ \ \ X,\ Y\ =\ np.meshgrid(x,\ x)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00939}00939\ \ \ \ \ Z\ =\ np.hypot(X\ -\/\ 5,\ Y\ -\/\ 5)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00940}00940\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00941}00941\ \ \ \ \ fig,\ (ax1,\ ax2)\ =\ plt.subplots(1,\ 2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00942}00942\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00943}00943\ \ \ \ \ kwargs\ =\ dict(origin=\textcolor{stringliteral}{"{}lower"{}},\ interpolation=\textcolor{stringliteral}{'nearest'},\ cmap=\textcolor{stringliteral}{'viridis'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00944}00944\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00945}00945\ \ \ \ \ ax1.imshow(Z.astype(\textcolor{stringliteral}{'<f8'}),\ **kwargs)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00946}00946\ \ \ \ \ ax2.imshow(Z.astype(\textcolor{stringliteral}{'>f8'}),\ **kwargs)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00947}00947\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00948}00948\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00949}00949\ \textcolor{preprocessor}{@image\_comparison}([\textcolor{stringliteral}{'imshow\_masked\_interpolation'}],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00950}00950\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tol=0\ \textcolor{keywordflow}{if}\ platform.machine()\ ==\ \textcolor{stringliteral}{'x86\_64'}\ \textcolor{keywordflow}{else}\ 0.01,}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00951}00951\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ remove\_text=\textcolor{keyword}{True},\ style=\textcolor{stringliteral}{'mpl20'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00952}00952\ \textcolor{keyword}{def\ }test\_imshow\_masked\_interpolation():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00953}00953\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00954}00954\ \ \ \ \ cmap\ =\ mpl.colormaps[\textcolor{stringliteral}{'viridis'}].with\_extremes(over=\textcolor{stringliteral}{'r'},\ under=\textcolor{stringliteral}{'b'},\ bad=\textcolor{stringliteral}{'k'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00955}00955\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00956}00956\ \ \ \ \ N\ =\ 20}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00957}00957\ \ \ \ \ n\ =\ \mbox{\hyperlink{classmatplotlib_1_1colors_1_1Normalize}{colors.Normalize}}(vmin=0,\ vmax=N*N-\/1)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00958}00958\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00959}00959\ \ \ \ \ data\ =\ np.arange(N*N,\ dtype=float).reshape(N,\ N)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00960}00960\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00961}00961\ \ \ \ \ data[5,\ 5]\ =\ -\/1}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00962}00962\ \ \ \ \ \textcolor{comment}{\#\ This\ will\ cause\ crazy\ ringing\ for\ the\ higher-\/order}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00963}00963\ \ \ \ \ \textcolor{comment}{\#\ interpolations}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00964}00964\ \ \ \ \ data[15,\ 5]\ =\ 1e5}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00965}00965\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00966}00966\ \ \ \ \ \textcolor{comment}{\#\ data[3,\ 3]\ =\ np.nan}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00967}00967\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00968}00968\ \ \ \ \ data[15,\ 15]\ =\ np.inf}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00969}00969\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00970}00970\ \ \ \ \ mask\ =\ np.zeros\_like(data).astype(\textcolor{stringliteral}{'bool'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00971}00971\ \ \ \ \ mask[5,\ 15]\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00972}00972\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00973}00973\ \ \ \ \ data\ =\ np.ma.masked\_array(data,\ mask)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00974}00974\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00975}00975\ \ \ \ \ fig,\ ax\_grid\ =\ plt.subplots(3,\ 6)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00976}00976\ \ \ \ \ interps\ =\ sorted(mimage.\_interpd\_)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00977}00977\ \ \ \ \ interps.remove(\textcolor{stringliteral}{'auto'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00978}00978\ \ \ \ \ interps.remove(\textcolor{stringliteral}{'antialiased'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00979}00979\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00980}00980\ \ \ \ \ \textcolor{keywordflow}{for}\ interp,\ ax\ \textcolor{keywordflow}{in}\ zip(interps,\ ax\_grid.ravel()):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00981}00981\ \ \ \ \ \ \ \ \ ax.set\_title(interp)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00982}00982\ \ \ \ \ \ \ \ \ ax.imshow(data,\ norm=n,\ cmap=cmap,\ interpolation=interp)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00983}00983\ \ \ \ \ \ \ \ \ ax.axis(\textcolor{stringliteral}{'off'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00984}00984\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00985}00985\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00986}00986\ \textcolor{keyword}{def\ }test\_imshow\_no\_warn\_invalid():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00987}00987\ \ \ \ \ plt.imshow([[1,\ 2],\ [3,\ np.nan]])\ \ \textcolor{comment}{\#\ Check\ that\ no\ warning\ is\ emitted.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00988}00988\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00989}00989\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00990}00990\ \textcolor{preprocessor}{@pytest.mark.parametrize}(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00991}00991\ \ \ \ \ \textcolor{stringliteral}{'dtype'},\ [np.dtype(s)\ \textcolor{keywordflow}{for}\ s\ \textcolor{keywordflow}{in}\ \textcolor{stringliteral}{'u2\ u4\ i2\ i4\ i8\ f4\ f8'}.split()])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00992}00992\ \textcolor{keyword}{def\ }test\_imshow\_clips\_rgb\_to\_valid\_range(dtype):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00993}00993\ \ \ \ \ arr\ =\ np.arange(300,\ dtype=dtype).reshape((10,\ 10,\ 3))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00994}00994\ \ \ \ \ \textcolor{keywordflow}{if}\ dtype.kind\ !=\ \textcolor{stringliteral}{'u'}:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00995}00995\ \ \ \ \ \ \ \ \ arr\ -\/=\ 10}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00996}00996\ \ \ \ \ too\_low\ =\ arr\ <\ 0}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00997}00997\ \ \ \ \ too\_high\ =\ arr\ >\ 255}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00998}00998\ \ \ \ \ \textcolor{keywordflow}{if}\ dtype.kind\ ==\ \textcolor{stringliteral}{'f'}:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l00999}00999\ \ \ \ \ \ \ \ \ arr\ =\ arr\ /\ 255}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01000}01000\ \ \ \ \ \_,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01001}01001\ \ \ \ \ out\ =\ ax.imshow(arr).get\_array()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01002}01002\ \ \ \ \ \textcolor{keyword}{assert}\ (out[too\_low]\ ==\ 0).all()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01003}01003\ \ \ \ \ \textcolor{keywordflow}{if}\ dtype.kind\ ==\ \textcolor{stringliteral}{'f'}:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01004}01004\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ (out[too\_high]\ ==\ 1).all()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01005}01005\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ out.dtype.kind\ ==\ \textcolor{stringliteral}{'f'}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01006}01006\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01007}01007\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ (out[too\_high]\ ==\ 255).all()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01008}01008\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ out.dtype\ ==\ np.uint8}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01009}01009\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01010}01010\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01011}01011\ \textcolor{preprocessor}{@image\_comparison(['imshow\_flatfield.png'],\ remove\_text=True,\ style='mpl20')}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01012}01012\ \textcolor{keyword}{def\ }test\_imshow\_flatfield():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01013}01013\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01014}01014\ \ \ \ \ im\ =\ ax.imshow(np.ones((5,\ 5)),\ interpolation=\textcolor{stringliteral}{'nearest'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01015}01015\ \ \ \ \ im.set\_clim(.5,\ 1.5)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01016}01016\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01017}01017\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01018}01018\ \textcolor{preprocessor}{@image\_comparison(['imshow\_bignumbers.png'],\ remove\_text=True,\ style='mpl20')}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01019}01019\ \textcolor{keyword}{def\ }test\_imshow\_bignumbers():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01020}01020\ \ \ \ \ rcParams[\textcolor{stringliteral}{'image.interpolation'}]\ =\ \textcolor{stringliteral}{'nearest'}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01021}01021\ \ \ \ \ \textcolor{comment}{\#\ putting\ a\ big\ number\ in\ an\ array\ of\ integers\ shouldn't}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01022}01022\ \ \ \ \ \textcolor{comment}{\#\ ruin\ the\ dynamic\ range\ of\ the\ resolved\ bits.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01023}01023\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01024}01024\ \ \ \ \ img\ =\ np.array([[1,\ 2,\ 1e12],\ [3,\ 1,\ 4]],\ dtype=np.uint64)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01025}01025\ \ \ \ \ pc\ =\ ax.imshow(img)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01026}01026\ \ \ \ \ pc.set\_clim(0,\ 5)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01027}01027\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01028}01028\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01029}01029\ \textcolor{preprocessor}{@image\_comparison}([\textcolor{stringliteral}{'imshow\_bignumbers\_real.png'}],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01030}01030\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ remove\_text=\textcolor{keyword}{True},\ style=\textcolor{stringliteral}{'mpl20'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01031}01031\ \textcolor{keyword}{def\ }test\_imshow\_bignumbers\_real():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01032}01032\ \ \ \ \ rcParams[\textcolor{stringliteral}{'image.interpolation'}]\ =\ \textcolor{stringliteral}{'nearest'}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01033}01033\ \ \ \ \ \textcolor{comment}{\#\ putting\ a\ big\ number\ in\ an\ array\ of\ integers\ shouldn't}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01034}01034\ \ \ \ \ \textcolor{comment}{\#\ ruin\ the\ dynamic\ range\ of\ the\ resolved\ bits.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01035}01035\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01036}01036\ \ \ \ \ img\ =\ np.array([[2.,\ 1.,\ 1.e22],\ [4.,\ 1.,\ 3.]])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01037}01037\ \ \ \ \ pc\ =\ ax.imshow(img)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01038}01038\ \ \ \ \ pc.set\_clim(0,\ 5)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01039}01039\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01040}01040\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01041}01041\ \textcolor{preprocessor}{@pytest.mark.parametrize}(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01042}01042\ \ \ \ \ \textcolor{stringliteral}{"{}make\_norm"{}},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01043}01043\ \ \ \ \ [\mbox{\hyperlink{classmatplotlib_1_1colors_1_1Normalize}{colors.Normalize}},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01044}01044\ \ \ \ \ \ colors.LogNorm,}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01045}01045\ \ \ \ \ \ \textcolor{keyword}{lambda}:\ \mbox{\hyperlink{classmatplotlib_1_1colors_1_1SymLogNorm}{colors.SymLogNorm}}(1),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01046}01046\ \ \ \ \ \ \textcolor{keyword}{lambda}:\ \mbox{\hyperlink{classmatplotlib_1_1colors_1_1PowerNorm}{colors.PowerNorm}}(1)])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01047}01047\ \textcolor{keyword}{def\ }test\_empty\_imshow(make\_norm):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01048}01048\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01049}01049\ \ \ \ \ \textcolor{keyword}{with}\ pytest.warns(UserWarning,}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01050}01050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ match=\textcolor{stringliteral}{"{}Attempting\ to\ set\ identical\ low\ and\ high\ xlims"{}}):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01051}01051\ \ \ \ \ \ \ \ \ im\ =\ ax.imshow([[]],\ norm=make\_norm())}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01052}01052\ \ \ \ \ im.set\_extent([-\/5,\ 5,\ -\/5,\ 5])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01053}01053\ \ \ \ \ fig.canvas.draw()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01054}01054\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01055}01055\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(RuntimeError):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01056}01056\ \ \ \ \ \ \ \ \ im.make\_image(fig.canvas.get\_renderer())}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01057}01057\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01058}01058\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01059}01059\ \textcolor{keyword}{def\ }test\_imshow\_float16():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01060}01060\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01061}01061\ \ \ \ \ ax.imshow(np.zeros((3,\ 3),\ dtype=np.float16))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01062}01062\ \ \ \ \ \textcolor{comment}{\#\ Ensure\ that\ drawing\ doesn't\ cause\ crash.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01063}01063\ \ \ \ \ fig.canvas.draw()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01064}01064\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01065}01065\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01066}01066\ \textcolor{keyword}{def\ }test\_imshow\_float128():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01067}01067\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01068}01068\ \ \ \ \ ax.imshow(np.zeros((3,\ 3),\ dtype=np.longdouble))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01069}01069\ \ \ \ \ \textcolor{keyword}{with}\ (ExitStack()\ \textcolor{keywordflow}{if}\ np.can\_cast(np.longdouble,\ np.float64,\ \textcolor{stringliteral}{"{}equiv"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01070}01070\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ pytest.warns(UserWarning)):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01071}01071\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Ensure\ that\ drawing\ doesn't\ cause\ crash.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01072}01072\ \ \ \ \ \ \ \ \ fig.canvas.draw()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01073}01073\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01074}01074\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01075}01075\ \textcolor{keyword}{def\ }test\_imshow\_bool():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01076}01076\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01077}01077\ \ \ \ \ ax.imshow(np.array([[\textcolor{keyword}{True},\ \textcolor{keyword}{False}],\ [\textcolor{keyword}{False},\ \textcolor{keyword}{True}]],\ dtype=bool))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01078}01078\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01079}01079\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01080}01080\ \textcolor{keyword}{def\ }test\_full\_invalid():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01081}01081\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01082}01082\ \ \ \ \ ax.imshow(np.full((10,\ 10),\ np.nan))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01083}01083\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01084}01084\ \ \ \ \ fig.canvas.draw()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01085}01085\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01086}01086\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01087}01087\ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{"{}fmt,counted"{}},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01088}01088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [(\textcolor{stringliteral}{"{}ps"{}},\ b\textcolor{stringliteral}{"{}\ colorimage"{}}),\ (\textcolor{stringliteral}{"{}svg"{}},\ b\textcolor{stringliteral}{"{}<image"{}})])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01089}01089\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}composite\_image,count"{},\ [(True,\ 1)},\ (\textcolor{keyword}{False},\ 2)])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01090}01090\ \textcolor{keyword}{def\ }test\_composite(fmt,\ counted,\ composite\_image,\ count):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01091}01091\ \ \ \ \ \textcolor{comment}{\#\ Test\ that\ figures\ can\ be\ saved\ with\ and\ without\ combining\ multiple\ images}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01092}01092\ \ \ \ \ \textcolor{comment}{\#\ (on\ a\ single\ set\ of\ axes)\ into\ a\ single\ composite\ image.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01093}01093\ \ \ \ \ X,\ Y\ =\ np.meshgrid(np.arange(-\/5,\ 5,\ 1),\ np.arange(-\/5,\ 5,\ 1))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01094}01094\ \ \ \ \ Z\ =\ np.sin(Y\ **\ 2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01095}01095\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01096}01096\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01097}01097\ \ \ \ \ ax.set\_xlim(0,\ 3)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01098}01098\ \ \ \ \ ax.imshow(Z,\ extent=[0,\ 1,\ 0,\ 1])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01099}01099\ \ \ \ \ ax.imshow(Z[::-\/1],\ extent=[2,\ 3,\ 0,\ 1])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01100}01100\ \ \ \ \ plt.rcParams[\textcolor{stringliteral}{'image.composite\_image'}]\ =\ composite\_image}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01101}01101\ \ \ \ \ buf\ =\ io.BytesIO()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01102}01102\ \ \ \ \ fig.savefig(buf,\ format=fmt)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01103}01103\ \ \ \ \ \textcolor{keyword}{assert}\ buf.getvalue().count(counted)\ ==\ count}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01104}01104\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01105}01105\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01106}01106\ \textcolor{keyword}{def\ }test\_relim():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01107}01107\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01108}01108\ \ \ \ \ ax.imshow([[0]],\ extent=(0,\ 1,\ 0,\ 1))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01109}01109\ \ \ \ \ ax.relim()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01110}01110\ \ \ \ \ ax.autoscale()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01111}01111\ \ \ \ \ \textcolor{keyword}{assert}\ ax.get\_xlim()\ ==\ ax.get\_ylim()\ ==\ (0,\ 1)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01112}01112\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01113}01113\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01114}01114\ \textcolor{keyword}{def\ }test\_unclipped():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01115}01115\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01116}01116\ \ \ \ \ ax.set\_axis\_off()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01117}01117\ \ \ \ \ im\ =\ ax.imshow([[0,\ 0],\ [0,\ 0]],\ aspect=\textcolor{stringliteral}{"{}auto"{}},\ extent=(-\/10,\ 10,\ -\/10,\ 10),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01118}01118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cmap=\textcolor{stringliteral}{'gray'},\ clip\_on=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01119}01119\ \ \ \ \ ax.set(xlim=(0,\ 1),\ ylim=(0,\ 1))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01120}01120\ \ \ \ \ fig.canvas.draw()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01121}01121\ \ \ \ \ \textcolor{comment}{\#\ The\ unclipped\ image\ should\ fill\ the\ *entire*\ figure\ and\ be\ black.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01122}01122\ \ \ \ \ \textcolor{comment}{\#\ Ignore\ alpha\ for\ this\ comparison.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01123}01123\ \ \ \ \ \textcolor{keyword}{assert}\ (np.array(fig.canvas.buffer\_rgba())[...,\ :3]\ ==\ 0).all()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01124}01124\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01125}01125\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01126}01126\ \textcolor{keyword}{def\ }test\_respects\_bbox():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01127}01127\ \ \ \ \ fig,\ axs\ =\ plt.subplots(2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01128}01128\ \ \ \ \ \textcolor{keywordflow}{for}\ ax\ \textcolor{keywordflow}{in}\ axs:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01129}01129\ \ \ \ \ \ \ \ \ ax.set\_axis\_off()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01130}01130\ \ \ \ \ im\ =\ axs[1].imshow([[0,\ 1],\ [2,\ 3]],\ aspect=\textcolor{stringliteral}{"{}auto"{}},\ extent=(0,\ 1,\ 0,\ 1))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01131}01131\ \ \ \ \ im.set\_clip\_path(\textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01132}01132\ \ \ \ \ \textcolor{comment}{\#\ Make\ the\ image\ invisible\ in\ axs[1],\ but\ visible\ in\ axs[0]\ if\ we\ pan}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01133}01133\ \ \ \ \ \textcolor{comment}{\#\ axs[1]\ up.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01134}01134\ \ \ \ \ im.set\_clip\_box(axs[0].bbox)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01135}01135\ \ \ \ \ buf\_before\ =\ io.BytesIO()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01136}01136\ \ \ \ \ fig.savefig(buf\_before,\ format=\textcolor{stringliteral}{"{}rgba"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01137}01137\ \ \ \ \ \textcolor{keyword}{assert}\ \{*buf\_before.getvalue()\}\ ==\ \{0xff\}\ \ \textcolor{comment}{\#\ All\ white.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01138}01138\ \ \ \ \ axs[1].set(ylim=(-\/1,\ 0))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01139}01139\ \ \ \ \ buf\_after\ =\ io.BytesIO()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01140}01140\ \ \ \ \ fig.savefig(buf\_after,\ format=\textcolor{stringliteral}{"{}rgba"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01141}01141\ \ \ \ \ \textcolor{keyword}{assert}\ buf\_before.getvalue()\ !=\ buf\_after.getvalue()\ \ \textcolor{comment}{\#\ Not\ all\ white.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01142}01142\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01143}01143\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01144}01144\ \textcolor{keyword}{def\ }test\_image\_cursor\_formatting():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01145}01145\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01146}01146\ \ \ \ \ \textcolor{comment}{\#\ Create\ a\ dummy\ image\ to\ be\ able\ to\ call\ format\_cursor\_data}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01147}01147\ \ \ \ \ im\ =\ ax.imshow(np.zeros((4,\ 4)))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01148}01148\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01149}01149\ \ \ \ \ data\ =\ np.ma.masked\_array([0],\ mask=[\textcolor{keyword}{True}])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01150}01150\ \ \ \ \ \textcolor{keyword}{assert}\ im.format\_cursor\_data(data)\ ==\ \textcolor{stringliteral}{'[]'}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01151}01151\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01152}01152\ \ \ \ \ data\ =\ np.ma.masked\_array([0],\ mask=[\textcolor{keyword}{False}])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01153}01153\ \ \ \ \ \textcolor{keyword}{assert}\ im.format\_cursor\_data(data)\ ==\ \textcolor{stringliteral}{'[0]'}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01154}01154\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01155}01155\ \ \ \ \ data\ =\ np.nan}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01156}01156\ \ \ \ \ \textcolor{keyword}{assert}\ im.format\_cursor\_data(data)\ ==\ \textcolor{stringliteral}{'[nan]'}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01157}01157\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01158}01158\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01159}01159\ \textcolor{preprocessor}{@check\_figures\_equal()}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01160}\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__image_ae8c8831c7fa281d241ba5a7f759f4e57}{01160}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__image_ae8c8831c7fa281d241ba5a7f759f4e57}{test\_image\_array\_alpha}}(fig\_test,\ fig\_ref):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01161}01161\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Per-\/pixel\ alpha\ channel\ test."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01162}01162\ \ \ \ \ x\ =\ np.linspace(0,\ 1)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01163}01163\ \ \ \ \ xx,\ yy\ =\ np.meshgrid(x,\ x)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01164}01164\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01165}01165\ \ \ \ \ zz\ =\ np.exp(-\/\ 3\ *\ ((xx\ -\/\ 0.5)\ **\ 2)\ +\ (yy\ -\/\ 0.7\ **\ 2))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01166}01166\ \ \ \ \ alpha\ =\ zz\ /\ zz.max()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01167}01167\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01168}01168\ \ \ \ \ cmap\ =\ mpl.colormaps[\textcolor{stringliteral}{'viridis'}]}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01169}01169\ \ \ \ \ ax\ =\ fig\_test.add\_subplot()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01170}01170\ \ \ \ \ ax.imshow(zz,\ alpha=alpha,\ cmap=cmap,\ interpolation=\textcolor{stringliteral}{'nearest'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01171}01171\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01172}01172\ \ \ \ \ ax\ =\ fig\_ref.add\_subplot()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01173}01173\ \ \ \ \ rgba\ =\ cmap(\mbox{\hyperlink{classmatplotlib_1_1colors_1_1Normalize}{colors.Normalize}}()(zz))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01174}01174\ \ \ \ \ rgba[...,\ -\/1]\ =\ alpha}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01175}01175\ \ \ \ \ ax.imshow(rgba,\ interpolation=\textcolor{stringliteral}{'nearest'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01176}01176\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01177}01177\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01178}01178\ \textcolor{keyword}{def\ }test\_image\_array\_alpha\_validation():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01179}01179\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError,\ match=\textcolor{stringliteral}{"{}alpha\ must\ be\ a\ float,\ two-\/d"{}}):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01180}01180\ \ \ \ \ \ \ \ \ plt.imshow(np.zeros((2,\ 2)),\ alpha=[1,\ 1])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01181}01181\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01182}01182\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01183}01183\ \textcolor{preprocessor}{@mpl.style.context('mpl20')}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01184}01184\ \textcolor{keyword}{def\ }test\_exact\_vmin():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01185}01185\ \ \ \ \ cmap\ =\ copy(mpl.colormaps[\textcolor{stringliteral}{"{}autumn\_r"{}}])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01186}01186\ \ \ \ \ cmap.set\_under(color=\textcolor{stringliteral}{"{}lightgrey"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01187}01187\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01188}01188\ \ \ \ \ \textcolor{comment}{\#\ make\ the\ image\ exactly\ 190\ pixels\ wide}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01189}01189\ \ \ \ \ fig\ =\ plt.figure(figsize=(1.9,\ 0.1),\ dpi=100)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01190}01190\ \ \ \ \ ax\ =\ fig.add\_axes([0,\ 0,\ 1,\ 1])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01191}01191\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01192}01192\ \ \ \ \ data\ =\ np.array(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01193}01193\ \ \ \ \ \ \ \ \ [[-\/1,\ -\/1,\ -\/1,\ 0,\ 0,\ 0,\ 0,\ 43,\ 79,\ 95,\ 66,\ 1,\ -\/1,\ -\/1,\ -\/1,\ 0,\ 0,\ 0,\ 34]],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01194}01194\ \ \ \ \ \ \ \ \ dtype=float,}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01195}01195\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01196}01196\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01197}01197\ \ \ \ \ im\ =\ ax.imshow(data,\ aspect=\textcolor{stringliteral}{"{}auto"{}},\ cmap=cmap,\ vmin=0,\ vmax=100)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01198}01198\ \ \ \ \ ax.axis(\textcolor{stringliteral}{"{}off"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01199}01199\ \ \ \ \ fig.canvas.draw()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01200}01200\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01201}01201\ \ \ \ \ \textcolor{comment}{\#\ get\ the\ RGBA\ slice\ from\ the\ image}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01202}01202\ \ \ \ \ from\_image\ =\ im.make\_image(fig.canvas.renderer)[0][0]}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01203}01203\ \ \ \ \ \textcolor{comment}{\#\ expand\ the\ input\ to\ be\ 190\ long\ and\ run\ through\ norm\ /\ cmap}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01204}01204\ \ \ \ \ direct\_computation\ =\ (}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01205}01205\ \ \ \ \ \ \ \ \ im.cmap(im.norm((data\ *\ ([[1]]\ *\ 10)).T.ravel()))\ *\ 255}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01206}01206\ \ \ \ \ ).astype(int)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01207}01207\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01208}01208\ \ \ \ \ \textcolor{comment}{\#\ check\ than\ the\ RBGA\ values\ are\ the\ same}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01209}01209\ \ \ \ \ \textcolor{keyword}{assert}\ np.all(from\_image\ ==\ direct\_computation)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01210}01210\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01211}01211\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01212}01212\ \textcolor{preprocessor}{@image\_comparison}([\textcolor{stringliteral}{'image\_placement'}],\ extensions=[\textcolor{stringliteral}{'svg'},\ \textcolor{stringliteral}{'pdf'}],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01213}01213\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ remove\_text=\textcolor{keyword}{True},\ style=\textcolor{stringliteral}{'mpl20'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01214}\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__image_a3388095f8b0d8fc82a44ea6790a9213a}{01214}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__image_a3388095f8b0d8fc82a44ea6790a9213a}{test\_image\_placement}}():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01215}01215\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01216}01216\ \textcolor{stringliteral}{\ \ \ \ The\ red\ box\ should\ line\ up\ exactly\ with\ the\ outside\ of\ the\ image.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01217}01217\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01218}01218\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01219}01219\ \ \ \ \ ax.plot([0,\ 0,\ 1,\ 1,\ 0],\ [0,\ 1,\ 1,\ 0,\ 0],\ color=\textcolor{stringliteral}{'r'},\ lw=0.1)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01220}01220\ \ \ \ \ np.random.seed(19680801)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01221}01221\ \ \ \ \ ax.imshow(np.random.randn(16,\ 16),\ cmap=\textcolor{stringliteral}{'Blues'},\ extent=(0,\ 1,\ 0,\ 1),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01222}01222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ interpolation=\textcolor{stringliteral}{'none'},\ vmin=-\/1,\ vmax=1)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01223}01223\ \ \ \ \ ax.set\_xlim(-\/0.1,\ 1+0.1)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01224}01224\ \ \ \ \ ax.set\_ylim(-\/0.1,\ 1+0.1)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01225}01225\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01226}01226\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01227}01227\ \textcolor{comment}{\#\ A\ basic\ ndarray\ subclass\ that\ implements\ a\ quantity}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01228}01228\ \textcolor{comment}{\#\ It\ does\ not\ implement\ an\ entire\ unit\ system\ or\ all\ quantity\ math.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01229}01229\ \textcolor{comment}{\#\ There\ is\ just\ enough\ implemented\ to\ test\ handling\ of\ ndarray}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01230}01230\ \textcolor{comment}{\#\ subclasses.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01231}\mbox{\hyperlink{classmatplotlib_1_1tests_1_1test__image_1_1QuantityND}{01231}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classmatplotlib_1_1tests_1_1test__image_1_1QuantityND}{QuantityND}}(np.ndarray):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01232}01232\ \ \ \ \ \textcolor{keyword}{def\ }\_\_new\_\_(cls,\ input\_array,\ units):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01233}01233\ \ \ \ \ \ \ \ \ obj\ =\ np.asarray(input\_array).view(cls)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01234}01234\ \ \ \ \ \ \ \ \ obj.units\ =\ units}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01235}01235\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ obj}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01236}01236\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01237}01237\ \ \ \ \ \textcolor{keyword}{def\ }\_\_array\_finalize\_\_(self,\ obj):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01238}01238\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classmatplotlib_1_1tests_1_1test__image_1_1QuantityND_a2c8b629e35fd2f152a420645b8715d4b}{units}}\ =\ getattr(obj,\ \textcolor{stringliteral}{"{}units"{}},\ \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01239}01239\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01240}01240\ \ \ \ \ \textcolor{keyword}{def\ }\_\_getitem\_\_(self,\ item):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01241}01241\ \ \ \ \ \ \ \ \ units\ =\ getattr(self,\ \textcolor{stringliteral}{"{}units"{}},\ \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01242}01242\ \ \ \ \ \ \ \ \ ret\ =\ super().\_\_getitem\_\_(item)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01243}01243\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ isinstance(ret,\ QuantityND)\ \textcolor{keywordflow}{or}\ units\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01244}01244\ \ \ \ \ \ \ \ \ \ \ \ \ ret\ =\ \mbox{\hyperlink{classmatplotlib_1_1tests_1_1test__image_1_1QuantityND}{QuantityND}}(ret,\ units)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01245}01245\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ret}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01246}01246\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01247}01247\ \ \ \ \ \textcolor{keyword}{def\ }\_\_array\_ufunc\_\_(self,\ ufunc,\ method,\ *inputs,\ **kwargs):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01248}01248\ \ \ \ \ \ \ \ \ func\ =\ getattr(ufunc,\ method)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01249}01249\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{stringliteral}{"{}out"{}}\ \textcolor{keywordflow}{in}\ kwargs:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01250}01250\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NotImplemented}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01251}01251\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ len(inputs)\ ==\ 1:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01252}01252\ \ \ \ \ \ \ \ \ \ \ \ \ i0\ =\ inputs[0]}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01253}01253\ \ \ \ \ \ \ \ \ \ \ \ \ unit\ =\ getattr(i0,\ \textcolor{stringliteral}{"{}units"{}},\ \textcolor{stringliteral}{"{}dimensionless"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01254}01254\ \ \ \ \ \ \ \ \ \ \ \ \ out\_arr\ =\ func(np.asarray(i0),\ **kwargs)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01255}01255\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ len(inputs)\ ==\ 2:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01256}01256\ \ \ \ \ \ \ \ \ \ \ \ \ i0\ =\ inputs[0]}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01257}01257\ \ \ \ \ \ \ \ \ \ \ \ \ i1\ =\ inputs[1]}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01258}01258\ \ \ \ \ \ \ \ \ \ \ \ \ u0\ =\ getattr(i0,\ \textcolor{stringliteral}{"{}units"{}},\ \textcolor{stringliteral}{"{}dimensionless"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01259}01259\ \ \ \ \ \ \ \ \ \ \ \ \ u1\ =\ getattr(i1,\ \textcolor{stringliteral}{"{}units"{}},\ \textcolor{stringliteral}{"{}dimensionless"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01260}01260\ \ \ \ \ \ \ \ \ \ \ \ \ u0\ =\ u1\ \textcolor{keywordflow}{if}\ u0\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}\ \textcolor{keywordflow}{else}\ u0}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01261}01261\ \ \ \ \ \ \ \ \ \ \ \ \ u1\ =\ u0\ \textcolor{keywordflow}{if}\ u1\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}\ \textcolor{keywordflow}{else}\ u1}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01262}01262\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ufunc\ \textcolor{keywordflow}{in}\ [np.add,\ np.subtract]:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01263}01263\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ u0\ !=\ u1:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01264}01264\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ ValueError}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01265}01265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ unit\ =\ u0}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01266}01266\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ ufunc\ ==\ np.multiply:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01267}01267\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ unit\ =\ f\textcolor{stringliteral}{"{}\{u0\}*\{u1\}"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01268}01268\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ ufunc\ ==\ np.divide:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01269}01269\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ unit\ =\ f\textcolor{stringliteral}{"{}\{u0\}/(\{u1\})"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01270}01270\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ ufunc\ \textcolor{keywordflow}{in}\ (np.greater,\ np.greater\_equal,}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01271}01271\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.equal,\ np.not\_equal,}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01272}01272\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.less,\ np.less\_equal):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01273}01273\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Comparisons\ produce\ unitless\ booleans\ for\ output}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01274}01274\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ unit\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01275}01275\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01276}01276\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NotImplemented}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01277}01277\ \ \ \ \ \ \ \ \ \ \ \ \ out\_arr\ =\ func(i0.view(np.ndarray),\ i1.view(np.ndarray),\ **kwargs)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01278}01278\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01279}01279\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NotImplemented}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01280}01280\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ unit\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01281}01281\ \ \ \ \ \ \ \ \ \ \ \ \ out\_arr\ =\ np.array(out\_arr)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01282}01282\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01283}01283\ \ \ \ \ \ \ \ \ \ \ \ \ out\_arr\ =\ \mbox{\hyperlink{classmatplotlib_1_1tests_1_1test__image_1_1QuantityND}{QuantityND}}(out\_arr,\ unit)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01284}01284\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ out\_arr}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01285}01285\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01286}01286\ \ \ \ \ \textcolor{preprocessor}{@property}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01287}01287\ \ \ \ \ \textcolor{keyword}{def\ }v(self):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01288}01288\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self.view(np.ndarray)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01289}01289\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01290}01290\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01291}01291\ \textcolor{keyword}{def\ }test\_quantitynd():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01292}01292\ \ \ \ \ q\ =\ \mbox{\hyperlink{classmatplotlib_1_1tests_1_1test__image_1_1QuantityND}{QuantityND}}([1,\ 2],\ \textcolor{stringliteral}{"{}m"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01293}01293\ \ \ \ \ q0,\ q1\ =\ q[:]}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01294}01294\ \ \ \ \ \textcolor{keyword}{assert}\ np.all(q.v\ ==\ np.asarray([1,\ 2]))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01295}01295\ \ \ \ \ \textcolor{keyword}{assert}\ q.units\ ==\ \textcolor{stringliteral}{"{}m"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01296}01296\ \ \ \ \ \textcolor{keyword}{assert}\ np.all((q0\ +\ q1).v\ ==\ np.asarray([3]))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01297}01297\ \ \ \ \ \textcolor{keyword}{assert}\ (q0\ *\ q1).units\ ==\ \textcolor{stringliteral}{"{}m*m"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01298}01298\ \ \ \ \ \textcolor{keyword}{assert}\ (q1\ /\ q0).units\ ==\ \textcolor{stringliteral}{"{}m/(m)"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01299}01299\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01300}01300\ \ \ \ \ \ \ \ \ q0\ +\ \mbox{\hyperlink{classmatplotlib_1_1tests_1_1test__image_1_1QuantityND}{QuantityND}}(1,\ \textcolor{stringliteral}{"{}s"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01301}01301\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01302}01302\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01303}01303\ \textcolor{keyword}{def\ }test\_imshow\_quantitynd():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01304}01304\ \ \ \ \ \textcolor{comment}{\#\ generate\ a\ dummy\ ndarray\ subclass}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01305}01305\ \ \ \ \ arr\ =\ \mbox{\hyperlink{classmatplotlib_1_1tests_1_1test__image_1_1QuantityND}{QuantityND}}(np.ones((2,\ 2)),\ \textcolor{stringliteral}{"{}m"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01306}01306\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01307}01307\ \ \ \ \ ax.imshow(arr)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01308}01308\ \ \ \ \ \textcolor{comment}{\#\ executing\ the\ draw\ should\ not\ raise\ an\ exception}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01309}01309\ \ \ \ \ fig.canvas.draw()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01310}01310\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01311}01311\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01312}01312\ \textcolor{preprocessor}{@check\_figures\_equal(extensions=['png'])}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01313}01313\ \textcolor{keyword}{def\ }test\_norm\_change(fig\_test,\ fig\_ref):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01314}01314\ \ \ \ \ \textcolor{comment}{\#\ LogNorm\ should\ not\ mask\ anything\ invalid\ permanently.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01315}01315\ \ \ \ \ data\ =\ np.full((5,\ 5),\ 1,\ dtype=np.float64)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01316}01316\ \ \ \ \ data[0:2,\ :]\ =\ -\/1}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01317}01317\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01318}01318\ \ \ \ \ masked\_data\ =\ np.ma.array(data,\ mask=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01319}01319\ \ \ \ \ masked\_data.mask[0:2,\ 0:2]\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01320}01320\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01321}01321\ \ \ \ \ cmap\ =\ mpl.colormaps[\textcolor{stringliteral}{'viridis'}].with\_extremes(under=\textcolor{stringliteral}{'w'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01322}01322\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01323}01323\ \ \ \ \ ax\ =\ fig\_test.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01324}01324\ \ \ \ \ im\ =\ ax.imshow(data,\ norm=colors.LogNorm(vmin=0.5,\ vmax=1),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01325}01325\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ extent=(0,\ 5,\ 0,\ 5),\ interpolation=\textcolor{stringliteral}{'nearest'},\ cmap=cmap)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01326}01326\ \ \ \ \ im.set\_norm(\mbox{\hyperlink{classmatplotlib_1_1colors_1_1Normalize}{colors.Normalize}}(vmin=-\/2,\ vmax=2))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01327}01327\ \ \ \ \ im\ =\ ax.imshow(masked\_data,\ norm=colors.LogNorm(vmin=0.5,\ vmax=1),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01328}01328\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ extent=(5,\ 10,\ 5,\ 10),\ interpolation=\textcolor{stringliteral}{'nearest'},\ cmap=cmap)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01329}01329\ \ \ \ \ im.set\_norm(\mbox{\hyperlink{classmatplotlib_1_1colors_1_1Normalize}{colors.Normalize}}(vmin=-\/2,\ vmax=2))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01330}01330\ \ \ \ \ ax.set(xlim=(0,\ 10),\ ylim=(0,\ 10))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01331}01331\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01332}01332\ \ \ \ \ ax\ =\ fig\_ref.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01333}01333\ \ \ \ \ ax.imshow(data,\ norm=\mbox{\hyperlink{classmatplotlib_1_1colors_1_1Normalize}{colors.Normalize}}(vmin=-\/2,\ vmax=2),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01334}01334\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ extent=(0,\ 5,\ 0,\ 5),\ interpolation=\textcolor{stringliteral}{'nearest'},\ cmap=cmap)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01335}01335\ \ \ \ \ ax.imshow(masked\_data,\ norm=\mbox{\hyperlink{classmatplotlib_1_1colors_1_1Normalize}{colors.Normalize}}(vmin=-\/2,\ vmax=2),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01336}01336\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ extent=(5,\ 10,\ 5,\ 10),\ interpolation=\textcolor{stringliteral}{'nearest'},\ cmap=cmap)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01337}01337\ \ \ \ \ ax.set(xlim=(0,\ 10),\ ylim=(0,\ 10))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01338}01338\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01339}01339\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01340}01340\ \textcolor{preprocessor}{@pytest.mark.parametrize('x',\ [-\/1,\ 1])}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01341}01341\ \textcolor{preprocessor}{@check\_figures\_equal(extensions=['png'])}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01342}01342\ \textcolor{keyword}{def\ }test\_huge\_range\_log(fig\_test,\ fig\_ref,\ x):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01343}01343\ \ \ \ \ \textcolor{comment}{\#\ parametrize\ over\ bad\ lognorm\ -\/1\ values\ and\ large\ range\ 1\ -\/>\ 1e20}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01344}01344\ \ \ \ \ data\ =\ np.full((5,\ 5),\ x,\ dtype=np.float64)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01345}01345\ \ \ \ \ data[0:2,\ :]\ =\ 1E20}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01346}01346\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01347}01347\ \ \ \ \ ax\ =\ fig\_test.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01348}01348\ \ \ \ \ ax.imshow(data,\ norm=colors.LogNorm(vmin=1,\ vmax=data.max()),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01349}01349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ interpolation=\textcolor{stringliteral}{'nearest'},\ cmap=\textcolor{stringliteral}{'viridis'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01350}01350\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01351}01351\ \ \ \ \ data\ =\ np.full((5,\ 5),\ x,\ dtype=np.float64)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01352}01352\ \ \ \ \ data[0:2,\ :]\ =\ 1000}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01353}01353\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01354}01354\ \ \ \ \ ax\ =\ fig\_ref.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01355}01355\ \ \ \ \ cmap\ =\ mpl.colormaps[\textcolor{stringliteral}{'viridis'}].with\_extremes(under=\textcolor{stringliteral}{'w'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01356}01356\ \ \ \ \ ax.imshow(data,\ norm=\mbox{\hyperlink{classmatplotlib_1_1colors_1_1Normalize}{colors.Normalize}}(vmin=1,\ vmax=data.max()),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01357}01357\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ interpolation=\textcolor{stringliteral}{'nearest'},\ cmap=cmap)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01358}01358\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01359}01359\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01360}01360\ \textcolor{preprocessor}{@check\_figures\_equal(extensions=['png'])}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01361}01361\ \textcolor{keyword}{def\ }test\_spy\_box(fig\_test,\ fig\_ref):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01362}01362\ \ \ \ \ \textcolor{comment}{\#\ setting\ up\ reference\ and\ test}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01363}01363\ \ \ \ \ ax\_test\ =\ fig\_test.subplots(1,\ 3)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01364}01364\ \ \ \ \ ax\_ref\ =\ fig\_ref.subplots(1,\ 3)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01365}01365\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01366}01366\ \ \ \ \ plot\_data\ =\ (}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01367}01367\ \ \ \ \ \ \ \ \ [[1,\ 1],\ [1,\ 1]],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01368}01368\ \ \ \ \ \ \ \ \ [[0,\ 0],\ [0,\ 0]],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01369}01369\ \ \ \ \ \ \ \ \ [[0,\ 1],\ [1,\ 0]],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01370}01370\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01371}01371\ \ \ \ \ plot\_titles\ =\ [\textcolor{stringliteral}{"{}ones"{}},\ \textcolor{stringliteral}{"{}zeros"{}},\ \textcolor{stringliteral}{"{}mixed"{}}]}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01372}01372\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01373}01373\ \ \ \ \ \textcolor{keywordflow}{for}\ i,\ (z,\ title)\ \textcolor{keywordflow}{in}\ enumerate(zip(plot\_data,\ plot\_titles)):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01374}01374\ \ \ \ \ \ \ \ \ ax\_test[i].set\_title(title)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01375}01375\ \ \ \ \ \ \ \ \ ax\_test[i].spy(z)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01376}01376\ \ \ \ \ \ \ \ \ ax\_ref[i].set\_title(title)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01377}01377\ \ \ \ \ \ \ \ \ ax\_ref[i].imshow(z,\ interpolation=\textcolor{stringliteral}{'nearest'},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01378}01378\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ aspect=\textcolor{stringliteral}{'equal'},\ origin=\textcolor{stringliteral}{'upper'},\ cmap=\textcolor{stringliteral}{'Greys'},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01379}01379\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ vmin=0,\ vmax=1)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01380}01380\ \ \ \ \ \ \ \ \ ax\_ref[i].set\_xlim(-\/0.5,\ 1.5)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01381}01381\ \ \ \ \ \ \ \ \ ax\_ref[i].set\_ylim(1.5,\ -\/0.5)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01382}01382\ \ \ \ \ \ \ \ \ ax\_ref[i].xaxis.tick\_top()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01383}01383\ \ \ \ \ \ \ \ \ ax\_ref[i].title.set\_y(1.05)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01384}01384\ \ \ \ \ \ \ \ \ ax\_ref[i].xaxis.set\_ticks\_position(\textcolor{stringliteral}{'both'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01385}01385\ \ \ \ \ \ \ \ \ ax\_ref[i].xaxis.set\_major\_locator(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01386}01386\ \ \ \ \ \ \ \ \ \ \ \ \ mticker.MaxNLocator(nbins=9,\ steps=[1,\ 2,\ 5,\ 10],\ integer=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01387}01387\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01388}01388\ \ \ \ \ \ \ \ \ ax\_ref[i].yaxis.set\_major\_locator(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01389}01389\ \ \ \ \ \ \ \ \ \ \ \ \ mticker.MaxNLocator(nbins=9,\ steps=[1,\ 2,\ 5,\ 10],\ integer=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01390}01390\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01391}01391\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01392}01392\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01393}01393\ \textcolor{preprocessor}{@image\_comparison(["{}nonuniform\_and\_pcolor.png"{}],\ style="{}mpl20"{})}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01394}01394\ \textcolor{keyword}{def\ }test\_nonuniform\_and\_pcolor():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01395}01395\ \ \ \ \ axs\ =\ plt.figure(figsize=(3,\ 3)).subplots(3,\ sharex=\textcolor{keyword}{True},\ sharey=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01396}01396\ \ \ \ \ \textcolor{keywordflow}{for}\ ax,\ interpolation\ \textcolor{keywordflow}{in}\ zip(axs,\ [\textcolor{stringliteral}{"{}nearest"{}},\ \textcolor{stringliteral}{"{}bilinear"{}}]):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01397}01397\ \ \ \ \ \ \ \ \ im\ =\ \mbox{\hyperlink{classmatplotlib_1_1image_1_1NonUniformImage}{NonUniformImage}}(ax,\ interpolation=interpolation)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01398}01398\ \ \ \ \ \ \ \ \ im.set\_data(np.arange(3)\ **\ 2,\ np.arange(3)\ **\ 2,}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01399}01399\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.arange(9).reshape((3,\ 3)))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01400}01400\ \ \ \ \ \ \ \ \ ax.add\_image(im)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01401}01401\ \ \ \ \ axs[2].pcolorfast(\ \ \textcolor{comment}{\#\ PcolorImage}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01402}01402\ \ \ \ \ \ \ \ \ np.arange(4)\ **\ 2,\ np.arange(4)\ **\ 2,\ np.arange(9).reshape((3,\ 3)))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01403}01403\ \ \ \ \ \textcolor{keywordflow}{for}\ ax\ \textcolor{keywordflow}{in}\ axs:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01404}01404\ \ \ \ \ \ \ \ \ ax.set\_axis\_off()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01405}01405\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ NonUniformImage\ "{}leaks"{}\ out\ of\ extents,\ not\ PColorImage.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01406}01406\ \ \ \ \ \ \ \ \ ax.set(xlim=(0,\ 10))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01407}01407\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01408}01408\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01409}01409\ \textcolor{preprocessor}{@image\_comparison(["{}nonuniform\_logscale.png"{}],\ style="{}mpl20"{})}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01410}01410\ \textcolor{keyword}{def\ }test\_nonuniform\_logscale():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01411}01411\ \ \ \ \ \_,\ axs\ =\ plt.subplots(ncols=3,\ nrows=1)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01412}01412\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01413}01413\ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(3):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01414}01414\ \ \ \ \ \ \ \ \ ax\ =\ axs[i]}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01415}01415\ \ \ \ \ \ \ \ \ im\ =\ \mbox{\hyperlink{classmatplotlib_1_1image_1_1NonUniformImage}{NonUniformImage}}(ax)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01416}01416\ \ \ \ \ \ \ \ \ im.set\_data(np.arange(1,\ 4)\ **\ 2,\ np.arange(1,\ 4)\ **\ 2,}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01417}01417\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.arange(9).reshape((3,\ 3)))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01418}01418\ \ \ \ \ \ \ \ \ ax.set\_xlim(1,\ 16)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01419}01419\ \ \ \ \ \ \ \ \ ax.set\_ylim(1,\ 16)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01420}01420\ \ \ \ \ \ \ \ \ ax.set\_box\_aspect(1)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01421}01421\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ i\ ==\ 1:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01422}01422\ \ \ \ \ \ \ \ \ \ \ \ \ ax.set\_xscale(\textcolor{stringliteral}{"{}log"{}},\ base=2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01423}01423\ \ \ \ \ \ \ \ \ \ \ \ \ ax.set\_yscale(\textcolor{stringliteral}{"{}log"{}},\ base=2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01424}01424\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ i\ ==\ 2:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01425}01425\ \ \ \ \ \ \ \ \ \ \ \ \ ax.set\_xscale(\textcolor{stringliteral}{"{}log"{}},\ base=4)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01426}01426\ \ \ \ \ \ \ \ \ \ \ \ \ ax.set\_yscale(\textcolor{stringliteral}{"{}log"{}},\ base=4)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01427}01427\ \ \ \ \ \ \ \ \ ax.add\_image(im)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01428}01428\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01429}01429\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01430}01430\ \textcolor{preprocessor}{@image\_comparison(['rgba\_antialias.png'],\ style='mpl20',\ remove\_text=True,\ tol=0.02)}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01431}01431\ \textcolor{keyword}{def\ }test\_rgba\_antialias():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01432}01432\ \ \ \ \ fig,\ axs\ =\ plt.subplots(2,\ 2,\ figsize=(3.5,\ 3.5),\ sharex=\textcolor{keyword}{False},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01433}01433\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sharey=\textcolor{keyword}{False},\ constrained\_layout=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01434}01434\ \ \ \ \ N\ =\ 250}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01435}01435\ \ \ \ \ aa\ =\ np.ones((N,\ N))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01436}01436\ \ \ \ \ aa[::2,\ :]\ =\ -\/1}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01437}01437\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01438}01438\ \ \ \ \ x\ =\ np.arange(N)\ /\ N\ -\/\ 0.5}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01439}01439\ \ \ \ \ y\ =\ np.arange(N)\ /\ N\ -\/\ 0.5}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01440}01440\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01441}01441\ \ \ \ \ X,\ Y\ =\ np.meshgrid(x,\ y)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01442}01442\ \ \ \ \ R\ =\ np.sqrt(X**2\ +\ Y**2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01443}01443\ \ \ \ \ f0\ =\ 10}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01444}01444\ \ \ \ \ k\ =\ 75}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01445}01445\ \ \ \ \ \textcolor{comment}{\#\ aliased\ concentric\ circles}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01446}01446\ \ \ \ \ a\ =\ np.sin(np.pi\ *\ 2\ *\ (f0\ *\ R\ +\ k\ *\ R**2\ /\ 2))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01447}01447\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01448}01448\ \ \ \ \ \textcolor{comment}{\#\ stripes\ on\ lhs}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01449}01449\ \ \ \ \ a[:int(N/2),\ :][R[:int(N/2),\ :]\ <\ 0.4]\ =\ -\/1}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01450}01450\ \ \ \ \ a[:int(N/2),\ :][R[:int(N/2),\ :]\ <\ 0.3]\ =\ 1}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01451}01451\ \ \ \ \ aa[:,\ int(N/2):]\ =\ a[:,\ int(N/2):]}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01452}01452\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01453}01453\ \ \ \ \ \textcolor{comment}{\#\ set\ some\ over/unders\ and\ NaNs}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01454}01454\ \ \ \ \ aa[20:50,\ 20:50]\ =\ np.nan}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01455}01455\ \ \ \ \ aa[70:90,\ 70:90]\ =\ 1e6}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01456}01456\ \ \ \ \ aa[70:90,\ 20:30]\ =\ -\/1e6}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01457}01457\ \ \ \ \ aa[70:90,\ 195:215]\ =\ 1e6}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01458}01458\ \ \ \ \ aa[20:30,\ 195:215]\ =\ -\/1e6}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01459}01459\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01460}01460\ \ \ \ \ cmap\ =\ copy(plt.cm.RdBu\_r)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01461}01461\ \ \ \ \ cmap.set\_over(\textcolor{stringliteral}{'yellow'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01462}01462\ \ \ \ \ cmap.set\_under(\textcolor{stringliteral}{'cyan'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01463}01463\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01464}01464\ \ \ \ \ axs\ =\ axs.flatten()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01465}01465\ \ \ \ \ \textcolor{comment}{\#\ zoom\ in}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01466}01466\ \ \ \ \ axs[0].imshow(aa,\ interpolation=\textcolor{stringliteral}{'nearest'},\ cmap=cmap,\ vmin=-\/1.2,\ vmax=1.2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01467}01467\ \ \ \ \ axs[0].set\_xlim([N/2-\/25,\ N/2+25])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01468}01468\ \ \ \ \ axs[0].set\_ylim([N/2+50,\ N/2-\/10])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01469}01469\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01470}01470\ \ \ \ \ \textcolor{comment}{\#\ no\ anti-\/alias}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01471}01471\ \ \ \ \ axs[1].imshow(aa,\ interpolation=\textcolor{stringliteral}{'nearest'},\ cmap=cmap,\ vmin=-\/1.2,\ vmax=1.2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01472}01472\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01473}01473\ \ \ \ \ \textcolor{comment}{\#\ data\ antialias:\ Note\ no\ purples,\ and\ white\ in\ circle.\ \ Note}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01474}01474\ \ \ \ \ \textcolor{comment}{\#\ that\ alternating\ red\ and\ blue\ stripes\ become\ white.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01475}01475\ \ \ \ \ axs[2].imshow(aa,\ interpolation=\textcolor{stringliteral}{'auto'},\ interpolation\_stage=\textcolor{stringliteral}{'data'},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01476}01476\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cmap=cmap,\ vmin=-\/1.2,\ vmax=1.2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01477}01477\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01478}01478\ \ \ \ \ \textcolor{comment}{\#\ rgba\ antialias:\ Note\ purples\ at\ boundary\ with\ circle.\ \ Note\ that}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01479}01479\ \ \ \ \ \textcolor{comment}{\#\ alternating\ red\ and\ blue\ stripes\ become\ purple}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01480}01480\ \ \ \ \ axs[3].imshow(aa,\ interpolation=\textcolor{stringliteral}{'auto'},\ interpolation\_stage=\textcolor{stringliteral}{'rgba'},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01481}01481\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cmap=cmap,\ vmin=-\/1.2,\ vmax=1.2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01482}01482\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01483}01483\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01484}01484\ \textcolor{preprocessor}{@check\_figures\_equal(extensions=('png',\ )})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01485}\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__image_ab5a7778b69cce91d83242173d4349f49}{01485}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__image_ab5a7778b69cce91d83242173d4349f49}{test\_upsample\_interpolation\_stage}}(fig\_test,\ fig\_ref):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01486}01486\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01487}01487\ \textcolor{stringliteral}{\ \ \ \ Show\ that\ interpolation\_stage='auto'\ gives\ the\ same\ as\ 'data'}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01488}01488\ \textcolor{stringliteral}{\ \ \ \ for\ upsampling.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01489}01489\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01490}01490\ \ \ \ \ \textcolor{comment}{\#\ Fixing\ random\ state\ for\ reproducibility.\ \ This\ non-\/standard\ seed}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01491}01491\ \ \ \ \ \textcolor{comment}{\#\ gives\ red\ splotches\ for\ 'rgba'.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01492}01492\ \ \ \ \ np.random.seed(19680801+9)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01493}01493\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01494}01494\ \ \ \ \ grid\ =\ np.random.rand(4,\ 4)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01495}01495\ \ \ \ \ ax\ =\ fig\_ref.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01496}01496\ \ \ \ \ ax.imshow(grid,\ interpolation=\textcolor{stringliteral}{'bilinear'},\ cmap=\textcolor{stringliteral}{'viridis'},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01497}01497\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ interpolation\_stage=\textcolor{stringliteral}{'data'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01498}01498\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01499}01499\ \ \ \ \ ax\ =\ fig\_test.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01500}01500\ \ \ \ \ ax.imshow(grid,\ interpolation=\textcolor{stringliteral}{'bilinear'},\ cmap=\textcolor{stringliteral}{'viridis'},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01501}01501\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ interpolation\_stage=\textcolor{stringliteral}{'auto'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01502}01502\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01503}01503\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01504}01504\ \textcolor{preprocessor}{@check\_figures\_equal(extensions=('png',\ )})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01505}\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__image_a3862d3e9f44dba2be7fb786589786244}{01505}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacematplotlib_1_1tests_1_1test__image_a3862d3e9f44dba2be7fb786589786244}{test\_downsample\_interpolation\_stage}}(fig\_test,\ fig\_ref):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01506}01506\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01507}01507\ \textcolor{stringliteral}{\ \ \ \ Show\ that\ interpolation\_stage='auto'\ gives\ the\ same\ as\ 'rgba'}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01508}01508\ \textcolor{stringliteral}{\ \ \ \ for\ downsampling.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01509}01509\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01510}01510\ \ \ \ \ \textcolor{comment}{\#\ Fixing\ random\ state\ for\ reproducibility}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01511}01511\ \ \ \ \ np.random.seed(19680801)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01512}01512\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01513}01513\ \ \ \ \ grid\ =\ np.random.rand(4000,\ 4000)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01514}01514\ \ \ \ \ ax\ =\ fig\_ref.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01515}01515\ \ \ \ \ ax.imshow(grid,\ interpolation=\textcolor{stringliteral}{'auto'},\ cmap=\textcolor{stringliteral}{'viridis'},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01516}01516\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ interpolation\_stage=\textcolor{stringliteral}{'rgba'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01517}01517\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01518}01518\ \ \ \ \ ax\ =\ fig\_test.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01519}01519\ \ \ \ \ ax.imshow(grid,\ interpolation=\textcolor{stringliteral}{'auto'},\ cmap=\textcolor{stringliteral}{'viridis'},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01520}01520\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ interpolation\_stage=\textcolor{stringliteral}{'auto'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01521}01521\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01522}01522\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01523}01523\ \textcolor{keyword}{def\ }test\_rc\_interpolation\_stage():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01524}01524\ \ \ \ \ \textcolor{keywordflow}{for}\ val\ \textcolor{keywordflow}{in}\ [\textcolor{stringliteral}{"{}data"{}},\ \textcolor{stringliteral}{"{}rgba"{}}]:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01525}01525\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ mpl.rc\_context(\{\textcolor{stringliteral}{"{}image.interpolation\_stage"{}}:\ val\}):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01526}01526\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ plt.imshow([[1,\ 2]]).get\_interpolation\_stage()\ ==\ val}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01527}01527\ \ \ \ \ \textcolor{keywordflow}{for}\ val\ \textcolor{keywordflow}{in}\ [\textcolor{stringliteral}{"{}DATA"{}},\ \textcolor{stringliteral}{"{}foo"{}},\ \textcolor{keywordtype}{None}]:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01528}01528\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01529}01529\ \ \ \ \ \ \ \ \ \ \ \ \ mpl.rcParams[\textcolor{stringliteral}{"{}image.interpolation\_stage"{}}]\ =\ val}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01530}01530\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01531}01531\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01532}01532\ \textcolor{comment}{\#\ We\ check\ for\ the\ warning\ with\ a\ draw()\ in\ the\ test,\ but\ we\ also\ need\ to}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01533}01533\ \textcolor{comment}{\#\ filter\ the\ warning\ as\ it\ is\ emitted\ by\ the\ figure\ test\ decorator}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01534}01534\ \textcolor{preprocessor}{@pytest.mark.filterwarnings}(\textcolor{stringliteral}{r'ignore:Data\ with\ more\ than\ .*\ '}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01535}01535\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'cannot\ be\ accurately\ displayed'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01536}01536\ \textcolor{preprocessor}{@pytest.mark.parametrize('origin',\ ['upper',\ 'lower'])}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01537}01537\ \textcolor{preprocessor}{@pytest.mark.parametrize}(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01538}01538\ \ \ \ \ \textcolor{stringliteral}{'dim,\ size,\ msg'},\ [[\textcolor{stringliteral}{'row'},\ 2**23,\ \textcolor{stringliteral}{r'2\(\backslash\)*\(\backslash\)*23\ columns'}],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01539}01539\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{'col'},\ 2**24,\ \textcolor{stringliteral}{r'2\(\backslash\)*\(\backslash\)*24\ rows'}]])}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01540}01540\ \textcolor{preprocessor}{@check\_figures\_equal(extensions=('png',\ )})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01541}01541\ \textcolor{keyword}{def\ }test\_large\_image(fig\_test,\ fig\_ref,\ dim,\ size,\ msg,\ origin):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01542}01542\ \ \ \ \ \textcolor{comment}{\#\ Check\ that\ Matplotlib\ downsamples\ images\ that\ are\ too\ big\ for\ AGG}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01543}01543\ \ \ \ \ \textcolor{comment}{\#\ See\ issue\ \#19276.\ Currently\ the\ fix\ only\ works\ for\ png\ output\ but\ not}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01544}01544\ \ \ \ \ \textcolor{comment}{\#\ pdf\ or\ svg\ output.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01545}01545\ \ \ \ \ ax\_test\ =\ fig\_test.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01546}01546\ \ \ \ \ ax\_ref\ =\ fig\_ref.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01547}01547\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01548}01548\ \ \ \ \ array\ =\ np.zeros((1,\ size\ +\ 2))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01549}01549\ \ \ \ \ array[:,\ array.size\ //\ 2:]\ =\ 1}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01550}01550\ \ \ \ \ \textcolor{keywordflow}{if}\ dim\ ==\ \textcolor{stringliteral}{'col'}:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01551}01551\ \ \ \ \ \ \ \ \ array\ =\ array.T}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01552}01552\ \ \ \ \ im\ =\ ax\_test.imshow(array,\ vmin=0,\ vmax=1,}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01553}01553\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ aspect=\textcolor{stringliteral}{'auto'},\ extent=(0,\ 1,\ 0,\ 1),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01554}01554\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ interpolation=\textcolor{stringliteral}{'none'},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01555}01555\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ origin=origin)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01556}01556\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01557}01557\ \ \ \ \ \textcolor{keyword}{with}\ pytest.warns(UserWarning,}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01558}01558\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ match=f\textcolor{stringliteral}{'Data\ with\ more\ than\ \{msg\}\ cannot\ be\ '}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01559}01559\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'accurately\ displayed.'}):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01560}01560\ \ \ \ \ \ \ \ \ fig\_test.canvas.draw()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01561}01561\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01562}01562\ \ \ \ \ array\ =\ np.zeros((1,\ 2))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01563}01563\ \ \ \ \ array[:,\ 1]\ =\ 1}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01564}01564\ \ \ \ \ \textcolor{keywordflow}{if}\ dim\ ==\ \textcolor{stringliteral}{'col'}:}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01565}01565\ \ \ \ \ \ \ \ \ array\ =\ array.T}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01566}01566\ \ \ \ \ im\ =\ ax\_ref.imshow(array,\ vmin=0,\ vmax=1,\ aspect=\textcolor{stringliteral}{'auto'},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01567}01567\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ extent=(0,\ 1,\ 0,\ 1),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01568}01568\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ interpolation=\textcolor{stringliteral}{'none'},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01569}01569\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ origin=origin)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01570}01570\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01571}01571\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01572}01572\ \textcolor{preprocessor}{@check\_figures\_equal(extensions=["{}png"{}])}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01573}01573\ \textcolor{keyword}{def\ }test\_str\_norms(fig\_test,\ fig\_ref):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01574}01574\ \ \ \ \ t\ =\ np.random.rand(10,\ 10)\ *\ .8\ +\ .1\ \ \textcolor{comment}{\#\ between\ 0\ and\ 1}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01575}01575\ \ \ \ \ axts\ =\ fig\_test.subplots(1,\ 5)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01576}01576\ \ \ \ \ axts[0].imshow(t,\ norm=\textcolor{stringliteral}{"{}log"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01577}01577\ \ \ \ \ axts[1].imshow(t,\ norm=\textcolor{stringliteral}{"{}log"{}},\ vmin=.2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01578}01578\ \ \ \ \ axts[2].imshow(t,\ norm=\textcolor{stringliteral}{"{}symlog"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01579}01579\ \ \ \ \ axts[3].imshow(t,\ norm=\textcolor{stringliteral}{"{}symlog"{}},\ vmin=.3,\ vmax=.7)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01580}01580\ \ \ \ \ axts[4].imshow(t,\ norm=\textcolor{stringliteral}{"{}logit"{}},\ vmin=.3,\ vmax=.7)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01581}01581\ \ \ \ \ axrs\ =\ fig\_ref.subplots(1,\ 5)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01582}01582\ \ \ \ \ axrs[0].imshow(t,\ norm=colors.LogNorm())}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01583}01583\ \ \ \ \ axrs[1].imshow(t,\ norm=colors.LogNorm(vmin=.2))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01584}01584\ \ \ \ \ \textcolor{comment}{\#\ same\ linthresh\ as\ SymmetricalLogScale's\ default.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01585}01585\ \ \ \ \ axrs[2].imshow(t,\ norm=\mbox{\hyperlink{classmatplotlib_1_1colors_1_1SymLogNorm}{colors.SymLogNorm}}(linthresh=2))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01586}01586\ \ \ \ \ axrs[3].imshow(t,\ norm=\mbox{\hyperlink{classmatplotlib_1_1colors_1_1SymLogNorm}{colors.SymLogNorm}}(linthresh=2,\ vmin=.3,\ vmax=.7))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01587}01587\ \ \ \ \ axrs[4].imshow(t,\ norm=\textcolor{stringliteral}{"{}logit"{}},\ clim=(.3,\ .7))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01588}01588\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01589}01589\ \ \ \ \ \textcolor{keyword}{assert}\ type(axts[0].images[0].norm)\ \textcolor{keywordflow}{is}\ colors.LogNorm\ \ \textcolor{comment}{\#\ Exactly\ that\ class}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01590}01590\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01591}01591\ \ \ \ \ \ \ \ \ axts[0].imshow(t,\ norm=\textcolor{stringliteral}{"{}foobar"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01592}01592\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01593}01593\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01594}01594\ \textcolor{keyword}{def\ }test\_\_resample\_valid\_output():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01595}01595\ \ \ \ \ resample\ =\ functools.partial(mpl.\_image.resample,\ transform=\mbox{\hyperlink{classmatplotlib_1_1transforms_1_1Affine2D}{Affine2D}}())}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01596}01596\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError,\ match=\textcolor{stringliteral}{"{}incompatible\ function\ arguments"{}}):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01597}01597\ \ \ \ \ \ \ \ \ resample(np.zeros((9,\ 9)),\ \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01598}01598\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError,\ match=\textcolor{stringliteral}{"{}different\ dimensionalities"{}}):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01599}01599\ \ \ \ \ \ \ \ \ resample(np.zeros((9,\ 9)),\ np.zeros((9,\ 9,\ 4)))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01600}01600\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError,\ match=\textcolor{stringliteral}{"{}different\ dimensionalities"{}}):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01601}01601\ \ \ \ \ \ \ \ \ resample(np.zeros((9,\ 9,\ 4)),\ np.zeros((9,\ 9)))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01602}01602\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError,\ match=\textcolor{stringliteral}{"{}3D\ input\ array\ must\ be\ RGBA"{}}):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01603}01603\ \ \ \ \ \ \ \ \ resample(np.zeros((9,\ 9,\ 3)),\ np.zeros((9,\ 9,\ 4)))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01604}01604\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError,\ match=\textcolor{stringliteral}{"{}3D\ output\ array\ must\ be\ RGBA"{}}):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01605}01605\ \ \ \ \ \ \ \ \ resample(np.zeros((9,\ 9,\ 4)),\ np.zeros((9,\ 9,\ 3)))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01606}01606\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError,\ match=\textcolor{stringliteral}{"{}mismatched\ types"{}}):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01607}01607\ \ \ \ \ \ \ \ \ resample(np.zeros((9,\ 9),\ np.uint8),\ np.zeros((9,\ 9)))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01608}01608\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError,\ match=\textcolor{stringliteral}{"{}must\ be\ C-\/contiguous"{}}):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01609}01609\ \ \ \ \ \ \ \ \ resample(np.zeros((9,\ 9)),\ np.zeros((9,\ 9)).T)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01610}01610\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01611}01611\ \ \ \ \ out\ =\ np.zeros((9,\ 9))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01612}01612\ \ \ \ \ out.flags.writeable\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01613}01613\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError,\ match=\textcolor{stringliteral}{"{}Output\ array\ must\ be\ writeable"{}}):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01614}01614\ \ \ \ \ \ \ \ \ resample(np.zeros((9,\ 9)),\ out)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01615}01615\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01616}01616\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01617}01617\ \textcolor{keyword}{def\ }test\_axesimage\_get\_shape():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01618}01618\ \ \ \ \ \textcolor{comment}{\#\ generate\ dummy\ image\ to\ test\ get\_shape\ method}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01619}01619\ \ \ \ \ ax\ =\ plt.gca()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01620}01620\ \ \ \ \ im\ =\ \mbox{\hyperlink{classmatplotlib_1_1image_1_1AxesImage}{AxesImage}}(ax)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01621}01621\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(RuntimeError,\ match=\textcolor{stringliteral}{"{}You\ must\ first\ set\ the\ image\ array"{}}):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01622}01622\ \ \ \ \ \ \ \ \ im.get\_shape()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01623}01623\ \ \ \ \ z\ =\ np.arange(12,\ dtype=float).reshape((4,\ 3))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01624}01624\ \ \ \ \ im.set\_data(z)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01625}01625\ \ \ \ \ \textcolor{keyword}{assert}\ im.get\_shape()\ ==\ (4,\ 3)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01626}01626\ \ \ \ \ \textcolor{keyword}{assert}\ im.get\_size()\ ==\ im.get\_shape()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01627}01627\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01628}01628\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01629}01629\ \textcolor{keyword}{def\ }test\_non\_transdata\_image\_does\_not\_touch\_aspect():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01630}01630\ \ \ \ \ ax\ =\ plt.figure().add\_subplot()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01631}01631\ \ \ \ \ im\ =\ np.arange(4).reshape((2,\ 2))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01632}01632\ \ \ \ \ ax.imshow(im,\ transform=ax.transAxes)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01633}01633\ \ \ \ \ \textcolor{keyword}{assert}\ ax.get\_aspect()\ ==\ \textcolor{stringliteral}{"{}auto"{}}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01634}01634\ \ \ \ \ ax.imshow(im,\ transform=\mbox{\hyperlink{classmatplotlib_1_1transforms_1_1Affine2D}{Affine2D}}().scale(2)\ +\ ax.transData)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01635}01635\ \ \ \ \ \textcolor{keyword}{assert}\ ax.get\_aspect()\ ==\ 1}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01636}01636\ \ \ \ \ ax.imshow(im,\ transform=ax.transAxes,\ aspect=2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01637}01637\ \ \ \ \ \textcolor{keyword}{assert}\ ax.get\_aspect()\ ==\ 2}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01638}01638\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01639}01639\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01640}01640\ \textcolor{preprocessor}{@image\_comparison}(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01641}01641\ \ \ \ \ [\textcolor{stringliteral}{'downsampling.png'}],\ style=\textcolor{stringliteral}{'mpl20'},\ remove\_text=\textcolor{keyword}{True},\ tol=0.09)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01642}01642\ \textcolor{keyword}{def\ }test\_downsampling():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01643}01643\ \ \ \ \ N\ =\ 450}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01644}01644\ \ \ \ \ x\ =\ np.arange(N)\ /\ N\ -\/\ 0.5}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01645}01645\ \ \ \ \ y\ =\ np.arange(N)\ /\ N\ -\/\ 0.5}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01646}01646\ \ \ \ \ aa\ =\ np.ones((N,\ N))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01647}01647\ \ \ \ \ aa[::2,\ :]\ =\ -\/1}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01648}01648\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01649}01649\ \ \ \ \ X,\ Y\ =\ np.meshgrid(x,\ y)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01650}01650\ \ \ \ \ R\ =\ np.sqrt(X**2\ +\ Y**2)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01651}01651\ \ \ \ \ f0\ =\ 5}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01652}01652\ \ \ \ \ k\ =\ 100}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01653}01653\ \ \ \ \ a\ =\ np.sin(np.pi\ *\ 2\ *\ (f0\ *\ R\ +\ k\ *\ R**2\ /\ 2))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01654}01654\ \ \ \ \ \textcolor{comment}{\#\ make\ the\ left\ hand\ side\ of\ this}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01655}01655\ \ \ \ \ a[:int(N\ /\ 2),\ :][R[:int(N\ /\ 2),\ :]\ <\ 0.4]\ =\ -\/1}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01656}01656\ \ \ \ \ a[:int(N\ /\ 2),\ :][R[:int(N\ /\ 2),\ :]\ <\ 0.3]\ =\ 1}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01657}01657\ \ \ \ \ aa[:,\ int(N\ /\ 3):]\ =\ a[:,\ int(N\ /\ 3):]}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01658}01658\ \ \ \ \ a\ =\ aa}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01659}01659\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01660}01660\ \ \ \ \ fig,\ axs\ =\ plt.subplots(2,\ 3,\ figsize=(7,\ 6),\ layout=\textcolor{stringliteral}{'compressed'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01661}01661\ \ \ \ \ axs[0,\ 0].imshow(a,\ interpolation=\textcolor{stringliteral}{'nearest'},\ interpolation\_stage=\textcolor{stringliteral}{'rgba'},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01662}01662\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cmap=\textcolor{stringliteral}{'RdBu\_r'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01663}01663\ \ \ \ \ axs[0,\ 0].set\_xlim(125,\ 175)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01664}01664\ \ \ \ \ axs[0,\ 0].set\_ylim(250,\ 200)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01665}01665\ \ \ \ \ axs[0,\ 0].set\_title(\textcolor{stringliteral}{'Zoom'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01666}01666\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01667}01667\ \ \ \ \ \textcolor{keywordflow}{for}\ ax,\ interp,\ space\ \textcolor{keywordflow}{in}\ zip(axs.flat[1:],\ [\textcolor{stringliteral}{'nearest'},\ \textcolor{stringliteral}{'nearest'},\ \textcolor{stringliteral}{'hanning'},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01668}01668\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'hanning'},\ \textcolor{stringliteral}{'auto'}],}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01669}01669\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{'data'},\ \textcolor{stringliteral}{'rgba'},\ \textcolor{stringliteral}{'data'},\ \textcolor{stringliteral}{'rgba'},\ \textcolor{stringliteral}{'auto'}]):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01670}01670\ \ \ \ \ \ \ \ \ ax.imshow(a,\ interpolation=interp,\ interpolation\_stage=space,}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01671}01671\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cmap=\textcolor{stringliteral}{'RdBu\_r'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01672}01672\ \ \ \ \ \ \ \ \ ax.set\_title(f\textcolor{stringliteral}{"{}interpolation='\{interp\}'\(\backslash\)nspace='\{space\}'"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01673}01673\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01674}01674\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01675}01675\ \textcolor{preprocessor}{@image\_comparison}(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01676}01676\ \ \ \ \ [\textcolor{stringliteral}{'downsampling\_speckle.png'}],\ style=\textcolor{stringliteral}{'mpl20'},\ remove\_text=\textcolor{keyword}{True},\ tol=0.09)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01677}01677\ \textcolor{keyword}{def\ }test\_downsampling\_speckle():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01678}01678\ \ \ \ \ fig,\ axs\ =\ plt.subplots(1,\ 2,\ figsize=(5,\ 2.7),\ sharex=\textcolor{keyword}{True},\ sharey=\textcolor{keyword}{True},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01679}01679\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ layout=\textcolor{stringliteral}{"{}compressed"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01680}01680\ \ \ \ \ axs\ =\ axs.flatten()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01681}01681\ \ \ \ \ img\ =\ ((np.arange(1024).reshape(-\/1,\ 1)\ *\ np.ones(720))\ //\ 50).T}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01682}01682\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01683}01683\ \ \ \ \ cm\ =\ plt.get\_cmap(\textcolor{stringliteral}{"{}viridis"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01684}01684\ \ \ \ \ cm.set\_over(\textcolor{stringliteral}{"{}m"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01685}01685\ \ \ \ \ norm\ =\ colors.LogNorm(vmin=3,\ vmax=11)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01686}01686\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01687}01687\ \ \ \ \ \textcolor{comment}{\#\ old\ default\ cannot\ be\ tested\ because\ it\ creates\ over/under\ speckles}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01688}01688\ \ \ \ \ \textcolor{comment}{\#\ in\ the\ following\ that\ are\ machine\ dependent.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01689}01689\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01690}01690\ \ \ \ \ axs[0].set\_title(\textcolor{stringliteral}{"{}interpolation='auto',\ stage='rgba'"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01691}01691\ \ \ \ \ axs[0].imshow(np.triu(img),\ cmap=cm,\ norm=norm,\ interpolation\_stage=\textcolor{stringliteral}{'rgba'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01692}01692\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01693}01693\ \ \ \ \ \textcolor{comment}{\#\ Should\ be\ same\ as\ previous}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01694}01694\ \ \ \ \ axs[1].set\_title(\textcolor{stringliteral}{"{}interpolation='auto',\ stage='auto'"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01695}01695\ \ \ \ \ axs[1].imshow(np.triu(img),\ cmap=cm,\ norm=norm)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01696}01696\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01697}01697\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01698}01698\ \textcolor{preprocessor}{@image\_comparison}(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01699}01699\ \ \ \ \ [\textcolor{stringliteral}{'upsampling.png'}],\ style=\textcolor{stringliteral}{'mpl20'},\ remove\_text=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01700}01700\ \textcolor{keyword}{def\ }test\_upsampling():}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01701}01701\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01702}01702\ \ \ \ \ np.random.seed(19680801+9)\ \ \textcolor{comment}{\#\ need\ this\ seed\ to\ get\ yellow\ next\ to\ blue}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01703}01703\ \ \ \ \ a\ =\ np.random.rand(4,\ 4)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01704}01704\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01705}01705\ \ \ \ \ fig,\ axs\ =\ plt.subplots(1,\ 3,\ figsize=(6.5,\ 3),\ layout=\textcolor{stringliteral}{'compressed'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01706}01706\ \ \ \ \ im\ =\ axs[0].imshow(a,\ cmap=\textcolor{stringliteral}{'viridis'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01707}01707\ \ \ \ \ axs[0].set\_title(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01708}01708\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}interpolation='auto'\(\backslash\)nstage='antialaised'\(\backslash\)n(default\ for\ upsampling)"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01709}01709\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01710}01710\ \ \ \ \ \textcolor{comment}{\#\ probably\ what\ people\ want:}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01711}01711\ \ \ \ \ axs[1].imshow(a,\ cmap=\textcolor{stringliteral}{'viridis'},\ interpolation=\textcolor{stringliteral}{'sinc'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01712}01712\ \ \ \ \ axs[1].set\_title(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01713}01713\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}interpolation='sinc'\(\backslash\)nstage='auto'\(\backslash\)n(default\ for\ upsampling)"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01714}01714\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01715}01715\ \ \ \ \ \textcolor{comment}{\#\ probably\ not\ what\ people\ want:}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01716}01716\ \ \ \ \ axs[2].imshow(a,\ cmap=\textcolor{stringliteral}{'viridis'},\ interpolation=\textcolor{stringliteral}{'sinc'},\ interpolation\_stage=\textcolor{stringliteral}{'rgba'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01717}01717\ \ \ \ \ axs[2].set\_title(\textcolor{stringliteral}{"{}interpolation='sinc'\(\backslash\)nstage='rgba'"{}})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01718}01718\ \ \ \ \ fig.colorbar(im,\ ax=axs,\ shrink=0.7,\ extend=\textcolor{stringliteral}{'both'})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01719}01719\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01720}01720\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01721}01721\ \textcolor{preprocessor}{@pytest.mark.parametrize}(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01722}01722\ \ \ \ \ \textcolor{stringliteral}{'dtype'},}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01723}01723\ \ \ \ \ (\textcolor{stringliteral}{'float64'},\ \textcolor{stringliteral}{'float32'},\ \textcolor{stringliteral}{'int16'},\ \textcolor{stringliteral}{'uint16'},\ \textcolor{stringliteral}{'int8'},\ \textcolor{stringliteral}{'uint8'}),}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01724}01724\ )}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01725}01725\ \textcolor{preprocessor}{@pytest.mark.parametrize('ndim',\ (2,\ 3)})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01726}01726\ \textcolor{keyword}{def\ }test\_resample\_dtypes(dtype,\ ndim):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01727}01727\ \ \ \ \ \textcolor{comment}{\#\ Issue\ 28448,\ incorrect\ dtype\ comparisons\ in\ C++\ image\_resample\ can\ raise}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01728}01728\ \ \ \ \ \textcolor{comment}{\#\ ValueError:\ arrays\ must\ be\ of\ dtype\ byte,\ short,\ float32\ or\ float64}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01729}01729\ \ \ \ \ rng\ =\ np.random.default\_rng(4181)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01730}01730\ \ \ \ \ shape\ =\ (2,\ 2)\ \textcolor{keywordflow}{if}\ ndim\ ==\ 2\ \textcolor{keywordflow}{else}\ (2,\ 2,\ 3)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01731}01731\ \ \ \ \ data\ =\ rng.uniform(size=shape).astype(np.dtype(dtype,\ copy=\textcolor{keyword}{True}))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01732}01732\ \ \ \ \ fig,\ ax\ =\ plt.subplots()}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01733}01733\ \ \ \ \ axes\_image\ =\ ax.imshow(data)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01734}01734\ \ \ \ \ \textcolor{comment}{\#\ Before\ fix\ the\ following\ raises\ ValueError\ for\ some\ dtypes.}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01735}01735\ \ \ \ \ axes\_image.make\_image(\textcolor{keywordtype}{None})[0]}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01736}01736\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01737}01737\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01738}01738\ \textcolor{preprocessor}{@pytest.mark.parametrize('intp\_stage',\ ('data',\ 'rgba')})}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01739}01739\ \textcolor{preprocessor}{@check\_figures\_equal()}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01740}01740\ \textcolor{keyword}{def\ }test\_interpolation\_stage\_rgba\_respects\_alpha\_param(fig\_test,\ fig\_ref,\ intp\_stage):}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01741}01741\ \ \ \ \ axs\_tst\ =\ fig\_test.subplots(2,\ 3)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01742}01742\ \ \ \ \ axs\_ref\ =\ fig\_ref.subplots(2,\ 3)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01743}01743\ \ \ \ \ ny,\ nx\ =\ 3,\ 3}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01744}01744\ \ \ \ \ scalar\_alpha\ =\ 0.5}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01745}01745\ \ \ \ \ array\_alpha\ =\ np.random.rand(ny,\ nx)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01746}01746\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01747}01747\ \ \ \ \ \textcolor{comment}{\#\ When\ the\ image\ does\ not\ have\ an\ alpha\ channel,\ alpha\ should\ be\ specified}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01748}01748\ \ \ \ \ \textcolor{comment}{\#\ by\ the\ user\ or\ default\ to\ 1.0}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01749}01749\ \ \ \ \ im\_rgb\ =\ np.random.rand(ny,\ nx,\ 3)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01750}01750\ \ \ \ \ im\_concat\_default\_a\ =\ np.ones((ny,\ nx,\ 1))\ \ \textcolor{comment}{\#\ alpha\ defaults\ to\ 1.0}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01751}01751\ \ \ \ \ im\_rgba\ =\ np.concatenate(\ \ \textcolor{comment}{\#\ combine\ rgb\ channels\ with\ array\ alpha}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01752}01752\ \ \ \ \ \ \ \ \ (im\_rgb,\ array\_alpha.reshape((ny,\ nx,\ 1))),\ axis=-\/1}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01753}01753\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01754}01754\ \ \ \ \ axs\_tst[0][0].imshow(im\_rgb)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01755}01755\ \ \ \ \ axs\_ref[0][0].imshow(np.concatenate((im\_rgb,\ im\_concat\_default\_a),\ axis=-\/1))}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01756}01756\ \ \ \ \ axs\_tst[0][1].imshow(im\_rgb,\ interpolation\_stage=intp\_stage,\ alpha=scalar\_alpha)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01757}01757\ \ \ \ \ axs\_ref[0][1].imshow(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01758}01758\ \ \ \ \ \ \ \ \ np.concatenate(\ \ \textcolor{comment}{\#\ combine\ rgb\ channels\ with\ broadcasted\ scalar\ alpha}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01759}01759\ \ \ \ \ \ \ \ \ \ \ \ \ (im\_rgb,\ scalar\_alpha\ *\ im\_concat\_default\_a),\ axis=-\/1}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01760}01760\ \ \ \ \ \ \ \ \ ),\ interpolation\_stage=intp\_stage}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01761}01761\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01762}01762\ \ \ \ \ axs\_tst[0][2].imshow(im\_rgb,\ interpolation\_stage=intp\_stage,\ alpha=array\_alpha)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01763}01763\ \ \ \ \ axs\_ref[0][2].imshow(im\_rgba,\ interpolation\_stage=intp\_stage)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01764}01764\ }
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01765}01765\ \ \ \ \ \textcolor{comment}{\#\ When\ the\ image\ already\ has\ an\ alpha\ channel,\ multiply\ it\ by\ the}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01766}01766\ \ \ \ \ \textcolor{comment}{\#\ scalar\ alpha\ param,\ or\ replace\ it\ by\ the\ array\ alpha\ param}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01767}01767\ \ \ \ \ axs\_tst[1][0].imshow(im\_rgba)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01768}01768\ \ \ \ \ axs\_ref[1][0].imshow(im\_rgb,\ alpha=array\_alpha)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01769}01769\ \ \ \ \ axs\_tst[1][1].imshow(im\_rgba,\ interpolation\_stage=intp\_stage,\ alpha=scalar\_alpha)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01770}01770\ \ \ \ \ axs\_ref[1][1].imshow(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01771}01771\ \ \ \ \ \ \ \ \ np.concatenate(\ \ \textcolor{comment}{\#\ combine\ rgb\ channels\ with\ scaled\ array\ alpha}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01772}01772\ \ \ \ \ \ \ \ \ \ \ \ \ (im\_rgb,\ scalar\_alpha\ *\ array\_alpha.reshape((ny,\ nx,\ 1))),\ axis=-\/1}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01773}01773\ \ \ \ \ \ \ \ \ ),\ interpolation\_stage=intp\_stage}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01774}01774\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01775}01775\ \ \ \ \ new\_array\_alpha\ =\ np.random.rand(ny,\ nx)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01776}01776\ \ \ \ \ axs\_tst[1][2].imshow(im\_rgba,\ interpolation\_stage=intp\_stage,\ alpha=new\_array\_alpha)}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01777}01777\ \ \ \ \ axs\_ref[1][2].imshow(}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01778}01778\ \ \ \ \ \ \ \ \ np.concatenate(\ \ \textcolor{comment}{\#\ combine\ rgb\ channels\ with\ new\ array\ alpha}}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01779}01779\ \ \ \ \ \ \ \ \ \ \ \ \ (im\_rgb,\ new\_array\_alpha.reshape((ny,\ nx,\ 1))),\ axis=-\/1}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01780}01780\ \ \ \ \ \ \ \ \ ),\ interpolation\_stage=intp\_stage}
\DoxyCodeLine{\Hypertarget{matplotlib_2tests_2test__image_8py_source_l01781}01781\ \ \ \ \ )}

\end{DoxyCode}
