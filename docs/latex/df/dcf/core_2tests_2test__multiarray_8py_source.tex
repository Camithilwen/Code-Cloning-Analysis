\doxysection{test\+\_\+multiarray.\+py}
\hypertarget{core_2tests_2test__multiarray_8py_source}{}\label{core_2tests_2test__multiarray_8py_source}\index{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/numpy/core/tests/test\_multiarray.py@{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/numpy/core/tests/test\_multiarray.py}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00001}\mbox{\hyperlink{namespacenumpy_1_1core_1_1tests_1_1test__multiarray}{00001}}\ \textcolor{keyword}{from}\ \_\_future\_\_\ \textcolor{keyword}{import}\ annotations}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00003}00003\ \textcolor{keyword}{import}\ \mbox{\hyperlink{namespacecollections_1_1abc}{collections.abc}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00004}00004\ \textcolor{keyword}{import}\ tempfile}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00005}00005\ \textcolor{keyword}{import}\ sys}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00006}00006\ \textcolor{keyword}{import}\ warnings}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00007}00007\ \textcolor{keyword}{import}\ operator}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00008}00008\ \textcolor{keyword}{import}\ io}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00009}00009\ \textcolor{keyword}{import}\ itertools}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00010}00010\ \textcolor{keyword}{import}\ functools}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00011}00011\ \textcolor{keyword}{import}\ ctypes}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00012}00012\ \textcolor{keyword}{import}\ os}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00013}00013\ \textcolor{keyword}{import}\ gc}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00014}00014\ \textcolor{keyword}{import}\ re}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00015}00015\ \textcolor{keyword}{import}\ weakref}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00016}00016\ \textcolor{keyword}{import}\ pytest}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00017}00017\ \textcolor{keyword}{from}\ contextlib\ \textcolor{keyword}{import}\ contextmanager}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00019}00019\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacenumpy_1_1compat}{numpy.compat}}\ \textcolor{keyword}{import}\ pickle}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00020}00020\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00021}00021\ \textcolor{keyword}{import}\ pathlib}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00022}00022\ \textcolor{keyword}{import}\ builtins}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00023}00023\ \textcolor{keyword}{from}\ decimal\ \textcolor{keyword}{import}\ Decimal}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00024}00024\ \textcolor{keyword}{import}\ mmap}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00025}00025\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00026}00026\ \textcolor{keyword}{import}\ numpy\ \textcolor{keyword}{as}\ np}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00027}00027\ \textcolor{keyword}{import}\ numpy.core.\_multiarray\_tests\ \textcolor{keyword}{as}\ \_multiarray\_tests}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00028}00028\ \textcolor{keyword}{from}\ numpy.core.\_rational\_tests\ \textcolor{keyword}{import}\ rational}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00029}00029\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacenumpy_1_1testing}{numpy.testing}}\ \textcolor{keyword}{import}\ (}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00030}00030\ \ \ \ \ assert\_,\ assert\_raises,\ assert\_warns,\ assert\_equal,\ assert\_almost\_equal,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00031}00031\ \ \ \ \ assert\_array\_equal,\ assert\_raises\_regex,\ assert\_array\_almost\_equal,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00032}00032\ \ \ \ \ assert\_allclose,\ IS\_PYPY,\ IS\_PYSTON,\ HAS\_REFCOUNT,\ assert\_array\_less,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00033}00033\ \ \ \ \ runstring,\ temppath,\ suppress\_warnings,\ break\_cycles,\ \_SUPPORTS\_SVE,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00034}00034\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00035}00035\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacenumpy_1_1testing_1_1__private_1_1utils}{numpy.testing.\_private.utils}}\ \textcolor{keyword}{import}\ requires\_memory,\ \_no\_tracing}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00036}00036\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacenumpy_1_1core_1_1tests_1_1__locales}{numpy.core.tests.\_locales}}\ \textcolor{keyword}{import}\ CommaDecimalPointLocale}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00037}00037\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacenumpy_1_1lib_1_1recfunctions}{numpy.lib.recfunctions}}\ \textcolor{keyword}{import}\ repack\_fields}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00038}00038\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacenumpy_1_1core_1_1multiarray}{numpy.core.multiarray}}\ \textcolor{keyword}{import}\ \_get\_ndarray\_c\_version}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00039}00039\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00040}00040\ \textcolor{comment}{\#\ Need\ to\ test\ an\ object\ that\ does\ not\ fully\ implement\ math\ interface}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00041}00041\ \textcolor{keyword}{from}\ datetime\ \textcolor{keyword}{import}\ timedelta,\ datetime}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00043}00043\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00044}00044\ \textcolor{keyword}{def\ }assert\_arg\_sorted(arr,\ arg):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00045}00045\ \ \ \ \ \textcolor{comment}{\#\ resulting\ array\ should\ be\ sorted\ and\ arg\ values\ should\ be\ unique}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00046}00046\ \ \ \ \ assert\_equal(arr[arg],\ np.sort(arr))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00047}00047\ \ \ \ \ assert\_equal(np.sort(arg),\ np.arange(len(arg)))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00048}00048\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00049}00049\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00050}\mbox{\hyperlink{namespacenumpy_1_1core_1_1tests_1_1test__multiarray_a1b319b21145eee245865f85040bc64ab}{00050}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacenumpy_1_1core_1_1tests_1_1test__multiarray_a1b319b21145eee245865f85040bc64ab}{\_aligned\_zeros}}(shape,\ dtype=float,\ order="{}C"{},\ align=None):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00051}00051\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00052}00052\ \textcolor{stringliteral}{\ \ \ \ Allocate\ a\ new\ ndarray\ with\ aligned\ memory.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00053}00053\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00054}00054\ \textcolor{stringliteral}{\ \ \ \ The\ ndarray\ is\ guaranteed\ *not*\ aligned\ to\ twice\ the\ requested\ alignment.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00055}00055\ \textcolor{stringliteral}{\ \ \ \ Eg,\ if\ align=4,\ guarantees\ it\ is\ not\ aligned\ to\ 8.\ If\ align=None\ uses}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00056}00056\ \textcolor{stringliteral}{\ \ \ \ dtype.alignment."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00057}00057\ \ \ \ \ dtype\ =\ np.dtype(dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00058}00058\ \ \ \ \ \textcolor{keywordflow}{if}\ dtype\ ==\ np.dtype(object):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00059}00059\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Can't\ do\ this,\ fall\ back\ to\ standard\ allocation\ (which}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00060}00060\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ should\ always\ be\ sufficiently\ aligned)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00061}00061\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ align\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00062}00062\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classValueError}{ValueError}}(\textcolor{stringliteral}{"{}object\ array\ alignment\ not\ supported"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00063}00063\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ np.zeros(shape,\ dtype=dtype,\ order=order)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00064}00064\ \ \ \ \ \textcolor{keywordflow}{if}\ align\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00065}00065\ \ \ \ \ \ \ \ \ align\ =\ dtype.alignment}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00066}00066\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ hasattr(shape,\ \textcolor{stringliteral}{'\_\_len\_\_'}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00067}00067\ \ \ \ \ \ \ \ \ shape\ =\ (shape,)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00068}00068\ \ \ \ \ size\ =\ functools.reduce(operator.mul,\ shape)\ *\ dtype.itemsize}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00069}00069\ \ \ \ \ buf\ =\ np.empty(size\ +\ 2*align\ +\ 1,\ np.uint8)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00070}00070\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00071}00071\ \ \ \ \ ptr\ =\ buf.\_\_array\_interface\_\_[\textcolor{stringliteral}{'data'}][0]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00072}00072\ \ \ \ \ offset\ =\ ptr\ \%\ align}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00073}00073\ \ \ \ \ \textcolor{keywordflow}{if}\ offset\ !=\ 0:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00074}00074\ \ \ \ \ \ \ \ \ offset\ =\ align\ -\/\ offset}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00075}00075\ \ \ \ \ \textcolor{keywordflow}{if}\ (ptr\ \%\ (2*align))\ ==\ 0:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00076}00076\ \ \ \ \ \ \ \ \ offset\ +=\ align}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00077}00077\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00078}00078\ \ \ \ \ \textcolor{comment}{\#\ Note:\ slices\ producing\ 0-\/size\ arrays\ do\ not\ necessarily\ change}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00079}00079\ \ \ \ \ \textcolor{comment}{\#\ data\ pointer\ -\/-\/-\/\ so\ we\ use\ and\ allocate\ size+1}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00080}00080\ \ \ \ \ buf\ =\ buf[offset:offset+size+1][:-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00081}00081\ \ \ \ \ buf.fill(0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00082}00082\ \ \ \ \ data\ =\ np.ndarray(shape,\ dtype,\ buf,\ order=order)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00083}00083\ \ \ \ \ \textcolor{keywordflow}{return}\ data}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00084}00084\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00085}00085\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00086}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFlags}{00086}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFlags}{TestFlags}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00087}00087\ \ \ \ \ \textcolor{keyword}{def\ }setup\_method(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00088}00088\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFlags_ac97c8c3455ce470b5ad037ea5049da77}{a}}\ =\ np.arange(10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00089}00089\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00090}00090\ \ \ \ \ \textcolor{keyword}{def\ }test\_writeable(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00091}00091\ \ \ \ \ \ \ \ \ mydict\ =\ locals()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00092}00092\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFlags_ac97c8c3455ce470b5ad037ea5049da77}{a}}.flags.writeable\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00093}00093\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ runstring,\ \textcolor{stringliteral}{'self.a[0]\ =\ 3'},\ mydict)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00094}00094\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ runstring,\ \textcolor{stringliteral}{'self.a[0:1].itemset(3)'},\ mydict)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00095}00095\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFlags_ac97c8c3455ce470b5ad037ea5049da77}{a}}.flags.writeable\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00096}00096\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFlags_ac97c8c3455ce470b5ad037ea5049da77}{a}}[0]\ =\ 5}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00097}00097\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFlags_ac97c8c3455ce470b5ad037ea5049da77}{a}}[0]\ =\ 0}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00098}00098\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00099}00099\ \ \ \ \ \textcolor{keyword}{def\ }test\_writeable\_any\_base(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00100}00100\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Ensure\ that\ any\ base\ being\ writeable\ is\ sufficient\ to\ change\ flag;}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00101}00101\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ this\ is\ especially\ interesting\ for\ arrays\ from\ an\ array\ interface.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00102}00102\ \ \ \ \ \ \ \ \ arr\ =\ np.arange(10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00103}00103\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00104}00104\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }subclass(np.ndarray):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00105}00105\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00106}00106\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00107}00107\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Create\ subclass\ so\ base\ will\ not\ be\ collapsed,\ this\ is\ OK\ to\ change}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00108}00108\ \ \ \ \ \ \ \ \ view1\ =\ arr.view(subclass)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00109}00109\ \ \ \ \ \ \ \ \ view2\ =\ view1[...]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00110}00110\ \ \ \ \ \ \ \ \ arr.flags.writeable\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00111}00111\ \ \ \ \ \ \ \ \ view2.flags.writeable\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00112}00112\ \ \ \ \ \ \ \ \ view2.flags.writeable\ =\ \textcolor{keyword}{True}\ \ \textcolor{comment}{\#\ Can\ be\ set\ to\ True\ again.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00113}00113\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00114}00114\ \ \ \ \ \ \ \ \ arr\ =\ np.arange(10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00115}00115\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00116}00116\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }frominterface:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00117}00117\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self,\ arr):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00118}00118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.arr\ =\ arr}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00119}00119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\_\_array\_interface\_\_\ =\ arr.\_\_array\_interface\_\_}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00120}00120\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00121}00121\ \ \ \ \ \ \ \ \ view1\ =\ np.asarray(frominterface)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00122}00122\ \ \ \ \ \ \ \ \ view2\ =\ view1[...]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00123}00123\ \ \ \ \ \ \ \ \ view2.flags.writeable\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00124}00124\ \ \ \ \ \ \ \ \ view2.flags.writeable\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00125}00125\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00126}00126\ \ \ \ \ \ \ \ \ view1.flags.writeable\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00127}00127\ \ \ \ \ \ \ \ \ view2.flags.writeable\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00128}00128\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_raises(ValueError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00129}00129\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Must\ assume\ not\ writeable,\ since\ only\ base\ is\ not:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00130}00130\ \ \ \ \ \ \ \ \ \ \ \ \ view2.flags.writeable\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00131}00131\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00132}00132\ \ \ \ \ \textcolor{keyword}{def\ }test\_writeable\_from\_readonly(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00133}00133\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/9440\ -\/\ make\ sure\ fromstring,\ from\ buffer\ on\ readonly\ buffers}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00134}00134\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ set\ writeable\ False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00135}00135\ \ \ \ \ \ \ \ \ data\ =\ b\textcolor{stringliteral}{'\(\backslash\)x00'}\ *\ 100}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00136}00136\ \ \ \ \ \ \ \ \ vals\ =\ np.frombuffer(data,\ \textcolor{stringliteral}{'B'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00137}00137\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ vals.setflags,\ write=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00138}00138\ \ \ \ \ \ \ \ \ types\ =\ np.dtype(\ [(\textcolor{stringliteral}{'vals'},\ \textcolor{stringliteral}{'u1'}),\ (\textcolor{stringliteral}{'res3'},\ \textcolor{stringliteral}{'S4'})]\ )}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00139}00139\ \ \ \ \ \ \ \ \ values\ =\ np.core.records.fromstring(data,\ types)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00140}00140\ \ \ \ \ \ \ \ \ vals\ =\ values[\textcolor{stringliteral}{'vals'}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00141}00141\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ vals.setflags,\ write=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00142}00142\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00143}00143\ \ \ \ \ \textcolor{keyword}{def\ }test\_writeable\_from\_buffer(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00144}00144\ \ \ \ \ \ \ \ \ data\ =\ bytearray(b\textcolor{stringliteral}{'\(\backslash\)x00'}\ *\ 100)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00145}00145\ \ \ \ \ \ \ \ \ vals\ =\ np.frombuffer(data,\ \textcolor{stringliteral}{'B'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00146}00146\ \ \ \ \ \ \ \ \ assert\_(vals.flags.writeable)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00147}00147\ \ \ \ \ \ \ \ \ vals.setflags(write=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00148}00148\ \ \ \ \ \ \ \ \ assert\_(vals.flags.writeable\ \textcolor{keywordflow}{is}\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00149}00149\ \ \ \ \ \ \ \ \ vals.setflags(write=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00150}00150\ \ \ \ \ \ \ \ \ assert\_(vals.flags.writeable)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00151}00151\ \ \ \ \ \ \ \ \ types\ =\ np.dtype(\ [(\textcolor{stringliteral}{'vals'},\ \textcolor{stringliteral}{'u1'}),\ (\textcolor{stringliteral}{'res3'},\ \textcolor{stringliteral}{'S4'})]\ )}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00152}00152\ \ \ \ \ \ \ \ \ values\ =\ np.core.records.fromstring(data,\ types)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00153}00153\ \ \ \ \ \ \ \ \ vals\ =\ values[\textcolor{stringliteral}{'vals'}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00154}00154\ \ \ \ \ \ \ \ \ assert\_(vals.flags.writeable)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00155}00155\ \ \ \ \ \ \ \ \ vals.setflags(write=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00156}00156\ \ \ \ \ \ \ \ \ assert\_(vals.flags.writeable\ \textcolor{keywordflow}{is}\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00157}00157\ \ \ \ \ \ \ \ \ vals.setflags(write=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00158}00158\ \ \ \ \ \ \ \ \ assert\_(vals.flags.writeable)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00159}00159\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00160}00160\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.skipif(IS\_PYPY,\ reason="{}PyPy\ always\ copies"{})}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00161}00161\ \ \ \ \ \textcolor{keyword}{def\ }test\_writeable\_pickle(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00162}00162\ \ \ \ \ \ \ \ \ \textcolor{keyword}{import}\ pickle}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00163}00163\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Small\ arrays\ will\ be\ copied\ without\ setting\ base.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00164}00164\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ See\ condition\ for\ using\ PyArray\_SetBaseObject\ in}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00165}00165\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ array\_setstate.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00166}00166\ \ \ \ \ \ \ \ \ a\ =\ np.arange(1000)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00167}00167\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ v\ \textcolor{keywordflow}{in}\ range(pickle.HIGHEST\_PROTOCOL):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00168}00168\ \ \ \ \ \ \ \ \ \ \ \ \ vals\ =\ pickle.loads(pickle.dumps(a,\ v))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00169}00169\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(vals.flags.writeable)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00170}00170\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(isinstance(vals.base,\ bytes))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00171}00171\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00172}00172\ \ \ \ \ \textcolor{keyword}{def\ }test\_writeable\_from\_c\_data(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00173}00173\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ that\ the\ writeable\ flag\ can\ be\ changed\ for\ an\ array\ wrapping}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00174}00174\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ low\ level\ C-\/data,\ but\ not\ owning\ its\ data.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00175}00175\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Also\ see\ that\ this\ is\ deprecated\ to\ change\ from\ python.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00176}00176\ \ \ \ \ \ \ \ \ \textcolor{keyword}{from}\ numpy.core.\_multiarray\_tests\ \textcolor{keyword}{import}\ get\_c\_wrapping\_array}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00177}00177\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00178}00178\ \ \ \ \ \ \ \ \ arr\_writeable\ =\ get\_c\_wrapping\_array(\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00179}00179\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ \textcolor{keywordflow}{not}\ arr\_writeable.flags.owndata}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00180}00180\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ arr\_writeable.flags.writeable}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00181}00181\ \ \ \ \ \ \ \ \ view\ =\ arr\_writeable[...]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00182}00182\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00183}00183\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Toggling\ the\ writeable\ flag\ works\ on\ the\ view:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00184}00184\ \ \ \ \ \ \ \ \ view.flags.writeable\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00185}00185\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ \textcolor{keywordflow}{not}\ view.flags.writeable}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00186}00186\ \ \ \ \ \ \ \ \ view.flags.writeable\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00187}00187\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ view.flags.writeable}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00188}00188\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Flag\ can\ be\ unset\ on\ the\ arr\_writeable:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00189}00189\ \ \ \ \ \ \ \ \ arr\_writeable.flags.writeable\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00190}00190\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00191}00191\ \ \ \ \ \ \ \ \ arr\_readonly\ =\ get\_c\_wrapping\_array(\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00192}00192\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ \textcolor{keywordflow}{not}\ arr\_readonly.flags.owndata}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00193}00193\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ \textcolor{keywordflow}{not}\ arr\_readonly.flags.writeable}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00194}00194\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00195}00195\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ arr\ \textcolor{keywordflow}{in}\ [arr\_writeable,\ arr\_readonly]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00196}00196\ \ \ \ \ \ \ \ \ \ \ \ \ view\ =\ arr[...]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00197}00197\ \ \ \ \ \ \ \ \ \ \ \ \ view.flags.writeable\ =\ \textcolor{keyword}{False}\ \ \textcolor{comment}{\#\ make\ sure\ it\ is\ readonly}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00198}00198\ \ \ \ \ \ \ \ \ \ \ \ \ arr.flags.writeable\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00199}00199\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ \textcolor{keywordflow}{not}\ arr.flags.writeable}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00200}00200\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00201}00201\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_raises(ValueError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00202}00202\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ view.flags.writeable\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00203}00203\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00204}00204\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ warnings.catch\_warnings():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00205}00205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ warnings.simplefilter(\textcolor{stringliteral}{"{}error"{}},\ DeprecationWarning)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00206}00206\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_raises(DeprecationWarning):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00207}00207\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ arr.flags.writeable\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00208}00208\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00209}00209\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_warns(DeprecationWarning):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00210}00210\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ arr.flags.writeable\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00211}00211\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00212}00212\ \ \ \ \ \textcolor{keyword}{def\ }test\_warnonwrite(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00213}00213\ \ \ \ \ \ \ \ \ a\ =\ np.arange(10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00214}00214\ \ \ \ \ \ \ \ \ a.flags.\_warn\_on\_write\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00215}00215\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ warnings.catch\_warnings(record=\textcolor{keyword}{True})\ \textcolor{keyword}{as}\ w:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00216}00216\ \ \ \ \ \ \ \ \ \ \ \ \ warnings.filterwarnings(\textcolor{stringliteral}{'always'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00217}00217\ \ \ \ \ \ \ \ \ \ \ \ \ a[1]\ =\ 10}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00218}00218\ \ \ \ \ \ \ \ \ \ \ \ \ a[2]\ =\ 10}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00219}00219\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ only\ warn\ once}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00220}00220\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(len(w)\ ==\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00221}00221\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00222}00222\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}([\textcolor{stringliteral}{"{}flag"{}},\ \textcolor{stringliteral}{"{}flag\_value"{}},\ \textcolor{stringliteral}{"{}writeable"{}}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00223}00223\ \ \ \ \ \ \ \ \ \ \ \ \ [(\textcolor{stringliteral}{"{}writeable"{}},\ \textcolor{keyword}{True},\ \textcolor{keyword}{True}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00224}00224\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Delete\ \_warn\_on\_write\ after\ deprecation\ and\ simplify}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00225}00225\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ the\ parameterization:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00226}00226\ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}\_warn\_on\_write"{}},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00227}00227\ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}writeable"{}},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00228}00228\ \ \ \ \ \textcolor{keyword}{def\ }test\_readonly\_flag\_protocols(self,\ flag,\ flag\_value,\ writeable):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00229}00229\ \ \ \ \ \ \ \ \ a\ =\ np.arange(10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00230}00230\ \ \ \ \ \ \ \ \ setattr(a.flags,\ flag,\ flag\_value)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00231}00231\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00232}00232\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }MyArr():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00233}00233\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_array\_struct\_\_\ =\ a.\_\_array\_struct\_\_}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00234}00234\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00235}00235\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ memoryview(a).readonly\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ writeable}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00236}00236\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ a.\_\_array\_interface\_\_[\textcolor{stringliteral}{'data'}][1]\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ writeable}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00237}00237\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ np.asarray(MyArr()).flags.writeable\ \textcolor{keywordflow}{is}\ writeable}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00238}00238\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00239}00239\ \ \ \ \ \textcolor{keyword}{def\ }test\_otherflags(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00240}00240\ \ \ \ \ \ \ \ \ assert\_equal(self.a.flags.carray,\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00241}00241\ \ \ \ \ \ \ \ \ assert\_equal(self.a.flags[\textcolor{stringliteral}{'C'}],\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00242}00242\ \ \ \ \ \ \ \ \ assert\_equal(self.a.flags.farray,\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00243}00243\ \ \ \ \ \ \ \ \ assert\_equal(self.a.flags.behaved,\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00244}00244\ \ \ \ \ \ \ \ \ assert\_equal(self.a.flags.fnc,\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00245}00245\ \ \ \ \ \ \ \ \ assert\_equal(self.a.flags.forc,\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00246}00246\ \ \ \ \ \ \ \ \ assert\_equal(self.a.flags.owndata,\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00247}00247\ \ \ \ \ \ \ \ \ assert\_equal(self.a.flags.writeable,\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00248}00248\ \ \ \ \ \ \ \ \ assert\_equal(self.a.flags.aligned,\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00249}00249\ \ \ \ \ \ \ \ \ assert\_equal(self.a.flags.writebackifcopy,\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00250}00250\ \ \ \ \ \ \ \ \ assert\_equal(self.a.flags[\textcolor{stringliteral}{'X'}],\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00251}00251\ \ \ \ \ \ \ \ \ assert\_equal(self.a.flags[\textcolor{stringliteral}{'WRITEBACKIFCOPY'}],\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00252}00252\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00253}00253\ \ \ \ \ \textcolor{keyword}{def\ }test\_string\_align(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00254}00254\ \ \ \ \ \ \ \ \ a\ =\ np.zeros(4,\ dtype=np.dtype(\textcolor{stringliteral}{'|S4'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00255}00255\ \ \ \ \ \ \ \ \ assert\_(a.flags.aligned)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00256}00256\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ not\ power\ of\ two\ are\ accessed\ byte-\/wise\ and\ thus\ considered\ aligned}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00257}00257\ \ \ \ \ \ \ \ \ a\ =\ np.zeros(5,\ dtype=np.dtype(\textcolor{stringliteral}{'|S4'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00258}00258\ \ \ \ \ \ \ \ \ assert\_(a.flags.aligned)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00259}00259\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00260}00260\ \ \ \ \ \textcolor{keyword}{def\ }test\_void\_align(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00261}00261\ \ \ \ \ \ \ \ \ a\ =\ np.zeros(4,\ dtype=np.dtype([(\textcolor{stringliteral}{"{}a"{}},\ \textcolor{stringliteral}{"{}i4"{}}),\ (\textcolor{stringliteral}{"{}b"{}},\ \textcolor{stringliteral}{"{}i4"{}})]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00262}00262\ \ \ \ \ \ \ \ \ assert\_(a.flags.aligned)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00263}00263\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00264}00264\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00265}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestHash}{00265}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestHash}{TestHash}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00266}00266\ \ \ \ \ \textcolor{comment}{\#\ see\ \#3793}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00267}00267\ \ \ \ \ \textcolor{keyword}{def\ }test\_int(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00268}00268\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ st,\ ut,\ s\ \textcolor{keywordflow}{in}\ [(np.int8,\ np.uint8,\ 8),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00269}00269\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (np.int16,\ np.uint16,\ 16),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00270}00270\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (np.int32,\ np.uint32,\ 32),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00271}00271\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (np.int64,\ np.uint64,\ 64)]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00272}00272\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(1,\ s):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00273}00273\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(hash(st(-\/2**i)),\ hash(-\/2**i),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00274}00274\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ err\_msg=\textcolor{stringliteral}{"{}\%r:\ -\/2**\%d"{}}\ \%\ (st,\ i))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00275}00275\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(hash(st(2**(i\ -\/\ 1))),\ hash(2**(i\ -\/\ 1)),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00276}00276\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ err\_msg=\textcolor{stringliteral}{"{}\%r:\ 2**\%d"{}}\ \%\ (st,\ i\ -\/\ 1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00277}00277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(hash(st(2**i\ -\/\ 1)),\ hash(2**i\ -\/\ 1),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00278}00278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ err\_msg=\textcolor{stringliteral}{"{}\%r:\ 2**\%d\ -\/\ 1"{}}\ \%\ (st,\ i))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00279}00279\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00280}00280\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ i\ =\ \mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_aad68322cc4d4400f97a6b9db6c4e6880}{max}}(i\ -\/\ 1,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00281}00281\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(hash(ut(2**(i\ -\/\ 1))),\ hash(2**(i\ -\/\ 1)),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00282}00282\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ err\_msg=\textcolor{stringliteral}{"{}\%r:\ 2**\%d"{}}\ \%\ (ut,\ i\ -\/\ 1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00283}00283\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(hash(ut(2**i\ -\/\ 1)),\ hash(2**i\ -\/\ 1),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00284}00284\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ err\_msg=\textcolor{stringliteral}{"{}\%r:\ 2**\%d\ -\/\ 1"{}}\ \%\ (ut,\ i))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00285}00285\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00286}00286\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00287}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes}{00287}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes}{TestAttributes}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00288}00288\ \ \ \ \ \textcolor{keyword}{def\ }setup\_method(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00289}00289\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_abe8d3499b15c3939cbefb9a7067d3547}{one}}\ =\ np.arange(10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00290}00290\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_a1fdf8e9f3b76ad85113bc5f76673e1f6}{two}}\ =\ np.arange(20).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(4,\ 5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00291}00291\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_a70b3c8beb496431866a233c0bcb2e0af}{three}}\ =\ np.arange(60,\ dtype=np.float64).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,\ 5,\ 6)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00292}00292\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00293}00293\ \ \ \ \ \textcolor{keyword}{def\ }test\_attributes(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00294}00294\ \ \ \ \ \ \ \ \ assert\_equal(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_abe8d3499b15c3939cbefb9a7067d3547}{one}}.shape,\ (10,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00295}00295\ \ \ \ \ \ \ \ \ assert\_equal(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_a1fdf8e9f3b76ad85113bc5f76673e1f6}{two}}.shape,\ (4,\ 5))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00296}00296\ \ \ \ \ \ \ \ \ assert\_equal(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_a70b3c8beb496431866a233c0bcb2e0af}{three}}.shape,\ (2,\ 5,\ 6))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00297}00297\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_a70b3c8beb496431866a233c0bcb2e0af}{three}}.shape\ =\ (10,\ 3,\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00298}00298\ \ \ \ \ \ \ \ \ assert\_equal(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_a70b3c8beb496431866a233c0bcb2e0af}{three}}.shape,\ (10,\ 3,\ 2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00299}00299\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_a70b3c8beb496431866a233c0bcb2e0af}{three}}.shape\ =\ (2,\ 5,\ 6)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00300}00300\ \ \ \ \ \ \ \ \ assert\_equal(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_abe8d3499b15c3939cbefb9a7067d3547}{one}}.strides,\ (self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_abe8d3499b15c3939cbefb9a7067d3547}{one}}.itemsize,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00301}00301\ \ \ \ \ \ \ \ \ num\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_a1fdf8e9f3b76ad85113bc5f76673e1f6}{two}}.itemsize}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00302}00302\ \ \ \ \ \ \ \ \ assert\_equal(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_a1fdf8e9f3b76ad85113bc5f76673e1f6}{two}}.strides,\ (5*num,\ num))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00303}00303\ \ \ \ \ \ \ \ \ num\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_a70b3c8beb496431866a233c0bcb2e0af}{three}}.itemsize}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00304}00304\ \ \ \ \ \ \ \ \ assert\_equal(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_a70b3c8beb496431866a233c0bcb2e0af}{three}}.strides,\ (30*num,\ 6*num,\ num))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00305}00305\ \ \ \ \ \ \ \ \ assert\_equal(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_abe8d3499b15c3939cbefb9a7067d3547}{one}}.ndim,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00306}00306\ \ \ \ \ \ \ \ \ assert\_equal(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_a1fdf8e9f3b76ad85113bc5f76673e1f6}{two}}.ndim,\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00307}00307\ \ \ \ \ \ \ \ \ assert\_equal(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_a70b3c8beb496431866a233c0bcb2e0af}{three}}.ndim,\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00308}00308\ \ \ \ \ \ \ \ \ num\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_a1fdf8e9f3b76ad85113bc5f76673e1f6}{two}}.itemsize}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00309}00309\ \ \ \ \ \ \ \ \ assert\_equal(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_a1fdf8e9f3b76ad85113bc5f76673e1f6}{two}}.size,\ 20)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00310}00310\ \ \ \ \ \ \ \ \ assert\_equal(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_a1fdf8e9f3b76ad85113bc5f76673e1f6}{two}}.nbytes,\ 20*num)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00311}00311\ \ \ \ \ \ \ \ \ assert\_equal(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_a1fdf8e9f3b76ad85113bc5f76673e1f6}{two}}.itemsize,\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_a1fdf8e9f3b76ad85113bc5f76673e1f6}{two}}.dtype.itemsize)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00312}00312\ \ \ \ \ \ \ \ \ assert\_equal(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_a1fdf8e9f3b76ad85113bc5f76673e1f6}{two}}.base,\ np.arange(20))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00313}00313\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00314}00314\ \ \ \ \ \textcolor{keyword}{def\ }test\_dtypeattr(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00315}00315\ \ \ \ \ \ \ \ \ assert\_equal(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_abe8d3499b15c3939cbefb9a7067d3547}{one}}.dtype,\ np.dtype(np.int\_))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00316}00316\ \ \ \ \ \ \ \ \ assert\_equal(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_a70b3c8beb496431866a233c0bcb2e0af}{three}}.dtype,\ np.dtype(np.float\_))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00317}00317\ \ \ \ \ \ \ \ \ assert\_equal(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_abe8d3499b15c3939cbefb9a7067d3547}{one}}.dtype.char,\ \textcolor{stringliteral}{'l'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00318}00318\ \ \ \ \ \ \ \ \ assert\_equal(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_a70b3c8beb496431866a233c0bcb2e0af}{three}}.dtype.char,\ \textcolor{stringliteral}{'d'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00319}00319\ \ \ \ \ \ \ \ \ assert\_(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_a70b3c8beb496431866a233c0bcb2e0af}{three}}.dtype.str[0]\ \textcolor{keywordflow}{in}\ \textcolor{stringliteral}{'<>'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00320}00320\ \ \ \ \ \ \ \ \ assert\_equal(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_abe8d3499b15c3939cbefb9a7067d3547}{one}}.dtype.str[1],\ \textcolor{stringliteral}{'i'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00321}00321\ \ \ \ \ \ \ \ \ assert\_equal(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_a70b3c8beb496431866a233c0bcb2e0af}{three}}.dtype.str[1],\ \textcolor{stringliteral}{'f'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00322}00322\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00323}00323\ \ \ \ \ \textcolor{keyword}{def\ }test\_int\_subclassing(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00324}00324\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Regression\ test\ for\ https://github.com/numpy/numpy/pull/3526}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00325}00325\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00326}00326\ \ \ \ \ \ \ \ \ numpy\_int\ =\ np.int\_(0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00327}00327\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00328}00328\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ int\_\ doesn't\ inherit\ from\ Python\ int,\ because\ it's\ not\ fixed-\/width}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00329}00329\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ isinstance(numpy\_int,\ int))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00330}00330\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00331}00331\ \ \ \ \ \textcolor{keyword}{def\ }test\_stridesattr(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00332}00332\ \ \ \ \ \ \ \ \ x\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_abe8d3499b15c3939cbefb9a7067d3547}{one}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00333}00333\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00334}00334\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }make\_array(size,\ offset,\ strides):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00335}00335\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ np.ndarray(size,\ buffer=x,\ dtype=int,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00336}00336\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ offset=offset*x.itemsize,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00337}00337\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ strides=strides*x.itemsize)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00338}00338\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00339}00339\ \ \ \ \ \ \ \ \ assert\_equal(make\_array(4,\ 4,\ -\/1),\ np.array([4,\ 3,\ 2,\ 1]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00340}00340\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ make\_array,\ 4,\ 4,\ -\/2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00341}00341\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ make\_array,\ 4,\ 2,\ -\/1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00342}00342\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ make\_array,\ 8,\ 3,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00343}00343\ \ \ \ \ \ \ \ \ assert\_equal(make\_array(8,\ 3,\ 0),\ np.array([3]*8))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00344}00344\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ behavior\ reported\ in\ gh-\/2503:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00345}00345\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ make\_array,\ (2,\ 3),\ 5,\ np.array([-\/2,\ -\/3]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00346}00346\ \ \ \ \ \ \ \ \ make\_array(0,\ 0,\ 10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00347}00347\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00348}00348\ \ \ \ \ \textcolor{keyword}{def\ }test\_set\_stridesattr(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00349}00349\ \ \ \ \ \ \ \ \ x\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAttributes_abe8d3499b15c3939cbefb9a7067d3547}{one}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00350}00350\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00351}00351\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }make\_array(size,\ offset,\ strides):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00352}00352\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00353}00353\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r\ =\ np.ndarray([size],\ dtype=int,\ buffer=x,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00354}00354\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ offset=offset*x.itemsize)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00355}00355\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ Exception\ \textcolor{keyword}{as}\ e:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00356}00356\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classRuntimeError}{RuntimeError}}(e)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00357}00357\ \ \ \ \ \ \ \ \ \ \ \ \ r.strides\ =\ strides\ =\ strides*x.itemsize}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00358}00358\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ r}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00359}00359\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00360}00360\ \ \ \ \ \ \ \ \ assert\_equal(make\_array(4,\ 4,\ -\/1),\ np.array([4,\ 3,\ 2,\ 1]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00361}00361\ \ \ \ \ \ \ \ \ assert\_equal(make\_array(7,\ 3,\ 1),\ np.array([3,\ 4,\ 5,\ 6,\ 7,\ 8,\ 9]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00362}00362\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ make\_array,\ 4,\ 4,\ -\/2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00363}00363\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ make\_array,\ 4,\ 2,\ -\/1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00364}00364\ \ \ \ \ \ \ \ \ assert\_raises(RuntimeError,\ make\_array,\ 8,\ 3,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00365}00365\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ that\ the\ true\ extent\ of\ the\ array\ is\ used.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00366}00366\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ relies\ on\ as\_strided\ base\ not\ exposing\ a\ buffer.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00367}00367\ \ \ \ \ \ \ \ \ x\ =\ np.lib.stride\_tricks.as\_strided(np.arange(1),\ (10,\ 10),\ (0,\ 0))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00368}00368\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00369}00369\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }set\_strides(arr,\ strides):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00370}00370\ \ \ \ \ \ \ \ \ \ \ \ \ arr.strides\ =\ strides}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00371}00371\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00372}00372\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ set\_strides,\ x,\ (10*x.itemsize,\ x.itemsize))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00373}00373\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00374}00374\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ for\ offset\ calculations:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00375}00375\ \ \ \ \ \ \ \ \ x\ =\ np.lib.stride\_tricks.as\_strided(np.arange(10,\ dtype=np.int8)[-\/1],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00376}00376\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shape=(10,),\ strides=(-\/1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00377}00377\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ set\_strides,\ x[::-\/1],\ -\/1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00378}00378\ \ \ \ \ \ \ \ \ a\ =\ x[::-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00379}00379\ \ \ \ \ \ \ \ \ a.strides\ =\ 1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00380}00380\ \ \ \ \ \ \ \ \ a[::2].strides\ =\ 2}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00381}00381\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00382}00382\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ 0d}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00383}00383\ \ \ \ \ \ \ \ \ arr\_0d\ =\ np.array(0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00384}00384\ \ \ \ \ \ \ \ \ arr\_0d.strides\ =\ ()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00385}00385\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ set\_strides,\ arr\_0d,\ \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00386}00386\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00387}00387\ \ \ \ \ \textcolor{keyword}{def\ }test\_fill(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00388}00388\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ t\ \textcolor{keywordflow}{in}\ \textcolor{stringliteral}{"{}?bhilqpBHILQPfdgFDGO"{}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00389}00389\ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ np.empty((3,\ 2,\ 1),\ t)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00390}00390\ \ \ \ \ \ \ \ \ \ \ \ \ y\ =\ np.empty((3,\ 2,\ 1),\ t)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00391}00391\ \ \ \ \ \ \ \ \ \ \ \ \ x.fill(1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00392}00392\ \ \ \ \ \ \ \ \ \ \ \ \ y[...]\ =\ 1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00393}00393\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(x,\ y)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00394}00394\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00395}00395\ \ \ \ \ \textcolor{keyword}{def\ }test\_fill\_max\_uint64(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00396}00396\ \ \ \ \ \ \ \ \ x\ =\ np.empty((3,\ 2,\ 1),\ dtype=np.uint64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00397}00397\ \ \ \ \ \ \ \ \ y\ =\ np.empty((3,\ 2,\ 1),\ dtype=np.uint64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00398}00398\ \ \ \ \ \ \ \ \ value\ =\ 2**64\ -\/\ 1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00399}00399\ \ \ \ \ \ \ \ \ y[...]\ =\ value}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00400}00400\ \ \ \ \ \ \ \ \ x.fill(value)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00401}00401\ \ \ \ \ \ \ \ \ assert\_array\_equal(x,\ y)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00402}00402\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00403}00403\ \ \ \ \ \textcolor{keyword}{def\ }test\_fill\_struct\_array(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00404}00404\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Filling\ from\ a\ scalar}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00405}00405\ \ \ \ \ \ \ \ \ x\ =\ np.array([(0,\ 0.0),\ (1,\ 1.0)],\ dtype=\textcolor{stringliteral}{'i4,f8'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00406}00406\ \ \ \ \ \ \ \ \ x.fill(x[0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00407}00407\ \ \ \ \ \ \ \ \ assert\_equal(x[\textcolor{stringliteral}{'f1'}][1],\ x[\textcolor{stringliteral}{'f1'}][0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00408}00408\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Filling\ from\ a\ tuple\ that\ can\ be\ converted}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00409}00409\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ to\ a\ scalar}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00410}00410\ \ \ \ \ \ \ \ \ x\ =\ np.zeros(2,\ dtype=[(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'f8'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'i4'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00411}00411\ \ \ \ \ \ \ \ \ x.fill((3.5,\ -\/2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00412}00412\ \ \ \ \ \ \ \ \ assert\_array\_equal(x[\textcolor{stringliteral}{'a'}],\ [3.5,\ 3.5])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00413}00413\ \ \ \ \ \ \ \ \ assert\_array\_equal(x[\textcolor{stringliteral}{'b'}],\ [-\/2,\ -\/2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00414}00414\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00415}00415\ \ \ \ \ \textcolor{keyword}{def\ }test\_fill\_readonly(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00416}00416\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/22922}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00417}00417\ \ \ \ \ \ \ \ \ a\ =\ np.zeros(11)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00418}00418\ \ \ \ \ \ \ \ \ a.setflags(write=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00419}00419\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError,\ match=\textcolor{stringliteral}{"{}.*read-\/only"{}}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00420}00420\ \ \ \ \ \ \ \ \ \ \ \ \ a.fill(0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00421}00421\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00422}00422\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00423}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayConstruction}{00423}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayConstruction}{TestArrayConstruction}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00424}00424\ \ \ \ \ \textcolor{keyword}{def\ }test\_array(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00425}00425\ \ \ \ \ \ \ \ \ d\ =\ np.ones(6)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00426}00426\ \ \ \ \ \ \ \ \ r\ =\ np.array([d,\ d])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00427}00427\ \ \ \ \ \ \ \ \ assert\_equal(r,\ np.ones((2,\ 6)))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00428}00428\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00429}00429\ \ \ \ \ \ \ \ \ d\ =\ np.ones(6)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00430}00430\ \ \ \ \ \ \ \ \ tgt\ =\ np.ones((2,\ 6))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00431}00431\ \ \ \ \ \ \ \ \ r\ =\ np.array([d,\ d])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00432}00432\ \ \ \ \ \ \ \ \ assert\_equal(r,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00433}00433\ \ \ \ \ \ \ \ \ tgt[1]\ =\ 2}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00434}00434\ \ \ \ \ \ \ \ \ r\ =\ np.array([d,\ d\ +\ 1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00435}00435\ \ \ \ \ \ \ \ \ assert\_equal(r,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00436}00436\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00437}00437\ \ \ \ \ \ \ \ \ d\ =\ np.ones(6)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00438}00438\ \ \ \ \ \ \ \ \ r\ =\ np.array([[d,\ d]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00439}00439\ \ \ \ \ \ \ \ \ assert\_equal(r,\ np.ones((1,\ 2,\ 6)))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00440}00440\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00441}00441\ \ \ \ \ \ \ \ \ d\ =\ np.ones(6)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00442}00442\ \ \ \ \ \ \ \ \ r\ =\ np.array([[d,\ d],\ [d,\ d]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00443}00443\ \ \ \ \ \ \ \ \ assert\_equal(r,\ np.ones((2,\ 2,\ 6)))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00444}00444\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00445}00445\ \ \ \ \ \ \ \ \ d\ =\ np.ones((6,\ 6))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00446}00446\ \ \ \ \ \ \ \ \ r\ =\ np.array([d,\ d])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00447}00447\ \ \ \ \ \ \ \ \ assert\_equal(r,\ np.ones((2,\ 6,\ 6)))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00448}00448\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00449}00449\ \ \ \ \ \ \ \ \ d\ =\ np.ones((6,\ ))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00450}00450\ \ \ \ \ \ \ \ \ r\ =\ np.array([[d,\ d\ +\ 1],\ d\ +\ 2],\ dtype=object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00451}00451\ \ \ \ \ \ \ \ \ assert\_equal(len(r),\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00452}00452\ \ \ \ \ \ \ \ \ assert\_equal(r[0],\ [d,\ d\ +\ 1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00453}00453\ \ \ \ \ \ \ \ \ assert\_equal(r[1],\ d\ +\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00454}00454\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00455}00455\ \ \ \ \ \ \ \ \ tgt\ =\ np.ones((2,\ 3),\ dtype=bool)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00456}00456\ \ \ \ \ \ \ \ \ tgt[0,\ 2]\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00457}00457\ \ \ \ \ \ \ \ \ tgt[1,\ 0:2]\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00458}00458\ \ \ \ \ \ \ \ \ r\ =\ np.array([[\textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False}],\ [\textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00459}00459\ \ \ \ \ \ \ \ \ assert\_equal(r,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00460}00460\ \ \ \ \ \ \ \ \ r\ =\ np.array([[\textcolor{keyword}{True},\ \textcolor{keyword}{False}],\ [\textcolor{keyword}{True},\ \textcolor{keyword}{False}],\ [\textcolor{keyword}{False},\ \textcolor{keyword}{True}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00461}00461\ \ \ \ \ \ \ \ \ assert\_equal(r,\ tgt.T)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00462}00462\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00463}00463\ \ \ \ \ \textcolor{keyword}{def\ }test\_array\_empty(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00464}00464\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ np.array)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00465}00465\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00466}00466\ \ \ \ \ \textcolor{keyword}{def\ }test\_0d\_array\_shape(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00467}00467\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ np.ones(np.array(3)).shape\ ==\ (3,)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00468}00468\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00469}00469\ \ \ \ \ \textcolor{keyword}{def\ }test\_array\_copy\_false(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00470}00470\ \ \ \ \ \ \ \ \ d\ =\ np.array([1,\ 2,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00471}00471\ \ \ \ \ \ \ \ \ e\ =\ np.array(d,\ copy=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00472}00472\ \ \ \ \ \ \ \ \ d[1]\ =\ 3}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00473}00473\ \ \ \ \ \ \ \ \ assert\_array\_equal(e,\ [1,\ 3,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00474}00474\ \ \ \ \ \ \ \ \ e\ =\ np.array(d,\ copy=\textcolor{keyword}{False},\ order=\textcolor{stringliteral}{'F'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00475}00475\ \ \ \ \ \ \ \ \ d[1]\ =\ 4}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00476}00476\ \ \ \ \ \ \ \ \ assert\_array\_equal(e,\ [1,\ 4,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00477}00477\ \ \ \ \ \ \ \ \ e[2]\ =\ 7}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00478}00478\ \ \ \ \ \ \ \ \ assert\_array\_equal(d,\ [1,\ 4,\ 7])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00479}00479\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00480}00480\ \ \ \ \ \textcolor{keyword}{def\ }test\_array\_copy\_true(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00481}00481\ \ \ \ \ \ \ \ \ d\ =\ np.array([[1,2,3],\ [1,\ 2,\ 3]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00482}00482\ \ \ \ \ \ \ \ \ e\ =\ np.array(d,\ copy=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00483}00483\ \ \ \ \ \ \ \ \ d[0,\ 1]\ =\ 3}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00484}00484\ \ \ \ \ \ \ \ \ e[0,\ 2]\ =\ -\/7}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00485}00485\ \ \ \ \ \ \ \ \ assert\_array\_equal(e,\ [[1,\ 2,\ -\/7],\ [1,\ 2,\ 3]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00486}00486\ \ \ \ \ \ \ \ \ assert\_array\_equal(d,\ [[1,\ 3,\ 3],\ [1,\ 2,\ 3]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00487}00487\ \ \ \ \ \ \ \ \ e\ =\ np.array(d,\ copy=\textcolor{keyword}{True},\ order=\textcolor{stringliteral}{'F'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00488}00488\ \ \ \ \ \ \ \ \ d[0,\ 1]\ =\ 5}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00489}00489\ \ \ \ \ \ \ \ \ e[0,\ 2]\ =\ 7}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00490}00490\ \ \ \ \ \ \ \ \ assert\_array\_equal(e,\ [[1,\ 3,\ 7],\ [1,\ 2,\ 3]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00491}00491\ \ \ \ \ \ \ \ \ assert\_array\_equal(d,\ [[1,\ 5,\ 3],\ [1,2,3]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00492}00492\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00493}00493\ \ \ \ \ \textcolor{keyword}{def\ }test\_array\_cont(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00494}00494\ \ \ \ \ \ \ \ \ d\ =\ np.ones(10)[::2]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00495}00495\ \ \ \ \ \ \ \ \ assert\_(np.ascontiguousarray(d).flags.c\_contiguous)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00496}00496\ \ \ \ \ \ \ \ \ assert\_(np.ascontiguousarray(d).flags.f\_contiguous)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00497}00497\ \ \ \ \ \ \ \ \ assert\_(np.asfortranarray(d).flags.c\_contiguous)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00498}00498\ \ \ \ \ \ \ \ \ assert\_(np.asfortranarray(d).flags.f\_contiguous)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00499}00499\ \ \ \ \ \ \ \ \ d\ =\ np.ones((10,\ 10))[::2,::2]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00500}00500\ \ \ \ \ \ \ \ \ assert\_(np.ascontiguousarray(d).flags.c\_contiguous)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00501}00501\ \ \ \ \ \ \ \ \ assert\_(np.asfortranarray(d).flags.f\_contiguous)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00502}00502\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00503}00503\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{"{}func"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00504}00504\ \ \ \ \ \ \ \ \ \ \ \ \ [np.array,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00505}00505\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.asarray,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00506}00506\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.asanyarray,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00507}00507\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.ascontiguousarray,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00508}00508\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.asfortranarray])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00509}00509\ \ \ \ \ \textcolor{keyword}{def\ }test\_bad\_arguments\_error(self,\ func):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00510}00510\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00511}00511\ \ \ \ \ \ \ \ \ \ \ \ \ func(3,\ dtype=\textcolor{stringliteral}{"{}bad\ dtype"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00512}00512\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00513}00513\ \ \ \ \ \ \ \ \ \ \ \ \ func()\ \ \textcolor{comment}{\#\ missing\ arguments}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00514}00514\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00515}00515\ \ \ \ \ \ \ \ \ \ \ \ \ func(1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7,\ 8)\ \ \textcolor{comment}{\#\ too\ many\ arguments}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00516}00516\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00517}00517\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{"{}func"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00518}00518\ \ \ \ \ \ \ \ \ \ \ \ \ [np.array,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00519}00519\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.asarray,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00520}00520\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.asanyarray,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00521}00521\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.ascontiguousarray,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00522}00522\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.asfortranarray])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00523}00523\ \ \ \ \ \textcolor{keyword}{def\ }test\_array\_as\_keyword(self,\ func):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00524}00524\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ This\ should\ likely\ be\ made\ positional\ only,\ but\ do\ not\ change}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00525}00525\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ the\ name\ accidentally.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00526}00526\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ func\ \textcolor{keywordflow}{is}\ np.array:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00527}00527\ \ \ \ \ \ \ \ \ \ \ \ \ func(object=3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00528}00528\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00529}00529\ \ \ \ \ \ \ \ \ \ \ \ \ func(a=3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00530}00530\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00531}00531\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00532}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAssignment}{00532}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAssignment}{TestAssignment}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00533}00533\ \ \ \ \ \textcolor{keyword}{def\ }test\_assignment\_broadcasting(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00534}00534\ \ \ \ \ \ \ \ \ a\ =\ np.arange(6).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00535}00535\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00536}00536\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Broadcasting\ the\ input\ to\ the\ output}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00537}00537\ \ \ \ \ \ \ \ \ a[...]\ =\ np.arange(3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00538}00538\ \ \ \ \ \ \ \ \ assert\_equal(a,\ [[0,\ 1,\ 2],\ [0,\ 1,\ 2]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00539}00539\ \ \ \ \ \ \ \ \ a[...]\ =\ np.arange(2).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00540}00540\ \ \ \ \ \ \ \ \ assert\_equal(a,\ [[0,\ 0,\ 0],\ [1,\ 1,\ 1]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00541}00541\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00542}00542\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ For\ compatibility\ with\ <=\ 1.5,\ a\ limited\ version\ of\ broadcasting}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00543}00543\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ the\ output\ to\ the\ input.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00544}00544\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00545}00545\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ This\ behavior\ is\ inconsistent\ with\ NumPy\ broadcasting}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00546}00546\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ in\ general,\ because\ it\ only\ uses\ one\ of\ the\ two\ broadcasting}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00547}00547\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ rules\ (adding\ a\ new\ "{}1"{}\ dimension\ to\ the\ left\ of\ the\ shape),}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00548}00548\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ applied\ to\ the\ output\ instead\ of\ an\ input.\ In\ NumPy\ 2.0,\ this\ kind}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00549}00549\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ of\ broadcasting\ assignment\ will\ likely\ be\ disallowed.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00550}00550\ \ \ \ \ \ \ \ \ a[...]\ =\ np.arange(6)[::-\/1].\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(1,\ 2,\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00551}00551\ \ \ \ \ \ \ \ \ assert\_equal(a,\ [[5,\ 4,\ 3],\ [2,\ 1,\ 0]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00552}00552\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ other\ type\ of\ broadcasting\ would\ require\ a\ reduction\ operation.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00553}00553\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00554}00554\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }assign(a,\ b):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00555}00555\ \ \ \ \ \ \ \ \ \ \ \ \ a[...]\ =\ b}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00556}00556\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00557}00557\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ assign,\ a,\ np.arange(12).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,\ 2,\ 3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00558}00558\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00559}00559\ \ \ \ \ \textcolor{keyword}{def\ }test\_assignment\_errors(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00560}00560\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Address\ issue\ \#2276}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00561}00561\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classC}{C}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00562}00562\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00563}00563\ \ \ \ \ \ \ \ \ a\ =\ np.zeros(1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00564}00564\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00565}00565\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }assign(v):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00566}00566\ \ \ \ \ \ \ \ \ \ \ \ \ a[0]\ =\ v}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00567}00567\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00568}00568\ \ \ \ \ \ \ \ \ assert\_raises((AttributeError,\ TypeError),\ assign,\ \mbox{\hyperlink{classC}{C}}())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00569}00569\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ assign,\ [1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00570}00570\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00571}00571\ \ \ \ \ \textcolor{keyword}{def\ }test\_unicode\_assignment(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00572}00572\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/5049}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00573}00573\ \ \ \ \ \ \ \ \ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacenumpy_1_1core_1_1numeric}{numpy.core.numeric}}\ \textcolor{keyword}{import}\ set\_string\_function}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00574}00574\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00575}00575\ \ \ \ \ \ \ \ \ \textcolor{preprocessor}{@contextmanager}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00576}00576\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }inject\_str(s):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00577}00577\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}\ replace\ ndarray.\_\_str\_\_\ temporarily\ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00578}00578\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacenumpy_1_1core_1_1arrayprint_a7c11d0c5d97c8352a18171e8ddbdc366}{set\_string\_function}}(\textcolor{keyword}{lambda}\ x:\ s,\ repr=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00579}00579\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00580}00580\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{yield}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00581}00581\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{finally}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00582}00582\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacenumpy_1_1core_1_1arrayprint_a7c11d0c5d97c8352a18171e8ddbdc366}{set\_string\_function}}(\textcolor{keywordtype}{None},\ repr=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00583}00583\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00584}00584\ \ \ \ \ \ \ \ \ a1d\ =\ np.array([\textcolor{stringliteral}{'test'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00585}00585\ \ \ \ \ \ \ \ \ a0d\ =\ np.array(\textcolor{stringliteral}{'done'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00586}00586\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ inject\_str(\textcolor{stringliteral}{'bad'}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00587}00587\ \ \ \ \ \ \ \ \ \ \ \ \ a1d[0]\ =\ a0d\ \ \textcolor{comment}{\#\ previously\ this\ would\ invoke\ \_\_str\_\_}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00588}00588\ \ \ \ \ \ \ \ \ assert\_equal(a1d[0],\ \textcolor{stringliteral}{'done'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00589}00589\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00590}00590\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ this\ would\ crash\ for\ the\ same\ reason}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00591}00591\ \ \ \ \ \ \ \ \ np.array([np.array(\textcolor{stringliteral}{'\(\backslash\)xe5\(\backslash\)xe4\(\backslash\)xf6'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00592}00592\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00593}00593\ \ \ \ \ \textcolor{keyword}{def\ }test\_stringlike\_empty\_list(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00594}00594\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/8902}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00595}00595\ \ \ \ \ \ \ \ \ u\ =\ np.array([\textcolor{stringliteral}{'done'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00596}00596\ \ \ \ \ \ \ \ \ b\ =\ np.array([b\textcolor{stringliteral}{'done'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00597}00597\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00598}00598\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }bad\_sequence:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00599}00599\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_getitem\_\_(self):\ \textcolor{keyword}{pass}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00600}00600\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_len\_\_(self):\ \textcolor{keywordflow}{raise}\ RuntimeError}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00601}00601\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00602}00602\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ operator.setitem,\ u,\ 0,\ [])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00603}00603\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ operator.setitem,\ b,\ 0,\ [])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00604}00604\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00605}00605\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ operator.setitem,\ u,\ 0,\ bad\_sequence())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00606}00606\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ operator.setitem,\ b,\ 0,\ bad\_sequence())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00607}00607\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00608}00608\ \ \ \ \ \textcolor{keyword}{def\ }test\_longdouble\_assignment(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00609}00609\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ only\ relevant\ if\ longdouble\ is\ larger\ than\ float}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00610}00610\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ we're\ looking\ for\ loss\ of\ precision}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00611}00611\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00612}00612\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dtype\ \textcolor{keywordflow}{in}\ (np.longdouble,\ np.longcomplex):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00613}00613\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/8902}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00614}00614\ \ \ \ \ \ \ \ \ \ \ \ \ tinyb\ =\ np.nextafter(np.longdouble(0),\ 1).astype(dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00615}00615\ \ \ \ \ \ \ \ \ \ \ \ \ tinya\ =\ np.nextafter(np.longdouble(0),\ -\/1).astype(dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00616}00616\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00617}00617\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ construction}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00618}00618\ \ \ \ \ \ \ \ \ \ \ \ \ tiny1d\ =\ np.array([tinya])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00619}00619\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(tiny1d[0],\ tinya)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00620}00620\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00621}00621\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ scalar\ =\ scalar}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00622}00622\ \ \ \ \ \ \ \ \ \ \ \ \ tiny1d[0]\ =\ tinyb}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00623}00623\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(tiny1d[0],\ tinyb)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00624}00624\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00625}00625\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 0d\ =\ scalar}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00626}00626\ \ \ \ \ \ \ \ \ \ \ \ \ tiny1d[0,\ ...]\ =\ tinya}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00627}00627\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(tiny1d[0],\ tinya)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00628}00628\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00629}00629\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 0d\ =\ 0d}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00630}00630\ \ \ \ \ \ \ \ \ \ \ \ \ tiny1d[0,\ ...]\ =\ tinyb[...]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00631}00631\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(tiny1d[0],\ tinyb)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00632}00632\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00633}00633\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ scalar\ =\ 0d}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00634}00634\ \ \ \ \ \ \ \ \ \ \ \ \ tiny1d[0]\ =\ tinyb[...]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00635}00635\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(tiny1d[0],\ tinyb)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00636}00636\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00637}00637\ \ \ \ \ \ \ \ \ \ \ \ \ arr\ =\ np.array([np.array(tinya)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00638}00638\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(arr[0],\ tinya)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00639}00639\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00640}00640\ \ \ \ \ \textcolor{keyword}{def\ }test\_cast\_to\_string(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00641}00641\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ cast\ to\ str\ should\ do\ "{}str(scalar)"{},\ not\ "{}str(scalar.item())"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00642}00642\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Example:\ In\ python2,\ str(float)\ is\ truncated,\ so\ we\ want\ to\ avoid}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00643}00643\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ str(np.float64(...).item())\ as\ this\ would\ incorrectly\ truncate.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00644}00644\ \ \ \ \ \ \ \ \ a\ =\ np.zeros(1,\ dtype=\textcolor{stringliteral}{'S20'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00645}00645\ \ \ \ \ \ \ \ \ a[:]\ =\ np.array([\textcolor{stringliteral}{'1.12345678901234567890'}],\ dtype=\textcolor{stringliteral}{'f8'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00646}00646\ \ \ \ \ \ \ \ \ assert\_equal(a[0],\ b\textcolor{stringliteral}{"{}1.1234567890123457"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00647}00647\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00648}00648\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00649}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDtypedescr}{00649}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDtypedescr}{TestDtypedescr}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00650}00650\ \ \ \ \ \textcolor{keyword}{def\ }test\_construction(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00651}00651\ \ \ \ \ \ \ \ \ d1\ =\ np.dtype(\textcolor{stringliteral}{'i4'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00652}00652\ \ \ \ \ \ \ \ \ assert\_equal(d1,\ np.dtype(np.int32))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00653}00653\ \ \ \ \ \ \ \ \ d2\ =\ np.dtype(\textcolor{stringliteral}{'f8'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00654}00654\ \ \ \ \ \ \ \ \ assert\_equal(d2,\ np.dtype(np.float64))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00655}00655\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00656}00656\ \ \ \ \ \textcolor{keyword}{def\ }test\_byteorders(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00657}00657\ \ \ \ \ \ \ \ \ assert\_(np.dtype(\textcolor{stringliteral}{'<i4'})\ !=\ np.dtype(\textcolor{stringliteral}{'>i4'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00658}00658\ \ \ \ \ \ \ \ \ assert\_(np.dtype([(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'<i4'})])\ !=\ np.dtype([(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'>i4'})]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00659}00659\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00660}00660\ \ \ \ \ \textcolor{keyword}{def\ }test\_structured\_non\_void(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00661}00661\ \ \ \ \ \ \ \ \ fields\ =\ [(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'<i2'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'<i2'})]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00662}00662\ \ \ \ \ \ \ \ \ dt\_int\ =\ np.dtype((\textcolor{stringliteral}{'i4'},\ fields))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00663}00663\ \ \ \ \ \ \ \ \ assert\_equal(str(dt\_int),\ \textcolor{stringliteral}{"{}(numpy.int32,\ [('a',\ '<i2'),\ ('b',\ '<i2')])"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00664}00664\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00665}00665\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/9821}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00666}00666\ \ \ \ \ \ \ \ \ arr\_int\ =\ np.zeros(4,\ dt\_int)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00667}00667\ \ \ \ \ \ \ \ \ assert\_equal(repr(arr\_int),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00668}00668\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}array([0,\ 0,\ 0,\ 0],\ dtype=(numpy.int32,\ [('a',\ '<i2'),\ ('b',\ '<i2')]))"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00669}00669\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00670}00670\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00671}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroRank}{00671}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroRank}{TestZeroRank}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00672}00672\ \ \ \ \ \textcolor{keyword}{def\ }setup\_method(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00673}00673\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroRank_aa6b4b9ccbc2028414aff6d0322d80300}{d}}\ =\ np.array(0),\ np.array(\textcolor{stringliteral}{'x'},\ object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00674}00674\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00675}00675\ \ \ \ \ \textcolor{keyword}{def\ }test\_ellipsis\_subscript(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00676}00676\ \ \ \ \ \ \ \ \ a,\ b\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroRank_aa6b4b9ccbc2028414aff6d0322d80300}{d}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00677}00677\ \ \ \ \ \ \ \ \ assert\_equal(a[...],\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00678}00678\ \ \ \ \ \ \ \ \ assert\_equal(b[...],\ \textcolor{stringliteral}{'x'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00679}00679\ \ \ \ \ \ \ \ \ assert\_(a[...].base\ \textcolor{keywordflow}{is}\ a)\ \ \textcolor{comment}{\#\ \`{}a[...]\ is\ a`\ in\ numpy\ <1.9.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00680}00680\ \ \ \ \ \ \ \ \ assert\_(b[...].base\ \textcolor{keywordflow}{is}\ b)\ \ \textcolor{comment}{\#\ \`{}b[...]\ is\ b`\ in\ numpy\ <1.9.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00681}00681\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00682}00682\ \ \ \ \ \textcolor{keyword}{def\ }test\_empty\_subscript(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00683}00683\ \ \ \ \ \ \ \ \ a,\ b\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroRank_aa6b4b9ccbc2028414aff6d0322d80300}{d}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00684}00684\ \ \ \ \ \ \ \ \ assert\_equal(a[()],\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00685}00685\ \ \ \ \ \ \ \ \ assert\_equal(b[()],\ \textcolor{stringliteral}{'x'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00686}00686\ \ \ \ \ \ \ \ \ assert\_(type(a[()])\ \textcolor{keywordflow}{is}\ a.dtype.type)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00687}00687\ \ \ \ \ \ \ \ \ assert\_(type(b[()])\ \textcolor{keywordflow}{is}\ str)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00688}00688\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00689}00689\ \ \ \ \ \textcolor{keyword}{def\ }test\_invalid\_subscript(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00690}00690\ \ \ \ \ \ \ \ \ a,\ b\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroRank_aa6b4b9ccbc2028414aff6d0322d80300}{d}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00691}00691\ \ \ \ \ \ \ \ \ assert\_raises(IndexError,\ \textcolor{keyword}{lambda}\ x:\ x[0],\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00692}00692\ \ \ \ \ \ \ \ \ assert\_raises(IndexError,\ \textcolor{keyword}{lambda}\ x:\ x[0],\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00693}00693\ \ \ \ \ \ \ \ \ assert\_raises(IndexError,\ \textcolor{keyword}{lambda}\ x:\ x[np.array([],\ int)],\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00694}00694\ \ \ \ \ \ \ \ \ assert\_raises(IndexError,\ \textcolor{keyword}{lambda}\ x:\ x[np.array([],\ int)],\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00695}00695\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00696}00696\ \ \ \ \ \textcolor{keyword}{def\ }test\_ellipsis\_subscript\_assignment(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00697}00697\ \ \ \ \ \ \ \ \ a,\ b\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroRank_aa6b4b9ccbc2028414aff6d0322d80300}{d}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00698}00698\ \ \ \ \ \ \ \ \ a[...]\ =\ 42}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00699}00699\ \ \ \ \ \ \ \ \ assert\_equal(a,\ 42)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00700}00700\ \ \ \ \ \ \ \ \ b[...]\ =\ \textcolor{stringliteral}{''}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00701}00701\ \ \ \ \ \ \ \ \ assert\_equal(b.item(),\ \textcolor{stringliteral}{''})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00702}00702\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00703}00703\ \ \ \ \ \textcolor{keyword}{def\ }test\_empty\_subscript\_assignment(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00704}00704\ \ \ \ \ \ \ \ \ a,\ b\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroRank_aa6b4b9ccbc2028414aff6d0322d80300}{d}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00705}00705\ \ \ \ \ \ \ \ \ a[()]\ =\ 42}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00706}00706\ \ \ \ \ \ \ \ \ assert\_equal(a,\ 42)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00707}00707\ \ \ \ \ \ \ \ \ b[()]\ =\ \textcolor{stringliteral}{''}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00708}00708\ \ \ \ \ \ \ \ \ assert\_equal(b.item(),\ \textcolor{stringliteral}{''})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00709}00709\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00710}00710\ \ \ \ \ \textcolor{keyword}{def\ }test\_invalid\_subscript\_assignment(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00711}00711\ \ \ \ \ \ \ \ \ a,\ b\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroRank_aa6b4b9ccbc2028414aff6d0322d80300}{d}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00712}00712\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00713}00713\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }assign(x,\ i,\ v):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00714}00714\ \ \ \ \ \ \ \ \ \ \ \ \ x[i]\ =\ v}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00715}00715\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00716}00716\ \ \ \ \ \ \ \ \ assert\_raises(IndexError,\ assign,\ a,\ 0,\ 42)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00717}00717\ \ \ \ \ \ \ \ \ assert\_raises(IndexError,\ assign,\ b,\ 0,\ \textcolor{stringliteral}{''})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00718}00718\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ assign,\ a,\ (),\ \textcolor{stringliteral}{''})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00719}00719\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00720}00720\ \ \ \ \ \textcolor{keyword}{def\ }test\_newaxis(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00721}00721\ \ \ \ \ \ \ \ \ a,\ b\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroRank_aa6b4b9ccbc2028414aff6d0322d80300}{d}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00722}00722\ \ \ \ \ \ \ \ \ assert\_equal(a[np.newaxis].shape,\ (1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00723}00723\ \ \ \ \ \ \ \ \ assert\_equal(a[...,\ np.newaxis].shape,\ (1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00724}00724\ \ \ \ \ \ \ \ \ assert\_equal(a[np.newaxis,\ ...].shape,\ (1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00725}00725\ \ \ \ \ \ \ \ \ assert\_equal(a[...,\ np.newaxis].shape,\ (1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00726}00726\ \ \ \ \ \ \ \ \ assert\_equal(a[np.newaxis,\ ...,\ np.newaxis].shape,\ (1,\ 1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00727}00727\ \ \ \ \ \ \ \ \ assert\_equal(a[...,\ np.newaxis,\ np.newaxis].shape,\ (1,\ 1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00728}00728\ \ \ \ \ \ \ \ \ assert\_equal(a[np.newaxis,\ np.newaxis,\ ...].shape,\ (1,\ 1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00729}00729\ \ \ \ \ \ \ \ \ assert\_equal(a[(np.newaxis,)*10].shape,\ (1,)*10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00730}00730\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00731}00731\ \ \ \ \ \textcolor{keyword}{def\ }test\_invalid\_newaxis(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00732}00732\ \ \ \ \ \ \ \ \ a,\ b\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroRank_aa6b4b9ccbc2028414aff6d0322d80300}{d}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00733}00733\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00734}00734\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }subscript(x,\ i):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00735}00735\ \ \ \ \ \ \ \ \ \ \ \ \ x[i]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00736}00736\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00737}00737\ \ \ \ \ \ \ \ \ assert\_raises(IndexError,\ subscript,\ a,\ (np.newaxis,\ 0))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00738}00738\ \ \ \ \ \ \ \ \ assert\_raises(IndexError,\ subscript,\ a,\ (np.newaxis,)*50)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00739}00739\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00740}00740\ \ \ \ \ \textcolor{keyword}{def\ }test\_constructor(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00741}00741\ \ \ \ \ \ \ \ \ x\ =\ np.ndarray(())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00742}00742\ \ \ \ \ \ \ \ \ x[()]\ =\ 5}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00743}00743\ \ \ \ \ \ \ \ \ assert\_equal(x[()],\ 5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00744}00744\ \ \ \ \ \ \ \ \ y\ =\ np.ndarray((),\ buffer=x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00745}00745\ \ \ \ \ \ \ \ \ y[()]\ =\ 6}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00746}00746\ \ \ \ \ \ \ \ \ assert\_equal(x[()],\ 6)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00747}00747\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00748}00748\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ strides\ and\ shape\ must\ be\ the\ same\ length}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00749}00749\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00750}00750\ \ \ \ \ \ \ \ \ \ \ \ \ np.ndarray((2,),\ strides=())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00751}00751\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00752}00752\ \ \ \ \ \ \ \ \ \ \ \ \ np.ndarray((),\ strides=(2,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00753}00753\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00754}00754\ \ \ \ \ \textcolor{keyword}{def\ }test\_output(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00755}00755\ \ \ \ \ \ \ \ \ x\ =\ np.array(2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00756}00756\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.add,\ x,\ [1],\ x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00757}00757\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00758}00758\ \ \ \ \ \textcolor{keyword}{def\ }test\_real\_imag(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00759}00759\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ contiguity\ checks\ are\ for\ gh-\/11245}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00760}00760\ \ \ \ \ \ \ \ \ x\ =\ np.array(1j)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00761}00761\ \ \ \ \ \ \ \ \ xr\ =\ x.real}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00762}00762\ \ \ \ \ \ \ \ \ xi\ =\ x.imag}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00763}00763\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00764}00764\ \ \ \ \ \ \ \ \ assert\_equal(xr,\ np.array(0))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00765}00765\ \ \ \ \ \ \ \ \ assert\_(type(xr)\ \textcolor{keywordflow}{is}\ np.ndarray)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00766}00766\ \ \ \ \ \ \ \ \ assert\_equal(xr.flags.contiguous,\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00767}00767\ \ \ \ \ \ \ \ \ assert\_equal(xr.flags.f\_contiguous,\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00768}00768\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00769}00769\ \ \ \ \ \ \ \ \ assert\_equal(xi,\ np.array(1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00770}00770\ \ \ \ \ \ \ \ \ assert\_(type(xi)\ \textcolor{keywordflow}{is}\ np.ndarray)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00771}00771\ \ \ \ \ \ \ \ \ assert\_equal(xi.flags.contiguous,\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00772}00772\ \ \ \ \ \ \ \ \ assert\_equal(xi.flags.f\_contiguous,\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00773}00773\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00774}00774\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00775}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestScalarIndexing}{00775}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestScalarIndexing}{TestScalarIndexing}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00776}00776\ \ \ \ \ \textcolor{keyword}{def\ }setup\_method(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00777}00777\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestScalarIndexing_a8ac8df5be38f7520faab3f715531ddb4}{d}}\ =\ np.array([0,\ 1])[0]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00778}00778\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00779}00779\ \ \ \ \ \textcolor{keyword}{def\ }test\_ellipsis\_subscript(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00780}00780\ \ \ \ \ \ \ \ \ a\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestScalarIndexing_a8ac8df5be38f7520faab3f715531ddb4}{d}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00781}00781\ \ \ \ \ \ \ \ \ assert\_equal(a[...],\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00782}00782\ \ \ \ \ \ \ \ \ assert\_equal(a[...].shape,\ ())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00783}00783\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00784}00784\ \ \ \ \ \textcolor{keyword}{def\ }test\_empty\_subscript(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00785}00785\ \ \ \ \ \ \ \ \ a\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestScalarIndexing_a8ac8df5be38f7520faab3f715531ddb4}{d}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00786}00786\ \ \ \ \ \ \ \ \ assert\_equal(a[()],\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00787}00787\ \ \ \ \ \ \ \ \ assert\_equal(a[()].shape,\ ())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00788}00788\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00789}00789\ \ \ \ \ \textcolor{keyword}{def\ }test\_invalid\_subscript(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00790}00790\ \ \ \ \ \ \ \ \ a\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestScalarIndexing_a8ac8df5be38f7520faab3f715531ddb4}{d}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00791}00791\ \ \ \ \ \ \ \ \ assert\_raises(IndexError,\ \textcolor{keyword}{lambda}\ x:\ x[0],\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00792}00792\ \ \ \ \ \ \ \ \ assert\_raises(IndexError,\ \textcolor{keyword}{lambda}\ x:\ x[np.array([],\ int)],\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00793}00793\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00794}00794\ \ \ \ \ \textcolor{keyword}{def\ }test\_invalid\_subscript\_assignment(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00795}00795\ \ \ \ \ \ \ \ \ a\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestScalarIndexing_a8ac8df5be38f7520faab3f715531ddb4}{d}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00796}00796\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00797}00797\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }assign(x,\ i,\ v):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00798}00798\ \ \ \ \ \ \ \ \ \ \ \ \ x[i]\ =\ v}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00799}00799\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00800}00800\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ assign,\ a,\ 0,\ 42)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00801}00801\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00802}00802\ \ \ \ \ \textcolor{keyword}{def\ }test\_newaxis(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00803}00803\ \ \ \ \ \ \ \ \ a\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestScalarIndexing_a8ac8df5be38f7520faab3f715531ddb4}{d}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00804}00804\ \ \ \ \ \ \ \ \ assert\_equal(a[np.newaxis].shape,\ (1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00805}00805\ \ \ \ \ \ \ \ \ assert\_equal(a[...,\ np.newaxis].shape,\ (1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00806}00806\ \ \ \ \ \ \ \ \ assert\_equal(a[np.newaxis,\ ...].shape,\ (1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00807}00807\ \ \ \ \ \ \ \ \ assert\_equal(a[...,\ np.newaxis].shape,\ (1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00808}00808\ \ \ \ \ \ \ \ \ assert\_equal(a[np.newaxis,\ ...,\ np.newaxis].shape,\ (1,\ 1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00809}00809\ \ \ \ \ \ \ \ \ assert\_equal(a[...,\ np.newaxis,\ np.newaxis].shape,\ (1,\ 1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00810}00810\ \ \ \ \ \ \ \ \ assert\_equal(a[np.newaxis,\ np.newaxis,\ ...].shape,\ (1,\ 1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00811}00811\ \ \ \ \ \ \ \ \ assert\_equal(a[(np.newaxis,)*10].shape,\ (1,)*10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00812}00812\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00813}00813\ \ \ \ \ \textcolor{keyword}{def\ }test\_invalid\_newaxis(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00814}00814\ \ \ \ \ \ \ \ \ a\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestScalarIndexing_a8ac8df5be38f7520faab3f715531ddb4}{d}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00815}00815\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00816}00816\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }subscript(x,\ i):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00817}00817\ \ \ \ \ \ \ \ \ \ \ \ \ x[i]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00818}00818\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00819}00819\ \ \ \ \ \ \ \ \ assert\_raises(IndexError,\ subscript,\ a,\ (np.newaxis,\ 0))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00820}00820\ \ \ \ \ \ \ \ \ assert\_raises(IndexError,\ subscript,\ a,\ (np.newaxis,)*50)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00821}00821\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00822}00822\ \ \ \ \ \textcolor{keyword}{def\ }test\_overlapping\_assignment(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00823}00823\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ With\ positive\ strides}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00824}00824\ \ \ \ \ \ \ \ \ a\ =\ np.arange(4)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00825}00825\ \ \ \ \ \ \ \ \ a[:-\/1]\ =\ a[1:]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00826}00826\ \ \ \ \ \ \ \ \ assert\_equal(a,\ [1,\ 2,\ 3,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00827}00827\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00828}00828\ \ \ \ \ \ \ \ \ a\ =\ np.arange(4)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00829}00829\ \ \ \ \ \ \ \ \ a[1:]\ =\ a[:-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00830}00830\ \ \ \ \ \ \ \ \ assert\_equal(a,\ [0,\ 0,\ 1,\ 2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00831}00831\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00832}00832\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ With\ positive\ and\ negative\ strides}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00833}00833\ \ \ \ \ \ \ \ \ a\ =\ np.arange(4)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00834}00834\ \ \ \ \ \ \ \ \ a[:]\ =\ a[::-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00835}00835\ \ \ \ \ \ \ \ \ assert\_equal(a,\ [3,\ 2,\ 1,\ 0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00836}00836\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00837}00837\ \ \ \ \ \ \ \ \ a\ =\ np.arange(6).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00838}00838\ \ \ \ \ \ \ \ \ a[::-\/1,:]\ =\ a[:,\ ::-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00839}00839\ \ \ \ \ \ \ \ \ assert\_equal(a,\ [[5,\ 4,\ 3],\ [2,\ 1,\ 0]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00840}00840\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00841}00841\ \ \ \ \ \ \ \ \ a\ =\ np.arange(6).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00842}00842\ \ \ \ \ \ \ \ \ a[::-\/1,\ ::-\/1]\ =\ a[:,\ ::-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00843}00843\ \ \ \ \ \ \ \ \ assert\_equal(a,\ [[3,\ 4,\ 5],\ [0,\ 1,\ 2]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00844}00844\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00845}00845\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ With\ just\ one\ element\ overlapping}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00846}00846\ \ \ \ \ \ \ \ \ a\ =\ np.arange(5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00847}00847\ \ \ \ \ \ \ \ \ a[:3]\ =\ a[2:]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00848}00848\ \ \ \ \ \ \ \ \ assert\_equal(a,\ [2,\ 3,\ 4,\ 3,\ 4])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00849}00849\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00850}00850\ \ \ \ \ \ \ \ \ a\ =\ np.arange(5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00851}00851\ \ \ \ \ \ \ \ \ a[2:]\ =\ a[:3]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00852}00852\ \ \ \ \ \ \ \ \ assert\_equal(a,\ [0,\ 1,\ 0,\ 1,\ 2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00853}00853\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00854}00854\ \ \ \ \ \ \ \ \ a\ =\ np.arange(5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00855}00855\ \ \ \ \ \ \ \ \ a[2::-\/1]\ =\ a[2:]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00856}00856\ \ \ \ \ \ \ \ \ assert\_equal(a,\ [4,\ 3,\ 2,\ 3,\ 4])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00857}00857\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00858}00858\ \ \ \ \ \ \ \ \ a\ =\ np.arange(5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00859}00859\ \ \ \ \ \ \ \ \ a[2:]\ =\ a[2::-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00860}00860\ \ \ \ \ \ \ \ \ assert\_equal(a,\ [0,\ 1,\ 2,\ 1,\ 0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00861}00861\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00862}00862\ \ \ \ \ \ \ \ \ a\ =\ np.arange(5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00863}00863\ \ \ \ \ \ \ \ \ a[2::-\/1]\ =\ a[:1:-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00864}00864\ \ \ \ \ \ \ \ \ assert\_equal(a,\ [2,\ 3,\ 4,\ 3,\ 4])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00865}00865\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00866}00866\ \ \ \ \ \ \ \ \ a\ =\ np.arange(5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00867}00867\ \ \ \ \ \ \ \ \ a[:1:-\/1]\ =\ a[2::-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00868}00868\ \ \ \ \ \ \ \ \ assert\_equal(a,\ [0,\ 1,\ 0,\ 1,\ 2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00869}00869\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00870}00870\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00871}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestCreation}{00871}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestCreation}{TestCreation}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00872}00872\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00873}00873\ \textcolor{stringliteral}{\ \ \ \ Test\ the\ np.array\ constructor}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00874}00874\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00875}00875\ \ \ \ \ \textcolor{keyword}{def\ }test\_from\_attribute(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00876}00876\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }x:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00877}00877\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_array\_\_(self,\ dtype=None):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00878}00878\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00879}00879\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00880}00880\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.array,\ x())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00881}00881\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00882}00882\ \ \ \ \ \textcolor{keyword}{def\ }test\_from\_string(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00883}00883\ \ \ \ \ \ \ \ \ types\ =\ np.typecodes[\textcolor{stringliteral}{'AllInteger'}]\ +\ np.typecodes[\textcolor{stringliteral}{'Float'}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00884}00884\ \ \ \ \ \ \ \ \ nstr\ =\ [\textcolor{stringliteral}{'123'},\ \textcolor{stringliteral}{'123'}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00885}00885\ \ \ \ \ \ \ \ \ result\ =\ np.array([123,\ 123],\ dtype=int)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00886}00886\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ type\ \textcolor{keywordflow}{in}\ types:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00887}00887\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{'String\ conversion\ for\ \%s'}\ \%\ type}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00888}00888\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.array(nstr,\ dtype=type),\ result,\ err\_msg=msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00889}00889\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00890}00890\ \ \ \ \ \textcolor{keyword}{def\ }test\_void(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00891}00891\ \ \ \ \ \ \ \ \ arr\ =\ np.array([],\ dtype=\textcolor{stringliteral}{'V'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00892}00892\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ arr.dtype\ ==\ \textcolor{stringliteral}{'V8'}\ \ \textcolor{comment}{\#\ current\ default}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00893}00893\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Same\ length\ scalars\ (those\ that\ go\ to\ the\ same\ void)\ work:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00894}00894\ \ \ \ \ \ \ \ \ arr\ =\ np.array([b\textcolor{stringliteral}{"{}1234"{}},\ b\textcolor{stringliteral}{"{}1234"{}}],\ dtype=\textcolor{stringliteral}{"{}V"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00895}00895\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ arr.dtype\ ==\ \textcolor{stringliteral}{"{}V4"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00896}00896\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00897}00897\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Promoting\ different\ lengths\ will\ fail\ (pre\ 1.20\ this\ worked)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00898}00898\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ by\ going\ via\ S5\ and\ casting\ to\ V5.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00899}00899\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00900}00900\ \ \ \ \ \ \ \ \ \ \ \ \ np.array([b\textcolor{stringliteral}{"{}1234"{}},\ b\textcolor{stringliteral}{"{}12345"{}}],\ dtype=\textcolor{stringliteral}{"{}V"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00901}00901\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00902}00902\ \ \ \ \ \ \ \ \ \ \ \ \ np.array([b\textcolor{stringliteral}{"{}12345"{}},\ b\textcolor{stringliteral}{"{}1234"{}}],\ dtype=\textcolor{stringliteral}{"{}V"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00903}00903\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00904}00904\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ the\ same\ for\ the\ casting\ path:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00905}00905\ \ \ \ \ \ \ \ \ arr\ =\ np.array([b\textcolor{stringliteral}{"{}1234"{}},\ b\textcolor{stringliteral}{"{}1234"{}}],\ dtype=\textcolor{stringliteral}{"{}O"{}}).astype(\textcolor{stringliteral}{"{}V"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00906}00906\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ arr.dtype\ ==\ \textcolor{stringliteral}{"{}V4"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00907}00907\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00908}00908\ \ \ \ \ \ \ \ \ \ \ \ \ np.array([b\textcolor{stringliteral}{"{}1234"{}},\ b\textcolor{stringliteral}{"{}12345"{}}],\ dtype=\textcolor{stringliteral}{"{}O"{}}).astype(\textcolor{stringliteral}{"{}V"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00909}00909\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00910}00910\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{"{}idx"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00911}00911\ \ \ \ \ \ \ \ \ \ \ \ \ [pytest.param(Ellipsis,\ id=\textcolor{stringliteral}{"{}arr"{}}),\ pytest.param((),\ id=\textcolor{stringliteral}{"{}scalar"{}})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00912}00912\ \ \ \ \ \textcolor{keyword}{def\ }test\_structured\_void\_promotion(self,\ idx):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00913}00913\ \ \ \ \ \ \ \ \ arr\ =\ np.array(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00914}00914\ \ \ \ \ \ \ \ \ \ \ \ \ [np.array(1,\ dtype=\textcolor{stringliteral}{"{}i,i"{}})[idx],\ np.array(2,\ dtype=\textcolor{stringliteral}{'i,i'})[idx]],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00915}00915\ \ \ \ \ \ \ \ \ \ \ \ \ dtype=\textcolor{stringliteral}{"{}V"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00916}00916\ \ \ \ \ \ \ \ \ assert\_array\_equal(arr,\ np.array([(1,\ 1),\ (2,\ 2)],\ dtype=\textcolor{stringliteral}{"{}i,i"{}}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00917}00917\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ following\ fails\ to\ promote\ the\ two\ dtypes,\ resulting\ in\ an\ error}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00918}00918\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00919}00919\ \ \ \ \ \ \ \ \ \ \ \ \ np.array(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00920}00920\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [np.array(1,\ dtype=\textcolor{stringliteral}{"{}i,i"{}})[idx],\ np.array(2,\ dtype=\textcolor{stringliteral}{'i,i,i'})[idx]],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00921}00921\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=\textcolor{stringliteral}{"{}V"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00922}00922\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00923}00923\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00924}00924\ \ \ \ \ \textcolor{keyword}{def\ }test\_too\_big\_error(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00925}00925\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 45341\ is\ the\ smallest\ integer\ greater\ than\ sqrt(2**31\ -\/\ 1).}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00926}00926\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 3037000500\ is\ the\ smallest\ integer\ greater\ than\ sqrt(2**63\ -\/\ 1).}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00927}00927\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ We\ want\ to\ make\ sure\ that\ the\ square\ byte\ array\ with\ those\ dimensions}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00928}00928\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ is\ too\ big\ on\ 32\ or\ 64\ bit\ systems\ respectively.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00929}00929\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ np.iinfo(\textcolor{stringliteral}{'intp'}).max\ ==\ 2**31\ -\/\ 1:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00930}00930\ \ \ \ \ \ \ \ \ \ \ \ \ shape\ =\ (46341,\ 46341)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00931}00931\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ np.iinfo(\textcolor{stringliteral}{'intp'}).max\ ==\ 2**63\ -\/\ 1:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00932}00932\ \ \ \ \ \ \ \ \ \ \ \ \ shape\ =\ (3037000500,\ 3037000500)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00933}00933\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00934}00934\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00935}00935\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.empty,\ shape,\ dtype=np.int8)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00936}00936\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.zeros,\ shape,\ dtype=np.int8)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00937}00937\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.ones,\ shape,\ dtype=np.int8)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00938}00938\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00939}00939\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.skipif(np.dtype(np.intp)}.itemsize\ !=\ 8,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00940}00940\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ reason=\textcolor{stringliteral}{"{}malloc\ may\ not\ fail\ on\ 32\ bit\ systems"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00941}00941\ \ \ \ \ \textcolor{keyword}{def\ }test\_malloc\_fails(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00942}00942\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ This\ test\ is\ guaranteed\ to\ fail\ due\ to\ a\ too\ large\ allocation}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00943}00943\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_raises(np.core.\_exceptions.\_ArrayMemoryError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00944}00944\ \ \ \ \ \ \ \ \ \ \ \ \ np.empty(np.iinfo(np.intp).max,\ dtype=np.uint8)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00945}00945\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00946}00946\ \ \ \ \ \textcolor{keyword}{def\ }test\_zeros(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00947}00947\ \ \ \ \ \ \ \ \ types\ =\ np.typecodes[\textcolor{stringliteral}{'AllInteger'}]\ +\ np.typecodes[\textcolor{stringliteral}{'AllFloat'}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00948}00948\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ types:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00949}00949\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.zeros((13,),\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00950}00950\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.count\_nonzero(d),\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00951}00951\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ true\ for\ ieee\ floats}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00952}00952\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(d.sum(),\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00953}00953\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ d.any())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00954}00954\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00955}00955\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.zeros(2,\ dtype=\textcolor{stringliteral}{'(2,4)i4'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00956}00956\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.count\_nonzero(d),\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00957}00957\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(d.sum(),\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00958}00958\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ d.any())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00959}00959\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00960}00960\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.zeros(2,\ dtype=\textcolor{stringliteral}{'4i4'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00961}00961\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.count\_nonzero(d),\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00962}00962\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(d.sum(),\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00963}00963\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ d.any())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00964}00964\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00965}00965\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.zeros(2,\ dtype=\textcolor{stringliteral}{'(2,4)i4,\ (2,4)i4'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00966}00966\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.count\_nonzero(d),\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00967}00967\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00968}00968\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.slow}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00969}00969\ \ \ \ \ \textcolor{keyword}{def\ }test\_zeros\_big(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00970}00970\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ big\ array\ as\ they\ might\ be\ allocated\ different\ by\ the\ system}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00971}00971\ \ \ \ \ \ \ \ \ types\ =\ np.typecodes[\textcolor{stringliteral}{'AllInteger'}]\ +\ np.typecodes[\textcolor{stringliteral}{'AllFloat'}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00972}00972\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ types:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00973}00973\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.zeros((30\ *\ 1024**2,),\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00974}00974\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ d.any())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00975}00975\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ This\ test\ can\ fail\ on\ 32-\/bit\ systems\ due\ to\ insufficient}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00976}00976\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ contiguous\ memory.\ Deallocating\ the\ previous\ array\ increases\ the}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00977}00977\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ chance\ of\ success.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00978}00978\ \ \ \ \ \ \ \ \ \ \ \ \ del(d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00979}00979\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00980}00980\ \ \ \ \ \textcolor{keyword}{def\ }test\_zeros\_obj(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00981}00981\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ initialization\ from\ PyLong(0)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00982}00982\ \ \ \ \ \ \ \ \ d\ =\ np.zeros((13,),\ dtype=object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00983}00983\ \ \ \ \ \ \ \ \ assert\_array\_equal(d,\ [0]\ *\ 13)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00984}00984\ \ \ \ \ \ \ \ \ assert\_equal(np.count\_nonzero(d),\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00985}00985\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00986}00986\ \ \ \ \ \textcolor{keyword}{def\ }test\_zeros\_obj\_obj(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00987}00987\ \ \ \ \ \ \ \ \ d\ =\ np.zeros(10,\ dtype=[(\textcolor{stringliteral}{'k'},\ object,\ 2)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00988}00988\ \ \ \ \ \ \ \ \ assert\_array\_equal(d[\textcolor{stringliteral}{'k'}],\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00989}00989\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00990}00990\ \ \ \ \ \textcolor{keyword}{def\ }test\_zeros\_like\_like\_zeros(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00991}00991\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ zeros\_like\ returns\ the\ same\ as\ zeros}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00992}00992\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ c\ \textcolor{keywordflow}{in}\ np.typecodes[\textcolor{stringliteral}{'All'}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00993}00993\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ c\ ==\ \textcolor{stringliteral}{'V'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00994}00994\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00995}00995\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.zeros((3,3),\ dtype=c)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00996}00996\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(np.zeros\_like(d),\ d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00997}00997\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.zeros\_like(d).dtype,\ d.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00998}00998\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ explicitly\ check\ some\ special\ cases}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l00999}00999\ \ \ \ \ \ \ \ \ d\ =\ np.zeros((3,3),\ dtype=\textcolor{stringliteral}{'S5'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01000}01000\ \ \ \ \ \ \ \ \ assert\_array\_equal(np.zeros\_like(d),\ d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01001}01001\ \ \ \ \ \ \ \ \ assert\_equal(np.zeros\_like(d).dtype,\ d.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01002}01002\ \ \ \ \ \ \ \ \ d\ =\ np.zeros((3,3),\ dtype=\textcolor{stringliteral}{'U5'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01003}01003\ \ \ \ \ \ \ \ \ assert\_array\_equal(np.zeros\_like(d),\ d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01004}01004\ \ \ \ \ \ \ \ \ assert\_equal(np.zeros\_like(d).dtype,\ d.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01005}01005\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01006}01006\ \ \ \ \ \ \ \ \ d\ =\ np.zeros((3,3),\ dtype=\textcolor{stringliteral}{'<i4'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01007}01007\ \ \ \ \ \ \ \ \ assert\_array\_equal(np.zeros\_like(d),\ d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01008}01008\ \ \ \ \ \ \ \ \ assert\_equal(np.zeros\_like(d).dtype,\ d.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01009}01009\ \ \ \ \ \ \ \ \ d\ =\ np.zeros((3,3),\ dtype=\textcolor{stringliteral}{'>i4'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01010}01010\ \ \ \ \ \ \ \ \ assert\_array\_equal(np.zeros\_like(d),\ d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01011}01011\ \ \ \ \ \ \ \ \ assert\_equal(np.zeros\_like(d).dtype,\ d.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01012}01012\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01013}01013\ \ \ \ \ \ \ \ \ d\ =\ np.zeros((3,3),\ dtype=\textcolor{stringliteral}{'<M8[s]'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01014}01014\ \ \ \ \ \ \ \ \ assert\_array\_equal(np.zeros\_like(d),\ d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01015}01015\ \ \ \ \ \ \ \ \ assert\_equal(np.zeros\_like(d).dtype,\ d.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01016}01016\ \ \ \ \ \ \ \ \ d\ =\ np.zeros((3,3),\ dtype=\textcolor{stringliteral}{'>M8[s]'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01017}01017\ \ \ \ \ \ \ \ \ assert\_array\_equal(np.zeros\_like(d),\ d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01018}01018\ \ \ \ \ \ \ \ \ assert\_equal(np.zeros\_like(d).dtype,\ d.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01019}01019\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01020}01020\ \ \ \ \ \ \ \ \ d\ =\ np.zeros((3,3),\ dtype=\textcolor{stringliteral}{'f4,f4'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01021}01021\ \ \ \ \ \ \ \ \ assert\_array\_equal(np.zeros\_like(d),\ d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01022}01022\ \ \ \ \ \ \ \ \ assert\_equal(np.zeros\_like(d).dtype,\ d.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01023}01023\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01024}01024\ \ \ \ \ \textcolor{keyword}{def\ }test\_empty\_unicode(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01025}01025\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ don't\ throw\ decode\ errors\ on\ garbage\ memory}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01026}01026\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(5,\ 100,\ 5):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01027}01027\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.empty(i,\ dtype=\textcolor{stringliteral}{'U'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01028}01028\ \ \ \ \ \ \ \ \ \ \ \ \ str(d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01029}01029\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01030}01030\ \ \ \ \ \textcolor{keyword}{def\ }test\_sequence\_non\_homogeneous(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01031}01031\ \ \ \ \ \ \ \ \ assert\_equal(np.array([4,\ 2**80]).dtype,\ object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01032}01032\ \ \ \ \ \ \ \ \ assert\_equal(np.array([4,\ 2**80,\ 4]).dtype,\ object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01033}01033\ \ \ \ \ \ \ \ \ assert\_equal(np.array([2**80,\ 4]).dtype,\ object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01034}01034\ \ \ \ \ \ \ \ \ assert\_equal(np.array([2**80]\ *\ 3).dtype,\ object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01035}01035\ \ \ \ \ \ \ \ \ assert\_equal(np.array([[1,\ 1],[1j,\ 1j]]).dtype,\ complex)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01036}01036\ \ \ \ \ \ \ \ \ assert\_equal(np.array([[1j,\ 1j],[1,\ 1]]).dtype,\ complex)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01037}01037\ \ \ \ \ \ \ \ \ assert\_equal(np.array([[1,\ 1,\ 1],[1,\ 1j,\ 1.],\ [1,\ 1,\ 1]]).dtype,\ complex)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01038}01038\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01039}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestCreation_a333e9634cba5592f4a8f1aa1ae94599a}{01039}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestCreation_a333e9634cba5592f4a8f1aa1ae94599a}{test\_non\_sequence\_sequence}}(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01040}01040\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Should\ not\ segfault.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01041}01041\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01042}01042\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Class\ Fail\ breaks\ the\ sequence\ protocol\ for\ new\ style\ classes,\ i.e.,}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01043}01043\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ those\ derived\ from\ object.\ Class\ Map\ is\ a\ mapping\ type\ indicated\ by}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01044}01044\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ raising\ a\ ValueError.\ At\ some\ point\ we\ may\ raise\ a\ warning\ instead}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01045}01045\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ of\ an\ error\ in\ the\ Fail\ case.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01046}01046\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01047}01047\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01048}01048\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }Fail:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01049}01049\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_len\_\_(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01050}01050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01051}01051\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01052}01052\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_getitem\_\_(self,\ index):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01053}01053\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classValueError}{ValueError}}()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01054}01054\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01055}01055\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }Map:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01056}01056\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_len\_\_(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01057}01057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01058}01058\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01059}01059\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_getitem\_\_(self,\ index):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01060}01060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classKeyError}{KeyError}}()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01061}01061\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01062}01062\ \ \ \ \ \ \ \ \ a\ =\ np.array([Map()])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01063}01063\ \ \ \ \ \ \ \ \ assert\_(a.shape\ ==\ (1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01064}01064\ \ \ \ \ \ \ \ \ assert\_(a.dtype\ ==\ np.dtype(object))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01065}01065\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.array,\ [Fail()])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01066}01066\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01067}01067\ \ \ \ \ \textcolor{keyword}{def\ }test\_no\_len\_object\_type(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01068}01068\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/5100,\ want\ object\ array\ from\ iterable\ object\ without\ len()}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01069}01069\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }Point2:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01070}01070\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01071}01071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01072}01072\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01073}01073\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_getitem\_\_(self,\ ind):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01074}01074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ind\ \textcolor{keywordflow}{in}\ [0,\ 1]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01075}01075\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ind}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01076}01076\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01077}01077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classIndexError}{IndexError}}()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01078}01078\ \ \ \ \ \ \ \ \ d\ =\ np.array([Point2(),\ Point2(),\ Point2()])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01079}01079\ \ \ \ \ \ \ \ \ assert\_equal(d.dtype,\ np.dtype(object))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01080}01080\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01081}01081\ \ \ \ \ \textcolor{keyword}{def\ }test\_false\_len\_sequence(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01082}01082\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/7264,\ segfault\ for\ this\ example}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01083}01083\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classC}{C}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01084}01084\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_getitem\_\_(self,\ i):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01085}01085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ IndexError}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01086}01086\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_len\_\_(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01087}01087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 42}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01088}01088\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01089}01089\ \ \ \ \ \ \ \ \ a\ =\ np.array(\mbox{\hyperlink{classC}{C}}())\ \textcolor{comment}{\#\ segfault?}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01090}01090\ \ \ \ \ \ \ \ \ assert\_equal(len(a),\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01091}01091\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01092}01092\ \ \ \ \ \textcolor{keyword}{def\ }test\_false\_len\_iterable(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01093}01093\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Special\ case\ where\ a\ bad\ \_\_getitem\_\_\ makes\ us\ fall\ back\ on\ \_\_iter\_\_:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01094}01094\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classC}{C}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01095}01095\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_getitem\_\_(self,\ x):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01096}01096\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ Exception}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01097}01097\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_iter\_\_(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01098}01098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ iter(())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01099}01099\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_len\_\_(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01100}01100\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 2}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01101}01101\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01102}01102\ \ \ \ \ \ \ \ \ a\ =\ np.empty(2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01103}01103\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_raises(ValueError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01104}01104\ \ \ \ \ \ \ \ \ \ \ \ \ a[:]\ =\ \mbox{\hyperlink{classC}{C}}()\ \ \textcolor{comment}{\#\ Segfault!}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01105}01105\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01106}01106\ \ \ \ \ \ \ \ \ np.array(\mbox{\hyperlink{classC}{C}}())\ ==\ list(\mbox{\hyperlink{classC}{C}}())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01107}01107\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01108}01108\ \ \ \ \ \textcolor{keyword}{def\ }test\_failed\_len\_sequence(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01109}01109\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/7393}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01110}01110\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }A:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01111}01111\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self,\ data):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01112}01112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\_data\ =\ data}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01113}01113\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_getitem\_\_(self,\ item):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01114}01114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ type(self)(self.\_data[item])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01115}01115\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_len\_\_(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01116}01116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ len(self.\_data)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01117}01117\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01118}01118\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ len(d)\ should\ give\ 3,\ but\ len(d[0])\ will\ fail}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01119}01119\ \ \ \ \ \ \ \ \ d\ =\ A([1,2,3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01120}01120\ \ \ \ \ \ \ \ \ assert\_equal(len(np.array(d)),\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01121}01121\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01122}01122\ \ \ \ \ \textcolor{keyword}{def\ }test\_array\_too\_big(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01123}01123\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ that\ array\ creation\ succeeds\ for\ arrays\ addressable\ by\ intp}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01124}01124\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ on\ the\ byte\ level\ and\ fails\ for\ too\ large\ arrays.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01125}01125\ \ \ \ \ \ \ \ \ buf\ =\ np.zeros(100)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01126}01126\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01127}01127\ \ \ \ \ \ \ \ \ max\_bytes\ =\ np.iinfo(np.intp).max}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01128}01128\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dtype\ \textcolor{keywordflow}{in}\ [\textcolor{stringliteral}{"{}intp"{}},\ \textcolor{stringliteral}{"{}S20"{}},\ \textcolor{stringliteral}{"{}b"{}}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01129}01129\ \ \ \ \ \ \ \ \ \ \ \ \ dtype\ =\ np.dtype(dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01130}01130\ \ \ \ \ \ \ \ \ \ \ \ \ itemsize\ =\ dtype.itemsize}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01131}01131\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01132}01132\ \ \ \ \ \ \ \ \ \ \ \ \ np.ndarray(buffer=buf,\ strides=(0,),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01133}01133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shape=(max\_bytes//itemsize,),\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01134}01134\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.ndarray,\ buffer=buf,\ strides=(0,),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01135}01135\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shape=(max\_bytes//itemsize\ +\ 1,),\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01136}01136\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01137}01137\ \ \ \ \ \textcolor{keyword}{def\ }\_ragged\_creation(self,\ seq):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01138}01138\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ without\ dtype=object,\ the\ ragged\ object\ raises}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01139}01139\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError,\ match=\textcolor{stringliteral}{"{}.*detected\ shape\ was"{}}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01140}01140\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.array(seq)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01141}01141\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01142}01142\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ np.array(seq,\ dtype=object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01143}01143\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01144}01144\ \ \ \ \ \textcolor{keyword}{def\ }test\_ragged\_ndim\_object(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01145}01145\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Lists\ of\ mismatching\ depths\ are\ treated\ as\ object\ arrays}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01146}01146\ \ \ \ \ \ \ \ \ a\ =\ self.\_ragged\_creation([[1],\ 2,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01147}01147\ \ \ \ \ \ \ \ \ assert\_equal(a.shape,\ (3,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01148}01148\ \ \ \ \ \ \ \ \ assert\_equal(a.dtype,\ object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01149}01149\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01150}01150\ \ \ \ \ \ \ \ \ a\ =\ self.\_ragged\_creation([1,\ [2],\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01151}01151\ \ \ \ \ \ \ \ \ assert\_equal(a.shape,\ (3,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01152}01152\ \ \ \ \ \ \ \ \ assert\_equal(a.dtype,\ object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01153}01153\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01154}01154\ \ \ \ \ \ \ \ \ a\ =\ self.\_ragged\_creation([1,\ 2,\ [3]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01155}01155\ \ \ \ \ \ \ \ \ assert\_equal(a.shape,\ (3,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01156}01156\ \ \ \ \ \ \ \ \ assert\_equal(a.dtype,\ object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01157}01157\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01158}01158\ \ \ \ \ \textcolor{keyword}{def\ }test\_ragged\_shape\_object(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01159}01159\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ ragged\ dimension\ of\ a\ list\ is\ turned\ into\ an\ object\ array}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01160}01160\ \ \ \ \ \ \ \ \ a\ =\ self.\_ragged\_creation([[1,\ 1],\ [2],\ [3]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01161}01161\ \ \ \ \ \ \ \ \ assert\_equal(a.shape,\ (3,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01162}01162\ \ \ \ \ \ \ \ \ assert\_equal(a.dtype,\ object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01163}01163\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01164}01164\ \ \ \ \ \ \ \ \ a\ =\ self.\_ragged\_creation([[1],\ [2,\ 2],\ [3]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01165}01165\ \ \ \ \ \ \ \ \ assert\_equal(a.shape,\ (3,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01166}01166\ \ \ \ \ \ \ \ \ assert\_equal(a.dtype,\ object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01167}01167\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01168}01168\ \ \ \ \ \ \ \ \ a\ =\ self.\_ragged\_creation([[1],\ [2],\ [3,\ 3]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01169}01169\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ a.shape\ ==\ (3,)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01170}01170\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ a.dtype\ ==\ object}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01171}01171\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01172}01172\ \ \ \ \ \textcolor{keyword}{def\ }test\_array\_of\_ragged\_array(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01173}01173\ \ \ \ \ \ \ \ \ outer\ =\ np.array([\textcolor{keywordtype}{None},\ \textcolor{keywordtype}{None}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01174}01174\ \ \ \ \ \ \ \ \ outer[0]\ =\ outer[1]\ =\ np.array([1,\ 2,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01175}01175\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ np.array(outer).shape\ ==\ (2,)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01176}01176\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ np.array([outer]).shape\ ==\ (1,\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01177}01177\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01178}01178\ \ \ \ \ \ \ \ \ outer\_ragged\ =\ np.array([\textcolor{keywordtype}{None},\ \textcolor{keywordtype}{None}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01179}01179\ \ \ \ \ \ \ \ \ outer\_ragged[0]\ =\ np.array([1,\ 2,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01180}01180\ \ \ \ \ \ \ \ \ outer\_ragged[1]\ =\ np.array([1,\ 2,\ 3,\ 4])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01181}01181\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ should\ both\ of\ these\ emit\ deprecation\ warnings?}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01182}01182\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ np.array(outer\_ragged).shape\ ==\ (2,)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01183}01183\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ np.array([outer\_ragged]).shape\ ==\ (1,\ 2,)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01184}01184\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01185}01185\ \ \ \ \ \textcolor{keyword}{def\ }test\_deep\_nonragged\_object(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01186}01186\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ None\ of\ these\ should\ raise,\ even\ though\ they\ are\ missing\ dtype=object}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01187}01187\ \ \ \ \ \ \ \ \ a\ =\ np.array([[[Decimal(1)]]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01188}01188\ \ \ \ \ \ \ \ \ a\ =\ np.array([1,\ Decimal(1)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01189}01189\ \ \ \ \ \ \ \ \ a\ =\ np.array([[1],\ [Decimal(1)]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01190}01190\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01191}01191\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}dtype"{},\ [object,\ "{}O,O"{},\ "{}O,(3)}O\textcolor{stringliteral}{"{},\ "{}}(2,3)O\textcolor{stringliteral}{"{}])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01192}01192\ \textcolor{stringliteral}{\ \ \ \ }\textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{"{}function"{}},\ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01193}01193\ \ \ \ \ \ \ \ \ \ \ \ \ np.ndarray,\ np.empty,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01194}01194\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{lambda}\ shape,\ dtype:\ np.empty\_like(np.empty(shape,\ dtype=dtype))])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01195}01195\ \ \ \ \ \textcolor{keyword}{def\ }test\_object\_initialized\_to\_None(self,\ function,\ dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01196}01196\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ NumPy\ has\ support\ for\ object\ fields\ to\ be\ NULL\ (meaning\ None)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01197}01197\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ but\ generally,\ we\ should\ always\ fill\ with\ the\ proper\ None,\ and}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01198}01198\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ downstream\ may\ rely\ on\ that.\ \ (For\ fully\ initialized\ arrays!)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01199}01199\ \ \ \ \ \ \ \ \ arr\ =\ \mbox{\hyperlink{classfunction}{function}}(3,\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01200}01200\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ We\ expect\ a\ fill\ value\ of\ None,\ which\ is\ not\ NULL:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01201}01201\ \ \ \ \ \ \ \ \ expected\ =\ np.array(\textcolor{keywordtype}{None}).tobytes()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01202}01202\ \ \ \ \ \ \ \ \ expected\ =\ expected\ *\ (arr.nbytes\ //\ len(expected))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01203}01203\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ arr.tobytes()\ ==\ expected}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01204}01204\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01205}01205\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{"{}func"{}},\ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01206}01206\ \ \ \ \ \ \ \ \ np.array,\ np.asarray,\ np.asanyarray,\ np.ascontiguousarray,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01207}01207\ \ \ \ \ \ \ \ \ np.asfortranarray])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01208}01208\ \ \ \ \ \textcolor{keyword}{def\ }test\_creation\_from\_dtypemeta(self,\ func):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01209}01209\ \ \ \ \ \ \ \ \ dtype\ =\ np.dtype(\textcolor{stringliteral}{'i'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01210}01210\ \ \ \ \ \ \ \ \ arr1\ =\ func([1,\ 2,\ 3],\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01211}01211\ \ \ \ \ \ \ \ \ arr2\ =\ func([1,\ 2,\ 3],\ dtype=type(dtype))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01212}01212\ \ \ \ \ \ \ \ \ assert\_array\_equal(arr1,\ arr2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01213}01213\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ arr2.dtype\ ==\ dtype}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01214}01214\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01215}01215\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01216}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStructured}{01216}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStructured}{TestStructured}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01217}01217\ \ \ \ \ \textcolor{keyword}{def\ }test\_subarray\_field\_access(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01218}01218\ \ \ \ \ \ \ \ \ a\ =\ np.zeros((3,\ 5),\ dtype=[(\textcolor{stringliteral}{'a'},\ (\textcolor{stringliteral}{'i4'},\ (2,\ 2)))])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01219}01219\ \ \ \ \ \ \ \ \ a[\textcolor{stringliteral}{'a'}]\ =\ np.arange(60).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(3,\ 5,\ 2,\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01220}01220\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01221}01221\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Since\ the\ subarray\ is\ always\ in\ C-\/order,\ a\ transpose}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01222}01222\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ does\ not\ swap\ the\ subarray:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01223}01223\ \ \ \ \ \ \ \ \ assert\_array\_equal(a.T[\textcolor{stringliteral}{'a'}],\ a[\textcolor{stringliteral}{'a'}].\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a841d0800caffc28ceef9afb4731e6ed5}{transpose}}(1,\ 0,\ 2,\ 3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01224}01224\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01225}01225\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ In\ Fortran\ order,\ the\ subarray\ gets\ appended}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01226}01226\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ like\ in\ all\ other\ cases,\ not\ prepended\ as\ a\ special\ case}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01227}01227\ \ \ \ \ \ \ \ \ b\ =\ a.copy(order=\textcolor{stringliteral}{'F'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01228}01228\ \ \ \ \ \ \ \ \ assert\_equal(a[\textcolor{stringliteral}{'a'}].shape,\ b[\textcolor{stringliteral}{'a'}].shape)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01229}01229\ \ \ \ \ \ \ \ \ assert\_equal(a.T[\textcolor{stringliteral}{'a'}].shape,\ a.T.copy()[\textcolor{stringliteral}{'a'}].shape)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01230}01230\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01231}01231\ \ \ \ \ \textcolor{keyword}{def\ }test\_subarray\_comparison(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01232}01232\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ that\ comparisons\ between\ record\ arrays\ with}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01233}01233\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ multi-\/dimensional\ field\ types\ work\ properly}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01234}01234\ \ \ \ \ \ \ \ \ a\ =\ np.rec.fromrecords(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01235}01235\ \ \ \ \ \ \ \ \ \ \ \ \ [([1,\ 2,\ 3],\ \textcolor{stringliteral}{'a'},\ [[1,\ 2],\ [3,\ 4]]),\ ([3,\ 3,\ 3],\ \textcolor{stringliteral}{'b'},\ [[0,\ 0],\ [0,\ 0]])],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01236}01236\ \ \ \ \ \ \ \ \ \ \ \ \ dtype=[(\textcolor{stringliteral}{'a'},\ (\textcolor{stringliteral}{'f4'},\ 3)),\ (\textcolor{stringliteral}{'b'},\ object),\ (\textcolor{stringliteral}{'c'},\ (\textcolor{stringliteral}{'i4'},\ (2,\ 2)))])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01237}01237\ \ \ \ \ \ \ \ \ b\ =\ a.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01238}01238\ \ \ \ \ \ \ \ \ assert\_equal(a\ ==\ b,\ [\textcolor{keyword}{True},\ \textcolor{keyword}{True}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01239}01239\ \ \ \ \ \ \ \ \ assert\_equal(a\ !=\ b,\ [\textcolor{keyword}{False},\ \textcolor{keyword}{False}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01240}01240\ \ \ \ \ \ \ \ \ b[1].b\ =\ \textcolor{stringliteral}{'c'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01241}01241\ \ \ \ \ \ \ \ \ assert\_equal(a\ ==\ b,\ [\textcolor{keyword}{True},\ \textcolor{keyword}{False}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01242}01242\ \ \ \ \ \ \ \ \ assert\_equal(a\ !=\ b,\ [\textcolor{keyword}{False},\ \textcolor{keyword}{True}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01243}01243\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(3):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01244}01244\ \ \ \ \ \ \ \ \ \ \ \ \ b[0].a\ =\ a[0].a}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01245}01245\ \ \ \ \ \ \ \ \ \ \ \ \ b[0].a[i]\ =\ 5}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01246}01246\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(a\ ==\ b,\ [\textcolor{keyword}{False},\ \textcolor{keyword}{False}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01247}01247\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(a\ !=\ b,\ [\textcolor{keyword}{True},\ \textcolor{keyword}{True}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01248}01248\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(2):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01249}01249\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ j\ \textcolor{keywordflow}{in}\ range(2):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01250}01250\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ a.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01251}01251\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ b[0].c[i,\ j]\ =\ 10}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01252}01252\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(a\ ==\ b,\ [\textcolor{keyword}{False},\ \textcolor{keyword}{True}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01253}01253\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(a\ !=\ b,\ [\textcolor{keyword}{True},\ \textcolor{keyword}{False}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01254}01254\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01255}01255\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ that\ broadcasting\ with\ a\ subarray\ works,\ including\ cases\ that}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01256}01256\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ require\ promotion\ to\ work:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01257}01257\ \ \ \ \ \ \ \ \ a\ =\ np.array([[(0,)],\ [(1,)]],\ dtype=[(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'f8'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01258}01258\ \ \ \ \ \ \ \ \ b\ =\ np.array([(0,),\ (0,),\ (1,)],\ dtype=[(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'f8'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01259}01259\ \ \ \ \ \ \ \ \ assert\_equal(a\ ==\ b,\ [[\textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False}],\ [\textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01260}01260\ \ \ \ \ \ \ \ \ assert\_equal(b\ ==\ a,\ [[\textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False}],\ [\textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01261}01261\ \ \ \ \ \ \ \ \ a\ =\ np.array([[(0,)],\ [(1,)]],\ dtype=[(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'f8'},\ (1,))])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01262}01262\ \ \ \ \ \ \ \ \ b\ =\ np.array([(0,),\ (0,),\ (1,)],\ dtype=[(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'f8'},\ (1,))])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01263}01263\ \ \ \ \ \ \ \ \ assert\_equal(a\ ==\ b,\ [[\textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False}],\ [\textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01264}01264\ \ \ \ \ \ \ \ \ assert\_equal(b\ ==\ a,\ [[\textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False}],\ [\textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01265}01265\ \ \ \ \ \ \ \ \ a\ =\ np.array([[([0,\ 0],)],\ [([1,\ 1],)]],\ dtype=[(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'f8'},\ (2,))])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01266}01266\ \ \ \ \ \ \ \ \ b\ =\ np.array([([0,\ 0],),\ ([0,\ 1],),\ ([1,\ 1],)],\ dtype=[(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'f8'},\ (2,))])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01267}01267\ \ \ \ \ \ \ \ \ assert\_equal(a\ ==\ b,\ [[\textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False}],\ [\textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01268}01268\ \ \ \ \ \ \ \ \ assert\_equal(b\ ==\ a,\ [[\textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False}],\ [\textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01269}01269\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01270}01270\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ that\ broadcasting\ Fortran-\/style\ arrays\ with\ a\ subarray\ work}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01271}01271\ \ \ \ \ \ \ \ \ a\ =\ np.array([[([0,\ 0],)],\ [([1,\ 1],)]],\ dtype=[(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'f8'},\ (2,))],\ order=\textcolor{stringliteral}{'F'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01272}01272\ \ \ \ \ \ \ \ \ b\ =\ np.array([([0,\ 0],),\ ([0,\ 1],),\ ([1,\ 1],)],\ dtype=[(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'f8'},\ (2,))])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01273}01273\ \ \ \ \ \ \ \ \ assert\_equal(a\ ==\ b,\ [[\textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False}],\ [\textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01274}01274\ \ \ \ \ \ \ \ \ assert\_equal(b\ ==\ a,\ [[\textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False}],\ [\textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01275}01275\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01276}01276\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ that\ incompatible\ sub-\/array\ shapes\ don't\ result\ to\ broadcasting}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01277}01277\ \ \ \ \ \ \ \ \ x\ =\ np.zeros((1,),\ dtype=[(\textcolor{stringliteral}{'a'},\ (\textcolor{stringliteral}{'f4'},\ (1,\ 2))),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'i1'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01278}01278\ \ \ \ \ \ \ \ \ y\ =\ np.zeros((1,),\ dtype=[(\textcolor{stringliteral}{'a'},\ (\textcolor{stringliteral}{'f4'},\ (2,))),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'i1'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01279}01279\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ main\ importance\ is\ that\ it\ does\ not\ return\ True:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01280}01280\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01281}01281\ \ \ \ \ \ \ \ \ \ \ \ \ x\ ==\ y}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01282}01282\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01283}01283\ \ \ \ \ \ \ \ \ x\ =\ np.zeros((1,),\ dtype=[(\textcolor{stringliteral}{'a'},\ (\textcolor{stringliteral}{'f4'},\ (2,\ 1))),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'i1'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01284}01284\ \ \ \ \ \ \ \ \ y\ =\ np.zeros((1,),\ dtype=[(\textcolor{stringliteral}{'a'},\ (\textcolor{stringliteral}{'f4'},\ (2,))),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'i1'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01285}01285\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ main\ importance\ is\ that\ it\ does\ not\ return\ True:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01286}01286\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01287}01287\ \ \ \ \ \ \ \ \ \ \ \ \ x\ ==\ y}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01288}01288\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01289}01289\ \ \ \ \ \textcolor{keyword}{def\ }test\_empty\_structured\_array\_comparison(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01290}01290\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ that\ comparison\ works\ on\ empty\ arrays\ with\ nontrivially}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01291}01291\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ shaped\ fields}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01292}01292\ \ \ \ \ \ \ \ \ a\ =\ np.zeros(0,\ [(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'<f8'},\ (1,\ 1))])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01293}01293\ \ \ \ \ \ \ \ \ assert\_equal(a,\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01294}01294\ \ \ \ \ \ \ \ \ a\ =\ np.zeros(0,\ [(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'<f8'},\ (1,))])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01295}01295\ \ \ \ \ \ \ \ \ assert\_equal(a,\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01296}01296\ \ \ \ \ \ \ \ \ a\ =\ np.zeros((0,\ 0),\ [(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'<f8'},\ (1,\ 1))])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01297}01297\ \ \ \ \ \ \ \ \ assert\_equal(a,\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01298}01298\ \ \ \ \ \ \ \ \ a\ =\ np.zeros((1,\ 0,\ 1),\ [(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'<f8'},\ (1,\ 1))])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01299}01299\ \ \ \ \ \ \ \ \ assert\_equal(a,\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01300}01300\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01301}01301\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}op"{},\ [operator.eq,\ operator.ne])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01302}01302\ \ \ \ \ \textcolor{keyword}{def\ }test\_structured\_array\_comparison\_bad\_broadcasts(self,\ op):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01303}01303\ \ \ \ \ \ \ \ \ a\ =\ np.zeros(3,\ dtype=\textcolor{stringliteral}{'i,i'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01304}01304\ \ \ \ \ \ \ \ \ b\ =\ np.array([],\ dtype=\textcolor{stringliteral}{"{}i,i"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01305}01305\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01306}01306\ \ \ \ \ \ \ \ \ \ \ \ \ op(a,\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01307}01307\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01308}01308\ \ \ \ \ \textcolor{keyword}{def\ }test\_structured\_comparisons\_with\_promotion(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01309}01309\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ that\ structured\ arrays\ can\ be\ compared\ so\ long\ as\ their}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01310}01310\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ dtypes\ promote\ fine:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01311}01311\ \ \ \ \ \ \ \ \ a\ =\ np.array([(5,\ 42),\ (10,\ 1)],\ dtype=[(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'>i8'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'<f8'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01312}01312\ \ \ \ \ \ \ \ \ b\ =\ np.array([(5,\ 43),\ (10,\ 1)],\ dtype=[(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'<i8'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'>f8'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01313}01313\ \ \ \ \ \ \ \ \ assert\_equal(a\ ==\ b,\ [\textcolor{keyword}{False},\ \textcolor{keyword}{True}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01314}01314\ \ \ \ \ \ \ \ \ assert\_equal(a\ !=\ b,\ [\textcolor{keyword}{True},\ \textcolor{keyword}{False}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01315}01315\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01316}01316\ \ \ \ \ \ \ \ \ a\ =\ np.array([(5,\ 42),\ (10,\ 1)],\ dtype=[(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'>f8'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'<f8'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01317}01317\ \ \ \ \ \ \ \ \ b\ =\ np.array([(5,\ 43),\ (10,\ 1)],\ dtype=[(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'<i8'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'>i8'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01318}01318\ \ \ \ \ \ \ \ \ assert\_equal(a\ ==\ b,\ [\textcolor{keyword}{False},\ \textcolor{keyword}{True}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01319}01319\ \ \ \ \ \ \ \ \ assert\_equal(a\ !=\ b,\ [\textcolor{keyword}{True},\ \textcolor{keyword}{False}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01320}01320\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01321}01321\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Including\ with\ embedded\ subarray\ dtype\ (although\ subarray\ comparison}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01322}01322\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ itself\ may\ still\ be\ a\ bit\ weird\ and\ compare\ the\ raw\ data)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01323}01323\ \ \ \ \ \ \ \ \ a\ =\ np.array([(5,\ 42),\ (10,\ 1)],\ dtype=[(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'10>f8'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'5<f8'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01324}01324\ \ \ \ \ \ \ \ \ b\ =\ np.array([(5,\ 43),\ (10,\ 1)],\ dtype=[(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'10<i8'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'5>i8'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01325}01325\ \ \ \ \ \ \ \ \ assert\_equal(a\ ==\ b,\ [\textcolor{keyword}{False},\ \textcolor{keyword}{True}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01326}01326\ \ \ \ \ \ \ \ \ assert\_equal(a\ !=\ b,\ [\textcolor{keyword}{True},\ \textcolor{keyword}{False}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01327}01327\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01328}01328\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{"{}op"{}},\ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01329}01329\ \ \ \ \ \ \ \ \ \ \ \ \ operator.eq,\ \textcolor{keyword}{lambda}\ x,\ y:\ operator.eq(y,\ x),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01330}01330\ \ \ \ \ \ \ \ \ \ \ \ \ operator.ne,\ \textcolor{keyword}{lambda}\ x,\ y:\ operator.ne(y,\ x)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01331}01331\ \ \ \ \ \textcolor{keyword}{def\ }test\_void\_comparison\_failures(self,\ op):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01332}01332\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ In\ principle,\ one\ could\ decide\ to\ return\ an\ array\ of\ False\ for\ some}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01333}01333\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ if\ comparisons\ are\ impossible.\ \ But\ right\ now\ we\ return\ TypeError}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01334}01334\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ when\ "{}void"{}\ dtype\ are\ involved.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01335}01335\ \ \ \ \ \ \ \ \ x\ =\ np.zeros(3,\ dtype=[(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'i1'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01336}01336\ \ \ \ \ \ \ \ \ y\ =\ np.zeros(3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01337}01337\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Cannot\ compare\ non-\/structured\ to\ structured:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01338}01338\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01339}01339\ \ \ \ \ \ \ \ \ \ \ \ \ op(x,\ y)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01340}01340\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01341}01341\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Added\ title\ prevents\ promotion,\ but\ casts\ are\ OK:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01342}01342\ \ \ \ \ \ \ \ \ y\ =\ np.zeros(3,\ dtype=[((\textcolor{stringliteral}{'title'},\ \textcolor{stringliteral}{'a'}),\ \textcolor{stringliteral}{'i1'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01343}01343\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ np.can\_cast(y.dtype,\ x.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01344}01344\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01345}01345\ \ \ \ \ \ \ \ \ \ \ \ \ op(x,\ y)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01346}01346\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01347}01347\ \ \ \ \ \ \ \ \ x\ =\ np.zeros(3,\ dtype=\textcolor{stringliteral}{"{}V7"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01348}01348\ \ \ \ \ \ \ \ \ y\ =\ np.zeros(3,\ dtype=\textcolor{stringliteral}{"{}V8"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01349}01349\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01350}01350\ \ \ \ \ \ \ \ \ \ \ \ \ op(x,\ y)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01351}01351\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01352}01352\ \ \ \ \ \textcolor{keyword}{def\ }test\_casting(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01353}01353\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ that\ casting\ a\ structured\ array\ to\ change\ its\ byte\ order}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01354}01354\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ works}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01355}01355\ \ \ \ \ \ \ \ \ a\ =\ np.array([(1,)],\ dtype=[(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'<i4'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01356}01356\ \ \ \ \ \ \ \ \ assert\_(np.can\_cast(a.dtype,\ [(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'>i4'})],\ casting=\textcolor{stringliteral}{'unsafe'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01357}01357\ \ \ \ \ \ \ \ \ b\ =\ a.astype([(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'>i4'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01358}01358\ \ \ \ \ \ \ \ \ assert\_equal(b,\ a.byteswap().newbyteorder())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01359}01359\ \ \ \ \ \ \ \ \ assert\_equal(a[\textcolor{stringliteral}{'a'}][0],\ b[\textcolor{stringliteral}{'a'}][0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01360}01360\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01361}01361\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ that\ equality\ comparison\ works\ on\ structured\ arrays\ if}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01362}01362\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ they\ are\ 'equiv'-\/castable}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01363}01363\ \ \ \ \ \ \ \ \ a\ =\ np.array([(5,\ 42),\ (10,\ 1)],\ dtype=[(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'>i4'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'<f8'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01364}01364\ \ \ \ \ \ \ \ \ b\ =\ np.array([(5,\ 42),\ (10,\ 1)],\ dtype=[(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'<i4'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'>f8'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01365}01365\ \ \ \ \ \ \ \ \ assert\_(np.can\_cast(a.dtype,\ b.dtype,\ casting=\textcolor{stringliteral}{'equiv'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01366}01366\ \ \ \ \ \ \ \ \ assert\_equal(a\ ==\ b,\ [\textcolor{keyword}{True},\ \textcolor{keyword}{True}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01367}01367\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01368}01368\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ that\ 'equiv'\ casting\ can\ change\ byte\ order}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01369}01369\ \ \ \ \ \ \ \ \ assert\_(np.can\_cast(a.dtype,\ b.dtype,\ casting=\textcolor{stringliteral}{'equiv'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01370}01370\ \ \ \ \ \ \ \ \ c\ =\ a.astype(b.dtype,\ casting=\textcolor{stringliteral}{'equiv'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01371}01371\ \ \ \ \ \ \ \ \ assert\_equal(a\ ==\ c,\ [\textcolor{keyword}{True},\ \textcolor{keyword}{True}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01372}01372\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01373}01373\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ that\ 'safe'\ casting\ can\ change\ byte\ order\ and\ up-\/cast}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01374}01374\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ fields}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01375}01375\ \ \ \ \ \ \ \ \ t\ =\ [(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'<i8'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'>f8'})]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01376}01376\ \ \ \ \ \ \ \ \ assert\_(np.can\_cast(a.dtype,\ t,\ casting=\textcolor{stringliteral}{'safe'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01377}01377\ \ \ \ \ \ \ \ \ c\ =\ a.astype(t,\ casting=\textcolor{stringliteral}{'safe'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01378}01378\ \ \ \ \ \ \ \ \ assert\_equal((c\ ==\ np.array([(5,\ 42),\ (10,\ 1)],\ dtype=t)),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01379}01379\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{True},\ \textcolor{keyword}{True}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01380}01380\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01381}01381\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ that\ 'same\_kind'\ casting\ can\ change\ byte\ order\ and}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01382}01382\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ change\ field\ widths\ within\ a\ "{}kind"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01383}01383\ \ \ \ \ \ \ \ \ t\ =\ [(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'<i4'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'>f4'})]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01384}01384\ \ \ \ \ \ \ \ \ assert\_(np.can\_cast(a.dtype,\ t,\ casting=\textcolor{stringliteral}{'same\_kind'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01385}01385\ \ \ \ \ \ \ \ \ c\ =\ a.astype(t,\ casting=\textcolor{stringliteral}{'same\_kind'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01386}01386\ \ \ \ \ \ \ \ \ assert\_equal((c\ ==\ np.array([(5,\ 42),\ (10,\ 1)],\ dtype=t)),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01387}01387\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{True},\ \textcolor{keyword}{True}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01388}01388\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01389}01389\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ that\ casting\ fails\ if\ the\ casting\ rule\ should\ fail\ on}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01390}01390\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ any\ of\ the\ fields}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01391}01391\ \ \ \ \ \ \ \ \ t\ =\ [(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'>i8'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'<f4'})]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01392}01392\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ np.can\_cast(a.dtype,\ t,\ casting=\textcolor{stringliteral}{'safe'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01393}01393\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ a.astype,\ t,\ casting=\textcolor{stringliteral}{'safe'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01394}01394\ \ \ \ \ \ \ \ \ t\ =\ [(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'>i2'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'<f8'})]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01395}01395\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ np.can\_cast(a.dtype,\ t,\ casting=\textcolor{stringliteral}{'equiv'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01396}01396\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ a.astype,\ t,\ casting=\textcolor{stringliteral}{'equiv'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01397}01397\ \ \ \ \ \ \ \ \ t\ =\ [(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'>i8'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'<i2'})]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01398}01398\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ np.can\_cast(a.dtype,\ t,\ casting=\textcolor{stringliteral}{'same\_kind'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01399}01399\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ a.astype,\ t,\ casting=\textcolor{stringliteral}{'same\_kind'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01400}01400\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ np.can\_cast(a.dtype,\ b.dtype,\ casting=\textcolor{stringliteral}{'no'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01401}01401\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ a.astype,\ b.dtype,\ casting=\textcolor{stringliteral}{'no'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01402}01402\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01403}01403\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ that\ non-\/'unsafe'\ casting\ can't\ change\ the\ set\ of\ field\ names}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01404}01404\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ casting\ \textcolor{keywordflow}{in}\ [\textcolor{stringliteral}{'no'},\ \textcolor{stringliteral}{'safe'},\ \textcolor{stringliteral}{'equiv'},\ \textcolor{stringliteral}{'same\_kind'}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01405}01405\ \ \ \ \ \ \ \ \ \ \ \ \ t\ =\ [(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'>i4'})]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01406}01406\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ np.can\_cast(a.dtype,\ t,\ casting=casting))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01407}01407\ \ \ \ \ \ \ \ \ \ \ \ \ t\ =\ [(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'>i4'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'<f8'}),\ (\textcolor{stringliteral}{'c'},\ \textcolor{stringliteral}{'i4'})]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01408}01408\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ np.can\_cast(a.dtype,\ t,\ casting=casting))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01409}01409\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01410}01410\ \ \ \ \ \textcolor{keyword}{def\ }test\_objview(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01411}01411\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ https://github.com/numpy/numpy/issues/3286}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01412}01412\ \ \ \ \ \ \ \ \ a\ =\ np.array([],\ dtype=[(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'f'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'f'}),\ (\textcolor{stringliteral}{'c'},\ \textcolor{stringliteral}{'O'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01413}01413\ \ \ \ \ \ \ \ \ a[[\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'b'}]]\ \ \textcolor{comment}{\#\ TypeError?}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01414}01414\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01415}01415\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ https://github.com/numpy/numpy/issues/3253}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01416}01416\ \ \ \ \ \ \ \ \ dat2\ =\ np.zeros(3,\ [(\textcolor{stringliteral}{'A'},\ \textcolor{stringliteral}{'i'}),\ (\textcolor{stringliteral}{'B'},\ \textcolor{stringliteral}{'|O'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01417}01417\ \ \ \ \ \ \ \ \ dat2[[\textcolor{stringliteral}{'B'},\ \textcolor{stringliteral}{'A'}]]\ \ \textcolor{comment}{\#\ TypeError?}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01418}01418\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01419}01419\ \ \ \ \ \textcolor{keyword}{def\ }test\_setfield(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01420}01420\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ https://github.com/numpy/numpy/issues/3126}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01421}01421\ \ \ \ \ \ \ \ \ struct\_dt\ =\ np.dtype([(\textcolor{stringliteral}{'elem'},\ \textcolor{stringliteral}{'i4'},\ 5),])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01422}01422\ \ \ \ \ \ \ \ \ dt\ =\ np.dtype([(\textcolor{stringliteral}{'field'},\ \textcolor{stringliteral}{'i4'},\ 10),(\textcolor{stringliteral}{'struct'},\ struct\_dt)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01423}01423\ \ \ \ \ \ \ \ \ x\ =\ np.zeros(1,\ dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01424}01424\ \ \ \ \ \ \ \ \ x[0][\textcolor{stringliteral}{'field'}]\ =\ np.ones(10,\ dtype=\textcolor{stringliteral}{'i4'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01425}01425\ \ \ \ \ \ \ \ \ x[0][\textcolor{stringliteral}{'struct'}]\ =\ np.ones(1,\ dtype=struct\_dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01426}01426\ \ \ \ \ \ \ \ \ assert\_equal(x[0][\textcolor{stringliteral}{'field'}],\ np.ones(10,\ dtype=\textcolor{stringliteral}{'i4'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01427}01427\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01428}01428\ \ \ \ \ \textcolor{keyword}{def\ }test\_setfield\_object(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01429}01429\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ make\ sure\ object\ field\ assignment\ with\ ndarray\ value}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01430}01430\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ on\ void\ scalar\ mimics\ setitem\ behavior}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01431}01431\ \ \ \ \ \ \ \ \ b\ =\ np.zeros(1,\ dtype=[(\textcolor{stringliteral}{'x'},\ \textcolor{stringliteral}{'O'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01432}01432\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ next\ line\ should\ work\ identically\ to\ b['x'][0]\ =\ np.arange(3)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01433}01433\ \ \ \ \ \ \ \ \ b[0][\textcolor{stringliteral}{'x'}]\ =\ np.arange(3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01434}01434\ \ \ \ \ \ \ \ \ assert\_equal(b[0][\textcolor{stringliteral}{'x'}],\ np.arange(3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01435}01435\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01436}01436\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ that\ broadcasting\ check\ still\ works}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01437}01437\ \ \ \ \ \ \ \ \ c\ =\ np.zeros(1,\ dtype=[(\textcolor{stringliteral}{'x'},\ \textcolor{stringliteral}{'O'},\ 5)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01438}01438\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01439}01439\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }testassign():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01440}01440\ \ \ \ \ \ \ \ \ \ \ \ \ c[0][\textcolor{stringliteral}{'x'}]\ =\ np.arange(3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01441}01441\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01442}01442\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ testassign)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01443}01443\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01444}01444\ \ \ \ \ \textcolor{keyword}{def\ }test\_zero\_width\_string(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01445}01445\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ for\ PR\ \#6430\ /\ issues\ \#473,\ \#4955,\ \#2585}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01446}01446\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01447}01447\ \ \ \ \ \ \ \ \ dt\ =\ np.dtype([(\textcolor{stringliteral}{'I'},\ int),\ (\textcolor{stringliteral}{'S'},\ \textcolor{stringliteral}{'S0'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01448}01448\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01449}01449\ \ \ \ \ \ \ \ \ x\ =\ np.zeros(4,\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01450}01450\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01451}01451\ \ \ \ \ \ \ \ \ assert\_equal(x[\textcolor{stringliteral}{'S'}],\ [b\textcolor{stringliteral}{''},\ b\textcolor{stringliteral}{''},\ b\textcolor{stringliteral}{''},\ b\textcolor{stringliteral}{''}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01452}01452\ \ \ \ \ \ \ \ \ assert\_equal(x[\textcolor{stringliteral}{'S'}].itemsize,\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01453}01453\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01454}01454\ \ \ \ \ \ \ \ \ x[\textcolor{stringliteral}{'S'}]\ =\ [\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'c'},\ \textcolor{stringliteral}{'d'}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01455}01455\ \ \ \ \ \ \ \ \ assert\_equal(x[\textcolor{stringliteral}{'S'}],\ [b\textcolor{stringliteral}{''},\ b\textcolor{stringliteral}{''},\ b\textcolor{stringliteral}{''},\ b\textcolor{stringliteral}{''}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01456}01456\ \ \ \ \ \ \ \ \ assert\_equal(x[\textcolor{stringliteral}{'I'}],\ [0,\ 0,\ 0,\ 0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01457}01457\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01458}01458\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Variation\ on\ test\ case\ from\ \#4955}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01459}01459\ \ \ \ \ \ \ \ \ x[\textcolor{stringliteral}{'S'}][x[\textcolor{stringliteral}{'I'}]\ ==\ 0]\ =\ \textcolor{stringliteral}{'hello'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01460}01460\ \ \ \ \ \ \ \ \ assert\_equal(x[\textcolor{stringliteral}{'S'}],\ [b\textcolor{stringliteral}{''},\ b\textcolor{stringliteral}{''},\ b\textcolor{stringliteral}{''},\ b\textcolor{stringliteral}{''}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01461}01461\ \ \ \ \ \ \ \ \ assert\_equal(x[\textcolor{stringliteral}{'I'}],\ [0,\ 0,\ 0,\ 0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01462}01462\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01463}01463\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Variation\ on\ test\ case\ from\ \#2585}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01464}01464\ \ \ \ \ \ \ \ \ x[\textcolor{stringliteral}{'S'}]\ =\ \textcolor{stringliteral}{'A'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01465}01465\ \ \ \ \ \ \ \ \ assert\_equal(x[\textcolor{stringliteral}{'S'}],\ [b\textcolor{stringliteral}{''},\ b\textcolor{stringliteral}{''},\ b\textcolor{stringliteral}{''},\ b\textcolor{stringliteral}{''}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01466}01466\ \ \ \ \ \ \ \ \ assert\_equal(x[\textcolor{stringliteral}{'I'}],\ [0,\ 0,\ 0,\ 0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01467}01467\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01468}01468\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Allow\ zero-\/width\ dtypes\ in\ ndarray\ constructor}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01469}01469\ \ \ \ \ \ \ \ \ y\ =\ np.ndarray(4,\ dtype=x[\textcolor{stringliteral}{'S'}].dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01470}01470\ \ \ \ \ \ \ \ \ assert\_equal(y.itemsize,\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01471}01471\ \ \ \ \ \ \ \ \ assert\_equal(x[\textcolor{stringliteral}{'S'}],\ y)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01472}01472\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01473}01473\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ More\ tests\ for\ indexing\ an\ array\ with\ zero-\/width\ fields}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01474}01474\ \ \ \ \ \ \ \ \ assert\_equal(np.zeros(4,\ dtype=[(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'S0,S0'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01475}01475\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'u1'})])[\textcolor{stringliteral}{'a'}].itemsize,\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01476}01476\ \ \ \ \ \ \ \ \ assert\_equal(np.empty(3,\ dtype=\textcolor{stringliteral}{'S0,S0'}).itemsize,\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01477}01477\ \ \ \ \ \ \ \ \ assert\_equal(np.zeros(4,\ dtype=\textcolor{stringliteral}{'S0,u1'})[\textcolor{stringliteral}{'f0'}].itemsize,\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01478}01478\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01479}01479\ \ \ \ \ \ \ \ \ xx\ =\ x[\textcolor{stringliteral}{'S'}].\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}((2,\ 2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01480}01480\ \ \ \ \ \ \ \ \ assert\_equal(xx.itemsize,\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01481}01481\ \ \ \ \ \ \ \ \ assert\_equal(xx,\ [[b\textcolor{stringliteral}{''},\ b\textcolor{stringliteral}{''}],\ [b\textcolor{stringliteral}{''},\ b\textcolor{stringliteral}{''}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01482}01482\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ for\ no\ uninitialized\ memory\ due\ to\ viewing\ S0\ array}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01483}01483\ \ \ \ \ \ \ \ \ assert\_equal(xx[:].dtype,\ xx.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01484}01484\ \ \ \ \ \ \ \ \ assert\_array\_equal(eval(repr(xx),\ dict(array=np.array)),\ xx)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01485}01485\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01486}01486\ \ \ \ \ \ \ \ \ b\ =\ io.BytesIO()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01487}01487\ \ \ \ \ \ \ \ \ np.save(b,\ xx)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01488}01488\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01489}01489\ \ \ \ \ \ \ \ \ b.seek(0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01490}01490\ \ \ \ \ \ \ \ \ yy\ =\ np.load(b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01491}01491\ \ \ \ \ \ \ \ \ assert\_equal(yy.itemsize,\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01492}01492\ \ \ \ \ \ \ \ \ assert\_equal(xx,\ yy)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01493}01493\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01494}01494\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ temppath(suffix=\textcolor{stringliteral}{'.npy'})\ \textcolor{keyword}{as}\ tmp:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01495}01495\ \ \ \ \ \ \ \ \ \ \ \ \ np.save(tmp,\ xx)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01496}01496\ \ \ \ \ \ \ \ \ \ \ \ \ yy\ =\ np.load(tmp)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01497}01497\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(yy.itemsize,\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01498}01498\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(xx,\ yy)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01499}01499\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01500}01500\ \ \ \ \ \textcolor{keyword}{def\ }test\_base\_attr(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01501}01501\ \ \ \ \ \ \ \ \ a\ =\ np.zeros(3,\ dtype=\textcolor{stringliteral}{'i4,f4'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01502}01502\ \ \ \ \ \ \ \ \ b\ =\ a[0]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01503}01503\ \ \ \ \ \ \ \ \ assert\_(b.base\ \textcolor{keywordflow}{is}\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01504}01504\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01505}01505\ \ \ \ \ \textcolor{keyword}{def\ }test\_assignment(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01506}01506\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }testassign(arr,\ v):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01507}01507\ \ \ \ \ \ \ \ \ \ \ \ \ c\ =\ arr.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01508}01508\ \ \ \ \ \ \ \ \ \ \ \ \ c[0]\ =\ v\ \ \textcolor{comment}{\#\ assign\ using\ setitem}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01509}01509\ \ \ \ \ \ \ \ \ \ \ \ \ c[1:]\ =\ v\ \textcolor{comment}{\#\ assign\ using\ "{}dtype\_transfer"{}\ code\ paths}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01510}01510\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ c}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01511}01511\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01512}01512\ \ \ \ \ \ \ \ \ dt\ =\ np.dtype([(\textcolor{stringliteral}{'foo'},\ \textcolor{stringliteral}{'i8'}),\ (\textcolor{stringliteral}{'bar'},\ \textcolor{stringliteral}{'i8'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01513}01513\ \ \ \ \ \ \ \ \ arr\ =\ np.ones(2,\ dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01514}01514\ \ \ \ \ \ \ \ \ v1\ =\ np.array([(2,3)],\ dtype=[(\textcolor{stringliteral}{'foo'},\ \textcolor{stringliteral}{'i8'}),\ (\textcolor{stringliteral}{'bar'},\ \textcolor{stringliteral}{'i8'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01515}01515\ \ \ \ \ \ \ \ \ v2\ =\ np.array([(2,3)],\ dtype=[(\textcolor{stringliteral}{'bar'},\ \textcolor{stringliteral}{'i8'}),\ (\textcolor{stringliteral}{'foo'},\ \textcolor{stringliteral}{'i8'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01516}01516\ \ \ \ \ \ \ \ \ v3\ =\ np.array([(2,3)],\ dtype=[(\textcolor{stringliteral}{'bar'},\ \textcolor{stringliteral}{'i8'}),\ (\textcolor{stringliteral}{'baz'},\ \textcolor{stringliteral}{'i8'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01517}01517\ \ \ \ \ \ \ \ \ v4\ =\ np.array([(2,)],\ \ dtype=[(\textcolor{stringliteral}{'bar'},\ \textcolor{stringliteral}{'i8'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01518}01518\ \ \ \ \ \ \ \ \ v5\ =\ np.array([(2,3)],\ dtype=[(\textcolor{stringliteral}{'foo'},\ \textcolor{stringliteral}{'f8'}),\ (\textcolor{stringliteral}{'bar'},\ \textcolor{stringliteral}{'f8'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01519}01519\ \ \ \ \ \ \ \ \ w\ =\ arr.view(\{\textcolor{stringliteral}{'names'}:\ [\textcolor{stringliteral}{'bar'}],\ \textcolor{stringliteral}{'formats'}:\ [\textcolor{stringliteral}{'i8'}],\ \textcolor{stringliteral}{'offsets'}:\ [8]\})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01520}01520\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01521}01521\ \ \ \ \ \ \ \ \ ans\ =\ np.array([(2,3),(2,3)],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01522}01522\ \ \ \ \ \ \ \ \ assert\_equal(testassign(arr,\ v1),\ ans)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01523}01523\ \ \ \ \ \ \ \ \ assert\_equal(testassign(arr,\ v2),\ ans)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01524}01524\ \ \ \ \ \ \ \ \ assert\_equal(testassign(arr,\ v3),\ ans)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01525}01525\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ \textcolor{keyword}{lambda}:\ testassign(arr,\ v4))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01526}01526\ \ \ \ \ \ \ \ \ assert\_equal(testassign(arr,\ v5),\ ans)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01527}01527\ \ \ \ \ \ \ \ \ w[:]\ =\ 4}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01528}01528\ \ \ \ \ \ \ \ \ assert\_equal(arr,\ np.array([(1,4),(1,4)],\ dtype=dt))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01529}01529\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01530}01530\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ field-\/reordering,\ assignment\ by\ position,\ and\ self-\/assignment}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01531}01531\ \ \ \ \ \ \ \ \ a\ =\ np.array([(1,2,3)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01532}01532\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=[(\textcolor{stringliteral}{'foo'},\ \textcolor{stringliteral}{'i8'}),\ (\textcolor{stringliteral}{'bar'},\ \textcolor{stringliteral}{'i8'}),\ (\textcolor{stringliteral}{'baz'},\ \textcolor{stringliteral}{'f4'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01533}01533\ \ \ \ \ \ \ \ \ a[[\textcolor{stringliteral}{'foo'},\ \textcolor{stringliteral}{'bar'}]]\ =\ a[[\textcolor{stringliteral}{'bar'},\ \textcolor{stringliteral}{'foo'}]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01534}01534\ \ \ \ \ \ \ \ \ assert\_equal(a[0].item(),\ (2,1,3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01535}01535\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01536}01536\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ that\ this\ works\ even\ for\ 'simple\_unaligned'\ structs}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01537}01537\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ (ie,\ that\ PyArray\_EquivTypes\ cares\ about\ field\ order\ too)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01538}01538\ \ \ \ \ \ \ \ \ a\ =\ np.array([(1,2)],\ dtype=[(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'i4'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'i4'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01539}01539\ \ \ \ \ \ \ \ \ a[[\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'b'}]]\ =\ a[[\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'a'}]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01540}01540\ \ \ \ \ \ \ \ \ assert\_equal(a[0].item(),\ (2,1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01541}01541\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01542}01542\ \ \ \ \ \textcolor{keyword}{def\ }test\_scalar\_assignment(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01543}01543\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_raises(ValueError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01544}01544\ \ \ \ \ \ \ \ \ \ \ \ \ arr\ =\ np.arange(25).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(5,\ 5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01545}01545\ \ \ \ \ \ \ \ \ \ \ \ \ arr.itemset(3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01546}01546\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01547}01547\ \ \ \ \ \textcolor{keyword}{def\ }test\_structuredscalar\_indexing(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01548}01548\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ gh-\/7262}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01549}01549\ \ \ \ \ \ \ \ \ x\ =\ np.empty(shape=1,\ dtype=\textcolor{stringliteral}{"{}(2)3S,(2)3U"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01550}01550\ \ \ \ \ \ \ \ \ assert\_equal(x[[\textcolor{stringliteral}{"{}f0"{}},\textcolor{stringliteral}{"{}f1"{}}]][0],\ x[0][[\textcolor{stringliteral}{"{}f0"{}},\textcolor{stringliteral}{"{}f1"{}}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01551}01551\ \ \ \ \ \ \ \ \ assert\_equal(x[0],\ x[0][()])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01552}01552\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01553}01553\ \ \ \ \ \textcolor{keyword}{def\ }test\_multiindex\_titles(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01554}01554\ \ \ \ \ \ \ \ \ a\ =\ np.zeros(4,\ dtype=[((\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'b'}),\ \textcolor{stringliteral}{'i'}),\ (\textcolor{stringliteral}{'c'},\ \textcolor{stringliteral}{'i'}),\ (\textcolor{stringliteral}{'d'},\ \textcolor{stringliteral}{'i'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01555}01555\ \ \ \ \ \ \ \ \ assert\_raises(KeyError,\ \textcolor{keyword}{lambda}\ :\ a[[\textcolor{stringliteral}{'a'},\textcolor{stringliteral}{'c'}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01556}01556\ \ \ \ \ \ \ \ \ assert\_raises(KeyError,\ \textcolor{keyword}{lambda}\ :\ a[[\textcolor{stringliteral}{'a'},\textcolor{stringliteral}{'a'}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01557}01557\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ \textcolor{keyword}{lambda}\ :\ a[[\textcolor{stringliteral}{'b'},\textcolor{stringliteral}{'b'}]])\ \ \textcolor{comment}{\#\ field\ exists,\ but\ repeated}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01558}01558\ \ \ \ \ \ \ \ \ a[[\textcolor{stringliteral}{'b'},\textcolor{stringliteral}{'c'}]]\ \ \textcolor{comment}{\#\ no\ exception}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01559}01559\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01560}01560\ \ \ \ \ \textcolor{keyword}{def\ }test\_structured\_cast\_promotion\_fieldorder(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01561}01561\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/15494}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01562}01562\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ dtypes\ with\ different\ field\ names\ are\ not\ promotable}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01563}01563\ \ \ \ \ \ \ \ \ A\ =\ (\textcolor{stringliteral}{"{}a"{}},\ \textcolor{stringliteral}{"{}<i8"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01564}01564\ \ \ \ \ \ \ \ \ B\ =\ (\textcolor{stringliteral}{"{}b"{}},\ \textcolor{stringliteral}{"{}>i8"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01565}01565\ \ \ \ \ \ \ \ \ ab\ =\ np.array([(1,\ 2)],\ dtype=[A,\ B])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01566}01566\ \ \ \ \ \ \ \ \ ba\ =\ np.array([(1,\ 2)],\ dtype=[B,\ A])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01567}01567\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ np.concatenate,\ ab,\ ba)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01568}01568\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ np.result\_type,\ ab.dtype,\ ba.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01569}01569\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ np.promote\_types,\ ab.dtype,\ ba.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01570}01570\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01571}01571\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ dtypes\ with\ same\ field\ names/order\ but\ different\ memory\ offsets}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01572}01572\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ and\ byte-\/order\ are\ promotable\ to\ packed\ nbo.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01573}01573\ \ \ \ \ \ \ \ \ assert\_equal(np.promote\_types(ab.dtype,\ ba[[\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'b'}]].dtype),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01574}01574\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ repack\_fields(ab.dtype.newbyteorder(\textcolor{stringliteral}{'N'})))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01575}01575\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01576}01576\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/13667}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01577}01577\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ dtypes\ with\ different\ fieldnames\ but\ castable\ field\ types\ are\ castable}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01578}01578\ \ \ \ \ \ \ \ \ assert\_equal(np.can\_cast(ab.dtype,\ ba.dtype),\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01579}01579\ \ \ \ \ \ \ \ \ assert\_equal(ab.astype(ba.dtype).dtype,\ ba.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01580}01580\ \ \ \ \ \ \ \ \ assert\_equal(np.can\_cast(\textcolor{stringliteral}{'f8,i8'},\ [(\textcolor{stringliteral}{'f0'},\ \textcolor{stringliteral}{'f8'}),\ (\textcolor{stringliteral}{'f1'},\ \textcolor{stringliteral}{'i8'})]),\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01581}01581\ \ \ \ \ \ \ \ \ assert\_equal(np.can\_cast(\textcolor{stringliteral}{'f8,i8'},\ [(\textcolor{stringliteral}{'f1'},\ \textcolor{stringliteral}{'f8'}),\ (\textcolor{stringliteral}{'f0'},\ \textcolor{stringliteral}{'i8'})]),\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01582}01582\ \ \ \ \ \ \ \ \ assert\_equal(np.can\_cast(\textcolor{stringliteral}{'f8,i8'},\ [(\textcolor{stringliteral}{'f1'},\ \textcolor{stringliteral}{'i8'}),\ (\textcolor{stringliteral}{'f0'},\ \textcolor{stringliteral}{'f8'})]),\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01583}01583\ \ \ \ \ \ \ \ \ assert\_equal(np.can\_cast(\textcolor{stringliteral}{'f8,i8'},\ [(\textcolor{stringliteral}{'f1'},\ \textcolor{stringliteral}{'i8'}),\ (\textcolor{stringliteral}{'f0'},\ \textcolor{stringliteral}{'f8'})],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01584}01584\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ casting=\textcolor{stringliteral}{'unsafe'}),\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01585}01585\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01586}01586\ \ \ \ \ \ \ \ \ ab[:]\ =\ ba\ \ \textcolor{comment}{\#\ make\ sure\ assignment\ still\ works}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01587}01587\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01588}01588\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ tests\ of\ type-\/promotion\ of\ corresponding\ fields}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01589}01589\ \ \ \ \ \ \ \ \ dt1\ =\ np.dtype([(\textcolor{stringliteral}{"{}"{}},\ \textcolor{stringliteral}{"{}i4"{}})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01590}01590\ \ \ \ \ \ \ \ \ dt2\ =\ np.dtype([(\textcolor{stringliteral}{"{}"{}},\ \textcolor{stringliteral}{"{}i8"{}})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01591}01591\ \ \ \ \ \ \ \ \ assert\_equal(np.promote\_types(dt1,\ dt2),\ np.dtype([(\textcolor{stringliteral}{'f0'},\ \textcolor{stringliteral}{'i8'})]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01592}01592\ \ \ \ \ \ \ \ \ assert\_equal(np.promote\_types(dt2,\ dt1),\ np.dtype([(\textcolor{stringliteral}{'f0'},\ \textcolor{stringliteral}{'i8'})]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01593}01593\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ np.promote\_types,\ dt1,\ np.dtype([(\textcolor{stringliteral}{"{}"{}},\ \textcolor{stringliteral}{"{}V3"{}})]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01594}01594\ \ \ \ \ \ \ \ \ assert\_equal(np.promote\_types(\textcolor{stringliteral}{'i4,f8'},\ \textcolor{stringliteral}{'i8,f4'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01595}01595\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.dtype([(\textcolor{stringliteral}{'f0'},\ \textcolor{stringliteral}{'i8'}),\ (\textcolor{stringliteral}{'f1'},\ \textcolor{stringliteral}{'f8'})]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01596}01596\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ nested\ case}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01597}01597\ \ \ \ \ \ \ \ \ dt1nest\ =\ np.dtype([(\textcolor{stringliteral}{"{}"{}},\ dt1)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01598}01598\ \ \ \ \ \ \ \ \ dt2nest\ =\ np.dtype([(\textcolor{stringliteral}{"{}"{}},\ dt2)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01599}01599\ \ \ \ \ \ \ \ \ assert\_equal(np.promote\_types(dt1nest,\ dt2nest),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01600}01600\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.dtype([(\textcolor{stringliteral}{'f0'},\ np.dtype([(\textcolor{stringliteral}{'f0'},\ \textcolor{stringliteral}{'i8'})]))]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01601}01601\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01602}01602\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ note\ that\ offsets\ are\ lost\ when\ promoting:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01603}01603\ \ \ \ \ \ \ \ \ dt\ =\ np.dtype(\{\textcolor{stringliteral}{'names'}:\ [\textcolor{stringliteral}{'x'}],\ \textcolor{stringliteral}{'formats'}:\ [\textcolor{stringliteral}{'i4'}],\ \textcolor{stringliteral}{'offsets'}:\ [8]\})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01604}01604\ \ \ \ \ \ \ \ \ a\ =\ np.ones(3,\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01605}01605\ \ \ \ \ \ \ \ \ assert\_equal(np.concatenate([a,\ a]).dtype,\ np.dtype([(\textcolor{stringliteral}{'x'},\ \textcolor{stringliteral}{'i4'})]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01606}01606\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01607}01607\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{"{}dtype\_dict"{}},\ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01608}01608\ \ \ \ \ \ \ \ \ \ \ \ \ dict(names=[\textcolor{stringliteral}{"{}a"{}},\ \textcolor{stringliteral}{"{}b"{}}],\ formats=[\textcolor{stringliteral}{"{}i4"{}},\ \textcolor{stringliteral}{"{}f"{}}],\ itemsize=100),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01609}01609\ \ \ \ \ \ \ \ \ \ \ \ \ dict(names=[\textcolor{stringliteral}{"{}a"{}},\ \textcolor{stringliteral}{"{}b"{}}],\ formats=[\textcolor{stringliteral}{"{}i4"{}},\ \textcolor{stringliteral}{"{}f"{}}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01610}01610\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ offsets=[0,\ 12])])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01611}01611\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}align"{},\ [True,\ False])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01612}01612\ \ \ \ \ \textcolor{keyword}{def\ }test\_structured\_promotion\_packs(self,\ dtype\_dict,\ align):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01613}01613\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Structured\ dtypes\ are\ packed\ when\ promoted\ (we\ consider\ the\ packed}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01614}01614\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ form\ to\ be\ "{}canonical"{}),\ so\ tere\ is\ no\ extra\ padding.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01615}01615\ \ \ \ \ \ \ \ \ dtype\ =\ np.dtype(dtype\_dict,\ align=align)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01616}01616\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Remove\ non\ "{}canonical"{}\ dtype\ options:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01617}01617\ \ \ \ \ \ \ \ \ dtype\_dict.pop(\textcolor{stringliteral}{"{}itemsize"{}},\ \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01618}01618\ \ \ \ \ \ \ \ \ dtype\_dict.pop(\textcolor{stringliteral}{"{}offsets"{}},\ \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01619}01619\ \ \ \ \ \ \ \ \ expected\ =\ np.dtype(dtype\_dict,\ align=align)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01620}01620\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01621}01621\ \ \ \ \ \ \ \ \ res\ =\ np.promote\_types(dtype,\ dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01622}01622\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ res.itemsize\ ==\ expected.itemsize}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01623}01623\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ res.fields\ ==\ expected.fields}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01624}01624\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01625}01625\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ But\ the\ "{}expected"{}\ one,\ should\ just\ be\ returned\ unchanged:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01626}01626\ \ \ \ \ \ \ \ \ res\ =\ np.promote\_types(expected,\ expected)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01627}01627\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ res\ \textcolor{keywordflow}{is}\ expected}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01628}01628\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01629}01629\ \ \ \ \ \textcolor{keyword}{def\ }test\_structured\_asarray\_is\_view(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01630}01630\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ A\ scalar\ viewing\ an\ array\ preserves\ its\ view\ even\ when\ creating\ a}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01631}01631\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ new\ array.\ This\ test\ documents\ behaviour,\ it\ may\ not\ be\ the\ best}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01632}01632\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ desired\ behaviour.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01633}01633\ \ \ \ \ \ \ \ \ arr\ =\ np.array([1],\ dtype=\textcolor{stringliteral}{"{}i,i"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01634}01634\ \ \ \ \ \ \ \ \ scalar\ =\ arr[0]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01635}01635\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ \textcolor{keywordflow}{not}\ scalar.flags.owndata\ \ \textcolor{comment}{\#\ view\ into\ the\ array}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01636}01636\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ np.asarray(scalar).base\ \textcolor{keywordflow}{is}\ scalar}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01637}01637\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ But\ never\ when\ a\ dtype\ is\ passed\ in:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01638}01638\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ np.asarray(scalar,\ dtype=scalar.dtype).base\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01639}01639\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ A\ scalar\ which\ owns\ its\ data\ does\ not\ have\ this\ property.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01640}01640\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ It\ is\ not\ easy\ to\ create\ one,\ one\ method\ is\ to\ use\ pickle:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01641}01641\ \ \ \ \ \ \ \ \ scalar\ =\ pickle.loads(pickle.dumps(scalar))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01642}01642\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ scalar.flags.owndata}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01643}01643\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ np.asarray(scalar).base\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01644}01644\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01645}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestBool}{01645}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestBool}{TestBool}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01646}01646\ \ \ \ \ \textcolor{keyword}{def\ }test\_test\_interning(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01647}01647\ \ \ \ \ \ \ \ \ a0\ =\ np.bool\_(0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01648}01648\ \ \ \ \ \ \ \ \ b0\ =\ np.bool\_(\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01649}01649\ \ \ \ \ \ \ \ \ assert\_(a0\ \textcolor{keywordflow}{is}\ b0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01650}01650\ \ \ \ \ \ \ \ \ a1\ =\ np.bool\_(1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01651}01651\ \ \ \ \ \ \ \ \ b1\ =\ np.bool\_(\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01652}01652\ \ \ \ \ \ \ \ \ assert\_(a1\ \textcolor{keywordflow}{is}\ b1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01653}01653\ \ \ \ \ \ \ \ \ assert\_(np.array([\textcolor{keyword}{True}])[0]\ \textcolor{keywordflow}{is}\ a1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01654}01654\ \ \ \ \ \ \ \ \ assert\_(np.array(\textcolor{keyword}{True})[()]\ \textcolor{keywordflow}{is}\ a1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01655}01655\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01656}01656\ \ \ \ \ \textcolor{keyword}{def\ }test\_sum(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01657}01657\ \ \ \ \ \ \ \ \ d\ =\ np.ones(101,\ dtype=bool)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01658}01658\ \ \ \ \ \ \ \ \ assert\_equal(d.sum(),\ d.size)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01659}01659\ \ \ \ \ \ \ \ \ assert\_equal(d[::2].\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a51411b3b0c037cf12ac140486f46cfd9}{sum}}(),\ d[::2].size)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01660}01660\ \ \ \ \ \ \ \ \ assert\_equal(d[::-\/2].\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a51411b3b0c037cf12ac140486f46cfd9}{sum}}(),\ d[::-\/2].size)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01661}01661\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01662}01662\ \ \ \ \ \ \ \ \ d\ =\ np.frombuffer(b\textcolor{stringliteral}{'\(\backslash\)xff\(\backslash\)xff'}\ *\ 100,\ dtype=bool)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01663}01663\ \ \ \ \ \ \ \ \ assert\_equal(d.sum(),\ d.size)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01664}01664\ \ \ \ \ \ \ \ \ assert\_equal(d[::2].\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a51411b3b0c037cf12ac140486f46cfd9}{sum}}(),\ d[::2].size)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01665}01665\ \ \ \ \ \ \ \ \ assert\_equal(d[::-\/2].\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a51411b3b0c037cf12ac140486f46cfd9}{sum}}(),\ d[::-\/2].size)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01666}01666\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01667}01667\ \ \ \ \ \textcolor{keyword}{def\ }check\_count\_nonzero(self,\ power,\ length):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01668}01668\ \ \ \ \ \ \ \ \ powers\ =\ [2\ **\ i\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(length)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01669}01669\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(2**power):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01670}01670\ \ \ \ \ \ \ \ \ \ \ \ \ l\ =\ [(i\ \&\ x)\ !=\ 0\ \textcolor{keywordflow}{for}\ x\ \textcolor{keywordflow}{in}\ powers]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01671}01671\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.array(l,\ dtype=bool)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01672}01672\ \ \ \ \ \ \ \ \ \ \ \ \ c\ =\ builtins.sum(l)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01673}01673\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.count\_nonzero(a),\ c)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01674}01674\ \ \ \ \ \ \ \ \ \ \ \ \ av\ =\ a.view(np.uint8)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01675}01675\ \ \ \ \ \ \ \ \ \ \ \ \ av\ *=\ 3}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01676}01676\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.count\_nonzero(a),\ c)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01677}01677\ \ \ \ \ \ \ \ \ \ \ \ \ av\ *=\ 4}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01678}01678\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.count\_nonzero(a),\ c)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01679}01679\ \ \ \ \ \ \ \ \ \ \ \ \ av[av\ !=\ 0]\ =\ 0xFF}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01680}01680\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.count\_nonzero(a),\ c)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01681}01681\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01682}01682\ \ \ \ \ \textcolor{keyword}{def\ }test\_count\_nonzero(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01683}01683\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ all\ 12\ bit\ combinations\ in\ a\ length\ 17\ array}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01684}01684\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ covers\ most\ cases\ of\ the\ 16\ byte\ unrolled\ code}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01685}01685\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestBool_ab5dc50d4d2c0de12267d013ea2807ead}{check\_count\_nonzero}}(12,\ 17)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01686}01686\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01687}01687\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.slow}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01688}01688\ \ \ \ \ \textcolor{keyword}{def\ }test\_count\_nonzero\_all(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01689}01689\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ all\ combinations\ in\ a\ length\ 17\ array}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01690}01690\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ covers\ all\ cases\ of\ the\ 16\ byte\ unrolled\ code}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01691}01691\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestBool_ab5dc50d4d2c0de12267d013ea2807ead}{check\_count\_nonzero}}(17,\ 17)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01692}01692\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01693}01693\ \ \ \ \ \textcolor{keyword}{def\ }test\_count\_nonzero\_unaligned(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01694}01694\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ prevent\ mistakes\ as\ e.g.\ gh-\/4060}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01695}01695\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ o\ \textcolor{keywordflow}{in}\ range(7):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01696}01696\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.zeros((18,),\ dtype=bool)[o+1:]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01697}01697\ \ \ \ \ \ \ \ \ \ \ \ \ a[:o]\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01698}01698\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.count\_nonzero(a),\ builtins.sum(a.tolist()))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01699}01699\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.ones((18,),\ dtype=bool)[o+1:]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01700}01700\ \ \ \ \ \ \ \ \ \ \ \ \ a[:o]\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01701}01701\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.count\_nonzero(a),\ builtins.sum(a.tolist()))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01702}01702\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01703}01703\ \ \ \ \ \textcolor{keyword}{def\ }\_test\_cast\_from\_flexible(self,\ dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01704}01704\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ empty\ string\ -\/>\ false}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01705}01705\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ n\ \textcolor{keywordflow}{in}\ range(3):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01706}01706\ \ \ \ \ \ \ \ \ \ \ \ \ v\ =\ np.array(b\textcolor{stringliteral}{''},\ (dtype,\ n))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01707}01707\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(bool(v),\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01708}01708\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(bool(v[()]),\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01709}01709\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(v.astype(bool),\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01710}01710\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(isinstance(v.astype(bool),\ np.ndarray))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01711}01711\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(v[()].astype(bool)\ \textcolor{keywordflow}{is}\ np.False\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01712}01712\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01713}01713\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ anything\ else\ -\/>\ true}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01714}01714\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ n\ \textcolor{keywordflow}{in}\ range(1,\ 4):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01715}01715\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ val\ \textcolor{keywordflow}{in}\ [b\textcolor{stringliteral}{'a'},\ b\textcolor{stringliteral}{'0'},\ b\textcolor{stringliteral}{'\ '}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01716}01716\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v\ =\ np.array(val,\ (dtype,\ n))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01717}01717\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(bool(v),\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01718}01718\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(bool(v[()]),\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01719}01719\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(v.astype(bool),\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01720}01720\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(isinstance(v.astype(bool),\ np.ndarray))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01721}01721\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(v[()].astype(bool)\ \textcolor{keywordflow}{is}\ np.True\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01722}01722\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01723}01723\ \ \ \ \ \textcolor{keyword}{def\ }test\_cast\_from\_void(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01724}01724\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestBool_a4e2516ab7d2a5328b4ac30c5d594b93a}{\_test\_cast\_from\_flexible}}(np.void)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01725}01725\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01726}01726\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.xfail(reason="{}See\ gh-\/9847"{})}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01727}01727\ \ \ \ \ \textcolor{keyword}{def\ }test\_cast\_from\_unicode(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01728}01728\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestBool_a4e2516ab7d2a5328b4ac30c5d594b93a}{\_test\_cast\_from\_flexible}}(np.str\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01729}01729\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01730}01730\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.xfail(reason="{}See\ gh-\/9847"{})}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01731}01731\ \ \ \ \ \textcolor{keyword}{def\ }test\_cast\_from\_bytes(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01732}01732\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestBool_a4e2516ab7d2a5328b4ac30c5d594b93a}{\_test\_cast\_from\_flexible}}(np.bytes\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01733}01733\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01734}01734\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01735}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroSizeFlexible}{01735}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroSizeFlexible}{TestZeroSizeFlexible}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01736}01736\ \ \ \ \ \textcolor{preprocessor}{@staticmethod}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01737}01737\ \ \ \ \ \textcolor{keyword}{def\ }\_zeros(shape,\ dtype=str):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01738}01738\ \ \ \ \ \ \ \ \ dtype\ =\ np.dtype(dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01739}01739\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ dtype\ ==\ np.void:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01740}01740\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ np.zeros(shape,\ dtype=(dtype,\ 0))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01741}01741\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01742}01742\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ not\ constructable\ directly}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01743}01743\ \ \ \ \ \ \ \ \ dtype\ =\ np.dtype([(\textcolor{stringliteral}{'x'},\ dtype,\ 0)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01744}01744\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ np.zeros(shape,\ dtype=dtype)[\textcolor{stringliteral}{'x'}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01745}01745\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01746}01746\ \ \ \ \ \textcolor{keyword}{def\ }test\_create(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01747}01747\ \ \ \ \ \ \ \ \ zs\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroSizeFlexible_a324f90b79f8c87a6e3927ffe536f3196}{\_zeros}}(10,\ bytes)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01748}01748\ \ \ \ \ \ \ \ \ assert\_equal(zs.itemsize,\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01749}01749\ \ \ \ \ \ \ \ \ zs\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroSizeFlexible_a324f90b79f8c87a6e3927ffe536f3196}{\_zeros}}(10,\ np.void)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01750}01750\ \ \ \ \ \ \ \ \ assert\_equal(zs.itemsize,\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01751}01751\ \ \ \ \ \ \ \ \ zs\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroSizeFlexible_a324f90b79f8c87a6e3927ffe536f3196}{\_zeros}}(10,\ str)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01752}01752\ \ \ \ \ \ \ \ \ assert\_equal(zs.itemsize,\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01753}01753\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01754}01754\ \ \ \ \ \textcolor{keyword}{def\ }\_test\_sort\_partition(self,\ name,\ kinds,\ **kwargs):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01755}01755\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Previously,\ these\ would\ all\ hang}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01756}01756\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ [bytes,\ np.void,\ str]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01757}01757\ \ \ \ \ \ \ \ \ \ \ \ \ zs\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroSizeFlexible_a324f90b79f8c87a6e3927ffe536f3196}{\_zeros}}(10,\ dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01758}01758\ \ \ \ \ \ \ \ \ \ \ \ \ sort\_method\ =\ getattr(zs,\ name)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01759}01759\ \ \ \ \ \ \ \ \ \ \ \ \ sort\_func\ =\ getattr(np,\ name)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01760}01760\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ kind\ \textcolor{keywordflow}{in}\ kinds:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01761}01761\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sort\_method(kind=kind,\ **kwargs)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01762}01762\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sort\_func(zs,\ kind=kind,\ **kwargs)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01763}01763\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01764}01764\ \ \ \ \ \textcolor{keyword}{def\ }test\_sort(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01765}01765\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroSizeFlexible_abb2d700999cd43ae9998aa29c5aa6e5f}{\_test\_sort\_partition}}(\textcolor{stringliteral}{'sort'},\ kinds=\textcolor{stringliteral}{'qhs'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01766}01766\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01767}01767\ \ \ \ \ \textcolor{keyword}{def\ }test\_argsort(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01768}01768\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroSizeFlexible_abb2d700999cd43ae9998aa29c5aa6e5f}{\_test\_sort\_partition}}(\textcolor{stringliteral}{'argsort'},\ kinds=\textcolor{stringliteral}{'qhs'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01769}01769\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01770}01770\ \ \ \ \ \textcolor{keyword}{def\ }test\_partition(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01771}01771\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroSizeFlexible_abb2d700999cd43ae9998aa29c5aa6e5f}{\_test\_sort\_partition}}(\textcolor{stringliteral}{'partition'},\ kinds=[\textcolor{stringliteral}{'introselect'}],\ kth=2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01772}01772\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01773}01773\ \ \ \ \ \textcolor{keyword}{def\ }test\_argpartition(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01774}01774\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroSizeFlexible_abb2d700999cd43ae9998aa29c5aa6e5f}{\_test\_sort\_partition}}(\textcolor{stringliteral}{'argpartition'},\ kinds=[\textcolor{stringliteral}{'introselect'}],\ kth=2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01775}01775\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01776}01776\ \ \ \ \ \textcolor{keyword}{def\ }test\_resize(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01777}01777\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ previously\ an\ error}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01778}01778\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ [bytes,\ np.void,\ str]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01779}01779\ \ \ \ \ \ \ \ \ \ \ \ \ zs\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroSizeFlexible_a324f90b79f8c87a6e3927ffe536f3196}{\_zeros}}(10,\ dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01780}01780\ \ \ \ \ \ \ \ \ \ \ \ \ zs.resize(25)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01781}01781\ \ \ \ \ \ \ \ \ \ \ \ \ zs.resize((10,\ 10))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01782}01782\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01783}01783\ \ \ \ \ \textcolor{keyword}{def\ }test\_view(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01784}01784\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ [bytes,\ np.void,\ str]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01785}01785\ \ \ \ \ \ \ \ \ \ \ \ \ zs\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroSizeFlexible_a324f90b79f8c87a6e3927ffe536f3196}{\_zeros}}(10,\ dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01786}01786\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01787}01787\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ viewing\ as\ itself\ should\ be\ allowed}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01788}01788\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(zs.view(dt).dtype,\ np.dtype(dt))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01789}01789\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01790}01790\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ viewing\ as\ any\ non-\/empty\ type\ gives\ an\ empty\ result}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01791}01791\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(zs.view((dt,\ 1)).shape,\ (0,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01792}01792\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01793}01793\ \ \ \ \ \textcolor{keyword}{def\ }test\_dumps(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01794}01794\ \ \ \ \ \ \ \ \ zs\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroSizeFlexible_a324f90b79f8c87a6e3927ffe536f3196}{\_zeros}}(10,\ int)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01795}01795\ \ \ \ \ \ \ \ \ assert\_equal(zs,\ pickle.loads(zs.dumps()))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01796}01796\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01797}01797\ \ \ \ \ \textcolor{keyword}{def\ }test\_pickle(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01798}01798\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ proto\ \textcolor{keywordflow}{in}\ range(2,\ pickle.HIGHEST\_PROTOCOL\ +\ 1):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01799}01799\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ [bytes,\ np.void,\ str]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01800}01800\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ zs\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroSizeFlexible_a324f90b79f8c87a6e3927ffe536f3196}{\_zeros}}(10,\ dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01801}01801\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ pickle.dumps(zs,\ protocol=proto)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01802}01802\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ zs2\ =\ pickle.loads(p)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01803}01803\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01804}01804\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(zs.dtype,\ zs2.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01805}01805\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01806}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroSizeFlexible_acef2d1f052b587ebb852e4610adee0ff}{01806}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestZeroSizeFlexible_acef2d1f052b587ebb852e4610adee0ff}{test\_pickle\_empty}}(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01807}01807\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Checking\ if\ an\ empty\ array\ pickled\ and\ un-\/pickled\ will\ not\ cause\ a}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01808}01808\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ segmentation\ fault"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01809}01809\ \ \ \ \ \ \ \ \ arr\ =\ np.array([]).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(999999,\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01810}01810\ \ \ \ \ \ \ \ \ pk\_dmp\ =\ pickle.dumps(arr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01811}01811\ \ \ \ \ \ \ \ \ pk\_load\ =\ pickle.loads(pk\_dmp)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01812}01812\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01813}01813\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ pk\_load.size\ ==\ 0}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01814}01814\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01815}01815\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.skipif}(pickle.HIGHEST\_PROTOCOL\ <\ 5,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01816}01816\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ reason=\textcolor{stringliteral}{"{}requires\ pickle\ protocol\ 5"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01817}01817\ \ \ \ \ \textcolor{keyword}{def\ }test\_pickle\_with\_buffercallback(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01818}01818\ \ \ \ \ \ \ \ \ array\ =\ np.arange(10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01819}01819\ \ \ \ \ \ \ \ \ buffers\ =\ []}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01820}01820\ \ \ \ \ \ \ \ \ bytes\_string\ =\ pickle.dumps(array,\ buffer\_callback=buffers.append,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01821}01821\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ protocol=5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01822}01822\ \ \ \ \ \ \ \ \ array\_from\_buffer\ =\ pickle.loads(bytes\_string,\ buffers=buffers)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01823}01823\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ when\ using\ pickle\ protocol\ 5\ with\ buffer\ callbacks,}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01824}01824\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ array\_from\_buffer\ is\ reconstructed\ from\ a\ buffer\ holding\ a\ view}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01825}01825\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ to\ the\ initial\ array's\ data,\ so\ modifying\ an\ element\ in\ array}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01826}01826\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ should\ modify\ it\ in\ array\_from\_buffer\ too.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01827}01827\ \ \ \ \ \ \ \ \ array[0]\ =\ -\/1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01828}01828\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ array\_from\_buffer[0]\ ==\ -\/1,\ array\_from\_buffer[0]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01829}01829\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01830}01830\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01831}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMethods}{01831}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMethods}{TestMethods}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01832}01832\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01833}01833\ \ \ \ \ sort\_kinds\ =\ [\textcolor{stringliteral}{'quicksort'},\ \textcolor{stringliteral}{'heapsort'},\ \textcolor{stringliteral}{'stable'}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01834}01834\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01835}01835\ \ \ \ \ \textcolor{keyword}{def\ }test\_all\_where(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01836}01836\ \ \ \ \ \ \ \ \ a\ =\ np.array([[\textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01837}01837\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01838}01838\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{True}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01839}01839\ \ \ \ \ \ \ \ \ wh\_full\ =\ np.array([[\textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01840}01840\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01841}01841\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01842}01842\ \ \ \ \ \ \ \ \ wh\_lower\ =\ np.array([[\textcolor{keyword}{False}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01843}01843\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{False}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01844}01844\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{True}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01845}01845\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ \_ax\ \textcolor{keywordflow}{in}\ [0,\ \textcolor{keywordtype}{None}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01846}01846\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(a.all(axis=\_ax,\ where=wh\_lower),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01847}01847\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.all(a[wh\_lower[:,0],:],\ axis=\_ax))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01848}01848\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.all(a,\ axis=\_ax,\ where=wh\_lower),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01849}01849\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ a[wh\_lower[:,0],:].\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_ae94233643e35acde1817d89be3a2aeac}{all}}(axis=\_ax))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01850}01850\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01851}01851\ \ \ \ \ \ \ \ \ assert\_equal(a.all(where=wh\_full),\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01852}01852\ \ \ \ \ \ \ \ \ assert\_equal(np.all(a,\ where=wh\_full),\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01853}01853\ \ \ \ \ \ \ \ \ assert\_equal(a.all(where=\textcolor{keyword}{False}),\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01854}01854\ \ \ \ \ \ \ \ \ assert\_equal(np.all(a,\ where=\textcolor{keyword}{False}),\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01855}01855\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01856}01856\ \ \ \ \ \textcolor{keyword}{def\ }test\_any\_where(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01857}01857\ \ \ \ \ \ \ \ \ a\ =\ np.array([[\textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01858}01858\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01859}01859\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{True}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01860}01860\ \ \ \ \ \ \ \ \ wh\_full\ =\ np.array([[\textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01861}01861\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{True}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01862}01862\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01863}01863\ \ \ \ \ \ \ \ \ wh\_middle\ =\ np.array([[\textcolor{keyword}{False}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01864}01864\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{True}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01865}01865\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{False}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01866}01866\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ \_ax\ \textcolor{keywordflow}{in}\ [0,\ \textcolor{keywordtype}{None}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01867}01867\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(a.any(axis=\_ax,\ where=wh\_middle),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01868}01868\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.any(a[wh\_middle[:,0],:],\ axis=\_ax))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01869}01869\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.any(a,\ axis=\_ax,\ where=wh\_middle),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01870}01870\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ a[wh\_middle[:,0],:].\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a87f0925a0b962dc185a686c7f986385e}{any}}(axis=\_ax))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01871}01871\ \ \ \ \ \ \ \ \ assert\_equal(a.any(where=wh\_full),\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01872}01872\ \ \ \ \ \ \ \ \ assert\_equal(np.any(a,\ where=wh\_full),\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01873}01873\ \ \ \ \ \ \ \ \ assert\_equal(a.any(where=\textcolor{keyword}{False}),\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01874}01874\ \ \ \ \ \ \ \ \ assert\_equal(np.any(a,\ where=\textcolor{keyword}{False}),\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01875}01875\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01876}01876\ \ \ \ \ \textcolor{keyword}{def\ }test\_compress(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01877}01877\ \ \ \ \ \ \ \ \ tgt\ =\ [[5,\ 6,\ 7,\ 8,\ 9]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01878}01878\ \ \ \ \ \ \ \ \ arr\ =\ np.arange(10).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,\ 5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01879}01879\ \ \ \ \ \ \ \ \ out\ =\ arr.compress([0,\ 1],\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01880}01880\ \ \ \ \ \ \ \ \ assert\_equal(out,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01881}01881\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01882}01882\ \ \ \ \ \ \ \ \ tgt\ =\ [[1,\ 3],\ [6,\ 8]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01883}01883\ \ \ \ \ \ \ \ \ out\ =\ arr.compress([0,\ 1,\ 0,\ 1,\ 0],\ axis=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01884}01884\ \ \ \ \ \ \ \ \ assert\_equal(out,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01885}01885\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01886}01886\ \ \ \ \ \ \ \ \ tgt\ =\ [[1],\ [6]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01887}01887\ \ \ \ \ \ \ \ \ arr\ =\ np.arange(10).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,\ 5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01888}01888\ \ \ \ \ \ \ \ \ out\ =\ arr.compress([0,\ 1],\ axis=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01889}01889\ \ \ \ \ \ \ \ \ assert\_equal(out,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01890}01890\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01891}01891\ \ \ \ \ \ \ \ \ arr\ =\ np.arange(10).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,\ 5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01892}01892\ \ \ \ \ \ \ \ \ out\ =\ arr.compress([0,\ 1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01893}01893\ \ \ \ \ \ \ \ \ assert\_equal(out,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01894}01894\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01895}01895\ \ \ \ \ \textcolor{keyword}{def\ }test\_choose(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01896}01896\ \ \ \ \ \ \ \ \ x\ =\ 2*np.ones((3,),\ dtype=int)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01897}01897\ \ \ \ \ \ \ \ \ y\ =\ 3*np.ones((3,),\ dtype=int)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01898}01898\ \ \ \ \ \ \ \ \ x2\ =\ 2*np.ones((2,\ 3),\ dtype=int)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01899}01899\ \ \ \ \ \ \ \ \ y2\ =\ 3*np.ones((2,\ 3),\ dtype=int)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01900}01900\ \ \ \ \ \ \ \ \ ind\ =\ np.array([0,\ 0,\ 1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01901}01901\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01902}01902\ \ \ \ \ \ \ \ \ A\ =\ ind.choose((x,\ y))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01903}01903\ \ \ \ \ \ \ \ \ assert\_equal(A,\ [2,\ 2,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01904}01904\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01905}01905\ \ \ \ \ \ \ \ \ A\ =\ ind.choose((x2,\ y2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01906}01906\ \ \ \ \ \ \ \ \ assert\_equal(A,\ [[2,\ 2,\ 3],\ [2,\ 2,\ 3]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01907}01907\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01908}01908\ \ \ \ \ \ \ \ \ A\ =\ ind.choose((x,\ y2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01909}01909\ \ \ \ \ \ \ \ \ assert\_equal(A,\ [[2,\ 2,\ 3],\ [2,\ 2,\ 3]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01910}01910\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01911}01911\ \ \ \ \ \ \ \ \ oned\ =\ np.ones(1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01912}01912\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/12031,\ caused\ SEGFAULT}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01913}01913\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ oned.choose,np.void(0),\ [oned])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01914}01914\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01915}01915\ \ \ \ \ \ \ \ \ out\ =\ np.array(0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01916}01916\ \ \ \ \ \ \ \ \ ret\ =\ np.choose(np.array(1),\ [10,\ 20,\ 30],\ out=out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01917}01917\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ out\ \textcolor{keywordflow}{is}\ ret}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01918}01918\ \ \ \ \ \ \ \ \ assert\_equal(out[()],\ 20)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01919}01919\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01920}01920\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/6272\ check\ overlap\ on\ out}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01921}01921\ \ \ \ \ \ \ \ \ x\ =\ np.arange(5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01922}01922\ \ \ \ \ \ \ \ \ y\ =\ np.choose([0,0,0],\ [x[:3],\ x[:3],\ x[:3]],\ out=x[1:4],\ mode=\textcolor{stringliteral}{'wrap'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01923}01923\ \ \ \ \ \ \ \ \ assert\_equal(y,\ np.array([0,\ 1,\ 2]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01924}01924\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01925}01925\ \ \ \ \ \textcolor{keyword}{def\ }test\_prod(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01926}01926\ \ \ \ \ \ \ \ \ ba\ =\ [1,\ 2,\ 10,\ 11,\ 6,\ 5,\ 4]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01927}01927\ \ \ \ \ \ \ \ \ ba2\ =\ [[1,\ 2,\ 3,\ 4],\ [5,\ 6,\ 7,\ 9],\ [10,\ 3,\ 4,\ 5]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01928}01928\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01929}01929\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ ctype\ \textcolor{keywordflow}{in}\ [np.int16,\ np.uint16,\ np.int32,\ np.uint32,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01930}01930\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.float32,\ np.float64,\ np.complex64,\ np.complex128]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01931}01931\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.array(ba,\ ctype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01932}01932\ \ \ \ \ \ \ \ \ \ \ \ \ a2\ =\ np.array(ba2,\ ctype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01933}01933\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ctype\ \textcolor{keywordflow}{in}\ [\textcolor{stringliteral}{'1'},\ \textcolor{stringliteral}{'b'}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01934}01934\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ArithmeticError,\ a.prod)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01935}01935\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ArithmeticError,\ a2.prod,\ axis=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01936}01936\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01937}01937\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(a.prod(axis=0),\ 26400)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01938}01938\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(a2.prod(axis=0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01939}01939\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([50,\ 36,\ 84,\ 180],\ ctype))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01940}01940\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(a2.prod(axis=-\/1),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01941}01941\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([24,\ 1890,\ 600],\ ctype))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01942}01942\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01943}01943\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize('dtype',\ [None,\ object])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01944}01944\ \ \ \ \ \textcolor{keyword}{def\ }test\_repeat(self,\ dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01945}01945\ \ \ \ \ \ \ \ \ m\ =\ np.array([1,\ 2,\ 3,\ 4,\ 5,\ 6],\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01946}01946\ \ \ \ \ \ \ \ \ m\_rect\ =\ m.reshape((2,\ 3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01947}01947\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01948}01948\ \ \ \ \ \ \ \ \ A\ =\ m.repeat([1,\ 3,\ 2,\ 1,\ 1,\ 2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01949}01949\ \ \ \ \ \ \ \ \ assert\_equal(A,\ [1,\ 2,\ 2,\ 2,\ 3,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01950}01950\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 3,\ 4,\ 5,\ 6,\ 6])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01951}01951\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01952}01952\ \ \ \ \ \ \ \ \ A\ =\ m.repeat(2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01953}01953\ \ \ \ \ \ \ \ \ assert\_equal(A,\ [1,\ 1,\ 2,\ 2,\ 3,\ 3,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01954}01954\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 4,\ 4,\ 5,\ 5,\ 6,\ 6])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01955}01955\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01956}01956\ \ \ \ \ \ \ \ \ A\ =\ m\_rect.repeat([2,\ 1],\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01957}01957\ \ \ \ \ \ \ \ \ assert\_equal(A,\ [[1,\ 2,\ 3],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01958}01958\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 2,\ 3],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01959}01959\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [4,\ 5,\ 6]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01960}01960\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01961}01961\ \ \ \ \ \ \ \ \ A\ =\ m\_rect.repeat([1,\ 3,\ 2],\ axis=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01962}01962\ \ \ \ \ \ \ \ \ assert\_equal(A,\ [[1,\ 2,\ 2,\ 2,\ 3,\ 3],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01963}01963\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [4,\ 5,\ 5,\ 5,\ 6,\ 6]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01964}01964\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01965}01965\ \ \ \ \ \ \ \ \ A\ =\ m\_rect.repeat(2,\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01966}01966\ \ \ \ \ \ \ \ \ assert\_equal(A,\ [[1,\ 2,\ 3],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01967}01967\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 2,\ 3],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01968}01968\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [4,\ 5,\ 6],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01969}01969\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [4,\ 5,\ 6]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01970}01970\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01971}01971\ \ \ \ \ \ \ \ \ A\ =\ m\_rect.repeat(2,\ axis=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01972}01972\ \ \ \ \ \ \ \ \ assert\_equal(A,\ [[1,\ 1,\ 2,\ 2,\ 3,\ 3],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01973}01973\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [4,\ 4,\ 5,\ 5,\ 6,\ 6]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01974}01974\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01975}01975\ \ \ \ \ \textcolor{keyword}{def\ }test\_reshape(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01976}01976\ \ \ \ \ \ \ \ \ arr\ =\ np.array([[1,\ 2,\ 3],\ [4,\ 5,\ 6],\ [7,\ 8,\ 9],\ [10,\ 11,\ 12]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01977}01977\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01978}01978\ \ \ \ \ \ \ \ \ tgt\ =\ [[1,\ 2,\ 3,\ 4,\ 5,\ 6],\ [7,\ 8,\ 9,\ 10,\ 11,\ 12]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01979}01979\ \ \ \ \ \ \ \ \ assert\_equal(arr.reshape(2,\ 6),\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01980}01980\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01981}01981\ \ \ \ \ \ \ \ \ tgt\ =\ [[1,\ 2,\ 3,\ 4],\ [5,\ 6,\ 7,\ 8],\ [9,\ 10,\ 11,\ 12]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01982}01982\ \ \ \ \ \ \ \ \ assert\_equal(arr.reshape(3,\ 4),\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01983}01983\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01984}01984\ \ \ \ \ \ \ \ \ tgt\ =\ [[1,\ 10,\ 8,\ 6],\ [4,\ 2,\ 11,\ 9],\ [7,\ 5,\ 3,\ 12]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01985}01985\ \ \ \ \ \ \ \ \ assert\_equal(arr.reshape((3,\ 4),\ order=\textcolor{stringliteral}{'F'}),\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01986}01986\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01987}01987\ \ \ \ \ \ \ \ \ tgt\ =\ [[1,\ 4,\ 7,\ 10],\ [2,\ 5,\ 8,\ 11],\ [3,\ 6,\ 9,\ 12]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01988}01988\ \ \ \ \ \ \ \ \ assert\_equal(arr.T.reshape((3,\ 4),\ order=\textcolor{stringliteral}{'C'}),\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01989}01989\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01990}01990\ \ \ \ \ \textcolor{keyword}{def\ }test\_round(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01991}01991\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }check\_round(arr,\ expected,\ *round\_args):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01992}01992\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(arr.round(*round\_args),\ expected)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01993}01993\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ With\ output\ array}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01994}01994\ \ \ \ \ \ \ \ \ \ \ \ \ out\ =\ np.zeros\_like(arr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01995}01995\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ arr.round(*round\_args,\ out=out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01996}01996\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(out,\ expected)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01997}01997\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ out\ \textcolor{keywordflow}{is}\ res}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01998}01998\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l01999}01999\ \ \ \ \ \ \ \ \ check\_round(np.array([1.2,\ 1.5]),\ [1,\ 2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02000}02000\ \ \ \ \ \ \ \ \ check\_round(np.array(1.5),\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02001}02001\ \ \ \ \ \ \ \ \ check\_round(np.array([12.2,\ 15.5]),\ [10,\ 20],\ -\/1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02002}02002\ \ \ \ \ \ \ \ \ check\_round(np.array([12.15,\ 15.51]),\ [12.2,\ 15.5],\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02003}02003\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Complex\ rounding}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02004}02004\ \ \ \ \ \ \ \ \ check\_round(np.array([4.5\ +\ 1.5j]),\ [4\ +\ 2j])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02005}02005\ \ \ \ \ \ \ \ \ check\_round(np.array([12.5\ +\ 15.5j]),\ [10\ +\ 20j],\ -\/1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02006}02006\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02007}02007\ \ \ \ \ \textcolor{keyword}{def\ }test\_squeeze(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02008}02008\ \ \ \ \ \ \ \ \ a\ =\ np.array([[[1],\ [2],\ [3]]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02009}02009\ \ \ \ \ \ \ \ \ assert\_equal(a.squeeze(),\ [1,\ 2,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02010}02010\ \ \ \ \ \ \ \ \ assert\_equal(a.squeeze(axis=(0,)),\ [[1],\ [2],\ [3]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02011}02011\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ a.squeeze,\ axis=(1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02012}02012\ \ \ \ \ \ \ \ \ assert\_equal(a.squeeze(axis=(2,)),\ [[1,\ 2,\ 3]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02013}02013\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02014}02014\ \ \ \ \ \textcolor{keyword}{def\ }test\_transpose(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02015}02015\ \ \ \ \ \ \ \ \ a\ =\ np.array([[1,\ 2],\ [3,\ 4]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02016}02016\ \ \ \ \ \ \ \ \ assert\_equal(a.transpose(),\ [[1,\ 3],\ [2,\ 4]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02017}02017\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ \textcolor{keyword}{lambda}:\ a.transpose(0))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02018}02018\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ \textcolor{keyword}{lambda}:\ a.transpose(0,\ 0))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02019}02019\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ \textcolor{keyword}{lambda}:\ a.transpose(0,\ 1,\ 2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02020}02020\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02021}02021\ \ \ \ \ \textcolor{keyword}{def\ }test\_sort(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02022}02022\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ ordering\ for\ floats\ and\ complex\ containing\ nans.\ It\ is\ only}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02023}02023\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ necessary\ to\ check\ the\ less-\/than\ comparison,\ so\ sorts\ that}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02024}02024\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ only\ follow\ the\ insertion\ sort\ path\ are\ sufficient.\ We\ only}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02025}02025\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ doubles\ and\ complex\ doubles\ as\ the\ logic\ is\ the\ same.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02026}02026\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02027}02027\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ doubles}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02028}02028\ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}Test\ real\ sort\ order\ with\ nans"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02029}02029\ \ \ \ \ \ \ \ \ a\ =\ np.array([np.nan,\ 1,\ 0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02030}02030\ \ \ \ \ \ \ \ \ b\ =\ np.sort(a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02031}02031\ \ \ \ \ \ \ \ \ assert\_equal(b,\ a[::-\/1],\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02032}02032\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ complex}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02033}02033\ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}Test\ complex\ sort\ order\ with\ nans"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02034}02034\ \ \ \ \ \ \ \ \ a\ =\ np.zeros(9,\ dtype=np.complex128)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02035}02035\ \ \ \ \ \ \ \ \ a.real\ +=\ [np.nan,\ np.nan,\ np.nan,\ 1,\ 0,\ 1,\ 1,\ 0,\ 0]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02036}02036\ \ \ \ \ \ \ \ \ a.imag\ +=\ [np.nan,\ 1,\ 0,\ np.nan,\ np.nan,\ 1,\ 0,\ 1,\ 0]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02037}02037\ \ \ \ \ \ \ \ \ b\ =\ np.sort(a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02038}02038\ \ \ \ \ \ \ \ \ assert\_equal(b,\ a[::-\/1],\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02039}02039\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02040}02040\ \ \ \ \ \textcolor{comment}{\#\ all\ c\ scalar\ sorts\ use\ the\ same\ code\ with\ different\ types}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02041}02041\ \ \ \ \ \textcolor{comment}{\#\ so\ it\ suffices\ to\ run\ a\ quick\ check\ with\ one\ type.\ The\ number}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02042}02042\ \ \ \ \ \textcolor{comment}{\#\ of\ sorted\ items\ must\ be\ greater\ than\ \string~50\ to\ check\ the\ actual}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02043}02043\ \ \ \ \ \textcolor{comment}{\#\ algorithm\ because\ quick\ and\ merge\ sort\ fall\ over\ to\ insertion}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02044}02044\ \ \ \ \ \textcolor{comment}{\#\ sort\ for\ small\ arrays.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02045}02045\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02046}02046\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{'dtype'},\ [np.uint8,\ np.uint16,\ np.uint32,\ np.uint64,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02047}02047\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.float16,\ np.float32,\ np.float64,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02048}02048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.longdouble])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02049}02049\ \ \ \ \ \textcolor{keyword}{def\ }test\_sort\_unsigned(self,\ dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02050}02050\ \ \ \ \ \ \ \ \ a\ =\ np.arange(101,\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02051}02051\ \ \ \ \ \ \ \ \ b\ =\ a[::-\/1].copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02052}02052\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ kind\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMethods_a27f89848a74e8e912fa07992bcf7fa70}{sort\_kinds}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02053}02053\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}scalar\ sort,\ kind=\%s"{}}\ \%\ kind}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02054}02054\ \ \ \ \ \ \ \ \ \ \ \ \ c\ =\ a.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02055}02055\ \ \ \ \ \ \ \ \ \ \ \ \ c.sort(kind=kind)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02056}02056\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(c,\ a,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02057}02057\ \ \ \ \ \ \ \ \ \ \ \ \ c\ =\ b.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02058}02058\ \ \ \ \ \ \ \ \ \ \ \ \ c.sort(kind=kind)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02059}02059\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(c,\ a,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02060}02060\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02061}02061\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{'dtype'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02062}02062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [np.int8,\ np.int16,\ np.int32,\ np.int64,\ np.float16,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02063}02063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.float32,\ np.float64,\ np.longdouble])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02064}02064\ \ \ \ \ \textcolor{keyword}{def\ }test\_sort\_signed(self,\ dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02065}02065\ \ \ \ \ \ \ \ \ a\ =\ np.arange(-\/50,\ 51,\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02066}02066\ \ \ \ \ \ \ \ \ b\ =\ a[::-\/1].copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02067}02067\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ kind\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMethods_a27f89848a74e8e912fa07992bcf7fa70}{sort\_kinds}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02068}02068\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}scalar\ sort,\ kind=\%s"{}}\ \%\ (kind)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02069}02069\ \ \ \ \ \ \ \ \ \ \ \ \ c\ =\ a.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02070}02070\ \ \ \ \ \ \ \ \ \ \ \ \ c.sort(kind=kind)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02071}02071\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(c,\ a,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02072}02072\ \ \ \ \ \ \ \ \ \ \ \ \ c\ =\ b.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02073}02073\ \ \ \ \ \ \ \ \ \ \ \ \ c.sort(kind=kind)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02074}02074\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(c,\ a,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02075}02075\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02076}02076\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize('dtype',\ [np.float32,\ np.float64,\ np.longdouble])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02077}02077\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize('part',\ ['real',\ 'imag'])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02078}02078\ \ \ \ \ \textcolor{keyword}{def\ }test\_sort\_complex(self,\ part,\ dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02079}02079\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ complex\ sorts.\ These\ use\ the\ same\ code\ as\ the\ scalars}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02080}02080\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ but\ the\ compare\ function\ differs.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02081}02081\ \ \ \ \ \ \ \ \ cdtype\ =\ \{}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02082}02082\ \ \ \ \ \ \ \ \ \ \ \ \ np.single:\ np.csingle,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02083}02083\ \ \ \ \ \ \ \ \ \ \ \ \ np.double:\ np.cdouble,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02084}02084\ \ \ \ \ \ \ \ \ \ \ \ \ np.longdouble:\ np.clongdouble,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02085}02085\ \ \ \ \ \ \ \ \ \}[dtype]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02086}02086\ \ \ \ \ \ \ \ \ a\ =\ np.arange(-\/50,\ 51,\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02087}02087\ \ \ \ \ \ \ \ \ b\ =\ a[::-\/1].copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02088}02088\ \ \ \ \ \ \ \ \ ai\ =\ (a\ *\ (1+1j)).astype(cdtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02089}02089\ \ \ \ \ \ \ \ \ bi\ =\ (b\ *\ (1+1j)).astype(cdtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02090}02090\ \ \ \ \ \ \ \ \ setattr(ai,\ part,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02091}02091\ \ \ \ \ \ \ \ \ setattr(bi,\ part,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02092}02092\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ kind\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMethods_a27f89848a74e8e912fa07992bcf7fa70}{sort\_kinds}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02093}02093\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}complex\ sort,\ \%s\ part\ ==\ 1,\ kind=\%s"{}}\ \%\ (part,\ kind)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02094}02094\ \ \ \ \ \ \ \ \ \ \ \ \ c\ =\ ai.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02095}02095\ \ \ \ \ \ \ \ \ \ \ \ \ c.sort(kind=kind)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02096}02096\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(c,\ ai,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02097}02097\ \ \ \ \ \ \ \ \ \ \ \ \ c\ =\ bi.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02098}02098\ \ \ \ \ \ \ \ \ \ \ \ \ c.sort(kind=kind)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02099}02099\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(c,\ ai,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02100}02100\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02101}02101\ \ \ \ \ \textcolor{keyword}{def\ }test\_sort\_complex\_byte\_swapping(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02102}02102\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ sorting\ of\ complex\ arrays\ requiring\ byte-\/swapping,\ gh-\/5441}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02103}02103\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ endianness\ \textcolor{keywordflow}{in}\ \textcolor{stringliteral}{'<>'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02104}02104\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ np.typecodes[\textcolor{stringliteral}{'Complex'}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02105}02105\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ arr\ =\ np.array([1+3.j,\ 2+2.j,\ 3+1.j],\ dtype=endianness\ +\ dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02106}02106\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c\ =\ arr.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02107}02107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c.sort()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02108}02108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{'byte-\/swapped\ complex\ sort,\ dtype=\{0\}'}.format(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02109}02109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(c,\ arr,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02110}02110\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02111}02111\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize('dtype',\ [np.bytes\_,\ np.str\_])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02112}02112\ \ \ \ \ \textcolor{keyword}{def\ }test\_sort\_string(self,\ dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02113}02113\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ np.array\ will\ perform\ the\ encoding\ to\ bytes\ for\ us\ in\ the\ bytes\ test}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02114}02114\ \ \ \ \ \ \ \ \ a\ =\ np.array([\textcolor{stringliteral}{'aaaaaaaa'}\ +\ chr(i)\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(101)],\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02115}02115\ \ \ \ \ \ \ \ \ b\ =\ a[::-\/1].copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02116}02116\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ kind\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMethods_a27f89848a74e8e912fa07992bcf7fa70}{sort\_kinds}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02117}02117\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}kind=\%s"{}}\ \%\ kind}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02118}02118\ \ \ \ \ \ \ \ \ \ \ \ \ c\ =\ a.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02119}02119\ \ \ \ \ \ \ \ \ \ \ \ \ c.sort(kind=kind)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02120}02120\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(c,\ a,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02121}02121\ \ \ \ \ \ \ \ \ \ \ \ \ c\ =\ b.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02122}02122\ \ \ \ \ \ \ \ \ \ \ \ \ c.sort(kind=kind)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02123}02123\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(c,\ a,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02124}02124\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02125}02125\ \ \ \ \ \textcolor{keyword}{def\ }test\_sort\_object(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02126}02126\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ object\ array\ sorts.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02127}02127\ \ \ \ \ \ \ \ \ a\ =\ np.empty((101,),\ dtype=object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02128}02128\ \ \ \ \ \ \ \ \ a[:]\ =\ list(range(101))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02129}02129\ \ \ \ \ \ \ \ \ b\ =\ a[::-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02130}02130\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ kind\ \textcolor{keywordflow}{in}\ [\textcolor{stringliteral}{'q'},\ \textcolor{stringliteral}{'h'},\ \textcolor{stringliteral}{'m'}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02131}02131\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}kind=\%s"{}}\ \%\ kind}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02132}02132\ \ \ \ \ \ \ \ \ \ \ \ \ c\ =\ a.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02133}02133\ \ \ \ \ \ \ \ \ \ \ \ \ c.sort(kind=kind)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02134}02134\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(c,\ a,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02135}02135\ \ \ \ \ \ \ \ \ \ \ \ \ c\ =\ b.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02136}02136\ \ \ \ \ \ \ \ \ \ \ \ \ c.sort(kind=kind)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02137}02137\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(c,\ a,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02138}02138\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02139}02139\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{"{}dt"{}},\ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02140}02140\ \ \ \ \ \ \ \ \ \ \ \ \ np.dtype([(\textcolor{stringliteral}{'f'},\ float),\ (\textcolor{stringliteral}{'i'},\ int)]),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02141}02141\ \ \ \ \ \ \ \ \ \ \ \ \ np.dtype([(\textcolor{stringliteral}{'f'},\ float),\ (\textcolor{stringliteral}{'i'},\ object)])])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02142}02142\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}step"{},\ [1,\ 2])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02143}02143\ \ \ \ \ \textcolor{keyword}{def\ }test\_sort\_structured(self,\ dt,\ step):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02144}02144\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ record\ array\ sorts.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02145}02145\ \ \ \ \ \ \ \ \ a\ =\ np.array([(i,\ i)\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(101*step)],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02146}02146\ \ \ \ \ \ \ \ \ b\ =\ a[::-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02147}02147\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ kind\ \textcolor{keywordflow}{in}\ [\textcolor{stringliteral}{'q'},\ \textcolor{stringliteral}{'h'},\ \textcolor{stringliteral}{'m'}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02148}02148\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}kind=\%s"{}}\ \%\ kind}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02149}02149\ \ \ \ \ \ \ \ \ \ \ \ \ c\ =\ a.copy()[::step]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02150}02150\ \ \ \ \ \ \ \ \ \ \ \ \ indx\ =\ c.argsort(kind=kind)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02151}02151\ \ \ \ \ \ \ \ \ \ \ \ \ c.sort(kind=kind)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02152}02152\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(c,\ a[::step],\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02153}02153\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(a[::step][indx],\ a[::step],\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02154}02154\ \ \ \ \ \ \ \ \ \ \ \ \ c\ =\ b.copy()[::step]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02155}02155\ \ \ \ \ \ \ \ \ \ \ \ \ indx\ =\ c.argsort(kind=kind)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02156}02156\ \ \ \ \ \ \ \ \ \ \ \ \ c.sort(kind=kind)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02157}02157\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(c,\ a[step-\/1::step],\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02158}02158\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(b[::step][indx],\ a[step-\/1::step],\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02159}02159\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02160}02160\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize('dtype',\ ['datetime64[D]',\ 'timedelta64[D]'])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02161}02161\ \ \ \ \ \textcolor{keyword}{def\ }test\_sort\_time(self,\ dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02162}02162\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ datetime64\ and\ timedelta64\ sorts.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02163}02163\ \ \ \ \ \ \ \ \ a\ =\ np.arange(0,\ 101,\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02164}02164\ \ \ \ \ \ \ \ \ b\ =\ a[::-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02165}02165\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ kind\ \textcolor{keywordflow}{in}\ [\textcolor{stringliteral}{'q'},\ \textcolor{stringliteral}{'h'},\ \textcolor{stringliteral}{'m'}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02166}02166\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}kind=\%s"{}}\ \%\ kind}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02167}02167\ \ \ \ \ \ \ \ \ \ \ \ \ c\ =\ a.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02168}02168\ \ \ \ \ \ \ \ \ \ \ \ \ c.sort(kind=kind)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02169}02169\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(c,\ a,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02170}02170\ \ \ \ \ \ \ \ \ \ \ \ \ c\ =\ b.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02171}02171\ \ \ \ \ \ \ \ \ \ \ \ \ c.sort(kind=kind)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02172}02172\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(c,\ a,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02173}02173\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02174}02174\ \ \ \ \ \textcolor{keyword}{def\ }test\_sort\_axis(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02175}02175\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ axis\ handling.\ This\ should\ be\ the\ same\ for\ all\ type}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02176}02176\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ specific\ sorts,\ so\ we\ only\ check\ it\ for\ one\ type\ and\ one\ kind}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02177}02177\ \ \ \ \ \ \ \ \ a\ =\ np.array([[3,\ 2],\ [1,\ 0]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02178}02178\ \ \ \ \ \ \ \ \ b\ =\ np.array([[1,\ 0],\ [3,\ 2]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02179}02179\ \ \ \ \ \ \ \ \ c\ =\ np.array([[2,\ 3],\ [0,\ 1]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02180}02180\ \ \ \ \ \ \ \ \ d\ =\ a.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02181}02181\ \ \ \ \ \ \ \ \ d.sort(axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02182}02182\ \ \ \ \ \ \ \ \ assert\_equal(d,\ b,\ \textcolor{stringliteral}{"{}test\ sort\ with\ axis=0"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02183}02183\ \ \ \ \ \ \ \ \ d\ =\ a.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02184}02184\ \ \ \ \ \ \ \ \ d.sort(axis=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02185}02185\ \ \ \ \ \ \ \ \ assert\_equal(d,\ c,\ \textcolor{stringliteral}{"{}test\ sort\ with\ axis=1"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02186}02186\ \ \ \ \ \ \ \ \ d\ =\ a.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02187}02187\ \ \ \ \ \ \ \ \ d.sort()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02188}02188\ \ \ \ \ \ \ \ \ assert\_equal(d,\ c,\ \textcolor{stringliteral}{"{}test\ sort\ with\ default\ axis"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02189}02189\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02190}02190\ \ \ \ \ \textcolor{keyword}{def\ }test\_sort\_size\_0(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02191}02191\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ axis\ handling\ for\ multidimensional\ empty\ arrays}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02192}02192\ \ \ \ \ \ \ \ \ a\ =\ np.array([])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02193}02193\ \ \ \ \ \ \ \ \ a.shape\ =\ (3,\ 2,\ 1,\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02194}02194\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ axis\ \textcolor{keywordflow}{in}\ range(-\/a.ndim,\ a.ndim):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02195}02195\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{'test\ empty\ array\ sort\ with\ axis=\{0\}'}.format(axis)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02196}02196\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.sort(a,\ axis=axis),\ a,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02197}02197\ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{'test\ empty\ array\ sort\ with\ axis=None'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02198}02198\ \ \ \ \ \ \ \ \ assert\_equal(np.sort(a,\ axis=\textcolor{keywordtype}{None}),\ a.ravel(),\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02199}02199\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02200}02200\ \ \ \ \ \textcolor{keyword}{def\ }test\_sort\_bad\_ordering(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02201}02201\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ generic\ class\ with\ bogus\ ordering,}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02202}02202\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ should\ not\ segfault.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02203}02203\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }Boom:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02204}02204\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_lt\_\_(self,\ other):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02205}02205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02206}02206\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02207}02207\ \ \ \ \ \ \ \ \ a\ =\ np.array([Boom()]\ *\ 100,\ dtype=object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02208}02208\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ kind\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMethods_a27f89848a74e8e912fa07992bcf7fa70}{sort\_kinds}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02209}02209\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}kind=\%s"{}}\ \%\ kind}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02210}02210\ \ \ \ \ \ \ \ \ \ \ \ \ c\ =\ a.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02211}02211\ \ \ \ \ \ \ \ \ \ \ \ \ c.sort(kind=kind)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02212}02212\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(c,\ a,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02213}02213\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02214}02214\ \ \ \ \ \textcolor{keyword}{def\ }test\_void\_sort(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02215}02215\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/8210\ -\/\ previously\ segfaulted}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02216}02216\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(4):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02217}02217\ \ \ \ \ \ \ \ \ \ \ \ \ rand\ =\ np.random.randint(256,\ size=4000,\ dtype=np.uint8)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02218}02218\ \ \ \ \ \ \ \ \ \ \ \ \ arr\ =\ rand.view(\textcolor{stringliteral}{'V4'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02219}02219\ \ \ \ \ \ \ \ \ \ \ \ \ arr[::-\/1].sort()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02220}02220\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02221}02221\ \ \ \ \ \ \ \ \ dt\ =\ np.dtype([(\textcolor{stringliteral}{'val'},\ \textcolor{stringliteral}{'i4'},\ (1,))])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02222}02222\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(4):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02223}02223\ \ \ \ \ \ \ \ \ \ \ \ \ rand\ =\ np.random.randint(256,\ size=4000,\ dtype=np.uint8)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02224}02224\ \ \ \ \ \ \ \ \ \ \ \ \ arr\ =\ rand.view(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02225}02225\ \ \ \ \ \ \ \ \ \ \ \ \ arr[::-\/1].sort()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02226}02226\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02227}02227\ \ \ \ \ \textcolor{keyword}{def\ }test\_sort\_raises(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02228}02228\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#gh-\/9404}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02229}02229\ \ \ \ \ \ \ \ \ arr\ =\ np.array([0,\ datetime.now(),\ 1],\ dtype=object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02230}02230\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ kind\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMethods_a27f89848a74e8e912fa07992bcf7fa70}{sort\_kinds}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02231}02231\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ arr.sort,\ kind=kind)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02232}02232\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#gh-\/3879}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02233}02233\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }Raiser:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02234}02234\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }raises\_anything(*args,\ **kwargs):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02235}02235\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classTypeError}{TypeError}}(\textcolor{stringliteral}{"{}SOMETHING\ ERRORED"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02236}02236\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_eq\_\_\ =\ \_\_ne\_\_\ =\ \_\_lt\_\_\ =\ \_\_gt\_\_\ =\ \_\_ge\_\_\ =\ \_\_le\_\_\ =\ raises\_anything}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02237}02237\ \ \ \ \ \ \ \ \ arr\ =\ np.array([[Raiser(),\ n]\ \textcolor{keywordflow}{for}\ n\ \textcolor{keywordflow}{in}\ range(10)]).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(-\/1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02238}02238\ \ \ \ \ \ \ \ \ np.random.shuffle(arr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02239}02239\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ kind\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMethods_a27f89848a74e8e912fa07992bcf7fa70}{sort\_kinds}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02240}02240\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ arr.sort,\ kind=kind)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02241}02241\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02242}02242\ \ \ \ \ \textcolor{keyword}{def\ }test\_sort\_degraded(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02243}02243\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ degraded\ dataset\ would\ take\ minutes\ to\ run\ with\ normal\ qsort}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02244}02244\ \ \ \ \ \ \ \ \ d\ =\ np.arange(1000000)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02245}02245\ \ \ \ \ \ \ \ \ do\ =\ d.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02246}02246\ \ \ \ \ \ \ \ \ x\ =\ d}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02247}02247\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ create\ a\ median\ of\ 3\ killer\ where\ each\ median\ is\ the\ sorted\ second}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02248}02248\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ last\ element\ of\ the\ quicksort\ partition}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02249}02249\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ x.size\ >\ 3:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02250}02250\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ =\ x.size\ //\ 2}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02251}02251\ \ \ \ \ \ \ \ \ \ \ \ \ x[mid],\ x[-\/2]\ =\ x[-\/2],\ x[mid]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02252}02252\ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ x[:-\/2]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02253}02253\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02254}02254\ \ \ \ \ \ \ \ \ assert\_equal(np.sort(d),\ do)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02255}02255\ \ \ \ \ \ \ \ \ assert\_equal(d[np.argsort(d)],\ do)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02256}02256\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02257}02257\ \ \ \ \ \textcolor{keyword}{def\ }test\_copy(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02258}02258\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }assert\_fortran(arr):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02259}02259\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(arr.flags.fortran)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02260}02260\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(arr.flags.f\_contiguous)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02261}02261\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ arr.flags.c\_contiguous)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02262}02262\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02263}02263\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }assert\_c(arr):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02264}02264\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ arr.flags.fortran)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02265}02265\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ arr.flags.f\_contiguous)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02266}02266\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(arr.flags.c\_contiguous)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02267}02267\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02268}02268\ \ \ \ \ \ \ \ \ a\ =\ np.empty((2,\ 2),\ order=\textcolor{stringliteral}{'F'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02269}02269\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ copying\ a\ Fortran\ array}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02270}02270\ \ \ \ \ \ \ \ \ assert\_c(a.copy())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02271}02271\ \ \ \ \ \ \ \ \ assert\_c(a.copy(\textcolor{stringliteral}{'C'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02272}02272\ \ \ \ \ \ \ \ \ assert\_fortran(a.copy(\textcolor{stringliteral}{'F'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02273}02273\ \ \ \ \ \ \ \ \ assert\_fortran(a.copy(\textcolor{stringliteral}{'A'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02274}02274\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02275}02275\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Now\ test\ starting\ with\ a\ C\ array.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02276}02276\ \ \ \ \ \ \ \ \ a\ =\ np.empty((2,\ 2),\ order=\textcolor{stringliteral}{'C'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02277}02277\ \ \ \ \ \ \ \ \ assert\_c(a.copy())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02278}02278\ \ \ \ \ \ \ \ \ assert\_c(a.copy(\textcolor{stringliteral}{'C'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02279}02279\ \ \ \ \ \ \ \ \ assert\_fortran(a.copy(\textcolor{stringliteral}{'F'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02280}02280\ \ \ \ \ \ \ \ \ assert\_c(a.copy(\textcolor{stringliteral}{'A'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02281}02281\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02282}02282\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}dtype"{},\ ['O',\ np.int32,\ 'i,O'])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02283}02283\ \ \ \ \ \textcolor{keyword}{def\ }test\_\_deepcopy\_\_(self,\ dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02284}02284\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Force\ the\ entry\ of\ NULLs\ into\ array}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02285}02285\ \ \ \ \ \ \ \ \ a\ =\ np.empty(4,\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02286}02286\ \ \ \ \ \ \ \ \ ctypes.memset(a.ctypes.data,\ 0,\ a.nbytes)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02287}02287\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02288}02288\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Ensure\ no\ error\ is\ raised,\ see\ gh-\/21833}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02289}02289\ \ \ \ \ \ \ \ \ b\ =\ a.\_\_deepcopy\_\_(\{\})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02290}02290\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02291}02291\ \ \ \ \ \ \ \ \ a[0]\ =\ 42}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02292}02292\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(AssertionError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02293}02293\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(a,\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02294}02294\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02295}02295\ \ \ \ \ \textcolor{keyword}{def\ }test\_\_deepcopy\_\_catches\_failure(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02296}02296\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }MyObj:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02297}02297\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_deepcopy\_\_(self,\ *args,\ **kwargs):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02298}02298\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ RuntimeError}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02299}02299\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02300}02300\ \ \ \ \ \ \ \ \ arr\ =\ np.array([1,\ MyObj(),\ 3],\ dtype=\textcolor{stringliteral}{'O'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02301}02301\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(RuntimeError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02302}02302\ \ \ \ \ \ \ \ \ \ \ \ \ arr.\_\_deepcopy\_\_(\{\})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02303}02303\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02304}02304\ \ \ \ \ \textcolor{keyword}{def\ }test\_sort\_order(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02305}02305\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ sorting\ an\ array\ with\ fields}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02306}02306\ \ \ \ \ \ \ \ \ x1\ =\ np.array([21,\ 32,\ 14])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02307}02307\ \ \ \ \ \ \ \ \ x2\ =\ np.array([\textcolor{stringliteral}{'my'},\ \textcolor{stringliteral}{'first'},\ \textcolor{stringliteral}{'name'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02308}02308\ \ \ \ \ \ \ \ \ x3\ =\ np.array([3.1,\ 4.5,\ 6.2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02309}02309\ \ \ \ \ \ \ \ \ r\ =\ np.rec.fromarrays([x1,\ x2,\ x3],\ names=\textcolor{stringliteral}{'id,word,number'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02310}02310\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02311}02311\ \ \ \ \ \ \ \ \ r.sort(order=[\textcolor{stringliteral}{'id'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02312}02312\ \ \ \ \ \ \ \ \ assert\_equal(r.id,\ np.array([14,\ 21,\ 32]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02313}02313\ \ \ \ \ \ \ \ \ assert\_equal(r.word,\ np.array([\textcolor{stringliteral}{'name'},\ \textcolor{stringliteral}{'my'},\ \textcolor{stringliteral}{'first'}]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02314}02314\ \ \ \ \ \ \ \ \ assert\_equal(r.number,\ np.array([6.2,\ 3.1,\ 4.5]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02315}02315\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02316}02316\ \ \ \ \ \ \ \ \ r.sort(order=[\textcolor{stringliteral}{'word'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02317}02317\ \ \ \ \ \ \ \ \ assert\_equal(r.id,\ np.array([32,\ 21,\ 14]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02318}02318\ \ \ \ \ \ \ \ \ assert\_equal(r.word,\ np.array([\textcolor{stringliteral}{'first'},\ \textcolor{stringliteral}{'my'},\ \textcolor{stringliteral}{'name'}]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02319}02319\ \ \ \ \ \ \ \ \ assert\_equal(r.number,\ np.array([4.5,\ 3.1,\ 6.2]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02320}02320\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02321}02321\ \ \ \ \ \ \ \ \ r.sort(order=[\textcolor{stringliteral}{'number'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02322}02322\ \ \ \ \ \ \ \ \ assert\_equal(r.id,\ np.array([21,\ 32,\ 14]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02323}02323\ \ \ \ \ \ \ \ \ assert\_equal(r.word,\ np.array([\textcolor{stringliteral}{'my'},\ \textcolor{stringliteral}{'first'},\ \textcolor{stringliteral}{'name'}]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02324}02324\ \ \ \ \ \ \ \ \ assert\_equal(r.number,\ np.array([3.1,\ 4.5,\ 6.2]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02325}02325\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02326}02326\ \ \ \ \ \ \ \ \ assert\_raises\_regex(ValueError,\ \textcolor{stringliteral}{'duplicate'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02327}02327\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{lambda}:\ r.sort(order=[\textcolor{stringliteral}{'id'},\ \textcolor{stringliteral}{'id'}]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02328}02328\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02329}02329\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ sys.byteorder\ ==\ \textcolor{stringliteral}{'little'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02330}02330\ \ \ \ \ \ \ \ \ \ \ \ \ strtype\ =\ \textcolor{stringliteral}{'>i2'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02331}02331\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02332}02332\ \ \ \ \ \ \ \ \ \ \ \ \ strtype\ =\ \textcolor{stringliteral}{'<i2'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02333}02333\ \ \ \ \ \ \ \ \ mydtype\ =\ [(\textcolor{stringliteral}{'name'},\ \textcolor{stringliteral}{'U5'}),\ (\textcolor{stringliteral}{'col2'},\ strtype)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02334}02334\ \ \ \ \ \ \ \ \ r\ =\ np.array([(\textcolor{stringliteral}{'a'},\ 1),\ (\textcolor{stringliteral}{'b'},\ 255),\ (\textcolor{stringliteral}{'c'},\ 3),\ (\textcolor{stringliteral}{'d'},\ 258)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02335}02335\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=mydtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02336}02336\ \ \ \ \ \ \ \ \ r.sort(order=\textcolor{stringliteral}{'col2'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02337}02337\ \ \ \ \ \ \ \ \ assert\_equal(r[\textcolor{stringliteral}{'col2'}],\ [1,\ 3,\ 255,\ 258])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02338}02338\ \ \ \ \ \ \ \ \ assert\_equal(r,\ np.array([(\textcolor{stringliteral}{'a'},\ 1),\ (\textcolor{stringliteral}{'c'},\ 3),\ (\textcolor{stringliteral}{'b'},\ 255),\ (\textcolor{stringliteral}{'d'},\ 258)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02339}02339\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=mydtype))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02340}02340\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02341}02341\ \ \ \ \ \textcolor{keyword}{def\ }test\_argsort(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02342}02342\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ all\ c\ scalar\ argsorts\ use\ the\ same\ code\ with\ different\ types}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02343}02343\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ so\ it\ suffices\ to\ run\ a\ quick\ check\ with\ one\ type.\ The\ number}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02344}02344\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ of\ sorted\ items\ must\ be\ greater\ than\ \string~50\ to\ check\ the\ actual}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02345}02345\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ algorithm\ because\ quick\ and\ merge\ sort\ fall\ over\ to\ insertion}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02346}02346\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ sort\ for\ small\ arrays.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02347}02347\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02348}02348\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dtype\ \textcolor{keywordflow}{in}\ [np.int32,\ np.uint32,\ np.float32]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02349}02349\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.arange(101,\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02350}02350\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ a[::-\/1].copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02351}02351\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ kind\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMethods_a27f89848a74e8e912fa07992bcf7fa70}{sort\_kinds}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02352}02352\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}scalar\ argsort,\ kind=\%s,\ dtype=\%s"{}}\ \%\ (kind,\ dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02353}02353\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(a.copy().\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a879deb9e0defb1f65e7527ce3b2ab8f1}{argsort}}(kind=kind),\ a,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02354}02354\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(b.copy().\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a879deb9e0defb1f65e7527ce3b2ab8f1}{argsort}}(kind=kind),\ b,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02355}02355\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02356}02356\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ complex\ argsorts.\ These\ use\ the\ same\ code\ as\ the\ scalars}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02357}02357\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ but\ the\ compare\ function\ differs.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02358}02358\ \ \ \ \ \ \ \ \ ai\ =\ a*1j\ +\ 1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02359}02359\ \ \ \ \ \ \ \ \ bi\ =\ b*1j\ +\ 1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02360}02360\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ kind\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMethods_a27f89848a74e8e912fa07992bcf7fa70}{sort\_kinds}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02361}02361\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}complex\ argsort,\ kind=\%s"{}}\ \%\ kind}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02362}02362\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(ai.copy().\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a879deb9e0defb1f65e7527ce3b2ab8f1}{argsort}}(kind=kind),\ a,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02363}02363\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(bi.copy().\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a879deb9e0defb1f65e7527ce3b2ab8f1}{argsort}}(kind=kind),\ b,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02364}02364\ \ \ \ \ \ \ \ \ ai\ =\ a\ +\ 1j}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02365}02365\ \ \ \ \ \ \ \ \ bi\ =\ b\ +\ 1j}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02366}02366\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ kind\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMethods_a27f89848a74e8e912fa07992bcf7fa70}{sort\_kinds}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02367}02367\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}complex\ argsort,\ kind=\%s"{}}\ \%\ kind}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02368}02368\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(ai.copy().\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a879deb9e0defb1f65e7527ce3b2ab8f1}{argsort}}(kind=kind),\ a,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02369}02369\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(bi.copy().\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a879deb9e0defb1f65e7527ce3b2ab8f1}{argsort}}(kind=kind),\ b,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02370}02370\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02371}02371\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ argsort\ of\ complex\ arrays\ requiring\ byte-\/swapping,\ gh-\/5441}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02372}02372\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ endianness\ \textcolor{keywordflow}{in}\ \textcolor{stringliteral}{'<>'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02373}02373\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ np.typecodes[\textcolor{stringliteral}{'Complex'}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02374}02374\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ arr\ =\ np.array([1+3.j,\ 2+2.j,\ 3+1.j],\ dtype=endianness\ +\ dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02375}02375\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{'byte-\/swapped\ complex\ argsort,\ dtype=\{0\}'}.format(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02376}02376\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(arr.argsort(),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02377}02377\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.arange(len(arr),\ dtype=np.intp),\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02378}02378\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02379}02379\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ string\ argsorts.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02380}02380\ \ \ \ \ \ \ \ \ s\ =\ \textcolor{stringliteral}{'aaaaaaaa'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02381}02381\ \ \ \ \ \ \ \ \ a\ =\ np.array([s\ +\ chr(i)\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(101)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02382}02382\ \ \ \ \ \ \ \ \ b\ =\ a[::-\/1].copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02383}02383\ \ \ \ \ \ \ \ \ r\ =\ np.arange(101)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02384}02384\ \ \ \ \ \ \ \ \ rr\ =\ r[::-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02385}02385\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ kind\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMethods_a27f89848a74e8e912fa07992bcf7fa70}{sort\_kinds}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02386}02386\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}string\ argsort,\ kind=\%s"{}}\ \%\ kind}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02387}02387\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(a.copy().\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a879deb9e0defb1f65e7527ce3b2ab8f1}{argsort}}(kind=kind),\ r,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02388}02388\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(b.copy().\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a879deb9e0defb1f65e7527ce3b2ab8f1}{argsort}}(kind=kind),\ rr,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02389}02389\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02390}02390\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ unicode\ argsorts.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02391}02391\ \ \ \ \ \ \ \ \ s\ =\ \textcolor{stringliteral}{'aaaaaaaa'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02392}02392\ \ \ \ \ \ \ \ \ a\ =\ np.array([s\ +\ chr(i)\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(101)],\ dtype=np.str\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02393}02393\ \ \ \ \ \ \ \ \ b\ =\ a[::-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02394}02394\ \ \ \ \ \ \ \ \ r\ =\ np.arange(101)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02395}02395\ \ \ \ \ \ \ \ \ rr\ =\ r[::-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02396}02396\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ kind\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMethods_a27f89848a74e8e912fa07992bcf7fa70}{sort\_kinds}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02397}02397\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}unicode\ argsort,\ kind=\%s"{}}\ \%\ kind}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02398}02398\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(a.copy().\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a879deb9e0defb1f65e7527ce3b2ab8f1}{argsort}}(kind=kind),\ r,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02399}02399\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(b.copy().\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a879deb9e0defb1f65e7527ce3b2ab8f1}{argsort}}(kind=kind),\ rr,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02400}02400\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02401}02401\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ object\ array\ argsorts.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02402}02402\ \ \ \ \ \ \ \ \ a\ =\ np.empty((101,),\ dtype=object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02403}02403\ \ \ \ \ \ \ \ \ a[:]\ =\ list(range(101))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02404}02404\ \ \ \ \ \ \ \ \ b\ =\ a[::-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02405}02405\ \ \ \ \ \ \ \ \ r\ =\ np.arange(101)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02406}02406\ \ \ \ \ \ \ \ \ rr\ =\ r[::-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02407}02407\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ kind\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMethods_a27f89848a74e8e912fa07992bcf7fa70}{sort\_kinds}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02408}02408\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}object\ argsort,\ kind=\%s"{}}\ \%\ kind}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02409}02409\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(a.copy().\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a879deb9e0defb1f65e7527ce3b2ab8f1}{argsort}}(kind=kind),\ r,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02410}02410\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(b.copy().\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a879deb9e0defb1f65e7527ce3b2ab8f1}{argsort}}(kind=kind),\ rr,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02411}02411\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02412}02412\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ structured\ array\ argsorts.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02413}02413\ \ \ \ \ \ \ \ \ dt\ =\ np.dtype([(\textcolor{stringliteral}{'f'},\ float),\ (\textcolor{stringliteral}{'i'},\ int)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02414}02414\ \ \ \ \ \ \ \ \ a\ =\ np.array([(i,\ i)\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(101)],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02415}02415\ \ \ \ \ \ \ \ \ b\ =\ a[::-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02416}02416\ \ \ \ \ \ \ \ \ r\ =\ np.arange(101)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02417}02417\ \ \ \ \ \ \ \ \ rr\ =\ r[::-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02418}02418\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ kind\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMethods_a27f89848a74e8e912fa07992bcf7fa70}{sort\_kinds}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02419}02419\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}structured\ array\ argsort,\ kind=\%s"{}}\ \%\ kind}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02420}02420\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(a.copy().\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a879deb9e0defb1f65e7527ce3b2ab8f1}{argsort}}(kind=kind),\ r,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02421}02421\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(b.copy().\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a879deb9e0defb1f65e7527ce3b2ab8f1}{argsort}}(kind=kind),\ rr,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02422}02422\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02423}02423\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ datetime64\ argsorts.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02424}02424\ \ \ \ \ \ \ \ \ a\ =\ np.arange(0,\ 101,\ dtype=\textcolor{stringliteral}{'datetime64[D]'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02425}02425\ \ \ \ \ \ \ \ \ b\ =\ a[::-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02426}02426\ \ \ \ \ \ \ \ \ r\ =\ np.arange(101)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02427}02427\ \ \ \ \ \ \ \ \ rr\ =\ r[::-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02428}02428\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ kind\ \textcolor{keywordflow}{in}\ [\textcolor{stringliteral}{'q'},\ \textcolor{stringliteral}{'h'},\ \textcolor{stringliteral}{'m'}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02429}02429\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}datetime64\ argsort,\ kind=\%s"{}}\ \%\ kind}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02430}02430\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(a.copy().\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a879deb9e0defb1f65e7527ce3b2ab8f1}{argsort}}(kind=kind),\ r,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02431}02431\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(b.copy().\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a879deb9e0defb1f65e7527ce3b2ab8f1}{argsort}}(kind=kind),\ rr,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02432}02432\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02433}02433\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ timedelta64\ argsorts.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02434}02434\ \ \ \ \ \ \ \ \ a\ =\ np.arange(0,\ 101,\ dtype=\textcolor{stringliteral}{'timedelta64[D]'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02435}02435\ \ \ \ \ \ \ \ \ b\ =\ a[::-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02436}02436\ \ \ \ \ \ \ \ \ r\ =\ np.arange(101)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02437}02437\ \ \ \ \ \ \ \ \ rr\ =\ r[::-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02438}02438\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ kind\ \textcolor{keywordflow}{in}\ [\textcolor{stringliteral}{'q'},\ \textcolor{stringliteral}{'h'},\ \textcolor{stringliteral}{'m'}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02439}02439\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}timedelta64\ argsort,\ kind=\%s"{}}\ \%\ kind}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02440}02440\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(a.copy().\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a879deb9e0defb1f65e7527ce3b2ab8f1}{argsort}}(kind=kind),\ r,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02441}02441\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(b.copy().\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a879deb9e0defb1f65e7527ce3b2ab8f1}{argsort}}(kind=kind),\ rr,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02442}02442\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02443}02443\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ axis\ handling.\ This\ should\ be\ the\ same\ for\ all\ type}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02444}02444\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ specific\ argsorts,\ so\ we\ only\ check\ it\ for\ one\ type\ and\ one\ kind}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02445}02445\ \ \ \ \ \ \ \ \ a\ =\ np.array([[3,\ 2],\ [1,\ 0]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02446}02446\ \ \ \ \ \ \ \ \ b\ =\ np.array([[1,\ 1],\ [0,\ 0]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02447}02447\ \ \ \ \ \ \ \ \ c\ =\ np.array([[1,\ 0],\ [1,\ 0]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02448}02448\ \ \ \ \ \ \ \ \ assert\_equal(a.copy().\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a879deb9e0defb1f65e7527ce3b2ab8f1}{argsort}}(axis=0),\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02449}02449\ \ \ \ \ \ \ \ \ assert\_equal(a.copy().\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a879deb9e0defb1f65e7527ce3b2ab8f1}{argsort}}(axis=1),\ c)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02450}02450\ \ \ \ \ \ \ \ \ assert\_equal(a.copy().\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a879deb9e0defb1f65e7527ce3b2ab8f1}{argsort}}(),\ c)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02451}02451\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02452}02452\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ axis\ handling\ for\ multidimensional\ empty\ arrays}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02453}02453\ \ \ \ \ \ \ \ \ a\ =\ np.array([])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02454}02454\ \ \ \ \ \ \ \ \ a.shape\ =\ (3,\ 2,\ 1,\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02455}02455\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ axis\ \textcolor{keywordflow}{in}\ range(-\/a.ndim,\ a.ndim):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02456}02456\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{'test\ empty\ array\ argsort\ with\ axis=\{0\}'}.format(axis)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02457}02457\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.argsort(a,\ axis=axis),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02458}02458\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.zeros\_like(a,\ dtype=np.intp),\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02459}02459\ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{'test\ empty\ array\ argsort\ with\ axis=None'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02460}02460\ \ \ \ \ \ \ \ \ assert\_equal(np.argsort(a,\ axis=\textcolor{keywordtype}{None}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02461}02461\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.zeros\_like(a.ravel(),\ dtype=np.intp),\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02462}02462\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02463}02463\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ that\ stable\ argsorts\ are\ stable}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02464}02464\ \ \ \ \ \ \ \ \ r\ =\ np.arange(100)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02465}02465\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ scalars}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02466}02466\ \ \ \ \ \ \ \ \ a\ =\ np.zeros(100)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02467}02467\ \ \ \ \ \ \ \ \ assert\_equal(a.argsort(kind=\textcolor{stringliteral}{'m'}),\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02468}02468\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ complex}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02469}02469\ \ \ \ \ \ \ \ \ a\ =\ np.zeros(100,\ dtype=complex)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02470}02470\ \ \ \ \ \ \ \ \ assert\_equal(a.argsort(kind=\textcolor{stringliteral}{'m'}),\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02471}02471\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ string}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02472}02472\ \ \ \ \ \ \ \ \ a\ =\ np.array([\textcolor{stringliteral}{'aaaaaaaaa'}\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(100)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02473}02473\ \ \ \ \ \ \ \ \ assert\_equal(a.argsort(kind=\textcolor{stringliteral}{'m'}),\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02474}02474\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ unicode}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02475}02475\ \ \ \ \ \ \ \ \ a\ =\ np.array([\textcolor{stringliteral}{'aaaaaaaaa'}\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(100)],\ dtype=np.str\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02476}02476\ \ \ \ \ \ \ \ \ assert\_equal(a.argsort(kind=\textcolor{stringliteral}{'m'}),\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02477}02477\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02478}02478\ \ \ \ \ \textcolor{keyword}{def\ }test\_sort\_unicode\_kind(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02479}02479\ \ \ \ \ \ \ \ \ d\ =\ np.arange(10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02480}02480\ \ \ \ \ \ \ \ \ k\ =\ b\textcolor{stringliteral}{'\(\backslash\)xc3\(\backslash\)xa4'}.decode(\textcolor{stringliteral}{"{}UTF8"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02481}02481\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ d.sort,\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02482}02482\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ d.argsort,\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02483}02483\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02484}02484\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{'a'},\ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02485}02485\ \ \ \ \ \ \ \ \ np.array([0,\ 1,\ np.nan],\ dtype=np.float16),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02486}02486\ \ \ \ \ \ \ \ \ np.array([0,\ 1,\ np.nan],\ dtype=np.float32),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02487}02487\ \ \ \ \ \ \ \ \ np.array([0,\ 1,\ np.nan]),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02488}02488\ \ \ \ \ ])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02489}02489\ \ \ \ \ \textcolor{keyword}{def\ }test\_searchsorted\_floats(self,\ a):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02490}02490\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ for\ floats\ arrays\ containing\ nans.\ Explicitly\ test}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02491}02491\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ half,\ single,\ and\ double\ precision\ floats\ to\ verify\ that}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02492}02492\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ the\ NaN-\/handling\ is\ correct.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02493}02493\ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}Test\ real\ (\%s)\ searchsorted\ with\ nans,\ side='l'"{}}\ \%\ a.dtype}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02494}02494\ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted(a,\ side=\textcolor{stringliteral}{'left'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02495}02495\ \ \ \ \ \ \ \ \ assert\_equal(b,\ np.arange(3),\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02496}02496\ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}Test\ real\ (\%s)\ searchsorted\ with\ nans,\ side='r'"{}}\ \%\ a.dtype}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02497}02497\ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted(a,\ side=\textcolor{stringliteral}{'right'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02498}02498\ \ \ \ \ \ \ \ \ assert\_equal(b,\ np.arange(1,\ 4),\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02499}02499\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ keyword\ arguments}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02500}02500\ \ \ \ \ \ \ \ \ a.searchsorted(v=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02501}02501\ \ \ \ \ \ \ \ \ x\ =\ np.array([0,\ 1,\ np.nan],\ dtype=\textcolor{stringliteral}{'float32'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02502}02502\ \ \ \ \ \ \ \ \ y\ =\ np.searchsorted(x,\ x[-\/1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02503}02503\ \ \ \ \ \ \ \ \ assert\_equal(y,\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02504}02504\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02505}02505\ \ \ \ \ \textcolor{keyword}{def\ }test\_searchsorted\_complex(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02506}02506\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ for\ complex\ arrays\ containing\ nans.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02507}02507\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ search\ sorted\ routines\ use\ the\ compare\ functions\ for\ the}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02508}02508\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ array\ type,\ so\ this\ checks\ if\ that\ is\ consistent\ with\ the\ sort}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02509}02509\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ order.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02510}02510\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ double\ complex}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02511}02511\ \ \ \ \ \ \ \ \ a\ =\ np.zeros(9,\ dtype=np.complex128)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02512}02512\ \ \ \ \ \ \ \ \ a.real\ +=\ [0,\ 0,\ 1,\ 1,\ 0,\ 1,\ np.nan,\ np.nan,\ np.nan]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02513}02513\ \ \ \ \ \ \ \ \ a.imag\ +=\ [0,\ 1,\ 0,\ 1,\ np.nan,\ np.nan,\ 0,\ 1,\ np.nan]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02514}02514\ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}Test\ complex\ searchsorted\ with\ nans,\ side='l'"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02515}02515\ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted(a,\ side=\textcolor{stringliteral}{'left'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02516}02516\ \ \ \ \ \ \ \ \ assert\_equal(b,\ np.arange(9),\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02517}02517\ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}Test\ complex\ searchsorted\ with\ nans,\ side='r'"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02518}02518\ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted(a,\ side=\textcolor{stringliteral}{'right'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02519}02519\ \ \ \ \ \ \ \ \ assert\_equal(b,\ np.arange(1,\ 10),\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02520}02520\ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}Test\ searchsorted\ with\ little\ endian,\ side='l'"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02521}02521\ \ \ \ \ \ \ \ \ a\ =\ np.array([0,\ 128],\ dtype=\textcolor{stringliteral}{'<i4'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02522}02522\ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted(np.array(128,\ dtype=\textcolor{stringliteral}{'<i4'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02523}02523\ \ \ \ \ \ \ \ \ assert\_equal(b,\ 1,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02524}02524\ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}Test\ searchsorted\ with\ big\ endian,\ side='l'"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02525}02525\ \ \ \ \ \ \ \ \ a\ =\ np.array([0,\ 128],\ dtype=\textcolor{stringliteral}{'>i4'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02526}02526\ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted(np.array(128,\ dtype=\textcolor{stringliteral}{'>i4'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02527}02527\ \ \ \ \ \ \ \ \ assert\_equal(b,\ 1,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02528}02528\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02529}02529\ \ \ \ \ \textcolor{keyword}{def\ }test\_searchsorted\_n\_elements(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02530}02530\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ 0\ elements}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02531}02531\ \ \ \ \ \ \ \ \ a\ =\ np.ones(0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02532}02532\ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted([0,\ 1,\ 2],\ \textcolor{stringliteral}{'left'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02533}02533\ \ \ \ \ \ \ \ \ assert\_equal(b,\ [0,\ 0,\ 0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02534}02534\ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted([0,\ 1,\ 2],\ \textcolor{stringliteral}{'right'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02535}02535\ \ \ \ \ \ \ \ \ assert\_equal(b,\ [0,\ 0,\ 0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02536}02536\ \ \ \ \ \ \ \ \ a\ =\ np.ones(1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02537}02537\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ 1\ element}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02538}02538\ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted([0,\ 1,\ 2],\ \textcolor{stringliteral}{'left'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02539}02539\ \ \ \ \ \ \ \ \ assert\_equal(b,\ [0,\ 0,\ 1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02540}02540\ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted([0,\ 1,\ 2],\ \textcolor{stringliteral}{'right'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02541}02541\ \ \ \ \ \ \ \ \ assert\_equal(b,\ [0,\ 1,\ 1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02542}02542\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ all\ elements\ equal}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02543}02543\ \ \ \ \ \ \ \ \ a\ =\ np.ones(2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02544}02544\ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted([0,\ 1,\ 2],\ \textcolor{stringliteral}{'left'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02545}02545\ \ \ \ \ \ \ \ \ assert\_equal(b,\ [0,\ 0,\ 2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02546}02546\ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted([0,\ 1,\ 2],\ \textcolor{stringliteral}{'right'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02547}02547\ \ \ \ \ \ \ \ \ assert\_equal(b,\ [0,\ 2,\ 2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02548}02548\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02549}02549\ \ \ \ \ \textcolor{keyword}{def\ }test\_searchsorted\_unaligned\_array(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02550}02550\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ searching\ unaligned\ array}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02551}02551\ \ \ \ \ \ \ \ \ a\ =\ np.arange(10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02552}02552\ \ \ \ \ \ \ \ \ aligned\ =\ np.empty(a.itemsize\ *\ a.size\ +\ 1,\ \textcolor{stringliteral}{'uint8'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02553}02553\ \ \ \ \ \ \ \ \ unaligned\ =\ aligned[1:].view(a.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02554}02554\ \ \ \ \ \ \ \ \ unaligned[:]\ =\ a}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02555}02555\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ searching\ unaligned\ array}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02556}02556\ \ \ \ \ \ \ \ \ b\ =\ unaligned.searchsorted(a,\ \textcolor{stringliteral}{'left'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02557}02557\ \ \ \ \ \ \ \ \ assert\_equal(b,\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02558}02558\ \ \ \ \ \ \ \ \ b\ =\ unaligned.searchsorted(a,\ \textcolor{stringliteral}{'right'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02559}02559\ \ \ \ \ \ \ \ \ assert\_equal(b,\ a\ +\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02560}02560\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ searching\ for\ unaligned\ keys}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02561}02561\ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted(unaligned,\ \textcolor{stringliteral}{'left'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02562}02562\ \ \ \ \ \ \ \ \ assert\_equal(b,\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02563}02563\ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted(unaligned,\ \textcolor{stringliteral}{'right'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02564}02564\ \ \ \ \ \ \ \ \ assert\_equal(b,\ a\ +\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02565}02565\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02566}02566\ \ \ \ \ \textcolor{keyword}{def\ }test\_searchsorted\_resetting(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02567}02567\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ smart\ resetting\ of\ binsearch\ indices}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02568}02568\ \ \ \ \ \ \ \ \ a\ =\ np.arange(5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02569}02569\ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted([6,\ 5,\ 4],\ \textcolor{stringliteral}{'left'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02570}02570\ \ \ \ \ \ \ \ \ assert\_equal(b,\ [5,\ 5,\ 4])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02571}02571\ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted([6,\ 5,\ 4],\ \textcolor{stringliteral}{'right'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02572}02572\ \ \ \ \ \ \ \ \ assert\_equal(b,\ [5,\ 5,\ 5])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02573}02573\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02574}02574\ \ \ \ \ \textcolor{keyword}{def\ }test\_searchsorted\_type\_specific(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02575}02575\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ all\ type\ specific\ binary\ search\ functions}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02576}02576\ \ \ \ \ \ \ \ \ types\ =\ \textcolor{stringliteral}{''}.join((np.typecodes[\textcolor{stringliteral}{'AllInteger'}],\ np.typecodes[\textcolor{stringliteral}{'AllFloat'}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02577}02577\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.typecodes[\textcolor{stringliteral}{'Datetime'}],\ \textcolor{stringliteral}{'?O'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02578}02578\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ types:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02579}02579\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ dt\ ==\ \textcolor{stringliteral}{'M'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02580}02580\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dt\ =\ \textcolor{stringliteral}{'M8[D]'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02581}02581\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ dt\ ==\ \textcolor{stringliteral}{'?'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02582}02582\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.arange(2,\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02583}02583\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ out\ =\ np.arange(2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02584}02584\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02585}02585\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.arange(0,\ 5,\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02586}02586\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ out\ =\ np.arange(5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02587}02587\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted(a,\ \textcolor{stringliteral}{'left'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02588}02588\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(b,\ out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02589}02589\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted(a,\ \textcolor{stringliteral}{'right'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02590}02590\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(b,\ out\ +\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02591}02591\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ empty\ array,\ use\ a\ fresh\ array\ to\ get\ warnings\ in}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02592}02592\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ valgrind\ if\ access\ happens.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02593}02593\ \ \ \ \ \ \ \ \ \ \ \ \ e\ =\ np.ndarray(shape=0,\ buffer=b\textcolor{stringliteral}{''},\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02594}02594\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ e.searchsorted(a,\ \textcolor{stringliteral}{'left'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02595}02595\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(b,\ np.zeros(len(a),\ dtype=np.intp))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02596}02596\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted(e,\ \textcolor{stringliteral}{'left'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02597}02597\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(b,\ np.zeros(0,\ dtype=np.intp))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02598}02598\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02599}02599\ \ \ \ \ \textcolor{keyword}{def\ }test\_searchsorted\_unicode(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02600}02600\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ searchsorted\ on\ unicode\ strings.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02601}02601\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02602}02602\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 1.6.1\ contained\ a\ string\ length\ miscalculation\ in}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02603}02603\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ arraytypes.c.src:UNICODE\_compare()\ which\ manifested\ as}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02604}02604\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ incorrect/inconsistent\ results\ from\ searchsorted.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02605}02605\ \ \ \ \ \ \ \ \ a\ =\ np.array([\textcolor{stringliteral}{'P:\(\backslash\)\(\backslash\)20x\_dapi\_cy3\(\backslash\)\(\backslash\)20x\_dapi\_cy3\_20100185\_1'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02606}02606\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'P:\(\backslash\)\(\backslash\)20x\_dapi\_cy3\(\backslash\)\(\backslash\)20x\_dapi\_cy3\_20100186\_1'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02607}02607\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'P:\(\backslash\)\(\backslash\)20x\_dapi\_cy3\(\backslash\)\(\backslash\)20x\_dapi\_cy3\_20100187\_1'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02608}02608\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'P:\(\backslash\)\(\backslash\)20x\_dapi\_cy3\(\backslash\)\(\backslash\)20x\_dapi\_cy3\_20100189\_1'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02609}02609\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'P:\(\backslash\)\(\backslash\)20x\_dapi\_cy3\(\backslash\)\(\backslash\)20x\_dapi\_cy3\_20100190\_1'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02610}02610\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'P:\(\backslash\)\(\backslash\)20x\_dapi\_cy3\(\backslash\)\(\backslash\)20x\_dapi\_cy3\_20100191\_1'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02611}02611\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'P:\(\backslash\)\(\backslash\)20x\_dapi\_cy3\(\backslash\)\(\backslash\)20x\_dapi\_cy3\_20100192\_1'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02612}02612\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'P:\(\backslash\)\(\backslash\)20x\_dapi\_cy3\(\backslash\)\(\backslash\)20x\_dapi\_cy3\_20100193\_1'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02613}02613\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'P:\(\backslash\)\(\backslash\)20x\_dapi\_cy3\(\backslash\)\(\backslash\)20x\_dapi\_cy3\_20100194\_1'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02614}02614\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'P:\(\backslash\)\(\backslash\)20x\_dapi\_cy3\(\backslash\)\(\backslash\)20x\_dapi\_cy3\_20100195\_1'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02615}02615\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'P:\(\backslash\)\(\backslash\)20x\_dapi\_cy3\(\backslash\)\(\backslash\)20x\_dapi\_cy3\_20100196\_1'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02616}02616\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'P:\(\backslash\)\(\backslash\)20x\_dapi\_cy3\(\backslash\)\(\backslash\)20x\_dapi\_cy3\_20100197\_1'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02617}02617\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'P:\(\backslash\)\(\backslash\)20x\_dapi\_cy3\(\backslash\)\(\backslash\)20x\_dapi\_cy3\_20100198\_1'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02618}02618\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'P:\(\backslash\)\(\backslash\)20x\_dapi\_cy3\(\backslash\)\(\backslash\)20x\_dapi\_cy3\_20100199\_1'}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02619}02619\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=np.str\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02620}02620\ \ \ \ \ \ \ \ \ ind\ =\ np.arange(len(a))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02621}02621\ \ \ \ \ \ \ \ \ assert\_equal([a.searchsorted(v,\ \textcolor{stringliteral}{'left'})\ \textcolor{keywordflow}{for}\ v\ \textcolor{keywordflow}{in}\ a],\ ind)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02622}02622\ \ \ \ \ \ \ \ \ assert\_equal([a.searchsorted(v,\ \textcolor{stringliteral}{'right'})\ \textcolor{keywordflow}{for}\ v\ \textcolor{keywordflow}{in}\ a],\ ind\ +\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02623}02623\ \ \ \ \ \ \ \ \ assert\_equal([a.searchsorted(a[i],\ \textcolor{stringliteral}{'left'})\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ ind],\ ind)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02624}02624\ \ \ \ \ \ \ \ \ assert\_equal([a.searchsorted(a[i],\ \textcolor{stringliteral}{'right'})\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ ind],\ ind\ +\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02625}02625\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02626}02626\ \ \ \ \ \textcolor{keyword}{def\ }test\_searchsorted\_with\_invalid\_sorter(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02627}02627\ \ \ \ \ \ \ \ \ a\ =\ np.array([5,\ 2,\ 1,\ 3,\ 4])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02628}02628\ \ \ \ \ \ \ \ \ s\ =\ np.argsort(a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02629}02629\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ np.searchsorted,\ a,\ 0,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02630}02630\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sorter=np.array((1,\ (2,\ 3)),\ dtype=object))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02631}02631\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ np.searchsorted,\ a,\ 0,\ sorter=[1.1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02632}02632\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.searchsorted,\ a,\ 0,\ sorter=[1,\ 2,\ 3,\ 4])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02633}02633\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.searchsorted,\ a,\ 0,\ sorter=[1,\ 2,\ 3,\ 4,\ 5,\ 6])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02634}02634\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02635}02635\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ bounds\ check}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02636}02636\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.searchsorted,\ a,\ 4,\ sorter=[0,\ 1,\ 2,\ 3,\ 5])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02637}02637\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.searchsorted,\ a,\ 0,\ sorter=[-\/1,\ 0,\ 1,\ 2,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02638}02638\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.searchsorted,\ a,\ 0,\ sorter=[4,\ 0,\ -\/1,\ 2,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02639}02639\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02640}02640\ \ \ \ \ \textcolor{keyword}{def\ }test\_searchsorted\_with\_sorter(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02641}02641\ \ \ \ \ \ \ \ \ a\ =\ np.random.rand(300)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02642}02642\ \ \ \ \ \ \ \ \ s\ =\ a.argsort()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02643}02643\ \ \ \ \ \ \ \ \ b\ =\ np.sort(a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02644}02644\ \ \ \ \ \ \ \ \ k\ =\ np.linspace(0,\ 1,\ 20)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02645}02645\ \ \ \ \ \ \ \ \ assert\_equal(b.searchsorted(k),\ a.searchsorted(k,\ sorter=s))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02646}02646\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02647}02647\ \ \ \ \ \ \ \ \ a\ =\ np.array([0,\ 1,\ 2,\ 3,\ 5]*20)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02648}02648\ \ \ \ \ \ \ \ \ s\ =\ a.argsort()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02649}02649\ \ \ \ \ \ \ \ \ k\ =\ [0,\ 1,\ 2,\ 3,\ 5]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02650}02650\ \ \ \ \ \ \ \ \ expected\ =\ [0,\ 20,\ 40,\ 60,\ 80]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02651}02651\ \ \ \ \ \ \ \ \ assert\_equal(a.searchsorted(k,\ side=\textcolor{stringliteral}{'left'},\ sorter=s),\ expected)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02652}02652\ \ \ \ \ \ \ \ \ expected\ =\ [20,\ 40,\ 60,\ 80,\ 100]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02653}02653\ \ \ \ \ \ \ \ \ assert\_equal(a.searchsorted(k,\ side=\textcolor{stringliteral}{'right'},\ sorter=s),\ expected)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02654}02654\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02655}02655\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ searching\ unaligned\ array}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02656}02656\ \ \ \ \ \ \ \ \ keys\ =\ np.arange(10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02657}02657\ \ \ \ \ \ \ \ \ a\ =\ keys.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02658}02658\ \ \ \ \ \ \ \ \ np.random.shuffle(s)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02659}02659\ \ \ \ \ \ \ \ \ s\ =\ a.argsort()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02660}02660\ \ \ \ \ \ \ \ \ aligned\ =\ np.empty(a.itemsize\ *\ a.size\ +\ 1,\ \textcolor{stringliteral}{'uint8'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02661}02661\ \ \ \ \ \ \ \ \ unaligned\ =\ aligned[1:].view(a.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02662}02662\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ searching\ unaligned\ array}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02663}02663\ \ \ \ \ \ \ \ \ unaligned[:]\ =\ a}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02664}02664\ \ \ \ \ \ \ \ \ b\ =\ unaligned.searchsorted(keys,\ \textcolor{stringliteral}{'left'},\ s)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02665}02665\ \ \ \ \ \ \ \ \ assert\_equal(b,\ keys)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02666}02666\ \ \ \ \ \ \ \ \ b\ =\ unaligned.searchsorted(keys,\ \textcolor{stringliteral}{'right'},\ s)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02667}02667\ \ \ \ \ \ \ \ \ assert\_equal(b,\ keys\ +\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02668}02668\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ searching\ for\ unaligned\ keys}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02669}02669\ \ \ \ \ \ \ \ \ unaligned[:]\ =\ keys}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02670}02670\ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted(unaligned,\ \textcolor{stringliteral}{'left'},\ s)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02671}02671\ \ \ \ \ \ \ \ \ assert\_equal(b,\ keys)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02672}02672\ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted(unaligned,\ \textcolor{stringliteral}{'right'},\ s)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02673}02673\ \ \ \ \ \ \ \ \ assert\_equal(b,\ keys\ +\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02674}02674\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02675}02675\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ all\ type\ specific\ indirect\ binary\ search\ functions}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02676}02676\ \ \ \ \ \ \ \ \ types\ =\ \textcolor{stringliteral}{''}.join((np.typecodes[\textcolor{stringliteral}{'AllInteger'}],\ np.typecodes[\textcolor{stringliteral}{'AllFloat'}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02677}02677\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.typecodes[\textcolor{stringliteral}{'Datetime'}],\ \textcolor{stringliteral}{'?O'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02678}02678\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ types:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02679}02679\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ dt\ ==\ \textcolor{stringliteral}{'M'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02680}02680\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dt\ =\ \textcolor{stringliteral}{'M8[D]'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02681}02681\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ dt\ ==\ \textcolor{stringliteral}{'?'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02682}02682\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.array([1,\ 0],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02683}02683\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ We\ want\ the\ sorter\ array\ to\ be\ of\ a\ type\ that\ is\ different}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02684}02684\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ from\ np.intp\ in\ all\ platforms,\ to\ check\ for\ \#4698}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02685}02685\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ s\ =\ np.array([1,\ 0],\ dtype=np.int16)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02686}02686\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ out\ =\ np.array([1,\ 0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02687}02687\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02688}02688\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.array([3,\ 4,\ 1,\ 2,\ 0],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02689}02689\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ We\ want\ the\ sorter\ array\ to\ be\ of\ a\ type\ that\ is\ different}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02690}02690\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ from\ np.intp\ in\ all\ platforms,\ to\ check\ for\ \#4698}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02691}02691\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ s\ =\ np.array([4,\ 2,\ 3,\ 0,\ 1],\ dtype=np.int16)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02692}02692\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ out\ =\ np.array([3,\ 4,\ 1,\ 2,\ 0],\ dtype=np.intp)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02693}02693\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted(a,\ \textcolor{stringliteral}{'left'},\ s)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02694}02694\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(b,\ out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02695}02695\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted(a,\ \textcolor{stringliteral}{'right'},\ s)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02696}02696\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(b,\ out\ +\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02697}02697\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ empty\ array,\ use\ a\ fresh\ array\ to\ get\ warnings\ in}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02698}02698\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ valgrind\ if\ access\ happens.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02699}02699\ \ \ \ \ \ \ \ \ \ \ \ \ e\ =\ np.ndarray(shape=0,\ buffer=b\textcolor{stringliteral}{''},\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02700}02700\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ e.searchsorted(a,\ \textcolor{stringliteral}{'left'},\ s[:0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02701}02701\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(b,\ np.zeros(len(a),\ dtype=np.intp))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02702}02702\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted(e,\ \textcolor{stringliteral}{'left'},\ s)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02703}02703\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(b,\ np.zeros(0,\ dtype=np.intp))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02704}02704\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02705}02705\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ non-\/contiguous\ sorter\ array}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02706}02706\ \ \ \ \ \ \ \ \ a\ =\ np.array([3,\ 4,\ 1,\ 2,\ 0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02707}02707\ \ \ \ \ \ \ \ \ srt\ =\ np.empty((10,),\ dtype=np.intp)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02708}02708\ \ \ \ \ \ \ \ \ srt[1::2]\ =\ -\/1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02709}02709\ \ \ \ \ \ \ \ \ srt[::2]\ =\ [4,\ 2,\ 3,\ 0,\ 1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02710}02710\ \ \ \ \ \ \ \ \ s\ =\ srt[::2]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02711}02711\ \ \ \ \ \ \ \ \ out\ =\ np.array([3,\ 4,\ 1,\ 2,\ 0],\ dtype=np.intp)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02712}02712\ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted(a,\ \textcolor{stringliteral}{'left'},\ s)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02713}02713\ \ \ \ \ \ \ \ \ assert\_equal(b,\ out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02714}02714\ \ \ \ \ \ \ \ \ b\ =\ a.searchsorted(a,\ \textcolor{stringliteral}{'right'},\ s)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02715}02715\ \ \ \ \ \ \ \ \ assert\_equal(b,\ out\ +\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02716}02716\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02717}02717\ \ \ \ \ \textcolor{keyword}{def\ }test\_searchsorted\_return\_type(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02718}02718\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Functions\ returning\ indices\ should\ always\ return\ base\ ndarrays}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02719}02719\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }A(np.ndarray):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02720}02720\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02721}02721\ \ \ \ \ \ \ \ \ a\ =\ np.arange(5).view(A)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02722}02722\ \ \ \ \ \ \ \ \ b\ =\ np.arange(1,\ 3).view(A)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02723}02723\ \ \ \ \ \ \ \ \ s\ =\ np.arange(5).view(A)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02724}02724\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ isinstance(a.searchsorted(b,\ \textcolor{stringliteral}{'left'}),\ A))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02725}02725\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ isinstance(a.searchsorted(b,\ \textcolor{stringliteral}{'right'}),\ A))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02726}02726\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ isinstance(a.searchsorted(b,\ \textcolor{stringliteral}{'left'},\ s),\ A))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02727}02727\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ isinstance(a.searchsorted(b,\ \textcolor{stringliteral}{'right'},\ s),\ A))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02728}02728\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02729}02729\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}dtype"{},\ np.typecodes["{}All"{}])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02730}02730\ \ \ \ \ \textcolor{keyword}{def\ }test\_argpartition\_out\_of\_range(self,\ dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02731}02731\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ out\ of\ range\ values\ in\ kth\ raise\ an\ error,\ gh-\/5469}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02732}02732\ \ \ \ \ \ \ \ \ d\ =\ np.arange(10).astype(dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02733}02733\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ d.argpartition,\ 10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02734}02734\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ d.argpartition,\ -\/11)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02735}02735\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02736}02736\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}dtype"{},\ np.typecodes["{}All"{}])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02737}02737\ \ \ \ \ \textcolor{keyword}{def\ }test\_partition\_out\_of\_range(self,\ dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02738}02738\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ out\ of\ range\ values\ in\ kth\ raise\ an\ error,\ gh-\/5469}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02739}02739\ \ \ \ \ \ \ \ \ d\ =\ np.arange(10).astype(dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02740}02740\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ d.partition,\ 10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02741}02741\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ d.partition,\ -\/11)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02742}02742\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02743}02743\ \ \ \ \ \textcolor{keyword}{def\ }test\_argpartition\_integer(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02744}02744\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ non-\/integer\ values\ in\ kth\ raise\ an\ error/}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02745}02745\ \ \ \ \ \ \ \ \ d\ =\ np.arange(10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02746}02746\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ d.argpartition,\ 9.)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02747}02747\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ also\ for\ generic\ type\ argpartition,\ which\ uses\ sorting}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02748}02748\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ and\ used\ to\ not\ bound\ check\ kth}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02749}02749\ \ \ \ \ \ \ \ \ d\_obj\ =\ np.arange(10,\ dtype=object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02750}02750\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ d\_obj.argpartition,\ 9.)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02751}02751\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02752}02752\ \ \ \ \ \textcolor{keyword}{def\ }test\_partition\_integer(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02753}02753\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ out\ of\ range\ values\ in\ kth\ raise\ an\ error,\ gh-\/5469}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02754}02754\ \ \ \ \ \ \ \ \ d\ =\ np.arange(10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02755}02755\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ d.partition,\ 9.)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02756}02756\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ also\ for\ generic\ type\ partition,\ which\ uses\ sorting}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02757}02757\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ and\ used\ to\ not\ bound\ check\ kth}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02758}02758\ \ \ \ \ \ \ \ \ d\_obj\ =\ np.arange(10,\ dtype=object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02759}02759\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ d\_obj.partition,\ 9.)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02760}02760\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02761}02761\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}kth\_dtype"{},\ np.typecodes["{}AllInteger"{}])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02762}02762\ \ \ \ \ \textcolor{keyword}{def\ }test\_partition\_empty\_array(self,\ kth\_dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02763}02763\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ axis\ handling\ for\ multidimensional\ empty\ arrays}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02764}02764\ \ \ \ \ \ \ \ \ kth\ =\ np.array(0,\ dtype=kth\_dtype)[()]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02765}02765\ \ \ \ \ \ \ \ \ a\ =\ np.array([])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02766}02766\ \ \ \ \ \ \ \ \ a.shape\ =\ (3,\ 2,\ 1,\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02767}02767\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ axis\ \textcolor{keywordflow}{in}\ range(-\/a.ndim,\ a.ndim):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02768}02768\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{'test\ empty\ array\ partition\ with\ axis=\{0\}'}.format(axis)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02769}02769\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.partition(a,\ kth,\ axis=axis),\ a,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02770}02770\ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{'test\ empty\ array\ partition\ with\ axis=None'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02771}02771\ \ \ \ \ \ \ \ \ assert\_equal(np.partition(a,\ kth,\ axis=\textcolor{keywordtype}{None}),\ a.ravel(),\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02772}02772\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02773}02773\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}kth\_dtype"{},\ np.typecodes["{}AllInteger"{}])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02774}02774\ \ \ \ \ \textcolor{keyword}{def\ }test\_argpartition\_empty\_array(self,\ kth\_dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02775}02775\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ axis\ handling\ for\ multidimensional\ empty\ arrays}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02776}02776\ \ \ \ \ \ \ \ \ kth\ =\ np.array(0,\ dtype=kth\_dtype)[()]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02777}02777\ \ \ \ \ \ \ \ \ a\ =\ np.array([])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02778}02778\ \ \ \ \ \ \ \ \ a.shape\ =\ (3,\ 2,\ 1,\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02779}02779\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ axis\ \textcolor{keywordflow}{in}\ range(-\/a.ndim,\ a.ndim):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02780}02780\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{'test\ empty\ array\ argpartition\ with\ axis=\{0\}'}.format(axis)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02781}02781\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.partition(a,\ kth,\ axis=axis),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02782}02782\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.zeros\_like(a,\ dtype=np.intp),\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02783}02783\ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{'test\ empty\ array\ argpartition\ with\ axis=None'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02784}02784\ \ \ \ \ \ \ \ \ assert\_equal(np.partition(a,\ kth,\ axis=\textcolor{keywordtype}{None}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02785}02785\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.zeros\_like(a.ravel(),\ dtype=np.intp),\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02786}02786\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02787}02787\ \ \ \ \ \textcolor{keyword}{def\ }test\_partition(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02788}02788\ \ \ \ \ \ \ \ \ d\ =\ np.arange(10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02789}02789\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ np.partition,\ d,\ 2,\ kind=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02790}02790\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.partition,\ d,\ 2,\ kind=\textcolor{stringliteral}{"{}nonsense"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02791}02791\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.argpartition,\ d,\ 2,\ kind=\textcolor{stringliteral}{"{}nonsense"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02792}02792\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ d.partition,\ 2,\ axis=0,\ kind=\textcolor{stringliteral}{"{}nonsense"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02793}02793\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ d.argpartition,\ 2,\ axis=0,\ kind=\textcolor{stringliteral}{"{}nonsense"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02794}02794\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ k\ \textcolor{keywordflow}{in}\ (\textcolor{stringliteral}{"{}introselect"{}},):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02795}02795\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.array([])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02796}02796\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(np.partition(d,\ 0,\ kind=k),\ d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02797}02797\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(np.argpartition(d,\ 0,\ kind=k),\ d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02798}02798\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.ones(1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02799}02799\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(np.partition(d,\ 0,\ kind=k)[0],\ d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02800}02800\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(d[np.argpartition(d,\ 0,\ kind=k)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02801}02801\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.partition(d,\ 0,\ kind=k))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02802}02802\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02803}02803\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ kth\ not\ modified}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02804}02804\ \ \ \ \ \ \ \ \ \ \ \ \ kth\ =\ np.array([30,\ 15,\ 5])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02805}02805\ \ \ \ \ \ \ \ \ \ \ \ \ okth\ =\ kth.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02806}02806\ \ \ \ \ \ \ \ \ \ \ \ \ np.partition(np.arange(40),\ kth)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02807}02807\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(kth,\ okth)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02808}02808\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02809}02809\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ r\ \textcolor{keywordflow}{in}\ ([2,\ 1],\ [1,\ 2],\ [1,\ 1]):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02810}02810\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.array(r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02811}02811\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tgt\ =\ np.sort(d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02812}02812\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(np.partition(d,\ 0,\ kind=k)[0],\ tgt[0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02813}02813\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(np.partition(d,\ 1,\ kind=k)[1],\ tgt[1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02814}02814\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(d[np.argpartition(d,\ 0,\ kind=k)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02815}02815\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.partition(d,\ 0,\ kind=k))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02816}02816\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(d[np.argpartition(d,\ 1,\ kind=k)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02817}02817\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.partition(d,\ 1,\ kind=k))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02818}02818\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(d.size):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02819}02819\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ d[i:].\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a5fb8e6810a27d408fe67f541620bb1d8}{partition}}(0,\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02820}02820\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(d,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02821}02821\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02822}02822\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ r\ \textcolor{keywordflow}{in}\ ([3,\ 2,\ 1],\ [1,\ 2,\ 3],\ [2,\ 1,\ 3],\ [2,\ 3,\ 1],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02823}02823\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 1,\ 1],\ [1,\ 2,\ 2],\ [2,\ 2,\ 1],\ [1,\ 2,\ 1]):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02824}02824\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.array(r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02825}02825\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tgt\ =\ np.sort(d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02826}02826\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(np.partition(d,\ 0,\ kind=k)[0],\ tgt[0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02827}02827\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(np.partition(d,\ 1,\ kind=k)[1],\ tgt[1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02828}02828\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(np.partition(d,\ 2,\ kind=k)[2],\ tgt[2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02829}02829\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(d[np.argpartition(d,\ 0,\ kind=k)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02830}02830\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.partition(d,\ 0,\ kind=k))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02831}02831\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(d[np.argpartition(d,\ 1,\ kind=k)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02832}02832\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.partition(d,\ 1,\ kind=k))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02833}02833\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(d[np.argpartition(d,\ 2,\ kind=k)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02834}02834\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.partition(d,\ 2,\ kind=k))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02835}02835\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(d.size):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02836}02836\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ d[i:].\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a5fb8e6810a27d408fe67f541620bb1d8}{partition}}(0,\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02837}02837\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(d,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02838}02838\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02839}02839\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.ones(50)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02840}02840\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(np.partition(d,\ 0,\ kind=k),\ d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02841}02841\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(d[np.argpartition(d,\ 0,\ kind=k)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02842}02842\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.partition(d,\ 0,\ kind=k))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02843}02843\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02844}02844\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ sorted}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02845}02845\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.arange(49)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02846}02846\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.partition(d,\ 5,\ kind=k)[5],\ 5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02847}02847\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.partition(d,\ 15,\ kind=k)[15],\ 15)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02848}02848\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(d[np.argpartition(d,\ 5,\ kind=k)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02849}02849\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.partition(d,\ 5,\ kind=k))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02850}02850\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(d[np.argpartition(d,\ 15,\ kind=k)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02851}02851\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.partition(d,\ 15,\ kind=k))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02852}02852\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02853}02853\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ rsorted}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02854}02854\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.arange(47)[::-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02855}02855\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.partition(d,\ 6,\ kind=k)[6],\ 6)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02856}02856\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.partition(d,\ 16,\ kind=k)[16],\ 16)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02857}02857\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(d[np.argpartition(d,\ 6,\ kind=k)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02858}02858\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.partition(d,\ 6,\ kind=k))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02859}02859\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(d[np.argpartition(d,\ 16,\ kind=k)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02860}02860\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.partition(d,\ 16,\ kind=k))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02861}02861\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02862}02862\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(np.partition(d,\ -\/6,\ kind=k),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02863}02863\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.partition(d,\ 41,\ kind=k))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02864}02864\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(np.partition(d,\ -\/16,\ kind=k),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02865}02865\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.partition(d,\ 31,\ kind=k))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02866}02866\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(d[np.argpartition(d,\ -\/6,\ kind=k)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02867}02867\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.partition(d,\ 41,\ kind=k))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02868}02868\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02869}02869\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ median\ of\ 3\ killer,\ O(n\string^2)\ on\ pure\ median\ 3\ pivot\ quickselect}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02870}02870\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ exercises\ the\ median\ of\ median\ of\ 5\ code\ used\ to\ keep\ O(n)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02871}02871\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.arange(1000000)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02872}02872\ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ np.roll(d,\ d.size\ //\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02873}02873\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ =\ x.size\ //\ 2\ +\ 1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02874}02874\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.partition(x,\ mid)[mid],\ mid)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02875}02875\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.arange(1000001)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02876}02876\ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ np.roll(d,\ d.size\ //\ 2\ +\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02877}02877\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ =\ x.size\ //\ 2\ +\ 1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02878}02878\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.partition(x,\ mid)[mid],\ mid)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02879}02879\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02880}02880\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ max}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02881}02881\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.ones(10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02882}02882\ \ \ \ \ \ \ \ \ \ \ \ \ d[1]\ =\ 4}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02883}02883\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.partition(d,\ (2,\ -\/1))[-\/1],\ 4)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02884}02884\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.partition(d,\ (2,\ -\/1))[2],\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02885}02885\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(d[np.argpartition(d,\ (2,\ -\/1))][-\/1],\ 4)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02886}02886\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(d[np.argpartition(d,\ (2,\ -\/1))][2],\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02887}02887\ \ \ \ \ \ \ \ \ \ \ \ \ d[1]\ =\ np.nan}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02888}02888\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.isnan(d[np.argpartition(d,\ (2,\ -\/1))][-\/1]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02889}02889\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.isnan(np.partition(d,\ (2,\ -\/1))[-\/1]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02890}02890\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02891}02891\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ equal\ elements}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02892}02892\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.arange(47)\ \%\ 7}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02893}02893\ \ \ \ \ \ \ \ \ \ \ \ \ tgt\ =\ np.sort(np.arange(47)\ \%\ 7)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02894}02894\ \ \ \ \ \ \ \ \ \ \ \ \ np.random.shuffle(d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02895}02895\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(d.size):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02896}02896\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.partition(d,\ i,\ kind=k)[i],\ tgt[i])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02897}02897\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(d[np.argpartition(d,\ 6,\ kind=k)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02898}02898\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.partition(d,\ 6,\ kind=k))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02899}02899\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(d[np.argpartition(d,\ 16,\ kind=k)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02900}02900\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.partition(d,\ 16,\ kind=k))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02901}02901\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(d.size):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02902}02902\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ d[i:].\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a5fb8e6810a27d408fe67f541620bb1d8}{partition}}(0,\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02903}02903\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(d,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02904}02904\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02905}02905\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.array([0,\ 1,\ 2,\ 3,\ 4,\ 5,\ 7,\ 7,\ 7,\ 7,\ 7,\ 7,\ 7,\ 7,\ 7,\ 7,\ 7,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02906}02906\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 7,\ 7,\ 7,\ 7,\ 7,\ 9])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02907}02907\ \ \ \ \ \ \ \ \ \ \ \ \ kth\ =\ [0,\ 3,\ 19,\ 20]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02908}02908\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.partition(d,\ kth,\ kind=k)[kth],\ (0,\ 3,\ 7,\ 7))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02909}02909\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(d[np.argpartition(d,\ kth,\ kind=k)][kth],\ (0,\ 3,\ 7,\ 7))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02910}02910\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02911}02911\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.array([2,\ 1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02912}02912\ \ \ \ \ \ \ \ \ \ \ \ \ d.partition(0,\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02913}02913\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ d.partition,\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02914}02914\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(np.AxisError,\ d.partition,\ 3,\ axis=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02915}02915\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.partition,\ d,\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02916}02916\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(np.AxisError,\ np.partition,\ d,\ 2,\ axis=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02917}02917\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ d.argpartition,\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02918}02918\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(np.AxisError,\ d.argpartition,\ 3,\ axis=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02919}02919\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.argpartition,\ d,\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02920}02920\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(np.AxisError,\ np.argpartition,\ d,\ 2,\ axis=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02921}02921\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.arange(10).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}((2,\ 5))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02922}02922\ \ \ \ \ \ \ \ \ \ \ \ \ d.partition(1,\ axis=0,\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02923}02923\ \ \ \ \ \ \ \ \ \ \ \ \ d.partition(4,\ axis=1,\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02924}02924\ \ \ \ \ \ \ \ \ \ \ \ \ np.partition(d,\ 1,\ axis=0,\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02925}02925\ \ \ \ \ \ \ \ \ \ \ \ \ np.partition(d,\ 4,\ axis=1,\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02926}02926\ \ \ \ \ \ \ \ \ \ \ \ \ np.partition(d,\ 1,\ axis=\textcolor{keywordtype}{None},\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02927}02927\ \ \ \ \ \ \ \ \ \ \ \ \ np.partition(d,\ 9,\ axis=\textcolor{keywordtype}{None},\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02928}02928\ \ \ \ \ \ \ \ \ \ \ \ \ d.argpartition(1,\ axis=0,\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02929}02929\ \ \ \ \ \ \ \ \ \ \ \ \ d.argpartition(4,\ axis=1,\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02930}02930\ \ \ \ \ \ \ \ \ \ \ \ \ np.argpartition(d,\ 1,\ axis=0,\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02931}02931\ \ \ \ \ \ \ \ \ \ \ \ \ np.argpartition(d,\ 4,\ axis=1,\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02932}02932\ \ \ \ \ \ \ \ \ \ \ \ \ np.argpartition(d,\ 1,\ axis=\textcolor{keywordtype}{None},\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02933}02933\ \ \ \ \ \ \ \ \ \ \ \ \ np.argpartition(d,\ 9,\ axis=\textcolor{keywordtype}{None},\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02934}02934\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ d.partition,\ 2,\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02935}02935\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ d.partition,\ 11,\ axis=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02936}02936\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ d.partition,\ 2,\ axis=\textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02937}02937\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.partition,\ d,\ 9,\ axis=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02938}02938\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.partition,\ d,\ 11,\ axis=\textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02939}02939\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ d.argpartition,\ 2,\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02940}02940\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ d.argpartition,\ 11,\ axis=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02941}02941\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.argpartition,\ d,\ 9,\ axis=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02942}02942\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.argpartition,\ d,\ 11,\ axis=\textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02943}02943\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02944}02944\ \ \ \ \ \ \ \ \ \ \ \ \ td\ =\ [(dt,\ s)\ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ [np.int32,\ np.float32,\ np.complex64]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02945}02945\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ s\ \textcolor{keywordflow}{in}\ (9,\ 16)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02946}02946\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt,\ s\ \textcolor{keywordflow}{in}\ td:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02947}02947\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ aae\ =\ assert\_array\_equal}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02948}02948\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ at\ =\ assert\_}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02949}02949\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02950}02950\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.arange(s,\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02951}02951\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.random.shuffle(d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02952}02952\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ d1\ =\ np.tile(np.arange(s,\ dtype=dt),\ (4,\ 1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02953}02953\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ map(np.random.shuffle,\ d1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02954}02954\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ d0\ =\ np.transpose(d1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02955}02955\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(d.size):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02956}02956\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ np.partition(d,\ i,\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02957}02957\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(p[i],\ i)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02958}02958\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ all\ before\ are\ smaller}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02959}02959\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_less(p[:i],\ p[i])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02960}02960\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ all\ after\ are\ larger}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02961}02961\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_less(p[i],\ p[i\ +\ 1:])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02962}02962\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ aae(p,\ d[np.argpartition(d,\ i,\ kind=k)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02963}02963\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02964}02964\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ np.partition(d1,\ i,\ axis=1,\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02965}02965\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ aae(p[:,\ i],\ np.array([i]\ *\ d1.shape[0],\ dtype=dt))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02966}02966\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ array\_less\ does\ not\ seem\ to\ work\ right}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02967}02967\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ at((p[:,\ :i].T\ <=\ p[:,\ i]).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_ae94233643e35acde1817d89be3a2aeac}{all}}(),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02968}02968\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ msg=\textcolor{stringliteral}{"{}\%d:\ \%r\ <=\ \%r"{}}\ \%\ (i,\ p[:,\ i],\ p[:,\ :i].T))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02969}02969\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ at((p[:,\ i\ +\ 1:].T\ >\ p[:,\ i]).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_ae94233643e35acde1817d89be3a2aeac}{all}}(),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02970}02970\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ msg=\textcolor{stringliteral}{"{}\%d:\ \%r\ <\ \%r"{}}\ \%\ (i,\ p[:,\ i],\ p[:,\ i\ +\ 1:].T))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02971}02971\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ aae(p,\ d1[np.arange(d1.shape[0])[:,\ \textcolor{keywordtype}{None}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02972}02972\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.argpartition(d1,\ i,\ axis=1,\ kind=k)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02973}02973\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02974}02974\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ np.partition(d0,\ i,\ axis=0,\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02975}02975\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ aae(p[i,\ :],\ np.array([i]\ *\ d1.shape[0],\ dtype=dt))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02976}02976\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ array\_less\ does\ not\ seem\ to\ work\ right}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02977}02977\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ at((p[:i,\ :]\ <=\ p[i,\ :]).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_ae94233643e35acde1817d89be3a2aeac}{all}}(),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02978}02978\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ msg=\textcolor{stringliteral}{"{}\%d:\ \%r\ <=\ \%r"{}}\ \%\ (i,\ p[i,\ :],\ p[:i,\ :]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02979}02979\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ at((p[i\ +\ 1:,\ :]\ >\ p[i,\ :]).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_ae94233643e35acde1817d89be3a2aeac}{all}}(),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02980}02980\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ msg=\textcolor{stringliteral}{"{}\%d:\ \%r\ <\ \%r"{}}\ \%\ (i,\ p[i,\ :],\ p[:,\ i\ +\ 1:]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02981}02981\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ aae(p,\ d0[np.argpartition(d0,\ i,\ axis=0,\ kind=k),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02982}02982\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.arange(d0.shape[1])[\textcolor{keywordtype}{None},\ :]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02983}02983\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02984}02984\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ inplace}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02985}02985\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dc\ =\ d.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02986}02986\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dc.partition(i,\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02987}02987\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(dc,\ np.partition(d,\ i,\ kind=k))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02988}02988\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dc\ =\ d0.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02989}02989\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dc.partition(i,\ axis=0,\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02990}02990\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(dc,\ np.partition(d0,\ i,\ axis=0,\ kind=k))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02991}02991\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dc\ =\ d1.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02992}02992\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dc.partition(i,\ axis=1,\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02993}02993\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(dc,\ np.partition(d1,\ i,\ axis=1,\ kind=k))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02994}02994\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02995}02995\ \ \ \ \ \textcolor{keyword}{def\ }assert\_partitioned(self,\ d,\ kth):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02996}02996\ \ \ \ \ \ \ \ \ prev\ =\ 0}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02997}02997\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ k\ \textcolor{keywordflow}{in}\ np.sort(kth):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02998}02998\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_less(d[prev:k],\ d[k],\ err\_msg=\textcolor{stringliteral}{'kth\ \%d'}\ \%\ k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l02999}02999\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_((d[k:]\ >=\ d[k]).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_ae94233643e35acde1817d89be3a2aeac}{all}}(),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03000}03000\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ msg=\textcolor{stringliteral}{"{}kth\ \%d,\ \%r\ not\ greater\ equal\ \%d"{}}\ \%\ (k,\ d[k:],\ d[k]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03001}03001\ \ \ \ \ \ \ \ \ \ \ \ \ prev\ =\ k\ +\ 1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03002}03002\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03003}03003\ \ \ \ \ \textcolor{keyword}{def\ }test\_partition\_iterative(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03004}03004\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.arange(17)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03005}03005\ \ \ \ \ \ \ \ \ \ \ \ \ kth\ =\ (0,\ 1,\ 2,\ 429,\ 231)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03006}03006\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ d.partition,\ kth)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03007}03007\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ d.argpartition,\ kth)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03008}03008\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.arange(10).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}((2,\ 5))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03009}03009\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ d.partition,\ kth,\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03010}03010\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ d.partition,\ kth,\ axis=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03011}03011\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.partition,\ d,\ kth,\ axis=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03012}03012\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.partition,\ d,\ kth,\ axis=\textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03013}03013\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03014}03014\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.array([3,\ 4,\ 2,\ 1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03015}03015\ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ np.partition(d,\ (0,\ 3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03016}03016\ \ \ \ \ \ \ \ \ \ \ \ \ self.assert\_partitioned(p,\ (0,\ 3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03017}03017\ \ \ \ \ \ \ \ \ \ \ \ \ self.assert\_partitioned(d[np.argpartition(d,\ (0,\ 3))],\ (0,\ 3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03018}03018\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03019}03019\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(p,\ np.partition(d,\ (-\/3,\ -\/1)))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03020}03020\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(p,\ d[np.argpartition(d,\ (-\/3,\ -\/1))])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03021}03021\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03022}03022\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.arange(17)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03023}03023\ \ \ \ \ \ \ \ \ \ \ \ \ np.random.shuffle(d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03024}03024\ \ \ \ \ \ \ \ \ \ \ \ \ d.partition(range(d.size))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03025}03025\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(np.arange(17),\ d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03026}03026\ \ \ \ \ \ \ \ \ \ \ \ \ np.random.shuffle(d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03027}03027\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(np.arange(17),\ d[d.argpartition(range(d.size))])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03028}03028\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03029}03029\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ unsorted\ kth}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03030}03030\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.arange(17)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03031}03031\ \ \ \ \ \ \ \ \ \ \ \ \ np.random.shuffle(d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03032}03032\ \ \ \ \ \ \ \ \ \ \ \ \ keys\ =\ np.array([1,\ 3,\ 8,\ -\/2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03033}03033\ \ \ \ \ \ \ \ \ \ \ \ \ np.random.shuffle(d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03034}03034\ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ np.partition(d,\ keys)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03035}03035\ \ \ \ \ \ \ \ \ \ \ \ \ self.assert\_partitioned(p,\ keys)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03036}03036\ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ d[np.argpartition(d,\ keys)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03037}03037\ \ \ \ \ \ \ \ \ \ \ \ \ self.assert\_partitioned(p,\ keys)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03038}03038\ \ \ \ \ \ \ \ \ \ \ \ \ np.random.shuffle(keys)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03039}03039\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(np.partition(d,\ keys),\ p)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03040}03040\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(d[np.argpartition(d,\ keys)],\ p)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03041}03041\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03042}03042\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ equal\ kth}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03043}03043\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.arange(20)[::-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03044}03044\ \ \ \ \ \ \ \ \ \ \ \ \ self.assert\_partitioned(np.partition(d,\ [5]*4),\ [5])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03045}03045\ \ \ \ \ \ \ \ \ \ \ \ \ self.assert\_partitioned(np.partition(d,\ [5]*4\ +\ [6,\ 13]),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03046}03046\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [5]*4\ +\ [6,\ 13])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03047}03047\ \ \ \ \ \ \ \ \ \ \ \ \ self.assert\_partitioned(d[np.argpartition(d,\ [5]*4)],\ [5])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03048}03048\ \ \ \ \ \ \ \ \ \ \ \ \ self.assert\_partitioned(d[np.argpartition(d,\ [5]*4\ +\ [6,\ 13])],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03049}03049\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [5]*4\ +\ [6,\ 13])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03050}03050\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03051}03051\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.arange(12)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03052}03052\ \ \ \ \ \ \ \ \ \ \ \ \ np.random.shuffle(d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03053}03053\ \ \ \ \ \ \ \ \ \ \ \ \ d1\ =\ np.tile(np.arange(12),\ (4,\ 1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03054}03054\ \ \ \ \ \ \ \ \ \ \ \ \ map(np.random.shuffle,\ d1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03055}03055\ \ \ \ \ \ \ \ \ \ \ \ \ d0\ =\ np.transpose(d1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03056}03056\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03057}03057\ \ \ \ \ \ \ \ \ \ \ \ \ kth\ =\ (1,\ 6,\ 7,\ -\/1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03058}03058\ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ np.partition(d1,\ kth,\ axis=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03059}03059\ \ \ \ \ \ \ \ \ \ \ \ \ pa\ =\ d1[np.arange(d1.shape[0])[:,\ \textcolor{keywordtype}{None}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03060}03060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ d1.argpartition(kth,\ axis=1)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03061}03061\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(p,\ pa)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03062}03062\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(d1.shape[0]):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03063}03063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.assert\_partitioned(p[i,:],\ kth)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03064}03064\ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ np.partition(d0,\ kth,\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03065}03065\ \ \ \ \ \ \ \ \ \ \ \ \ pa\ =\ d0[np.argpartition(d0,\ kth,\ axis=0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03066}03066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.arange(d0.shape[1])[\textcolor{keywordtype}{None},:]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03067}03067\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(p,\ pa)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03068}03068\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(d0.shape[1]):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03069}03069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.assert\_partitioned(p[:,\ i],\ kth)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03070}03070\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03071}03071\ \ \ \ \ \textcolor{keyword}{def\ }test\_partition\_cdtype(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03072}03072\ \ \ \ \ \ \ \ \ d\ =\ np.array([(\textcolor{stringliteral}{'Galahad'},\ 1.7,\ 38),\ (\textcolor{stringliteral}{'Arthur'},\ 1.8,\ 41),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03073}03073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'Lancelot'},\ 1.9,\ 38)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03074}03074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=[(\textcolor{stringliteral}{'name'},\ \textcolor{stringliteral}{'|S10'}),\ (\textcolor{stringliteral}{'height'},\ \textcolor{stringliteral}{'<f8'}),\ (\textcolor{stringliteral}{'age'},\ \textcolor{stringliteral}{'<i4'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03075}03075\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03076}03076\ \ \ \ \ \ \ \ \ tgt\ =\ np.sort(d,\ order=[\textcolor{stringliteral}{'age'},\ \textcolor{stringliteral}{'height'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03077}03077\ \ \ \ \ \ \ \ \ assert\_array\_equal(np.partition(d,\ range(d.size),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03078}03078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ order=[\textcolor{stringliteral}{'age'},\ \textcolor{stringliteral}{'height'}]),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03079}03079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03080}03080\ \ \ \ \ \ \ \ \ assert\_array\_equal(d[np.argpartition(d,\ range(d.size),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03081}03081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ order=[\textcolor{stringliteral}{'age'},\ \textcolor{stringliteral}{'height'}])],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03082}03082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03083}03083\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ k\ \textcolor{keywordflow}{in}\ range(d.size):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03084}03084\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.partition(d,\ k,\ order=[\textcolor{stringliteral}{'age'},\ \textcolor{stringliteral}{'height'}])[k],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03085}03085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tgt[k])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03086}03086\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(d[np.argpartition(d,\ k,\ order=[\textcolor{stringliteral}{'age'},\ \textcolor{stringliteral}{'height'}])][k],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03087}03087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tgt[k])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03088}03088\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03089}03089\ \ \ \ \ \ \ \ \ d\ =\ np.array([\textcolor{stringliteral}{'Galahad'},\ \textcolor{stringliteral}{'Arthur'},\ \textcolor{stringliteral}{'zebra'},\ \textcolor{stringliteral}{'Lancelot'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03090}03090\ \ \ \ \ \ \ \ \ tgt\ =\ np.sort(d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03091}03091\ \ \ \ \ \ \ \ \ assert\_array\_equal(np.partition(d,\ range(d.size)),\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03092}03092\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ k\ \textcolor{keywordflow}{in}\ range(d.size):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03093}03093\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.partition(d,\ k)[k],\ tgt[k])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03094}03094\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(d[np.argpartition(d,\ k)][k],\ tgt[k])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03095}03095\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03096}03096\ \ \ \ \ \textcolor{keyword}{def\ }test\_partition\_unicode\_kind(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03097}03097\ \ \ \ \ \ \ \ \ d\ =\ np.arange(10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03098}03098\ \ \ \ \ \ \ \ \ k\ =\ b\textcolor{stringliteral}{'\(\backslash\)xc3\(\backslash\)xa4'}.decode(\textcolor{stringliteral}{"{}UTF8"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03099}03099\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ d.partition,\ 2,\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03100}03100\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ d.argpartition,\ 2,\ kind=k)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03101}03101\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03102}03102\ \ \ \ \ \textcolor{keyword}{def\ }test\_partition\_fuzz(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03103}03103\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ a\ few\ rounds\ of\ random\ data\ testing}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03104}03104\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ j\ \textcolor{keywordflow}{in}\ range(10,\ 30):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03105}03105\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(1,\ j\ -\/\ 2):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03106}03106\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.arange(j)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03107}03107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.random.shuffle(d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03108}03108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ d\ \%\ np.random.randint(2,\ 30)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03109}03109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx\ =\ np.random.randint(d.size)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03110}03110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ kth\ =\ [0,\ idx,\ i,\ i\ +\ 1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03111}03111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tgt\ =\ np.sort(d)[kth]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03112}03112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(np.partition(d,\ kth)[kth],\ tgt,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03113}03113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ err\_msg=\textcolor{stringliteral}{"{}data:\ \%r\(\backslash\)n\ kth:\ \%r"{}}\ \%\ (d,\ kth))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03114}03114\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03115}03115\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}kth\_dtype"{},\ np.typecodes["{}AllInteger"{}])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03116}03116\ \ \ \ \ \textcolor{keyword}{def\ }test\_argpartition\_gh5524(self,\ kth\_dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03117}03117\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ A\ test\ for\ functionality\ of\ argpartition\ on\ lists.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03118}03118\ \ \ \ \ \ \ \ \ kth\ =\ np.array(1,\ dtype=kth\_dtype)[()]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03119}03119\ \ \ \ \ \ \ \ \ d\ =\ [6,\ 7,\ 3,\ 2,\ 9,\ 0]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03120}03120\ \ \ \ \ \ \ \ \ p\ =\ np.argpartition(d,\ kth)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03121}03121\ \ \ \ \ \ \ \ \ self.assert\_partitioned(np.array(d)[p],[1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03122}03122\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03123}03123\ \ \ \ \ \textcolor{keyword}{def\ }test\_flatten(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03124}03124\ \ \ \ \ \ \ \ \ x0\ =\ np.array([[1,\ 2,\ 3],\ [4,\ 5,\ 6]],\ np.int32)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03125}03125\ \ \ \ \ \ \ \ \ x1\ =\ np.array([[[1,\ 2],\ [3,\ 4]],\ [[5,\ 6],\ [7,\ 8]]],\ np.int32)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03126}03126\ \ \ \ \ \ \ \ \ y0\ =\ np.array([1,\ 2,\ 3,\ 4,\ 5,\ 6],\ np.int32)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03127}03127\ \ \ \ \ \ \ \ \ y0f\ =\ np.array([1,\ 4,\ 2,\ 5,\ 3,\ 6],\ np.int32)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03128}03128\ \ \ \ \ \ \ \ \ y1\ =\ np.array([1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7,\ 8],\ np.int32)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03129}03129\ \ \ \ \ \ \ \ \ y1f\ =\ np.array([1,\ 5,\ 3,\ 7,\ 2,\ 6,\ 4,\ 8],\ np.int32)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03130}03130\ \ \ \ \ \ \ \ \ assert\_equal(x0.flatten(),\ y0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03131}03131\ \ \ \ \ \ \ \ \ assert\_equal(x0.flatten(\textcolor{stringliteral}{'F'}),\ y0f)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03132}03132\ \ \ \ \ \ \ \ \ assert\_equal(x0.flatten(\textcolor{stringliteral}{'F'}),\ x0.T.flatten())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03133}03133\ \ \ \ \ \ \ \ \ assert\_equal(x1.flatten(),\ y1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03134}03134\ \ \ \ \ \ \ \ \ assert\_equal(x1.flatten(\textcolor{stringliteral}{'F'}),\ y1f)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03135}03135\ \ \ \ \ \ \ \ \ assert\_equal(x1.flatten(\textcolor{stringliteral}{'F'}),\ x1.T.flatten())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03136}03136\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03137}03137\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03138}03138\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize('func',\ (np.dot,\ np.matmul)})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03139}03139\ \ \ \ \ \textcolor{keyword}{def\ }test\_arr\_mult(self,\ func):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03140}03140\ \ \ \ \ \ \ \ \ a\ =\ np.array([[1,\ 0],\ [0,\ 1]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03141}03141\ \ \ \ \ \ \ \ \ b\ =\ np.array([[0,\ 1],\ [1,\ 0]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03142}03142\ \ \ \ \ \ \ \ \ c\ =\ np.array([[9,\ 1],\ [1,\ -\/9]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03143}03143\ \ \ \ \ \ \ \ \ d\ =\ np.arange(24).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(4,\ 6)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03144}03144\ \ \ \ \ \ \ \ \ ddt\ =\ np.array(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03145}03145\ \ \ \ \ \ \ \ \ \ \ \ \ [[\ \ 55,\ \ 145,\ \ 235,\ \ 325],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03146}03146\ \ \ \ \ \ \ \ \ \ \ \ \ \ [\ 145,\ \ 451,\ \ 757,\ 1063],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03147}03147\ \ \ \ \ \ \ \ \ \ \ \ \ \ [\ 235,\ \ 757,\ 1279,\ 1801],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03148}03148\ \ \ \ \ \ \ \ \ \ \ \ \ \ [\ 325,\ 1063,\ 1801,\ 2539]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03149}03149\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03150}03150\ \ \ \ \ \ \ \ \ dtd\ =\ np.array(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03151}03151\ \ \ \ \ \ \ \ \ \ \ \ \ [[504,\ 540,\ 576,\ 612,\ 648,\ 684],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03152}03152\ \ \ \ \ \ \ \ \ \ \ \ \ \ [540,\ 580,\ 620,\ 660,\ 700,\ 740],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03153}03153\ \ \ \ \ \ \ \ \ \ \ \ \ \ [576,\ 620,\ 664,\ 708,\ 752,\ 796],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03154}03154\ \ \ \ \ \ \ \ \ \ \ \ \ \ [612,\ 660,\ 708,\ 756,\ 804,\ 852],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03155}03155\ \ \ \ \ \ \ \ \ \ \ \ \ \ [648,\ 700,\ 752,\ 804,\ 856,\ 908],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03156}03156\ \ \ \ \ \ \ \ \ \ \ \ \ \ [684,\ 740,\ 796,\ 852,\ 908,\ 964]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03157}03157\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03158}03158\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03159}03159\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03160}03160\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gemm\ vs\ syrk\ optimizations}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03161}03161\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ et\ \textcolor{keywordflow}{in}\ [np.float32,\ np.float64,\ np.complex64,\ np.complex128]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03162}03162\ \ \ \ \ \ \ \ \ \ \ \ \ eaf\ =\ a.astype(et)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03163}03163\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(func(eaf,\ eaf),\ eaf)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03164}03164\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(func(eaf.T,\ eaf),\ eaf)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03165}03165\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(func(eaf,\ eaf.T),\ eaf)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03166}03166\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(func(eaf.T,\ eaf.T),\ eaf)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03167}03167\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(func(eaf.T.copy(),\ eaf),\ eaf)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03168}03168\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(func(eaf,\ eaf.T.copy()),\ eaf)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03169}03169\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(func(eaf.T.copy(),\ eaf.T.copy()),\ eaf)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03170}03170\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03171}03171\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ syrk\ validations}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03172}03172\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ et\ \textcolor{keywordflow}{in}\ [np.float32,\ np.float64,\ np.complex64,\ np.complex128]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03173}03173\ \ \ \ \ \ \ \ \ \ \ \ \ eaf\ =\ a.astype(et)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03174}03174\ \ \ \ \ \ \ \ \ \ \ \ \ ebf\ =\ b.astype(et)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03175}03175\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(func(ebf,\ ebf),\ eaf)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03176}03176\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(func(ebf.T,\ ebf),\ eaf)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03177}03177\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(func(ebf,\ ebf.T),\ eaf)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03178}03178\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(func(ebf.T,\ ebf.T),\ eaf)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03179}03179\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03180}03180\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ syrk\ -\/\ different\ shape,\ stride,\ and\ view\ validations}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03181}03181\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ et\ \textcolor{keywordflow}{in}\ [np.float32,\ np.float64,\ np.complex64,\ np.complex128]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03182}03182\ \ \ \ \ \ \ \ \ \ \ \ \ edf\ =\ d.astype(et)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03183}03183\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03184}03184\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ func(edf[::-\/1,\ :],\ edf.T),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03185}03185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ func(edf[::-\/1,\ :].copy(),\ edf.T.copy())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03186}03186\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03187}03187\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03188}03188\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ func(edf[:,\ ::-\/1],\ edf.T),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03189}03189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ func(edf[:,\ ::-\/1].copy(),\ edf.T.copy())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03190}03190\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03191}03191\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03192}03192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ func(edf,\ edf[::-\/1,\ :].T),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03193}03193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ func(edf,\ edf[::-\/1,\ :].T.copy())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03194}03194\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03195}03195\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03196}03196\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ func(edf,\ edf[:,\ ::-\/1].T),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03197}03197\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ func(edf,\ edf[:,\ ::-\/1].T.copy())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03198}03198\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03199}03199\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03200}03200\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ func(edf[:edf.shape[0]\ //\ 2,\ :],\ edf[::2,\ :].T),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03201}03201\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ func(edf[:edf.shape[0]\ //\ 2,\ :].copy(),\ edf[::2,\ :].T.copy())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03202}03202\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03203}03203\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03204}03204\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ func(edf[::2,\ :],\ edf[:edf.shape[0]\ //\ 2,\ :].T),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03205}03205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ func(edf[::2,\ :].copy(),\ edf[:edf.shape[0]\ //\ 2,\ :].T.copy())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03206}03206\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03207}03207\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03208}03208\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ syrk\ -\/\ different\ shape}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03209}03209\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ et\ \textcolor{keywordflow}{in}\ [np.float32,\ np.float64,\ np.complex64,\ np.complex128]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03210}03210\ \ \ \ \ \ \ \ \ \ \ \ \ edf\ =\ d.astype(et)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03211}03211\ \ \ \ \ \ \ \ \ \ \ \ \ eddtf\ =\ ddt.astype(et)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03212}03212\ \ \ \ \ \ \ \ \ \ \ \ \ edtdf\ =\ dtd.astype(et)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03213}03213\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(func(edf,\ edf.T),\ eddtf)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03214}03214\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(func(edf.T,\ edf),\ edtdf)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03215}03215\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03216}03216\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize('func',\ (np.dot,\ np.matmul)})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03217}03217\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize('dtype',\ 'ifdFD')}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03218}03218\ \ \ \ \ \textcolor{keyword}{def\ }test\_no\_dgemv(self,\ func,\ dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03219}03219\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ vector\ arg\ for\ contiguous\ before\ gemv}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03220}03220\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/12156}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03221}03221\ \ \ \ \ \ \ \ \ a\ =\ np.arange(8.0,\ dtype=dtype).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,\ 4)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03222}03222\ \ \ \ \ \ \ \ \ b\ =\ np.broadcast\_to(1.,\ (4,\ 1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03223}03223\ \ \ \ \ \ \ \ \ ret1\ =\ func(a,\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03224}03224\ \ \ \ \ \ \ \ \ ret2\ =\ func(a,\ b.copy())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03225}03225\ \ \ \ \ \ \ \ \ assert\_equal(ret1,\ ret2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03226}03226\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03227}03227\ \ \ \ \ \ \ \ \ ret1\ =\ func(b.T,\ a.T)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03228}03228\ \ \ \ \ \ \ \ \ ret2\ =\ func(b.T.copy(),\ a.T)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03229}03229\ \ \ \ \ \ \ \ \ assert\_equal(ret1,\ ret2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03230}03230\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03231}03231\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ for\ unaligned\ data}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03232}03232\ \ \ \ \ \ \ \ \ dt\ =\ np.dtype(dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03233}03233\ \ \ \ \ \ \ \ \ a\ =\ np.zeros(8\ *\ dt.itemsize\ //\ 2\ +\ 1,\ dtype=\textcolor{stringliteral}{'int16'})[1:].view(dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03234}03234\ \ \ \ \ \ \ \ \ a\ =\ a.reshape(2,\ 4)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03235}03235\ \ \ \ \ \ \ \ \ b\ =\ a[0]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03236}03236\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ make\ sure\ it\ is\ not\ aligned}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03237}03237\ \ \ \ \ \ \ \ \ assert\_(a.\_\_array\_interface\_\_[\textcolor{stringliteral}{'data'}][0]\ \%\ dt.itemsize\ !=\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03238}03238\ \ \ \ \ \ \ \ \ ret1\ =\ func(a,\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03239}03239\ \ \ \ \ \ \ \ \ ret2\ =\ func(a.copy(),\ b.copy())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03240}03240\ \ \ \ \ \ \ \ \ assert\_equal(ret1,\ ret2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03241}03241\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03242}03242\ \ \ \ \ \ \ \ \ ret1\ =\ func(b.T,\ a.T)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03243}03243\ \ \ \ \ \ \ \ \ ret2\ =\ func(b.T.copy(),\ a.T.copy())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03244}03244\ \ \ \ \ \ \ \ \ assert\_equal(ret1,\ ret2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03245}03245\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03246}03246\ \ \ \ \ \textcolor{keyword}{def\ }test\_dot(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03247}03247\ \ \ \ \ \ \ \ \ a\ =\ np.array([[1,\ 0],\ [0,\ 1]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03248}03248\ \ \ \ \ \ \ \ \ b\ =\ np.array([[0,\ 1],\ [1,\ 0]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03249}03249\ \ \ \ \ \ \ \ \ c\ =\ np.array([[9,\ 1],\ [1,\ -\/9]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03250}03250\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ function\ versus\ methods}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03251}03251\ \ \ \ \ \ \ \ \ assert\_equal(np.dot(a,\ b),\ a.dot(b))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03252}03252\ \ \ \ \ \ \ \ \ assert\_equal(np.dot(np.dot(a,\ b),\ c),\ a.dot(b).dot(c))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03253}03253\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03254}03254\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ passing\ in\ an\ output\ array}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03255}03255\ \ \ \ \ \ \ \ \ c\ =\ np.zeros\_like(a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03256}03256\ \ \ \ \ \ \ \ \ a.dot(b,\ c)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03257}03257\ \ \ \ \ \ \ \ \ assert\_equal(c,\ np.dot(a,\ b))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03258}03258\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03259}03259\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ keyword\ args}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03260}03260\ \ \ \ \ \ \ \ \ c\ =\ np.zeros\_like(a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03261}03261\ \ \ \ \ \ \ \ \ a.dot(b=b,\ out=c)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03262}03262\ \ \ \ \ \ \ \ \ assert\_equal(c,\ np.dot(a,\ b))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03263}03263\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03264}03264\ \ \ \ \ \textcolor{keyword}{def\ }test\_dot\_type\_mismatch(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03265}03265\ \ \ \ \ \ \ \ \ c\ =\ 1.}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03266}03266\ \ \ \ \ \ \ \ \ A\ =\ np.array((1,1),\ dtype=\textcolor{stringliteral}{'i,i'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03267}03267\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03268}03268\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ np.dot,\ c,\ A)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03269}03269\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ np.dot,\ A,\ c)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03270}03270\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03271}03271\ \ \ \ \ \textcolor{keyword}{def\ }test\_dot\_out\_mem\_overlap(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03272}03272\ \ \ \ \ \ \ \ \ np.random.seed(1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03273}03273\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03274}03274\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ BLAS\ and\ non-\/BLAS\ code\ paths,\ including\ all\ dtypes}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03275}03275\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ that\ dot()\ supports}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03276}03276\ \ \ \ \ \ \ \ \ dtypes\ =\ [np.dtype(code)\ \textcolor{keywordflow}{for}\ code\ \textcolor{keywordflow}{in}\ np.typecodes[\textcolor{stringliteral}{'All'}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03277}03277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ code\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ \textcolor{stringliteral}{'USVM'}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03278}03278\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dtype\ \textcolor{keywordflow}{in}\ dtypes:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03279}03279\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.random.rand(3,\ 3).astype(dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03280}03280\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03281}03281\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Valid\ dot()\ output\ arrays\ must\ be\ aligned}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03282}03282\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ \mbox{\hyperlink{namespacenumpy_1_1core_1_1tests_1_1test__multiarray_a1b319b21145eee245865f85040bc64ab}{\_aligned\_zeros}}((3,\ 3),\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03283}03283\ \ \ \ \ \ \ \ \ \ \ \ \ b[...]\ =\ np.random.rand(3,\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03284}03284\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03285}03285\ \ \ \ \ \ \ \ \ \ \ \ \ y\ =\ np.dot(a,\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03286}03286\ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ np.dot(a,\ b,\ out=b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03287}03287\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(x,\ y,\ err\_msg=repr(dtype))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03288}03288\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03289}03289\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ invalid\ output\ array}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03290}03290\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.dot,\ a,\ b,\ out=b[::2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03291}03291\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.dot,\ a,\ b,\ out=b.T)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03292}03292\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03293}03293\ \ \ \ \ \textcolor{keyword}{def\ }test\_dot\_matmul\_out(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03294}03294\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/9641}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03295}03295\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }Sub(np.ndarray):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03296}03296\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03297}03297\ \ \ \ \ \ \ \ \ a\ =\ np.ones((2,\ 2)).view(Sub)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03298}03298\ \ \ \ \ \ \ \ \ b\ =\ np.ones((2,\ 2)).view(Sub)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03299}03299\ \ \ \ \ \ \ \ \ out\ =\ np.ones((2,\ 2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03300}03300\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03301}03301\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ make\ sure\ out\ can\ be\ any\ ndarray\ (not\ only\ subclass\ of\ inputs)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03302}03302\ \ \ \ \ \ \ \ \ np.dot(a,\ b,\ out=out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03303}03303\ \ \ \ \ \ \ \ \ np.matmul(a,\ b,\ out=out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03304}03304\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03305}03305\ \ \ \ \ \textcolor{keyword}{def\ }test\_dot\_matmul\_inner\_array\_casting\_fails(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03306}03306\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03307}03307\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }A:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03308}03308\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_array\_\_(self,\ *args,\ **kwargs):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03309}03309\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ NotImplementedError}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03310}03310\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03311}03311\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Don't\ override\ the\ error\ from\ calling\ \_\_array\_\_()}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03312}03312\ \ \ \ \ \ \ \ \ assert\_raises(NotImplementedError,\ np.dot,\ A(),\ A())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03313}03313\ \ \ \ \ \ \ \ \ assert\_raises(NotImplementedError,\ np.matmul,\ A(),\ A())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03314}03314\ \ \ \ \ \ \ \ \ assert\_raises(NotImplementedError,\ np.inner,\ A(),\ A())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03315}03315\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03316}03316\ \ \ \ \ \textcolor{keyword}{def\ }test\_matmul\_out(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03317}03317\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ overlapping\ memory}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03318}03318\ \ \ \ \ \ \ \ \ a\ =\ np.arange(18).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,\ 3,\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03319}03319\ \ \ \ \ \ \ \ \ b\ =\ np.matmul(a,\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03320}03320\ \ \ \ \ \ \ \ \ c\ =\ np.matmul(a,\ a,\ out=a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03321}03321\ \ \ \ \ \ \ \ \ assert\_(c\ \textcolor{keywordflow}{is}\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03322}03322\ \ \ \ \ \ \ \ \ assert\_equal(c,\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03323}03323\ \ \ \ \ \ \ \ \ a\ =\ np.arange(18).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,\ 3,\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03324}03324\ \ \ \ \ \ \ \ \ c\ =\ np.matmul(a,\ a,\ out=a[::-\/1,\ ...])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03325}03325\ \ \ \ \ \ \ \ \ assert\_(c.base\ \textcolor{keywordflow}{is}\ a.base)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03326}03326\ \ \ \ \ \ \ \ \ assert\_equal(c,\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03327}03327\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03328}03328\ \ \ \ \ \textcolor{keyword}{def\ }test\_diagonal(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03329}03329\ \ \ \ \ \ \ \ \ a\ =\ np.arange(12).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}((3,\ 4))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03330}03330\ \ \ \ \ \ \ \ \ assert\_equal(a.diagonal(),\ [0,\ 5,\ 10])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03331}03331\ \ \ \ \ \ \ \ \ assert\_equal(a.diagonal(0),\ [0,\ 5,\ 10])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03332}03332\ \ \ \ \ \ \ \ \ assert\_equal(a.diagonal(1),\ [1,\ 6,\ 11])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03333}03333\ \ \ \ \ \ \ \ \ assert\_equal(a.diagonal(-\/1),\ [4,\ 9])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03334}03334\ \ \ \ \ \ \ \ \ assert\_raises(np.AxisError,\ a.diagonal,\ axis1=0,\ axis2=5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03335}03335\ \ \ \ \ \ \ \ \ assert\_raises(np.AxisError,\ a.diagonal,\ axis1=5,\ axis2=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03336}03336\ \ \ \ \ \ \ \ \ assert\_raises(np.AxisError,\ a.diagonal,\ axis1=5,\ axis2=5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03337}03337\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ a.diagonal,\ axis1=1,\ axis2=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03338}03338\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03339}03339\ \ \ \ \ \ \ \ \ b\ =\ np.arange(8).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}((2,\ 2,\ 2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03340}03340\ \ \ \ \ \ \ \ \ assert\_equal(b.diagonal(),\ [[0,\ 6],\ [1,\ 7]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03341}03341\ \ \ \ \ \ \ \ \ assert\_equal(b.diagonal(0),\ [[0,\ 6],\ [1,\ 7]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03342}03342\ \ \ \ \ \ \ \ \ assert\_equal(b.diagonal(1),\ [[2],\ [3]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03343}03343\ \ \ \ \ \ \ \ \ assert\_equal(b.diagonal(-\/1),\ [[4],\ [5]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03344}03344\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ b.diagonal,\ axis1=0,\ axis2=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03345}03345\ \ \ \ \ \ \ \ \ assert\_equal(b.diagonal(0,\ 1,\ 2),\ [[0,\ 3],\ [4,\ 7]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03346}03346\ \ \ \ \ \ \ \ \ assert\_equal(b.diagonal(0,\ 0,\ 1),\ [[0,\ 6],\ [1,\ 7]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03347}03347\ \ \ \ \ \ \ \ \ assert\_equal(b.diagonal(offset=1,\ axis1=0,\ axis2=2),\ [[1],\ [3]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03348}03348\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Order\ of\ axis\ argument\ doesn't\ matter:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03349}03349\ \ \ \ \ \ \ \ \ assert\_equal(b.diagonal(0,\ 2,\ 1),\ [[0,\ 3],\ [4,\ 7]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03350}03350\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03351}03351\ \ \ \ \ \textcolor{keyword}{def\ }test\_diagonal\_view\_notwriteable(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03352}03352\ \ \ \ \ \ \ \ \ a\ =\ np.eye(3).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a0ac85288109e6be95d222f77f560f78e}{diagonal}}()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03353}03353\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ a.flags.writeable)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03354}03354\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ a.flags.owndata)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03355}03355\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03356}03356\ \ \ \ \ \ \ \ \ a\ =\ np.diagonal(np.eye(3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03357}03357\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ a.flags.writeable)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03358}03358\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ a.flags.owndata)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03359}03359\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03360}03360\ \ \ \ \ \ \ \ \ a\ =\ np.diag(np.eye(3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03361}03361\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ a.flags.writeable)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03362}03362\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ a.flags.owndata)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03363}03363\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03364}03364\ \ \ \ \ \textcolor{keyword}{def\ }test\_diagonal\_memleak(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03365}03365\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Regression\ test\ for\ a\ bug\ that\ crept\ in\ at\ one\ point}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03366}03366\ \ \ \ \ \ \ \ \ a\ =\ np.zeros((100,\ 100))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03367}03367\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ HAS\_REFCOUNT:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03368}03368\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(sys.getrefcount(a)\ <\ 50)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03369}03369\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(100):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03370}03370\ \ \ \ \ \ \ \ \ \ \ \ \ a.diagonal()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03371}03371\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ HAS\_REFCOUNT:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03372}03372\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(sys.getrefcount(a)\ <\ 50)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03373}03373\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03374}03374\ \ \ \ \ \textcolor{keyword}{def\ }test\_size\_zero\_memleak(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03375}03375\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Regression\ test\ for\ issue\ 9615}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03376}03376\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Exercises\ a\ special-\/case\ code\ path\ for\ dot\ products\ of\ length}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03377}03377\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ zero\ in\ cblasfuncs\ (making\ it\ is\ specific\ to\ floating\ dtypes).}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03378}03378\ \ \ \ \ \ \ \ \ a\ =\ np.array([],\ dtype=np.float64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03379}03379\ \ \ \ \ \ \ \ \ x\ =\ np.array(2.0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03380}03380\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ \_\ \textcolor{keywordflow}{in}\ range(100):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03381}03381\ \ \ \ \ \ \ \ \ \ \ \ \ np.dot(a,\ a,\ out=x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03382}03382\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ HAS\_REFCOUNT:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03383}03383\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(sys.getrefcount(x)\ <\ 50)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03384}03384\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03385}03385\ \ \ \ \ \textcolor{keyword}{def\ }test\_trace(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03386}03386\ \ \ \ \ \ \ \ \ a\ =\ np.arange(12).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}((3,\ 4))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03387}03387\ \ \ \ \ \ \ \ \ assert\_equal(a.trace(),\ 15)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03388}03388\ \ \ \ \ \ \ \ \ assert\_equal(a.trace(0),\ 15)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03389}03389\ \ \ \ \ \ \ \ \ assert\_equal(a.trace(1),\ 18)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03390}03390\ \ \ \ \ \ \ \ \ assert\_equal(a.trace(-\/1),\ 13)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03391}03391\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03392}03392\ \ \ \ \ \ \ \ \ b\ =\ np.arange(8).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}((2,\ 2,\ 2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03393}03393\ \ \ \ \ \ \ \ \ assert\_equal(b.trace(),\ [6,\ 8])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03394}03394\ \ \ \ \ \ \ \ \ assert\_equal(b.trace(0),\ [6,\ 8])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03395}03395\ \ \ \ \ \ \ \ \ assert\_equal(b.trace(1),\ [2,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03396}03396\ \ \ \ \ \ \ \ \ assert\_equal(b.trace(-\/1),\ [4,\ 5])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03397}03397\ \ \ \ \ \ \ \ \ assert\_equal(b.trace(0,\ 0,\ 1),\ [6,\ 8])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03398}03398\ \ \ \ \ \ \ \ \ assert\_equal(b.trace(0,\ 0,\ 2),\ [5,\ 9])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03399}03399\ \ \ \ \ \ \ \ \ assert\_equal(b.trace(0,\ 1,\ 2),\ [3,\ 11])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03400}03400\ \ \ \ \ \ \ \ \ assert\_equal(b.trace(offset=1,\ axis1=0,\ axis2=2),\ [1,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03401}03401\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03402}03402\ \ \ \ \ \ \ \ \ out\ =\ np.array(1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03403}03403\ \ \ \ \ \ \ \ \ ret\ =\ a.trace(out=out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03404}03404\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ ret\ \textcolor{keywordflow}{is}\ out}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03405}03405\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03406}03406\ \ \ \ \ \textcolor{keyword}{def\ }test\_trace\_subclass(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03407}03407\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ class\ would\ need\ to\ overwrite\ trace\ to\ ensure\ single-\/element}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03408}03408\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ output\ also\ has\ the\ right\ subclass.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03409}03409\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }MyArray(np.ndarray):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03410}03410\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03411}03411\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03412}03412\ \ \ \ \ \ \ \ \ b\ =\ np.arange(8).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}((2,\ 2,\ 2)).view(MyArray)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03413}03413\ \ \ \ \ \ \ \ \ t\ =\ b.trace()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03414}03414\ \ \ \ \ \ \ \ \ assert\_(isinstance(t,\ MyArray))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03415}03415\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03416}03416\ \ \ \ \ \textcolor{keyword}{def\ }test\_put(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03417}03417\ \ \ \ \ \ \ \ \ icodes\ =\ np.typecodes[\textcolor{stringliteral}{'AllInteger'}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03418}03418\ \ \ \ \ \ \ \ \ fcodes\ =\ np.typecodes[\textcolor{stringliteral}{'AllFloat'}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03419}03419\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ icodes\ +\ fcodes\ +\ \textcolor{stringliteral}{'O'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03420}03420\ \ \ \ \ \ \ \ \ \ \ \ \ tgt\ =\ np.array([0,\ 1,\ 0,\ 3,\ 0,\ 5],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03421}03421\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03422}03422\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ 1-\/d}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03423}03423\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.zeros(6,\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03424}03424\ \ \ \ \ \ \ \ \ \ \ \ \ a.put([1,\ 3,\ 5],\ [1,\ 3,\ 5])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03425}03425\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(a,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03426}03426\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03427}03427\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ 2-\/d}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03428}03428\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.zeros((2,\ 3),\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03429}03429\ \ \ \ \ \ \ \ \ \ \ \ \ a.put([1,\ 3,\ 5],\ [1,\ 3,\ 5])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03430}03430\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(a,\ tgt.reshape(2,\ 3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03431}03431\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03432}03432\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ \textcolor{stringliteral}{'?'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03433}03433\ \ \ \ \ \ \ \ \ \ \ \ \ tgt\ =\ np.array([\textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True}],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03434}03434\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03435}03435\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ 1-\/d}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03436}03436\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.zeros(6,\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03437}03437\ \ \ \ \ \ \ \ \ \ \ \ \ a.put([1,\ 3,\ 5],\ [\textcolor{keyword}{True}]*3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03438}03438\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(a,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03439}03439\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03440}03440\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ 2-\/d}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03441}03441\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.zeros((2,\ 3),\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03442}03442\ \ \ \ \ \ \ \ \ \ \ \ \ a.put([1,\ 3,\ 5],\ [\textcolor{keyword}{True}]*3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03443}03443\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(a,\ tgt.reshape(2,\ 3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03444}03444\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03445}03445\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ must\ be\ writeable}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03446}03446\ \ \ \ \ \ \ \ \ a\ =\ np.zeros(6)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03447}03447\ \ \ \ \ \ \ \ \ a.flags.writeable\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03448}03448\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ a.put,\ [1,\ 3,\ 5],\ [1,\ 3,\ 5])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03449}03449\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03450}03450\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ when\ calling\ np.put,\ make\ sure\ a}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03451}03451\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ TypeError\ is\ raised\ if\ the\ object}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03452}03452\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ isn't\ an\ ndarray}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03453}03453\ \ \ \ \ \ \ \ \ bad\_array\ =\ [1,\ 2,\ 3]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03454}03454\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ np.put,\ bad\_array,\ [0,\ 2],\ 5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03455}03455\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03456}03456\ \ \ \ \ \textcolor{keyword}{def\ }test\_ravel(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03457}03457\ \ \ \ \ \ \ \ \ a\ =\ np.array([[0,\ 1],\ [2,\ 3]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03458}03458\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(),\ [0,\ 1,\ 2,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03459}03459\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ a.ravel().flags.owndata)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03460}03460\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(\textcolor{stringliteral}{'F'}),\ [0,\ 2,\ 1,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03461}03461\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(order=\textcolor{stringliteral}{'C'}),\ [0,\ 1,\ 2,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03462}03462\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(order=\textcolor{stringliteral}{'F'}),\ [0,\ 2,\ 1,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03463}03463\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(order=\textcolor{stringliteral}{'A'}),\ [0,\ 1,\ 2,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03464}03464\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ a.ravel(order=\textcolor{stringliteral}{'A'}).flags.owndata)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03465}03465\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(order=\textcolor{stringliteral}{'K'}),\ [0,\ 1,\ 2,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03466}03466\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ a.ravel(order=\textcolor{stringliteral}{'K'}).flags.owndata)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03467}03467\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(),\ a.reshape(-\/1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03468}03468\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03469}03469\ \ \ \ \ \ \ \ \ a\ =\ np.array([[0,\ 1],\ [2,\ 3]],\ order=\textcolor{stringliteral}{'F'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03470}03470\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(),\ [0,\ 1,\ 2,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03471}03471\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(order=\textcolor{stringliteral}{'A'}),\ [0,\ 2,\ 1,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03472}03472\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(order=\textcolor{stringliteral}{'K'}),\ [0,\ 2,\ 1,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03473}03473\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ a.ravel(order=\textcolor{stringliteral}{'A'}).flags.owndata)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03474}03474\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ a.ravel(order=\textcolor{stringliteral}{'K'}).flags.owndata)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03475}03475\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(),\ a.reshape(-\/1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03476}03476\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(order=\textcolor{stringliteral}{'A'}),\ a.reshape(-\/1,\ order=\textcolor{stringliteral}{'A'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03477}03477\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03478}03478\ \ \ \ \ \ \ \ \ a\ =\ np.array([[0,\ 1],\ [2,\ 3]])[::-\/1,\ :]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03479}03479\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(),\ [2,\ 3,\ 0,\ 1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03480}03480\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(order=\textcolor{stringliteral}{'C'}),\ [2,\ 3,\ 0,\ 1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03481}03481\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(order=\textcolor{stringliteral}{'F'}),\ [2,\ 0,\ 3,\ 1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03482}03482\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(order=\textcolor{stringliteral}{'A'}),\ [2,\ 3,\ 0,\ 1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03483}03483\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 'K'\ doesn't\ reverse\ the\ axes\ of\ negative\ strides}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03484}03484\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(order=\textcolor{stringliteral}{'K'}),\ [2,\ 3,\ 0,\ 1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03485}03485\ \ \ \ \ \ \ \ \ assert\_(a.ravel(order=\textcolor{stringliteral}{'K'}).flags.owndata)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03486}03486\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03487}03487\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ simple\ 1-\/d\ copy\ behaviour:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03488}03488\ \ \ \ \ \ \ \ \ a\ =\ np.arange(10)[::2]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03489}03489\ \ \ \ \ \ \ \ \ assert\_(a.ravel(\textcolor{stringliteral}{'K'}).flags.owndata)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03490}03490\ \ \ \ \ \ \ \ \ assert\_(a.ravel(\textcolor{stringliteral}{'C'}).flags.owndata)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03491}03491\ \ \ \ \ \ \ \ \ assert\_(a.ravel(\textcolor{stringliteral}{'F'}).flags.owndata)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03492}03492\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03493}03493\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Not\ contiguous\ and\ 1-\/sized\ axis\ with\ non\ matching\ stride}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03494}03494\ \ \ \ \ \ \ \ \ a\ =\ np.arange(2**3\ *\ 2)[::2]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03495}03495\ \ \ \ \ \ \ \ \ a\ =\ a.reshape(2,\ 1,\ 2,\ 2).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a6fc6945fa57fb7f804b191a97952b05a}{swapaxes}}(-\/1,\ -\/2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03496}03496\ \ \ \ \ \ \ \ \ strides\ =\ list(a.strides)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03497}03497\ \ \ \ \ \ \ \ \ strides[1]\ =\ 123}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03498}03498\ \ \ \ \ \ \ \ \ a.strides\ =\ strides}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03499}03499\ \ \ \ \ \ \ \ \ assert\_(a.ravel(order=\textcolor{stringliteral}{'K'}).flags.owndata)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03500}03500\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(\textcolor{stringliteral}{'K'}),\ np.arange(0,\ 15,\ 2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03501}03501\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03502}03502\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ contiguous\ and\ 1-\/sized\ axis\ with\ non\ matching\ stride\ works:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03503}03503\ \ \ \ \ \ \ \ \ a\ =\ np.arange(2**3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03504}03504\ \ \ \ \ \ \ \ \ a\ =\ a.reshape(2,\ 1,\ 2,\ 2).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a6fc6945fa57fb7f804b191a97952b05a}{swapaxes}}(-\/1,\ -\/2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03505}03505\ \ \ \ \ \ \ \ \ strides\ =\ list(a.strides)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03506}03506\ \ \ \ \ \ \ \ \ strides[1]\ =\ 123}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03507}03507\ \ \ \ \ \ \ \ \ a.strides\ =\ strides}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03508}03508\ \ \ \ \ \ \ \ \ assert\_(np.may\_share\_memory(a.ravel(order=\textcolor{stringliteral}{'K'}),\ a))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03509}03509\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(order=\textcolor{stringliteral}{'K'}),\ np.arange(2**3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03510}03510\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03511}03511\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ negative\ strides\ (not\ very\ interesting\ since\ non-\/contiguous):}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03512}03512\ \ \ \ \ \ \ \ \ a\ =\ np.arange(4)[::-\/1].\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03513}03513\ \ \ \ \ \ \ \ \ assert\_(a.ravel(order=\textcolor{stringliteral}{'C'}).flags.owndata)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03514}03514\ \ \ \ \ \ \ \ \ assert\_(a.ravel(order=\textcolor{stringliteral}{'K'}).flags.owndata)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03515}03515\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(\textcolor{stringliteral}{'C'}),\ [3,\ 2,\ 1,\ 0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03516}03516\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(\textcolor{stringliteral}{'K'}),\ [3,\ 2,\ 1,\ 0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03517}03517\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03518}03518\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 1-\/element\ tidy\ strides\ test:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03519}03519\ \ \ \ \ \ \ \ \ a\ =\ np.array([[1]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03520}03520\ \ \ \ \ \ \ \ \ a.strides\ =\ (123,\ 432)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03521}03521\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ If\ the\ following\ stride\ is\ not\ 8,\ NPY\_RELAXED\_STRIDES\_DEBUG\ is}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03522}03522\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ messing\ them\ up\ on\ purpose:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03523}03523\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ np.ones(1).strides\ ==\ (8,):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03524}03524\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.may\_share\_memory(a.ravel(\textcolor{stringliteral}{'K'}),\ a))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03525}03525\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(\textcolor{stringliteral}{'K'}).strides,\ (a.dtype.itemsize,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03526}03526\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03527}03527\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ order\ \textcolor{keywordflow}{in}\ (\textcolor{stringliteral}{'C'},\ \textcolor{stringliteral}{'F'},\ \textcolor{stringliteral}{'A'},\ \textcolor{stringliteral}{'K'}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03528}03528\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 0-\/d\ corner\ case:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03529}03529\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.array(0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03530}03530\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(order),\ [0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03531}03531\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.may\_share\_memory(a.ravel(order),\ a))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03532}03532\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03533}03533\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ that\ certain\ non-\/inplace\ ravels\ work\ right\ (mostly)\ for\ 'K':}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03534}03534\ \ \ \ \ \ \ \ \ b\ =\ np.arange(2**4\ *\ 2)[::2].\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,\ 2,\ 2,\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03535}03535\ \ \ \ \ \ \ \ \ a\ =\ b[...,\ ::2]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03536}03536\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(\textcolor{stringliteral}{'K'}),\ [0,\ 4,\ 8,\ 12,\ 16,\ 20,\ 24,\ 28])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03537}03537\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(\textcolor{stringliteral}{'C'}),\ [0,\ 4,\ 8,\ 12,\ 16,\ 20,\ 24,\ 28])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03538}03538\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(\textcolor{stringliteral}{'A'}),\ [0,\ 4,\ 8,\ 12,\ 16,\ 20,\ 24,\ 28])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03539}03539\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(\textcolor{stringliteral}{'F'}),\ [0,\ 16,\ 8,\ 24,\ 4,\ 20,\ 12,\ 28])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03540}03540\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03541}03541\ \ \ \ \ \ \ \ \ a\ =\ b[::2,\ ...]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03542}03542\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(\textcolor{stringliteral}{'K'}),\ [0,\ 2,\ 4,\ 6,\ 8,\ 10,\ 12,\ 14])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03543}03543\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(\textcolor{stringliteral}{'C'}),\ [0,\ 2,\ 4,\ 6,\ 8,\ 10,\ 12,\ 14])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03544}03544\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(\textcolor{stringliteral}{'A'}),\ [0,\ 2,\ 4,\ 6,\ 8,\ 10,\ 12,\ 14])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03545}03545\ \ \ \ \ \ \ \ \ assert\_equal(a.ravel(\textcolor{stringliteral}{'F'}),\ [0,\ 8,\ 4,\ 12,\ 2,\ 10,\ 6,\ 14])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03546}03546\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03547}03547\ \ \ \ \ \textcolor{keyword}{def\ }test\_ravel\_subclass(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03548}03548\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }ArraySubclass(np.ndarray):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03549}03549\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03550}03550\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03551}03551\ \ \ \ \ \ \ \ \ a\ =\ np.arange(10).view(ArraySubclass)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03552}03552\ \ \ \ \ \ \ \ \ assert\_(isinstance(a.ravel(\textcolor{stringliteral}{'C'}),\ ArraySubclass))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03553}03553\ \ \ \ \ \ \ \ \ assert\_(isinstance(a.ravel(\textcolor{stringliteral}{'F'}),\ ArraySubclass))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03554}03554\ \ \ \ \ \ \ \ \ assert\_(isinstance(a.ravel(\textcolor{stringliteral}{'A'}),\ ArraySubclass))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03555}03555\ \ \ \ \ \ \ \ \ assert\_(isinstance(a.ravel(\textcolor{stringliteral}{'K'}),\ ArraySubclass))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03556}03556\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03557}03557\ \ \ \ \ \ \ \ \ a\ =\ np.arange(10)[::2].view(ArraySubclass)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03558}03558\ \ \ \ \ \ \ \ \ assert\_(isinstance(a.ravel(\textcolor{stringliteral}{'C'}),\ ArraySubclass))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03559}03559\ \ \ \ \ \ \ \ \ assert\_(isinstance(a.ravel(\textcolor{stringliteral}{'F'}),\ ArraySubclass))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03560}03560\ \ \ \ \ \ \ \ \ assert\_(isinstance(a.ravel(\textcolor{stringliteral}{'A'}),\ ArraySubclass))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03561}03561\ \ \ \ \ \ \ \ \ assert\_(isinstance(a.ravel(\textcolor{stringliteral}{'K'}),\ ArraySubclass))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03562}03562\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03563}03563\ \ \ \ \ \textcolor{keyword}{def\ }test\_swapaxes(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03564}03564\ \ \ \ \ \ \ \ \ a\ =\ np.arange(1*2*3*4).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(1,\ 2,\ 3,\ 4).copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03565}03565\ \ \ \ \ \ \ \ \ idx\ =\ np.indices(a.shape)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03566}03566\ \ \ \ \ \ \ \ \ assert\_(a.flags[\textcolor{stringliteral}{'OWNDATA'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03567}03567\ \ \ \ \ \ \ \ \ b\ =\ a.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03568}03568\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ exceptions}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03569}03569\ \ \ \ \ \ \ \ \ assert\_raises(np.AxisError,\ a.swapaxes,\ -\/5,\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03570}03570\ \ \ \ \ \ \ \ \ assert\_raises(np.AxisError,\ a.swapaxes,\ 4,\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03571}03571\ \ \ \ \ \ \ \ \ assert\_raises(np.AxisError,\ a.swapaxes,\ 0,\ -\/5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03572}03572\ \ \ \ \ \ \ \ \ assert\_raises(np.AxisError,\ a.swapaxes,\ 0,\ 4)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03573}03573\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03574}03574\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(-\/4,\ 4):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03575}03575\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ j\ \textcolor{keywordflow}{in}\ range(-\/4,\ 4):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03576}03576\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ k,\ src\ \textcolor{keywordflow}{in}\ enumerate((a,\ b)):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03577}03577\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c\ =\ src.swapaxes(i,\ j)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03578}03578\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ shape}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03579}03579\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shape\ =\ list(src.shape)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03580}03580\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shape[i]\ =\ src.shape[j]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03581}03581\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shape[j]\ =\ src.shape[i]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03582}03582\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(c.shape,\ shape,\ str((i,\ j,\ k)))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03583}03583\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ array\ contents}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03584}03584\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ i0,\ i1,\ i2,\ i3\ =\ [dim-\/1\ \textcolor{keywordflow}{for}\ dim\ \textcolor{keywordflow}{in}\ c.shape]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03585}03585\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ j0,\ j1,\ j2,\ j3\ =\ [dim-\/1\ \textcolor{keywordflow}{for}\ dim\ \textcolor{keywordflow}{in}\ src.shape]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03586}03586\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(src[idx[j0],\ idx[j1],\ idx[j2],\ idx[j3]],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03587}03587\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c[idx[i0],\ idx[i1],\ idx[i2],\ idx[i3]],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03588}03588\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ str((i,\ j,\ k)))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03589}03589\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ a\ view\ is\ always\ returned,\ gh-\/5260}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03590}03590\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ c.flags[\textcolor{stringliteral}{'OWNDATA'}],\ str((i,\ j,\ k)))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03591}03591\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ on\ non-\/contiguous\ input\ array}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03592}03592\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ k\ ==\ 1:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03593}03593\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ c}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03594}03594\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03595}03595\ \ \ \ \ \textcolor{keyword}{def\ }test\_conjugate(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03596}03596\ \ \ \ \ \ \ \ \ a\ =\ np.array([1-\/1j,\ 1+1j,\ 23+23.0j])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03597}03597\ \ \ \ \ \ \ \ \ ac\ =\ a.conj()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03598}03598\ \ \ \ \ \ \ \ \ assert\_equal(a.real,\ ac.real)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03599}03599\ \ \ \ \ \ \ \ \ assert\_equal(a.imag,\ -\/ac.imag)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03600}03600\ \ \ \ \ \ \ \ \ assert\_equal(ac,\ a.conjugate())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03601}03601\ \ \ \ \ \ \ \ \ assert\_equal(ac,\ np.conjugate(a))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03602}03602\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03603}03603\ \ \ \ \ \ \ \ \ a\ =\ np.array([1-\/1j,\ 1+1j,\ 23+23.0j],\ \textcolor{stringliteral}{'F'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03604}03604\ \ \ \ \ \ \ \ \ ac\ =\ a.conj()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03605}03605\ \ \ \ \ \ \ \ \ assert\_equal(a.real,\ ac.real)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03606}03606\ \ \ \ \ \ \ \ \ assert\_equal(a.imag,\ -\/ac.imag)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03607}03607\ \ \ \ \ \ \ \ \ assert\_equal(ac,\ a.conjugate())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03608}03608\ \ \ \ \ \ \ \ \ assert\_equal(ac,\ np.conjugate(a))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03609}03609\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03610}03610\ \ \ \ \ \ \ \ \ a\ =\ np.array([1,\ 2,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03611}03611\ \ \ \ \ \ \ \ \ ac\ =\ a.conj()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03612}03612\ \ \ \ \ \ \ \ \ assert\_equal(a,\ ac)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03613}03613\ \ \ \ \ \ \ \ \ assert\_equal(ac,\ a.conjugate())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03614}03614\ \ \ \ \ \ \ \ \ assert\_equal(ac,\ np.conjugate(a))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03615}03615\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03616}03616\ \ \ \ \ \ \ \ \ a\ =\ np.array([1.0,\ 2.0,\ 3.0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03617}03617\ \ \ \ \ \ \ \ \ ac\ =\ a.conj()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03618}03618\ \ \ \ \ \ \ \ \ assert\_equal(a,\ ac)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03619}03619\ \ \ \ \ \ \ \ \ assert\_equal(ac,\ a.conjugate())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03620}03620\ \ \ \ \ \ \ \ \ assert\_equal(ac,\ np.conjugate(a))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03621}03621\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03622}03622\ \ \ \ \ \ \ \ \ a\ =\ np.array([1-\/1j,\ 1+1j,\ 1,\ 2.0],\ object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03623}03623\ \ \ \ \ \ \ \ \ ac\ =\ a.conj()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03624}03624\ \ \ \ \ \ \ \ \ assert\_equal(ac,\ [k.conjugate()\ \textcolor{keywordflow}{for}\ k\ \textcolor{keywordflow}{in}\ a])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03625}03625\ \ \ \ \ \ \ \ \ assert\_equal(ac,\ a.conjugate())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03626}03626\ \ \ \ \ \ \ \ \ assert\_equal(ac,\ np.conjugate(a))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03627}03627\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03628}03628\ \ \ \ \ \ \ \ \ a\ =\ np.array([1-\/1j,\ 1,\ 2.0,\ \textcolor{stringliteral}{'f'}],\ object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03629}03629\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ \textcolor{keyword}{lambda}:\ a.conj())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03630}03630\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ \textcolor{keyword}{lambda}:\ a.conjugate())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03631}03631\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03632}03632\ \ \ \ \ \textcolor{keyword}{def\ }test\_conjugate\_out(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03633}03633\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Minimal\ test\ for\ the\ out\ argument\ being\ passed\ on\ correctly}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03634}03634\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ NOTE:\ The\ ability\ to\ pass\ \`{}out`\ is\ currently\ undocumented!}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03635}03635\ \ \ \ \ \ \ \ \ a\ =\ np.array([1-\/1j,\ 1+1j,\ 23+23.0j])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03636}03636\ \ \ \ \ \ \ \ \ out\ =\ np.empty\_like(a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03637}03637\ \ \ \ \ \ \ \ \ res\ =\ a.conjugate(out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03638}03638\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ res\ \textcolor{keywordflow}{is}\ out}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03639}03639\ \ \ \ \ \ \ \ \ assert\_array\_equal(out,\ a.conjugate())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03640}03640\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03641}03641\ \ \ \ \ \textcolor{keyword}{def\ }test\_\_complex\_\_(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03642}03642\ \ \ \ \ \ \ \ \ dtypes\ =\ [\textcolor{stringliteral}{'i1'},\ \textcolor{stringliteral}{'i2'},\ \textcolor{stringliteral}{'i4'},\ \textcolor{stringliteral}{'i8'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03643}03643\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'u1'},\ \textcolor{stringliteral}{'u2'},\ \textcolor{stringliteral}{'u4'},\ \textcolor{stringliteral}{'u8'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03644}03644\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'f'},\ \textcolor{stringliteral}{'d'},\ \textcolor{stringliteral}{'g'},\ \textcolor{stringliteral}{'F'},\ \textcolor{stringliteral}{'D'},\ \textcolor{stringliteral}{'G'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03645}03645\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'?'},\ \textcolor{stringliteral}{'O'}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03646}03646\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ dtypes:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03647}03647\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.array(7,\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03648}03648\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ np.array([7],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03649}03649\ \ \ \ \ \ \ \ \ \ \ \ \ c\ =\ np.array([[[[[7]]]]],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03650}03650\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03651}03651\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{'dtype:\ \{0\}'}.format(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03652}03652\ \ \ \ \ \ \ \ \ \ \ \ \ ap\ =\ complex(a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03653}03653\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(ap,\ a,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03654}03654\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03655}03655\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_warns(DeprecationWarning):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03656}03656\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bp\ =\ complex(b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03657}03657\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(bp,\ b,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03658}03658\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03659}03659\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_warns(DeprecationWarning):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03660}03660\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cp\ =\ complex(c)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03661}03661\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(cp,\ c,\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03662}03662\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03663}03663\ \ \ \ \ \textcolor{keyword}{def\ }test\_\_complex\_\_should\_not\_work(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03664}03664\ \ \ \ \ \ \ \ \ dtypes\ =\ [\textcolor{stringliteral}{'i1'},\ \textcolor{stringliteral}{'i2'},\ \textcolor{stringliteral}{'i4'},\ \textcolor{stringliteral}{'i8'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03665}03665\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'u1'},\ \textcolor{stringliteral}{'u2'},\ \textcolor{stringliteral}{'u4'},\ \textcolor{stringliteral}{'u8'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03666}03666\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'f'},\ \textcolor{stringliteral}{'d'},\ \textcolor{stringliteral}{'g'},\ \textcolor{stringliteral}{'F'},\ \textcolor{stringliteral}{'D'},\ \textcolor{stringliteral}{'G'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03667}03667\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'?'},\ \textcolor{stringliteral}{'O'}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03668}03668\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ dtypes:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03669}03669\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.array([1,\ 2,\ 3],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03670}03670\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ complex,\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03671}03671\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03672}03672\ \ \ \ \ \ \ \ \ dt\ =\ np.dtype([(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'f8'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'i1'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03673}03673\ \ \ \ \ \ \ \ \ b\ =\ np.array((1.0,\ 3),\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03674}03674\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ complex,\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03675}03675\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03676}03676\ \ \ \ \ \ \ \ \ c\ =\ np.array([(1.0,\ 3),\ (2e-\/3,\ 7)],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03677}03677\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ complex,\ c)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03678}03678\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03679}03679\ \ \ \ \ \ \ \ \ d\ =\ np.array(\textcolor{stringliteral}{'1+1j'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03680}03680\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ complex,\ d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03681}03681\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03682}03682\ \ \ \ \ \ \ \ \ e\ =\ np.array([\textcolor{stringliteral}{'1+1j'}],\ \textcolor{stringliteral}{'U'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03683}03683\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_warns(DeprecationWarning):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03684}03684\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ complex,\ e)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03685}03685\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03686}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestCequenceMethods}{03686}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestCequenceMethods}{TestCequenceMethods}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03687}03687\ \ \ \ \ \textcolor{keyword}{def\ }test\_array\_contains(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03688}03688\ \ \ \ \ \ \ \ \ assert\_(4.0\ \textcolor{keywordflow}{in}\ np.arange(16.).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(4,4))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03689}03689\ \ \ \ \ \ \ \ \ assert\_(20.0\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ np.arange(16.).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(4,4))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03690}03690\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03691}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestBinop}{03691}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestBinop}{TestBinop}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03692}03692\ \ \ \ \ \textcolor{keyword}{def\ }test\_inplace(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03693}03693\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ refcount\ 1\ inplace\ conversion}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03694}03694\ \ \ \ \ \ \ \ \ assert\_array\_almost\_equal(np.array([0.5])\ *\ np.array([1.0,\ 2.0]),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03695}03695\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0.5,\ 1.0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03696}03696\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03697}03697\ \ \ \ \ \ \ \ \ d\ =\ np.array([0.5,\ 0.5])[::2]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03698}03698\ \ \ \ \ \ \ \ \ assert\_array\_almost\_equal(d\ *\ (d\ *\ np.array([1.0,\ 2.0])),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03699}03699\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0.25,\ 0.5])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03700}03700\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03701}03701\ \ \ \ \ \ \ \ \ a\ =\ np.array([0.5])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03702}03702\ \ \ \ \ \ \ \ \ b\ =\ np.array([0.5])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03703}03703\ \ \ \ \ \ \ \ \ c\ =\ a\ +\ b}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03704}03704\ \ \ \ \ \ \ \ \ c\ =\ a\ -\/\ b}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03705}03705\ \ \ \ \ \ \ \ \ c\ =\ a\ *\ b}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03706}03706\ \ \ \ \ \ \ \ \ c\ =\ a\ /\ b}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03707}03707\ \ \ \ \ \ \ \ \ assert\_equal(a,\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03708}03708\ \ \ \ \ \ \ \ \ assert\_almost\_equal(c,\ 1.)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03709}03709\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03710}03710\ \ \ \ \ \ \ \ \ c\ =\ a\ +\ b\ *\ 2.\ /\ b\ *\ a\ -\/\ a\ /\ b}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03711}03711\ \ \ \ \ \ \ \ \ assert\_equal(a,\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03712}03712\ \ \ \ \ \ \ \ \ assert\_equal(c,\ 0.5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03713}03713\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03714}03714\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ true\ divide}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03715}03715\ \ \ \ \ \ \ \ \ a\ =\ np.array([5])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03716}03716\ \ \ \ \ \ \ \ \ b\ =\ np.array([3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03717}03717\ \ \ \ \ \ \ \ \ c\ =\ (a\ *\ a)\ /\ b}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03718}03718\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03719}03719\ \ \ \ \ \ \ \ \ assert\_almost\_equal(c,\ 25\ /\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03720}03720\ \ \ \ \ \ \ \ \ assert\_equal(a,\ 5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03721}03721\ \ \ \ \ \ \ \ \ assert\_equal(b,\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03722}03722\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03723}03723\ \ \ \ \ \textcolor{comment}{\#\ ndarray.\_\_rop\_\_\ always\ calls\ ufunc}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03724}03724\ \ \ \ \ \textcolor{comment}{\#\ ndarray.\_\_iop\_\_\ always\ calls\ ufunc}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03725}03725\ \ \ \ \ \textcolor{comment}{\#\ ndarray.\_\_op\_\_,\ \_\_rop\_\_:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03726}03726\ \ \ \ \ \textcolor{comment}{\#\ \ \ -\/\ defer\ if\ other\ has\ \_\_array\_ufunc\_\_\ and\ it\ is\ None}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03727}03727\ \ \ \ \ \textcolor{comment}{\#\ \ \ \ \ \ \ \ \ \ \ or\ other\ is\ not\ a\ subclass\ and\ has\ higher\ array\ priority}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03728}03728\ \ \ \ \ \textcolor{comment}{\#\ \ \ -\/\ else,\ call\ ufunc}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03729}03729\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.xfail(IS\_PYPY,\ reason="{}Bug\ in\ pypy3.\{9,\ 10\}-\/v7.3.13,\ \#24862"{})}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03730}03730\ \ \ \ \ \textcolor{keyword}{def\ }test\_ufunc\_binop\_interaction(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03731}03731\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Python\ method\ name\ (without\ underscores)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03732}03732\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ -\/>\ (numpy\ ufunc,\ has\_in\_place\_version,\ preferred\_dtype)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03733}03733\ \ \ \ \ \ \ \ \ ops\ =\ \{}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03734}03734\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'add'}:\ \ \ \ \ \ (np.add,\ \textcolor{keyword}{True},\ float),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03735}03735\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'sub'}:\ \ \ \ \ \ (np.subtract,\ \textcolor{keyword}{True},\ float),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03736}03736\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'mul'}:\ \ \ \ \ \ (np.multiply,\ \textcolor{keyword}{True},\ float),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03737}03737\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'truediv'}:\ \ (np.true\_divide,\ \textcolor{keyword}{True},\ float),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03738}03738\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'floordiv'}:\ (np.floor\_divide,\ \textcolor{keyword}{True},\ float),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03739}03739\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'mod'}:\ \ \ \ \ \ (np.remainder,\ \textcolor{keyword}{True},\ float),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03740}03740\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'divmod'}:\ \ \ (np.divmod,\ \textcolor{keyword}{False},\ float),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03741}03741\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'pow'}:\ \ \ \ \ \ (np.power,\ \textcolor{keyword}{True},\ int),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03742}03742\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'lshift'}:\ \ \ (np.left\_shift,\ \textcolor{keyword}{True},\ int),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03743}03743\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'rshift'}:\ \ \ (np.right\_shift,\ \textcolor{keyword}{True},\ int),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03744}03744\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'and'}:\ \ \ \ \ \ (np.bitwise\_and,\ \textcolor{keyword}{True},\ int),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03745}03745\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'xor'}:\ \ \ \ \ \ (np.bitwise\_xor,\ \textcolor{keyword}{True},\ int),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03746}03746\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'or'}:\ \ \ \ \ \ \ (np.bitwise\_or,\ \textcolor{keyword}{True},\ int),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03747}03747\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'matmul'}:\ \ \ (np.matmul,\ \textcolor{keyword}{True},\ float),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03748}03748\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 'ge':\ \ \ \ \ \ \ (np.less\_equal,\ False),}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03749}03749\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 'gt':\ \ \ \ \ \ \ (np.less,\ False),}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03750}03750\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 'le':\ \ \ \ \ \ \ (np.greater\_equal,\ False),}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03751}03751\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 'lt':\ \ \ \ \ \ \ (np.greater,\ False),}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03752}03752\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 'eq':\ \ \ \ \ \ \ (np.equal,\ False),}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03753}03753\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 'ne':\ \ \ \ \ \ \ (np.not\_equal,\ False),}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03754}03754\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03755}03755\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03756}03756\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }Coerced(\mbox{\hyperlink{classException}{Exception}}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03757}03757\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03758}03758\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03759}03759\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }array\_impl(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03760}03760\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ Coerced}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03761}03761\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03762}03762\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }op\_impl(self,\ other):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03763}03763\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}forward"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03764}03764\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03765}03765\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }rop\_impl(self,\ other):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03766}03766\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}reverse"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03767}03767\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03768}03768\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }iop\_impl(self,\ other):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03769}03769\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}in-\/place"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03770}03770\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03771}03771\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }array\_ufunc\_impl(self,\ ufunc,\ method,\ *args,\ **kwargs):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03772}03772\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{stringliteral}{"{}\_\_array\_ufunc\_\_"{}},\ ufunc,\ method,\ args,\ kwargs)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03773}03773\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03774}03774\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Create\ an\ object\ with\ the\ given\ base,\ in\ the\ given\ module,\ with\ a}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03775}03775\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ bunch\ of\ placeholder\ \_\_op\_\_\ methods,\ and\ optionally\ a}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03776}03776\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \_\_array\_ufunc\_\_\ and\ \_\_array\_priority\_\_.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03777}03777\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }make\_obj(base,\ array\_priority=False,\ array\_ufunc=False,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03778}03778\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ alleged\_module="{}\_\_main\_\_"{}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03779}03779\ \ \ \ \ \ \ \ \ \ \ \ \ class\_namespace\ =\ \{\textcolor{stringliteral}{"{}\_\_array\_\_"{}}:\ array\_impl\}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03780}03780\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ array\_priority\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keyword}{False}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03781}03781\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ class\_namespace[\textcolor{stringliteral}{"{}\_\_array\_priority\_\_"{}}]\ =\ array\_priority}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03782}03782\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ op\ \textcolor{keywordflow}{in}\ ops:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03783}03783\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ class\_namespace[\textcolor{stringliteral}{"{}\_\_\{0\}\_\_"{}}.format(op)]\ =\ op\_impl}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03784}03784\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ class\_namespace[\textcolor{stringliteral}{"{}\_\_r\{0\}\_\_"{}}.format(op)]\ =\ rop\_impl}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03785}03785\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ class\_namespace[\textcolor{stringliteral}{"{}\_\_i\{0\}\_\_"{}}.format(op)]\ =\ iop\_impl}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03786}03786\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ array\_ufunc\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keyword}{False}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03787}03787\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ class\_namespace[\textcolor{stringliteral}{"{}\_\_array\_ufunc\_\_"{}}]\ =\ array\_ufunc}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03788}03788\ \ \ \ \ \ \ \ \ \ \ \ \ eval\_namespace\ =\ \{\textcolor{stringliteral}{"{}base"{}}:\ base,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03789}03789\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}class\_namespace"{}}:\ class\_namespace,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03790}03790\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\_\_name\_\_"{}}:\ alleged\_module,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03791}03791\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03792}03792\ \ \ \ \ \ \ \ \ \ \ \ \ MyType\ =\ eval(\textcolor{stringliteral}{"{}type('MyType',\ (base,),\ class\_namespace)"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03793}03793\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ eval\_namespace)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03794}03794\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ issubclass(MyType,\ np.ndarray):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03795}03795\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Use\ this\ range\ to\ avoid\ special\ case\ weirdnesses\ around}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03796}03796\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ divide-\/by-\/0,\ pow(x,\ 2),\ overflow\ due\ to\ pow(big,\ big),\ etc.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03797}03797\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ np.arange(3,\ 7).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,\ 2).view(MyType)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03798}03798\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03799}03799\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ MyType()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03800}03800\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03801}03801\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }check(obj,\ binop\_override\_expected,\ ufunc\_override\_expected,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03802}03802\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ inplace\_override\_expected,\ check\_scalar=True):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03803}03803\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ op,\ (ufunc,\ has\_inplace,\ dtype)\ \textcolor{keywordflow}{in}\ ops.items():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03804}03804\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ err\_msg\ =\ (\textcolor{stringliteral}{'op:\ \%s,\ ufunc:\ \%s,\ has\_inplace:\ \%s,\ dtype:\ \%s'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03805}03805\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \%\ (op,\ ufunc,\ has\_inplace,\ dtype))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03806}03806\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ check\_objs\ =\ [np.arange(3,\ 7,\ dtype=dtype).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,\ 2)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03807}03807\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ check\_scalar:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03808}03808\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ check\_objs.append(check\_objs[0][0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03809}03809\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ arr\ \textcolor{keywordflow}{in}\ check\_objs:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03810}03810\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ arr\_method\ =\ getattr(arr,\ \textcolor{stringliteral}{"{}\_\_\{0\}\_\_"{}}.format(op))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03811}03811\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03812}03812\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }first\_out\_arg(result):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03813}03813\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ op\ ==\ \textcolor{stringliteral}{"{}divmod"{}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03814}03814\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(isinstance(result,\ tuple))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03815}03815\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result[0]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03816}03816\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03817}03817\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03818}03818\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03819}03819\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ arr\ \_\_op\_\_\ obj}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03820}03820\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ binop\_override\_expected:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03821}03821\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(arr\_method(obj),\ NotImplemented,\ err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03822}03822\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ ufunc\_override\_expected:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03823}03823\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(arr\_method(obj)[0],\ \textcolor{stringliteral}{"{}\_\_array\_ufunc\_\_"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03824}03824\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03825}03825\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03826}03826\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (isinstance(obj,\ np.ndarray)\ \textcolor{keywordflow}{and}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03827}03827\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (type(obj).\_\_array\_ufunc\_\_\ \textcolor{keywordflow}{is}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03828}03828\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.ndarray.\_\_array\_ufunc\_\_)):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03829}03829\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \_\_array\_\_\ gets\ ignored}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03830}03830\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ first\_out\_arg(arr\_method(obj))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03831}03831\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(res.\_\_class\_\_\ \textcolor{keywordflow}{is}\ obj.\_\_class\_\_,\ err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03832}03832\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03833}03833\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises((TypeError,\ Coerced),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03834}03834\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ arr\_method,\ obj,\ err\_msg=err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03835}03835\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ obj\ \_\_op\_\_\ arr}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03836}03836\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ arr\_rmethod\ =\ getattr(arr,\ \textcolor{stringliteral}{"{}\_\_r\{0\}\_\_"{}}.format(op))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03837}03837\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ufunc\_override\_expected:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03838}03838\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ arr\_rmethod(obj)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03839}03839\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(res[0],\ \textcolor{stringliteral}{"{}\_\_array\_ufunc\_\_"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03840}03840\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ err\_msg=err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03841}03841\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(res[1],\ ufunc,\ err\_msg=err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03842}03842\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03843}03843\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (isinstance(obj,\ np.ndarray)\ \textcolor{keywordflow}{and}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03844}03844\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (type(obj).\_\_array\_ufunc\_\_\ \textcolor{keywordflow}{is}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03845}03845\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.ndarray.\_\_array\_ufunc\_\_)):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03846}03846\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \_\_array\_\_\ gets\ ignored}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03847}03847\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ first\_out\_arg(arr\_rmethod(obj))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03848}03848\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(res.\_\_class\_\_\ \textcolor{keywordflow}{is}\ obj.\_\_class\_\_,\ err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03849}03849\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03850}03850\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \_\_array\_ufunc\_\_\ =\ "{}asdf"{}\ creates\ a\ TypeError}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03851}03851\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises((TypeError,\ Coerced),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03852}03852\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ arr\_rmethod,\ obj,\ err\_msg=err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03853}03853\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03854}03854\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ arr\ \_\_iop\_\_\ obj}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03855}03855\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ array\ scalars\ don't\ have\ in-\/place\ operators}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03856}03856\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ has\_inplace\ \textcolor{keywordflow}{and}\ isinstance(arr,\ np.ndarray):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03857}03857\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ arr\_imethod\ =\ getattr(arr,\ \textcolor{stringliteral}{"{}\_\_i\{0\}\_\_"{}}.format(op))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03858}03858\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ inplace\_override\_expected:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03859}03859\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(arr\_method(obj),\ NotImplemented,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03860}03860\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ err\_msg=err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03861}03861\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ ufunc\_override\_expected:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03862}03862\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ arr\_imethod(obj)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03863}03863\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(res[0],\ \textcolor{stringliteral}{"{}\_\_array\_ufunc\_\_"{}},\ err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03864}03864\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(res[1],\ ufunc,\ err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03865}03865\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(type(res[-\/1][\textcolor{stringliteral}{"{}out"{}}])\ \textcolor{keywordflow}{is}\ tuple,\ err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03866}03866\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(res[-\/1][\textcolor{stringliteral}{"{}out"{}}][0]\ \textcolor{keywordflow}{is}\ arr,\ err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03867}03867\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03868}03868\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (isinstance(obj,\ np.ndarray)\ \textcolor{keywordflow}{and}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03869}03869\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (type(obj).\_\_array\_ufunc\_\_\ \textcolor{keywordflow}{is}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03870}03870\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.ndarray.\_\_array\_ufunc\_\_)):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03871}03871\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \_\_array\_\_\ gets\ ignored}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03872}03872\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(arr\_imethod(obj)\ \textcolor{keywordflow}{is}\ arr,\ err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03873}03873\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03874}03874\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises((TypeError,\ Coerced),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03875}03875\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ arr\_imethod,\ obj,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03876}03876\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ err\_msg=err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03877}03877\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03878}03878\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ op\_fn\ =\ getattr(operator,\ op,\ \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03879}03879\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ op\_fn\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03880}03880\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ op\_fn\ =\ getattr(operator,\ op\ +\ \textcolor{stringliteral}{"{}\_"{}},\ \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03881}03881\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ op\_fn\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03882}03882\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ op\_fn\ =\ getattr(builtins,\ op)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03883}03883\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(op\_fn(obj,\ arr),\ \textcolor{stringliteral}{"{}forward"{}},\ err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03884}03884\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ isinstance(obj,\ np.ndarray):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03885}03885\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ binop\_override\_expected:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03886}03886\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(op\_fn(arr,\ obj),\ \textcolor{stringliteral}{"{}reverse"{}},\ err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03887}03887\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ ufunc\_override\_expected:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03888}03888\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(op\_fn(arr,\ obj)[0],\ \textcolor{stringliteral}{"{}\_\_array\_ufunc\_\_"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03889}03889\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03890}03890\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ufunc\_override\_expected:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03891}03891\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(\mbox{\hyperlink{structufunc}{ufunc}}(obj,\ arr)[0],\ \textcolor{stringliteral}{"{}\_\_array\_ufunc\_\_"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03892}03892\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03893}03893\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03894}03894\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ No\ array\ priority,\ no\ array\_ufunc\ -\/>\ nothing\ called}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03895}03895\ \ \ \ \ \ \ \ \ check(make\_obj(object),\ \textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03896}03896\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Negative\ array\ priority,\ no\ array\_ufunc\ -\/>\ nothing\ called}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03897}03897\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ (has\ to\ be\ very\ negative,\ because\ scalar\ priority\ is\ -\/1000000.0)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03898}03898\ \ \ \ \ \ \ \ \ check(make\_obj(object,\ array\_priority=-\/2**30),\ \textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03899}03899\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Positive\ array\ priority,\ no\ array\_ufunc\ -\/>\ binops\ and\ iops\ only}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03900}03900\ \ \ \ \ \ \ \ \ check(make\_obj(object,\ array\_priority=1),\ \textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03901}03901\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ ndarray\ ignores\ array\_priority\ for\ ndarray\ subclasses}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03902}03902\ \ \ \ \ \ \ \ \ check(make\_obj(np.ndarray,\ array\_priority=1),\ \textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03903}03903\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ check\_scalar=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03904}03904\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Positive\ array\_priority\ and\ array\_ufunc\ -\/>\ array\_ufunc\ only}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03905}03905\ \ \ \ \ \ \ \ \ check(make\_obj(object,\ array\_priority=1,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03906}03906\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ array\_ufunc=array\_ufunc\_impl),\ \textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03907}03907\ \ \ \ \ \ \ \ \ check(make\_obj(np.ndarray,\ array\_priority=1,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03908}03908\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ array\_ufunc=array\_ufunc\_impl),\ \textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03909}03909\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ array\_ufunc\ set\ to\ None\ -\/>\ defer\ binops\ only}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03910}03910\ \ \ \ \ \ \ \ \ check(make\_obj(object,\ array\_ufunc=\textcolor{keywordtype}{None}),\ \textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03911}03911\ \ \ \ \ \ \ \ \ check(make\_obj(np.ndarray,\ array\_ufunc=\textcolor{keywordtype}{None}),\ \textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03912}03912\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ check\_scalar=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03913}03913\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03914}03914\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}priority"{},\ [None,\ "{}runtime\ error"{}])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03915}03915\ \ \ \ \ \textcolor{keyword}{def\ }test\_ufunc\_binop\_bad\_array\_priority(self,\ priority):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03916}03916\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Mainly\ checks\ that\ this\ does\ not\ crash.\ \ The\ second\ array\ has\ a\ lower}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03917}03917\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ priority\ than\ -\/1\ ("{}error\ value"{}).\ \ If\ the\ \_\_radd\_\_\ actually\ exists,}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03918}03918\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ bad\ things\ can\ happen\ (I\ think\ via\ the\ scalar\ paths).}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03919}03919\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ In\ principle\ both\ of\ these\ can\ probably\ just\ be\ errors\ in\ the\ future.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03920}03920\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }BadPriority:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03921}03921\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{preprocessor}{@property}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03922}03922\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_array\_priority\_\_(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03923}03923\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ priority\ ==\ \textcolor{stringliteral}{"{}runtime\ error"{}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03924}03924\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classRuntimeError}{RuntimeError}}(\textcolor{stringliteral}{"{}RuntimeError\ in\ \_\_array\_priority\_\_!"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03925}03925\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ priority}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03926}03926\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03927}03927\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_radd\_\_(self,\ other):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03928}03928\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}result"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03929}03929\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03930}03930\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }LowPriority(np.ndarray):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03931}03931\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_array\_priority\_\_\ =\ -\/1000}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03932}03932\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03933}03933\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Priority\ failure\ uses\ the\ same\ as\ scalars\ (smaller\ -\/1000).\ \ So\ the}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03934}03934\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ LowPriority\ wins\ with\ 'result'\ for\ each\ element\ (inner\ operation).}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03935}03935\ \ \ \ \ \ \ \ \ res\ =\ np.arange(3).view(LowPriority)\ +\ BadPriority()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03936}03936\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ res.shape\ ==\ (3,)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03937}03937\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ res[0]\ ==\ \textcolor{stringliteral}{'result'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03938}03938\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03939}03939\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03940}03940\ \ \ \ \ \textcolor{keyword}{def\ }test\_ufunc\_override\_normalize\_signature(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03941}03941\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/5674}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03942}03942\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }SomeClass:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03943}03943\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_array\_ufunc\_\_(self,\ ufunc,\ method,\ *inputs,\ **kw):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03944}03944\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ kw}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03945}03945\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03946}03946\ \ \ \ \ \ \ \ \ a\ =\ SomeClass()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03947}03947\ \ \ \ \ \ \ \ \ kw\ =\ np.add(a,\ [1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03948}03948\ \ \ \ \ \ \ \ \ assert\_(\textcolor{stringliteral}{'sig'}\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ kw\ \textcolor{keywordflow}{and}\ \textcolor{stringliteral}{'signature'}\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ kw)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03949}03949\ \ \ \ \ \ \ \ \ kw\ =\ np.add(a,\ [1],\ sig=\textcolor{stringliteral}{'ii-\/>i'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03950}03950\ \ \ \ \ \ \ \ \ assert\_(\textcolor{stringliteral}{'sig'}\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ kw\ \textcolor{keywordflow}{and}\ \textcolor{stringliteral}{'signature'}\ \textcolor{keywordflow}{in}\ kw)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03951}03951\ \ \ \ \ \ \ \ \ assert\_equal(kw[\textcolor{stringliteral}{'signature'}],\ \textcolor{stringliteral}{'ii-\/>i'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03952}03952\ \ \ \ \ \ \ \ \ kw\ =\ np.add(a,\ [1],\ signature=\textcolor{stringliteral}{'ii-\/>i'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03953}03953\ \ \ \ \ \ \ \ \ assert\_(\textcolor{stringliteral}{'sig'}\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ kw\ \textcolor{keywordflow}{and}\ \textcolor{stringliteral}{'signature'}\ \textcolor{keywordflow}{in}\ kw)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03954}03954\ \ \ \ \ \ \ \ \ assert\_equal(kw[\textcolor{stringliteral}{'signature'}],\ \textcolor{stringliteral}{'ii-\/>i'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03955}03955\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03956}03956\ \ \ \ \ \textcolor{keyword}{def\ }test\_array\_ufunc\_index(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03957}03957\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ that\ index\ is\ set\ appropriately,\ also\ if\ only\ an\ output}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03958}03958\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ is\ passed\ on\ (latter\ is\ another\ regression\ tests\ for\ github\ bug\ 4753)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03959}03959\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ This\ also\ checks\ implicitly\ that\ 'out'\ is\ always\ a\ tuple.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03960}03960\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }CheckIndex:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03961}03961\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_array\_ufunc\_\_(self,\ ufunc,\ method,\ *inputs,\ **kw):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03962}03962\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i,\ a\ \textcolor{keywordflow}{in}\ enumerate(inputs):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03963}03963\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ a\ \textcolor{keywordflow}{is}\ self:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03964}03964\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ i}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03965}03965\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ calls\ below\ mean\ we\ must\ be\ in\ an\ output.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03966}03966\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ j,\ a\ \textcolor{keywordflow}{in}\ enumerate(kw[\textcolor{stringliteral}{'out'}]):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03967}03967\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ a\ \textcolor{keywordflow}{is}\ self:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03968}03968\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (j,)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03969}03969\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03970}03970\ \ \ \ \ \ \ \ \ a\ =\ CheckIndex()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03971}03971\ \ \ \ \ \ \ \ \ dummy\ =\ np.arange(2.)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03972}03972\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 1\ input,\ 1\ output}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03973}03973\ \ \ \ \ \ \ \ \ assert\_equal(np.sin(a),\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03974}03974\ \ \ \ \ \ \ \ \ assert\_equal(np.sin(dummy,\ a),\ (0,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03975}03975\ \ \ \ \ \ \ \ \ assert\_equal(np.sin(dummy,\ out=a),\ (0,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03976}03976\ \ \ \ \ \ \ \ \ assert\_equal(np.sin(dummy,\ out=(a,)),\ (0,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03977}03977\ \ \ \ \ \ \ \ \ assert\_equal(np.sin(a,\ a),\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03978}03978\ \ \ \ \ \ \ \ \ assert\_equal(np.sin(a,\ out=a),\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03979}03979\ \ \ \ \ \ \ \ \ assert\_equal(np.sin(a,\ out=(a,)),\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03980}03980\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 1\ input,\ 2\ outputs}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03981}03981\ \ \ \ \ \ \ \ \ assert\_equal(np.modf(dummy,\ a),\ (0,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03982}03982\ \ \ \ \ \ \ \ \ assert\_equal(np.modf(dummy,\ \textcolor{keywordtype}{None},\ a),\ (1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03983}03983\ \ \ \ \ \ \ \ \ assert\_equal(np.modf(dummy,\ dummy,\ a),\ (1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03984}03984\ \ \ \ \ \ \ \ \ assert\_equal(np.modf(dummy,\ out=(a,\ \textcolor{keywordtype}{None})),\ (0,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03985}03985\ \ \ \ \ \ \ \ \ assert\_equal(np.modf(dummy,\ out=(a,\ dummy)),\ (0,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03986}03986\ \ \ \ \ \ \ \ \ assert\_equal(np.modf(dummy,\ out=(\textcolor{keywordtype}{None},\ a)),\ (1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03987}03987\ \ \ \ \ \ \ \ \ assert\_equal(np.modf(dummy,\ out=(dummy,\ a)),\ (1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03988}03988\ \ \ \ \ \ \ \ \ assert\_equal(np.modf(a,\ out=(dummy,\ a)),\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03989}03989\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_raises(TypeError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03990}03990\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Out\ argument\ must\ be\ tuple,\ since\ there\ are\ multiple\ outputs}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03991}03991\ \ \ \ \ \ \ \ \ \ \ \ \ np.modf(dummy,\ out=a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03992}03992\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03993}03993\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.modf,\ dummy,\ out=(a,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03994}03994\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03995}03995\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 2\ inputs,\ 1\ output}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03996}03996\ \ \ \ \ \ \ \ \ assert\_equal(np.add(a,\ dummy),\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03997}03997\ \ \ \ \ \ \ \ \ assert\_equal(np.add(dummy,\ a),\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03998}03998\ \ \ \ \ \ \ \ \ assert\_equal(np.add(dummy,\ dummy,\ a),\ (0,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l03999}03999\ \ \ \ \ \ \ \ \ assert\_equal(np.add(dummy,\ a,\ a),\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04000}04000\ \ \ \ \ \ \ \ \ assert\_equal(np.add(dummy,\ dummy,\ out=a),\ (0,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04001}04001\ \ \ \ \ \ \ \ \ assert\_equal(np.add(dummy,\ dummy,\ out=(a,)),\ (0,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04002}04002\ \ \ \ \ \ \ \ \ assert\_equal(np.add(a,\ dummy,\ out=a),\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04003}04003\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04004}04004\ \ \ \ \ \textcolor{keyword}{def\ }test\_out\_override(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04005}04005\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ regression\ test\ for\ github\ bug\ 4753}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04006}04006\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }OutClass(np.ndarray):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04007}04007\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_array\_ufunc\_\_(self,\ ufunc,\ method,\ *inputs,\ **kw):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04008}04008\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{stringliteral}{'out'}\ \textcolor{keywordflow}{in}\ kw:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04009}04009\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tmp\_kw\ =\ kw.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04010}04010\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tmp\_kw.pop(\textcolor{stringliteral}{'out'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04011}04011\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ func\ =\ getattr(ufunc,\ method)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04012}04012\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ kw[\textcolor{stringliteral}{'out'}][0][...]\ =\ func(*inputs,\ **tmp\_kw)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04013}04013\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04014}04014\ \ \ \ \ \ \ \ \ A\ =\ np.array([0]).view(OutClass)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04015}04015\ \ \ \ \ \ \ \ \ B\ =\ np.array([5])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04016}04016\ \ \ \ \ \ \ \ \ C\ =\ np.array([6])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04017}04017\ \ \ \ \ \ \ \ \ np.multiply(C,\ B,\ A)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04018}04018\ \ \ \ \ \ \ \ \ assert\_equal(A[0],\ 30)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04019}04019\ \ \ \ \ \ \ \ \ assert\_(isinstance(A,\ OutClass))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04020}04020\ \ \ \ \ \ \ \ \ A[0]\ =\ 0}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04021}04021\ \ \ \ \ \ \ \ \ np.multiply(C,\ B,\ out=A)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04022}04022\ \ \ \ \ \ \ \ \ assert\_equal(A[0],\ 30)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04023}04023\ \ \ \ \ \ \ \ \ assert\_(isinstance(A,\ OutClass))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04024}04024\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04025}04025\ \ \ \ \ \textcolor{keyword}{def\ }test\_pow\_override\_with\_errors(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04026}04026\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ regression\ test\ for\ gh-\/9112}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04027}04027\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }PowerOnly(np.ndarray):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04028}04028\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_array\_ufunc\_\_(self,\ ufunc,\ method,\ *inputs,\ **kw):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04029}04029\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ufunc\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ np.power:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04030}04030\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ NotImplementedError}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04031}04031\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}POWER!"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04032}04032\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ explicit\ cast\ to\ float,\ to\ ensure\ the\ fast\ power\ path\ is\ taken.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04033}04033\ \ \ \ \ \ \ \ \ a\ =\ np.array(5.,\ dtype=np.float64).view(PowerOnly)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04034}04034\ \ \ \ \ \ \ \ \ assert\_equal(a\ **\ 2.5,\ \textcolor{stringliteral}{"{}POWER!"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04035}04035\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_raises(NotImplementedError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04036}04036\ \ \ \ \ \ \ \ \ \ \ \ \ a\ **\ 0.5}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04037}04037\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_raises(NotImplementedError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04038}04038\ \ \ \ \ \ \ \ \ \ \ \ \ a\ **\ 0}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04039}04039\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_raises(NotImplementedError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04040}04040\ \ \ \ \ \ \ \ \ \ \ \ \ a\ **\ 1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04041}04041\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_raises(NotImplementedError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04042}04042\ \ \ \ \ \ \ \ \ \ \ \ \ a\ **\ -\/1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04043}04043\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_raises(NotImplementedError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04044}04044\ \ \ \ \ \ \ \ \ \ \ \ \ a\ **\ 2}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04045}04045\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04046}04046\ \ \ \ \ \textcolor{keyword}{def\ }test\_pow\_array\_object\_dtype(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04047}04047\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ pow\ on\ arrays\ of\ object\ dtype}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04048}04048\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }SomeClass:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04049}04049\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self,\ num=None):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04050}04050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.num\ =\ num}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04051}04051\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04052}04052\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ want\ to\ ensure\ a\ fast\ pow\ path\ is\ not\ taken}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04053}04053\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_mul\_\_(self,\ other):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04054}04054\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classAssertionError}{AssertionError}}(\textcolor{stringliteral}{'\_\_mul\_\_\ should\ not\ be\ called'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04055}04055\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04056}04056\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_div\_\_(self,\ other):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04057}04057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classAssertionError}{AssertionError}}(\textcolor{stringliteral}{'\_\_div\_\_\ should\ not\ be\ called'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04058}04058\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04059}04059\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_pow\_\_(self,\ exp):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04060}04060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ SomeClass(num=self.num\ **\ exp)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04061}04061\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04062}04062\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_eq\_\_(self,\ other):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04063}04063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ isinstance(other,\ SomeClass):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04064}04064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self.num\ ==\ other.num}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04065}04065\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04066}04066\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_rpow\_\_\ =\ \_\_pow\_\_}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04067}04067\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04068}04068\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }pow\_for(exp,\ arr):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04069}04069\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ np.array([x\ **\ exp\ \textcolor{keywordflow}{for}\ x\ \textcolor{keywordflow}{in}\ arr])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04070}04070\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04071}04071\ \ \ \ \ \ \ \ \ obj\_arr\ =\ np.array([SomeClass(1),\ SomeClass(2),\ SomeClass(3)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04072}04072\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04073}04073\ \ \ \ \ \ \ \ \ assert\_equal(obj\_arr\ **\ 0.5,\ pow\_for(0.5,\ obj\_arr))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04074}04074\ \ \ \ \ \ \ \ \ assert\_equal(obj\_arr\ **\ 0,\ pow\_for(0,\ obj\_arr))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04075}04075\ \ \ \ \ \ \ \ \ assert\_equal(obj\_arr\ **\ 1,\ pow\_for(1,\ obj\_arr))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04076}04076\ \ \ \ \ \ \ \ \ assert\_equal(obj\_arr\ **\ -\/1,\ pow\_for(-\/1,\ obj\_arr))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04077}04077\ \ \ \ \ \ \ \ \ assert\_equal(obj\_arr\ **\ 2,\ pow\_for(2,\ obj\_arr))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04078}04078\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04079}04079\ \ \ \ \ \textcolor{keyword}{def\ }test\_pos\_array\_ufunc\_override(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04080}04080\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }A(np.ndarray):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04081}04081\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_array\_ufunc\_\_(self,\ ufunc,\ method,\ *inputs,\ **kwargs):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04082}04082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ getattr(ufunc,\ method)(*[i.view(np.ndarray)\ \textcolor{keywordflow}{for}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04083}04083\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ i\ \textcolor{keywordflow}{in}\ inputs],\ **kwargs)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04084}04084\ \ \ \ \ \ \ \ \ tst\ =\ np.array(\textcolor{stringliteral}{'foo'}).view(A)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04085}04085\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_raises(TypeError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04086}04086\ \ \ \ \ \ \ \ \ \ \ \ \ +tst}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04087}04087\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04088}04088\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04089}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestTemporaryElide}{04089}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestTemporaryElide}{TestTemporaryElide}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04090}04090\ \ \ \ \ \textcolor{comment}{\#\ elision\ is\ only\ triggered\ on\ relatively\ large\ arrays}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04091}04091\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04092}04092\ \ \ \ \ \textcolor{keyword}{def\ }test\_extension\_incref\_elide(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04093}04093\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ extension\ (e.g.\ cython)\ calling\ PyNumber\_*\ slots\ without}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04094}04094\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ increasing\ the\ reference\ counts}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04095}04095\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04096}04096\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ def\ incref\_elide(a):}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04097}04097\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ \ d\ =\ input.copy()\ \#\ refcount\ 1}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04098}04098\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ \ return\ d,\ d\ +\ d\ \#\ PyNumber\_Add\ without\ increasing\ refcount}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04099}04099\ \ \ \ \ \ \ \ \ \textcolor{keyword}{from}\ numpy.core.\_multiarray\_tests\ \textcolor{keyword}{import}\ incref\_elide}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04100}04100\ \ \ \ \ \ \ \ \ d\ =\ np.ones(100000)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04101}04101\ \ \ \ \ \ \ \ \ orig,\ res\ =\ incref\_elide(d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04102}04102\ \ \ \ \ \ \ \ \ d\ +\ d}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04103}04103\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ the\ return\ original\ should\ not\ be\ changed\ to\ an\ inplace\ operation}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04104}04104\ \ \ \ \ \ \ \ \ assert\_array\_equal(orig,\ d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04105}04105\ \ \ \ \ \ \ \ \ assert\_array\_equal(res,\ d\ +\ d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04106}04106\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04107}04107\ \ \ \ \ \textcolor{keyword}{def\ }test\_extension\_incref\_elide\_stack(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04108}04108\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ scanning\ if\ the\ refcount\ ==\ 1\ object\ is\ on\ the\ python\ stack\ to\ check}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04109}04109\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ that\ we\ are\ called\ directly\ from\ python\ is\ flawed\ as\ object\ may\ still}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04110}04110\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ be\ above\ the\ stack\ pointer\ and\ we\ have\ no\ access\ to\ the\ top\ of\ it}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04111}04111\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04112}04112\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ def\ incref\_elide\_l(d):}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04113}04113\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ \ return\ l[4]\ +\ l[4]\ \#\ PyNumber\_Add\ without\ increasing\ refcount}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04114}04114\ \ \ \ \ \ \ \ \ \textcolor{keyword}{from}\ numpy.core.\_multiarray\_tests\ \textcolor{keyword}{import}\ incref\_elide\_l}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04115}04115\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ padding\ with\ 1\ makes\ sure\ the\ object\ on\ the\ stack\ is\ not\ overwritten}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04116}04116\ \ \ \ \ \ \ \ \ l\ =\ [1,\ 1,\ 1,\ 1,\ np.ones(100000)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04117}04117\ \ \ \ \ \ \ \ \ res\ =\ incref\_elide\_l(l)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04118}04118\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ the\ return\ original\ should\ not\ be\ changed\ to\ an\ inplace\ operation}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04119}04119\ \ \ \ \ \ \ \ \ assert\_array\_equal(l[4],\ np.ones(100000))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04120}04120\ \ \ \ \ \ \ \ \ assert\_array\_equal(res,\ l[4]\ +\ l[4])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04121}04121\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04122}04122\ \ \ \ \ \textcolor{keyword}{def\ }test\_temporary\_with\_cast(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04123}04123\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ that\ we\ don't\ elide\ into\ a\ temporary\ which\ would\ need\ casting}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04124}04124\ \ \ \ \ \ \ \ \ d\ =\ np.ones(200000,\ dtype=np.int64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04125}04125\ \ \ \ \ \ \ \ \ assert\_equal(((d\ +\ d)\ +\ 2**222).dtype,\ np.dtype(\textcolor{stringliteral}{'O'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04126}04126\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04127}04127\ \ \ \ \ \ \ \ \ r\ =\ ((d\ +\ d)\ /\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04128}04128\ \ \ \ \ \ \ \ \ assert\_equal(r.dtype,\ np.dtype(\textcolor{stringliteral}{'f8'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04129}04129\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04130}04130\ \ \ \ \ \ \ \ \ r\ =\ np.true\_divide((d\ +\ d),\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04131}04131\ \ \ \ \ \ \ \ \ assert\_equal(r.dtype,\ np.dtype(\textcolor{stringliteral}{'f8'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04132}04132\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04133}04133\ \ \ \ \ \ \ \ \ r\ =\ ((d\ +\ d)\ /\ 2.)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04134}04134\ \ \ \ \ \ \ \ \ assert\_equal(r.dtype,\ np.dtype(\textcolor{stringliteral}{'f8'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04135}04135\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04136}04136\ \ \ \ \ \ \ \ \ r\ =\ ((d\ +\ d)\ //\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04137}04137\ \ \ \ \ \ \ \ \ assert\_equal(r.dtype,\ np.dtype(np.int64))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04138}04138\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04139}04139\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ commutative\ elision\ into\ the\ astype\ result}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04140}04140\ \ \ \ \ \ \ \ \ f\ =\ np.ones(100000,\ dtype=np.float32)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04141}04141\ \ \ \ \ \ \ \ \ assert\_equal(((f\ +\ f)\ +\ f.astype(np.float64)).dtype,\ np.dtype(\textcolor{stringliteral}{'f8'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04142}04142\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04143}04143\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ no\ elision\ into\ lower\ type}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04144}04144\ \ \ \ \ \ \ \ \ d\ =\ f.astype(np.float64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04145}04145\ \ \ \ \ \ \ \ \ assert\_equal(((f\ +\ f)\ +\ d).dtype,\ d.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04146}04146\ \ \ \ \ \ \ \ \ l\ =\ np.ones(100000,\ dtype=np.longdouble)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04147}04147\ \ \ \ \ \ \ \ \ assert\_equal(((d\ +\ d)\ +\ l).dtype,\ l.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04148}04148\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04149}04149\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ unary\ abs\ with\ different\ output\ dtype}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04150}04150\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ (np.complex64,\ np.complex128,\ np.clongdouble):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04151}04151\ \ \ \ \ \ \ \ \ \ \ \ \ c\ =\ np.ones(100000,\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04152}04152\ \ \ \ \ \ \ \ \ \ \ \ \ r\ =\ abs(c\ *\ 2.0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04153}04153\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(r.dtype,\ np.dtype(\textcolor{stringliteral}{'f\%d'}\ \%\ (c.itemsize\ //\ 2)))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04154}04154\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04155}04155\ \ \ \ \ \textcolor{keyword}{def\ }test\_elide\_broadcast(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04156}04156\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ no\ elision\ on\ broadcast\ to\ higher\ dimension}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04157}04157\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ only\ triggers\ elision\ code\ path\ in\ debug\ mode\ as\ triggering\ it\ in}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04158}04158\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ normal\ mode\ needs\ 256kb\ large\ matching\ dimension,\ so\ a\ lot\ of\ memory}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04159}04159\ \ \ \ \ \ \ \ \ d\ =\ np.ones((2000,\ 1),\ dtype=int)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04160}04160\ \ \ \ \ \ \ \ \ b\ =\ np.ones((2000),\ dtype=bool)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04161}04161\ \ \ \ \ \ \ \ \ r\ =\ (1\ -\/\ d)\ +\ b}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04162}04162\ \ \ \ \ \ \ \ \ assert\_equal(r,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04163}04163\ \ \ \ \ \ \ \ \ assert\_equal(r.shape,\ (2000,\ 2000))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04164}04164\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04165}04165\ \ \ \ \ \textcolor{keyword}{def\ }test\_elide\_scalar(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04166}04166\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ inplace\ op\ does\ not\ create\ ndarray\ from\ scalars}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04167}04167\ \ \ \ \ \ \ \ \ a\ =\ np.bool\_()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04168}04168\ \ \ \ \ \ \ \ \ assert\_(type(\string~(a\ \&\ a))\ \textcolor{keywordflow}{is}\ np.bool\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04169}04169\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04170}04170\ \ \ \ \ \textcolor{keyword}{def\ }test\_elide\_scalar\_readonly(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04171}04171\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ imaginary\ part\ of\ a\ real\ array\ is\ readonly.\ This\ needs\ to\ go}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04172}04172\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ through\ fast\_scalar\_power\ which\ is\ only\ called\ for\ powers\ of}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04173}04173\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ +1,\ -\/1,\ 0,\ 0.5,\ and\ 2,\ so\ use\ 2.\ Also\ need\ valid\ refcount\ for}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04174}04174\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ elision\ which\ can\ be\ gotten\ for\ the\ imaginary\ part\ of\ a\ real}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04175}04175\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ array.\ Should\ not\ error.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04176}04176\ \ \ \ \ \ \ \ \ a\ =\ np.empty(100000,\ dtype=np.float64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04177}04177\ \ \ \ \ \ \ \ \ a.imag\ **\ 2}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04178}04178\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04179}04179\ \ \ \ \ \textcolor{keyword}{def\ }test\_elide\_readonly(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04180}04180\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ don't\ try\ to\ elide\ readonly\ temporaries}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04181}04181\ \ \ \ \ \ \ \ \ r\ =\ np.asarray(np.broadcast\_to(np.zeros(1),\ 100000).flat)\ *\ 0.0}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04182}04182\ \ \ \ \ \ \ \ \ assert\_equal(r,\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04183}04183\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04184}04184\ \ \ \ \ \textcolor{keyword}{def\ }test\_elide\_updateifcopy(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04185}04185\ \ \ \ \ \ \ \ \ a\ =\ np.ones(2**20)[::2]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04186}04186\ \ \ \ \ \ \ \ \ b\ =\ a.flat.\_\_array\_\_()\ +\ 1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04187}04187\ \ \ \ \ \ \ \ \ del\ b}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04188}04188\ \ \ \ \ \ \ \ \ assert\_equal(a,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04189}04189\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04190}04190\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04191}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestCAPI}{04191}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestCAPI}{TestCAPI}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04192}04192\ \ \ \ \ \textcolor{keyword}{def\ }test\_IsPythonScalar(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04193}04193\ \ \ \ \ \ \ \ \ \textcolor{keyword}{from}\ numpy.core.\_multiarray\_tests\ \textcolor{keyword}{import}\ IsPythonScalar}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04194}04194\ \ \ \ \ \ \ \ \ assert\_(IsPythonScalar(b\textcolor{stringliteral}{'foobar'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04195}04195\ \ \ \ \ \ \ \ \ assert\_(IsPythonScalar(1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04196}04196\ \ \ \ \ \ \ \ \ assert\_(IsPythonScalar(2**80))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04197}04197\ \ \ \ \ \ \ \ \ assert\_(IsPythonScalar(2.))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04198}04198\ \ \ \ \ \ \ \ \ assert\_(IsPythonScalar(\textcolor{stringliteral}{"{}a"{}}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04199}04199\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04200}04200\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{"{}converter"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04201}04201\ \ \ \ \ \ \ \ \ \ \ \ \ \ [\_multiarray\_tests.run\_scalar\_intp\_converter,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04202}04202\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_multiarray\_tests.run\_scalar\_intp\_from\_sequence])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04203}04203\ \ \ \ \ \textcolor{keyword}{def\ }test\_intp\_sequence\_converters(self,\ converter):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04204}04204\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ simple\ values\ (-\/1\ is\ special\ for\ error\ return\ paths)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04205}04205\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ converter(10)\ ==\ (10,)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04206}04206\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ converter(-\/1)\ ==\ (-\/1,)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04207}04207\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ A\ 0-\/D\ array\ looks\ a\ bit\ like\ a\ sequence\ but\ must\ take\ the\ integer}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04208}04208\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ path:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04209}04209\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ converter(np.array(123))\ ==\ (123,)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04210}04210\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ simple\ sequences\ (intp\_from\_sequence\ only\ supports\ length\ 1):}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04211}04211\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ converter((10,))\ ==\ (10,)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04212}04212\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ converter(np.array([11]))\ ==\ (11,)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04213}04213\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04214}04214\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{"{}converter"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04215}04215\ \ \ \ \ \ \ \ \ \ \ \ \ \ [\_multiarray\_tests.run\_scalar\_intp\_converter,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04216}04216\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_multiarray\_tests.run\_scalar\_intp\_from\_sequence])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04217}04217\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.skipif(IS\_PYPY\ and\ sys.implementation.version\ <=\ (7,\ 3,\ 8)},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04218}04218\ \ \ \ \ \ \ \ \ \ \ \ \ reason=\textcolor{stringliteral}{"{}PyPy\ bug\ in\ error\ formatting"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04219}04219\ \ \ \ \ \textcolor{keyword}{def\ }test\_intp\_sequence\_converters\_errors(self,\ converter):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04220}04220\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04221}04221\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ match=\textcolor{stringliteral}{"{}expected\ a\ sequence\ of\ integers\ or\ a\ single\ integer,\ "{}}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04222}04222\ \ \ \ \ \ \ \ \ \ \ \ \ converter(object())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04223}04223\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04224}04224\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ match=\textcolor{stringliteral}{"{}expected\ a\ sequence\ of\ integers\ or\ a\ single\ integer,\ "{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04225}04225\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}got\ '32.0'"{}}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04226}04226\ \ \ \ \ \ \ \ \ \ \ \ \ converter(32.)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04227}04227\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04228}04228\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ match=\textcolor{stringliteral}{"{}'float'\ object\ cannot\ be\ interpreted\ as\ an\ integer"{}}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04229}04229\ \ \ \ \ \ \ \ \ \ \ \ \ converter([32.])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04230}04230\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04231}04231\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ match=\textcolor{stringliteral}{"{}Maximum\ allowed\ dimension"{}}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04232}04232\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ These\ converters\ currently\ convert\ overflows\ to\ a\ ValueError}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04233}04233\ \ \ \ \ \ \ \ \ \ \ \ \ converter(2**64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04234}04234\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04235}04235\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04236}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestSubscripting}{04236}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestSubscripting}{TestSubscripting}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04237}04237\ \ \ \ \ \textcolor{keyword}{def\ }test\_test\_zero\_rank(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04238}04238\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04239}04239\ \ \ \ \ \ \ \ \ assert\_(isinstance(x[0],\ np.int\_))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04240}04240\ \ \ \ \ \ \ \ \ assert\_(type(x[0,\ ...])\ \textcolor{keywordflow}{is}\ np.ndarray)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04241}04241\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04242}04242\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04243}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPickling}{04243}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPickling}{TestPickling}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04244}04244\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.skipif}(pickle.HIGHEST\_PROTOCOL\ >=\ 5,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04245}04245\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ reason=(\textcolor{stringliteral}{'this\ tests\ the\ error\ messages\ when\ trying\ to'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04246}04246\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'protocol\ 5\ although\ it\ is\ not\ available'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04247}04247\ \ \ \ \ \textcolor{keyword}{def\ }test\_correct\_protocol5\_error\_message(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04248}04248\ \ \ \ \ \ \ \ \ array\ =\ np.arange(10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04249}04249\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04250}04250\ \ \ \ \ \textcolor{keyword}{def\ }test\_record\_array\_with\_object\_dtype(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04251}04251\ \ \ \ \ \ \ \ \ my\_object\ =\ object()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04252}04252\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04253}04253\ \ \ \ \ \ \ \ \ arr\_with\_object\ =\ np.array(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04254}04254\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [(my\_object,\ 1,\ 2.0)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04255}04255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=[(\textcolor{stringliteral}{'a'},\ object),\ (\textcolor{stringliteral}{'b'},\ int),\ (\textcolor{stringliteral}{'c'},\ float)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04256}04256\ \ \ \ \ \ \ \ \ arr\_without\_object\ =\ np.array(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04257}04257\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [(\textcolor{stringliteral}{'xxx'},\ 1,\ 2.0)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04258}04258\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=[(\textcolor{stringliteral}{'a'},\ str),\ (\textcolor{stringliteral}{'b'},\ int),\ (\textcolor{stringliteral}{'c'},\ float)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04259}04259\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04260}04260\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ proto\ \textcolor{keywordflow}{in}\ range(2,\ pickle.HIGHEST\_PROTOCOL\ +\ 1):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04261}04261\ \ \ \ \ \ \ \ \ \ \ \ \ depickled\_arr\_with\_object\ =\ pickle.loads(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04262}04262\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pickle.dumps(arr\_with\_object,\ protocol=proto))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04263}04263\ \ \ \ \ \ \ \ \ \ \ \ \ depickled\_arr\_without\_object\ =\ pickle.loads(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04264}04264\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pickle.dumps(arr\_without\_object,\ protocol=proto))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04265}04265\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04266}04266\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(arr\_with\_object.dtype,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04267}04267\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ depickled\_arr\_with\_object.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04268}04268\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(arr\_without\_object.dtype,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04269}04269\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ depickled\_arr\_without\_object.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04270}04270\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04271}04271\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.skipif}(pickle.HIGHEST\_PROTOCOL\ <\ 5,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04272}04272\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ reason=\textcolor{stringliteral}{"{}requires\ pickle\ protocol\ 5"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04273}04273\ \ \ \ \ \textcolor{keyword}{def\ }test\_f\_contiguous\_array(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04274}04274\ \ \ \ \ \ \ \ \ f\_contiguous\_array\ =\ np.array([[1,\ 2,\ 3],\ [4,\ 5,\ 6]],\ order=\textcolor{stringliteral}{'F'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04275}04275\ \ \ \ \ \ \ \ \ buffers\ =\ []}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04276}04276\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04277}04277\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ When\ using\ pickle\ protocol\ 5,\ Fortran-\/contiguous\ arrays\ can\ be}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04278}04278\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ serialized\ using\ out-\/of-\/band\ buffers}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04279}04279\ \ \ \ \ \ \ \ \ bytes\_string\ =\ pickle.dumps(f\_contiguous\_array,\ protocol=5,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04280}04280\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ buffer\_callback=buffers.append)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04281}04281\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04282}04282\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ len(buffers)\ >\ 0}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04283}04283\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04284}04284\ \ \ \ \ \ \ \ \ depickled\_f\_contiguous\_array\ =\ pickle.loads(bytes\_string,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04285}04285\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ buffers=buffers)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04286}04286\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04287}04287\ \ \ \ \ \ \ \ \ assert\_equal(f\_contiguous\_array,\ depickled\_f\_contiguous\_array)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04288}04288\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04289}04289\ \ \ \ \ \textcolor{keyword}{def\ }test\_non\_contiguous\_array(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04290}04290\ \ \ \ \ \ \ \ \ non\_contiguous\_array\ =\ np.arange(12).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(3,\ 4)[:,\ :2]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04291}04291\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ \textcolor{keywordflow}{not}\ non\_contiguous\_array.flags.c\_contiguous}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04292}04292\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ \textcolor{keywordflow}{not}\ non\_contiguous\_array.flags.f\_contiguous}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04293}04293\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04294}04294\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ make\ sure\ non-\/contiguous\ arrays\ can\ be\ pickled-\/depickled}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04295}04295\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ using\ any\ protocol}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04296}04296\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ proto\ \textcolor{keywordflow}{in}\ range(2,\ pickle.HIGHEST\_PROTOCOL\ +\ 1):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04297}04297\ \ \ \ \ \ \ \ \ \ \ \ \ depickled\_non\_contiguous\_array\ =\ pickle.loads(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04298}04298\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pickle.dumps(non\_contiguous\_array,\ protocol=proto))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04299}04299\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04300}04300\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(non\_contiguous\_array,\ depickled\_non\_contiguous\_array)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04301}04301\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04302}04302\ \ \ \ \ \textcolor{keyword}{def\ }test\_roundtrip(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04303}04303\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ proto\ \textcolor{keywordflow}{in}\ range(2,\ pickle.HIGHEST\_PROTOCOL\ +\ 1):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04304}04304\ \ \ \ \ \ \ \ \ \ \ \ \ carray\ =\ np.array([[2,\ 9],\ [7,\ 0],\ [3,\ 8]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04305}04305\ \ \ \ \ \ \ \ \ \ \ \ \ DATA\ =\ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04306}04306\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ carray,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04307}04307\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.transpose(carray),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04308}04308\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([(\textcolor{stringliteral}{'xxx'},\ 1,\ 2.0)],\ dtype=[(\textcolor{stringliteral}{'a'},\ (str,\ 3)),\ (\textcolor{stringliteral}{'b'},\ int),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04309}04309\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'c'},\ float)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04310}04310\ \ \ \ \ \ \ \ \ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04311}04311\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04312}04312\ \ \ \ \ \ \ \ \ \ \ \ \ refs\ =\ [weakref.ref(a)\ \textcolor{keywordflow}{for}\ a\ \textcolor{keywordflow}{in}\ DATA]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04313}04313\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ a\ \textcolor{keywordflow}{in}\ DATA:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04314}04314\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04315}04315\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ a,\ pickle.loads(pickle.dumps(a,\ protocol=proto)),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04316}04316\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ err\_msg=\textcolor{stringliteral}{"{}\%r"{}}\ \%\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04317}04317\ \ \ \ \ \ \ \ \ \ \ \ \ del\ a,\ DATA,\ carray}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04318}04318\ \ \ \ \ \ \ \ \ \ \ \ \ break\_cycles()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04319}04319\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ for\ reference\ leaks\ (gh-\/12793)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04320}04320\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ ref\ \textcolor{keywordflow}{in}\ refs:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04321}04321\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ ref()\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04322}04322\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04323}04323\ \ \ \ \ \textcolor{keyword}{def\ }\_loads(self,\ obj):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04324}04324\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pickle.loads(obj,\ encoding=\textcolor{stringliteral}{'latin1'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04325}04325\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04326}04326\ \ \ \ \ \textcolor{comment}{\#\ version\ 0\ pickles,\ using\ protocol=2\ to\ pickle}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04327}04327\ \ \ \ \ \textcolor{comment}{\#\ version\ 0\ doesn't\ have\ a\ version\ field}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04328}04328\ \ \ \ \ \textcolor{keyword}{def\ }test\_version0\_int8(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04329}04329\ \ \ \ \ \ \ \ \ s\ =\ b\textcolor{stringliteral}{'\(\backslash\)x80\(\backslash\)x02cnumpy.core.\_internal\(\backslash\)n\_reconstruct\(\backslash\)nq\(\backslash\)x01cnumpy\(\backslash\)nndarray\(\backslash\)nq\(\backslash\)x02K\(\backslash\)x00\(\backslash\)x85U\(\backslash\)x01b\(\backslash\)x87Rq\(\backslash\)x03(K\(\backslash\)x04\(\backslash\)x85cnumpy\(\backslash\)ndtype\(\backslash\)nq\(\backslash\)x04U\(\backslash\)x02i1K\(\backslash\)x00K\(\backslash\)x01\(\backslash\)x87Rq\(\backslash\)x05(U\(\backslash\)x01|NNJ\(\backslash\)xff\(\backslash\)xff\(\backslash\)xff\(\backslash\)xffJ\(\backslash\)xff\(\backslash\)xff\(\backslash\)xff\(\backslash\)xfftb\(\backslash\)x89U\(\backslash\)x04\(\backslash\)x01\(\backslash\)x02\(\backslash\)x03\(\backslash\)x04tb.'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04330}04330\ \ \ \ \ \ \ \ \ a\ =\ np.array([1,\ 2,\ 3,\ 4],\ dtype=np.int8)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04331}04331\ \ \ \ \ \ \ \ \ p\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPickling_a855e423cbd36897efe003b9f760b28b6}{\_loads}}(s)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04332}04332\ \ \ \ \ \ \ \ \ assert\_equal(a,\ p)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04333}04333\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04334}04334\ \ \ \ \ \textcolor{keyword}{def\ }test\_version0\_float32(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04335}04335\ \ \ \ \ \ \ \ \ s\ =\ b\textcolor{stringliteral}{'\(\backslash\)x80\(\backslash\)x02cnumpy.core.\_internal\(\backslash\)n\_reconstruct\(\backslash\)nq\(\backslash\)x01cnumpy\(\backslash\)nndarray\(\backslash\)nq\(\backslash\)x02K\(\backslash\)x00\(\backslash\)x85U\(\backslash\)x01b\(\backslash\)x87Rq\(\backslash\)x03(K\(\backslash\)x04\(\backslash\)x85cnumpy\(\backslash\)ndtype\(\backslash\)nq\(\backslash\)x04U\(\backslash\)x02f4K\(\backslash\)x00K\(\backslash\)x01\(\backslash\)x87Rq\(\backslash\)x05(U\(\backslash\)x01<NNJ\(\backslash\)xff\(\backslash\)xff\(\backslash\)xff\(\backslash\)xffJ\(\backslash\)xff\(\backslash\)xff\(\backslash\)xff\(\backslash\)xfftb\(\backslash\)x89U\(\backslash\)x10\(\backslash\)x00\(\backslash\)x00\(\backslash\)x80?\(\backslash\)x00\(\backslash\)x00\(\backslash\)x00@\(\backslash\)x00\(\backslash\)x00@@\(\backslash\)x00\(\backslash\)x00\(\backslash\)x80@tb.'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04336}04336\ \ \ \ \ \ \ \ \ a\ =\ np.array([1.0,\ 2.0,\ 3.0,\ 4.0],\ dtype=np.float32)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04337}04337\ \ \ \ \ \ \ \ \ p\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPickling_a855e423cbd36897efe003b9f760b28b6}{\_loads}}(s)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04338}04338\ \ \ \ \ \ \ \ \ assert\_equal(a,\ p)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04339}04339\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04340}04340\ \ \ \ \ \textcolor{keyword}{def\ }test\_version0\_object(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04341}04341\ \ \ \ \ \ \ \ \ s\ =\ b\textcolor{stringliteral}{'\(\backslash\)x80\(\backslash\)x02cnumpy.core.\_internal\(\backslash\)n\_reconstruct\(\backslash\)nq\(\backslash\)x01cnumpy\(\backslash\)nndarray\(\backslash\)nq\(\backslash\)x02K\(\backslash\)x00\(\backslash\)x85U\(\backslash\)x01b\(\backslash\)x87Rq\(\backslash\)x03(K\(\backslash\)x02\(\backslash\)x85cnumpy\(\backslash\)ndtype\(\backslash\)nq\(\backslash\)x04U\(\backslash\)x02O8K\(\backslash\)x00K\(\backslash\)x01\(\backslash\)x87Rq\(\backslash\)x05(U\(\backslash\)x01|NNJ\(\backslash\)xff\(\backslash\)xff\(\backslash\)xff\(\backslash\)xffJ\(\backslash\)xff\(\backslash\)xff\(\backslash\)xff\(\backslash\)xfftb\(\backslash\)x89]q\(\backslash\)x06(\}q\(\backslash\)x07U\(\backslash\)x01aK\(\backslash\)x01s\}q\(\backslash\)x08U\(\backslash\)x01bK\(\backslash\)x02setb.'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04342}04342\ \ \ \ \ \ \ \ \ a\ =\ np.array([\{\textcolor{stringliteral}{'a'}:\ 1\},\ \{\textcolor{stringliteral}{'b'}:\ 2\}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04343}04343\ \ \ \ \ \ \ \ \ p\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPickling_a855e423cbd36897efe003b9f760b28b6}{\_loads}}(s)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04344}04344\ \ \ \ \ \ \ \ \ assert\_equal(a,\ p)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04345}04345\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04346}04346\ \ \ \ \ \textcolor{comment}{\#\ version\ 1\ pickles,\ using\ protocol=2\ to\ pickle}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04347}04347\ \ \ \ \ \textcolor{keyword}{def\ }test\_version1\_int8(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04348}04348\ \ \ \ \ \ \ \ \ s\ =\ b\textcolor{stringliteral}{'\(\backslash\)x80\(\backslash\)x02cnumpy.core.\_internal\(\backslash\)n\_reconstruct\(\backslash\)nq\(\backslash\)x01cnumpy\(\backslash\)nndarray\(\backslash\)nq\(\backslash\)x02K\(\backslash\)x00\(\backslash\)x85U\(\backslash\)x01b\(\backslash\)x87Rq\(\backslash\)x03(K\(\backslash\)x01K\(\backslash\)x04\(\backslash\)x85cnumpy\(\backslash\)ndtype\(\backslash\)nq\(\backslash\)x04U\(\backslash\)x02i1K\(\backslash\)x00K\(\backslash\)x01\(\backslash\)x87Rq\(\backslash\)x05(K\(\backslash\)x01U\(\backslash\)x01|NNJ\(\backslash\)xff\(\backslash\)xff\(\backslash\)xff\(\backslash\)xffJ\(\backslash\)xff\(\backslash\)xff\(\backslash\)xff\(\backslash\)xfftb\(\backslash\)x89U\(\backslash\)x04\(\backslash\)x01\(\backslash\)x02\(\backslash\)x03\(\backslash\)x04tb.'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04349}04349\ \ \ \ \ \ \ \ \ a\ =\ np.array([1,\ 2,\ 3,\ 4],\ dtype=np.int8)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04350}04350\ \ \ \ \ \ \ \ \ p\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPickling_a855e423cbd36897efe003b9f760b28b6}{\_loads}}(s)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04351}04351\ \ \ \ \ \ \ \ \ assert\_equal(a,\ p)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04352}04352\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04353}04353\ \ \ \ \ \textcolor{keyword}{def\ }test\_version1\_float32(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04354}04354\ \ \ \ \ \ \ \ \ s\ =\ b\textcolor{stringliteral}{'\(\backslash\)x80\(\backslash\)x02cnumpy.core.\_internal\(\backslash\)n\_reconstruct\(\backslash\)nq\(\backslash\)x01cnumpy\(\backslash\)nndarray\(\backslash\)nq\(\backslash\)x02K\(\backslash\)x00\(\backslash\)x85U\(\backslash\)x01b\(\backslash\)x87Rq\(\backslash\)x03(K\(\backslash\)x01K\(\backslash\)x04\(\backslash\)x85cnumpy\(\backslash\)ndtype\(\backslash\)nq\(\backslash\)x04U\(\backslash\)x02f4K\(\backslash\)x00K\(\backslash\)x01\(\backslash\)x87Rq\(\backslash\)x05(K\(\backslash\)x01U\(\backslash\)x01<NNJ\(\backslash\)xff\(\backslash\)xff\(\backslash\)xff\(\backslash\)xffJ\(\backslash\)xff\(\backslash\)xff\(\backslash\)xff\(\backslash\)xfftb\(\backslash\)x89U\(\backslash\)x10\(\backslash\)x00\(\backslash\)x00\(\backslash\)x80?\(\backslash\)x00\(\backslash\)x00\(\backslash\)x00@\(\backslash\)x00\(\backslash\)x00@@\(\backslash\)x00\(\backslash\)x00\(\backslash\)x80@tb.'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04355}04355\ \ \ \ \ \ \ \ \ a\ =\ np.array([1.0,\ 2.0,\ 3.0,\ 4.0],\ dtype=np.float32)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04356}04356\ \ \ \ \ \ \ \ \ p\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPickling_a855e423cbd36897efe003b9f760b28b6}{\_loads}}(s)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04357}04357\ \ \ \ \ \ \ \ \ assert\_equal(a,\ p)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04358}04358\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04359}04359\ \ \ \ \ \textcolor{keyword}{def\ }test\_version1\_object(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04360}04360\ \ \ \ \ \ \ \ \ s\ =\ b\textcolor{stringliteral}{'\(\backslash\)x80\(\backslash\)x02cnumpy.core.\_internal\(\backslash\)n\_reconstruct\(\backslash\)nq\(\backslash\)x01cnumpy\(\backslash\)nndarray\(\backslash\)nq\(\backslash\)x02K\(\backslash\)x00\(\backslash\)x85U\(\backslash\)x01b\(\backslash\)x87Rq\(\backslash\)x03(K\(\backslash\)x01K\(\backslash\)x02\(\backslash\)x85cnumpy\(\backslash\)ndtype\(\backslash\)nq\(\backslash\)x04U\(\backslash\)x02O8K\(\backslash\)x00K\(\backslash\)x01\(\backslash\)x87Rq\(\backslash\)x05(K\(\backslash\)x01U\(\backslash\)x01|NNJ\(\backslash\)xff\(\backslash\)xff\(\backslash\)xff\(\backslash\)xffJ\(\backslash\)xff\(\backslash\)xff\(\backslash\)xff\(\backslash\)xfftb\(\backslash\)x89]q\(\backslash\)x06(\}q\(\backslash\)x07U\(\backslash\)x01aK\(\backslash\)x01s\}q\(\backslash\)x08U\(\backslash\)x01bK\(\backslash\)x02setb.'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04361}04361\ \ \ \ \ \ \ \ \ a\ =\ np.array([\{\textcolor{stringliteral}{'a'}:\ 1\},\ \{\textcolor{stringliteral}{'b'}:\ 2\}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04362}04362\ \ \ \ \ \ \ \ \ p\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPickling_a855e423cbd36897efe003b9f760b28b6}{\_loads}}(s)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04363}04363\ \ \ \ \ \ \ \ \ assert\_equal(a,\ p)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04364}04364\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04365}04365\ \ \ \ \ \textcolor{keyword}{def\ }test\_subarray\_int\_shape(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04366}04366\ \ \ \ \ \ \ \ \ s\ =\ b\textcolor{stringliteral}{"{}cnumpy.core.multiarray\(\backslash\)n\_reconstruct\(\backslash\)np0\(\backslash\)n(cnumpy\(\backslash\)nndarray\(\backslash\)np1\(\backslash\)n(I0\(\backslash\)ntp2\(\backslash\)nS'b'\(\backslash\)np3\(\backslash\)ntp4\(\backslash\)nRp5\(\backslash\)n(I1\(\backslash\)n(I1\(\backslash\)ntp6\(\backslash\)ncnumpy\(\backslash\)ndtype\(\backslash\)np7\(\backslash\)n(S'V6'\(\backslash\)np8\(\backslash\)nI0\(\backslash\)nI1\(\backslash\)ntp9\(\backslash\)nRp10\(\backslash\)n(I3\(\backslash\)nS'|'\(\backslash\)np11\(\backslash\)nN(S'a'\(\backslash\)np12\(\backslash\)ng3\(\backslash\)ntp13\(\backslash\)n(dp14\(\backslash\)ng12\(\backslash\)n(g7\(\backslash\)n(S'V4'\(\backslash\)np15\(\backslash\)nI0\(\backslash\)nI1\(\backslash\)ntp16\(\backslash\)nRp17\(\backslash\)n(I3\(\backslash\)nS'|'\(\backslash\)np18\(\backslash\)n(g7\(\backslash\)n(S'i1'\(\backslash\)np19\(\backslash\)nI0\(\backslash\)nI1\(\backslash\)ntp20\(\backslash\)nRp21\(\backslash\)n(I3\(\backslash\)nS'|'\(\backslash\)np22\(\backslash\)nNNNI-\/1\(\backslash\)nI-\/1\(\backslash\)nI0\(\backslash\)ntp23\(\backslash\)nb(I2\(\backslash\)nI2\(\backslash\)ntp24\(\backslash\)ntp25\(\backslash\)nNNI4\(\backslash\)nI1\(\backslash\)nI0\(\backslash\)ntp26\(\backslash\)nbI0\(\backslash\)ntp27\(\backslash\)nsg3\(\backslash\)n(g7\(\backslash\)n(S'V2'\(\backslash\)np28\(\backslash\)nI0\(\backslash\)nI1\(\backslash\)ntp29\(\backslash\)nRp30\(\backslash\)n(I3\(\backslash\)nS'|'\(\backslash\)np31\(\backslash\)n(g21\(\backslash\)nI2\(\backslash\)ntp32\(\backslash\)nNNI2\(\backslash\)nI1\(\backslash\)nI0\(\backslash\)ntp33\(\backslash\)nbI4\(\backslash\)ntp34\(\backslash\)nsI6\(\backslash\)nI1\(\backslash\)nI0\(\backslash\)ntp35\(\backslash\)nbI00\(\backslash\)nS'\(\backslash\)\(\backslash\)x01\(\backslash\)\(\backslash\)x01\(\backslash\)\(\backslash\)x01\(\backslash\)\(\backslash\)x01\(\backslash\)\(\backslash\)x01\(\backslash\)\(\backslash\)x02'\(\backslash\)np36\(\backslash\)ntp37\(\backslash\)nb."{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04367}04367\ \ \ \ \ \ \ \ \ a\ =\ np.array([(1,\ (1,\ 2))],\ dtype=[(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'i1'},\ (2,\ 2)),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'i1'},\ 2)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04368}04368\ \ \ \ \ \ \ \ \ p\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPickling_a855e423cbd36897efe003b9f760b28b6}{\_loads}}(s)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04369}04369\ \ \ \ \ \ \ \ \ assert\_equal(a,\ p)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04370}04370\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04371}04371\ \ \ \ \ \textcolor{keyword}{def\ }test\_datetime64\_byteorder(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04372}04372\ \ \ \ \ \ \ \ \ original\ =\ np.array([[\textcolor{stringliteral}{'2015-\/02-\/24T00:00:00.000000000'}]],\ dtype=\textcolor{stringliteral}{'datetime64[ns]'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04373}04373\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04374}04374\ \ \ \ \ \ \ \ \ original\_byte\_reversed\ =\ original.copy(order=\textcolor{stringliteral}{'K'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04375}04375\ \ \ \ \ \ \ \ \ original\_byte\_reversed.dtype\ =\ original\_byte\_reversed.dtype.newbyteorder(\textcolor{stringliteral}{'S'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04376}04376\ \ \ \ \ \ \ \ \ original\_byte\_reversed.byteswap(inplace=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04377}04377\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04378}04378\ \ \ \ \ \ \ \ \ new\ =\ pickle.loads(pickle.dumps(original\_byte\_reversed))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04379}04379\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04380}04380\ \ \ \ \ \ \ \ \ assert\_equal(original.dtype,\ new.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04381}04381\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04382}04382\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04383}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFancyIndexing}{04383}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFancyIndexing}{TestFancyIndexing}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04384}04384\ \ \ \ \ \textcolor{keyword}{def\ }test\_list(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04385}04385\ \ \ \ \ \ \ \ \ x\ =\ np.ones((1,\ 1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04386}04386\ \ \ \ \ \ \ \ \ x[:,\ [0]]\ =\ 2.0}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04387}04387\ \ \ \ \ \ \ \ \ assert\_array\_equal(x,\ np.array([[2.0]]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04388}04388\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04389}04389\ \ \ \ \ \ \ \ \ x\ =\ np.ones((1,\ 1,\ 1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04390}04390\ \ \ \ \ \ \ \ \ x[:,\ :,\ [0]]\ =\ 2.0}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04391}04391\ \ \ \ \ \ \ \ \ assert\_array\_equal(x,\ np.array([[[2.0]]]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04392}04392\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04393}04393\ \ \ \ \ \textcolor{keyword}{def\ }test\_tuple(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04394}04394\ \ \ \ \ \ \ \ \ x\ =\ np.ones((1,\ 1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04395}04395\ \ \ \ \ \ \ \ \ x[:,\ (0,)]\ =\ 2.0}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04396}04396\ \ \ \ \ \ \ \ \ assert\_array\_equal(x,\ np.array([[2.0]]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04397}04397\ \ \ \ \ \ \ \ \ x\ =\ np.ones((1,\ 1,\ 1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04398}04398\ \ \ \ \ \ \ \ \ x[:,\ :,\ (0,)]\ =\ 2.0}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04399}04399\ \ \ \ \ \ \ \ \ assert\_array\_equal(x,\ np.array([[[2.0]]]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04400}04400\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04401}04401\ \ \ \ \ \textcolor{keyword}{def\ }test\_mask(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04402}04402\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3,\ 4])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04403}04403\ \ \ \ \ \ \ \ \ m\ =\ np.array([0,\ 1,\ 0,\ 0],\ bool)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04404}04404\ \ \ \ \ \ \ \ \ assert\_array\_equal(x[m],\ np.array([2]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04405}04405\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04406}04406\ \ \ \ \ \textcolor{keyword}{def\ }test\_mask2(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04407}04407\ \ \ \ \ \ \ \ \ x\ =\ np.array([[1,\ 2,\ 3,\ 4],\ [5,\ 6,\ 7,\ 8]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04408}04408\ \ \ \ \ \ \ \ \ m\ =\ np.array([0,\ 1],\ bool)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04409}04409\ \ \ \ \ \ \ \ \ m2\ =\ np.array([[0,\ 1,\ 0,\ 0],\ [1,\ 0,\ 0,\ 0]],\ bool)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04410}04410\ \ \ \ \ \ \ \ \ m3\ =\ np.array([[0,\ 1,\ 0,\ 0],\ [0,\ 0,\ 0,\ 0]],\ bool)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04411}04411\ \ \ \ \ \ \ \ \ assert\_array\_equal(x[m],\ np.array([[5,\ 6,\ 7,\ 8]]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04412}04412\ \ \ \ \ \ \ \ \ assert\_array\_equal(x[m2],\ np.array([2,\ 5]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04413}04413\ \ \ \ \ \ \ \ \ assert\_array\_equal(x[m3],\ np.array([2]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04414}04414\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04415}04415\ \ \ \ \ \textcolor{keyword}{def\ }test\_assign\_mask(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04416}04416\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3,\ 4])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04417}04417\ \ \ \ \ \ \ \ \ m\ =\ np.array([0,\ 1,\ 0,\ 0],\ bool)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04418}04418\ \ \ \ \ \ \ \ \ x[m]\ =\ 5}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04419}04419\ \ \ \ \ \ \ \ \ assert\_array\_equal(x,\ np.array([1,\ 5,\ 3,\ 4]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04420}04420\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04421}04421\ \ \ \ \ \textcolor{keyword}{def\ }test\_assign\_mask2(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04422}04422\ \ \ \ \ \ \ \ \ xorig\ =\ np.array([[1,\ 2,\ 3,\ 4],\ [5,\ 6,\ 7,\ 8]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04423}04423\ \ \ \ \ \ \ \ \ m\ =\ np.array([0,\ 1],\ bool)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04424}04424\ \ \ \ \ \ \ \ \ m2\ =\ np.array([[0,\ 1,\ 0,\ 0],\ [1,\ 0,\ 0,\ 0]],\ bool)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04425}04425\ \ \ \ \ \ \ \ \ m3\ =\ np.array([[0,\ 1,\ 0,\ 0],\ [0,\ 0,\ 0,\ 0]],\ bool)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04426}04426\ \ \ \ \ \ \ \ \ x\ =\ xorig.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04427}04427\ \ \ \ \ \ \ \ \ x[m]\ =\ 10}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04428}04428\ \ \ \ \ \ \ \ \ assert\_array\_equal(x,\ np.array([[1,\ 2,\ 3,\ 4],\ [10,\ 10,\ 10,\ 10]]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04429}04429\ \ \ \ \ \ \ \ \ x\ =\ xorig.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04430}04430\ \ \ \ \ \ \ \ \ x[m2]\ =\ 10}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04431}04431\ \ \ \ \ \ \ \ \ assert\_array\_equal(x,\ np.array([[1,\ 10,\ 3,\ 4],\ [10,\ 6,\ 7,\ 8]]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04432}04432\ \ \ \ \ \ \ \ \ x\ =\ xorig.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04433}04433\ \ \ \ \ \ \ \ \ x[m3]\ =\ 10}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04434}04434\ \ \ \ \ \ \ \ \ assert\_array\_equal(x,\ np.array([[1,\ 10,\ 3,\ 4],\ [5,\ 6,\ 7,\ 8]]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04435}04435\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04436}04436\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04437}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStringCompare}{04437}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStringCompare}{TestStringCompare}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04438}04438\ \ \ \ \ \textcolor{keyword}{def\ }test\_string(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04439}04439\ \ \ \ \ \ \ \ \ g1\ =\ np.array([\textcolor{stringliteral}{"{}This"{}},\ \textcolor{stringliteral}{"{}is"{}},\ \textcolor{stringliteral}{"{}example"{}}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04440}04440\ \ \ \ \ \ \ \ \ g2\ =\ np.array([\textcolor{stringliteral}{"{}This"{}},\ \textcolor{stringliteral}{"{}was"{}},\ \textcolor{stringliteral}{"{}example"{}}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04441}04441\ \ \ \ \ \ \ \ \ assert\_array\_equal(g1\ ==\ g2,\ [g1[i]\ ==\ g2[i]\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ [0,\ 1,\ 2]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04442}04442\ \ \ \ \ \ \ \ \ assert\_array\_equal(g1\ !=\ g2,\ [g1[i]\ !=\ g2[i]\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ [0,\ 1,\ 2]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04443}04443\ \ \ \ \ \ \ \ \ assert\_array\_equal(g1\ <=\ g2,\ [g1[i]\ <=\ g2[i]\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ [0,\ 1,\ 2]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04444}04444\ \ \ \ \ \ \ \ \ assert\_array\_equal(g1\ >=\ g2,\ [g1[i]\ >=\ g2[i]\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ [0,\ 1,\ 2]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04445}04445\ \ \ \ \ \ \ \ \ assert\_array\_equal(g1\ <\ g2,\ [g1[i]\ <\ g2[i]\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ [0,\ 1,\ 2]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04446}04446\ \ \ \ \ \ \ \ \ assert\_array\_equal(g1\ >\ g2,\ [g1[i]\ >\ g2[i]\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ [0,\ 1,\ 2]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04447}04447\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04448}04448\ \ \ \ \ \textcolor{keyword}{def\ }test\_mixed(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04449}04449\ \ \ \ \ \ \ \ \ g1\ =\ np.array([\textcolor{stringliteral}{"{}spam"{}},\ \textcolor{stringliteral}{"{}spa"{}},\ \textcolor{stringliteral}{"{}spammer"{}},\ \textcolor{stringliteral}{"{}and\ eggs"{}}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04450}04450\ \ \ \ \ \ \ \ \ g2\ =\ \textcolor{stringliteral}{"{}spam"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04451}04451\ \ \ \ \ \ \ \ \ assert\_array\_equal(g1\ ==\ g2,\ [x\ ==\ g2\ \textcolor{keywordflow}{for}\ x\ \textcolor{keywordflow}{in}\ g1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04452}04452\ \ \ \ \ \ \ \ \ assert\_array\_equal(g1\ !=\ g2,\ [x\ !=\ g2\ \textcolor{keywordflow}{for}\ x\ \textcolor{keywordflow}{in}\ g1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04453}04453\ \ \ \ \ \ \ \ \ assert\_array\_equal(g1\ <\ g2,\ [x\ <\ g2\ \textcolor{keywordflow}{for}\ x\ \textcolor{keywordflow}{in}\ g1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04454}04454\ \ \ \ \ \ \ \ \ assert\_array\_equal(g1\ >\ g2,\ [x\ >\ g2\ \textcolor{keywordflow}{for}\ x\ \textcolor{keywordflow}{in}\ g1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04455}04455\ \ \ \ \ \ \ \ \ assert\_array\_equal(g1\ <=\ g2,\ [x\ <=\ g2\ \textcolor{keywordflow}{for}\ x\ \textcolor{keywordflow}{in}\ g1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04456}04456\ \ \ \ \ \ \ \ \ assert\_array\_equal(g1\ >=\ g2,\ [x\ >=\ g2\ \textcolor{keywordflow}{for}\ x\ \textcolor{keywordflow}{in}\ g1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04457}04457\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04458}04458\ \ \ \ \ \textcolor{keyword}{def\ }test\_unicode(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04459}04459\ \ \ \ \ \ \ \ \ g1\ =\ np.array([\textcolor{stringliteral}{"{}This"{}},\ \textcolor{stringliteral}{"{}is"{}},\ \textcolor{stringliteral}{"{}example"{}}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04460}04460\ \ \ \ \ \ \ \ \ g2\ =\ np.array([\textcolor{stringliteral}{"{}This"{}},\ \textcolor{stringliteral}{"{}was"{}},\ \textcolor{stringliteral}{"{}example"{}}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04461}04461\ \ \ \ \ \ \ \ \ assert\_array\_equal(g1\ ==\ g2,\ [g1[i]\ ==\ g2[i]\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ [0,\ 1,\ 2]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04462}04462\ \ \ \ \ \ \ \ \ assert\_array\_equal(g1\ !=\ g2,\ [g1[i]\ !=\ g2[i]\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ [0,\ 1,\ 2]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04463}04463\ \ \ \ \ \ \ \ \ assert\_array\_equal(g1\ <=\ g2,\ [g1[i]\ <=\ g2[i]\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ [0,\ 1,\ 2]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04464}04464\ \ \ \ \ \ \ \ \ assert\_array\_equal(g1\ >=\ g2,\ [g1[i]\ >=\ g2[i]\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ [0,\ 1,\ 2]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04465}04465\ \ \ \ \ \ \ \ \ assert\_array\_equal(g1\ <\ g2,\ \ [g1[i]\ <\ g2[i]\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ [0,\ 1,\ 2]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04466}04466\ \ \ \ \ \ \ \ \ assert\_array\_equal(g1\ >\ g2,\ \ [g1[i]\ >\ g2[i]\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ [0,\ 1,\ 2]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04467}04467\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04468}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArgmaxArgminCommon}{04468}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArgmaxArgminCommon}{TestArgmaxArgminCommon}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04469}04469\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04470}04470\ \ \ \ \ sizes\ =\ [(),\ (3,),\ (3,\ 2),\ (2,\ 3),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04471}04471\ \ \ \ \ \ \ \ \ \ \ \ \ \ (3,\ 3),\ (2,\ 3,\ 4),\ (4,\ 3,\ 2),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04472}04472\ \ \ \ \ \ \ \ \ \ \ \ \ \ (1,\ 2,\ 3,\ 4),\ (2,\ 3,\ 4,\ 1),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04473}04473\ \ \ \ \ \ \ \ \ \ \ \ \ \ (3,\ 4,\ 1,\ 2),\ (4,\ 1,\ 2,\ 3),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04474}04474\ \ \ \ \ \ \ \ \ \ \ \ \ \ (64,),\ (128,),\ (256,)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04475}04475\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04476}04476\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}size,\ axis"{},\ itertools.chain(*[[(size,\ axis)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04477}04477\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ axis\ \textcolor{keywordflow}{in}\ list(range(-\/len(size),\ len(size)))\ +\ [\textcolor{keywordtype}{None}]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04478}04478\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ size\ \textcolor{keywordflow}{in}\ sizes]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04479}04479\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize('method',\ [np.argmax,\ np.argmin])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04480}04480\ \ \ \ \ \textcolor{keyword}{def\ }test\_np\_argmin\_argmax\_keepdims(self,\ size,\ axis,\ method):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04481}04481\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04482}04482\ \ \ \ \ \ \ \ \ arr\ =\ np.random.normal(size=size)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04483}04483\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04484}04484\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ contiguous\ arrays}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04485}04485\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ axis\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04486}04486\ \ \ \ \ \ \ \ \ \ \ \ \ new\_shape\ =\ [1\ \textcolor{keywordflow}{for}\ \_\ \textcolor{keywordflow}{in}\ range(len(size))]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04487}04487\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04488}04488\ \ \ \ \ \ \ \ \ \ \ \ \ new\_shape\ =\ list(size)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04489}04489\ \ \ \ \ \ \ \ \ \ \ \ \ new\_shape[axis]\ =\ 1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04490}04490\ \ \ \ \ \ \ \ \ new\_shape\ =\ tuple(new\_shape)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04491}04491\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04492}04492\ \ \ \ \ \ \ \ \ \_res\_orig\ =\ method(arr,\ axis=axis)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04493}04493\ \ \ \ \ \ \ \ \ res\_orig\ =\ \_res\_orig.reshape(new\_shape)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04494}04494\ \ \ \ \ \ \ \ \ res\ =\ method(arr,\ axis=axis,\ keepdims=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04495}04495\ \ \ \ \ \ \ \ \ assert\_equal(res,\ res\_orig)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04496}04496\ \ \ \ \ \ \ \ \ assert\_(res.shape\ ==\ new\_shape)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04497}04497\ \ \ \ \ \ \ \ \ outarray\ =\ np.empty(res.shape,\ dtype=res.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04498}04498\ \ \ \ \ \ \ \ \ res1\ =\ method(arr,\ axis=axis,\ out=outarray,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04499}04499\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ keepdims=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04500}04500\ \ \ \ \ \ \ \ \ assert\_(res1\ \textcolor{keywordflow}{is}\ outarray)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04501}04501\ \ \ \ \ \ \ \ \ assert\_equal(res,\ outarray)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04502}04502\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04503}04503\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ len(size)\ >\ 0:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04504}04504\ \ \ \ \ \ \ \ \ \ \ \ \ wrong\_shape\ =\ list(new\_shape)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04505}04505\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ axis\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04506}04506\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ wrong\_shape[axis]\ =\ 2}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04507}04507\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04508}04508\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ wrong\_shape[0]\ =\ 2}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04509}04509\ \ \ \ \ \ \ \ \ \ \ \ \ wrong\_outarray\ =\ np.empty(wrong\_shape,\ dtype=res.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04510}04510\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04511}04511\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ method(arr.T,\ axis=axis,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04512}04512\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ out=wrong\_outarray,\ keepdims=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04513}04513\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04514}04514\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ non-\/contiguous\ arrays}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04515}04515\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ axis\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04516}04516\ \ \ \ \ \ \ \ \ \ \ \ \ new\_shape\ =\ [1\ \textcolor{keywordflow}{for}\ \_\ \textcolor{keywordflow}{in}\ range(len(size))]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04517}04517\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04518}04518\ \ \ \ \ \ \ \ \ \ \ \ \ new\_shape\ =\ list(size)[::-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04519}04519\ \ \ \ \ \ \ \ \ \ \ \ \ new\_shape[axis]\ =\ 1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04520}04520\ \ \ \ \ \ \ \ \ new\_shape\ =\ tuple(new\_shape)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04521}04521\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04522}04522\ \ \ \ \ \ \ \ \ \_res\_orig\ =\ method(arr.T,\ axis=axis)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04523}04523\ \ \ \ \ \ \ \ \ res\_orig\ =\ \_res\_orig.reshape(new\_shape)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04524}04524\ \ \ \ \ \ \ \ \ res\ =\ method(arr.T,\ axis=axis,\ keepdims=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04525}04525\ \ \ \ \ \ \ \ \ assert\_equal(res,\ res\_orig)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04526}04526\ \ \ \ \ \ \ \ \ assert\_(res.shape\ ==\ new\_shape)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04527}04527\ \ \ \ \ \ \ \ \ outarray\ =\ np.empty(new\_shape[::-\/1],\ dtype=res.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04528}04528\ \ \ \ \ \ \ \ \ outarray\ =\ outarray.T}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04529}04529\ \ \ \ \ \ \ \ \ res1\ =\ method(arr.T,\ axis=axis,\ out=outarray,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04530}04530\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ keepdims=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04531}04531\ \ \ \ \ \ \ \ \ assert\_(res1\ \textcolor{keywordflow}{is}\ outarray)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04532}04532\ \ \ \ \ \ \ \ \ assert\_equal(res,\ outarray)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04533}04533\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04534}04534\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ len(size)\ >\ 0:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04535}04535\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ one\ dimension\ lesser\ for\ non-\/zero\ sized}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04536}04536\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ array\ should\ raise\ an\ error}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04537}04537\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04538}04538\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ method(arr[0],\ axis=axis,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04539}04539\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ out=outarray,\ keepdims=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04540}04540\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04541}04541\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ len(size)\ >\ 0:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04542}04542\ \ \ \ \ \ \ \ \ \ \ \ \ wrong\_shape\ =\ list(new\_shape)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04543}04543\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ axis\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04544}04544\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ wrong\_shape[axis]\ =\ 2}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04545}04545\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04546}04546\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ wrong\_shape[0]\ =\ 2}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04547}04547\ \ \ \ \ \ \ \ \ \ \ \ \ wrong\_outarray\ =\ np.empty(wrong\_shape,\ dtype=res.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04548}04548\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04549}04549\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ method(arr.T,\ axis=axis,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04550}04550\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ out=wrong\_outarray,\ keepdims=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04551}04551\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04552}04552\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize('method',\ ['max',\ 'min'])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04553}04553\ \ \ \ \ \textcolor{keyword}{def\ }test\_all(self,\ method):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04554}04554\ \ \ \ \ \ \ \ \ a\ =\ np.random.normal(0,\ 1,\ (4,\ 5,\ 6,\ 7,\ 8))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04555}04555\ \ \ \ \ \ \ \ \ arg\_method\ =\ getattr(a,\ \textcolor{stringliteral}{'arg'}\ +\ method)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04556}04556\ \ \ \ \ \ \ \ \ val\_method\ =\ getattr(a,\ method)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04557}04557\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(a.ndim):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04558}04558\ \ \ \ \ \ \ \ \ \ \ \ \ a\_maxmin\ =\ val\_method(i)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04559}04559\ \ \ \ \ \ \ \ \ \ \ \ \ aarg\_maxmin\ =\ arg\_method(i)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04560}04560\ \ \ \ \ \ \ \ \ \ \ \ \ axes\ =\ list(range(a.ndim))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04561}04561\ \ \ \ \ \ \ \ \ \ \ \ \ axes.remove(i)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04562}04562\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.all(a\_maxmin\ ==\ aarg\_maxmin.choose(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04563}04563\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *a.transpose(i,\ *axes))))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04564}04564\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04565}04565\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize('method',\ ['argmax',\ 'argmin'])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04566}04566\ \ \ \ \ \textcolor{keyword}{def\ }test\_output\_shape(self,\ method):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04567}04567\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ see\ also\ gh-\/616}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04568}04568\ \ \ \ \ \ \ \ \ a\ =\ np.ones((10,\ 5))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04569}04569\ \ \ \ \ \ \ \ \ arg\_method\ =\ getattr(a,\ method)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04570}04570\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ some\ simple\ shape\ mismatches}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04571}04571\ \ \ \ \ \ \ \ \ out\ =\ np.ones(11,\ dtype=np.int\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04572}04572\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ arg\_method,\ -\/1,\ out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04573}04573\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04574}04574\ \ \ \ \ \ \ \ \ out\ =\ np.ones((2,\ 5),\ dtype=np.int\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04575}04575\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ arg\_method,\ -\/1,\ out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04576}04576\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04577}04577\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ these\ could\ be\ relaxed\ possibly\ (used\ to\ allow\ even\ the\ previous)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04578}04578\ \ \ \ \ \ \ \ \ out\ =\ np.ones((1,\ 10),\ dtype=np.int\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04579}04579\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ arg\_method,\ -\/1,\ out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04580}04580\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04581}04581\ \ \ \ \ \ \ \ \ out\ =\ np.ones(10,\ dtype=np.int\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04582}04582\ \ \ \ \ \ \ \ \ arg\_method(-\/1,\ out=out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04583}04583\ \ \ \ \ \ \ \ \ assert\_equal(out,\ arg\_method(-\/1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04584}04584\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04585}04585\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize('ndim',\ [0,\ 1])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04586}04586\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize('method',\ ['argmax',\ 'argmin'])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04587}04587\ \ \ \ \ \textcolor{keyword}{def\ }test\_ret\_is\_out(self,\ ndim,\ method):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04588}04588\ \ \ \ \ \ \ \ \ a\ =\ np.ones((4,)\ +\ (256,)*ndim)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04589}04589\ \ \ \ \ \ \ \ \ arg\_method\ =\ getattr(a,\ method)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04590}04590\ \ \ \ \ \ \ \ \ out\ =\ np.empty((256,)*ndim,\ dtype=np.intp)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04591}04591\ \ \ \ \ \ \ \ \ ret\ =\ arg\_method(axis=0,\ out=out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04592}04592\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ ret\ \textcolor{keywordflow}{is}\ out}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04593}04593\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04594}04594\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{'np\_array,\ method,\ idx,\ val'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04595}04595\ \ \ \ \ \ \ \ \ [(np.zeros,\ \textcolor{stringliteral}{'argmax'},\ 5942,\ \textcolor{stringliteral}{"{}as"{}}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04596}04596\ \ \ \ \ \ \ \ \ \ (np.ones,\ \textcolor{stringliteral}{'argmin'},\ 6001,\ \textcolor{stringliteral}{"{}0"{}})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04597}04597\ \ \ \ \ \textcolor{keyword}{def\ }test\_unicode(self,\ np\_array,\ method,\ idx,\ val):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04598}04598\ \ \ \ \ \ \ \ \ d\ =\ np\_array(6031,\ dtype=\textcolor{stringliteral}{'<U9'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04599}04599\ \ \ \ \ \ \ \ \ arg\_method\ =\ getattr(d,\ method)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04600}04600\ \ \ \ \ \ \ \ \ d[idx]\ =\ val}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04601}04601\ \ \ \ \ \ \ \ \ assert\_equal(arg\_method(),\ idx)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04602}04602\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04603}04603\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{'arr\_method,\ np\_method'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04604}04604\ \ \ \ \ \ \ \ \ [(\textcolor{stringliteral}{'argmax'},\ np.argmax),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04605}04605\ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'argmin'},\ np.argmin)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04606}04606\ \ \ \ \ \textcolor{keyword}{def\ }test\_np\_vs\_ndarray(self,\ arr\_method,\ np\_method):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04607}04607\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ make\ sure\ both\ ndarray.argmax/argmin\ and}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04608}04608\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ numpy.argmax/argmin\ support\ out/axis\ args}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04609}04609\ \ \ \ \ \ \ \ \ a\ =\ np.random.normal(size=(2,\ 3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04610}04610\ \ \ \ \ \ \ \ \ arg\_method\ =\ getattr(a,\ arr\_method)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04611}04611\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04612}04612\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ positional\ args}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04613}04613\ \ \ \ \ \ \ \ \ out1\ =\ np.zeros(2,\ dtype=int)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04614}04614\ \ \ \ \ \ \ \ \ out2\ =\ np.zeros(2,\ dtype=int)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04615}04615\ \ \ \ \ \ \ \ \ assert\_equal(arg\_method(1,\ out1),\ np\_method(a,\ 1,\ out2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04616}04616\ \ \ \ \ \ \ \ \ assert\_equal(out1,\ out2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04617}04617\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04618}04618\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ keyword\ args}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04619}04619\ \ \ \ \ \ \ \ \ out1\ =\ np.zeros(3,\ dtype=int)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04620}04620\ \ \ \ \ \ \ \ \ out2\ =\ np.zeros(3,\ dtype=int)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04621}04621\ \ \ \ \ \ \ \ \ assert\_equal(arg\_method(out=out1,\ axis=0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04622}04622\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np\_method(a,\ out=out2,\ axis=0))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04623}04623\ \ \ \ \ \ \ \ \ assert\_equal(out1,\ out2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04624}04624\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04625}04625\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.leaks\_references(reason="{}replaces\ None\ with\ NULL."{})}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04626}04626\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{'method,\ vals'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04627}04627\ \ \ \ \ \ \ \ \ [(\textcolor{stringliteral}{'argmax'},\ (10,\ 30)),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04628}04628\ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'argmin'},\ (30,\ 10))])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04629}04629\ \ \ \ \ \textcolor{keyword}{def\ }test\_object\_with\_NULLs(self,\ method,\ vals):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04630}04630\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ See\ gh-\/6032}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04631}04631\ \ \ \ \ \ \ \ \ a\ =\ np.empty(4,\ dtype=\textcolor{stringliteral}{'O'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04632}04632\ \ \ \ \ \ \ \ \ arg\_method\ =\ getattr(a,\ method)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04633}04633\ \ \ \ \ \ \ \ \ ctypes.memset(a.ctypes.data,\ 0,\ a.nbytes)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04634}04634\ \ \ \ \ \ \ \ \ assert\_equal(arg\_method(),\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04635}04635\ \ \ \ \ \ \ \ \ a[3]\ =\ vals[0]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04636}04636\ \ \ \ \ \ \ \ \ assert\_equal(arg\_method(),\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04637}04637\ \ \ \ \ \ \ \ \ a[1]\ =\ vals[1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04638}04638\ \ \ \ \ \ \ \ \ assert\_equal(arg\_method(),\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04639}04639\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04640}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArgmax}{04640}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArgmax}{TestArgmax}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04641}04641\ \ \ \ \ usg\_data\ =\ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04642}04642\ \ \ \ \ \ \ \ \ ([1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 0,\ 0,\ 0,\ 0,\ 0,\ 0,\ 0],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04643}04643\ \ \ \ \ \ \ \ \ ([3,\ 3,\ 3,\ 3,\ \ 2,\ \ 2,\ \ 2,\ \ 2],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04644}04644\ \ \ \ \ \ \ \ \ ([0,\ 1,\ 2,\ 3,\ \ 4,\ \ 5,\ \ 6,\ \ 7],\ 7),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04645}04645\ \ \ \ \ \ \ \ \ ([7,\ 6,\ 5,\ 4,\ \ 3,\ \ 2,\ \ 1,\ \ 0],\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04646}04646\ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04647}04647\ \ \ \ \ sg\_data\ =\ usg\_data\ +\ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04648}04648\ \ \ \ \ \ \ \ \ ([1,\ 2,\ 3,\ 4,\ -\/4,\ -\/3,\ -\/2,\ -\/1],\ 3),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04649}04649\ \ \ \ \ \ \ \ \ ([1,\ 2,\ 3,\ 4,\ -\/1,\ -\/2,\ -\/3,\ -\/4],\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04650}04650\ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04651}04651\ \ \ \ \ darr\ =\ [(np.array(d[0],\ dtype=t),\ d[1])\ \textcolor{keywordflow}{for}\ d,\ t\ \textcolor{keywordflow}{in}\ (}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04652}04652\ \ \ \ \ \ \ \ \ itertools.product(usg\_data,\ (}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04653}04653\ \ \ \ \ \ \ \ \ \ \ \ \ np.uint8,\ np.uint16,\ np.uint32,\ np.uint64}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04654}04654\ \ \ \ \ \ \ \ \ ))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04655}04655\ \ \ \ \ )]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04656}04656\ \ \ \ \ darr\ =\ darr\ +\ [(np.array(d[0],\ dtype=t),\ d[1])\ \textcolor{keywordflow}{for}\ d,\ t\ \textcolor{keywordflow}{in}\ (}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04657}04657\ \ \ \ \ \ \ \ \ itertools.product(sg\_data,\ (}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04658}04658\ \ \ \ \ \ \ \ \ \ \ \ \ np.int8,\ np.int16,\ np.int32,\ np.int64,\ np.float32,\ np.float64}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04659}04659\ \ \ \ \ \ \ \ \ ))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04660}04660\ \ \ \ \ )]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04661}04661\ \ \ \ \ darr\ =\ darr\ +\ [(np.array(d[0],\ dtype=t),\ d[1])\ \textcolor{keywordflow}{for}\ d,\ t\ \textcolor{keywordflow}{in}\ (}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04662}04662\ \ \ \ \ \ \ \ \ itertools.product((}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04663}04663\ \ \ \ \ \ \ \ \ \ \ \ \ ([0,\ 1,\ 2,\ 3,\ np.nan],\ 4),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04664}04664\ \ \ \ \ \ \ \ \ \ \ \ \ ([0,\ 1,\ 2,\ np.nan,\ 3],\ 3),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04665}04665\ \ \ \ \ \ \ \ \ \ \ \ \ ([np.nan,\ 0,\ 1,\ 2,\ 3],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04666}04666\ \ \ \ \ \ \ \ \ \ \ \ \ ([np.nan,\ 0,\ np.nan,\ 2,\ 3],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04667}04667\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ To\ hit\ the\ tail\ of\ SIMD\ multi-\/level(x4,\ x1)\ inner\ loops}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04668}04668\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ on\ variant\ SIMD\ widthes}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04669}04669\ \ \ \ \ \ \ \ \ \ \ \ \ ([1]\ *\ (2*5-\/1)\ +\ [np.nan],\ 2*5-\/1),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04670}04670\ \ \ \ \ \ \ \ \ \ \ \ \ ([1]\ *\ (4*5-\/1)\ +\ [np.nan],\ 4*5-\/1),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04671}04671\ \ \ \ \ \ \ \ \ \ \ \ \ ([1]\ *\ (8*5-\/1)\ +\ [np.nan],\ 8*5-\/1),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04672}04672\ \ \ \ \ \ \ \ \ \ \ \ \ ([1]\ *\ (16*5-\/1)\ +\ [np.nan],\ 16*5-\/1),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04673}04673\ \ \ \ \ \ \ \ \ \ \ \ \ ([1]\ *\ (32*5-\/1)\ +\ [np.nan],\ 32*5-\/1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04674}04674\ \ \ \ \ \ \ \ \ ),\ (}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04675}04675\ \ \ \ \ \ \ \ \ \ \ \ \ np.float32,\ np.float64}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04676}04676\ \ \ \ \ \ \ \ \ ))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04677}04677\ \ \ \ \ )]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04678}04678\ \ \ \ \ nan\_arr\ =\ darr\ +\ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04679}04679\ \ \ \ \ \ \ \ \ ([0,\ 1,\ 2,\ 3,\ complex(0,\ np.nan)],\ 4),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04680}04680\ \ \ \ \ \ \ \ \ ([0,\ 1,\ 2,\ 3,\ complex(np.nan,\ 0)],\ 4),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04681}04681\ \ \ \ \ \ \ \ \ ([0,\ 1,\ 2,\ complex(np.nan,\ 0),\ 3],\ 3),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04682}04682\ \ \ \ \ \ \ \ \ ([0,\ 1,\ 2,\ complex(0,\ np.nan),\ 3],\ 3),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04683}04683\ \ \ \ \ \ \ \ \ ([complex(0,\ np.nan),\ 0,\ 1,\ 2,\ 3],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04684}04684\ \ \ \ \ \ \ \ \ ([complex(np.nan,\ np.nan),\ 0,\ 1,\ 2,\ 3],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04685}04685\ \ \ \ \ \ \ \ \ ([complex(np.nan,\ 0),\ complex(np.nan,\ 2),\ complex(np.nan,\ 1)],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04686}04686\ \ \ \ \ \ \ \ \ ([complex(np.nan,\ np.nan),\ complex(np.nan,\ 2),\ complex(np.nan,\ 1)],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04687}04687\ \ \ \ \ \ \ \ \ ([complex(np.nan,\ 0),\ complex(np.nan,\ 2),\ complex(np.nan,\ np.nan)],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04688}04688\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04689}04689\ \ \ \ \ \ \ \ \ ([complex(0,\ 0),\ complex(0,\ 2),\ complex(0,\ 1)],\ 1),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04690}04690\ \ \ \ \ \ \ \ \ ([complex(1,\ 0),\ complex(0,\ 2),\ complex(0,\ 1)],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04691}04691\ \ \ \ \ \ \ \ \ ([complex(1,\ 0),\ complex(0,\ 2),\ complex(1,\ 1)],\ 2),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04692}04692\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04693}04693\ \ \ \ \ \ \ \ \ ([np.datetime64(\textcolor{stringliteral}{'1923-\/04-\/14T12:43:12'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04694}04694\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'1994-\/06-\/21T14:43:15'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04695}04695\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'2001-\/10-\/15T04:10:32'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04696}04696\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'1995-\/11-\/25T16:02:16'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04697}04697\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'2005-\/01-\/04T03:14:12'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04698}04698\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'2041-\/12-\/03T14:05:03'})],\ 5),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04699}04699\ \ \ \ \ \ \ \ \ ([np.datetime64(\textcolor{stringliteral}{'1935-\/09-\/14T04:40:11'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04700}04700\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'1949-\/10-\/12T12:32:11'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04701}04701\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'2010-\/01-\/03T05:14:12'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04702}04702\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'2015-\/11-\/20T12:20:59'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04703}04703\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'1932-\/09-\/23T10:10:13'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04704}04704\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'2014-\/10-\/10T03:50:30'})],\ 3),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04705}04705\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Assorted\ tests\ with\ NaTs}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04706}04706\ \ \ \ \ \ \ \ \ ([np.datetime64(\textcolor{stringliteral}{'NaT'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04707}04707\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'NaT'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04708}04708\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'2010-\/01-\/03T05:14:12'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04709}04709\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'NaT'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04710}04710\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'2015-\/09-\/23T10:10:13'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04711}04711\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'1932-\/10-\/10T03:50:30'})],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04712}04712\ \ \ \ \ \ \ \ \ ([np.datetime64(\textcolor{stringliteral}{'2059-\/03-\/14T12:43:12'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04713}04713\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'1996-\/09-\/21T14:43:15'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04714}04714\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'NaT'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04715}04715\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'2022-\/12-\/25T16:02:16'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04716}04716\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'1963-\/10-\/04T03:14:12'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04717}04717\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'2013-\/05-\/08T18:15:23'})],\ 2),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04718}04718\ \ \ \ \ \ \ \ \ ([np.timedelta64(2,\ \textcolor{stringliteral}{'s'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04719}04719\ \ \ \ \ \ \ \ \ \ \ np.timedelta64(1,\ \textcolor{stringliteral}{'s'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04720}04720\ \ \ \ \ \ \ \ \ \ \ np.timedelta64(\textcolor{stringliteral}{'NaT'},\ \textcolor{stringliteral}{'s'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04721}04721\ \ \ \ \ \ \ \ \ \ \ np.timedelta64(3,\ \textcolor{stringliteral}{'s'})],\ 2),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04722}04722\ \ \ \ \ \ \ \ \ ([np.timedelta64(\textcolor{stringliteral}{'NaT'},\ \textcolor{stringliteral}{'s'})]\ *\ 3,\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04723}04723\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04724}04724\ \ \ \ \ \ \ \ \ ([timedelta(days=5,\ seconds=14),\ timedelta(days=2,\ seconds=35),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04725}04725\ \ \ \ \ \ \ \ \ \ \ timedelta(days=-\/1,\ seconds=23)],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04726}04726\ \ \ \ \ \ \ \ \ ([timedelta(days=1,\ seconds=43),\ timedelta(days=10,\ seconds=5),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04727}04727\ \ \ \ \ \ \ \ \ \ \ timedelta(days=5,\ seconds=14)],\ 1),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04728}04728\ \ \ \ \ \ \ \ \ ([timedelta(days=10,\ seconds=24),\ timedelta(days=10,\ seconds=5),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04729}04729\ \ \ \ \ \ \ \ \ \ \ timedelta(days=10,\ seconds=43)],\ 2),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04730}04730\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04731}04731\ \ \ \ \ \ \ \ \ ([\textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True}],\ 4),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04732}04732\ \ \ \ \ \ \ \ \ ([\textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False}],\ 3),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04733}04733\ \ \ \ \ \ \ \ \ ([\textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False}],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04734}04734\ \ \ \ \ \ \ \ \ ([\textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False}],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04735}04735\ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04736}04736\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04737}04737\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize('data',\ nan\_arr)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04738}04738\ \ \ \ \ \textcolor{keyword}{def\ }test\_combinations(self,\ data):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04739}04739\ \ \ \ \ \ \ \ \ arr,\ pos\ =\ data}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04740}04740\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ \mbox{\hyperlink{classnumpy_1_1testing_1_1__private_1_1utils_1_1suppress__warnings}{suppress\_warnings}}()\ \textcolor{keyword}{as}\ sup:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04741}04741\ \ \ \ \ \ \ \ \ \ \ \ \ sup.filter(RuntimeWarning,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04742}04742\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}invalid\ value\ encountered\ in\ reduce"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04743}04743\ \ \ \ \ \ \ \ \ \ \ \ \ val\ =\ np.max(arr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04744}04744\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04745}04745\ \ \ \ \ \ \ \ \ assert\_equal(np.argmax(arr),\ pos,\ err\_msg=\textcolor{stringliteral}{"{}\%r"{}}\ \%\ arr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04746}04746\ \ \ \ \ \ \ \ \ assert\_equal(arr[np.argmax(arr)],\ val,\ err\_msg=\textcolor{stringliteral}{"{}\%r"{}}\ \%\ arr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04747}04747\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04748}04748\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ add\ padding\ to\ test\ SIMD\ loops}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04749}04749\ \ \ \ \ \ \ \ \ rarr\ =\ np.repeat(arr,\ 129)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04750}04750\ \ \ \ \ \ \ \ \ rpos\ =\ pos\ *\ 129}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04751}04751\ \ \ \ \ \ \ \ \ assert\_equal(np.argmax(rarr),\ rpos,\ err\_msg=\textcolor{stringliteral}{"{}\%r"{}}\ \%\ rarr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04752}04752\ \ \ \ \ \ \ \ \ assert\_equal(rarr[np.argmax(rarr)],\ val,\ err\_msg=\textcolor{stringliteral}{"{}\%r"{}}\ \%\ rarr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04753}04753\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04754}04754\ \ \ \ \ \ \ \ \ padd\ =\ np.repeat(np.min(arr),\ 513)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04755}04755\ \ \ \ \ \ \ \ \ rarr\ =\ np.concatenate((arr,\ padd))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04756}04756\ \ \ \ \ \ \ \ \ rpos\ =\ pos}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04757}04757\ \ \ \ \ \ \ \ \ assert\_equal(np.argmax(rarr),\ rpos,\ err\_msg=\textcolor{stringliteral}{"{}\%r"{}}\ \%\ rarr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04758}04758\ \ \ \ \ \ \ \ \ assert\_equal(rarr[np.argmax(rarr)],\ val,\ err\_msg=\textcolor{stringliteral}{"{}\%r"{}}\ \%\ rarr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04759}04759\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04760}04760\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04761}04761\ \ \ \ \ \textcolor{keyword}{def\ }test\_maximum\_signed\_integers(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04762}04762\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04763}04763\ \ \ \ \ \ \ \ \ a\ =\ np.array([1,\ 2**7\ -\/\ 1,\ -\/2**7],\ dtype=np.int8)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04764}04764\ \ \ \ \ \ \ \ \ assert\_equal(np.argmax(a),\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04765}04765\ \ \ \ \ \ \ \ \ a\ =\ a.repeat(129)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04766}04766\ \ \ \ \ \ \ \ \ assert\_equal(np.argmax(a),\ 129)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04767}04767\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04768}04768\ \ \ \ \ \ \ \ \ a\ =\ np.array([1,\ 2**15\ -\/\ 1,\ -\/2**15],\ dtype=np.int16)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04769}04769\ \ \ \ \ \ \ \ \ assert\_equal(np.argmax(a),\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04770}04770\ \ \ \ \ \ \ \ \ a\ =\ a.repeat(129)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04771}04771\ \ \ \ \ \ \ \ \ assert\_equal(np.argmax(a),\ 129)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04772}04772\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04773}04773\ \ \ \ \ \ \ \ \ a\ =\ np.array([1,\ 2**31\ -\/\ 1,\ -\/2**31],\ dtype=np.int32)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04774}04774\ \ \ \ \ \ \ \ \ assert\_equal(np.argmax(a),\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04775}04775\ \ \ \ \ \ \ \ \ a\ =\ a.repeat(129)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04776}04776\ \ \ \ \ \ \ \ \ assert\_equal(np.argmax(a),\ 129)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04777}04777\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04778}04778\ \ \ \ \ \ \ \ \ a\ =\ np.array([1,\ 2**63\ -\/\ 1,\ -\/2**63],\ dtype=np.int64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04779}04779\ \ \ \ \ \ \ \ \ assert\_equal(np.argmax(a),\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04780}04780\ \ \ \ \ \ \ \ \ a\ =\ a.repeat(129)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04781}04781\ \ \ \ \ \ \ \ \ assert\_equal(np.argmax(a),\ 129)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04782}04782\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04783}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArgmin}{04783}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArgmin}{TestArgmin}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04784}04784\ \ \ \ \ usg\_data\ =\ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04785}04785\ \ \ \ \ \ \ \ \ ([1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 0,\ 0,\ 0,\ 0,\ 0,\ 0,\ 0],\ 8),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04786}04786\ \ \ \ \ \ \ \ \ ([3,\ 3,\ 3,\ 3,\ \ 2,\ \ 2,\ \ 2,\ \ 2],\ 4),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04787}04787\ \ \ \ \ \ \ \ \ ([0,\ 1,\ 2,\ 3,\ \ 4,\ \ 5,\ \ 6,\ \ 7],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04788}04788\ \ \ \ \ \ \ \ \ ([7,\ 6,\ 5,\ 4,\ \ 3,\ \ 2,\ \ 1,\ \ 0],\ 7)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04789}04789\ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04790}04790\ \ \ \ \ sg\_data\ =\ usg\_data\ +\ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04791}04791\ \ \ \ \ \ \ \ \ ([1,\ 2,\ 3,\ 4,\ -\/4,\ -\/3,\ -\/2,\ -\/1],\ 4),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04792}04792\ \ \ \ \ \ \ \ \ ([1,\ 2,\ 3,\ 4,\ -\/1,\ -\/2,\ -\/3,\ -\/4],\ 7)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04793}04793\ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04794}04794\ \ \ \ \ darr\ =\ [(np.array(d[0],\ dtype=t),\ d[1])\ \textcolor{keywordflow}{for}\ d,\ t\ \textcolor{keywordflow}{in}\ (}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04795}04795\ \ \ \ \ \ \ \ \ itertools.product(usg\_data,\ (}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04796}04796\ \ \ \ \ \ \ \ \ \ \ \ \ np.uint8,\ np.uint16,\ np.uint32,\ np.uint64}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04797}04797\ \ \ \ \ \ \ \ \ ))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04798}04798\ \ \ \ \ )]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04799}04799\ \ \ \ \ darr\ =\ darr\ +\ [(np.array(d[0],\ dtype=t),\ d[1])\ \textcolor{keywordflow}{for}\ d,\ t\ \textcolor{keywordflow}{in}\ (}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04800}04800\ \ \ \ \ \ \ \ \ itertools.product(sg\_data,\ (}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04801}04801\ \ \ \ \ \ \ \ \ \ \ \ \ np.int8,\ np.int16,\ np.int32,\ np.int64,\ np.float32,\ np.float64}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04802}04802\ \ \ \ \ \ \ \ \ ))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04803}04803\ \ \ \ \ )]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04804}04804\ \ \ \ \ darr\ =\ darr\ +\ [(np.array(d[0],\ dtype=t),\ d[1])\ \textcolor{keywordflow}{for}\ d,\ t\ \textcolor{keywordflow}{in}\ (}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04805}04805\ \ \ \ \ \ \ \ \ itertools.product((}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04806}04806\ \ \ \ \ \ \ \ \ \ \ \ \ ([0,\ 1,\ 2,\ 3,\ np.nan],\ 4),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04807}04807\ \ \ \ \ \ \ \ \ \ \ \ \ ([0,\ 1,\ 2,\ np.nan,\ 3],\ 3),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04808}04808\ \ \ \ \ \ \ \ \ \ \ \ \ ([np.nan,\ 0,\ 1,\ 2,\ 3],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04809}04809\ \ \ \ \ \ \ \ \ \ \ \ \ ([np.nan,\ 0,\ np.nan,\ 2,\ 3],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04810}04810\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ To\ hit\ the\ tail\ of\ SIMD\ multi-\/level(x4,\ x1)\ inner\ loops}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04811}04811\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ on\ variant\ SIMD\ widthes}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04812}04812\ \ \ \ \ \ \ \ \ \ \ \ \ ([1]\ *\ (2*5-\/1)\ +\ [np.nan],\ 2*5-\/1),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04813}04813\ \ \ \ \ \ \ \ \ \ \ \ \ ([1]\ *\ (4*5-\/1)\ +\ [np.nan],\ 4*5-\/1),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04814}04814\ \ \ \ \ \ \ \ \ \ \ \ \ ([1]\ *\ (8*5-\/1)\ +\ [np.nan],\ 8*5-\/1),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04815}04815\ \ \ \ \ \ \ \ \ \ \ \ \ ([1]\ *\ (16*5-\/1)\ +\ [np.nan],\ 16*5-\/1),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04816}04816\ \ \ \ \ \ \ \ \ \ \ \ \ ([1]\ *\ (32*5-\/1)\ +\ [np.nan],\ 32*5-\/1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04817}04817\ \ \ \ \ \ \ \ \ ),\ (}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04818}04818\ \ \ \ \ \ \ \ \ \ \ \ \ np.float32,\ np.float64}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04819}04819\ \ \ \ \ \ \ \ \ ))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04820}04820\ \ \ \ \ )]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04821}04821\ \ \ \ \ nan\_arr\ =\ darr\ +\ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04822}04822\ \ \ \ \ \ \ \ \ ([0,\ 1,\ 2,\ 3,\ complex(0,\ np.nan)],\ 4),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04823}04823\ \ \ \ \ \ \ \ \ ([0,\ 1,\ 2,\ 3,\ complex(np.nan,\ 0)],\ 4),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04824}04824\ \ \ \ \ \ \ \ \ ([0,\ 1,\ 2,\ complex(np.nan,\ 0),\ 3],\ 3),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04825}04825\ \ \ \ \ \ \ \ \ ([0,\ 1,\ 2,\ complex(0,\ np.nan),\ 3],\ 3),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04826}04826\ \ \ \ \ \ \ \ \ ([complex(0,\ np.nan),\ 0,\ 1,\ 2,\ 3],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04827}04827\ \ \ \ \ \ \ \ \ ([complex(np.nan,\ np.nan),\ 0,\ 1,\ 2,\ 3],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04828}04828\ \ \ \ \ \ \ \ \ ([complex(np.nan,\ 0),\ complex(np.nan,\ 2),\ complex(np.nan,\ 1)],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04829}04829\ \ \ \ \ \ \ \ \ ([complex(np.nan,\ np.nan),\ complex(np.nan,\ 2),\ complex(np.nan,\ 1)],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04830}04830\ \ \ \ \ \ \ \ \ ([complex(np.nan,\ 0),\ complex(np.nan,\ 2),\ complex(np.nan,\ np.nan)],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04831}04831\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04832}04832\ \ \ \ \ \ \ \ \ ([complex(0,\ 0),\ complex(0,\ 2),\ complex(0,\ 1)],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04833}04833\ \ \ \ \ \ \ \ \ ([complex(1,\ 0),\ complex(0,\ 2),\ complex(0,\ 1)],\ 2),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04834}04834\ \ \ \ \ \ \ \ \ ([complex(1,\ 0),\ complex(0,\ 2),\ complex(1,\ 1)],\ 1),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04835}04835\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04836}04836\ \ \ \ \ \ \ \ \ ([np.datetime64(\textcolor{stringliteral}{'1923-\/04-\/14T12:43:12'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04837}04837\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'1994-\/06-\/21T14:43:15'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04838}04838\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'2001-\/10-\/15T04:10:32'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04839}04839\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'1995-\/11-\/25T16:02:16'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04840}04840\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'2005-\/01-\/04T03:14:12'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04841}04841\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'2041-\/12-\/03T14:05:03'})],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04842}04842\ \ \ \ \ \ \ \ \ ([np.datetime64(\textcolor{stringliteral}{'1935-\/09-\/14T04:40:11'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04843}04843\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'1949-\/10-\/12T12:32:11'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04844}04844\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'2010-\/01-\/03T05:14:12'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04845}04845\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'2014-\/11-\/20T12:20:59'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04846}04846\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'2015-\/09-\/23T10:10:13'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04847}04847\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'1932-\/10-\/10T03:50:30'})],\ 5),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04848}04848\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Assorted\ tests\ with\ NaTs}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04849}04849\ \ \ \ \ \ \ \ \ ([np.datetime64(\textcolor{stringliteral}{'NaT'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04850}04850\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'NaT'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04851}04851\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'2010-\/01-\/03T05:14:12'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04852}04852\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'NaT'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04853}04853\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'2015-\/09-\/23T10:10:13'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04854}04854\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'1932-\/10-\/10T03:50:30'})],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04855}04855\ \ \ \ \ \ \ \ \ ([np.datetime64(\textcolor{stringliteral}{'2059-\/03-\/14T12:43:12'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04856}04856\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'1996-\/09-\/21T14:43:15'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04857}04857\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'NaT'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04858}04858\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'2022-\/12-\/25T16:02:16'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04859}04859\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'1963-\/10-\/04T03:14:12'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04860}04860\ \ \ \ \ \ \ \ \ \ \ np.datetime64(\textcolor{stringliteral}{'2013-\/05-\/08T18:15:23'})],\ 2),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04861}04861\ \ \ \ \ \ \ \ \ ([np.timedelta64(2,\ \textcolor{stringliteral}{'s'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04862}04862\ \ \ \ \ \ \ \ \ \ \ np.timedelta64(1,\ \textcolor{stringliteral}{'s'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04863}04863\ \ \ \ \ \ \ \ \ \ \ np.timedelta64(\textcolor{stringliteral}{'NaT'},\ \textcolor{stringliteral}{'s'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04864}04864\ \ \ \ \ \ \ \ \ \ \ np.timedelta64(3,\ \textcolor{stringliteral}{'s'})],\ 2),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04865}04865\ \ \ \ \ \ \ \ \ ([np.timedelta64(\textcolor{stringliteral}{'NaT'},\ \textcolor{stringliteral}{'s'})]\ *\ 3,\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04866}04866\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04867}04867\ \ \ \ \ \ \ \ \ ([timedelta(days=5,\ seconds=14),\ timedelta(days=2,\ seconds=35),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04868}04868\ \ \ \ \ \ \ \ \ \ \ timedelta(days=-\/1,\ seconds=23)],\ 2),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04869}04869\ \ \ \ \ \ \ \ \ ([timedelta(days=1,\ seconds=43),\ timedelta(days=10,\ seconds=5),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04870}04870\ \ \ \ \ \ \ \ \ \ \ timedelta(days=5,\ seconds=14)],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04871}04871\ \ \ \ \ \ \ \ \ ([timedelta(days=10,\ seconds=24),\ timedelta(days=10,\ seconds=5),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04872}04872\ \ \ \ \ \ \ \ \ \ \ timedelta(days=10,\ seconds=43)],\ 1),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04873}04873\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04874}04874\ \ \ \ \ \ \ \ \ ([\textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False}],\ 4),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04875}04875\ \ \ \ \ \ \ \ \ ([\textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True}],\ 3),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04876}04876\ \ \ \ \ \ \ \ \ ([\textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{True}],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04877}04877\ \ \ \ \ \ \ \ \ ([\textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{True}],\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04878}04878\ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04879}04879\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04880}04880\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize('data',\ nan\_arr)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04881}04881\ \ \ \ \ \textcolor{keyword}{def\ }test\_combinations(self,\ data):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04882}04882\ \ \ \ \ \ \ \ \ arr,\ pos\ =\ data}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04883}04883\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ \mbox{\hyperlink{classnumpy_1_1testing_1_1__private_1_1utils_1_1suppress__warnings}{suppress\_warnings}}()\ \textcolor{keyword}{as}\ sup:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04884}04884\ \ \ \ \ \ \ \ \ \ \ \ \ sup.filter(RuntimeWarning,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04885}04885\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}invalid\ value\ encountered\ in\ reduce"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04886}04886\ \ \ \ \ \ \ \ \ \ \ \ \ min\_val\ =\ np.min(arr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04887}04887\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04888}04888\ \ \ \ \ \ \ \ \ assert\_equal(np.argmin(arr),\ pos,\ err\_msg=\textcolor{stringliteral}{"{}\%r"{}}\ \%\ arr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04889}04889\ \ \ \ \ \ \ \ \ assert\_equal(arr[np.argmin(arr)],\ min\_val,\ err\_msg=\textcolor{stringliteral}{"{}\%r"{}}\ \%\ arr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04890}04890\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04891}04891\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ add\ padding\ to\ test\ SIMD\ loops}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04892}04892\ \ \ \ \ \ \ \ \ rarr\ =\ np.repeat(arr,\ 129)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04893}04893\ \ \ \ \ \ \ \ \ rpos\ =\ pos\ *\ 129}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04894}04894\ \ \ \ \ \ \ \ \ assert\_equal(np.argmin(rarr),\ rpos,\ err\_msg=\textcolor{stringliteral}{"{}\%r"{}}\ \%\ rarr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04895}04895\ \ \ \ \ \ \ \ \ assert\_equal(rarr[np.argmin(rarr)],\ min\_val,\ err\_msg=\textcolor{stringliteral}{"{}\%r"{}}\ \%\ rarr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04896}04896\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04897}04897\ \ \ \ \ \ \ \ \ padd\ =\ np.repeat(np.max(arr),\ 513)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04898}04898\ \ \ \ \ \ \ \ \ rarr\ =\ np.concatenate((arr,\ padd))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04899}04899\ \ \ \ \ \ \ \ \ rpos\ =\ pos}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04900}04900\ \ \ \ \ \ \ \ \ assert\_equal(np.argmin(rarr),\ rpos,\ err\_msg=\textcolor{stringliteral}{"{}\%r"{}}\ \%\ rarr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04901}04901\ \ \ \ \ \ \ \ \ assert\_equal(rarr[np.argmin(rarr)],\ min\_val,\ err\_msg=\textcolor{stringliteral}{"{}\%r"{}}\ \%\ rarr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04902}04902\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04903}04903\ \ \ \ \ \textcolor{keyword}{def\ }test\_minimum\_signed\_integers(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04904}04904\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04905}04905\ \ \ \ \ \ \ \ \ a\ =\ np.array([1,\ -\/2**7,\ -\/2**7\ +\ 1,\ 2**7\ -\/\ 1],\ dtype=np.int8)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04906}04906\ \ \ \ \ \ \ \ \ assert\_equal(np.argmin(a),\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04907}04907\ \ \ \ \ \ \ \ \ a\ =\ a.repeat(129)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04908}04908\ \ \ \ \ \ \ \ \ assert\_equal(np.argmin(a),\ 129)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04909}04909\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04910}04910\ \ \ \ \ \ \ \ \ a\ =\ np.array([1,\ -\/2**15,\ -\/2**15\ +\ 1,\ 2**15\ -\/\ 1],\ dtype=np.int16)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04911}04911\ \ \ \ \ \ \ \ \ assert\_equal(np.argmin(a),\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04912}04912\ \ \ \ \ \ \ \ \ a\ =\ a.repeat(129)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04913}04913\ \ \ \ \ \ \ \ \ assert\_equal(np.argmin(a),\ 129)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04914}04914\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04915}04915\ \ \ \ \ \ \ \ \ a\ =\ np.array([1,\ -\/2**31,\ -\/2**31\ +\ 1,\ 2**31\ -\/\ 1],\ dtype=np.int32)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04916}04916\ \ \ \ \ \ \ \ \ assert\_equal(np.argmin(a),\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04917}04917\ \ \ \ \ \ \ \ \ a\ =\ a.repeat(129)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04918}04918\ \ \ \ \ \ \ \ \ assert\_equal(np.argmin(a),\ 129)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04919}04919\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04920}04920\ \ \ \ \ \ \ \ \ a\ =\ np.array([1,\ -\/2**63,\ -\/2**63\ +\ 1,\ 2**63\ -\/\ 1],\ dtype=np.int64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04921}04921\ \ \ \ \ \ \ \ \ assert\_equal(np.argmin(a),\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04922}04922\ \ \ \ \ \ \ \ \ a\ =\ a.repeat(129)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04923}04923\ \ \ \ \ \ \ \ \ assert\_equal(np.argmin(a),\ 129)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04924}04924\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04925}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMinMax}{04925}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMinMax}{TestMinMax}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04926}04926\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04927}04927\ \ \ \ \ \textcolor{keyword}{def\ }test\_scalar(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04928}04928\ \ \ \ \ \ \ \ \ assert\_raises(np.AxisError,\ np.amax,\ 1,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04929}04929\ \ \ \ \ \ \ \ \ assert\_raises(np.AxisError,\ np.amin,\ 1,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04930}04930\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04931}04931\ \ \ \ \ \ \ \ \ assert\_equal(np.amax(1,\ axis=0),\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04932}04932\ \ \ \ \ \ \ \ \ assert\_equal(np.amin(1,\ axis=0),\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04933}04933\ \ \ \ \ \ \ \ \ assert\_equal(np.amax(1,\ axis=\textcolor{keywordtype}{None}),\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04934}04934\ \ \ \ \ \ \ \ \ assert\_equal(np.amin(1,\ axis=\textcolor{keywordtype}{None}),\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04935}04935\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04936}04936\ \ \ \ \ \textcolor{keyword}{def\ }test\_axis(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04937}04937\ \ \ \ \ \ \ \ \ assert\_raises(np.AxisError,\ np.amax,\ [1,\ 2,\ 3],\ 1000)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04938}04938\ \ \ \ \ \ \ \ \ assert\_equal(np.amax([[1,\ 2,\ 3]],\ axis=1),\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04939}04939\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04940}04940\ \ \ \ \ \textcolor{keyword}{def\ }test\_datetime(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04941}04941\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Do\ not\ ignore\ NaT}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04942}04942\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dtype\ \textcolor{keywordflow}{in}\ (\textcolor{stringliteral}{'m8[s]'},\ \textcolor{stringliteral}{'m8[Y]'}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04943}04943\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.arange(10).astype(dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04944}04944\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.amin(a),\ a[0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04945}04945\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.amax(a),\ a[9])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04946}04946\ \ \ \ \ \ \ \ \ \ \ \ \ a[3]\ =\ \textcolor{stringliteral}{'NaT'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04947}04947\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.amin(a),\ a[3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04948}04948\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.amax(a),\ a[3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04949}04949\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04950}04950\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04951}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewaxis}{04951}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewaxis}{TestNewaxis}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04952}04952\ \ \ \ \ \textcolor{keyword}{def\ }test\_basic(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04953}04953\ \ \ \ \ \ \ \ \ sk\ =\ np.array([0,\ -\/0.1,\ 0.1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04954}04954\ \ \ \ \ \ \ \ \ res\ =\ 250*sk[:,\ np.newaxis]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04955}04955\ \ \ \ \ \ \ \ \ assert\_almost\_equal(res.ravel(),\ 250*sk)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04956}04956\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04957}04957\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04958}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestClip}{04958}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestClip}{TestClip}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04959}04959\ \ \ \ \ \textcolor{keyword}{def\ }\_check\_range(self,\ x,\ cmin,\ cmax):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04960}04960\ \ \ \ \ \ \ \ \ assert\_(np.all(x\ >=\ cmin))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04961}04961\ \ \ \ \ \ \ \ \ assert\_(np.all(x\ <=\ cmax))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04962}04962\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04963}04963\ \ \ \ \ \textcolor{keyword}{def\ }\_clip\_type(self,\ type\_group,\ array\_max,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04964}04964\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ clip\_min,\ clip\_max,\ inplace=False,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04965}04965\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ expected\_min=None,\ expected\_max=None):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04966}04966\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ expected\_min\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04967}04967\ \ \ \ \ \ \ \ \ \ \ \ \ expected\_min\ =\ clip\_min}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04968}04968\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ expected\_max\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04969}04969\ \ \ \ \ \ \ \ \ \ \ \ \ expected\_max\ =\ clip\_max}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04970}04970\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04971}04971\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ T\ \textcolor{keywordflow}{in}\ np.sctypes[type\_group]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04972}04972\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ sys.byteorder\ ==\ \textcolor{stringliteral}{'little'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04973}04973\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ byte\_orders\ =\ [\textcolor{stringliteral}{'='},\ \textcolor{stringliteral}{'>'}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04974}04974\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04975}04975\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ byte\_orders\ =\ [\textcolor{stringliteral}{'<'},\ \textcolor{stringliteral}{'='}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04976}04976\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04977}04977\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ byteorder\ \textcolor{keywordflow}{in}\ byte\_orders:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04978}04978\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype\ =\ np.dtype(T).newbyteorder(byteorder)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04979}04979\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04980}04980\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ (np.random.random(1000)\ *\ array\_max).astype(dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04981}04981\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ inplace:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04982}04982\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ tests\ that\ call\ us\ pass\ clip\_min\ and\ clip\_max\ that}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04983}04983\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ might\ not\ fit\ in\ the\ destination\ dtype.\ They\ were\ written}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04984}04984\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ assuming\ the\ previous\ unsafe\ casting,\ which\ now\ must\ be}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04985}04985\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ passed\ explicitly\ to\ avoid\ a\ warning.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04986}04986\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x.clip(clip\_min,\ clip\_max,\ x,\ casting=\textcolor{stringliteral}{'unsafe'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04987}04987\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04988}04988\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ x.clip(clip\_min,\ clip\_max)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04989}04989\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ byteorder\ =\ \textcolor{stringliteral}{'='}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04990}04990\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04991}04991\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ x.dtype.byteorder\ ==\ \textcolor{stringliteral}{'|'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04992}04992\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ byteorder\ =\ \textcolor{stringliteral}{'|'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04993}04993\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(x.dtype.byteorder,\ byteorder)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04994}04994\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestClip_ac83c47dfaddb9ddc09a54bb79513b456}{\_check\_range}}(x,\ expected\_min,\ expected\_max)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04995}04995\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ x}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04996}04996\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04997}04997\ \ \ \ \ \textcolor{keyword}{def\ }test\_basic(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04998}04998\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ inplace\ \textcolor{keywordflow}{in}\ [\textcolor{keyword}{False},\ \textcolor{keyword}{True}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l04999}04999\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestClip_a4f98cccf0ba85f195df23b1c61a456d3}{\_clip\_type}}(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05000}05000\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'float'},\ 1024,\ -\/12.8,\ 100.2,\ inplace=inplace)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05001}05001\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestClip_a4f98cccf0ba85f195df23b1c61a456d3}{\_clip\_type}}(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05002}05002\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'float'},\ 1024,\ 0,\ 0,\ inplace=inplace)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05003}05003\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05004}05004\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestClip_a4f98cccf0ba85f195df23b1c61a456d3}{\_clip\_type}}(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05005}05005\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'int'},\ 1024,\ -\/120,\ 100,\ inplace=inplace)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05006}05006\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestClip_a4f98cccf0ba85f195df23b1c61a456d3}{\_clip\_type}}(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05007}05007\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'int'},\ 1024,\ 0,\ 0,\ inplace=inplace)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05008}05008\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05009}05009\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestClip_a4f98cccf0ba85f195df23b1c61a456d3}{\_clip\_type}}(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05010}05010\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'uint'},\ 1024,\ 0,\ 0,\ inplace=inplace)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05011}05011\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestClip_a4f98cccf0ba85f195df23b1c61a456d3}{\_clip\_type}}(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05012}05012\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'uint'},\ 1024,\ -\/120,\ 100,\ inplace=inplace,\ expected\_min=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05013}05013\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05014}05014\ \ \ \ \ \textcolor{keyword}{def\ }test\_record\_array(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05015}05015\ \ \ \ \ \ \ \ \ rec\ =\ np.array([(-\/5,\ 2.0,\ 3.0),\ (5.0,\ 4.0,\ 3.0)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05016}05016\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=[(\textcolor{stringliteral}{'x'},\ \textcolor{stringliteral}{'<f8'}),\ (\textcolor{stringliteral}{'y'},\ \textcolor{stringliteral}{'<f8'}),\ (\textcolor{stringliteral}{'z'},\ \textcolor{stringliteral}{'<f8'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05017}05017\ \ \ \ \ \ \ \ \ y\ =\ rec[\textcolor{stringliteral}{'x'}].\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_ac0ebc234ab70db66e59afbea0ef6d4d2}{clip}}(-\/0.3,\ 0.5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05018}05018\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestClip_ac83c47dfaddb9ddc09a54bb79513b456}{\_check\_range}}(y,\ -\/0.3,\ 0.5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05019}05019\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05020}05020\ \ \ \ \ \textcolor{keyword}{def\ }test\_max\_or\_min(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05021}05021\ \ \ \ \ \ \ \ \ val\ =\ np.array([0,\ 1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05022}05022\ \ \ \ \ \ \ \ \ x\ =\ val.clip(3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05023}05023\ \ \ \ \ \ \ \ \ assert\_(np.all(x\ >=\ 3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05024}05024\ \ \ \ \ \ \ \ \ x\ =\ val.clip(min=3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05025}05025\ \ \ \ \ \ \ \ \ assert\_(np.all(x\ >=\ 3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05026}05026\ \ \ \ \ \ \ \ \ x\ =\ val.clip(max=4)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05027}05027\ \ \ \ \ \ \ \ \ assert\_(np.all(x\ <=\ 4))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05028}05028\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05029}05029\ \ \ \ \ \textcolor{keyword}{def\ }test\_nan(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05030}05030\ \ \ \ \ \ \ \ \ input\_arr\ =\ np.array([-\/2.,\ np.nan,\ 0.5,\ 3.,\ 0.25,\ np.nan])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05031}05031\ \ \ \ \ \ \ \ \ result\ =\ input\_arr.clip(-\/1,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05032}05032\ \ \ \ \ \ \ \ \ expected\ =\ np.array([-\/1.,\ np.nan,\ 0.5,\ 1.,\ 0.25,\ np.nan])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05033}05033\ \ \ \ \ \ \ \ \ assert\_array\_equal(result,\ expected)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05034}05034\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05035}05035\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05036}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestCompress}{05036}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestCompress}{TestCompress}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05037}05037\ \ \ \ \ \textcolor{keyword}{def\ }test\_axis(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05038}05038\ \ \ \ \ \ \ \ \ tgt\ =\ [[5,\ 6,\ 7,\ 8,\ 9]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05039}05039\ \ \ \ \ \ \ \ \ arr\ =\ np.arange(10).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,\ 5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05040}05040\ \ \ \ \ \ \ \ \ out\ =\ np.compress([0,\ 1],\ arr,\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05041}05041\ \ \ \ \ \ \ \ \ assert\_equal(out,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05042}05042\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05043}05043\ \ \ \ \ \ \ \ \ tgt\ =\ [[1,\ 3],\ [6,\ 8]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05044}05044\ \ \ \ \ \ \ \ \ out\ =\ np.compress([0,\ 1,\ 0,\ 1,\ 0],\ arr,\ axis=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05045}05045\ \ \ \ \ \ \ \ \ assert\_equal(out,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05046}05046\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05047}05047\ \ \ \ \ \textcolor{keyword}{def\ }test\_truncate(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05048}05048\ \ \ \ \ \ \ \ \ tgt\ =\ [[1],\ [6]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05049}05049\ \ \ \ \ \ \ \ \ arr\ =\ np.arange(10).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,\ 5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05050}05050\ \ \ \ \ \ \ \ \ out\ =\ np.compress([0,\ 1],\ arr,\ axis=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05051}05051\ \ \ \ \ \ \ \ \ assert\_equal(out,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05052}05052\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05053}05053\ \ \ \ \ \textcolor{keyword}{def\ }test\_flatten(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05054}05054\ \ \ \ \ \ \ \ \ arr\ =\ np.arange(10).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,\ 5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05055}05055\ \ \ \ \ \ \ \ \ out\ =\ np.compress([0,\ 1],\ arr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05056}05056\ \ \ \ \ \ \ \ \ assert\_equal(out,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05057}05057\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05058}05058\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05059}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPutmask}{05059}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPutmask}{TestPutmask}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05060}05060\ \ \ \ \ \textcolor{keyword}{def\ }tst\_basic(self,\ x,\ T,\ mask,\ val):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05061}05061\ \ \ \ \ \ \ \ \ np.putmask(x,\ mask,\ val)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05062}05062\ \ \ \ \ \ \ \ \ assert\_equal(x[mask],\ np.array(val,\ T))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05063}05063\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05064}05064\ \ \ \ \ \textcolor{keyword}{def\ }test\_ip\_types(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05065}05065\ \ \ \ \ \ \ \ \ unchecked\_types\ =\ [bytes,\ str,\ np.void]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05066}05066\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05067}05067\ \ \ \ \ \ \ \ \ x\ =\ np.random.random(1000)*100}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05068}05068\ \ \ \ \ \ \ \ \ mask\ =\ x\ <\ 40}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05069}05069\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05070}05070\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ val\ \textcolor{keywordflow}{in}\ [-\/100,\ 0,\ 15]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05071}05071\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ types\ \textcolor{keywordflow}{in}\ np.sctypes.values():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05072}05072\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ T\ \textcolor{keywordflow}{in}\ types:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05073}05073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ T\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ unchecked\_types:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05074}05074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ val\ <\ 0\ \textcolor{keywordflow}{and}\ np.dtype(T).kind\ ==\ \textcolor{stringliteral}{"{}u"{}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05075}05075\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ val\ =\ np.iinfo(T).max\ -\/\ 99}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05076}05076\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPutmask_a4320d0139beb23d0ad20ffb03b236dac}{tst\_basic}}(x.copy().astype(T),\ T,\ mask,\ val)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05077}05077\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05078}05078\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Also\ test\ string\ of\ a\ length\ which\ uses\ an\ untypical\ length}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05079}05079\ \ \ \ \ \ \ \ \ \ \ \ \ dt\ =\ np.dtype(\textcolor{stringliteral}{"{}S3"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05080}05080\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPutmask_a4320d0139beb23d0ad20ffb03b236dac}{tst\_basic}}(x.astype(dt),\ dt.type,\ mask,\ dt.type(val)[:3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05081}05081\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05082}05082\ \ \ \ \ \textcolor{keyword}{def\ }test\_mask\_size(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05083}05083\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.putmask,\ np.array([1,\ 2,\ 3]),\ [\textcolor{keyword}{True}],\ 5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05084}05084\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05085}05085\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize('dtype',\ ('>i4',\ '<i4')})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05086}05086\ \ \ \ \ \textcolor{keyword}{def\ }test\_byteorder(self,\ dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05087}05087\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3],\ dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05088}05088\ \ \ \ \ \ \ \ \ np.putmask(x,\ [\textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True}],\ -\/1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05089}05089\ \ \ \ \ \ \ \ \ assert\_array\_equal(x,\ [-\/1,\ 2,\ -\/1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05090}05090\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05091}05091\ \ \ \ \ \textcolor{keyword}{def\ }test\_record\_array(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05092}05092\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Note\ mixed\ byteorder.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05093}05093\ \ \ \ \ \ \ \ \ rec\ =\ np.array([(-\/5,\ 2.0,\ 3.0),\ (5.0,\ 4.0,\ 3.0)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05094}05094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=[(\textcolor{stringliteral}{'x'},\ \textcolor{stringliteral}{'<f8'}),\ (\textcolor{stringliteral}{'y'},\ \textcolor{stringliteral}{'>f8'}),\ (\textcolor{stringliteral}{'z'},\ \textcolor{stringliteral}{'<f8'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05095}05095\ \ \ \ \ \ \ \ \ np.putmask(rec[\textcolor{stringliteral}{'x'}],\ [\textcolor{keyword}{True},\ \textcolor{keyword}{False}],\ 10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05096}05096\ \ \ \ \ \ \ \ \ assert\_array\_equal(rec[\textcolor{stringliteral}{'x'}],\ [10,\ 5])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05097}05097\ \ \ \ \ \ \ \ \ assert\_array\_equal(rec[\textcolor{stringliteral}{'y'}],\ [2,\ 4])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05098}05098\ \ \ \ \ \ \ \ \ assert\_array\_equal(rec[\textcolor{stringliteral}{'z'}],\ [3,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05099}05099\ \ \ \ \ \ \ \ \ np.putmask(rec[\textcolor{stringliteral}{'y'}],\ [\textcolor{keyword}{True},\ \textcolor{keyword}{False}],\ 11)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05100}05100\ \ \ \ \ \ \ \ \ assert\_array\_equal(rec[\textcolor{stringliteral}{'x'}],\ [10,\ 5])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05101}05101\ \ \ \ \ \ \ \ \ assert\_array\_equal(rec[\textcolor{stringliteral}{'y'}],\ [11,\ 4])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05102}05102\ \ \ \ \ \ \ \ \ assert\_array\_equal(rec[\textcolor{stringliteral}{'z'}],\ [3,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05103}05103\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05104}05104\ \ \ \ \ \textcolor{keyword}{def\ }test\_overlaps(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05105}05105\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/6272\ check\ overlap}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05106}05106\ \ \ \ \ \ \ \ \ x\ =\ np.array([\textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05107}05107\ \ \ \ \ \ \ \ \ np.putmask(x[1:4],\ [\textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{True}],\ x[:3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05108}05108\ \ \ \ \ \ \ \ \ assert\_equal(x,\ np.array([\textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True}]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05109}05109\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05110}05110\ \ \ \ \ \ \ \ \ x\ =\ np.array([\textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05111}05111\ \ \ \ \ \ \ \ \ np.putmask(x[1:4],\ x[:3],\ [\textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05112}05112\ \ \ \ \ \ \ \ \ assert\_equal(x,\ np.array([\textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{True}]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05113}05113\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05114}05114\ \ \ \ \ \textcolor{keyword}{def\ }test\_writeable(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05115}05115\ \ \ \ \ \ \ \ \ a\ =\ np.arange(5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05116}05116\ \ \ \ \ \ \ \ \ a.flags.writeable\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05117}05117\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05118}05118\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05119}05119\ \ \ \ \ \ \ \ \ \ \ \ \ np.putmask(a,\ a\ >=\ 2,\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05120}05120\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05121}05121\ \ \ \ \ \textcolor{keyword}{def\ }test\_kwargs(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05122}05122\ \ \ \ \ \ \ \ \ x\ =\ np.array([0,\ 0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05123}05123\ \ \ \ \ \ \ \ \ np.putmask(x,\ [0,\ 1],\ [-\/1,\ -\/2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05124}05124\ \ \ \ \ \ \ \ \ assert\_array\_equal(x,\ [0,\ -\/2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05125}05125\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05126}05126\ \ \ \ \ \ \ \ \ x\ =\ np.array([0,\ 0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05127}05127\ \ \ \ \ \ \ \ \ np.putmask(x,\ mask=[0,\ 1],\ values=[-\/1,\ -\/2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05128}05128\ \ \ \ \ \ \ \ \ assert\_array\_equal(x,\ [0,\ -\/2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05129}05129\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05130}05130\ \ \ \ \ \ \ \ \ x\ =\ np.array([0,\ 0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05131}05131\ \ \ \ \ \ \ \ \ np.putmask(x,\ values=[-\/1,\ -\/2],\ \ mask=[0,\ 1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05132}05132\ \ \ \ \ \ \ \ \ assert\_array\_equal(x,\ [0,\ -\/2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05133}05133\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05134}05134\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05135}05135\ \ \ \ \ \ \ \ \ \ \ \ \ np.putmask(a=x,\ values=[-\/1,\ -\/2],\ \ mask=[0,\ 1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05136}05136\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05137}05137\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05138}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestTake}{05138}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestTake}{TestTake}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05139}05139\ \ \ \ \ \textcolor{keyword}{def\ }tst\_basic(self,\ x):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05140}05140\ \ \ \ \ \ \ \ \ ind\ =\ list(range(x.shape[0]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05141}05141\ \ \ \ \ \ \ \ \ assert\_array\_equal(x.take(ind,\ axis=0),\ x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05142}05142\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05143}05143\ \ \ \ \ \textcolor{keyword}{def\ }test\_ip\_types(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05144}05144\ \ \ \ \ \ \ \ \ unchecked\_types\ =\ [bytes,\ str,\ np.void]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05145}05145\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05146}05146\ \ \ \ \ \ \ \ \ x\ =\ np.random.random(24)*100}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05147}05147\ \ \ \ \ \ \ \ \ x.shape\ =\ 2,\ 3,\ 4}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05148}05148\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ types\ \textcolor{keywordflow}{in}\ np.sctypes.values():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05149}05149\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ T\ \textcolor{keywordflow}{in}\ types:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05150}05150\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ T\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ unchecked\_types:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05151}05151\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestTake_a3cf35caa4a9d9f6d12f9402f67f8a5fb}{tst\_basic}}(x.copy().astype(T))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05152}05152\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05153}05153\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Also\ test\ string\ of\ a\ length\ which\ uses\ an\ untypical\ length}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05154}05154\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestTake_a3cf35caa4a9d9f6d12f9402f67f8a5fb}{tst\_basic}}(x.astype(\textcolor{stringliteral}{"{}S3"{}}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05155}05155\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05156}05156\ \ \ \ \ \textcolor{keyword}{def\ }test\_raise(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05157}05157\ \ \ \ \ \ \ \ \ x\ =\ np.random.random(24)*100}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05158}05158\ \ \ \ \ \ \ \ \ x.shape\ =\ 2,\ 3,\ 4}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05159}05159\ \ \ \ \ \ \ \ \ assert\_raises(IndexError,\ x.take,\ [0,\ 1,\ 2],\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05160}05160\ \ \ \ \ \ \ \ \ assert\_raises(IndexError,\ x.take,\ [-\/3],\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05161}05161\ \ \ \ \ \ \ \ \ assert\_array\_equal(x.take([-\/1],\ axis=0)[0],\ x[1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05162}05162\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05163}05163\ \ \ \ \ \textcolor{keyword}{def\ }test\_clip(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05164}05164\ \ \ \ \ \ \ \ \ x\ =\ np.random.random(24)*100}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05165}05165\ \ \ \ \ \ \ \ \ x.shape\ =\ 2,\ 3,\ 4}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05166}05166\ \ \ \ \ \ \ \ \ assert\_array\_equal(x.take([-\/1],\ axis=0,\ mode=\textcolor{stringliteral}{'clip'})[0],\ x[0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05167}05167\ \ \ \ \ \ \ \ \ assert\_array\_equal(x.take([2],\ axis=0,\ mode=\textcolor{stringliteral}{'clip'})[0],\ x[1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05168}05168\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05169}05169\ \ \ \ \ \textcolor{keyword}{def\ }test\_wrap(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05170}05170\ \ \ \ \ \ \ \ \ x\ =\ np.random.random(24)*100}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05171}05171\ \ \ \ \ \ \ \ \ x.shape\ =\ 2,\ 3,\ 4}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05172}05172\ \ \ \ \ \ \ \ \ assert\_array\_equal(x.take([-\/1],\ axis=0,\ mode=\textcolor{stringliteral}{'wrap'})[0],\ x[1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05173}05173\ \ \ \ \ \ \ \ \ assert\_array\_equal(x.take([2],\ axis=0,\ mode=\textcolor{stringliteral}{'wrap'})[0],\ x[0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05174}05174\ \ \ \ \ \ \ \ \ assert\_array\_equal(x.take([3],\ axis=0,\ mode=\textcolor{stringliteral}{'wrap'})[0],\ x[1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05175}05175\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05176}05176\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize('dtype',\ ('>i4',\ '<i4')})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05177}05177\ \ \ \ \ \textcolor{keyword}{def\ }test\_byteorder(self,\ dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05178}05178\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3],\ dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05179}05179\ \ \ \ \ \ \ \ \ assert\_array\_equal(x.take([0,\ 2,\ 1]),\ [1,\ 3,\ 2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05180}05180\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05181}05181\ \ \ \ \ \textcolor{keyword}{def\ }test\_record\_array(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05182}05182\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Note\ mixed\ byteorder.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05183}05183\ \ \ \ \ \ \ \ \ rec\ =\ np.array([(-\/5,\ 2.0,\ 3.0),\ (5.0,\ 4.0,\ 3.0)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05184}05184\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=[(\textcolor{stringliteral}{'x'},\ \textcolor{stringliteral}{'<f8'}),\ (\textcolor{stringliteral}{'y'},\ \textcolor{stringliteral}{'>f8'}),\ (\textcolor{stringliteral}{'z'},\ \textcolor{stringliteral}{'<f8'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05185}05185\ \ \ \ \ \ \ \ \ rec1\ =\ rec.take([1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05186}05186\ \ \ \ \ \ \ \ \ assert\_(rec1[\textcolor{stringliteral}{'x'}]\ ==\ 5.0\ \textcolor{keywordflow}{and}\ rec1[\textcolor{stringliteral}{'y'}]\ ==\ 4.0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05187}05187\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05188}05188\ \ \ \ \ \textcolor{keyword}{def\ }test\_out\_overlap(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05189}05189\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/6272\ check\ overlap\ on\ out}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05190}05190\ \ \ \ \ \ \ \ \ x\ =\ np.arange(5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05191}05191\ \ \ \ \ \ \ \ \ y\ =\ np.take(x,\ [1,\ 2,\ 3],\ out=x[2:5],\ mode=\textcolor{stringliteral}{'wrap'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05192}05192\ \ \ \ \ \ \ \ \ assert\_equal(y,\ np.array([1,\ 2,\ 3]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05193}05193\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05194}05194\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize('shape',\ [(1,\ 2)},\ (1,),\ ()])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05195}05195\ \ \ \ \ \textcolor{keyword}{def\ }test\_ret\_is\_out(self,\ shape):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05196}05196\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 0d\ arrays\ should\ not\ be\ an\ exception\ to\ this\ rule}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05197}05197\ \ \ \ \ \ \ \ \ x\ =\ np.arange(5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05198}05198\ \ \ \ \ \ \ \ \ inds\ =\ np.zeros(shape,\ dtype=np.intp)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05199}05199\ \ \ \ \ \ \ \ \ out\ =\ np.zeros(shape,\ dtype=x.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05200}05200\ \ \ \ \ \ \ \ \ ret\ =\ np.take(x,\ inds,\ out=out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05201}05201\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ ret\ \textcolor{keywordflow}{is}\ out}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05202}05202\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05203}05203\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05204}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestLexsort}{05204}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestLexsort}{TestLexsort}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05205}05205\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{'dtype'},[}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05206}05206\ \ \ \ \ \ \ \ \ np.uint8,\ np.uint16,\ np.uint32,\ np.uint64,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05207}05207\ \ \ \ \ \ \ \ \ np.int8,\ np.int16,\ np.int32,\ np.int64,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05208}05208\ \ \ \ \ \ \ \ \ np.float16,\ np.float32,\ np.float64}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05209}05209\ \ \ \ \ ])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05210}05210\ \ \ \ \ \textcolor{keyword}{def\ }test\_basic(self,\ dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05211}05211\ \ \ \ \ \ \ \ \ a\ =\ np.array([1,\ 2,\ 1,\ 3,\ 1,\ 5],\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05212}05212\ \ \ \ \ \ \ \ \ b\ =\ np.array([0,\ 4,\ 5,\ 6,\ 2,\ 3],\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05213}05213\ \ \ \ \ \ \ \ \ idx\ =\ np.lexsort((b,\ a))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05214}05214\ \ \ \ \ \ \ \ \ expected\_idx\ =\ np.array([0,\ 4,\ 2,\ 1,\ 3,\ 5])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05215}05215\ \ \ \ \ \ \ \ \ assert\_array\_equal(idx,\ expected\_idx)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05216}05216\ \ \ \ \ \ \ \ \ assert\_array\_equal(a[idx],\ np.sort(a))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05217}05217\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05218}05218\ \ \ \ \ \textcolor{keyword}{def\ }test\_mixed(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05219}05219\ \ \ \ \ \ \ \ \ a\ =\ np.array([1,\ 2,\ 1,\ 3,\ 1,\ 5])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05220}05220\ \ \ \ \ \ \ \ \ b\ =\ np.array([0,\ 4,\ 5,\ 6,\ 2,\ 3],\ dtype=\textcolor{stringliteral}{'datetime64[D]'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05221}05221\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05222}05222\ \ \ \ \ \ \ \ \ idx\ =\ np.lexsort((b,\ a))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05223}05223\ \ \ \ \ \ \ \ \ expected\_idx\ =\ np.array([0,\ 4,\ 2,\ 1,\ 3,\ 5])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05224}05224\ \ \ \ \ \ \ \ \ assert\_array\_equal(idx,\ expected\_idx)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05225}05225\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05226}05226\ \ \ \ \ \textcolor{keyword}{def\ }test\_datetime(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05227}05227\ \ \ \ \ \ \ \ \ a\ =\ np.array([0,0,0],\ dtype=\textcolor{stringliteral}{'datetime64[D]'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05228}05228\ \ \ \ \ \ \ \ \ b\ =\ np.array([2,1,0],\ dtype=\textcolor{stringliteral}{'datetime64[D]'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05229}05229\ \ \ \ \ \ \ \ \ idx\ =\ np.lexsort((b,\ a))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05230}05230\ \ \ \ \ \ \ \ \ expected\_idx\ =\ np.array([2,\ 1,\ 0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05231}05231\ \ \ \ \ \ \ \ \ assert\_array\_equal(idx,\ expected\_idx)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05232}05232\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05233}05233\ \ \ \ \ \ \ \ \ a\ =\ np.array([0,0,0],\ dtype=\textcolor{stringliteral}{'timedelta64[D]'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05234}05234\ \ \ \ \ \ \ \ \ b\ =\ np.array([2,1,0],\ dtype=\textcolor{stringliteral}{'timedelta64[D]'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05235}05235\ \ \ \ \ \ \ \ \ idx\ =\ np.lexsort((b,\ a))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05236}05236\ \ \ \ \ \ \ \ \ expected\_idx\ =\ np.array([2,\ 1,\ 0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05237}05237\ \ \ \ \ \ \ \ \ assert\_array\_equal(idx,\ expected\_idx)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05238}05238\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05239}05239\ \ \ \ \ \textcolor{keyword}{def\ }test\_object(self):\ \ \textcolor{comment}{\#\ gh-\/6312}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05240}05240\ \ \ \ \ \ \ \ \ a\ =\ np.random.choice(10,\ 1000)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05241}05241\ \ \ \ \ \ \ \ \ b\ =\ np.random.choice([\textcolor{stringliteral}{'abc'},\ \textcolor{stringliteral}{'xy'},\ \textcolor{stringliteral}{'wz'},\ \textcolor{stringliteral}{'efghi'},\ \textcolor{stringliteral}{'qwst'},\ \textcolor{stringliteral}{'x'}],\ 1000)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05242}05242\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05243}05243\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ u\ \textcolor{keywordflow}{in}\ a,\ b:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05244}05244\ \ \ \ \ \ \ \ \ \ \ \ \ left\ =\ np.lexsort((u.astype(\textcolor{stringliteral}{'O'}),))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05245}05245\ \ \ \ \ \ \ \ \ \ \ \ \ right\ =\ np.argsort(u,\ kind=\textcolor{stringliteral}{'mergesort'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05246}05246\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(left,\ right)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05247}05247\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05248}05248\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ u,\ v\ \textcolor{keywordflow}{in}\ (a,\ b),\ (b,\ a):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05249}05249\ \ \ \ \ \ \ \ \ \ \ \ \ idx\ =\ np.lexsort((u,\ v))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05250}05250\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(idx,\ np.lexsort((u.astype(\textcolor{stringliteral}{'O'}),\ v)))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05251}05251\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(idx,\ np.lexsort((u,\ v.astype(\textcolor{stringliteral}{'O'}))))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05252}05252\ \ \ \ \ \ \ \ \ \ \ \ \ u,\ v\ =\ np.array(u,\ dtype=\textcolor{stringliteral}{'object'}),\ np.array(v,\ dtype=\textcolor{stringliteral}{'object'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05253}05253\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(idx,\ np.lexsort((u,\ v)))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05254}05254\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05255}05255\ \ \ \ \ \textcolor{keyword}{def\ }test\_invalid\_axis(self):\ \textcolor{comment}{\#\ gh-\/7528}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05256}05256\ \ \ \ \ \ \ \ \ x\ =\ np.linspace(0.,\ 1.,\ 42*3).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(42,\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05257}05257\ \ \ \ \ \ \ \ \ assert\_raises(np.AxisError,\ np.lexsort,\ x,\ axis=2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05258}05258\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05259}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestIO}{05259}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestIO}{TestIO}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05260}05260\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Test\ tofile,\ fromfile,\ tobytes,\ and\ fromstring"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05261}05261\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05262}05262\ \ \ \ \ \textcolor{preprocessor}{@pytest.fixture()}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05263}05263\ \ \ \ \ \textcolor{keyword}{def\ }x(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05264}05264\ \ \ \ \ \ \ \ \ shape\ =\ (2,\ 4,\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05265}05265\ \ \ \ \ \ \ \ \ rand\ =\ np.random.random}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05266}05266\ \ \ \ \ \ \ \ \ x\ =\ rand(shape)\ +\ rand(shape).astype(complex)\ *\ 1j}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05267}05267\ \ \ \ \ \ \ \ \ x[0,\ :,\ 1]\ =\ [np.nan,\ np.inf,\ -\/np.inf,\ np.nan]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05268}05268\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ x}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05269}05269\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05270}05270\ \ \ \ \ \textcolor{preprocessor}{@pytest.fixture(params=["{}string"{},\ "{}path\_obj"{}])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05271}05271\ \ \ \ \ \textcolor{keyword}{def\ }tmp\_filename(self,\ tmp\_path,\ request):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05272}05272\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ This\ fixture\ covers\ two\ cases:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05273}05273\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ one\ where\ the\ filename\ is\ a\ string\ and}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05274}05274\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ another\ where\ it\ is\ a\ pathlib\ object}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05275}05275\ \ \ \ \ \ \ \ \ filename\ =\ tmp\_path\ /\ \textcolor{stringliteral}{"{}file"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05276}05276\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ request.param\ ==\ \textcolor{stringliteral}{"{}string"{}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05277}05277\ \ \ \ \ \ \ \ \ \ \ \ \ filename\ =\ str(filename)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05278}05278\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{yield}\ filename}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05279}05279\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05280}05280\ \ \ \ \ \textcolor{keyword}{def\ }test\_nofile(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05281}05281\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ this\ should\ probably\ be\ supported\ as\ a\ file}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05282}05282\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ but\ for\ now\ test\ for\ proper\ errors}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05283}05283\ \ \ \ \ \ \ \ \ b\ =\ io.BytesIO()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05284}05284\ \ \ \ \ \ \ \ \ assert\_raises(OSError,\ np.fromfile,\ b,\ np.uint8,\ 80)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05285}05285\ \ \ \ \ \ \ \ \ d\ =\ np.ones(7)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05286}05286\ \ \ \ \ \ \ \ \ assert\_raises(OSError,\ \textcolor{keyword}{lambda}\ x:\ x.tofile(b),\ d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05287}05287\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05288}05288\ \ \ \ \ \textcolor{keyword}{def\ }test\_bool\_fromstring(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05289}05289\ \ \ \ \ \ \ \ \ v\ =\ np.array([\textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False}],\ dtype=np.bool\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05290}05290\ \ \ \ \ \ \ \ \ y\ =\ np.fromstring(\textcolor{stringliteral}{'1\ 0\ -\/2.3\ 0.0'},\ sep=\textcolor{stringliteral}{'\ '},\ dtype=np.bool\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05291}05291\ \ \ \ \ \ \ \ \ assert\_array\_equal(v,\ y)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05292}05292\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05293}05293\ \ \ \ \ \textcolor{keyword}{def\ }test\_uint64\_fromstring(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05294}05294\ \ \ \ \ \ \ \ \ d\ =\ np.fromstring(\textcolor{stringliteral}{"{}9923372036854775807\ 104783749223640"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05295}05295\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=np.uint64,\ sep=\textcolor{stringliteral}{'\ '})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05296}05296\ \ \ \ \ \ \ \ \ e\ =\ np.array([9923372036854775807,\ 104783749223640],\ dtype=np.uint64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05297}05297\ \ \ \ \ \ \ \ \ assert\_array\_equal(d,\ e)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05298}05298\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05299}05299\ \ \ \ \ \textcolor{keyword}{def\ }test\_int64\_fromstring(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05300}05300\ \ \ \ \ \ \ \ \ d\ =\ np.fromstring(\textcolor{stringliteral}{"{}-\/25041670086757\ 104783749223640"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05301}05301\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=np.int64,\ sep=\textcolor{stringliteral}{'\ '})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05302}05302\ \ \ \ \ \ \ \ \ e\ =\ np.array([-\/25041670086757,\ 104783749223640],\ dtype=np.int64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05303}05303\ \ \ \ \ \ \ \ \ assert\_array\_equal(d,\ e)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05304}05304\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05305}05305\ \ \ \ \ \textcolor{keyword}{def\ }test\_fromstring\_count0(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05306}05306\ \ \ \ \ \ \ \ \ d\ =\ np.fromstring(\textcolor{stringliteral}{"{}1,2"{}},\ sep=\textcolor{stringliteral}{"{},"{}},\ dtype=np.int64,\ count=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05307}05307\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ d.shape\ ==\ (0,)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05308}05308\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05309}05309\ \ \ \ \ \textcolor{keyword}{def\ }test\_empty\_files\_text(self,\ tmp\_filename):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05310}05310\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ \textcolor{stringliteral}{'w'})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05311}05311\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05312}05312\ \ \ \ \ \ \ \ \ y\ =\ np.fromfile(tmp\_filename)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05313}05313\ \ \ \ \ \ \ \ \ assert\_(y.size\ ==\ 0,\ \textcolor{stringliteral}{"{}Array\ not\ empty"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05314}05314\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05315}05315\ \ \ \ \ \textcolor{keyword}{def\ }test\_empty\_files\_binary(self,\ tmp\_filename):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05316}05316\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ \textcolor{stringliteral}{'wb'})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05317}05317\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05318}05318\ \ \ \ \ \ \ \ \ y\ =\ np.fromfile(tmp\_filename,\ sep=\textcolor{stringliteral}{"{}\ "{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05319}05319\ \ \ \ \ \ \ \ \ assert\_(y.size\ ==\ 0,\ \textcolor{stringliteral}{"{}Array\ not\ empty"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05320}05320\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05321}05321\ \ \ \ \ \textcolor{keyword}{def\ }test\_roundtrip\_file(self,\ x,\ tmp\_filename):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05322}05322\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ \textcolor{stringliteral}{'wb'})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05323}05323\ \ \ \ \ \ \ \ \ \ \ \ \ x.tofile(f)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05324}05324\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ NB.\ doesn't\ work\ with\ flush+seek,\ due\ to\ use\ of\ C\ stdio}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05325}05325\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ \textcolor{stringliteral}{'rb'})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05326}05326\ \ \ \ \ \ \ \ \ \ \ \ \ y\ =\ np.fromfile(f,\ dtype=x.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05327}05327\ \ \ \ \ \ \ \ \ assert\_array\_equal(y,\ x.flat)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05328}05328\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05329}05329\ \ \ \ \ \textcolor{keyword}{def\ }test\_roundtrip(self,\ x,\ tmp\_filename):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05330}05330\ \ \ \ \ \ \ \ \ x.tofile(tmp\_filename)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05331}05331\ \ \ \ \ \ \ \ \ y\ =\ np.fromfile(tmp\_filename,\ dtype=x.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05332}05332\ \ \ \ \ \ \ \ \ assert\_array\_equal(y,\ x.flat)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05333}05333\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05334}05334\ \ \ \ \ \textcolor{keyword}{def\ }test\_roundtrip\_dump\_pathlib(self,\ x,\ tmp\_filename):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05335}05335\ \ \ \ \ \ \ \ \ p\ =\ pathlib.Path(tmp\_filename)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05336}05336\ \ \ \ \ \ \ \ \ x.dump(p)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05337}05337\ \ \ \ \ \ \ \ \ y\ =\ np.load(p,\ allow\_pickle=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05338}05338\ \ \ \ \ \ \ \ \ assert\_array\_equal(y,\ x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05339}05339\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05340}05340\ \ \ \ \ \textcolor{keyword}{def\ }test\_roundtrip\_binary\_str(self,\ x):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05341}05341\ \ \ \ \ \ \ \ \ s\ =\ x.tobytes()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05342}05342\ \ \ \ \ \ \ \ \ y\ =\ np.frombuffer(s,\ dtype=x.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05343}05343\ \ \ \ \ \ \ \ \ assert\_array\_equal(y,\ x.flat)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05344}05344\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05345}05345\ \ \ \ \ \ \ \ \ s\ =\ x.tobytes(\textcolor{stringliteral}{'F'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05346}05346\ \ \ \ \ \ \ \ \ y\ =\ np.frombuffer(s,\ dtype=x.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05347}05347\ \ \ \ \ \ \ \ \ assert\_array\_equal(y,\ x.flatten(\textcolor{stringliteral}{'F'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05348}05348\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05349}05349\ \ \ \ \ \textcolor{keyword}{def\ }test\_roundtrip\_str(self,\ x):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05350}05350\ \ \ \ \ \ \ \ \ x\ =\ x.real.ravel()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05351}05351\ \ \ \ \ \ \ \ \ s\ =\ \textcolor{stringliteral}{"{}@"{}}.join(map(str,\ x))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05352}05352\ \ \ \ \ \ \ \ \ y\ =\ np.fromstring(s,\ sep=\textcolor{stringliteral}{"{}@"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05353}05353\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ NB.\ str\ imbues\ less\ precision}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05354}05354\ \ \ \ \ \ \ \ \ nan\_mask\ =\ \string~np.isfinite(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05355}05355\ \ \ \ \ \ \ \ \ assert\_array\_equal(x[nan\_mask],\ y[nan\_mask])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05356}05356\ \ \ \ \ \ \ \ \ assert\_array\_almost\_equal(x[\string~nan\_mask],\ y[\string~nan\_mask],\ decimal=5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05357}05357\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05358}05358\ \ \ \ \ \textcolor{keyword}{def\ }test\_roundtrip\_repr(self,\ x):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05359}05359\ \ \ \ \ \ \ \ \ x\ =\ x.real.ravel()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05360}05360\ \ \ \ \ \ \ \ \ s\ =\ \textcolor{stringliteral}{"{}@"{}}.join(map(repr,\ x))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05361}05361\ \ \ \ \ \ \ \ \ y\ =\ np.fromstring(s,\ sep=\textcolor{stringliteral}{"{}@"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05362}05362\ \ \ \ \ \ \ \ \ assert\_array\_equal(x,\ y)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05363}05363\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05364}05364\ \ \ \ \ \textcolor{keyword}{def\ }test\_unseekable\_fromfile(self,\ x,\ tmp\_filename):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05365}05365\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/6246}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05366}05366\ \ \ \ \ \ \ \ \ x.tofile(tmp\_filename)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05367}05367\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05368}05368\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }fail(*args,\ **kwargs):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05369}05369\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classOSError}{OSError}}(\textcolor{stringliteral}{'Can\ not\ tell\ or\ seek'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05370}05370\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05371}05371\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ io.open(tmp\_filename,\ \textcolor{stringliteral}{'rb'},\ buffering=0)\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05372}05372\ \ \ \ \ \ \ \ \ \ \ \ \ f.seek\ =\ fail}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05373}05373\ \ \ \ \ \ \ \ \ \ \ \ \ f.tell\ =\ fail}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05374}05374\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(OSError,\ np.fromfile,\ f,\ dtype=x.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05375}05375\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05376}05376\ \ \ \ \ \textcolor{keyword}{def\ }test\_io\_open\_unbuffered\_fromfile(self,\ x,\ tmp\_filename):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05377}05377\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/6632}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05378}05378\ \ \ \ \ \ \ \ \ x.tofile(tmp\_filename)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05379}05379\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ io.open(tmp\_filename,\ \textcolor{stringliteral}{'rb'},\ buffering=0)\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05380}05380\ \ \ \ \ \ \ \ \ \ \ \ \ y\ =\ np.fromfile(f,\ dtype=x.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05381}05381\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(y,\ x.flat)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05382}05382\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05383}05383\ \ \ \ \ \textcolor{keyword}{def\ }test\_largish\_file(self,\ tmp\_filename):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05384}05384\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ the\ fallocate\ path\ on\ files\ >\ 16MB}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05385}05385\ \ \ \ \ \ \ \ \ d\ =\ np.zeros(4\ *\ 1024\ **\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05386}05386\ \ \ \ \ \ \ \ \ d.tofile(tmp\_filename)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05387}05387\ \ \ \ \ \ \ \ \ assert\_equal(os.path.getsize(tmp\_filename),\ d.nbytes)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05388}05388\ \ \ \ \ \ \ \ \ assert\_array\_equal(d,\ np.fromfile(tmp\_filename))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05389}05389\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ offset}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05390}05390\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ \textcolor{stringliteral}{"{}r+b"{}})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05391}05391\ \ \ \ \ \ \ \ \ \ \ \ \ f.seek(d.nbytes)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05392}05392\ \ \ \ \ \ \ \ \ \ \ \ \ d.tofile(f)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05393}05393\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(os.path.getsize(tmp\_filename),\ d.nbytes\ *\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05394}05394\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ append\ mode\ (gh-\/8329)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05395}05395\ \ \ \ \ \ \ \ \ open(tmp\_filename,\ \textcolor{stringliteral}{"{}w"{}}).close()\ \ \textcolor{comment}{\#\ delete\ file\ contents}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05396}05396\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ \textcolor{stringliteral}{"{}ab"{}})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05397}05397\ \ \ \ \ \ \ \ \ \ \ \ \ d.tofile(f)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05398}05398\ \ \ \ \ \ \ \ \ assert\_array\_equal(d,\ np.fromfile(tmp\_filename))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05399}05399\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ \textcolor{stringliteral}{"{}ab"{}})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05400}05400\ \ \ \ \ \ \ \ \ \ \ \ \ d.tofile(f)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05401}05401\ \ \ \ \ \ \ \ \ assert\_equal(os.path.getsize(tmp\_filename),\ d.nbytes\ *\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05402}05402\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05403}05403\ \ \ \ \ \textcolor{keyword}{def\ }test\_io\_open\_buffered\_fromfile(self,\ x,\ tmp\_filename):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05404}05404\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/6632}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05405}05405\ \ \ \ \ \ \ \ \ x.tofile(tmp\_filename)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05406}05406\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ io.open(tmp\_filename,\ \textcolor{stringliteral}{'rb'},\ buffering=-\/1)\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05407}05407\ \ \ \ \ \ \ \ \ \ \ \ \ y\ =\ np.fromfile(f,\ dtype=x.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05408}05408\ \ \ \ \ \ \ \ \ assert\_array\_equal(y,\ x.flat)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05409}05409\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05410}05410\ \ \ \ \ \textcolor{keyword}{def\ }test\_file\_position\_after\_fromfile(self,\ tmp\_filename):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05411}05411\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/4118}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05412}05412\ \ \ \ \ \ \ \ \ sizes\ =\ [io.DEFAULT\_BUFFER\_SIZE//8,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05413}05413\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ io.DEFAULT\_BUFFER\_SIZE,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05414}05414\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ io.DEFAULT\_BUFFER\_SIZE*8]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05415}05415\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05416}05416\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ size\ \textcolor{keywordflow}{in}\ sizes:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05417}05417\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ \textcolor{stringliteral}{'wb'})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05418}05418\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ f.seek(size-\/1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05419}05419\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ f.write(b\textcolor{stringliteral}{'\(\backslash\)0'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05420}05420\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05421}05421\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ mode\ \textcolor{keywordflow}{in}\ [\textcolor{stringliteral}{'rb'},\ \textcolor{stringliteral}{'r+b'}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05422}05422\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ err\_msg\ =\ \textcolor{stringliteral}{"{}\%d\ \%s"{}}\ \%\ (size,\ mode)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05423}05423\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05424}05424\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ mode)\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05425}05425\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ f.read(2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05426}05426\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.fromfile(f,\ dtype=np.float64,\ count=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05427}05427\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pos\ =\ f.tell()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05428}05428\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(pos,\ 10,\ err\_msg=err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05429}05429\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05430}05430\ \ \ \ \ \textcolor{keyword}{def\ }test\_file\_position\_after\_tofile(self,\ tmp\_filename):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05431}05431\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/4118}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05432}05432\ \ \ \ \ \ \ \ \ sizes\ =\ [io.DEFAULT\_BUFFER\_SIZE//8,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05433}05433\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ io.DEFAULT\_BUFFER\_SIZE,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05434}05434\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ io.DEFAULT\_BUFFER\_SIZE*8]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05435}05435\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05436}05436\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ size\ \textcolor{keywordflow}{in}\ sizes:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05437}05437\ \ \ \ \ \ \ \ \ \ \ \ \ err\_msg\ =\ \textcolor{stringliteral}{"{}\%d"{}}\ \%\ (size,)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05438}05438\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05439}05439\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ \textcolor{stringliteral}{'wb'})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05440}05440\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ f.seek(size-\/1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05441}05441\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ f.write(b\textcolor{stringliteral}{'\(\backslash\)0'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05442}05442\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ f.seek(10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05443}05443\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ f.write(b\textcolor{stringliteral}{'12'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05444}05444\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([0],\ dtype=np.float64).tofile(f)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05445}05445\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pos\ =\ f.tell()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05446}05446\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(pos,\ 10\ +\ 2\ +\ 8,\ err\_msg=err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05447}05447\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05448}05448\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ \textcolor{stringliteral}{'r+b'})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05449}05449\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ f.read(2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05450}05450\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ f.seek(0,\ 1)\ \ \textcolor{comment}{\#\ seek\ between\ read\&write\ required\ by\ ANSI\ C}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05451}05451\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([0],\ dtype=np.float64).tofile(f)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05452}05452\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pos\ =\ f.tell()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05453}05453\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(pos,\ 10,\ err\_msg=err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05454}05454\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05455}05455\ \ \ \ \ \textcolor{keyword}{def\ }test\_load\_object\_array\_fromfile(self,\ tmp\_filename):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05456}05456\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/12300}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05457}05457\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ \textcolor{stringliteral}{'w'})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05458}05458\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Ensure\ we\ have\ a\ file\ with\ consistent\ contents}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05459}05459\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05460}05460\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05461}05461\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ \textcolor{stringliteral}{'rb'})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05462}05462\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises\_regex(ValueError,\ \textcolor{stringliteral}{"{}Cannot\ read\ into\ object\ array"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05463}05463\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.fromfile,\ f,\ dtype=object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05464}05464\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05465}05465\ \ \ \ \ \ \ \ \ assert\_raises\_regex(ValueError,\ \textcolor{stringliteral}{"{}Cannot\ read\ into\ object\ array"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05466}05466\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.fromfile,\ tmp\_filename,\ dtype=object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05467}05467\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05468}05468\ \ \ \ \ \textcolor{keyword}{def\ }test\_fromfile\_offset(self,\ x,\ tmp\_filename):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05469}05469\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ \textcolor{stringliteral}{'wb'})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05470}05470\ \ \ \ \ \ \ \ \ \ \ \ \ x.tofile(f)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05471}05471\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05472}05472\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ \textcolor{stringliteral}{'rb'})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05473}05473\ \ \ \ \ \ \ \ \ \ \ \ \ y\ =\ np.fromfile(f,\ dtype=x.dtype,\ offset=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05474}05474\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(y,\ x.flat)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05475}05475\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05476}05476\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ \textcolor{stringliteral}{'rb'})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05477}05477\ \ \ \ \ \ \ \ \ \ \ \ \ count\_items\ =\ len(x.flat)\ //\ 8}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05478}05478\ \ \ \ \ \ \ \ \ \ \ \ \ offset\_items\ =\ len(x.flat)\ //\ 4}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05479}05479\ \ \ \ \ \ \ \ \ \ \ \ \ offset\_bytes\ =\ x.dtype.itemsize\ *\ offset\_items}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05480}05480\ \ \ \ \ \ \ \ \ \ \ \ \ y\ =\ np.fromfile(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05481}05481\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ f,\ dtype=x.dtype,\ count=count\_items,\ offset=offset\_bytes}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05482}05482\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05483}05483\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05484}05484\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ y,\ x.flat[offset\_items:offset\_items+count\_items]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05485}05485\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05486}05486\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05487}05487\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ subsequent\ seeks\ should\ stack}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05488}05488\ \ \ \ \ \ \ \ \ \ \ \ \ offset\_bytes\ =\ x.dtype.itemsize}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05489}05489\ \ \ \ \ \ \ \ \ \ \ \ \ z\ =\ np.fromfile(f,\ dtype=x.dtype,\ offset=offset\_bytes)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05490}05490\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(z,\ x.flat[offset\_items+count\_items+1:])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05491}05491\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05492}05492\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ \textcolor{stringliteral}{'wb'})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05493}05493\ \ \ \ \ \ \ \ \ \ \ \ \ x.tofile(f,\ sep=\textcolor{stringliteral}{"{},"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05494}05494\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05495}05495\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ \textcolor{stringliteral}{'rb'})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05496}05496\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises\_regex(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05497}05497\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TypeError,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05498}05498\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}'offset'\ argument\ only\ permitted\ for\ binary\ files"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05499}05499\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.fromfile,\ tmp\_filename,\ dtype=x.dtype,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05500}05500\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sep=\textcolor{stringliteral}{"{},"{}},\ offset=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05501}05501\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05502}05502\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.skipif(IS\_PYPY,\ reason="{}bug\ in\ PyPy's\ PyNumber\_AsSsize\_t"{})}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05503}05503\ \ \ \ \ \textcolor{keyword}{def\ }test\_fromfile\_bad\_dup(self,\ x,\ tmp\_filename):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05504}05504\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }dup\_str(fd):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05505}05505\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{'abc'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05506}05506\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05507}05507\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }dup\_bigint(fd):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05508}05508\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 2**68}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05509}05509\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05510}05510\ \ \ \ \ \ \ \ \ old\_dup\ =\ os.dup}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05511}05511\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05512}05512\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ \textcolor{stringliteral}{'wb'})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05513}05513\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x.tofile(f)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05514}05514\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dup,\ exc\ \textcolor{keywordflow}{in}\ ((dup\_str,\ TypeError),\ (dup\_bigint,\ OSError)):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05515}05515\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ os.dup\ =\ dup}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05516}05516\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(exc,\ np.fromfile,\ f)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05517}05517\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{finally}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05518}05518\ \ \ \ \ \ \ \ \ \ \ \ \ os.dup\ =\ old\_dup}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05519}05519\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05520}05520\ \ \ \ \ \textcolor{keyword}{def\ }\_check\_from(self,\ s,\ value,\ filename,\ **kw):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05521}05521\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{stringliteral}{'sep'}\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ kw:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05522}05522\ \ \ \ \ \ \ \ \ \ \ \ \ y\ =\ np.frombuffer(s,\ **kw)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05523}05523\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05524}05524\ \ \ \ \ \ \ \ \ \ \ \ \ y\ =\ np.fromstring(s,\ **kw)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05525}05525\ \ \ \ \ \ \ \ \ assert\_array\_equal(y,\ value)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05526}05526\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05527}05527\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(filename,\ \textcolor{stringliteral}{'wb'})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05528}05528\ \ \ \ \ \ \ \ \ \ \ \ \ f.write(s)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05529}05529\ \ \ \ \ \ \ \ \ y\ =\ np.fromfile(filename,\ **kw)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05530}05530\ \ \ \ \ \ \ \ \ assert\_array\_equal(y,\ value)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05531}05531\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05532}05532\ \ \ \ \ \textcolor{preprocessor}{@pytest.fixture(params=["{}period"{},\ "{}comma"{}])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05533}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestIO_ab4a9a046c2b246029ea933a254d80184}{05533}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestIO_ab4a9a046c2b246029ea933a254d80184}{decimal\_sep\_localization}}(self,\ request):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05534}05534\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05535}05535\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Including\ this\ fixture\ in\ a\ test\ will\ automatically}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05536}05536\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ execute\ it\ with\ both\ types\ of\ decimal\ separator.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05537}05537\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05538}05538\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ So::}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05539}05539\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05540}05540\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ def\ test\_decimal(decimal\_sep\_localization):}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05541}05541\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pass}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05542}05542\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05543}05543\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ is\ equivalent\ to\ the\ following\ two\ tests::}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05544}05544\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05545}05545\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ def\ test\_decimal\_period\_separator():}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05546}05546\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pass}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05547}05547\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05548}05548\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ def\ test\_decimal\_comma\_separator():}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05549}05549\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ with\ CommaDecimalPointLocale():}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05550}05550\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pass}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05551}05551\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05552}05552\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ request.param\ ==\ \textcolor{stringliteral}{"{}period"{}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05553}05553\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{yield}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05554}05554\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ request.param\ ==\ \textcolor{stringliteral}{"{}comma"{}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05555}05555\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ \mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1__locales_1_1CommaDecimalPointLocale}{CommaDecimalPointLocale}}():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05556}05556\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{yield}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05557}05557\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05558}05558\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ \textcolor{keyword}{False},\ request.param}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05559}05559\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05560}05560\ \ \ \ \ \textcolor{keyword}{def\ }test\_nan(self,\ tmp\_filename,\ decimal\_sep\_localization):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05561}05561\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestIO_a883be2f10b17ec9ead107adcfb410ca8}{\_check\_from}}(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05562}05562\ \ \ \ \ \ \ \ \ \ \ \ \ b\textcolor{stringliteral}{"{}nan\ +nan\ -\/nan\ NaN\ nan(foo)\ +NaN(BAR)\ -\/NAN(q\_u\_u\_x\_)"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05563}05563\ \ \ \ \ \ \ \ \ \ \ \ \ [np.nan,\ np.nan,\ np.nan,\ np.nan,\ np.nan,\ np.nan,\ np.nan],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05564}05564\ \ \ \ \ \ \ \ \ \ \ \ \ tmp\_filename,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05565}05565\ \ \ \ \ \ \ \ \ \ \ \ \ sep=\textcolor{stringliteral}{'\ '})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05566}05566\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05567}05567\ \ \ \ \ \textcolor{keyword}{def\ }test\_inf(self,\ tmp\_filename,\ decimal\_sep\_localization):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05568}05568\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestIO_a883be2f10b17ec9ead107adcfb410ca8}{\_check\_from}}(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05569}05569\ \ \ \ \ \ \ \ \ \ \ \ \ b\textcolor{stringliteral}{"{}inf\ +inf\ -\/inf\ infinity\ -\/Infinity\ iNfInItY\ -\/inF"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05570}05570\ \ \ \ \ \ \ \ \ \ \ \ \ [np.inf,\ np.inf,\ -\/np.inf,\ np.inf,\ -\/np.inf,\ np.inf,\ -\/np.inf],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05571}05571\ \ \ \ \ \ \ \ \ \ \ \ \ tmp\_filename,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05572}05572\ \ \ \ \ \ \ \ \ \ \ \ \ sep=\textcolor{stringliteral}{'\ '})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05573}05573\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05574}05574\ \ \ \ \ \textcolor{keyword}{def\ }test\_numbers(self,\ tmp\_filename,\ decimal\_sep\_localization):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05575}05575\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestIO_a883be2f10b17ec9ead107adcfb410ca8}{\_check\_from}}(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05576}05576\ \ \ \ \ \ \ \ \ \ \ \ \ b\textcolor{stringliteral}{"{}1.234\ -\/1.234\ .3\ .3e55\ -\/123133.1231e+133"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05577}05577\ \ \ \ \ \ \ \ \ \ \ \ \ [1.234,\ -\/1.234,\ .3,\ .3e55,\ -\/123133.1231e+133],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05578}05578\ \ \ \ \ \ \ \ \ \ \ \ \ tmp\_filename,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05579}05579\ \ \ \ \ \ \ \ \ \ \ \ \ sep=\textcolor{stringliteral}{'\ '})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05580}05580\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05581}05581\ \ \ \ \ \textcolor{keyword}{def\ }test\_binary(self,\ tmp\_filename):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05582}05582\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestIO_a883be2f10b17ec9ead107adcfb410ca8}{\_check\_from}}(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05583}05583\ \ \ \ \ \ \ \ \ \ \ \ \ b\textcolor{stringliteral}{'\(\backslash\)x00\(\backslash\)x00\(\backslash\)x80?\(\backslash\)x00\(\backslash\)x00\(\backslash\)x00@\(\backslash\)x00\(\backslash\)x00@@\(\backslash\)x00\(\backslash\)x00\(\backslash\)x80@'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05584}05584\ \ \ \ \ \ \ \ \ \ \ \ \ np.array([1,\ 2,\ 3,\ 4]),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05585}05585\ \ \ \ \ \ \ \ \ \ \ \ \ tmp\_filename,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05586}05586\ \ \ \ \ \ \ \ \ \ \ \ \ dtype=\textcolor{stringliteral}{'<f4'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05587}05587\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05588}05588\ \ \ \ \ \textcolor{keyword}{def\ }test\_string(self,\ tmp\_filename):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05589}05589\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestIO_a883be2f10b17ec9ead107adcfb410ca8}{\_check\_from}}(b\textcolor{stringliteral}{'1,2,3,4'},\ [1.,\ 2.,\ 3.,\ 4.],\ tmp\_filename,\ sep=\textcolor{stringliteral}{','})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05590}05590\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05591}05591\ \ \ \ \ \textcolor{keyword}{def\ }test\_counted\_string(self,\ tmp\_filename,\ decimal\_sep\_localization):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05592}05592\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestIO_a883be2f10b17ec9ead107adcfb410ca8}{\_check\_from}}(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05593}05593\ \ \ \ \ \ \ \ \ \ \ \ \ b\textcolor{stringliteral}{'1,2,3,4'},\ [1.,\ 2.,\ 3.,\ 4.],\ tmp\_filename,\ count=4,\ sep=\textcolor{stringliteral}{','})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05594}05594\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestIO_a883be2f10b17ec9ead107adcfb410ca8}{\_check\_from}}(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05595}05595\ \ \ \ \ \ \ \ \ \ \ \ \ b\textcolor{stringliteral}{'1,2,3,4'},\ [1.,\ 2.,\ 3.],\ tmp\_filename,\ count=3,\ sep=\textcolor{stringliteral}{','})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05596}05596\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestIO_a883be2f10b17ec9ead107adcfb410ca8}{\_check\_from}}(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05597}05597\ \ \ \ \ \ \ \ \ \ \ \ \ b\textcolor{stringliteral}{'1,2,3,4'},\ [1.,\ 2.,\ 3.,\ 4.],\ tmp\_filename,\ count=-\/1,\ sep=\textcolor{stringliteral}{','})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05598}05598\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05599}05599\ \ \ \ \ \textcolor{keyword}{def\ }test\_string\_with\_ws(self,\ tmp\_filename):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05600}05600\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestIO_a883be2f10b17ec9ead107adcfb410ca8}{\_check\_from}}(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05601}05601\ \ \ \ \ \ \ \ \ \ \ \ \ b\textcolor{stringliteral}{'1\ 2\ \ 3\ \ \ \ \ 4\ \ \ '},\ [1,\ 2,\ 3,\ 4],\ tmp\_filename,\ dtype=int,\ sep=\textcolor{stringliteral}{'\ '})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05602}05602\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05603}05603\ \ \ \ \ \textcolor{keyword}{def\ }test\_counted\_string\_with\_ws(self,\ tmp\_filename):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05604}05604\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestIO_a883be2f10b17ec9ead107adcfb410ca8}{\_check\_from}}(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05605}05605\ \ \ \ \ \ \ \ \ \ \ \ \ b\textcolor{stringliteral}{'1\ 2\ \ 3\ \ \ \ \ 4\ \ \ '},\ [1,\ 2,\ 3],\ tmp\_filename,\ count=3,\ dtype=int,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05606}05606\ \ \ \ \ \ \ \ \ \ \ \ \ sep=\textcolor{stringliteral}{'\ '})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05607}05607\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05608}05608\ \ \ \ \ \textcolor{keyword}{def\ }test\_ascii(self,\ tmp\_filename,\ decimal\_sep\_localization):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05609}05609\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestIO_a883be2f10b17ec9ead107adcfb410ca8}{\_check\_from}}(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05610}05610\ \ \ \ \ \ \ \ \ \ \ \ \ b\textcolor{stringliteral}{'1\ ,\ 2\ ,\ 3\ ,\ 4'},\ [1.,\ 2.,\ 3.,\ 4.],\ tmp\_filename,\ sep=\textcolor{stringliteral}{','})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05611}05611\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestIO_a883be2f10b17ec9ead107adcfb410ca8}{\_check\_from}}(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05612}05612\ \ \ \ \ \ \ \ \ \ \ \ \ b\textcolor{stringliteral}{'1,2,3,4'},\ [1.,\ 2.,\ 3.,\ 4.],\ tmp\_filename,\ dtype=float,\ sep=\textcolor{stringliteral}{','})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05613}05613\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05614}05614\ \ \ \ \ \textcolor{keyword}{def\ }test\_malformed(self,\ tmp\_filename,\ decimal\_sep\_localization):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05615}05615\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_warns(DeprecationWarning):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05616}05616\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestIO_a883be2f10b17ec9ead107adcfb410ca8}{\_check\_from}}(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05617}05617\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ b\textcolor{stringliteral}{'1.234\ 1,234'},\ [1.234,\ 1.],\ tmp\_filename,\ sep=\textcolor{stringliteral}{'\ '})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05618}05618\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05619}05619\ \ \ \ \ \textcolor{keyword}{def\ }test\_long\_sep(self,\ tmp\_filename):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05620}05620\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestIO_a883be2f10b17ec9ead107adcfb410ca8}{\_check\_from}}(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05621}05621\ \ \ \ \ \ \ \ \ \ \ \ \ b\textcolor{stringliteral}{'1\_x\_3\_x\_4\_x\_5'},\ [1,\ 3,\ 4,\ 5],\ tmp\_filename,\ sep=\textcolor{stringliteral}{'\_x\_'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05622}05622\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05623}05623\ \ \ \ \ \textcolor{keyword}{def\ }test\_dtype(self,\ tmp\_filename):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05624}05624\ \ \ \ \ \ \ \ \ v\ =\ np.array([1,\ 2,\ 3,\ 4],\ dtype=np.int\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05625}05625\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestIO_a883be2f10b17ec9ead107adcfb410ca8}{\_check\_from}}(b\textcolor{stringliteral}{'1,2,3,4'},\ v,\ tmp\_filename,\ sep=\textcolor{stringliteral}{','},\ dtype=np.int\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05626}05626\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05627}05627\ \ \ \ \ \textcolor{keyword}{def\ }test\_dtype\_bool(self,\ tmp\_filename):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05628}05628\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ can't\ use\ \_check\_from\ because\ fromstring\ can't\ handle\ True/False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05629}05629\ \ \ \ \ \ \ \ \ v\ =\ np.array([\textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False}],\ dtype=np.bool\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05630}05630\ \ \ \ \ \ \ \ \ s\ =\ b\textcolor{stringliteral}{'1,0,-\/2.3,0'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05631}05631\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ \textcolor{stringliteral}{'wb'})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05632}05632\ \ \ \ \ \ \ \ \ \ \ \ \ f.write(s)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05633}05633\ \ \ \ \ \ \ \ \ y\ =\ np.fromfile(tmp\_filename,\ sep=\textcolor{stringliteral}{','},\ dtype=np.bool\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05634}05634\ \ \ \ \ \ \ \ \ assert\_(y.dtype\ ==\ \textcolor{stringliteral}{'?'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05635}05635\ \ \ \ \ \ \ \ \ assert\_array\_equal(y,\ v)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05636}05636\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05637}05637\ \ \ \ \ \textcolor{keyword}{def\ }test\_tofile\_sep(self,\ tmp\_filename,\ decimal\_sep\_localization):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05638}05638\ \ \ \ \ \ \ \ \ x\ =\ np.array([1.51,\ 2,\ 3.51,\ 4],\ dtype=float)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05639}05639\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ \textcolor{stringliteral}{'w'})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05640}05640\ \ \ \ \ \ \ \ \ \ \ \ \ x.tofile(f,\ sep=\textcolor{stringliteral}{','})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05641}05641\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ \textcolor{stringliteral}{'r'})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05642}05642\ \ \ \ \ \ \ \ \ \ \ \ \ s\ =\ f.read()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05643}05643\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#assert\_equal(s,\ '1.51,2.0,3.51,4.0')}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05644}05644\ \ \ \ \ \ \ \ \ y\ =\ np.array([float(p)\ \textcolor{keywordflow}{for}\ p\ \textcolor{keywordflow}{in}\ s.split(\textcolor{stringliteral}{','})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05645}05645\ \ \ \ \ \ \ \ \ assert\_array\_equal(x,y)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05646}05646\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05647}05647\ \ \ \ \ \textcolor{keyword}{def\ }test\_tofile\_format(self,\ tmp\_filename,\ decimal\_sep\_localization):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05648}05648\ \ \ \ \ \ \ \ \ x\ =\ np.array([1.51,\ 2,\ 3.51,\ 4],\ dtype=float)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05649}05649\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ \textcolor{stringliteral}{'w'})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05650}05650\ \ \ \ \ \ \ \ \ \ \ \ \ x.tofile(f,\ sep=\textcolor{stringliteral}{','},\ format=\textcolor{stringliteral}{'\%.2f'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05651}05651\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ \textcolor{stringliteral}{'r'})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05652}05652\ \ \ \ \ \ \ \ \ \ \ \ \ s\ =\ f.read()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05653}05653\ \ \ \ \ \ \ \ \ assert\_equal(s,\ \textcolor{stringliteral}{'1.51,2.00,3.51,4.00'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05654}05654\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05655}05655\ \ \ \ \ \textcolor{keyword}{def\ }test\_tofile\_cleanup(self,\ tmp\_filename):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05656}05656\ \ \ \ \ \ \ \ \ x\ =\ np.zeros((10),\ dtype=object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05657}05657\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ \textcolor{stringliteral}{'wb'})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05658}05658\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(OSError,\ \textcolor{keyword}{lambda}:\ x.tofile(f,\ sep=\textcolor{stringliteral}{''}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05659}05659\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Dup-\/ed\ file\ handle\ should\ be\ closed\ or\ remove\ will\ fail\ on\ Windows\ OS}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05660}05660\ \ \ \ \ \ \ \ \ os.remove(tmp\_filename)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05661}05661\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05662}05662\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Also\ make\ sure\ that\ we\ close\ the\ Python\ handle}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05663}05663\ \ \ \ \ \ \ \ \ assert\_raises(OSError,\ \textcolor{keyword}{lambda}:\ x.tofile(tmp\_filename))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05664}05664\ \ \ \ \ \ \ \ \ os.remove(tmp\_filename)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05665}05665\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05666}05666\ \ \ \ \ \textcolor{keyword}{def\ }test\_fromfile\_subarray\_binary(self,\ tmp\_filename):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05667}05667\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ subarray\ dtypes\ which\ are\ absorbed\ into\ the\ shape}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05668}05668\ \ \ \ \ \ \ \ \ x\ =\ np.arange(24,\ dtype=\textcolor{stringliteral}{"{}i4"{}}).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,\ 3,\ 4)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05669}05669\ \ \ \ \ \ \ \ \ x.tofile(tmp\_filename)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05670}05670\ \ \ \ \ \ \ \ \ res\ =\ np.fromfile(tmp\_filename,\ dtype=\textcolor{stringliteral}{"{}(3,4)i4"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05671}05671\ \ \ \ \ \ \ \ \ assert\_array\_equal(x,\ res)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05672}05672\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05673}05673\ \ \ \ \ \ \ \ \ x\_str\ =\ x.tobytes()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05674}05674\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_warns(DeprecationWarning):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05675}05675\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ binary\ fromstring\ is\ deprecated}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05676}05676\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ np.fromstring(x\_str,\ dtype=\textcolor{stringliteral}{"{}(3,4)i4"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05677}05677\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(x,\ res)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05678}05678\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05679}05679\ \ \ \ \ \textcolor{keyword}{def\ }test\_parsing\_subarray\_unsupported(self,\ tmp\_filename):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05680}05680\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ We\ currently\ do\ not\ support\ parsing\ subarray\ dtypes}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05681}05681\ \ \ \ \ \ \ \ \ data\ =\ \textcolor{stringliteral}{"{}12,42,13,"{}}\ *\ 50}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05682}05682\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05683}05683\ \ \ \ \ \ \ \ \ \ \ \ \ expected\ =\ np.fromstring(data,\ dtype=\textcolor{stringliteral}{"{}(3,)i"{}},\ sep=\textcolor{stringliteral}{"{},"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05684}05684\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05685}05685\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(tmp\_filename,\ \textcolor{stringliteral}{"{}w"{}})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05686}05686\ \ \ \ \ \ \ \ \ \ \ \ \ f.write(data)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05687}05687\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05688}05688\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05689}05689\ \ \ \ \ \ \ \ \ \ \ \ \ np.fromfile(tmp\_filename,\ dtype=\textcolor{stringliteral}{"{}(3,)i"{}},\ sep=\textcolor{stringliteral}{"{},"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05690}05690\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05691}05691\ \ \ \ \ \textcolor{keyword}{def\ }test\_read\_shorter\_than\_count\_subarray(self,\ tmp\_filename):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05692}05692\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ that\ requesting\ more\ values\ does\ not\ cause\ any\ problems}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05693}05693\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ in\ conjunction\ with\ subarray\ dimensions\ being\ absorbed\ into\ the}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05694}05694\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ array\ dimension.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05695}05695\ \ \ \ \ \ \ \ \ expected\ =\ np.arange(511\ *\ 10,\ dtype=\textcolor{stringliteral}{"{}i"{}}).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(-\/1,\ 10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05696}05696\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05697}05697\ \ \ \ \ \ \ \ \ binary\ =\ expected.tobytes()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05698}05698\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05699}05699\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.warns(DeprecationWarning):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05700}05700\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.fromstring(binary,\ dtype=\textcolor{stringliteral}{"{}(10,)i"{}},\ count=10000)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05701}05701\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05702}05702\ \ \ \ \ \ \ \ \ expected.tofile(tmp\_filename)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05703}05703\ \ \ \ \ \ \ \ \ res\ =\ np.fromfile(tmp\_filename,\ dtype=\textcolor{stringliteral}{"{}(10,)i"{}},\ count=10000)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05704}05704\ \ \ \ \ \ \ \ \ assert\_array\_equal(res,\ expected)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05705}05705\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05706}05706\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05707}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFromBuffer}{05707}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFromBuffer}{TestFromBuffer}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05708}05708\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize('byteorder',\ ['<',\ '>'])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05709}05709\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize('dtype',\ [float,\ int,\ complex])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05710}05710\ \ \ \ \ \textcolor{keyword}{def\ }test\_basic(self,\ byteorder,\ dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05711}05711\ \ \ \ \ \ \ \ \ dt\ =\ np.dtype(dtype).newbyteorder(byteorder)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05712}05712\ \ \ \ \ \ \ \ \ x\ =\ (np.random.random((4,\ 7))\ *\ 5).astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05713}05713\ \ \ \ \ \ \ \ \ buf\ =\ x.tobytes()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05714}05714\ \ \ \ \ \ \ \ \ assert\_array\_equal(np.frombuffer(buf,\ dtype=dt),\ x.flat)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05715}05715\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05716}05716\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}obj"{},\ [np.arange(10)},\ b\textcolor{stringliteral}{"{}12345678"{}}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05717}05717\ \ \ \ \ \textcolor{keyword}{def\ }test\_array\_base(self,\ obj):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05718}05718\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Objects\ (including\ NumPy\ arrays),\ which\ do\ not\ use\ the}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05719}05719\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \`{}release\_buffer`\ slot\ should\ be\ directly\ used\ as\ a\ base\ object.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05720}05720\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ See\ also\ gh-\/21612}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05721}05721\ \ \ \ \ \ \ \ \ new\ =\ np.frombuffer(obj)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05722}05722\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ new.base\ \textcolor{keywordflow}{is}\ obj}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05723}05723\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05724}05724\ \ \ \ \ \textcolor{keyword}{def\ }test\_empty(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05725}05725\ \ \ \ \ \ \ \ \ assert\_array\_equal(np.frombuffer(b\textcolor{stringliteral}{''}),\ np.array([]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05726}05726\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05727}05727\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.skipif}(IS\_PYPY,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05728}05728\ \ \ \ \ \ \ \ \ \ \ \ \ reason=\textcolor{stringliteral}{"{}PyPy's\ memoryview\ currently\ does\ not\ track\ exports.\ See:\ "{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05729}05729\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}https://foss.heptapod.net/pypy/pypy/-\//issues/3724"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05730}05730\ \ \ \ \ \textcolor{keyword}{def\ }test\_mmap\_close(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05731}05731\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ old\ buffer\ protocol\ was\ not\ safe\ for\ some\ things\ that\ the\ new}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05732}05732\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ one\ is.\ \ But\ \`{}frombuffer`\ always\ used\ the\ old\ one\ for\ a\ long\ time.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05733}05733\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Checks\ that\ it\ is\ safe\ with\ the\ new\ one\ (using\ memoryviews)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05734}05734\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ tempfile.TemporaryFile(mode=\textcolor{stringliteral}{'wb'})\ \textcolor{keyword}{as}\ tmp:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05735}05735\ \ \ \ \ \ \ \ \ \ \ \ \ tmp.write(b\textcolor{stringliteral}{"{}asdf"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05736}05736\ \ \ \ \ \ \ \ \ \ \ \ \ tmp.flush()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05737}05737\ \ \ \ \ \ \ \ \ \ \ \ \ mm\ =\ mmap.mmap(tmp.fileno(),\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05738}05738\ \ \ \ \ \ \ \ \ \ \ \ \ arr\ =\ np.frombuffer(mm,\ dtype=np.uint8)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05739}05739\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(BufferError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05740}05740\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mm.close()\ \ \textcolor{comment}{\#\ cannot\ close\ while\ array\ uses\ the\ buffer}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05741}05741\ \ \ \ \ \ \ \ \ \ \ \ \ del\ arr}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05742}05742\ \ \ \ \ \ \ \ \ \ \ \ \ mm.close()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05743}05743\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05744}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFlat}{05744}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFlat}{TestFlat}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05745}05745\ \ \ \ \ \textcolor{keyword}{def\ }setup\_method(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05746}05746\ \ \ \ \ \ \ \ \ a0\ =\ np.arange(20.0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05747}05747\ \ \ \ \ \ \ \ \ a\ =\ a0.reshape(4,\ 5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05748}05748\ \ \ \ \ \ \ \ \ a0.shape\ =\ (4,\ 5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05749}05749\ \ \ \ \ \ \ \ \ a.flags.writeable\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05750}05750\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFlat_abc07ce19feace2e84a2fe364814d7727}{a}}\ =\ a}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05751}05751\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFlat_a5f44e33d12060889d23df2428d6ee7c4}{b}}\ =\ a[::2,\ ::2]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05752}05752\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFlat_a792b84e1c38d3473ad3d88d3c0ded2b7}{a0}}\ =\ a0}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05753}05753\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFlat_a4aa26ea6c564cd5ac965f62d3b2d99ef}{b0}}\ =\ a0[::2,\ ::2]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05754}05754\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05755}05755\ \ \ \ \ \textcolor{keyword}{def\ }test\_contiguous(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05756}05756\ \ \ \ \ \ \ \ \ testpassed\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05757}05757\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05758}05758\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFlat_abc07ce19feace2e84a2fe364814d7727}{a}}.flat[12]\ =\ 100.0}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05759}05759\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ ValueError:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05760}05760\ \ \ \ \ \ \ \ \ \ \ \ \ testpassed\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05761}05761\ \ \ \ \ \ \ \ \ assert\_(testpassed)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05762}05762\ \ \ \ \ \ \ \ \ assert\_(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFlat_abc07ce19feace2e84a2fe364814d7727}{a}}.flat[12]\ ==\ 12.0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05763}05763\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05764}05764\ \ \ \ \ \textcolor{keyword}{def\ }test\_discontiguous(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05765}05765\ \ \ \ \ \ \ \ \ testpassed\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05766}05766\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05767}05767\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFlat_a5f44e33d12060889d23df2428d6ee7c4}{b}}.flat[4]\ =\ 100.0}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05768}05768\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ ValueError:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05769}05769\ \ \ \ \ \ \ \ \ \ \ \ \ testpassed\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05770}05770\ \ \ \ \ \ \ \ \ assert\_(testpassed)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05771}05771\ \ \ \ \ \ \ \ \ assert\_(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFlat_a5f44e33d12060889d23df2428d6ee7c4}{b}}.flat[4]\ ==\ 12.0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05772}05772\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05773}05773\ \ \ \ \ \textcolor{keyword}{def\ }test\_\_\_array\_\_(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05774}05774\ \ \ \ \ \ \ \ \ c\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFlat_abc07ce19feace2e84a2fe364814d7727}{a}}.flat.\_\_array\_\_()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05775}05775\ \ \ \ \ \ \ \ \ d\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFlat_a5f44e33d12060889d23df2428d6ee7c4}{b}}.flat.\_\_array\_\_()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05776}05776\ \ \ \ \ \ \ \ \ e\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFlat_a792b84e1c38d3473ad3d88d3c0ded2b7}{a0}}.flat.\_\_array\_\_()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05777}05777\ \ \ \ \ \ \ \ \ f\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFlat_a4aa26ea6c564cd5ac965f62d3b2d99ef}{b0}}.flat.\_\_array\_\_()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05778}05778\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05779}05779\ \ \ \ \ \ \ \ \ assert\_(c.flags.writeable\ \textcolor{keywordflow}{is}\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05780}05780\ \ \ \ \ \ \ \ \ assert\_(d.flags.writeable\ \textcolor{keywordflow}{is}\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05781}05781\ \ \ \ \ \ \ \ \ assert\_(e.flags.writeable\ \textcolor{keywordflow}{is}\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05782}05782\ \ \ \ \ \ \ \ \ assert\_(f.flags.writeable\ \textcolor{keywordflow}{is}\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05783}05783\ \ \ \ \ \ \ \ \ assert\_(c.flags.writebackifcopy\ \textcolor{keywordflow}{is}\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05784}05784\ \ \ \ \ \ \ \ \ assert\_(d.flags.writebackifcopy\ \textcolor{keywordflow}{is}\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05785}05785\ \ \ \ \ \ \ \ \ assert\_(e.flags.writebackifcopy\ \textcolor{keywordflow}{is}\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05786}05786\ \ \ \ \ \ \ \ \ assert\_(f.flags.writebackifcopy\ \textcolor{keywordflow}{is}\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05787}05787\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05788}05788\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.skipif(not\ HAS\_REFCOUNT,\ reason="{}Python\ lacks\ refcounts"{})}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05789}05789\ \ \ \ \ \textcolor{keyword}{def\ }test\_refcount(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05790}05790\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ includes\ regression\ test\ for\ reference\ count\ error\ gh-\/13165}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05791}05791\ \ \ \ \ \ \ \ \ inds\ =\ [np.intp(0),\ np.array([\textcolor{keyword}{True}]*self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFlat_abc07ce19feace2e84a2fe364814d7727}{a}}.size),\ np.array([0]),\ \textcolor{keywordtype}{None}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05792}05792\ \ \ \ \ \ \ \ \ indtype\ =\ np.dtype(np.intp)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05793}05793\ \ \ \ \ \ \ \ \ rc\_indtype\ =\ sys.getrefcount(indtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05794}05794\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ ind\ \textcolor{keywordflow}{in}\ inds:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05795}05795\ \ \ \ \ \ \ \ \ \ \ \ \ rc\_ind\ =\ sys.getrefcount(ind)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05796}05796\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ \_\ \textcolor{keywordflow}{in}\ range(100):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05797}05797\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05798}05798\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFlat_abc07ce19feace2e84a2fe364814d7727}{a}}.flat[ind]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05799}05799\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ IndexError:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05800}05800\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05801}05801\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(abs(sys.getrefcount(ind)\ -\/\ rc\_ind)\ <\ 50)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05802}05802\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(abs(sys.getrefcount(indtype)\ -\/\ rc\_indtype)\ <\ 50)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05803}05803\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05804}05804\ \ \ \ \ \textcolor{keyword}{def\ }test\_index\_getset(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05805}05805\ \ \ \ \ \ \ \ \ it\ =\ np.arange(10).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,\ 1,\ 5).flat}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05806}05806\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(AttributeError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05807}05807\ \ \ \ \ \ \ \ \ \ \ \ \ it.index\ =\ 10}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05808}05808\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05809}05809\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ \_\ \textcolor{keywordflow}{in}\ it:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05810}05810\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05811}05811\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ the\ value\ of\ \`{}.index`\ is\ updated\ correctly\ (see\ also\ gh-\/19153)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05812}05812\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ If\ the\ type\ was\ incorrect,\ this\ would\ show\ up\ on\ big-\/endian\ machines}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05813}05813\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ it.index\ ==\ it.base.size}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05814}05814\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05815}05815\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05816}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestResize}{05816}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestResize}{TestResize}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05817}05817\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05818}05818\ \ \ \ \ \textcolor{preprocessor}{@\_no\_tracing}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05819}05819\ \ \ \ \ \textcolor{keyword}{def\ }test\_basic(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05820}05820\ \ \ \ \ \ \ \ \ x\ =\ np.array([[1,\ 0,\ 0],\ [0,\ 1,\ 0],\ [0,\ 0,\ 1]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05821}05821\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ IS\_PYPY:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05822}05822\ \ \ \ \ \ \ \ \ \ \ \ \ x.resize((5,\ 5),\ refcheck=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05823}05823\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05824}05824\ \ \ \ \ \ \ \ \ \ \ \ \ x.resize((5,\ 5))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05825}05825\ \ \ \ \ \ \ \ \ assert\_array\_equal(x.flat[:9],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05826}05826\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([[1,\ 0,\ 0],\ [0,\ 1,\ 0],\ [0,\ 0,\ 1]]).flat)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05827}05827\ \ \ \ \ \ \ \ \ assert\_array\_equal(x[9:].flat,\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05828}05828\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05829}05829\ \ \ \ \ \textcolor{keyword}{def\ }test\_check\_reference(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05830}05830\ \ \ \ \ \ \ \ \ x\ =\ np.array([[1,\ 0,\ 0],\ [0,\ 1,\ 0],\ [0,\ 0,\ 1]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05831}05831\ \ \ \ \ \ \ \ \ y\ =\ x}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05832}05832\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ x.resize,\ (5,\ 1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05833}05833\ \ \ \ \ \ \ \ \ del\ y\ \ \textcolor{comment}{\#\ avoid\ pyflakes\ unused\ variable\ warning.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05834}05834\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05835}05835\ \ \ \ \ \textcolor{preprocessor}{@\_no\_tracing}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05836}05836\ \ \ \ \ \textcolor{keyword}{def\ }test\_int\_shape(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05837}05837\ \ \ \ \ \ \ \ \ x\ =\ np.eye(3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05838}05838\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ IS\_PYPY:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05839}05839\ \ \ \ \ \ \ \ \ \ \ \ \ x.resize(3,\ refcheck=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05840}05840\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05841}05841\ \ \ \ \ \ \ \ \ \ \ \ \ x.resize(3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05842}05842\ \ \ \ \ \ \ \ \ assert\_array\_equal(x,\ np.eye(3)[0,:])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05843}05843\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05844}05844\ \ \ \ \ \textcolor{keyword}{def\ }test\_none\_shape(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05845}05845\ \ \ \ \ \ \ \ \ x\ =\ np.eye(3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05846}05846\ \ \ \ \ \ \ \ \ x.resize(\textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05847}05847\ \ \ \ \ \ \ \ \ assert\_array\_equal(x,\ np.eye(3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05848}05848\ \ \ \ \ \ \ \ \ x.resize()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05849}05849\ \ \ \ \ \ \ \ \ assert\_array\_equal(x,\ np.eye(3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05850}05850\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05851}05851\ \ \ \ \ \textcolor{keyword}{def\ }test\_0d\_shape(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05852}05852\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ to\ it\ multiple\ times\ to\ test\ it\ does\ not\ break\ alloc\ cache\ gh-\/9216}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05853}05853\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(10):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05854}05854\ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ np.empty((1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05855}05855\ \ \ \ \ \ \ \ \ \ \ \ \ x.resize(())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05856}05856\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(x.shape,\ ())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05857}05857\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(x.size,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05858}05858\ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ np.empty(())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05859}05859\ \ \ \ \ \ \ \ \ \ \ \ \ x.resize((1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05860}05860\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(x.shape,\ (1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05861}05861\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(x.size,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05862}05862\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05863}05863\ \ \ \ \ \textcolor{keyword}{def\ }test\_invalid\_arguments(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05864}05864\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ np.eye(3).resize,\ \textcolor{stringliteral}{'hi'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05865}05865\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.eye(3).resize,\ -\/1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05866}05866\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ np.eye(3).resize,\ order=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05867}05867\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ np.eye(3).resize,\ refcheck=\textcolor{stringliteral}{'hi'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05868}05868\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05869}05869\ \ \ \ \ \textcolor{preprocessor}{@\_no\_tracing}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05870}05870\ \ \ \ \ \textcolor{keyword}{def\ }test\_freeform\_shape(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05871}05871\ \ \ \ \ \ \ \ \ x\ =\ np.eye(3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05872}05872\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ IS\_PYPY:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05873}05873\ \ \ \ \ \ \ \ \ \ \ \ \ x.resize(3,\ 2,\ 1,\ refcheck=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05874}05874\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05875}05875\ \ \ \ \ \ \ \ \ \ \ \ \ x.resize(3,\ 2,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05876}05876\ \ \ \ \ \ \ \ \ assert\_(x.shape\ ==\ (3,\ 2,\ 1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05877}05877\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05878}05878\ \ \ \ \ \textcolor{preprocessor}{@\_no\_tracing}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05879}05879\ \ \ \ \ \textcolor{keyword}{def\ }test\_zeros\_appended(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05880}05880\ \ \ \ \ \ \ \ \ x\ =\ np.eye(3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05881}05881\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ IS\_PYPY:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05882}05882\ \ \ \ \ \ \ \ \ \ \ \ \ x.resize(2,\ 3,\ 3,\ refcheck=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05883}05883\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05884}05884\ \ \ \ \ \ \ \ \ \ \ \ \ x.resize(2,\ 3,\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05885}05885\ \ \ \ \ \ \ \ \ assert\_array\_equal(x[0],\ np.eye(3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05886}05886\ \ \ \ \ \ \ \ \ assert\_array\_equal(x[1],\ np.zeros((3,\ 3)))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05887}05887\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05888}05888\ \ \ \ \ \textcolor{preprocessor}{@\_no\_tracing}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05889}05889\ \ \ \ \ \textcolor{keyword}{def\ }test\_obj\_obj(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05890}05890\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ memory\ is\ initialized\ on\ resize,\ gh-\/4857}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05891}05891\ \ \ \ \ \ \ \ \ a\ =\ np.ones(10,\ dtype=[(\textcolor{stringliteral}{'k'},\ object,\ 2)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05892}05892\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ IS\_PYPY:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05893}05893\ \ \ \ \ \ \ \ \ \ \ \ \ a.resize(15,\ refcheck=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05894}05894\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05895}05895\ \ \ \ \ \ \ \ \ \ \ \ \ a.resize(15,)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05896}05896\ \ \ \ \ \ \ \ \ assert\_equal(a.shape,\ (15,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05897}05897\ \ \ \ \ \ \ \ \ assert\_array\_equal(a[\textcolor{stringliteral}{'k'}][-\/5:],\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05898}05898\ \ \ \ \ \ \ \ \ assert\_array\_equal(a[\textcolor{stringliteral}{'k'}][:-\/5],\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05899}05899\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05900}05900\ \ \ \ \ \textcolor{keyword}{def\ }test\_empty\_view(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05901}05901\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ that\ sizes\ containing\ a\ zero\ don't\ trigger\ a\ reallocate\ for}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05902}05902\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ already\ empty\ arrays}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05903}05903\ \ \ \ \ \ \ \ \ x\ =\ np.zeros((10,\ 0),\ int)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05904}05904\ \ \ \ \ \ \ \ \ x\_view\ =\ x[...]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05905}05905\ \ \ \ \ \ \ \ \ x\_view.resize((0,\ 10))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05906}05906\ \ \ \ \ \ \ \ \ x\_view.resize((0,\ 100))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05907}05907\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05908}05908\ \ \ \ \ \textcolor{keyword}{def\ }test\_check\_weakref(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05909}05909\ \ \ \ \ \ \ \ \ x\ =\ np.array([[1,\ 0,\ 0],\ [0,\ 1,\ 0],\ [0,\ 0,\ 1]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05910}05910\ \ \ \ \ \ \ \ \ xref\ =\ weakref.ref(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05911}05911\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ x.resize,\ (5,\ 1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05912}05912\ \ \ \ \ \ \ \ \ del\ xref\ \ \textcolor{comment}{\#\ avoid\ pyflakes\ unused\ variable\ warning.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05913}05913\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05914}05914\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05915}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestRecord}{05915}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestRecord}{TestRecord}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05916}05916\ \ \ \ \ \textcolor{keyword}{def\ }test\_field\_rename(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05917}05917\ \ \ \ \ \ \ \ \ dt\ =\ np.dtype([(\textcolor{stringliteral}{'f'},\ float),\ (\textcolor{stringliteral}{'i'},\ int)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05918}05918\ \ \ \ \ \ \ \ \ dt.names\ =\ [\textcolor{stringliteral}{'p'},\ \textcolor{stringliteral}{'q'}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05919}05919\ \ \ \ \ \ \ \ \ assert\_equal(dt.names,\ [\textcolor{stringliteral}{'p'},\ \textcolor{stringliteral}{'q'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05920}05920\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05921}05921\ \ \ \ \ \textcolor{keyword}{def\ }test\_multiple\_field\_name\_occurrence(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05922}05922\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }test\_dtype\_init():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05923}05923\ \ \ \ \ \ \ \ \ \ \ \ \ np.dtype([(\textcolor{stringliteral}{"{}A"{}},\ \textcolor{stringliteral}{"{}f8"{}}),\ (\textcolor{stringliteral}{"{}B"{}},\ \textcolor{stringliteral}{"{}f8"{}}),\ (\textcolor{stringliteral}{"{}A"{}},\ \textcolor{stringliteral}{"{}f8"{}})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05924}05924\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05925}05925\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Error\ raised\ when\ multiple\ fields\ have\ the\ same\ name}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05926}05926\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ test\_dtype\_init)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05927}05927\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05928}05928\ \ \ \ \ \textcolor{keyword}{def\ }test\_bytes\_fields(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05929}05929\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Bytes\ are\ not\ allowed\ in\ field\ names\ and\ not\ recognized\ in\ titles}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05930}05930\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ on\ Py3}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05931}05931\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ np.dtype,\ [(b\textcolor{stringliteral}{'a'},\ int)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05932}05932\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ np.dtype,\ [((\textcolor{stringliteral}{'b'},\ b\textcolor{stringliteral}{'a'}),\ int)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05933}05933\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05934}05934\ \ \ \ \ \ \ \ \ dt\ =\ np.dtype([((b\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'b'}),\ int)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05935}05935\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ dt.\_\_getitem\_\_,\ b\textcolor{stringliteral}{'a'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05936}05936\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05937}05937\ \ \ \ \ \ \ \ \ x\ =\ np.array([(1,),\ (2,),\ (3,)],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05938}05938\ \ \ \ \ \ \ \ \ assert\_raises(IndexError,\ x.\_\_getitem\_\_,\ b\textcolor{stringliteral}{'a'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05939}05939\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05940}05940\ \ \ \ \ \ \ \ \ y\ =\ x[0]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05941}05941\ \ \ \ \ \ \ \ \ assert\_raises(IndexError,\ y.\_\_getitem\_\_,\ b\textcolor{stringliteral}{'a'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05942}05942\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05943}05943\ \ \ \ \ \textcolor{keyword}{def\ }test\_multiple\_field\_name\_unicode(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05944}05944\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }test\_dtype\_unicode():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05945}05945\ \ \ \ \ \ \ \ \ \ \ \ \ np.dtype([(\textcolor{stringliteral}{"{}\(\backslash\)u20B9"{}},\ \textcolor{stringliteral}{"{}f8"{}}),\ (\textcolor{stringliteral}{"{}B"{}},\ \textcolor{stringliteral}{"{}f8"{}}),\ (\textcolor{stringliteral}{"{}\(\backslash\)u20B9"{}},\ \textcolor{stringliteral}{"{}f8"{}})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05946}05946\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05947}05947\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Error\ raised\ when\ multiple\ fields\ have\ the\ same\ name(unicode\ included)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05948}05948\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ test\_dtype\_unicode)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05949}05949\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05950}05950\ \ \ \ \ \textcolor{keyword}{def\ }test\_fromarrays\_unicode(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05951}05951\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ A\ single\ name\ string\ provided\ to\ fromarrays()\ is\ allowed\ to\ be\ unicode}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05952}05952\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ on\ both\ Python\ 2\ and\ 3:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05953}05953\ \ \ \ \ \ \ \ \ x\ =\ np.core.records.fromarrays(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05954}05954\ \ \ \ \ \ \ \ \ \ \ \ \ [[0],\ [1]],\ names=\textcolor{stringliteral}{'a,b'},\ formats=\textcolor{stringliteral}{'i4,i4'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05955}05955\ \ \ \ \ \ \ \ \ assert\_equal(x[\textcolor{stringliteral}{'a'}][0],\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05956}05956\ \ \ \ \ \ \ \ \ assert\_equal(x[\textcolor{stringliteral}{'b'}][0],\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05957}05957\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05958}05958\ \ \ \ \ \textcolor{keyword}{def\ }test\_unicode\_order(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05959}05959\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ that\ we\ can\ sort\ with\ order\ as\ a\ unicode\ field\ name\ in\ both\ Python\ 2\ and}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05960}05960\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 3:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05961}05961\ \ \ \ \ \ \ \ \ name\ =\ \textcolor{stringliteral}{'b'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05962}05962\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 3,\ 2],\ dtype=[(name,\ int)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05963}05963\ \ \ \ \ \ \ \ \ x.sort(order=name)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05964}05964\ \ \ \ \ \ \ \ \ assert\_equal(x[\textcolor{stringliteral}{'b'}],\ np.array([1,\ 2,\ 3]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05965}05965\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05966}05966\ \ \ \ \ \textcolor{keyword}{def\ }test\_field\_names(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05967}05967\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ unicode\ and\ 8-\/bit\ /\ byte\ strings\ can\ be\ used}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05968}05968\ \ \ \ \ \ \ \ \ a\ =\ np.zeros((1,),\ dtype=[(\textcolor{stringliteral}{'f1'},\ \textcolor{stringliteral}{'i4'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05969}05969\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'f2'},\ \textcolor{stringliteral}{'i4'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05970}05970\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'f3'},\ [(\textcolor{stringliteral}{'sf1'},\ \textcolor{stringliteral}{'i4'})])])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05971}05971\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ byte\ string\ indexing\ fails\ gracefully}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05972}05972\ \ \ \ \ \ \ \ \ assert\_raises(IndexError,\ a.\_\_setitem\_\_,\ b\textcolor{stringliteral}{'f1'},\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05973}05973\ \ \ \ \ \ \ \ \ assert\_raises(IndexError,\ a.\_\_getitem\_\_,\ b\textcolor{stringliteral}{'f1'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05974}05974\ \ \ \ \ \ \ \ \ assert\_raises(IndexError,\ a[\textcolor{stringliteral}{'f1'}].\_\_setitem\_\_,\ b\textcolor{stringliteral}{'sf1'},\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05975}05975\ \ \ \ \ \ \ \ \ assert\_raises(IndexError,\ a[\textcolor{stringliteral}{'f1'}].\_\_getitem\_\_,\ b\textcolor{stringliteral}{'sf1'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05976}05976\ \ \ \ \ \ \ \ \ b\ =\ a.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05977}05977\ \ \ \ \ \ \ \ \ fn1\ =\ str(\textcolor{stringliteral}{'f1'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05978}05978\ \ \ \ \ \ \ \ \ b[fn1]\ =\ 1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05979}05979\ \ \ \ \ \ \ \ \ assert\_equal(b[fn1],\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05980}05980\ \ \ \ \ \ \ \ \ fnn\ =\ str(\textcolor{stringliteral}{'not\ at\ all'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05981}05981\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ b.\_\_setitem\_\_,\ fnn,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05982}05982\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ b.\_\_getitem\_\_,\ fnn)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05983}05983\ \ \ \ \ \ \ \ \ b[0][fn1]\ =\ 2}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05984}05984\ \ \ \ \ \ \ \ \ assert\_equal(b[fn1],\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05985}05985\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Subfield}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05986}05986\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ b[0].\_\_setitem\_\_,\ fnn,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05987}05987\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ b[0].\_\_getitem\_\_,\ fnn)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05988}05988\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Subfield}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05989}05989\ \ \ \ \ \ \ \ \ fn3\ =\ str(\textcolor{stringliteral}{'f3'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05990}05990\ \ \ \ \ \ \ \ \ sfn1\ =\ str(\textcolor{stringliteral}{'sf1'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05991}05991\ \ \ \ \ \ \ \ \ b[fn3][sfn1]\ =\ 1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05992}05992\ \ \ \ \ \ \ \ \ assert\_equal(b[fn3][sfn1],\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05993}05993\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ b[fn3].\_\_setitem\_\_,\ fnn,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05994}05994\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ b[fn3].\_\_getitem\_\_,\ fnn)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05995}05995\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ multiple\ subfields}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05996}05996\ \ \ \ \ \ \ \ \ fn2\ =\ str(\textcolor{stringliteral}{'f2'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05997}05997\ \ \ \ \ \ \ \ \ b[fn2]\ =\ 3}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05998}05998\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l05999}05999\ \ \ \ \ \ \ \ \ assert\_equal(b[[\textcolor{stringliteral}{'f1'},\ \textcolor{stringliteral}{'f2'}]][0].tolist(),\ (2,\ 3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06000}06000\ \ \ \ \ \ \ \ \ assert\_equal(b[[\textcolor{stringliteral}{'f2'},\ \textcolor{stringliteral}{'f1'}]][0].tolist(),\ (3,\ 2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06001}06001\ \ \ \ \ \ \ \ \ assert\_equal(b[[\textcolor{stringliteral}{'f1'},\ \textcolor{stringliteral}{'f3'}]][0].tolist(),\ (2,\ (1,)))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06002}06002\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06003}06003\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ non-\/ascii\ unicode\ field\ indexing\ is\ well\ behaved}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06004}06004\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ a.\_\_setitem\_\_,\ \textcolor{stringliteral}{'\(\backslash\)u03e0'},\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06005}06005\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ a.\_\_getitem\_\_,\ \textcolor{stringliteral}{'\(\backslash\)u03e0'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06006}06006\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06007}06007\ \ \ \ \ \textcolor{keyword}{def\ }test\_record\_hash(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06008}06008\ \ \ \ \ \ \ \ \ a\ =\ np.array([(1,\ 2),\ (1,\ 2)],\ dtype=\textcolor{stringliteral}{'i1,i2'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06009}06009\ \ \ \ \ \ \ \ \ a.flags.writeable\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06010}06010\ \ \ \ \ \ \ \ \ b\ =\ np.array([(1,\ 2),\ (3,\ 4)],\ dtype=[(\textcolor{stringliteral}{'num1'},\ \textcolor{stringliteral}{'i1'}),\ (\textcolor{stringliteral}{'num2'},\ \textcolor{stringliteral}{'i2'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06011}06011\ \ \ \ \ \ \ \ \ b.flags.writeable\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06012}06012\ \ \ \ \ \ \ \ \ c\ =\ np.array([(1,\ 2),\ (3,\ 4)],\ dtype=\textcolor{stringliteral}{'i1,i2'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06013}06013\ \ \ \ \ \ \ \ \ c.flags.writeable\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06014}06014\ \ \ \ \ \ \ \ \ assert\_(hash(a[0])\ ==\ hash(a[1]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06015}06015\ \ \ \ \ \ \ \ \ assert\_(hash(a[0])\ ==\ hash(b[0]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06016}06016\ \ \ \ \ \ \ \ \ assert\_(hash(a[0])\ !=\ hash(b[1]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06017}06017\ \ \ \ \ \ \ \ \ assert\_(hash(c[0])\ ==\ hash(a[0])\ \textcolor{keywordflow}{and}\ c[0]\ ==\ a[0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06018}06018\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06019}06019\ \ \ \ \ \textcolor{keyword}{def\ }test\_record\_no\_hash(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06020}06020\ \ \ \ \ \ \ \ \ a\ =\ np.array([(1,\ 2),\ (1,\ 2)],\ dtype=\textcolor{stringliteral}{'i1,i2'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06021}06021\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ hash,\ a[0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06022}06022\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06023}06023\ \ \ \ \ \textcolor{keyword}{def\ }test\_empty\_structure\_creation(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06024}06024\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ make\ sure\ these\ do\ not\ raise\ errors\ (gh-\/5631)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06025}06025\ \ \ \ \ \ \ \ \ np.array([()],\ dtype=\{\textcolor{stringliteral}{'names'}:\ [],\ \textcolor{stringliteral}{'formats'}:\ [],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06026}06026\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'offsets'}:\ [],\ \textcolor{stringliteral}{'itemsize'}:\ 12\})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06027}06027\ \ \ \ \ \ \ \ \ np.array([(),\ (),\ (),\ (),\ ()],\ dtype=\{\textcolor{stringliteral}{'names'}:\ [],\ \textcolor{stringliteral}{'formats'}:\ [],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06028}06028\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'offsets'}:\ [],\ \textcolor{stringliteral}{'itemsize'}:\ 12\})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06029}06029\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06030}06030\ \ \ \ \ \textcolor{keyword}{def\ }test\_multifield\_indexing\_view(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06031}06031\ \ \ \ \ \ \ \ \ a\ =\ np.ones(3,\ dtype=[(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'i4'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'f4'}),\ (\textcolor{stringliteral}{'c'},\ \textcolor{stringliteral}{'u4'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06032}06032\ \ \ \ \ \ \ \ \ v\ =\ a[[\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'c'}]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06033}06033\ \ \ \ \ \ \ \ \ assert\_(v.base\ \textcolor{keywordflow}{is}\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06034}06034\ \ \ \ \ \ \ \ \ assert\_(v.dtype\ ==\ np.dtype(\{\textcolor{stringliteral}{'names'}:\ [\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'c'}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06035}06035\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'formats'}:\ [\textcolor{stringliteral}{'i4'},\ \textcolor{stringliteral}{'u4'}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06036}06036\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'offsets'}:\ [0,\ 8]\}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06037}06037\ \ \ \ \ \ \ \ \ v[:]\ =\ (4,5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06038}06038\ \ \ \ \ \ \ \ \ assert\_equal(a[0].item(),\ (4,\ 1,\ 5))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06039}06039\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06040}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestView}{06040}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestView}{TestView}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06041}06041\ \ \ \ \ \textcolor{keyword}{def\ }test\_basic(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06042}06042\ \ \ \ \ \ \ \ \ x\ =\ np.array([(1,\ 2,\ 3,\ 4),\ (5,\ 6,\ 7,\ 8)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06043}06043\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=[(\textcolor{stringliteral}{'r'},\ np.int8),\ (\textcolor{stringliteral}{'g'},\ np.int8),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06044}06044\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'b'},\ np.int8),\ (\textcolor{stringliteral}{'a'},\ np.int8)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06045}06045\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ We\ must\ be\ specific\ about\ the\ endianness\ here:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06046}06046\ \ \ \ \ \ \ \ \ y\ =\ x.view(dtype=\textcolor{stringliteral}{'<i4'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06047}06047\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ ...\ and\ again\ without\ the\ keyword.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06048}06048\ \ \ \ \ \ \ \ \ z\ =\ x.view(\textcolor{stringliteral}{'<i4'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06049}06049\ \ \ \ \ \ \ \ \ assert\_array\_equal(y,\ z)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06050}06050\ \ \ \ \ \ \ \ \ assert\_array\_equal(y,\ [67305985,\ 134678021])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06051}06051\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06052}06052\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06053}06053\ \textcolor{keyword}{def\ }\_mean(a,\ **args):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06054}06054\ \ \ \ \ \textcolor{keywordflow}{return}\ a.mean(**args)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06055}06055\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06056}06056\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06057}06057\ \textcolor{keyword}{def\ }\_var(a,\ **args):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06058}06058\ \ \ \ \ \textcolor{keywordflow}{return}\ a.var(**args)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06059}06059\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06060}06060\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06061}06061\ \textcolor{keyword}{def\ }\_std(a,\ **args):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06062}06062\ \ \ \ \ \textcolor{keywordflow}{return}\ a.std(**args)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06063}06063\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06064}06064\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06065}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats}{06065}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats}{TestStats}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06066}06066\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06067}06067\ \ \ \ \ funcs\ =\ [\_mean,\ \_var,\ \_std]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06068}06068\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06069}06069\ \ \ \ \ \textcolor{keyword}{def\ }setup\_method(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06070}06070\ \ \ \ \ \ \ \ \ np.random.seed(range(3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06071}06071\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_af2aac516d9130a5dafc1a63e979fd526}{rmat}}\ =\ np.random.random((4,\ 5))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06072}06072\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_a866435e4eeeee59171d64f02516fdf25}{cmat}}\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_af2aac516d9130a5dafc1a63e979fd526}{rmat}}\ +\ 1j\ *\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_af2aac516d9130a5dafc1a63e979fd526}{rmat}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06073}06073\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_a7cef2e8529f72252f871d3c6844c1896}{omat}}\ =\ np.array([Decimal(repr(r))\ \textcolor{keywordflow}{for}\ r\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_af2aac516d9130a5dafc1a63e979fd526}{rmat}}.flat])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06074}06074\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_a7cef2e8529f72252f871d3c6844c1896}{omat}}\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_a7cef2e8529f72252f871d3c6844c1896}{omat}}.\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(4,\ 5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06075}06075\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06076}06076\ \ \ \ \ \textcolor{keyword}{def\ }test\_python\_type(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06077}06077\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ x\ \textcolor{keywordflow}{in}\ (np.float16(1.),\ 1,\ 1.,\ 1+0j):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06078}06078\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.mean([x]),\ 1.)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06079}06079\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.std([x]),\ 0.)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06080}06080\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.var([x]),\ 0.)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06081}06081\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06082}06082\ \ \ \ \ \textcolor{keyword}{def\ }test\_keepdims(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06083}06083\ \ \ \ \ \ \ \ \ mat\ =\ np.eye(3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06084}06084\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ f\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_ac7b2d6dfeccbb5dbc2e1a262f02f5b46}{funcs}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06085}06085\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ axis\ \textcolor{keywordflow}{in}\ [0,\ 1]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06086}06086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ f(mat,\ axis=axis,\ keepdims=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06087}06087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(res.ndim\ ==\ mat.ndim)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06088}06088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(res.shape[axis]\ ==\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06089}06089\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ axis\ \textcolor{keywordflow}{in}\ [\textcolor{keywordtype}{None}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06090}06090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ f(mat,\ axis=axis,\ keepdims=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06091}06091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(res.shape\ ==\ (1,\ 1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06092}06092\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06093}06093\ \ \ \ \ \textcolor{keyword}{def\ }test\_out(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06094}06094\ \ \ \ \ \ \ \ \ mat\ =\ np.eye(3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06095}06095\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ f\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_ac7b2d6dfeccbb5dbc2e1a262f02f5b46}{funcs}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06096}06096\ \ \ \ \ \ \ \ \ \ \ \ \ out\ =\ np.zeros(3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06097}06097\ \ \ \ \ \ \ \ \ \ \ \ \ tgt\ =\ f(mat,\ axis=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06098}06098\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ f(mat,\ axis=1,\ out=out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06099}06099\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06100}06100\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06101}06101\ \ \ \ \ \ \ \ \ out\ =\ np.empty(2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06102}06102\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ f,\ mat,\ axis=1,\ out=out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06103}06103\ \ \ \ \ \ \ \ \ out\ =\ np.empty((2,\ 2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06104}06104\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ f,\ mat,\ axis=1,\ out=out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06105}06105\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06106}06106\ \ \ \ \ \textcolor{keyword}{def\ }test\_dtype\_from\_input(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06107}06107\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06108}06108\ \ \ \ \ \ \ \ \ icodes\ =\ np.typecodes[\textcolor{stringliteral}{'AllInteger'}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06109}06109\ \ \ \ \ \ \ \ \ fcodes\ =\ np.typecodes[\textcolor{stringliteral}{'AllFloat'}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06110}06110\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06111}06111\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ object\ type}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06112}06112\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ f\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_ac7b2d6dfeccbb5dbc2e1a262f02f5b46}{funcs}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06113}06113\ \ \ \ \ \ \ \ \ \ \ \ \ mat\ =\ np.array([[Decimal(1)]*3]*3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06114}06114\ \ \ \ \ \ \ \ \ \ \ \ \ tgt\ =\ mat.dtype.type}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06115}06115\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ f(mat,\ axis=1).dtype.type}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06116}06116\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(res\ \textcolor{keywordflow}{is}\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06117}06117\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ scalar\ case}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06118}06118\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ type(f(mat,\ axis=\textcolor{keywordtype}{None}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06119}06119\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(res\ \textcolor{keywordflow}{is}\ Decimal)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06120}06120\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06121}06121\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ integer\ types}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06122}06122\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ f\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_ac7b2d6dfeccbb5dbc2e1a262f02f5b46}{funcs}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06123}06123\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ c\ \textcolor{keywordflow}{in}\ icodes:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06124}06124\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mat\ =\ np.eye(3,\ dtype=c)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06125}06125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tgt\ =\ np.float64}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06126}06126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ f(mat,\ axis=1).dtype.type}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06127}06127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(res\ \textcolor{keywordflow}{is}\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06128}06128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ scalar\ case}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06129}06129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ f(mat,\ axis=\textcolor{keywordtype}{None}).dtype.type}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06130}06130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(res\ \textcolor{keywordflow}{is}\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06131}06131\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06132}06132\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ mean\ for\ float\ types}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06133}06133\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ f\ \textcolor{keywordflow}{in}\ [\_mean]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06134}06134\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ c\ \textcolor{keywordflow}{in}\ fcodes:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06135}06135\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mat\ =\ np.eye(3,\ dtype=c)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06136}06136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tgt\ =\ mat.dtype.type}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06137}06137\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ f(mat,\ axis=1).dtype.type}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06138}06138\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(res\ \textcolor{keywordflow}{is}\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06139}06139\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ scalar\ case}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06140}06140\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ f(mat,\ axis=\textcolor{keywordtype}{None}).dtype.type}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06141}06141\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(res\ \textcolor{keywordflow}{is}\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06142}06142\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06143}06143\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ var,\ std\ for\ float\ types}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06144}06144\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ f\ \textcolor{keywordflow}{in}\ [\_var,\ \_std]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06145}06145\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ c\ \textcolor{keywordflow}{in}\ fcodes:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06146}06146\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mat\ =\ np.eye(3,\ dtype=c)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06147}06147\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ deal\ with\ complex\ types}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06148}06148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tgt\ =\ mat.real.dtype.type}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06149}06149\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ f(mat,\ axis=1).dtype.type}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06150}06150\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(res\ \textcolor{keywordflow}{is}\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06151}06151\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ scalar\ case}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06152}06152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ f(mat,\ axis=\textcolor{keywordtype}{None}).dtype.type}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06153}06153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(res\ \textcolor{keywordflow}{is}\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06154}06154\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06155}06155\ \ \ \ \ \textcolor{keyword}{def\ }test\_dtype\_from\_dtype(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06156}06156\ \ \ \ \ \ \ \ \ mat\ =\ np.eye(3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06157}06157\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06158}06158\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ stats\ for\ integer\ types}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06159}06159\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ FIXME:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06160}06160\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ this\ needs\ definition\ as\ there\ are\ lots\ places\ along\ the\ line}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06161}06161\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ where\ type\ casting\ may\ take\ place.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06162}06162\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06163}06163\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ for\ f\ in\ self.funcs:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06164}06164\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ \ for\ c\ in\ np.typecodes['AllInteger']:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06165}06165\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ \ \ \ \ \ tgt\ =\ np.dtype(c).type}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06166}06166\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ \ \ \ \ \ res\ =\ f(mat,\ axis=1,\ dtype=c).dtype.type}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06167}06167\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ \ \ \ \ \ assert\_(res\ is\ tgt)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06168}06168\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ \ \ \ \ \ \#\ scalar\ case}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06169}06169\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ \ \ \ \ \ res\ =\ f(mat,\ axis=None,\ dtype=c).dtype.type}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06170}06170\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ \ \ \ \ \ assert\_(res\ is\ tgt)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06171}06171\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06172}06172\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ stats\ for\ float\ types}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06173}06173\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ f\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_ac7b2d6dfeccbb5dbc2e1a262f02f5b46}{funcs}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06174}06174\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ c\ \textcolor{keywordflow}{in}\ np.typecodes[\textcolor{stringliteral}{'AllFloat'}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06175}06175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tgt\ =\ np.dtype(c).type}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06176}06176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ f(mat,\ axis=1,\ dtype=c).dtype.type}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06177}06177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(res\ \textcolor{keywordflow}{is}\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06178}06178\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ scalar\ case}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06179}06179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ f(mat,\ axis=\textcolor{keywordtype}{None},\ dtype=c).dtype.type}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06180}06180\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(res\ \textcolor{keywordflow}{is}\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06181}06181\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06182}06182\ \ \ \ \ \textcolor{keyword}{def\ }test\_ddof(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06183}06183\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ f\ \textcolor{keywordflow}{in}\ [\_var]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06184}06184\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ ddof\ \textcolor{keywordflow}{in}\ range(3):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06185}06185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dim\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_af2aac516d9130a5dafc1a63e979fd526}{rmat}}.shape[1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06186}06186\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tgt\ =\ f(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_af2aac516d9130a5dafc1a63e979fd526}{rmat}},\ axis=1)\ *\ dim}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06187}06187\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ f(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_af2aac516d9130a5dafc1a63e979fd526}{rmat}},\ axis=1,\ ddof=ddof)\ *\ (dim\ -\/\ ddof)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06188}06188\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ f\ \textcolor{keywordflow}{in}\ [\_std]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06189}06189\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ ddof\ \textcolor{keywordflow}{in}\ range(3):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06190}06190\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dim\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_af2aac516d9130a5dafc1a63e979fd526}{rmat}}.shape[1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06191}06191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tgt\ =\ f(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_af2aac516d9130a5dafc1a63e979fd526}{rmat}},\ axis=1)\ *\ np.sqrt(dim)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06192}06192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ f(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_af2aac516d9130a5dafc1a63e979fd526}{rmat}},\ axis=1,\ ddof=ddof)\ *\ np.sqrt(dim\ -\/\ ddof)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06193}06193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06194}06194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06195}06195\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06196}06196\ \ \ \ \ \textcolor{keyword}{def\ }test\_ddof\_too\_big(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06197}06197\ \ \ \ \ \ \ \ \ dim\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_af2aac516d9130a5dafc1a63e979fd526}{rmat}}.shape[1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06198}06198\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ f\ \textcolor{keywordflow}{in}\ [\_var,\ \_std]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06199}06199\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ ddof\ \textcolor{keywordflow}{in}\ range(dim,\ dim\ +\ 2):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06200}06200\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ warnings.catch\_warnings(record=\textcolor{keyword}{True})\ \textcolor{keyword}{as}\ w:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06201}06201\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ warnings.simplefilter(\textcolor{stringliteral}{'always'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06202}06202\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ f(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_af2aac516d9130a5dafc1a63e979fd526}{rmat}},\ axis=1,\ ddof=ddof)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06203}06203\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ (res\ <\ 0).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a87f0925a0b962dc185a686c7f986385e}{any}}())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06204}06204\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(len(w)\ >\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06205}06205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(issubclass(w[0].category,\ RuntimeWarning))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06206}06206\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06207}06207\ \ \ \ \ \textcolor{keyword}{def\ }test\_empty(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06208}06208\ \ \ \ \ \ \ \ \ A\ =\ np.zeros((0,\ 3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06209}06209\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ f\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_ac7b2d6dfeccbb5dbc2e1a262f02f5b46}{funcs}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06210}06210\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ axis\ \textcolor{keywordflow}{in}\ [0,\ \textcolor{keywordtype}{None}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06211}06211\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ warnings.catch\_warnings(record=\textcolor{keyword}{True})\ \textcolor{keyword}{as}\ w:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06212}06212\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ warnings.simplefilter(\textcolor{stringliteral}{'always'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06213}06213\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.isnan(f(A,\ axis=axis)).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_ae94233643e35acde1817d89be3a2aeac}{all}}())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06214}06214\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(len(w)\ >\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06215}06215\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(issubclass(w[0].category,\ RuntimeWarning))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06216}06216\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ axis\ \textcolor{keywordflow}{in}\ [1]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06217}06217\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ warnings.catch\_warnings(record=\textcolor{keyword}{True})\ \textcolor{keyword}{as}\ w:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06218}06218\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ warnings.simplefilter(\textcolor{stringliteral}{'always'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06219}06219\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(f(A,\ axis=axis),\ np.zeros([]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06220}06220\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06221}06221\ \ \ \ \ \textcolor{keyword}{def\ }test\_mean\_values(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06222}06222\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ mat\ \textcolor{keywordflow}{in}\ [self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_af2aac516d9130a5dafc1a63e979fd526}{rmat}},\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_a866435e4eeeee59171d64f02516fdf25}{cmat}},\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_a7cef2e8529f72252f871d3c6844c1896}{omat}}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06223}06223\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ axis\ \textcolor{keywordflow}{in}\ [0,\ 1]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06224}06224\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tgt\ =\ mat.sum(axis=axis)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06225}06225\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ \_mean(mat,\ axis=axis)\ *\ mat.shape[axis]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06226}06226\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06227}06227\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ axis\ \textcolor{keywordflow}{in}\ [\textcolor{keywordtype}{None}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06228}06228\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tgt\ =\ mat.sum(axis=axis)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06229}06229\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ \_mean(mat,\ axis=axis)\ *\ np.prod(mat.shape)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06230}06230\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06231}06231\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06232}06232\ \ \ \ \ \textcolor{keyword}{def\ }test\_mean\_float16(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06233}06233\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ This\ fail\ if\ the\ sum\ inside\ mean\ is\ done\ in\ float16\ instead}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06234}06234\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ of\ float32.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06235}06235\ \ \ \ \ \ \ \ \ assert\_(\_mean(np.ones(100000,\ dtype=\textcolor{stringliteral}{'float16'}))\ ==\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06236}06236\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06237}06237\ \ \ \ \ \textcolor{keyword}{def\ }test\_mean\_axis\_error(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06238}06238\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Ensure\ that\ AxisError\ is\ raised\ instead\ of\ IndexError\ when\ axis\ is}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06239}06239\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ out\ of\ bounds,\ see\ gh-\/15817.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06240}06240\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_raises(np.exceptions.AxisError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06241}06241\ \ \ \ \ \ \ \ \ \ \ \ \ np.arange(10).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_afc13ef014011f164a6264b2d68f075cd}{mean}}(axis=2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06242}06242\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06243}06243\ \ \ \ \ \textcolor{keyword}{def\ }test\_mean\_where(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06244}06244\ \ \ \ \ \ \ \ \ a\ =\ np.arange(16).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}((4,\ 4))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06245}06245\ \ \ \ \ \ \ \ \ wh\_full\ =\ np.array([[\textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06246}06246\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06247}06247\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06248}06248\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{True}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06249}06249\ \ \ \ \ \ \ \ \ wh\_partial\ =\ np.array([[\textcolor{keyword}{False}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06250}06250\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{True}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06251}06251\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{True}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06252}06252\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{False}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06253}06253\ \ \ \ \ \ \ \ \ \_cases\ =\ [(1,\ \textcolor{keyword}{True},\ [1.5,\ 5.5,\ 9.5,\ 13.5]),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06254}06254\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (0,\ wh\_full,\ [6.,\ 5.,\ 10.,\ 9.]),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06255}06255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (1,\ wh\_full,\ [2.,\ 5.,\ 8.5,\ 14.5]),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06256}06256\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (0,\ wh\_partial,\ [6.,\ 7.,\ 8.,\ 9.])]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06257}06257\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ \_ax,\ \_wh,\ \_res\ \textcolor{keywordflow}{in}\ \_cases:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06258}06258\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_allclose(a.mean(axis=\_ax,\ where=\_wh),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06259}06259\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array(\_res))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06260}06260\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_allclose(np.mean(a,\ axis=\_ax,\ where=\_wh),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06261}06261\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array(\_res))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06262}06262\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06263}06263\ \ \ \ \ \ \ \ \ a3d\ =\ np.arange(16).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}((2,\ 2,\ 4))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06264}06264\ \ \ \ \ \ \ \ \ \_wh\_partial\ =\ np.array([\textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06265}06265\ \ \ \ \ \ \ \ \ \_res\ =\ [[1.5,\ 5.5],\ [9.5,\ 13.5]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06266}06266\ \ \ \ \ \ \ \ \ assert\_allclose(a3d.mean(axis=2,\ where=\_wh\_partial),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06267}06267\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array(\_res))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06268}06268\ \ \ \ \ \ \ \ \ assert\_allclose(np.mean(a3d,\ axis=2,\ where=\_wh\_partial),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06269}06269\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array(\_res))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06270}06270\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06271}06271\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.warns(RuntimeWarning)\ \textcolor{keyword}{as}\ w:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06272}06272\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_allclose(a.mean(axis=1,\ where=wh\_partial),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06273}06273\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([np.nan,\ 5.5,\ 9.5,\ np.nan]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06274}06274\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.warns(RuntimeWarning)\ \textcolor{keyword}{as}\ w:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06275}06275\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(a.mean(where=\textcolor{keyword}{False}),\ np.nan)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06276}06276\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.warns(RuntimeWarning)\ \textcolor{keyword}{as}\ w:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06277}06277\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.mean(a,\ where=\textcolor{keyword}{False}),\ np.nan)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06278}06278\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06279}06279\ \ \ \ \ \textcolor{keyword}{def\ }test\_var\_values(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06280}06280\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ mat\ \textcolor{keywordflow}{in}\ [self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_af2aac516d9130a5dafc1a63e979fd526}{rmat}},\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_a866435e4eeeee59171d64f02516fdf25}{cmat}},\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_a7cef2e8529f72252f871d3c6844c1896}{omat}}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06281}06281\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ axis\ \textcolor{keywordflow}{in}\ [0,\ 1,\ \textcolor{keywordtype}{None}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06282}06282\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ msqr\ =\ \_mean(mat\ *\ mat.conj(),\ axis=axis)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06283}06283\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mean\ =\ \_mean(mat,\ axis=axis)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06284}06284\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tgt\ =\ msqr\ -\/\ mean\ *\ mean.conjugate()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06285}06285\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ \_var(mat,\ axis=axis)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06286}06286\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06287}06287\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06288}06288\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize(('complex\_dtype',\ 'ndec')},\ (}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06289}06289\ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'complex64'},\ 6),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06290}06290\ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'complex128'},\ 7),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06291}06291\ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'clongdouble'},\ 7),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06292}06292\ \ \ \ \ ))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06293}06293\ \ \ \ \ \textcolor{keyword}{def\ }test\_var\_complex\_values(self,\ complex\_dtype,\ ndec):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06294}06294\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ fast-\/paths\ for\ every\ builtin\ complex\ type}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06295}06295\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ axis\ \textcolor{keywordflow}{in}\ [0,\ 1,\ \textcolor{keywordtype}{None}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06296}06296\ \ \ \ \ \ \ \ \ \ \ \ \ mat\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_a866435e4eeeee59171d64f02516fdf25}{cmat}}.copy().astype(complex\_dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06297}06297\ \ \ \ \ \ \ \ \ \ \ \ \ msqr\ =\ \_mean(mat\ *\ mat.conj(),\ axis=axis)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06298}06298\ \ \ \ \ \ \ \ \ \ \ \ \ mean\ =\ \_mean(mat,\ axis=axis)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06299}06299\ \ \ \ \ \ \ \ \ \ \ \ \ tgt\ =\ msqr\ -\/\ mean\ *\ mean.conjugate()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06300}06300\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ \_var(mat,\ axis=axis)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06301}06301\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ tgt,\ decimal=ndec)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06302}06302\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06303}06303\ \ \ \ \ \textcolor{keyword}{def\ }test\_var\_dimensions(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06304}06304\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \_var\ paths\ for\ complex\ number\ introduce\ additions\ on\ views\ that}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06305}06305\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ increase\ dimensions.\ Ensure\ this\ generalizes\ to\ higher\ dims}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06306}06306\ \ \ \ \ \ \ \ \ mat\ =\ np.stack([self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_a866435e4eeeee59171d64f02516fdf25}{cmat}}]*3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06307}06307\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ axis\ \textcolor{keywordflow}{in}\ [0,\ 1,\ 2,\ -\/1,\ \textcolor{keywordtype}{None}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06308}06308\ \ \ \ \ \ \ \ \ \ \ \ \ msqr\ =\ \_mean(mat\ *\ mat.conj(),\ axis=axis)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06309}06309\ \ \ \ \ \ \ \ \ \ \ \ \ mean\ =\ \_mean(mat,\ axis=axis)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06310}06310\ \ \ \ \ \ \ \ \ \ \ \ \ tgt\ =\ msqr\ -\/\ mean\ *\ mean.conjugate()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06311}06311\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ \_var(mat,\ axis=axis)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06312}06312\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06313}06313\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06314}06314\ \ \ \ \ \textcolor{keyword}{def\ }test\_var\_complex\_byteorder(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06315}06315\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ that\ var\ fast-\/path\ does\ not\ cause\ failures\ for\ complex\ arrays}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06316}06316\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ with\ non-\/native\ byteorder}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06317}06317\ \ \ \ \ \ \ \ \ cmat\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_a866435e4eeeee59171d64f02516fdf25}{cmat}}.copy().astype(\textcolor{stringliteral}{'complex128'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06318}06318\ \ \ \ \ \ \ \ \ cmat\_swapped\ =\ cmat.astype(cmat.dtype.newbyteorder())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06319}06319\ \ \ \ \ \ \ \ \ assert\_almost\_equal(cmat.var(),\ cmat\_swapped.var())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06320}06320\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06321}06321\ \ \ \ \ \textcolor{keyword}{def\ }test\_var\_axis\_error(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06322}06322\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Ensure\ that\ AxisError\ is\ raised\ instead\ of\ IndexError\ when\ axis\ is}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06323}06323\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ out\ of\ bounds,\ see\ gh-\/15817.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06324}06324\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_raises(np.exceptions.AxisError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06325}06325\ \ \ \ \ \ \ \ \ \ \ \ \ np.arange(10).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a55d687c74d93ea286f05c16f3491c9f2}{var}}(axis=2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06326}06326\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06327}06327\ \ \ \ \ \textcolor{keyword}{def\ }test\_var\_where(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06328}06328\ \ \ \ \ \ \ \ \ a\ =\ np.arange(25).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}((5,\ 5))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06329}06329\ \ \ \ \ \ \ \ \ wh\_full\ =\ np.array([[\textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{True}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06330}06330\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06331}06331\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06332}06332\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06333}06333\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06334}06334\ \ \ \ \ \ \ \ \ wh\_partial\ =\ np.array([[\textcolor{keyword}{False}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06335}06335\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{True}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06336}06336\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{True}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06337}06337\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{False}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06338}06338\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{True}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06339}06339\ \ \ \ \ \ \ \ \ \_cases\ =\ [(0,\ \textcolor{keyword}{True},\ [50.,\ 50.,\ 50.,\ 50.,\ 50.]),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06340}06340\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (1,\ \textcolor{keyword}{True},\ [2.,\ 2.,\ 2.,\ 2.,\ 2.])]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06341}06341\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ \_ax,\ \_wh,\ \_res\ \textcolor{keywordflow}{in}\ \_cases:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06342}06342\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_allclose(a.var(axis=\_ax,\ where=\_wh),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06343}06343\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array(\_res))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06344}06344\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_allclose(np.var(a,\ axis=\_ax,\ where=\_wh),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06345}06345\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array(\_res))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06346}06346\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06347}06347\ \ \ \ \ \ \ \ \ a3d\ =\ np.arange(16).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}((2,\ 2,\ 4))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06348}06348\ \ \ \ \ \ \ \ \ \_wh\_partial\ =\ np.array([\textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06349}06349\ \ \ \ \ \ \ \ \ \_res\ =\ [[0.25,\ 0.25],\ [0.25,\ 0.25]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06350}06350\ \ \ \ \ \ \ \ \ assert\_allclose(a3d.var(axis=2,\ where=\_wh\_partial),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06351}06351\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array(\_res))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06352}06352\ \ \ \ \ \ \ \ \ assert\_allclose(np.var(a3d,\ axis=2,\ where=\_wh\_partial),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06353}06353\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array(\_res))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06354}06354\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06355}06355\ \ \ \ \ \ \ \ \ assert\_allclose(np.var(a,\ axis=1,\ where=wh\_full),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06356}06356\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.var(a[wh\_full].\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}((5,\ 3)),\ axis=1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06357}06357\ \ \ \ \ \ \ \ \ assert\_allclose(np.var(a,\ axis=0,\ where=wh\_partial),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06358}06358\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.var(a[wh\_partial[:,0]],\ axis=0))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06359}06359\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.warns(RuntimeWarning)\ \textcolor{keyword}{as}\ w:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06360}06360\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(a.var(where=\textcolor{keyword}{False}),\ np.nan)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06361}06361\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.warns(RuntimeWarning)\ \textcolor{keyword}{as}\ w:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06362}06362\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.var(a,\ where=\textcolor{keyword}{False}),\ np.nan)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06363}06363\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06364}06364\ \ \ \ \ \textcolor{keyword}{def\ }test\_std\_values(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06365}06365\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ mat\ \textcolor{keywordflow}{in}\ [self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_af2aac516d9130a5dafc1a63e979fd526}{rmat}},\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_a866435e4eeeee59171d64f02516fdf25}{cmat}},\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_a7cef2e8529f72252f871d3c6844c1896}{omat}}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06366}06366\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ axis\ \textcolor{keywordflow}{in}\ [0,\ 1,\ \textcolor{keywordtype}{None}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06367}06367\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tgt\ =\ np.sqrt(\_var(mat,\ axis=axis))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06368}06368\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ \_std(mat,\ axis=axis)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06369}06369\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06370}06370\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06371}06371\ \ \ \ \ \textcolor{keyword}{def\ }test\_std\_where(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06372}06372\ \ \ \ \ \ \ \ \ a\ =\ np.arange(25).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}((5,5))[::-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06373}06373\ \ \ \ \ \ \ \ \ whf\ =\ np.array([[\textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{True}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06374}06374\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06375}06375\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06376}06376\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06377}06377\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{True}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06378}06378\ \ \ \ \ \ \ \ \ whp\ =\ np.array([[\textcolor{keyword}{False}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06379}06379\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{False}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06380}06380\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{True}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06381}06381\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{True}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06382}06382\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{False}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06383}06383\ \ \ \ \ \ \ \ \ \_cases\ =\ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06384}06384\ \ \ \ \ \ \ \ \ \ \ \ \ (0,\ \textcolor{keyword}{True},\ 7.07106781*np.ones((5))),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06385}06385\ \ \ \ \ \ \ \ \ \ \ \ \ (1,\ \textcolor{keyword}{True},\ 1.41421356*np.ones((5))),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06386}06386\ \ \ \ \ \ \ \ \ \ \ \ \ (0,\ whf,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06387}06387\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([4.0824829\ ,\ 8.16496581,\ 5.,\ 7.39509973,\ 8.49836586])),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06388}06388\ \ \ \ \ \ \ \ \ \ \ \ \ (0,\ whp,\ 2.5*np.ones((5)))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06389}06389\ \ \ \ \ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06390}06390\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ \_ax,\ \_wh,\ \_res\ \textcolor{keywordflow}{in}\ \_cases:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06391}06391\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_allclose(a.std(axis=\_ax,\ where=\_wh),\ \_res)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06392}06392\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_allclose(np.std(a,\ axis=\_ax,\ where=\_wh),\ \_res)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06393}06393\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06394}06394\ \ \ \ \ \ \ \ \ a3d\ =\ np.arange(16).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}((2,\ 2,\ 4))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06395}06395\ \ \ \ \ \ \ \ \ \_wh\_partial\ =\ np.array([\textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06396}06396\ \ \ \ \ \ \ \ \ \_res\ =\ [[0.5,\ 0.5],\ [0.5,\ 0.5]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06397}06397\ \ \ \ \ \ \ \ \ assert\_allclose(a3d.std(axis=2,\ where=\_wh\_partial),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06398}06398\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array(\_res))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06399}06399\ \ \ \ \ \ \ \ \ assert\_allclose(np.std(a3d,\ axis=2,\ where=\_wh\_partial),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06400}06400\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array(\_res))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06401}06401\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06402}06402\ \ \ \ \ \ \ \ \ assert\_allclose(a.std(axis=1,\ where=whf),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06403}06403\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.std(a[whf].\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}((5,3)),\ axis=1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06404}06404\ \ \ \ \ \ \ \ \ assert\_allclose(np.std(a,\ axis=1,\ where=whf),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06405}06405\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (a[whf].\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}((5,3))).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a711a580f3a24eabd2d5617c19baada70}{std}}(axis=1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06406}06406\ \ \ \ \ \ \ \ \ assert\_allclose(a.std(axis=0,\ where=whp),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06407}06407\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.std(a[whp[:,0]],\ axis=0))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06408}06408\ \ \ \ \ \ \ \ \ assert\_allclose(np.std(a,\ axis=0,\ where=whp),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06409}06409\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (a[whp[:,0]]).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a711a580f3a24eabd2d5617c19baada70}{std}}(axis=0))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06410}06410\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.warns(RuntimeWarning)\ \textcolor{keyword}{as}\ w:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06411}06411\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(a.std(where=\textcolor{keyword}{False}),\ np.nan)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06412}06412\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.warns(RuntimeWarning)\ \textcolor{keyword}{as}\ w:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06413}06413\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.std(a,\ where=\textcolor{keyword}{False}),\ np.nan)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06414}06414\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06415}06415\ \ \ \ \ \textcolor{keyword}{def\ }test\_subclass(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06416}06416\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }TestArray(np.ndarray):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06417}06417\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_new\_\_(cls,\ data,\ info):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06418}06418\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ np.array(data)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06419}06419\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ result.view(cls)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06420}06420\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result.info\ =\ info}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06421}06421\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06422}06422\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06423}06423\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_array\_finalize\_\_(self,\ obj):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06424}06424\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStats_a8b4976304ee14375ff2f8237465b1233}{info}}\ =\ getattr(obj,\ \textcolor{stringliteral}{"{}info"{}},\ \textcolor{stringliteral}{''})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06425}06425\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06426}06426\ \ \ \ \ \ \ \ \ dat\ =\ TestArray([[1,\ 2,\ 3,\ 4],\ [5,\ 6,\ 7,\ 8]],\ \textcolor{stringliteral}{'jubba'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06427}06427\ \ \ \ \ \ \ \ \ res\ =\ dat.mean(1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06428}06428\ \ \ \ \ \ \ \ \ assert\_(res.info\ ==\ dat.info)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06429}06429\ \ \ \ \ \ \ \ \ res\ =\ dat.std(1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06430}06430\ \ \ \ \ \ \ \ \ assert\_(res.info\ ==\ dat.info)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06431}06431\ \ \ \ \ \ \ \ \ res\ =\ dat.var(1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06432}06432\ \ \ \ \ \ \ \ \ assert\_(res.info\ ==\ dat.info)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06433}06433\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06434}06434\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06435}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestVdot}{06435}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestVdot}{TestVdot}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06436}06436\ \ \ \ \ \textcolor{keyword}{def\ }test\_basic(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06437}06437\ \ \ \ \ \ \ \ \ dt\_numeric\ =\ np.typecodes[\textcolor{stringliteral}{'AllFloat'}]\ +\ np.typecodes[\textcolor{stringliteral}{'AllInteger'}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06438}06438\ \ \ \ \ \ \ \ \ dt\_complex\ =\ np.typecodes[\textcolor{stringliteral}{'Complex'}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06439}06439\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06440}06440\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ real}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06441}06441\ \ \ \ \ \ \ \ \ a\ =\ np.eye(3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06442}06442\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ dt\_numeric\ +\ \textcolor{stringliteral}{'O'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06443}06443\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ a.astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06444}06444\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ np.vdot(b,\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06445}06445\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.isscalar(res))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06446}06446\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.vdot(b,\ b),\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06447}06447\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06448}06448\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ complex}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06449}06449\ \ \ \ \ \ \ \ \ a\ =\ np.eye(3)\ *\ 1j}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06450}06450\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ dt\_complex\ +\ \textcolor{stringliteral}{'O'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06451}06451\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ a.astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06452}06452\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ np.vdot(b,\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06453}06453\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.isscalar(res))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06454}06454\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.vdot(b,\ b),\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06455}06455\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06456}06456\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ boolean}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06457}06457\ \ \ \ \ \ \ \ \ b\ =\ np.eye(3,\ dtype=bool)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06458}06458\ \ \ \ \ \ \ \ \ res\ =\ np.vdot(b,\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06459}06459\ \ \ \ \ \ \ \ \ assert\_(np.isscalar(res))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06460}06460\ \ \ \ \ \ \ \ \ assert\_equal(np.vdot(b,\ b),\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06461}06461\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06462}06462\ \ \ \ \ \textcolor{keyword}{def\ }test\_vdot\_array\_order(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06463}06463\ \ \ \ \ \ \ \ \ a\ =\ np.array([[1,\ 2],\ [3,\ 4]],\ order=\textcolor{stringliteral}{'C'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06464}06464\ \ \ \ \ \ \ \ \ b\ =\ np.array([[1,\ 2],\ [3,\ 4]],\ order=\textcolor{stringliteral}{'F'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06465}06465\ \ \ \ \ \ \ \ \ res\ =\ np.vdot(a,\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06466}06466\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06467}06467\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ integer\ arrays\ are\ exact}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06468}06468\ \ \ \ \ \ \ \ \ assert\_equal(np.vdot(a,\ b),\ res)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06469}06469\ \ \ \ \ \ \ \ \ assert\_equal(np.vdot(b,\ a),\ res)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06470}06470\ \ \ \ \ \ \ \ \ assert\_equal(np.vdot(b,\ b),\ res)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06471}06471\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06472}06472\ \ \ \ \ \textcolor{keyword}{def\ }test\_vdot\_uncontiguous(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06473}06473\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ size\ \textcolor{keywordflow}{in}\ [2,\ 1000]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06474}06474\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Different\ sizes\ match\ different\ branches\ in\ vdot.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06475}06475\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.zeros((size,\ 2,\ 2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06476}06476\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ np.zeros((size,\ 2,\ 2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06477}06477\ \ \ \ \ \ \ \ \ \ \ \ \ a[:,\ 0,\ 0]\ =\ np.arange(size)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06478}06478\ \ \ \ \ \ \ \ \ \ \ \ \ b[:,\ 0,\ 0]\ =\ np.arange(size)\ +\ 1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06479}06479\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Make\ a\ and\ b\ uncontiguous:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06480}06480\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ a[...,\ 0]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06481}06481\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ b[...,\ 0]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06482}06482\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06483}06483\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.vdot(a,\ b),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06484}06484\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.vdot(a.flatten(),\ b.flatten()))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06485}06485\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.vdot(a,\ b.copy()),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06486}06486\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.vdot(a.flatten(),\ b.flatten()))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06487}06487\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.vdot(a.copy(),\ b),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06488}06488\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.vdot(a.flatten(),\ b.flatten()))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06489}06489\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.vdot(a.copy(\textcolor{stringliteral}{'F'}),\ b),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06490}06490\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.vdot(a.flatten(),\ b.flatten()))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06491}06491\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.vdot(a,\ b.copy(\textcolor{stringliteral}{'F'})),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06492}06492\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.vdot(a.flatten(),\ b.flatten()))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06493}06493\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06494}06494\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06495}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot}{06495}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot}{TestDot}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06496}06496\ \ \ \ \ \textcolor{keyword}{def\ }setup\_method(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06497}06497\ \ \ \ \ \ \ \ \ np.random.seed(128)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06498}06498\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_af1eb22edbef7f094e97f3d8c8e0e6eca}{A}}\ =\ np.random.rand(4,\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06499}06499\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a4d7ea7c12d84a920759be9c640a2a22f}{b1}}\ =\ np.random.rand(2,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06500}06500\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a277e5f97c93d1eeb6c733df85a38e38c}{b2}}\ =\ np.random.rand(2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06501}06501\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_ad0450394570031632d33b6011525fc2c}{b3}}\ =\ np.random.rand(1,\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06502}06502\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a261d3ddcd4a44d5d004c60d7a5f194ba}{b4}}\ =\ np.random.rand(4)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06503}06503\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a92c85865434b0488ff637a1ccc5108d2}{N}}\ =\ 7}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06504}06504\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06505}06505\ \ \ \ \ \textcolor{keyword}{def\ }test\_dotmatmat(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06506}06506\ \ \ \ \ \ \ \ \ A\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_af1eb22edbef7f094e97f3d8c8e0e6eca}{A}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06507}06507\ \ \ \ \ \ \ \ \ res\ =\ np.dot(A.transpose(),\ A)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06508}06508\ \ \ \ \ \ \ \ \ tgt\ =\ np.array([[1.45046013,\ 0.86323640],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06509}06509\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0.86323640,\ 0.84934569]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06510}06510\ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ tgt,\ decimal=self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a92c85865434b0488ff637a1ccc5108d2}{N}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06511}06511\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06512}06512\ \ \ \ \ \textcolor{keyword}{def\ }test\_dotmatvec(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06513}06513\ \ \ \ \ \ \ \ \ A,\ b1\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_af1eb22edbef7f094e97f3d8c8e0e6eca}{A}},\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a4d7ea7c12d84a920759be9c640a2a22f}{b1}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06514}06514\ \ \ \ \ \ \ \ \ res\ =\ np.dot(A,\ b1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06515}06515\ \ \ \ \ \ \ \ \ tgt\ =\ np.array([[0.32114320],\ [0.04889721],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06516}06516\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0.15696029],\ [0.33612621]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06517}06517\ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ tgt,\ decimal=self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a92c85865434b0488ff637a1ccc5108d2}{N}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06518}06518\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06519}06519\ \ \ \ \ \textcolor{keyword}{def\ }test\_dotmatvec2(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06520}06520\ \ \ \ \ \ \ \ \ A,\ b2\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_af1eb22edbef7f094e97f3d8c8e0e6eca}{A}},\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a277e5f97c93d1eeb6c733df85a38e38c}{b2}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06521}06521\ \ \ \ \ \ \ \ \ res\ =\ np.dot(A,\ b2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06522}06522\ \ \ \ \ \ \ \ \ tgt\ =\ np.array([0.29677940,\ 0.04518649,\ 0.14468333,\ 0.31039293])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06523}06523\ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ tgt,\ decimal=self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a92c85865434b0488ff637a1ccc5108d2}{N}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06524}06524\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06525}06525\ \ \ \ \ \textcolor{keyword}{def\ }test\_dotvecmat(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06526}06526\ \ \ \ \ \ \ \ \ A,\ b4\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_af1eb22edbef7f094e97f3d8c8e0e6eca}{A}},\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a261d3ddcd4a44d5d004c60d7a5f194ba}{b4}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06527}06527\ \ \ \ \ \ \ \ \ res\ =\ np.dot(b4,\ A)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06528}06528\ \ \ \ \ \ \ \ \ tgt\ =\ np.array([1.23495091,\ 1.12222648])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06529}06529\ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ tgt,\ decimal=self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a92c85865434b0488ff637a1ccc5108d2}{N}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06530}06530\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06531}06531\ \ \ \ \ \textcolor{keyword}{def\ }test\_dotvecmat2(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06532}06532\ \ \ \ \ \ \ \ \ b3,\ A\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_ad0450394570031632d33b6011525fc2c}{b3}},\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_af1eb22edbef7f094e97f3d8c8e0e6eca}{A}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06533}06533\ \ \ \ \ \ \ \ \ res\ =\ np.dot(b3,\ A.transpose())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06534}06534\ \ \ \ \ \ \ \ \ tgt\ =\ np.array([[0.58793804,\ 0.08957460,\ 0.30605758,\ 0.62716383]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06535}06535\ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ tgt,\ decimal=self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a92c85865434b0488ff637a1ccc5108d2}{N}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06536}06536\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06537}06537\ \ \ \ \ \textcolor{keyword}{def\ }test\_dotvecmat3(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06538}06538\ \ \ \ \ \ \ \ \ A,\ b4\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_af1eb22edbef7f094e97f3d8c8e0e6eca}{A}},\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a261d3ddcd4a44d5d004c60d7a5f194ba}{b4}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06539}06539\ \ \ \ \ \ \ \ \ res\ =\ np.dot(A.transpose(),\ b4)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06540}06540\ \ \ \ \ \ \ \ \ tgt\ =\ np.array([1.23495091,\ 1.12222648])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06541}06541\ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ tgt,\ decimal=self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a92c85865434b0488ff637a1ccc5108d2}{N}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06542}06542\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06543}06543\ \ \ \ \ \textcolor{keyword}{def\ }test\_dotvecvecouter(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06544}06544\ \ \ \ \ \ \ \ \ b1,\ b3\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a4d7ea7c12d84a920759be9c640a2a22f}{b1}},\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_ad0450394570031632d33b6011525fc2c}{b3}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06545}06545\ \ \ \ \ \ \ \ \ res\ =\ np.dot(b1,\ b3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06546}06546\ \ \ \ \ \ \ \ \ tgt\ =\ np.array([[0.20128610,\ 0.08400440],\ [0.07190947,\ 0.03001058]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06547}06547\ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ tgt,\ decimal=self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a92c85865434b0488ff637a1ccc5108d2}{N}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06548}06548\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06549}06549\ \ \ \ \ \textcolor{keyword}{def\ }test\_dotvecvecinner(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06550}06550\ \ \ \ \ \ \ \ \ b1,\ b3\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a4d7ea7c12d84a920759be9c640a2a22f}{b1}},\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_ad0450394570031632d33b6011525fc2c}{b3}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06551}06551\ \ \ \ \ \ \ \ \ res\ =\ np.dot(b3,\ b1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06552}06552\ \ \ \ \ \ \ \ \ tgt\ =\ np.array([[\ 0.23129668]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06553}06553\ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ tgt,\ decimal=self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a92c85865434b0488ff637a1ccc5108d2}{N}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06554}06554\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06555}06555\ \ \ \ \ \textcolor{keyword}{def\ }test\_dotcolumnvect1(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06556}06556\ \ \ \ \ \ \ \ \ b1\ =\ np.ones((3,\ 1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06557}06557\ \ \ \ \ \ \ \ \ b2\ =\ [5.3]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06558}06558\ \ \ \ \ \ \ \ \ res\ =\ np.dot(b1,\ b2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06559}06559\ \ \ \ \ \ \ \ \ tgt\ =\ np.array([5.3,\ 5.3,\ 5.3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06560}06560\ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ tgt,\ decimal=self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a92c85865434b0488ff637a1ccc5108d2}{N}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06561}06561\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06562}06562\ \ \ \ \ \textcolor{keyword}{def\ }test\_dotcolumnvect2(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06563}06563\ \ \ \ \ \ \ \ \ b1\ =\ np.ones((3,\ 1)).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a841d0800caffc28ceef9afb4731e6ed5}{transpose}}()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06564}06564\ \ \ \ \ \ \ \ \ b2\ =\ [6.2]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06565}06565\ \ \ \ \ \ \ \ \ res\ =\ np.dot(b2,\ b1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06566}06566\ \ \ \ \ \ \ \ \ tgt\ =\ np.array([6.2,\ 6.2,\ 6.2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06567}06567\ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ tgt,\ decimal=self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a92c85865434b0488ff637a1ccc5108d2}{N}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06568}06568\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06569}06569\ \ \ \ \ \textcolor{keyword}{def\ }test\_dotvecscalar(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06570}06570\ \ \ \ \ \ \ \ \ np.random.seed(100)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06571}06571\ \ \ \ \ \ \ \ \ b1\ =\ np.random.rand(1,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06572}06572\ \ \ \ \ \ \ \ \ b2\ =\ np.random.rand(1,\ 4)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06573}06573\ \ \ \ \ \ \ \ \ res\ =\ np.dot(b1,\ b2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06574}06574\ \ \ \ \ \ \ \ \ tgt\ =\ np.array([[0.15126730,\ 0.23068496,\ 0.45905553,\ 0.00256425]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06575}06575\ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ tgt,\ decimal=self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a92c85865434b0488ff637a1ccc5108d2}{N}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06576}06576\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06577}06577\ \ \ \ \ \textcolor{keyword}{def\ }test\_dotvecscalar2(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06578}06578\ \ \ \ \ \ \ \ \ np.random.seed(100)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06579}06579\ \ \ \ \ \ \ \ \ b1\ =\ np.random.rand(4,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06580}06580\ \ \ \ \ \ \ \ \ b2\ =\ np.random.rand(1,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06581}06581\ \ \ \ \ \ \ \ \ res\ =\ np.dot(b1,\ b2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06582}06582\ \ \ \ \ \ \ \ \ tgt\ =\ np.array([[0.00256425],[0.00131359],[0.00200324],[\ 0.00398638]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06583}06583\ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ tgt,\ decimal=self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a92c85865434b0488ff637a1ccc5108d2}{N}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06584}06584\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06585}06585\ \ \ \ \ \textcolor{keyword}{def\ }test\_all(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06586}06586\ \ \ \ \ \ \ \ \ dims\ =\ [(),\ (1,),\ (1,\ 1)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06587}06587\ \ \ \ \ \ \ \ \ dout\ =\ [(),\ (1,),\ (1,\ 1),\ (1,),\ (),\ (1,),\ (1,\ 1),\ (1,),\ (1,\ 1)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06588}06588\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dim,\ (dim1,\ dim2)\ \textcolor{keywordflow}{in}\ zip(dout,\ itertools.product(dims,\ dims)):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06589}06589\ \ \ \ \ \ \ \ \ \ \ \ \ b1\ =\ np.zeros(dim1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06590}06590\ \ \ \ \ \ \ \ \ \ \ \ \ b2\ =\ np.zeros(dim2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06591}06591\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ np.dot(b1,\ b2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06592}06592\ \ \ \ \ \ \ \ \ \ \ \ \ tgt\ =\ np.zeros(dim)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06593}06593\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(res.shape\ ==\ tgt.shape)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06594}06594\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_almost\_equal(res,\ tgt,\ decimal=self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a92c85865434b0488ff637a1ccc5108d2}{N}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06595}06595\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06596}06596\ \ \ \ \ \textcolor{keyword}{def\ }test\_vecobject(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06597}06597\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }Vec:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06598}06598\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self,\ sequence=None):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06599}06599\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ sequence\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06600}06600\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sequence\ =\ []}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06601}06601\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a4da6bfff5c64932eb1975e1977c7b542}{array}}\ =\ np.array(sequence)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06602}06602\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06603}06603\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_add\_\_(self,\ other):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06604}06604\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ out\ =\ Vec()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06605}06605\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ out.array\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a4da6bfff5c64932eb1975e1977c7b542}{array}}\ +\ other.array}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06606}06606\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ out}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06607}06607\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06608}06608\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_sub\_\_(self,\ other):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06609}06609\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ out\ =\ Vec()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06610}06610\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ out.array\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a4da6bfff5c64932eb1975e1977c7b542}{array}}\ -\/\ other.array}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06611}06611\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ out}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06612}06612\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06613}06613\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_mul\_\_(self,\ other):\ \ \textcolor{comment}{\#\ with\ scalar}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06614}06614\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ out\ =\ Vec(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestDot_a4da6bfff5c64932eb1975e1977c7b542}{array}}.copy())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06615}06615\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ out.array\ *=\ other}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06616}06616\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ out}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06617}06617\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06618}06618\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_rmul\_\_(self,\ other):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06619}06619\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self*other}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06620}06620\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06621}06621\ \ \ \ \ \ \ \ \ U\_non\_cont\ =\ np.transpose([[1.,\ 1.],\ [1.,\ 2.]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06622}06622\ \ \ \ \ \ \ \ \ U\_cont\ =\ np.ascontiguousarray(U\_non\_cont)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06623}06623\ \ \ \ \ \ \ \ \ x\ =\ np.array([Vec([1.,\ 0.]),\ Vec([0.,\ 1.])])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06624}06624\ \ \ \ \ \ \ \ \ zeros\ =\ np.array([Vec([0.,\ 0.]),\ Vec([0.,\ 0.])])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06625}06625\ \ \ \ \ \ \ \ \ zeros\_test\ =\ np.dot(U\_cont,\ x)\ -\/\ np.dot(U\_non\_cont,\ x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06626}06626\ \ \ \ \ \ \ \ \ assert\_equal(zeros[0].array,\ zeros\_test[0].array)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06627}06627\ \ \ \ \ \ \ \ \ assert\_equal(zeros[1].array,\ zeros\_test[1].array)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06628}06628\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06629}06629\ \ \ \ \ \textcolor{keyword}{def\ }test\_dot\_2args(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06630}06630\ \ \ \ \ \ \ \ \ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacenumpy_1_1core_1_1multiarray}{numpy.core.multiarray}}\ \textcolor{keyword}{import}\ dot}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06631}06631\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06632}06632\ \ \ \ \ \ \ \ \ a\ =\ np.array([[1,\ 2],\ [3,\ 4]],\ dtype=float)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06633}06633\ \ \ \ \ \ \ \ \ b\ =\ np.array([[1,\ 0],\ [1,\ 1]],\ dtype=float)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06634}06634\ \ \ \ \ \ \ \ \ c\ =\ np.array([[3,\ 2],\ [7,\ 4]],\ dtype=float)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06635}06635\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06636}06636\ \ \ \ \ \ \ \ \ d\ =\ dot(a,\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06637}06637\ \ \ \ \ \ \ \ \ assert\_allclose(c,\ d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06638}06638\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06639}06639\ \ \ \ \ \textcolor{keyword}{def\ }test\_dot\_3args(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06640}06640\ \ \ \ \ \ \ \ \ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacenumpy_1_1core_1_1multiarray}{numpy.core.multiarray}}\ \textcolor{keyword}{import}\ dot}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06641}06641\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06642}06642\ \ \ \ \ \ \ \ \ np.random.seed(22)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06643}06643\ \ \ \ \ \ \ \ \ f\ =\ np.random.random\_sample((1024,\ 16))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06644}06644\ \ \ \ \ \ \ \ \ v\ =\ np.random.random\_sample((16,\ 32))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06645}06645\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06646}06646\ \ \ \ \ \ \ \ \ r\ =\ np.empty((1024,\ 32))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06647}06647\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(12):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06648}06648\ \ \ \ \ \ \ \ \ \ \ \ \ dot(f,\ v,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06649}06649\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ HAS\_REFCOUNT:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06650}06650\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(sys.getrefcount(r),\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06651}06651\ \ \ \ \ \ \ \ \ r2\ =\ dot(f,\ v,\ out=\textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06652}06652\ \ \ \ \ \ \ \ \ assert\_array\_equal(r2,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06653}06653\ \ \ \ \ \ \ \ \ assert\_(r\ \textcolor{keywordflow}{is}\ dot(f,\ v,\ out=r))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06654}06654\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06655}06655\ \ \ \ \ \ \ \ \ v\ =\ v[:,\ 0].copy()\ \ \textcolor{comment}{\#\ v.shape\ ==\ (16,)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06656}06656\ \ \ \ \ \ \ \ \ r\ =\ r[:,\ 0].copy()\ \ \textcolor{comment}{\#\ r.shape\ ==\ (1024,)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06657}06657\ \ \ \ \ \ \ \ \ r2\ =\ dot(f,\ v)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06658}06658\ \ \ \ \ \ \ \ \ assert\_(r\ \textcolor{keywordflow}{is}\ dot(f,\ v,\ r))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06659}06659\ \ \ \ \ \ \ \ \ assert\_array\_equal(r2,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06660}06660\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06661}06661\ \ \ \ \ \textcolor{keyword}{def\ }test\_dot\_3args\_errors(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06662}06662\ \ \ \ \ \ \ \ \ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacenumpy_1_1core_1_1multiarray}{numpy.core.multiarray}}\ \textcolor{keyword}{import}\ dot}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06663}06663\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06664}06664\ \ \ \ \ \ \ \ \ np.random.seed(22)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06665}06665\ \ \ \ \ \ \ \ \ f\ =\ np.random.random\_sample((1024,\ 16))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06666}06666\ \ \ \ \ \ \ \ \ v\ =\ np.random.random\_sample((16,\ 32))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06667}06667\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06668}06668\ \ \ \ \ \ \ \ \ r\ =\ np.empty((1024,\ 31))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06669}06669\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ dot,\ f,\ v,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06670}06670\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06671}06671\ \ \ \ \ \ \ \ \ r\ =\ np.empty((1024,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06672}06672\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ dot,\ f,\ v,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06673}06673\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06674}06674\ \ \ \ \ \ \ \ \ r\ =\ np.empty((32,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06675}06675\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ dot,\ f,\ v,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06676}06676\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06677}06677\ \ \ \ \ \ \ \ \ r\ =\ np.empty((32,\ 1024))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06678}06678\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ dot,\ f,\ v,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06679}06679\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ dot,\ f,\ v,\ r.T)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06680}06680\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06681}06681\ \ \ \ \ \ \ \ \ r\ =\ np.empty((1024,\ 64))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06682}06682\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ dot,\ f,\ v,\ r[:,\ ::2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06683}06683\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ dot,\ f,\ v,\ r[:,\ :32])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06684}06684\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06685}06685\ \ \ \ \ \ \ \ \ r\ =\ np.empty((1024,\ 32),\ dtype=np.float32)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06686}06686\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ dot,\ f,\ v,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06687}06687\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06688}06688\ \ \ \ \ \ \ \ \ r\ =\ np.empty((1024,\ 32),\ dtype=int)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06689}06689\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ dot,\ f,\ v,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06690}06690\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06691}06691\ \ \ \ \ \textcolor{keyword}{def\ }test\_dot\_out\_result(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06692}06692\ \ \ \ \ \ \ \ \ x\ =\ np.ones((),\ dtype=np.float16)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06693}06693\ \ \ \ \ \ \ \ \ y\ =\ np.ones((5,),\ dtype=np.float16)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06694}06694\ \ \ \ \ \ \ \ \ z\ =\ np.zeros((5,),\ dtype=np.float16)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06695}06695\ \ \ \ \ \ \ \ \ res\ =\ x.dot(y,\ out=z)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06696}06696\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ np.array\_equal(res,\ y)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06697}06697\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ np.array\_equal(z,\ y)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06698}06698\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06699}06699\ \ \ \ \ \textcolor{keyword}{def\ }test\_dot\_out\_aliasing(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06700}06700\ \ \ \ \ \ \ \ \ x\ =\ np.ones((),\ dtype=np.float16)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06701}06701\ \ \ \ \ \ \ \ \ y\ =\ np.ones((5,),\ dtype=np.float16)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06702}06702\ \ \ \ \ \ \ \ \ z\ =\ np.zeros((5,),\ dtype=np.float16)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06703}06703\ \ \ \ \ \ \ \ \ res\ =\ x.dot(y,\ out=z)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06704}06704\ \ \ \ \ \ \ \ \ z[0]\ =\ 2}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06705}06705\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ np.array\_equal(res,\ z)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06706}06706\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06707}06707\ \ \ \ \ \textcolor{keyword}{def\ }test\_dot\_array\_order(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06708}06708\ \ \ \ \ \ \ \ \ a\ =\ np.array([[1,\ 2],\ [3,\ 4]],\ order=\textcolor{stringliteral}{'C'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06709}06709\ \ \ \ \ \ \ \ \ b\ =\ np.array([[1,\ 2],\ [3,\ 4]],\ order=\textcolor{stringliteral}{'F'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06710}06710\ \ \ \ \ \ \ \ \ res\ =\ np.dot(a,\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06711}06711\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06712}06712\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ integer\ arrays\ are\ exact}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06713}06713\ \ \ \ \ \ \ \ \ assert\_equal(np.dot(a,\ b),\ res)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06714}06714\ \ \ \ \ \ \ \ \ assert\_equal(np.dot(b,\ a),\ res)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06715}06715\ \ \ \ \ \ \ \ \ assert\_equal(np.dot(b,\ b),\ res)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06716}06716\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06717}06717\ \ \ \ \ \textcolor{keyword}{def\ }test\_accelerate\_framework\_sgemv\_fix(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06718}06718\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06719}06719\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }aligned\_array(shape,\ align,\ dtype,\ order='C'):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06720}06720\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ \mbox{\hyperlink{namespacedtype}{dtype}}(0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06721}06721\ \ \ \ \ \ \ \ \ \ \ \ \ N\ =\ np.prod(shape)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06722}06722\ \ \ \ \ \ \ \ \ \ \ \ \ tmp\ =\ np.zeros(N\ *\ d.nbytes\ +\ align,\ dtype=np.uint8)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06723}06723\ \ \ \ \ \ \ \ \ \ \ \ \ address\ =\ tmp.\_\_array\_interface\_\_[\textcolor{stringliteral}{"{}data"{}}][0]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06724}06724\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ offset\ \textcolor{keywordflow}{in}\ range(align):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06725}06725\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (address\ +\ offset)\ \%\ align\ ==\ 0:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06726}06726\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06727}06727\ \ \ \ \ \ \ \ \ \ \ \ \ tmp\ =\ tmp[offset:offset+N*d.nbytes].view(dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06728}06728\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ tmp.reshape(shape,\ order=order)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06729}06729\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06730}06730\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }as\_aligned(arr,\ align,\ dtype,\ order='C'):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06731}06731\ \ \ \ \ \ \ \ \ \ \ \ \ aligned\ =\ aligned\_array(arr.shape,\ align,\ dtype,\ order)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06732}06732\ \ \ \ \ \ \ \ \ \ \ \ \ aligned[:]\ =\ arr[:]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06733}06733\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ aligned}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06734}06734\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06735}06735\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }assert\_dot\_close(A,\ X,\ desired):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06736}06736\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_allclose(np.dot(A,\ X),\ desired,\ rtol=1e-\/5,\ atol=1e-\/7)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06737}06737\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06738}06738\ \ \ \ \ \ \ \ \ m\ =\ aligned\_array(100,\ 15,\ np.float32)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06739}06739\ \ \ \ \ \ \ \ \ s\ =\ aligned\_array((100,\ 100),\ 15,\ np.float32)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06740}06740\ \ \ \ \ \ \ \ \ np.dot(s,\ m)\ \ \textcolor{comment}{\#\ this\ will\ always\ segfault\ if\ the\ bug\ is\ present}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06741}06741\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06742}06742\ \ \ \ \ \ \ \ \ testdata\ =\ itertools.product((15,\ 32),\ (10000,),\ (200,\ 89),\ (\textcolor{stringliteral}{'C'},\ \textcolor{stringliteral}{'F'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06743}06743\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ align,\ m,\ n,\ a\_order\ \textcolor{keywordflow}{in}\ testdata:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06744}06744\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Calculation\ in\ double\ precision}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06745}06745\ \ \ \ \ \ \ \ \ \ \ \ \ A\_d\ =\ np.random.rand(m,\ n)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06746}06746\ \ \ \ \ \ \ \ \ \ \ \ \ X\_d\ =\ np.random.rand(n)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06747}06747\ \ \ \ \ \ \ \ \ \ \ \ \ desired\ =\ np.dot(A\_d,\ X\_d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06748}06748\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Calculation\ with\ aligned\ single\ precision}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06749}06749\ \ \ \ \ \ \ \ \ \ \ \ \ A\_f\ =\ as\_aligned(A\_d,\ align,\ np.float32,\ order=a\_order)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06750}06750\ \ \ \ \ \ \ \ \ \ \ \ \ X\_f\ =\ as\_aligned(X\_d,\ align,\ np.float32)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06751}06751\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_dot\_close(A\_f,\ X\_f,\ desired)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06752}06752\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Strided\ A\ rows}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06753}06753\ \ \ \ \ \ \ \ \ \ \ \ \ A\_d\_2\ =\ A\_d[::2]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06754}06754\ \ \ \ \ \ \ \ \ \ \ \ \ desired\ =\ np.dot(A\_d\_2,\ X\_d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06755}06755\ \ \ \ \ \ \ \ \ \ \ \ \ A\_f\_2\ =\ A\_f[::2]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06756}06756\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_dot\_close(A\_f\_2,\ X\_f,\ desired)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06757}06757\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Strided\ A\ columns,\ strided\ X\ vector}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06758}06758\ \ \ \ \ \ \ \ \ \ \ \ \ A\_d\_22\ =\ A\_d\_2[:,\ ::2]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06759}06759\ \ \ \ \ \ \ \ \ \ \ \ \ X\_d\_2\ =\ X\_d[::2]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06760}06760\ \ \ \ \ \ \ \ \ \ \ \ \ desired\ =\ np.dot(A\_d\_22,\ X\_d\_2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06761}06761\ \ \ \ \ \ \ \ \ \ \ \ \ A\_f\_22\ =\ A\_f\_2[:,\ ::2]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06762}06762\ \ \ \ \ \ \ \ \ \ \ \ \ X\_f\_2\ =\ X\_f[::2]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06763}06763\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_dot\_close(A\_f\_22,\ X\_f\_2,\ desired)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06764}06764\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ the\ strides\ are\ as\ expected}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06765}06765\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ a\_order\ ==\ \textcolor{stringliteral}{'F'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06766}06766\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(A\_f\_22.strides,\ (8,\ 8\ *\ m))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06767}06767\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06768}06768\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(A\_f\_22.strides,\ (8\ *\ n,\ 8))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06769}06769\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(X\_f\_2.strides,\ (8,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06770}06770\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Strides\ in\ A\ rows\ +\ cols\ only}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06771}06771\ \ \ \ \ \ \ \ \ \ \ \ \ X\_f\_2c\ =\ as\_aligned(X\_f\_2,\ align,\ np.float32)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06772}06772\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_dot\_close(A\_f\_22,\ X\_f\_2c,\ desired)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06773}06773\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Strides\ just\ in\ A\ cols}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06774}06774\ \ \ \ \ \ \ \ \ \ \ \ \ A\_d\_12\ =\ A\_d[:,\ ::2]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06775}06775\ \ \ \ \ \ \ \ \ \ \ \ \ desired\ =\ np.dot(A\_d\_12,\ X\_d\_2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06776}06776\ \ \ \ \ \ \ \ \ \ \ \ \ A\_f\_12\ =\ A\_f[:,\ ::2]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06777}06777\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_dot\_close(A\_f\_12,\ X\_f\_2c,\ desired)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06778}06778\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Strides\ in\ A\ cols\ and\ X}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06779}06779\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_dot\_close(A\_f\_12,\ X\_f\_2,\ desired)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06780}06780\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06781}06781\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.slow}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06782}06782\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}dtype"{},\ [np.float64,\ np.complex128])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06783}06783\ \ \ \ \ \textcolor{preprocessor}{@requires\_memory(free\_bytes=18e9)}\ \ \textcolor{comment}{\#\ complex\ case\ needs\ 18GiB+}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06784}06784\ \ \ \ \ \textcolor{keyword}{def\ }test\_huge\_vectordot(self,\ dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06785}06785\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Large\ vector\ multiplications\ are\ chunked\ with\ 32bit\ BLAS}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06786}06786\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ that\ the\ chunking\ does\ the\ right\ thing,\ see\ also\ gh-\/22262}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06787}06787\ \ \ \ \ \ \ \ \ data\ =\ np.ones(2**30+100,\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06788}06788\ \ \ \ \ \ \ \ \ res\ =\ np.dot(data,\ data)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06789}06789\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ res\ ==\ 2**30+100}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06790}06790\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06791}06791\ \ \ \ \ \textcolor{keyword}{def\ }test\_dtype\_discovery\_fails(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06792}06792\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ See\ gh-\/14247,\ error\ checking\ was\ missing\ for\ failed\ dtype\ discovery}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06793}06793\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }BadObject(object):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06794}06794\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_array\_\_(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06795}06795\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classTypeError}{TypeError}}(\textcolor{stringliteral}{"{}just\ this\ tiny\ mint\ leaf"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06796}06796\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06797}06797\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06798}06798\ \ \ \ \ \ \ \ \ \ \ \ \ np.dot(BadObject(),\ BadObject())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06799}06799\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06800}06800\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06801}06801\ \ \ \ \ \ \ \ \ \ \ \ \ np.dot(3.0,\ BadObject())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06802}06802\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06803}06803\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06804}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon}{06804}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon}{MatmulCommon}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06805}06805\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Common\ tests\ for\ '@'\ operator\ and\ numpy.matmul.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06806}06806\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06807}06807\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06808}06808\ \ \ \ \ \textcolor{comment}{\#\ Should\ work\ with\ these\ types.\ Will\ want\ to\ add}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06809}06809\ \ \ \ \ \textcolor{comment}{\#\ "{}O"{}\ at\ some\ point}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06810}06810\ \ \ \ \ types\ =\ \textcolor{stringliteral}{"{}?bhilqBHILQefdgFDGO"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06811}06811\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06812}06812\ \ \ \ \ \textcolor{keyword}{def\ }test\_exceptions(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06813}06813\ \ \ \ \ \ \ \ \ dims\ =\ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06814}06814\ \ \ \ \ \ \ \ \ \ \ \ \ ((1,),\ (2,)),\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ mismatched\ vector\ vector}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06815}06815\ \ \ \ \ \ \ \ \ \ \ \ \ ((2,\ 1,),\ (2,)),\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ mismatched\ matrix\ vector}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06816}06816\ \ \ \ \ \ \ \ \ \ \ \ \ ((2,),\ (1,\ 2)),\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ mismatched\ vector\ matrix}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06817}06817\ \ \ \ \ \ \ \ \ \ \ \ \ ((1,\ 2),\ (3,\ 1)),\ \ \ \ \ \ \ \ \textcolor{comment}{\#\ mismatched\ matrix\ matrix}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06818}06818\ \ \ \ \ \ \ \ \ \ \ \ \ ((1,),\ ()),\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ vector\ scalar}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06819}06819\ \ \ \ \ \ \ \ \ \ \ \ \ ((),\ (1)),\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ scalar\ vector}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06820}06820\ \ \ \ \ \ \ \ \ \ \ \ \ ((1,\ 1),\ ()),\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ matrix\ scalar}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06821}06821\ \ \ \ \ \ \ \ \ \ \ \ \ ((),\ (1,\ 1)),\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ scalar\ matrix}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06822}06822\ \ \ \ \ \ \ \ \ \ \ \ \ ((2,\ 2,\ 1),\ (3,\ 1,\ 2)),\ \ \textcolor{comment}{\#\ cannot\ broadcast}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06823}06823\ \ \ \ \ \ \ \ \ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06824}06824\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06825}06825\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt,\ (dm1,\ dm2)\ \textcolor{keywordflow}{in}\ itertools.product(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_adf62c0b0992298f48d454e472c367408}{types}},\ dims):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06826}06826\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.ones(dm1,\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06827}06827\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ np.ones(dm2,\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06828}06828\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}},\ a,\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06829}06829\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06830}06830\ \ \ \ \ \textcolor{keyword}{def\ }test\_shapes(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06831}06831\ \ \ \ \ \ \ \ \ dims\ =\ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06832}06832\ \ \ \ \ \ \ \ \ \ \ \ \ ((1,\ 1),\ (2,\ 1,\ 1)),\ \ \ \ \ \textcolor{comment}{\#\ broadcast\ first\ argument}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06833}06833\ \ \ \ \ \ \ \ \ \ \ \ \ ((2,\ 1,\ 1),\ (1,\ 1)),\ \ \ \ \ \textcolor{comment}{\#\ broadcast\ second\ argument}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06834}06834\ \ \ \ \ \ \ \ \ \ \ \ \ ((2,\ 1,\ 1),\ (2,\ 1,\ 1)),\ \ \textcolor{comment}{\#\ matrix\ stack\ sizes\ match}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06835}06835\ \ \ \ \ \ \ \ \ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06836}06836\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06837}06837\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt,\ (dm1,\ dm2)\ \textcolor{keywordflow}{in}\ itertools.product(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_adf62c0b0992298f48d454e472c367408}{types}},\ dims):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06838}06838\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.ones(dm1,\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06839}06839\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ np.ones(dm2,\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06840}06840\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(a,\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06841}06841\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(res.shape\ ==\ (2,\ 1,\ 1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06842}06842\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06843}06843\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ vector\ vector\ returns\ scalars.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06844}06844\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_adf62c0b0992298f48d454e472c367408}{types}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06845}06845\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.ones((2,),\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06846}06846\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ np.ones((2,),\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06847}06847\ \ \ \ \ \ \ \ \ \ \ \ \ c\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(a,\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06848}06848\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.array(c).shape\ ==\ ())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06849}06849\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06850}06850\ \ \ \ \ \textcolor{keyword}{def\ }test\_result\_types(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06851}06851\ \ \ \ \ \ \ \ \ mat\ =\ np.ones((1,1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06852}06852\ \ \ \ \ \ \ \ \ vec\ =\ np.ones((1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06853}06853\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_adf62c0b0992298f48d454e472c367408}{types}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06854}06854\ \ \ \ \ \ \ \ \ \ \ \ \ m\ =\ mat.astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06855}06855\ \ \ \ \ \ \ \ \ \ \ \ \ v\ =\ vec.astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06856}06856\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ arg\ \textcolor{keywordflow}{in}\ [(m,\ v),\ (v,\ m),\ (m,\ m)]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06857}06857\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(*arg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06858}06858\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(res.dtype\ ==\ dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06859}06859\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06860}06860\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ vector\ vector\ returns\ scalars}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06861}06861\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ dt\ !=\ \textcolor{stringliteral}{"{}O"{}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06862}06862\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(v,\ v)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06863}06863\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(type(res)\ \textcolor{keywordflow}{is}\ np.dtype(dt).type)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06864}06864\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06865}06865\ \ \ \ \ \textcolor{keyword}{def\ }test\_scalar\_output(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06866}06866\ \ \ \ \ \ \ \ \ vec1\ =\ np.array([2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06867}06867\ \ \ \ \ \ \ \ \ vec2\ =\ np.array([3,\ 4]).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(1,\ -\/1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06868}06868\ \ \ \ \ \ \ \ \ tgt\ =\ np.array([6,\ 8])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06869}06869\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_adf62c0b0992298f48d454e472c367408}{types}}[1:]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06870}06870\ \ \ \ \ \ \ \ \ \ \ \ \ v1\ =\ vec1.astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06871}06871\ \ \ \ \ \ \ \ \ \ \ \ \ v2\ =\ vec2.astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06872}06872\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(v1,\ v2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06873}06873\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(res,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06874}06874\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(v2.T,\ v1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06875}06875\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(res,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06876}06876\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06877}06877\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ boolean\ type}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06878}06878\ \ \ \ \ \ \ \ \ vec\ =\ np.array([\textcolor{keyword}{True},\ \textcolor{keyword}{True}],\ dtype=\textcolor{stringliteral}{'?'}).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(1,\ -\/1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06879}06879\ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(vec[:,\ 0],\ vec)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06880}06880\ \ \ \ \ \ \ \ \ assert\_equal(res,\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06881}06881\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06882}06882\ \ \ \ \ \textcolor{keyword}{def\ }test\_vector\_vector\_values(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06883}06883\ \ \ \ \ \ \ \ \ vec1\ =\ np.array([1,\ 2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06884}06884\ \ \ \ \ \ \ \ \ vec2\ =\ np.array([3,\ 4]).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(-\/1,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06885}06885\ \ \ \ \ \ \ \ \ tgt1\ =\ np.array([11])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06886}06886\ \ \ \ \ \ \ \ \ tgt2\ =\ np.array([[3,\ 6],\ [4,\ 8]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06887}06887\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_adf62c0b0992298f48d454e472c367408}{types}}[1:]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06888}06888\ \ \ \ \ \ \ \ \ \ \ \ \ v1\ =\ vec1.astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06889}06889\ \ \ \ \ \ \ \ \ \ \ \ \ v2\ =\ vec2.astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06890}06890\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(v1,\ v2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06891}06891\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(res,\ tgt1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06892}06892\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ no\ broadcast,\ we\ must\ make\ v1\ into\ a\ 2d\ ndarray}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06893}06893\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(v2,\ v1.reshape(1,\ -\/1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06894}06894\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(res,\ tgt2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06895}06895\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06896}06896\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ boolean\ type}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06897}06897\ \ \ \ \ \ \ \ \ vec\ =\ np.array([\textcolor{keyword}{True},\ \textcolor{keyword}{True}],\ dtype=\textcolor{stringliteral}{'?'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06898}06898\ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(vec,\ vec)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06899}06899\ \ \ \ \ \ \ \ \ assert\_equal(res,\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06900}06900\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06901}06901\ \ \ \ \ \textcolor{keyword}{def\ }test\_vector\_matrix\_values(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06902}06902\ \ \ \ \ \ \ \ \ vec\ =\ np.array([1,\ 2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06903}06903\ \ \ \ \ \ \ \ \ mat1\ =\ np.array([[1,\ 2],\ [3,\ 4]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06904}06904\ \ \ \ \ \ \ \ \ mat2\ =\ np.stack([mat1]*2,\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06905}06905\ \ \ \ \ \ \ \ \ tgt1\ =\ np.array([7,\ 10])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06906}06906\ \ \ \ \ \ \ \ \ tgt2\ =\ np.stack([tgt1]*2,\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06907}06907\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_adf62c0b0992298f48d454e472c367408}{types}}[1:]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06908}06908\ \ \ \ \ \ \ \ \ \ \ \ \ v\ =\ vec.astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06909}06909\ \ \ \ \ \ \ \ \ \ \ \ \ m1\ =\ mat1.astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06910}06910\ \ \ \ \ \ \ \ \ \ \ \ \ m2\ =\ mat2.astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06911}06911\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(v,\ m1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06912}06912\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(res,\ tgt1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06913}06913\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(v,\ m2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06914}06914\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(res,\ tgt2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06915}06915\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06916}06916\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ boolean\ type}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06917}06917\ \ \ \ \ \ \ \ \ vec\ =\ np.array([\textcolor{keyword}{True},\ \textcolor{keyword}{False}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06918}06918\ \ \ \ \ \ \ \ \ mat1\ =\ np.array([[\textcolor{keyword}{True},\ \textcolor{keyword}{False}],\ [\textcolor{keyword}{False},\ \textcolor{keyword}{True}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06919}06919\ \ \ \ \ \ \ \ \ mat2\ =\ np.stack([mat1]*2,\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06920}06920\ \ \ \ \ \ \ \ \ tgt1\ =\ np.array([\textcolor{keyword}{True},\ \textcolor{keyword}{False}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06921}06921\ \ \ \ \ \ \ \ \ tgt2\ =\ np.stack([tgt1]*2,\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06922}06922\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06923}06923\ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(vec,\ mat1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06924}06924\ \ \ \ \ \ \ \ \ assert\_equal(res,\ tgt1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06925}06925\ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(vec,\ mat2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06926}06926\ \ \ \ \ \ \ \ \ assert\_equal(res,\ tgt2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06927}06927\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06928}06928\ \ \ \ \ \textcolor{keyword}{def\ }test\_matrix\_vector\_values(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06929}06929\ \ \ \ \ \ \ \ \ vec\ =\ np.array([1,\ 2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06930}06930\ \ \ \ \ \ \ \ \ mat1\ =\ np.array([[1,\ 2],\ [3,\ 4]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06931}06931\ \ \ \ \ \ \ \ \ mat2\ =\ np.stack([mat1]*2,\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06932}06932\ \ \ \ \ \ \ \ \ tgt1\ =\ np.array([5,\ 11])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06933}06933\ \ \ \ \ \ \ \ \ tgt2\ =\ np.stack([tgt1]*2,\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06934}06934\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_adf62c0b0992298f48d454e472c367408}{types}}[1:]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06935}06935\ \ \ \ \ \ \ \ \ \ \ \ \ v\ =\ vec.astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06936}06936\ \ \ \ \ \ \ \ \ \ \ \ \ m1\ =\ mat1.astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06937}06937\ \ \ \ \ \ \ \ \ \ \ \ \ m2\ =\ mat2.astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06938}06938\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(m1,\ v)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06939}06939\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(res,\ tgt1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06940}06940\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(m2,\ v)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06941}06941\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(res,\ tgt2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06942}06942\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06943}06943\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ boolean\ type}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06944}06944\ \ \ \ \ \ \ \ \ vec\ =\ np.array([\textcolor{keyword}{True},\ \textcolor{keyword}{False}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06945}06945\ \ \ \ \ \ \ \ \ mat1\ =\ np.array([[\textcolor{keyword}{True},\ \textcolor{keyword}{False}],\ [\textcolor{keyword}{False},\ \textcolor{keyword}{True}]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06946}06946\ \ \ \ \ \ \ \ \ mat2\ =\ np.stack([mat1]*2,\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06947}06947\ \ \ \ \ \ \ \ \ tgt1\ =\ np.array([\textcolor{keyword}{True},\ \textcolor{keyword}{False}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06948}06948\ \ \ \ \ \ \ \ \ tgt2\ =\ np.stack([tgt1]*2,\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06949}06949\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06950}06950\ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(vec,\ mat1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06951}06951\ \ \ \ \ \ \ \ \ assert\_equal(res,\ tgt1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06952}06952\ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(vec,\ mat2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06953}06953\ \ \ \ \ \ \ \ \ assert\_equal(res,\ tgt2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06954}06954\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06955}06955\ \ \ \ \ \textcolor{keyword}{def\ }test\_matrix\_matrix\_values(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06956}06956\ \ \ \ \ \ \ \ \ mat1\ =\ np.array([[1,\ 2],\ [3,\ 4]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06957}06957\ \ \ \ \ \ \ \ \ mat2\ =\ np.array([[1,\ 0],\ [1,\ 1]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06958}06958\ \ \ \ \ \ \ \ \ mat12\ =\ np.stack([mat1,\ mat2],\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06959}06959\ \ \ \ \ \ \ \ \ mat21\ =\ np.stack([mat2,\ mat1],\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06960}06960\ \ \ \ \ \ \ \ \ tgt11\ =\ np.array([[7,\ 10],\ [15,\ 22]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06961}06961\ \ \ \ \ \ \ \ \ tgt12\ =\ np.array([[3,\ 2],\ [7,\ 4]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06962}06962\ \ \ \ \ \ \ \ \ tgt21\ =\ np.array([[1,\ 2],\ [4,\ 6]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06963}06963\ \ \ \ \ \ \ \ \ tgt12\_21\ =\ np.stack([tgt12,\ tgt21],\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06964}06964\ \ \ \ \ \ \ \ \ tgt11\_12\ =\ np.stack((tgt11,\ tgt12),\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06965}06965\ \ \ \ \ \ \ \ \ tgt11\_21\ =\ np.stack((tgt11,\ tgt21),\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06966}06966\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_adf62c0b0992298f48d454e472c367408}{types}}[1:]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06967}06967\ \ \ \ \ \ \ \ \ \ \ \ \ m1\ =\ mat1.astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06968}06968\ \ \ \ \ \ \ \ \ \ \ \ \ m2\ =\ mat2.astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06969}06969\ \ \ \ \ \ \ \ \ \ \ \ \ m12\ =\ mat12.astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06970}06970\ \ \ \ \ \ \ \ \ \ \ \ \ m21\ =\ mat21.astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06971}06971\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06972}06972\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ matrix\ @\ matrix}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06973}06973\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(m1,\ m2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06974}06974\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(res,\ tgt12)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06975}06975\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(m2,\ m1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06976}06976\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(res,\ tgt21)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06977}06977\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06978}06978\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ stacked\ @\ matrix}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06979}06979\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(m12,\ m1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06980}06980\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(res,\ tgt11\_21)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06981}06981\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06982}06982\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ matrix\ @\ stacked}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06983}06983\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(m1,\ m12)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06984}06984\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(res,\ tgt11\_12)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06985}06985\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06986}06986\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ stacked\ @\ stacked}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06987}06987\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(m12,\ m21)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06988}06988\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(res,\ tgt12\_21)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06989}06989\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06990}06990\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ boolean\ type}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06991}06991\ \ \ \ \ \ \ \ \ m1\ =\ np.array([[1,\ 1],\ [0,\ 0]],\ dtype=np.bool\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06992}06992\ \ \ \ \ \ \ \ \ m2\ =\ np.array([[1,\ 0],\ [1,\ 1]],\ dtype=np.bool\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06993}06993\ \ \ \ \ \ \ \ \ m12\ =\ np.stack([m1,\ m2],\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06994}06994\ \ \ \ \ \ \ \ \ m21\ =\ np.stack([m2,\ m1],\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06995}06995\ \ \ \ \ \ \ \ \ tgt11\ =\ m1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06996}06996\ \ \ \ \ \ \ \ \ tgt12\ =\ m1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06997}06997\ \ \ \ \ \ \ \ \ tgt21\ =\ np.array([[1,\ 1],\ [1,\ 1]],\ dtype=np.bool\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06998}06998\ \ \ \ \ \ \ \ \ tgt12\_21\ =\ np.stack([tgt12,\ tgt21],\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l06999}06999\ \ \ \ \ \ \ \ \ tgt11\_12\ =\ np.stack((tgt11,\ tgt12),\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07000}07000\ \ \ \ \ \ \ \ \ tgt11\_21\ =\ np.stack((tgt11,\ tgt21),\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07001}07001\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07002}07002\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ matrix\ @\ matrix}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07003}07003\ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(m1,\ m2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07004}07004\ \ \ \ \ \ \ \ \ assert\_equal(res,\ tgt12)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07005}07005\ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(m2,\ m1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07006}07006\ \ \ \ \ \ \ \ \ assert\_equal(res,\ tgt21)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07007}07007\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07008}07008\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ stacked\ @\ matrix}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07009}07009\ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(m12,\ m1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07010}07010\ \ \ \ \ \ \ \ \ assert\_equal(res,\ tgt11\_21)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07011}07011\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07012}07012\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ matrix\ @\ stacked}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07013}07013\ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(m1,\ m12)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07014}07014\ \ \ \ \ \ \ \ \ assert\_equal(res,\ tgt11\_12)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07015}07015\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07016}07016\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ stacked\ @\ stacked}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07017}07017\ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(m12,\ m21)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07018}07018\ \ \ \ \ \ \ \ \ assert\_equal(res,\ tgt12\_21)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07019}07019\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07020}07020\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07021}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMatmul}{07021}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMatmul}{TestMatmul}}(\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon}{MatmulCommon}}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07022}07022\ \ \ \ \ matmul\ =\ np.matmul}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07023}07023\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07024}07024\ \ \ \ \ \textcolor{keyword}{def\ }test\_out\_arg(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07025}07025\ \ \ \ \ \ \ \ \ a\ =\ np.ones((5,\ 2),\ dtype=float)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07026}07026\ \ \ \ \ \ \ \ \ b\ =\ np.array([[1,\ 3],\ [5,\ 7]],\ dtype=float)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07027}07027\ \ \ \ \ \ \ \ \ tgt\ =\ np.dot(a,\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07028}07028\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07029}07029\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ as\ positional\ argument}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07030}07030\ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}out\ positional\ argument"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07031}07031\ \ \ \ \ \ \ \ \ out\ =\ np.zeros((5,\ 2),\ dtype=float)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07032}07032\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(a,\ b,\ out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07033}07033\ \ \ \ \ \ \ \ \ assert\_array\_equal(out,\ tgt,\ err\_msg=msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07034}07034\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07035}07035\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ as\ keyword\ argument}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07036}07036\ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}out\ keyword\ argument"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07037}07037\ \ \ \ \ \ \ \ \ out\ =\ np.zeros((5,\ 2),\ dtype=float)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07038}07038\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(a,\ b,\ out=out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07039}07039\ \ \ \ \ \ \ \ \ assert\_array\_equal(out,\ tgt,\ err\_msg=msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07040}07040\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07041}07041\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ out\ with\ not\ allowed\ type\ cast\ (safe\ casting)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07042}07042\ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}Cannot\ cast\ ufunc\ .*\ output"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07043}07043\ \ \ \ \ \ \ \ \ out\ =\ np.zeros((5,\ 2),\ dtype=np.int32)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07044}07044\ \ \ \ \ \ \ \ \ assert\_raises\_regex(TypeError,\ msg,\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}},\ a,\ b,\ out=out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07045}07045\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07046}07046\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ out\ with\ type\ upcast\ to\ complex}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07047}07047\ \ \ \ \ \ \ \ \ out\ =\ np.zeros((5,\ 2),\ dtype=np.complex128)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07048}07048\ \ \ \ \ \ \ \ \ c\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(a,\ b,\ out=out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07049}07049\ \ \ \ \ \ \ \ \ assert\_(c\ \textcolor{keywordflow}{is}\ out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07050}07050\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ \mbox{\hyperlink{classnumpy_1_1testing_1_1__private_1_1utils_1_1suppress__warnings}{suppress\_warnings}}()\ \textcolor{keyword}{as}\ sup:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07051}07051\ \ \ \ \ \ \ \ \ \ \ \ \ sup.filter(np.ComplexWarning,\ \textcolor{stringliteral}{''})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07052}07052\ \ \ \ \ \ \ \ \ \ \ \ \ c\ =\ c.astype(tgt.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07053}07053\ \ \ \ \ \ \ \ \ assert\_array\_equal(c,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07054}07054\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07055}07055\ \ \ \ \ \textcolor{keyword}{def\ }test\_empty\_out(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07056}07056\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ that\ the\ output\ cannot\ be\ broadcast,\ so\ that\ it\ cannot\ be}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07057}07057\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ size\ zero\ when\ the\ outer\ dimensions\ (iterator\ size)\ has\ size\ zero.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07058}07058\ \ \ \ \ \ \ \ \ arr\ =\ np.ones((0,\ 1,\ 1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07059}07059\ \ \ \ \ \ \ \ \ out\ =\ np.ones((1,\ 1,\ 1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07060}07060\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(arr,\ arr).shape\ ==\ (0,\ 1,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07061}07061\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07062}07062\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError,\ match=\textcolor{stringliteral}{r"{}non-\/broadcastable"{}}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07063}07063\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(arr,\ arr,\ out=out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07064}07064\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07065}07065\ \ \ \ \ \textcolor{keyword}{def\ }test\_out\_contiguous(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07066}07066\ \ \ \ \ \ \ \ \ a\ =\ np.ones((5,\ 2),\ dtype=float)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07067}07067\ \ \ \ \ \ \ \ \ b\ =\ np.array([[1,\ 3],\ [5,\ 7]],\ dtype=float)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07068}07068\ \ \ \ \ \ \ \ \ v\ =\ np.array([1,\ 3],\ dtype=float)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07069}07069\ \ \ \ \ \ \ \ \ tgt\ =\ np.dot(a,\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07070}07070\ \ \ \ \ \ \ \ \ tgt\_mv\ =\ np.dot(a,\ v)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07071}07071\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07072}07072\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ out\ non-\/contiguous}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07073}07073\ \ \ \ \ \ \ \ \ out\ =\ np.ones((5,\ 2,\ 2),\ dtype=float)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07074}07074\ \ \ \ \ \ \ \ \ c\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(a,\ b,\ out=out[...,\ 0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07075}07075\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ c.base\ \textcolor{keywordflow}{is}\ out}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07076}07076\ \ \ \ \ \ \ \ \ assert\_array\_equal(c,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07077}07077\ \ \ \ \ \ \ \ \ c\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(a,\ v,\ out=out[:,\ 0,\ 0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07078}07078\ \ \ \ \ \ \ \ \ assert\_array\_equal(c,\ tgt\_mv)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07079}07079\ \ \ \ \ \ \ \ \ c\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(v,\ a.T,\ out=out[:,\ 0,\ 0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07080}07080\ \ \ \ \ \ \ \ \ assert\_array\_equal(c,\ tgt\_mv)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07081}07081\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07082}07082\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ out\ contiguous\ in\ only\ last\ dim}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07083}07083\ \ \ \ \ \ \ \ \ out\ =\ np.ones((10,\ 2),\ dtype=float)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07084}07084\ \ \ \ \ \ \ \ \ c\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(a,\ b,\ out=out[::2,\ :])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07085}07085\ \ \ \ \ \ \ \ \ assert\_array\_equal(c,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07086}07086\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07087}07087\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ transposes\ of\ out,\ args}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07088}07088\ \ \ \ \ \ \ \ \ out\ =\ np.ones((5,\ 2),\ dtype=float)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07089}07089\ \ \ \ \ \ \ \ \ c\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(b.T,\ a.T,\ out=out.T)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07090}07090\ \ \ \ \ \ \ \ \ assert\_array\_equal(out,\ tgt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07091}07091\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07092}07092\ \ \ \ \ m1\ =\ np.arange(15.).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(5,\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07093}07093\ \ \ \ \ m2\ =\ np.arange(21.).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(3,\ 7)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07094}07094\ \ \ \ \ m3\ =\ np.arange(30.).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(5,\ 6)[:,\ ::2]\ \ \textcolor{comment}{\#\ non-\/contiguous}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07095}07095\ \ \ \ \ vc\ =\ np.arange(10.)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07096}07096\ \ \ \ \ vr\ =\ np.arange(6.)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07097}07097\ \ \ \ \ m0\ =\ np.zeros((3,\ 0))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07098}07098\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{'args'},\ (}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07099}07099\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ matrix-\/matrix}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07100}07100\ \ \ \ \ \ \ \ \ \ \ \ \ (m1,\ m2),\ (m2.T,\ m1.T),\ (m2.T.copy(),\ m1.T),\ (m2.T,\ m1.T.copy()),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07101}07101\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ matrix-\/matrix-\/transpose,\ contiguous\ and\ non}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07102}07102\ \ \ \ \ \ \ \ \ \ \ \ \ (m1,\ m1.T),\ (m1.T,\ m1),\ (m1,\ m3.T),\ (m3,\ m1.T),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07103}07103\ \ \ \ \ \ \ \ \ \ \ \ \ (m3,\ m3.T),\ (m3.T,\ m3),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07104}07104\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ matrix-\/matrix\ non-\/contiguous}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07105}07105\ \ \ \ \ \ \ \ \ \ \ \ \ (m3,\ m2),\ (m2.T,\ m3.T),\ (m2.T.copy(),\ m3.T),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07106}07106\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ vector-\/matrix,\ matrix-\/vector,\ contiguous}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07107}07107\ \ \ \ \ \ \ \ \ \ \ \ \ (m1,\ vr[:3]),\ (vc[:5],\ m1),\ (m1.T,\ vc[:5]),\ (vr[:3],\ m1.T),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07108}07108\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ vector-\/matrix,\ matrix-\/vector,\ vector\ non-\/contiguous}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07109}07109\ \ \ \ \ \ \ \ \ \ \ \ \ (m1,\ vr[::2]),\ (vc[::2],\ m1),\ (m1.T,\ vc[::2]),\ (vr[::2],\ m1.T),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07110}07110\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ vector-\/matrix,\ matrix-\/vector,\ matrix\ non-\/contiguous}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07111}07111\ \ \ \ \ \ \ \ \ \ \ \ \ (m3,\ vr[:3]),\ (vc[:5],\ m3),\ (m3.T,\ vc[:5]),\ (vr[:3],\ m3.T),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07112}07112\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ vector-\/matrix,\ matrix-\/vector,\ both\ non-\/contiguous}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07113}07113\ \ \ \ \ \ \ \ \ \ \ \ \ (m3,\ vr[::2]),\ (vc[::2],\ m3),\ (m3.T,\ vc[::2]),\ (vr[::2],\ m3.T),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07114}07114\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ size\ ==\ 0}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07115}07115\ \ \ \ \ \ \ \ \ \ \ \ \ (m0,\ m0.T),\ (m0.T,\ m0),\ (m1,\ m0),\ (m0.T,\ m1.T),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07116}07116\ \ \ \ \ \ \ \ \ ))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07117}07117\ \ \ \ \ \textcolor{keyword}{def\ }test\_dot\_equivalent(self,\ args):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07118}07118\ \ \ \ \ \ \ \ \ r1\ =\ np.matmul(*args)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07119}07119\ \ \ \ \ \ \ \ \ r2\ =\ np.dot(*args)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07120}07120\ \ \ \ \ \ \ \ \ assert\_equal(r1,\ r2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07121}07121\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07122}07122\ \ \ \ \ \ \ \ \ r3\ =\ np.matmul(args[0].copy(),\ args[1].copy())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07123}07123\ \ \ \ \ \ \ \ \ assert\_equal(r1,\ r3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07124}07124\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07125}07125\ \ \ \ \ \textcolor{keyword}{def\ }test\_matmul\_object(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07126}07126\ \ \ \ \ \ \ \ \ \textcolor{keyword}{import}\ fractions}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07127}07127\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07128}07128\ \ \ \ \ \ \ \ \ f\ =\ np.vectorize(fractions.Fraction)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07129}07129\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }random\_ints():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07130}07130\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ np.random.randint(1,\ 1000,\ size=(10,\ 3,\ 3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07131}07131\ \ \ \ \ \ \ \ \ M1\ =\ f(random\_ints(),\ random\_ints())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07132}07132\ \ \ \ \ \ \ \ \ M2\ =\ f(random\_ints(),\ random\_ints())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07133}07133\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07134}07134\ \ \ \ \ \ \ \ \ M3\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(M1,\ M2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07135}07135\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07136}07136\ \ \ \ \ \ \ \ \ [N1,\ N2,\ N3]\ =\ [a.astype(float)\ \textcolor{keywordflow}{for}\ a\ \textcolor{keywordflow}{in}\ [M1,\ M2,\ M3]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07137}07137\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07138}07138\ \ \ \ \ \ \ \ \ assert\_allclose(N3,\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(N1,\ N2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07139}07139\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07140}07140\ \ \ \ \ \textcolor{keyword}{def\ }test\_matmul\_object\_type\_scalar(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07141}07141\ \ \ \ \ \ \ \ \ \textcolor{keyword}{from}\ fractions\ \textcolor{keyword}{import}\ Fraction\ \textcolor{keyword}{as}\ F}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07142}07142\ \ \ \ \ \ \ \ \ v\ =\ np.array([F(2,3),\ F(5,7)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07143}07143\ \ \ \ \ \ \ \ \ res\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(v,\ v)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07144}07144\ \ \ \ \ \ \ \ \ assert\_(type(res)\ \textcolor{keywordflow}{is}\ F)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07145}07145\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07146}07146\ \ \ \ \ \textcolor{keyword}{def\ }test\_matmul\_empty(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07147}07147\ \ \ \ \ \ \ \ \ a\ =\ np.empty((3,\ 0),\ dtype=object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07148}07148\ \ \ \ \ \ \ \ \ b\ =\ np.empty((0,\ 3),\ dtype=object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07149}07149\ \ \ \ \ \ \ \ \ c\ =\ np.zeros((3,\ 3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07150}07150\ \ \ \ \ \ \ \ \ assert\_array\_equal(np.matmul(a,\ b),\ c)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07151}07151\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07152}07152\ \ \ \ \ \textcolor{keyword}{def\ }test\_matmul\_exception\_multiply(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07153}07153\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ that\ matmul\ fails\ if\ \`{}\_\_mul\_\_`\ is\ missing}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07154}07154\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }add\_not\_multiply():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07155}07155\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_add\_\_(self,\ other):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07156}07156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07157}07157\ \ \ \ \ \ \ \ \ a\ =\ np.full((3,3),\ add\_not\_multiply())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07158}07158\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_raises(TypeError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07159}07159\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ np.matmul(a,\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07160}07160\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07161}07161\ \ \ \ \ \textcolor{keyword}{def\ }test\_matmul\_exception\_add(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07162}07162\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ that\ matmul\ fails\ if\ \`{}\_\_add\_\_`\ is\ missing}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07163}07163\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }multiply\_not\_add():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07164}07164\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_mul\_\_(self,\ other):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07165}07165\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07166}07166\ \ \ \ \ \ \ \ \ a\ =\ np.full((3,3),\ multiply\_not\_add())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07167}07167\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_raises(TypeError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07168}07168\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ np.matmul(a,\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07169}07169\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07170}07170\ \ \ \ \ \textcolor{keyword}{def\ }test\_matmul\_bool(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07171}07171\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/14439}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07172}07172\ \ \ \ \ \ \ \ \ a\ =\ np.array([[1,\ 0],[1,\ 1]],\ dtype=bool)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07173}07173\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ np.max(a.view(np.uint8))\ ==\ 1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07174}07174\ \ \ \ \ \ \ \ \ b\ =\ np.matmul(a,\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07175}07175\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ matmul\ with\ boolean\ output\ should\ always\ be\ 0,\ 1}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07176}07176\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ np.max(b.view(np.uint8))\ ==\ 1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07177}07177\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07178}07178\ \ \ \ \ \ \ \ \ rg\ =\ np.random.default\_rng(np.random.PCG64(43))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07179}07179\ \ \ \ \ \ \ \ \ d\ =\ rg.integers(2,\ size=4*5,\ dtype=np.int8)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07180}07180\ \ \ \ \ \ \ \ \ d\ =\ d.reshape(4,\ 5)\ >\ 0}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07181}07181\ \ \ \ \ \ \ \ \ out1\ =\ np.matmul(d,\ d.reshape(5,\ 4))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07182}07182\ \ \ \ \ \ \ \ \ out2\ =\ np.dot(d,\ d.reshape(5,\ 4))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07183}07183\ \ \ \ \ \ \ \ \ assert\_equal(out1,\ out2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07184}07184\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07185}07185\ \ \ \ \ \ \ \ \ c\ =\ np.matmul(np.zeros((2,\ 0),\ dtype=bool),\ np.zeros(0,\ dtype=bool))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07186}07186\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ \textcolor{keywordflow}{not}\ np.any(c)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07187}07187\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07188}07188\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07189}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMatmulOperator}{07189}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMatmulOperator}{TestMatmulOperator}}(\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon}{MatmulCommon}}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07190}07190\ \ \ \ \ \textcolor{keyword}{import}\ operator}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07191}07191\ \ \ \ \ matmul\ =\ operator.matmul}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07192}07192\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07193}07193\ \ \ \ \ \textcolor{keyword}{def\ }test\_array\_priority\_override(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07194}07194\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07195}07195\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }A:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07196}07196\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_array\_priority\_\_\ =\ 1000}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07197}07197\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07198}07198\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_matmul\_\_(self,\ other):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07199}07199\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}A"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07200}07200\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07201}07201\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_rmatmul\_\_(self,\ other):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07202}07202\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}A"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07203}07203\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07204}07204\ \ \ \ \ \ \ \ \ a\ =\ A()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07205}07205\ \ \ \ \ \ \ \ \ b\ =\ np.ones(2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07206}07206\ \ \ \ \ \ \ \ \ assert\_equal(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(a,\ b),\ \textcolor{stringliteral}{"{}A"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07207}07207\ \ \ \ \ \ \ \ \ assert\_equal(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}}(b,\ a),\ \textcolor{stringliteral}{"{}A"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07208}07208\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07209}07209\ \ \ \ \ \textcolor{keyword}{def\ }test\_matmul\_raises(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07210}07210\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}},\ np.int8(5),\ np.int8(5))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07211}07211\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}},\ np.void(b\textcolor{stringliteral}{'abc'}),\ np.void(b\textcolor{stringliteral}{'abc'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07212}07212\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1MatmulCommon_a1391799af68b7366d1bd76656c8c0e2f}{matmul}},\ np.arange(10),\ np.void(b\textcolor{stringliteral}{'abc'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07213}07213\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07214}07214\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07215}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMatmulInplace}{07215}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMatmulInplace}{TestMatmulInplace}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07216}07216\ \ \ \ \ DTYPES\ =\ \{\}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07217}07217\ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ MatmulCommon.types:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07218}07218\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ j\ \textcolor{keywordflow}{in}\ MatmulCommon.types:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07219}07219\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ np.can\_cast(j,\ i):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07220}07220\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ DTYPES[f\textcolor{stringliteral}{"{}\{i\}-\/\{j\}"{}}]\ =\ (np.dtype(i),\ np.dtype(j))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07221}07221\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07222}07222\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}dtype1,dtype2"{},\ DTYPES.values()},\ ids=DTYPES)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07223}07223\ \ \ \ \ \textcolor{keyword}{def\ }test\_basic(self,\ dtype1:\ np.dtype,\ dtype2:\ np.dtype)\ -\/>\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07224}07224\ \ \ \ \ \ \ \ \ a\ =\ np.arange(10).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(5,\ 2).astype(dtype1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07225}07225\ \ \ \ \ \ \ \ \ a\_id\ =\ id(a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07226}07226\ \ \ \ \ \ \ \ \ b\ =\ np.ones((2,\ 2),\ dtype=dtype2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07227}07227\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07228}07228\ \ \ \ \ \ \ \ \ ref\ =\ a\ @\ b}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07229}07229\ \ \ \ \ \ \ \ \ a\ @=\ b}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07230}07230\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07231}07231\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ id(a)\ ==\ a\_id}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07232}07232\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ a.dtype\ ==\ dtype1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07233}07233\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ a.shape\ ==\ (5,\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07234}07234\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ dtype1.kind\ \textcolor{keywordflow}{in}\ \textcolor{stringliteral}{"{}fc"{}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07235}07235\ \ \ \ \ \ \ \ \ \ \ \ \ np.testing.assert\_allclose(a,\ ref)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07236}07236\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07237}07237\ \ \ \ \ \ \ \ \ \ \ \ \ np.testing.assert\_array\_equal(a,\ ref)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07238}07238\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07239}07239\ \ \ \ \ SHAPES\ =\ \{}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07240}07240\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}2d\_large"{}}:\ ((10**5,\ 10),\ (10,\ 10)),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07241}07241\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}3d\_large"{}}:\ ((10**4,\ 10,\ 10),\ (1,\ 10,\ 10)),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07242}07242\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}1d"{}}:\ ((3,),\ (3,)),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07243}07243\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}2d\_1d"{}}:\ ((3,\ 3),\ (3,)),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07244}07244\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}1d\_2d"{}}:\ ((3,),\ (3,\ 3)),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07245}07245\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}2d\_broadcast"{}}:\ ((3,\ 3),\ (3,\ 1)),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07246}07246\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}2d\_broadcast\_reverse"{}}:\ ((1,\ 3),\ (3,\ 3)),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07247}07247\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}3d\_broadcast1"{}}:\ ((3,\ 3,\ 3),\ (1,\ 3,\ 1)),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07248}07248\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}3d\_broadcast2"{}}:\ ((3,\ 3,\ 3),\ (1,\ 3,\ 3)),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07249}07249\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}3d\_broadcast3"{}}:\ ((3,\ 3,\ 3),\ (3,\ 3,\ 1)),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07250}07250\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}3d\_broadcast\_reverse1"{}}:\ ((1,\ 3,\ 3),\ (3,\ 3,\ 3)),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07251}07251\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}3d\_broadcast\_reverse2"{}}:\ ((3,\ 1,\ 3),\ (3,\ 3,\ 3)),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07252}07252\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}3d\_broadcast\_reverse3"{}}:\ ((1,\ 1,\ 3),\ (3,\ 3,\ 3)),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07253}07253\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07254}07254\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07255}07255\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}a\_shape,b\_shape"{},\ SHAPES.values()},\ ids=SHAPES)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07256}07256\ \ \ \ \ \textcolor{keyword}{def\ }test\_shapes(self,\ a\_shape:\ tuple[int,\ ...],\ b\_shape:\ tuple[int,\ ...]):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07257}07257\ \ \ \ \ \ \ \ \ a\_size\ =\ np.prod(a\_shape)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07258}07258\ \ \ \ \ \ \ \ \ a\ =\ np.arange(a\_size).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(a\_shape).astype(np.float64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07259}07259\ \ \ \ \ \ \ \ \ a\_id\ =\ id(a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07260}07260\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07261}07261\ \ \ \ \ \ \ \ \ b\_size\ =\ np.prod(b\_shape)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07262}07262\ \ \ \ \ \ \ \ \ b\ =\ np.arange(b\_size).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(b\_shape)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07263}07263\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07264}07264\ \ \ \ \ \ \ \ \ ref\ =\ a\ @\ b}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07265}07265\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ref.shape\ !=\ a\_shape:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07266}07266\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07267}07267\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ a\ @=\ b}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07268}07268\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07269}07269\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07270}07270\ \ \ \ \ \ \ \ \ \ \ \ \ a\ @=\ b}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07271}07271\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07272}07272\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ id(a)\ ==\ a\_id}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07273}07273\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ a.dtype.type\ ==\ np.float64}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07274}07274\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ a.shape\ ==\ a\_shape}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07275}07275\ \ \ \ \ \ \ \ \ np.testing.assert\_allclose(a,\ ref)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07276}07276\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07277}07277\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07278}07278\ \textcolor{keyword}{def\ }test\_matmul\_axes():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07279}07279\ \ \ \ \ a\ =\ np.arange(3*4*5).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(3,\ 4,\ 5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07280}07280\ \ \ \ \ c\ =\ np.matmul(a,\ a,\ axes=[(-\/2,\ -\/1),\ (-\/1,\ -\/2),\ (1,\ 2)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07281}07281\ \ \ \ \ \textcolor{keyword}{assert}\ c.shape\ ==\ (3,\ 4,\ 4)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07282}07282\ \ \ \ \ d\ =\ np.matmul(a,\ a,\ axes=[(-\/2,\ -\/1),\ (-\/1,\ -\/2),\ (0,\ 1)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07283}07283\ \ \ \ \ \textcolor{keyword}{assert}\ d.shape\ ==\ (4,\ 4,\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07284}07284\ \ \ \ \ e\ =\ np.swapaxes(d,\ 0,\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07285}07285\ \ \ \ \ assert\_array\_equal(e,\ c)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07286}07286\ \ \ \ \ f\ =\ np.matmul(a,\ np.arange(3),\ axes=[(1,\ 0),\ (0),\ (0)])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07287}07287\ \ \ \ \ \textcolor{keyword}{assert}\ f.shape\ ==\ (4,\ 5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07288}07288\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07289}07289\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07290}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestInner}{07290}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestInner}{TestInner}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07291}07291\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07292}07292\ \ \ \ \ \textcolor{keyword}{def\ }test\_inner\_type\_mismatch(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07293}07293\ \ \ \ \ \ \ \ \ c\ =\ 1.}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07294}07294\ \ \ \ \ \ \ \ \ A\ =\ np.array((1,1),\ dtype=\textcolor{stringliteral}{'i,i'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07295}07295\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07296}07296\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ np.inner,\ c,\ A)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07297}07297\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ np.inner,\ A,\ c)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07298}07298\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07299}07299\ \ \ \ \ \textcolor{keyword}{def\ }test\_inner\_scalar\_and\_vector(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07300}07300\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ np.typecodes[\textcolor{stringliteral}{'AllInteger'}]\ +\ np.typecodes[\textcolor{stringliteral}{'AllFloat'}]\ +\ \textcolor{stringliteral}{'?'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07301}07301\ \ \ \ \ \ \ \ \ \ \ \ \ sca\ =\ np.array(3,\ dtype=dt)[()]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07302}07302\ \ \ \ \ \ \ \ \ \ \ \ \ vec\ =\ np.array([1,\ 2],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07303}07303\ \ \ \ \ \ \ \ \ \ \ \ \ desired\ =\ np.array([3,\ 6],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07304}07304\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.inner(vec,\ sca),\ desired)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07305}07305\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.inner(sca,\ vec),\ desired)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07306}07306\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07307}07307\ \ \ \ \ \textcolor{keyword}{def\ }test\_vecself(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07308}07308\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Ticket\ 844.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07309}07309\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Inner\ product\ of\ a\ vector\ with\ itself\ segfaults\ or\ give}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07310}07310\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ meaningless\ result}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07311}07311\ \ \ \ \ \ \ \ \ a\ =\ np.zeros(shape=(1,\ 80),\ dtype=np.float64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07312}07312\ \ \ \ \ \ \ \ \ p\ =\ np.inner(a,\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07313}07313\ \ \ \ \ \ \ \ \ assert\_almost\_equal(p,\ 0,\ decimal=14)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07314}07314\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07315}07315\ \ \ \ \ \textcolor{keyword}{def\ }test\_inner\_product\_with\_various\_contiguities(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07316}07316\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ github\ issue\ 6532}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07317}07317\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ np.typecodes[\textcolor{stringliteral}{'AllInteger'}]\ +\ np.typecodes[\textcolor{stringliteral}{'AllFloat'}]\ +\ \textcolor{stringliteral}{'?'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07318}07318\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ an\ inner\ product\ involving\ a\ matrix\ transpose}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07319}07319\ \ \ \ \ \ \ \ \ \ \ \ \ A\ =\ np.array([[1,\ 2],\ [3,\ 4]],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07320}07320\ \ \ \ \ \ \ \ \ \ \ \ \ B\ =\ np.array([[1,\ 3],\ [2,\ 4]],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07321}07321\ \ \ \ \ \ \ \ \ \ \ \ \ C\ =\ np.array([1,\ 1],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07322}07322\ \ \ \ \ \ \ \ \ \ \ \ \ desired\ =\ np.array([4,\ 6],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07323}07323\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.inner(A.T,\ C),\ desired)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07324}07324\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.inner(C,\ A.T),\ desired)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07325}07325\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.inner(B,\ C),\ desired)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07326}07326\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.inner(C,\ B),\ desired)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07327}07327\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ a\ matrix\ product}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07328}07328\ \ \ \ \ \ \ \ \ \ \ \ \ desired\ =\ np.array([[7,\ 10],\ [15,\ 22]],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07329}07329\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.inner(A,\ B),\ desired)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07330}07330\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ the\ syrk\ vs.\ gemm\ paths}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07331}07331\ \ \ \ \ \ \ \ \ \ \ \ \ desired\ =\ np.array([[5,\ 11],\ [11,\ 25]],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07332}07332\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.inner(A,\ A),\ desired)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07333}07333\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.inner(A,\ A.copy()),\ desired)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07334}07334\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ an\ inner\ product\ involving\ an\ aliased\ and\ reversed\ view}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07335}07335\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.arange(5).astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07336}07336\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ a[::-\/1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07337}07337\ \ \ \ \ \ \ \ \ \ \ \ \ desired\ =\ np.array(10,\ dtype=dt).item()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07338}07338\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.inner(b,\ a),\ desired)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07339}07339\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07340}07340\ \ \ \ \ \textcolor{keyword}{def\ }test\_3d\_tensor(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07341}07341\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ np.typecodes[\textcolor{stringliteral}{'AllInteger'}]\ +\ np.typecodes[\textcolor{stringliteral}{'AllFloat'}]\ +\ \textcolor{stringliteral}{'?'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07342}07342\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ np.arange(24).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,3,4).astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07343}07343\ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ np.arange(24,\ 48).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,3,4).astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07344}07344\ \ \ \ \ \ \ \ \ \ \ \ \ desired\ =\ np.array(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07345}07345\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[[[\ 158,\ \ 182,\ \ 206],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07346}07346\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\ 230,\ \ 254,\ \ 278]],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07347}07347\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07348}07348\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[\ 566,\ \ 654,\ \ 742],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07349}07349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\ 830,\ \ 918,\ 1006]],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07350}07350\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07351}07351\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[\ 974,\ 1126,\ 1278],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07352}07352\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1430,\ 1582,\ 1734]]],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07353}07353\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07354}07354\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[[1382,\ 1598,\ 1814],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07355}07355\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [2030,\ 2246,\ 2462]],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07356}07356\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07357}07357\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[1790,\ 2070,\ 2350],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07358}07358\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [2630,\ 2910,\ 3190]],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07359}07359\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07360}07360\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[2198,\ 2542,\ 2886],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07361}07361\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [3230,\ 3574,\ 3918]]]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07362}07362\ \ \ \ \ \ \ \ \ \ \ \ \ ).astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07363}07363\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.inner(a,\ b),\ desired)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07364}07364\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.inner(b,\ a).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a841d0800caffc28ceef9afb4731e6ed5}{transpose}}(2,3,0,1),\ desired)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07365}07365\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07366}07366\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07367}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestChoose}{07367}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestChoose}{TestChoose}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07368}07368\ \ \ \ \ \textcolor{keyword}{def\ }setup\_method(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07369}07369\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestChoose_a0e1820502866839f7f6970310e83855c}{x}}\ =\ 2*np.ones((3,),\ dtype=int)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07370}07370\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestChoose_abd8fdc7622f97fb9de557572c6843474}{y}}\ =\ 3*np.ones((3,),\ dtype=int)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07371}07371\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestChoose_ace16599e6751ba08a460a1c3c05571ea}{x2}}\ =\ 2*np.ones((2,\ 3),\ dtype=int)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07372}07372\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestChoose_ad92ba491313e3c6c4af791b5b15e76c0}{y2}}\ =\ 3*np.ones((2,\ 3),\ dtype=int)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07373}07373\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestChoose_aff21ff288a32272b6a538eca9be8e07a}{ind}}\ =\ [0,\ 0,\ 1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07374}07374\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07375}07375\ \ \ \ \ \textcolor{keyword}{def\ }test\_basic(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07376}07376\ \ \ \ \ \ \ \ \ A\ =\ np.choose(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestChoose_aff21ff288a32272b6a538eca9be8e07a}{ind}},\ (self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestChoose_a0e1820502866839f7f6970310e83855c}{x}},\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestChoose_abd8fdc7622f97fb9de557572c6843474}{y}}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07377}07377\ \ \ \ \ \ \ \ \ assert\_equal(A,\ [2,\ 2,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07378}07378\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07379}07379\ \ \ \ \ \textcolor{keyword}{def\ }test\_broadcast1(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07380}07380\ \ \ \ \ \ \ \ \ A\ =\ np.choose(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestChoose_aff21ff288a32272b6a538eca9be8e07a}{ind}},\ (self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestChoose_ace16599e6751ba08a460a1c3c05571ea}{x2}},\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestChoose_ad92ba491313e3c6c4af791b5b15e76c0}{y2}}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07381}07381\ \ \ \ \ \ \ \ \ assert\_equal(A,\ [[2,\ 2,\ 3],\ [2,\ 2,\ 3]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07382}07382\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07383}07383\ \ \ \ \ \textcolor{keyword}{def\ }test\_broadcast2(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07384}07384\ \ \ \ \ \ \ \ \ A\ =\ np.choose(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestChoose_aff21ff288a32272b6a538eca9be8e07a}{ind}},\ (self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestChoose_a0e1820502866839f7f6970310e83855c}{x}},\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestChoose_ad92ba491313e3c6c4af791b5b15e76c0}{y2}}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07385}07385\ \ \ \ \ \ \ \ \ assert\_equal(A,\ [[2,\ 2,\ 3],\ [2,\ 2,\ 3]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07386}07386\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07387}07387\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{"{}ops"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07388}07388\ \ \ \ \ \ \ \ \ [(1000,\ np.array([1],\ dtype=np.uint8)),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07389}07389\ \ \ \ \ \ \ \ \ \ (-\/1,\ np.array([1],\ dtype=np.uint8)),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07390}07390\ \ \ \ \ \ \ \ \ \ (1.,\ np.float32(3)),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07391}07391\ \ \ \ \ \ \ \ \ \ (1.,\ np.array([3],\ dtype=np.float32))],)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07392}07392\ \ \ \ \ \textcolor{keyword}{def\ }test\_output\_dtype(self,\ ops):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07393}07393\ \ \ \ \ \ \ \ \ expected\_dt\ =\ np.result\_type(*ops)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07394}07394\ \ \ \ \ \ \ \ \ assert(np.choose([0],\ ops).dtype\ ==\ expected\_dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07395}07395\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07396}07396\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07397}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestRepeat}{07397}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestRepeat}{TestRepeat}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07398}07398\ \ \ \ \ \textcolor{keyword}{def\ }setup\_method(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07399}07399\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestRepeat_a114942d9d70ee15ef06f84a2b3ee469b}{m}}\ =\ np.array([1,\ 2,\ 3,\ 4,\ 5,\ 6])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07400}07400\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestRepeat_ae42ab208d0d4ff18bee8e8723d081503}{m\_rect}}\ =\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestRepeat_a114942d9d70ee15ef06f84a2b3ee469b}{m}}.\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}((2,\ 3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07401}07401\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07402}07402\ \ \ \ \ \textcolor{keyword}{def\ }test\_basic(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07403}07403\ \ \ \ \ \ \ \ \ A\ =\ np.repeat(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestRepeat_a114942d9d70ee15ef06f84a2b3ee469b}{m}},\ [1,\ 3,\ 2,\ 1,\ 1,\ 2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07404}07404\ \ \ \ \ \ \ \ \ assert\_equal(A,\ [1,\ 2,\ 2,\ 2,\ 3,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07405}07405\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 3,\ 4,\ 5,\ 6,\ 6])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07406}07406\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07407}07407\ \ \ \ \ \textcolor{keyword}{def\ }test\_broadcast1(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07408}07408\ \ \ \ \ \ \ \ \ A\ =\ np.repeat(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestRepeat_a114942d9d70ee15ef06f84a2b3ee469b}{m}},\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07409}07409\ \ \ \ \ \ \ \ \ assert\_equal(A,\ [1,\ 1,\ 2,\ 2,\ 3,\ 3,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07410}07410\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 4,\ 4,\ 5,\ 5,\ 6,\ 6])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07411}07411\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07412}07412\ \ \ \ \ \textcolor{keyword}{def\ }test\_axis\_spec(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07413}07413\ \ \ \ \ \ \ \ \ A\ =\ np.repeat(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestRepeat_ae42ab208d0d4ff18bee8e8723d081503}{m\_rect}},\ [2,\ 1],\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07414}07414\ \ \ \ \ \ \ \ \ assert\_equal(A,\ [[1,\ 2,\ 3],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07415}07415\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 2,\ 3],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07416}07416\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [4,\ 5,\ 6]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07417}07417\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07418}07418\ \ \ \ \ \ \ \ \ A\ =\ np.repeat(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestRepeat_ae42ab208d0d4ff18bee8e8723d081503}{m\_rect}},\ [1,\ 3,\ 2],\ axis=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07419}07419\ \ \ \ \ \ \ \ \ assert\_equal(A,\ [[1,\ 2,\ 2,\ 2,\ 3,\ 3],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07420}07420\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [4,\ 5,\ 5,\ 5,\ 6,\ 6]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07421}07421\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07422}07422\ \ \ \ \ \textcolor{keyword}{def\ }test\_broadcast2(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07423}07423\ \ \ \ \ \ \ \ \ A\ =\ np.repeat(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestRepeat_ae42ab208d0d4ff18bee8e8723d081503}{m\_rect}},\ 2,\ axis=0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07424}07424\ \ \ \ \ \ \ \ \ assert\_equal(A,\ [[1,\ 2,\ 3],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07425}07425\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1,\ 2,\ 3],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07426}07426\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [4,\ 5,\ 6],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07427}07427\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [4,\ 5,\ 6]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07428}07428\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07429}07429\ \ \ \ \ \ \ \ \ A\ =\ np.repeat(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestRepeat_ae42ab208d0d4ff18bee8e8723d081503}{m\_rect}},\ 2,\ axis=1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07430}07430\ \ \ \ \ \ \ \ \ assert\_equal(A,\ [[1,\ 1,\ 2,\ 2,\ 3,\ 3],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07431}07431\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [4,\ 4,\ 5,\ 5,\ 6,\ 6]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07432}07432\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07433}07433\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07434}07434\ \textcolor{comment}{\#\ TODO:\ test\ for\ multidimensional}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07435}07435\ NEIGH\_MODE\ =\ \{\textcolor{stringliteral}{'zero'}:\ 0,\ \textcolor{stringliteral}{'one'}:\ 1,\ \textcolor{stringliteral}{'constant'}:\ 2,\ \textcolor{stringliteral}{'circular'}:\ 3,\ \textcolor{stringliteral}{'mirror'}:\ 4\}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07436}07436\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07437}07437\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07438}07438\ \textcolor{preprocessor}{@pytest.mark.parametrize('dt',\ [float,\ Decimal],\ ids=['float',\ 'object'])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07439}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNeighborhoodIter}{07439}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNeighborhoodIter}{TestNeighborhoodIter}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07440}07440\ \ \ \ \ \textcolor{comment}{\#\ Simple,\ 2d\ tests}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07441}07441\ \ \ \ \ \textcolor{keyword}{def\ }test\_simple2d(self,\ dt):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07442}07442\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ zero\ and\ one\ padding\ for\ simple\ data\ type}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07443}07443\ \ \ \ \ \ \ \ \ x\ =\ np.array([[0,\ 1],\ [2,\ 3]],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07444}07444\ \ \ \ \ \ \ \ \ r\ =\ [np.array([[0,\ 0,\ 0],\ [0,\ 0,\ 1]],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07445}07445\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([[0,\ 0,\ 0],\ [0,\ 1,\ 0]],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07446}07446\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([[0,\ 0,\ 1],\ [0,\ 2,\ 3]],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07447}07447\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([[0,\ 1,\ 0],\ [2,\ 3,\ 0]],\ dtype=dt)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07448}07448\ \ \ \ \ \ \ \ \ l\ =\ \_multiarray\_tests.test\_neighborhood\_iterator(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07449}07449\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x,\ [-\/1,\ 0,\ -\/1,\ 1],\ x[0],\ NEIGH\_MODE[\textcolor{stringliteral}{'zero'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07450}07450\ \ \ \ \ \ \ \ \ assert\_array\_equal(l,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07451}07451\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07452}07452\ \ \ \ \ \ \ \ \ r\ =\ [np.array([[1,\ 1,\ 1],\ [1,\ 0,\ 1]],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07453}07453\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([[1,\ 1,\ 1],\ [0,\ 1,\ 1]],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07454}07454\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([[1,\ 0,\ 1],\ [1,\ 2,\ 3]],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07455}07455\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([[0,\ 1,\ 1],\ [2,\ 3,\ 1]],\ dtype=dt)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07456}07456\ \ \ \ \ \ \ \ \ l\ =\ \_multiarray\_tests.test\_neighborhood\_iterator(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07457}07457\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x,\ [-\/1,\ 0,\ -\/1,\ 1],\ x[0],\ NEIGH\_MODE[\textcolor{stringliteral}{'one'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07458}07458\ \ \ \ \ \ \ \ \ assert\_array\_equal(l,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07459}07459\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07460}07460\ \ \ \ \ \ \ \ \ r\ =\ [np.array([[4,\ 4,\ 4],\ [4,\ 0,\ 1]],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07461}07461\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([[4,\ 4,\ 4],\ [0,\ 1,\ 4]],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07462}07462\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([[4,\ 0,\ 1],\ [4,\ 2,\ 3]],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07463}07463\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([[0,\ 1,\ 4],\ [2,\ 3,\ 4]],\ dtype=dt)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07464}07464\ \ \ \ \ \ \ \ \ l\ =\ \_multiarray\_tests.test\_neighborhood\_iterator(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07465}07465\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x,\ [-\/1,\ 0,\ -\/1,\ 1],\ 4,\ NEIGH\_MODE[\textcolor{stringliteral}{'constant'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07466}07466\ \ \ \ \ \ \ \ \ assert\_array\_equal(l,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07467}07467\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07468}07468\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ with\ start\ in\ the\ middle}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07469}07469\ \ \ \ \ \ \ \ \ r\ =\ [np.array([[4,\ 0,\ 1],\ [4,\ 2,\ 3]],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07470}07470\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([[0,\ 1,\ 4],\ [2,\ 3,\ 4]],\ dtype=dt)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07471}07471\ \ \ \ \ \ \ \ \ l\ =\ \_multiarray\_tests.test\_neighborhood\_iterator(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07472}07472\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x,\ [-\/1,\ 0,\ -\/1,\ 1],\ 4,\ NEIGH\_MODE[\textcolor{stringliteral}{'constant'}],\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07473}07473\ \ \ \ \ \ \ \ \ assert\_array\_equal(l,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07474}07474\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07475}07475\ \ \ \ \ \textcolor{keyword}{def\ }test\_mirror2d(self,\ dt):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07476}07476\ \ \ \ \ \ \ \ \ x\ =\ np.array([[0,\ 1],\ [2,\ 3]],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07477}07477\ \ \ \ \ \ \ \ \ r\ =\ [np.array([[0,\ 0,\ 1],\ [0,\ 0,\ 1]],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07478}07478\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([[0,\ 1,\ 1],\ [0,\ 1,\ 1]],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07479}07479\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([[0,\ 0,\ 1],\ [2,\ 2,\ 3]],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07480}07480\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([[0,\ 1,\ 1],\ [2,\ 3,\ 3]],\ dtype=dt)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07481}07481\ \ \ \ \ \ \ \ \ l\ =\ \_multiarray\_tests.test\_neighborhood\_iterator(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07482}07482\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x,\ [-\/1,\ 0,\ -\/1,\ 1],\ x[0],\ NEIGH\_MODE[\textcolor{stringliteral}{'mirror'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07483}07483\ \ \ \ \ \ \ \ \ assert\_array\_equal(l,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07484}07484\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07485}07485\ \ \ \ \ \textcolor{comment}{\#\ Simple,\ 1d\ tests}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07486}07486\ \ \ \ \ \textcolor{keyword}{def\ }test\_simple(self,\ dt):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07487}07487\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ padding\ with\ constant\ values}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07488}07488\ \ \ \ \ \ \ \ \ x\ =\ np.linspace(1,\ 5,\ 5).astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07489}07489\ \ \ \ \ \ \ \ \ r\ =\ [[0,\ 1,\ 2],\ [1,\ 2,\ 3],\ [2,\ 3,\ 4],\ [3,\ 4,\ 5],\ [4,\ 5,\ 0]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07490}07490\ \ \ \ \ \ \ \ \ l\ =\ \_multiarray\_tests.test\_neighborhood\_iterator(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07491}07491\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x,\ [-\/1,\ 1],\ x[0],\ NEIGH\_MODE[\textcolor{stringliteral}{'zero'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07492}07492\ \ \ \ \ \ \ \ \ assert\_array\_equal(l,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07493}07493\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07494}07494\ \ \ \ \ \ \ \ \ r\ =\ [[1,\ 1,\ 2],\ [1,\ 2,\ 3],\ [2,\ 3,\ 4],\ [3,\ 4,\ 5],\ [4,\ 5,\ 1]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07495}07495\ \ \ \ \ \ \ \ \ l\ =\ \_multiarray\_tests.test\_neighborhood\_iterator(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07496}07496\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x,\ [-\/1,\ 1],\ x[0],\ NEIGH\_MODE[\textcolor{stringliteral}{'one'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07497}07497\ \ \ \ \ \ \ \ \ assert\_array\_equal(l,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07498}07498\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07499}07499\ \ \ \ \ \ \ \ \ r\ =\ [[x[4],\ 1,\ 2],\ [1,\ 2,\ 3],\ [2,\ 3,\ 4],\ [3,\ 4,\ 5],\ [4,\ 5,\ x[4]]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07500}07500\ \ \ \ \ \ \ \ \ l\ =\ \_multiarray\_tests.test\_neighborhood\_iterator(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07501}07501\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x,\ [-\/1,\ 1],\ x[4],\ NEIGH\_MODE[\textcolor{stringliteral}{'constant'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07502}07502\ \ \ \ \ \ \ \ \ assert\_array\_equal(l,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07503}07503\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07504}07504\ \ \ \ \ \textcolor{comment}{\#\ Test\ mirror\ modes}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07505}07505\ \ \ \ \ \textcolor{keyword}{def\ }test\_mirror(self,\ dt):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07506}07506\ \ \ \ \ \ \ \ \ x\ =\ np.linspace(1,\ 5,\ 5).astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07507}07507\ \ \ \ \ \ \ \ \ r\ =\ np.array([[2,\ 1,\ 1,\ 2,\ 3],\ [1,\ 1,\ 2,\ 3,\ 4],\ [1,\ 2,\ 3,\ 4,\ 5],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07508}07508\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [2,\ 3,\ 4,\ 5,\ 5],\ [3,\ 4,\ 5,\ 5,\ 4]],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07509}07509\ \ \ \ \ \ \ \ \ l\ =\ \_multiarray\_tests.test\_neighborhood\_iterator(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07510}07510\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x,\ [-\/2,\ 2],\ x[1],\ NEIGH\_MODE[\textcolor{stringliteral}{'mirror'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07511}07511\ \ \ \ \ \ \ \ \ assert\_([i.dtype\ ==\ dt\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ l])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07512}07512\ \ \ \ \ \ \ \ \ assert\_array\_equal(l,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07513}07513\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07514}07514\ \ \ \ \ \textcolor{comment}{\#\ Circular\ mode}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07515}07515\ \ \ \ \ \textcolor{keyword}{def\ }test\_circular(self,\ dt):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07516}07516\ \ \ \ \ \ \ \ \ x\ =\ np.linspace(1,\ 5,\ 5).astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07517}07517\ \ \ \ \ \ \ \ \ r\ =\ np.array([[4,\ 5,\ 1,\ 2,\ 3],\ [5,\ 1,\ 2,\ 3,\ 4],\ [1,\ 2,\ 3,\ 4,\ 5],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07518}07518\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [2,\ 3,\ 4,\ 5,\ 1],\ [3,\ 4,\ 5,\ 1,\ 2]],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07519}07519\ \ \ \ \ \ \ \ \ l\ =\ \_multiarray\_tests.test\_neighborhood\_iterator(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07520}07520\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x,\ [-\/2,\ 2],\ x[0],\ NEIGH\_MODE[\textcolor{stringliteral}{'circular'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07521}07521\ \ \ \ \ \ \ \ \ assert\_array\_equal(l,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07522}07522\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07523}07523\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07524}07524\ \textcolor{comment}{\#\ Test\ stacking\ neighborhood\ iterators}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07525}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStackedNeighborhoodIter}{07525}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestStackedNeighborhoodIter}{TestStackedNeighborhoodIter}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07526}07526\ \ \ \ \ \textcolor{comment}{\#\ Simple,\ 1d\ test:\ stacking\ 2\ constant-\/padded\ neigh\ iterators}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07527}07527\ \ \ \ \ \textcolor{keyword}{def\ }test\_simple\_const(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07528}07528\ \ \ \ \ \ \ \ \ dt\ =\ np.float64}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07529}07529\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ zero\ and\ one\ padding\ for\ simple\ data\ type}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07530}07530\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07531}07531\ \ \ \ \ \ \ \ \ r\ =\ [np.array([0],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07532}07532\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([0],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07533}07533\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([1],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07534}07534\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([2],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07535}07535\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([3],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07536}07536\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([0],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07537}07537\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([0],\ dtype=dt)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07538}07538\ \ \ \ \ \ \ \ \ l\ =\ \_multiarray\_tests.test\_neighborhood\_iterator\_oob(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07539}07539\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x,\ [-\/2,\ 4],\ NEIGH\_MODE[\textcolor{stringliteral}{'zero'}],\ [0,\ 0],\ NEIGH\_MODE[\textcolor{stringliteral}{'zero'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07540}07540\ \ \ \ \ \ \ \ \ assert\_array\_equal(l,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07541}07541\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07542}07542\ \ \ \ \ \ \ \ \ r\ =\ [np.array([1,\ 0,\ 1],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07543}07543\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([0,\ 1,\ 2],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07544}07544\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([1,\ 2,\ 3],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07545}07545\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([2,\ 3,\ 0],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07546}07546\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([3,\ 0,\ 1],\ dtype=dt)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07547}07547\ \ \ \ \ \ \ \ \ l\ =\ \_multiarray\_tests.test\_neighborhood\_iterator\_oob(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07548}07548\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x,\ [-\/1,\ 3],\ NEIGH\_MODE[\textcolor{stringliteral}{'zero'}],\ [-\/1,\ 1],\ NEIGH\_MODE[\textcolor{stringliteral}{'one'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07549}07549\ \ \ \ \ \ \ \ \ assert\_array\_equal(l,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07550}07550\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07551}07551\ \ \ \ \ \textcolor{comment}{\#\ 2nd\ simple,\ 1d\ test:\ stacking\ 2\ neigh\ iterators,\ mixing\ const\ padding\ and}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07552}07552\ \ \ \ \ \textcolor{comment}{\#\ mirror\ padding}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07553}07553\ \ \ \ \ \textcolor{keyword}{def\ }test\_simple\_mirror(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07554}07554\ \ \ \ \ \ \ \ \ dt\ =\ np.float64}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07555}07555\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Stacking\ zero\ on\ top\ of\ mirror}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07556}07556\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07557}07557\ \ \ \ \ \ \ \ \ r\ =\ [np.array([0,\ 1,\ 1],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07558}07558\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([1,\ 1,\ 2],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07559}07559\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([1,\ 2,\ 3],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07560}07560\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([2,\ 3,\ 3],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07561}07561\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([3,\ 3,\ 0],\ dtype=dt)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07562}07562\ \ \ \ \ \ \ \ \ l\ =\ \_multiarray\_tests.test\_neighborhood\_iterator\_oob(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07563}07563\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x,\ [-\/1,\ 3],\ NEIGH\_MODE[\textcolor{stringliteral}{'mirror'}],\ [-\/1,\ 1],\ NEIGH\_MODE[\textcolor{stringliteral}{'zero'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07564}07564\ \ \ \ \ \ \ \ \ assert\_array\_equal(l,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07565}07565\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07566}07566\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Stacking\ mirror\ on\ top\ of\ zero}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07567}07567\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07568}07568\ \ \ \ \ \ \ \ \ r\ =\ [np.array([1,\ 0,\ 0],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07569}07569\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([0,\ 0,\ 1],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07570}07570\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([0,\ 1,\ 2],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07571}07571\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([1,\ 2,\ 3],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07572}07572\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([2,\ 3,\ 0],\ dtype=dt)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07573}07573\ \ \ \ \ \ \ \ \ l\ =\ \_multiarray\_tests.test\_neighborhood\_iterator\_oob(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07574}07574\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x,\ [-\/1,\ 3],\ NEIGH\_MODE[\textcolor{stringliteral}{'zero'}],\ [-\/2,\ 0],\ NEIGH\_MODE[\textcolor{stringliteral}{'mirror'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07575}07575\ \ \ \ \ \ \ \ \ assert\_array\_equal(l,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07576}07576\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07577}07577\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Stacking\ mirror\ on\ top\ of\ zero:\ 2nd}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07578}07578\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07579}07579\ \ \ \ \ \ \ \ \ r\ =\ [np.array([0,\ 1,\ 2],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07580}07580\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([1,\ 2,\ 3],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07581}07581\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([2,\ 3,\ 0],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07582}07582\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([3,\ 0,\ 0],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07583}07583\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([0,\ 0,\ 3],\ dtype=dt)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07584}07584\ \ \ \ \ \ \ \ \ l\ =\ \_multiarray\_tests.test\_neighborhood\_iterator\_oob(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07585}07585\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x,\ [-\/1,\ 3],\ NEIGH\_MODE[\textcolor{stringliteral}{'zero'}],\ [0,\ 2],\ NEIGH\_MODE[\textcolor{stringliteral}{'mirror'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07586}07586\ \ \ \ \ \ \ \ \ assert\_array\_equal(l,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07587}07587\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07588}07588\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Stacking\ mirror\ on\ top\ of\ zero:\ 3rd}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07589}07589\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07590}07590\ \ \ \ \ \ \ \ \ r\ =\ [np.array([1,\ 0,\ 0,\ 1,\ 2],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07591}07591\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([0,\ 0,\ 1,\ 2,\ 3],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07592}07592\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([0,\ 1,\ 2,\ 3,\ 0],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07593}07593\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([1,\ 2,\ 3,\ 0,\ 0],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07594}07594\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([2,\ 3,\ 0,\ 0,\ 3],\ dtype=dt)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07595}07595\ \ \ \ \ \ \ \ \ l\ =\ \_multiarray\_tests.test\_neighborhood\_iterator\_oob(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07596}07596\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x,\ [-\/1,\ 3],\ NEIGH\_MODE[\textcolor{stringliteral}{'zero'}],\ [-\/2,\ 2],\ NEIGH\_MODE[\textcolor{stringliteral}{'mirror'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07597}07597\ \ \ \ \ \ \ \ \ assert\_array\_equal(l,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07598}07598\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07599}07599\ \ \ \ \ \textcolor{comment}{\#\ 3rd\ simple,\ 1d\ test:\ stacking\ 2\ neigh\ iterators,\ mixing\ const\ padding\ and}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07600}07600\ \ \ \ \ \textcolor{comment}{\#\ circular\ padding}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07601}07601\ \ \ \ \ \textcolor{keyword}{def\ }test\_simple\_circular(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07602}07602\ \ \ \ \ \ \ \ \ dt\ =\ np.float64}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07603}07603\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Stacking\ zero\ on\ top\ of\ mirror}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07604}07604\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07605}07605\ \ \ \ \ \ \ \ \ r\ =\ [np.array([0,\ 3,\ 1],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07606}07606\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([3,\ 1,\ 2],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07607}07607\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([1,\ 2,\ 3],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07608}07608\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([2,\ 3,\ 1],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07609}07609\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([3,\ 1,\ 0],\ dtype=dt)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07610}07610\ \ \ \ \ \ \ \ \ l\ =\ \_multiarray\_tests.test\_neighborhood\_iterator\_oob(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07611}07611\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x,\ [-\/1,\ 3],\ NEIGH\_MODE[\textcolor{stringliteral}{'circular'}],\ [-\/1,\ 1],\ NEIGH\_MODE[\textcolor{stringliteral}{'zero'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07612}07612\ \ \ \ \ \ \ \ \ assert\_array\_equal(l,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07613}07613\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07614}07614\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Stacking\ mirror\ on\ top\ of\ zero}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07615}07615\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07616}07616\ \ \ \ \ \ \ \ \ r\ =\ [np.array([3,\ 0,\ 0],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07617}07617\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([0,\ 0,\ 1],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07618}07618\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([0,\ 1,\ 2],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07619}07619\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([1,\ 2,\ 3],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07620}07620\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([2,\ 3,\ 0],\ dtype=dt)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07621}07621\ \ \ \ \ \ \ \ \ l\ =\ \_multiarray\_tests.test\_neighborhood\_iterator\_oob(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07622}07622\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x,\ [-\/1,\ 3],\ NEIGH\_MODE[\textcolor{stringliteral}{'zero'}],\ [-\/2,\ 0],\ NEIGH\_MODE[\textcolor{stringliteral}{'circular'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07623}07623\ \ \ \ \ \ \ \ \ assert\_array\_equal(l,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07624}07624\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07625}07625\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Stacking\ mirror\ on\ top\ of\ zero:\ 2nd}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07626}07626\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07627}07627\ \ \ \ \ \ \ \ \ r\ =\ [np.array([0,\ 1,\ 2],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07628}07628\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([1,\ 2,\ 3],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07629}07629\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([2,\ 3,\ 0],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07630}07630\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([3,\ 0,\ 0],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07631}07631\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([0,\ 0,\ 1],\ dtype=dt)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07632}07632\ \ \ \ \ \ \ \ \ l\ =\ \_multiarray\_tests.test\_neighborhood\_iterator\_oob(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07633}07633\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x,\ [-\/1,\ 3],\ NEIGH\_MODE[\textcolor{stringliteral}{'zero'}],\ [0,\ 2],\ NEIGH\_MODE[\textcolor{stringliteral}{'circular'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07634}07634\ \ \ \ \ \ \ \ \ assert\_array\_equal(l,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07635}07635\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07636}07636\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Stacking\ mirror\ on\ top\ of\ zero:\ 3rd}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07637}07637\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07638}07638\ \ \ \ \ \ \ \ \ r\ =\ [np.array([3,\ 0,\ 0,\ 1,\ 2],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07639}07639\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([0,\ 0,\ 1,\ 2,\ 3],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07640}07640\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([0,\ 1,\ 2,\ 3,\ 0],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07641}07641\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([1,\ 2,\ 3,\ 0,\ 0],\ dtype=dt),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07642}07642\ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array([2,\ 3,\ 0,\ 0,\ 1],\ dtype=dt)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07643}07643\ \ \ \ \ \ \ \ \ l\ =\ \_multiarray\_tests.test\_neighborhood\_iterator\_oob(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07644}07644\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x,\ [-\/1,\ 3],\ NEIGH\_MODE[\textcolor{stringliteral}{'zero'}],\ [-\/2,\ 2],\ NEIGH\_MODE[\textcolor{stringliteral}{'circular'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07645}07645\ \ \ \ \ \ \ \ \ assert\_array\_equal(l,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07646}07646\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07647}07647\ \ \ \ \ \textcolor{comment}{\#\ 4th\ simple,\ 1d\ test:\ stacking\ 2\ neigh\ iterators,\ but\ with\ lower\ iterator}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07648}07648\ \ \ \ \ \textcolor{comment}{\#\ being\ strictly\ within\ the\ array}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07649}07649\ \ \ \ \ \textcolor{keyword}{def\ }test\_simple\_strict\_within(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07650}07650\ \ \ \ \ \ \ \ \ dt\ =\ np.float64}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07651}07651\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Stacking\ zero\ on\ top\ of\ zero,\ first\ neighborhood\ strictly\ inside\ the}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07652}07652\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ array}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07653}07653\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07654}07654\ \ \ \ \ \ \ \ \ r\ =\ [np.array([1,\ 2,\ 3,\ 0],\ dtype=dt)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07655}07655\ \ \ \ \ \ \ \ \ l\ =\ \_multiarray\_tests.test\_neighborhood\_iterator\_oob(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07656}07656\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x,\ [1,\ 1],\ NEIGH\_MODE[\textcolor{stringliteral}{'zero'}],\ [-\/1,\ 2],\ NEIGH\_MODE[\textcolor{stringliteral}{'zero'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07657}07657\ \ \ \ \ \ \ \ \ assert\_array\_equal(l,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07658}07658\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07659}07659\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Stacking\ mirror\ on\ top\ of\ zero,\ first\ neighborhood\ strictly\ inside\ the}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07660}07660\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ array}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07661}07661\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07662}07662\ \ \ \ \ \ \ \ \ r\ =\ [np.array([1,\ 2,\ 3,\ 3],\ dtype=dt)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07663}07663\ \ \ \ \ \ \ \ \ l\ =\ \_multiarray\_tests.test\_neighborhood\_iterator\_oob(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07664}07664\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x,\ [1,\ 1],\ NEIGH\_MODE[\textcolor{stringliteral}{'zero'}],\ [-\/1,\ 2],\ NEIGH\_MODE[\textcolor{stringliteral}{'mirror'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07665}07665\ \ \ \ \ \ \ \ \ assert\_array\_equal(l,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07666}07666\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07667}07667\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Stacking\ mirror\ on\ top\ of\ zero,\ first\ neighborhood\ strictly\ inside\ the}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07668}07668\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ array}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07669}07669\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3],\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07670}07670\ \ \ \ \ \ \ \ \ r\ =\ [np.array([1,\ 2,\ 3,\ 1],\ dtype=dt)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07671}07671\ \ \ \ \ \ \ \ \ l\ =\ \_multiarray\_tests.test\_neighborhood\_iterator\_oob(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07672}07672\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x,\ [1,\ 1],\ NEIGH\_MODE[\textcolor{stringliteral}{'zero'}],\ [-\/1,\ 2],\ NEIGH\_MODE[\textcolor{stringliteral}{'circular'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07673}07673\ \ \ \ \ \ \ \ \ assert\_array\_equal(l,\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07674}07674\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07675}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestWarnings}{07675}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestWarnings}{TestWarnings}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07676}07676\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07677}07677\ \ \ \ \ \textcolor{keyword}{def\ }test\_complex\_warning(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07678}07678\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07679}07679\ \ \ \ \ \ \ \ \ y\ =\ np.array([1-\/2j,\ 1+2j])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07680}07680\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07681}07681\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ warnings.catch\_warnings():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07682}07682\ \ \ \ \ \ \ \ \ \ \ \ \ warnings.simplefilter(\textcolor{stringliteral}{"{}error"{}},\ np.ComplexWarning)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07683}07683\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(np.ComplexWarning,\ x.\_\_setitem\_\_,\ slice(\textcolor{keywordtype}{None}),\ y)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07684}07684\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(x,\ [1,\ 2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07685}07685\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07686}07686\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07687}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMinScalarType}{07687}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMinScalarType}{TestMinScalarType}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07688}07688\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07689}07689\ \ \ \ \ \textcolor{keyword}{def\ }test\_usigned\_shortshort(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07690}07690\ \ \ \ \ \ \ \ \ dt\ =\ np.min\_scalar\_type(2**8-\/1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07691}07691\ \ \ \ \ \ \ \ \ wanted\ =\ np.dtype(\textcolor{stringliteral}{'uint8'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07692}07692\ \ \ \ \ \ \ \ \ assert\_equal(wanted,\ dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07693}07693\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07694}07694\ \ \ \ \ \textcolor{keyword}{def\ }test\_usigned\_short(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07695}07695\ \ \ \ \ \ \ \ \ dt\ =\ np.min\_scalar\_type(2**16-\/1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07696}07696\ \ \ \ \ \ \ \ \ wanted\ =\ np.dtype(\textcolor{stringliteral}{'uint16'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07697}07697\ \ \ \ \ \ \ \ \ assert\_equal(wanted,\ dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07698}07698\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07699}07699\ \ \ \ \ \textcolor{keyword}{def\ }test\_usigned\_int(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07700}07700\ \ \ \ \ \ \ \ \ dt\ =\ np.min\_scalar\_type(2**32-\/1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07701}07701\ \ \ \ \ \ \ \ \ wanted\ =\ np.dtype(\textcolor{stringliteral}{'uint32'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07702}07702\ \ \ \ \ \ \ \ \ assert\_equal(wanted,\ dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07703}07703\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07704}07704\ \ \ \ \ \textcolor{keyword}{def\ }test\_usigned\_longlong(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07705}07705\ \ \ \ \ \ \ \ \ dt\ =\ np.min\_scalar\_type(2**63-\/1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07706}07706\ \ \ \ \ \ \ \ \ wanted\ =\ np.dtype(\textcolor{stringliteral}{'uint64'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07707}07707\ \ \ \ \ \ \ \ \ assert\_equal(wanted,\ dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07708}07708\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07709}07709\ \ \ \ \ \textcolor{keyword}{def\ }test\_object(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07710}07710\ \ \ \ \ \ \ \ \ dt\ =\ np.min\_scalar\_type(2**64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07711}07711\ \ \ \ \ \ \ \ \ wanted\ =\ np.dtype(\textcolor{stringliteral}{'O'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07712}07712\ \ \ \ \ \ \ \ \ assert\_equal(wanted,\ dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07713}07713\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07714}07714\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07715}07715\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacenumpy_1_1core_1_1__internal}{numpy.core.\_internal}}\ \textcolor{keyword}{import}\ \_dtype\_from\_pep3118}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07716}07716\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07717}07717\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07718}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype}{07718}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype}{TestPEP3118Dtype}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07719}07719\ \ \ \ \ \textcolor{keyword}{def\ }\_check(self,\ spec,\ wanted):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07720}07720\ \ \ \ \ \ \ \ \ dt\ =\ np.dtype(wanted)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07721}07721\ \ \ \ \ \ \ \ \ actual\ =\ \_dtype\_from\_pep3118(spec)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07722}07722\ \ \ \ \ \ \ \ \ assert\_equal(actual,\ dt,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07723}07723\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ err\_msg=\textcolor{stringliteral}{"{}spec\ \%r\ !=\ dtype\ \%r"{}}\ \%\ (spec,\ wanted))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07724}07724\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07725}07725\ \ \ \ \ \textcolor{keyword}{def\ }test\_native\_padding(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07726}07726\ \ \ \ \ \ \ \ \ align\ =\ np.dtype(\textcolor{stringliteral}{'i'}).alignment}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07727}07727\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ j\ \textcolor{keywordflow}{in}\ range(8):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07728}07728\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ j\ ==\ 0:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07729}07729\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ s\ =\ \textcolor{stringliteral}{'bi'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07730}07730\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07731}07731\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ s\ =\ \textcolor{stringliteral}{'b\%dxi'}\ \%\ j}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07732}07732\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{'@'}+s,\ \{\textcolor{stringliteral}{'f0'}:\ (\textcolor{stringliteral}{'i1'},\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07733}07733\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'f1'}:\ (\textcolor{stringliteral}{'i'},\ align*(1\ +\ j//align))\})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07734}07734\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{'='}+s,\ \{\textcolor{stringliteral}{'f0'}:\ (\textcolor{stringliteral}{'i1'},\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07735}07735\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'f1'}:\ (\textcolor{stringliteral}{'i'},\ 1+j)\})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07736}07736\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07737}07737\ \ \ \ \ \textcolor{keyword}{def\ }test\_native\_padding\_2(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07738}07738\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Native\ padding\ should\ work\ also\ for\ structs\ and\ sub-\/arrays}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07739}07739\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{'x3T\{xi\}'},\ \{\textcolor{stringliteral}{'f0'}:\ ((\{\textcolor{stringliteral}{'f0'}:\ (\textcolor{stringliteral}{'i'},\ 4)\},\ (3,)),\ 4)\})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07740}07740\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{'\string^x3T\{xi\}'},\ \{\textcolor{stringliteral}{'f0'}:\ ((\{\textcolor{stringliteral}{'f0'}:\ (\textcolor{stringliteral}{'i'},\ 1)\},\ (3,)),\ 1)\})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07741}07741\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07742}07742\ \ \ \ \ \textcolor{keyword}{def\ }test\_trailing\_padding(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07743}07743\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Trailing\ padding\ should\ be\ included,\ *and*,\ the\ item\ size}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07744}07744\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ should\ match\ the\ alignment\ if\ in\ aligned\ mode}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07745}07745\ \ \ \ \ \ \ \ \ align\ =\ np.dtype(\textcolor{stringliteral}{'i'}).alignment}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07746}07746\ \ \ \ \ \ \ \ \ size\ =\ np.dtype(\textcolor{stringliteral}{'i'}).itemsize}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07747}07747\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07748}07748\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }aligned(n):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07749}07749\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ align*(1\ +\ (n-\/1)//align)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07750}07750\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07751}07751\ \ \ \ \ \ \ \ \ base\ =\ dict(formats=[\textcolor{stringliteral}{'i'}],\ names=[\textcolor{stringliteral}{'f0'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07752}07752\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07753}07753\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{'ix'},\ \ \ \ dict(itemsize=aligned(size\ +\ 1),\ **base))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07754}07754\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{'ixx'},\ \ \ dict(itemsize=aligned(size\ +\ 2),\ **base))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07755}07755\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{'ixxx'},\ \ dict(itemsize=aligned(size\ +\ 3),\ **base))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07756}07756\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{'ixxxx'},\ dict(itemsize=aligned(size\ +\ 4),\ **base))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07757}07757\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{'i7x'},\ \ \ dict(itemsize=aligned(size\ +\ 7),\ **base))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07758}07758\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07759}07759\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{'\string^ix'},\ \ \ \ dict(itemsize=size\ +\ 1,\ **base))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07760}07760\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{'\string^ixx'},\ \ \ dict(itemsize=size\ +\ 2,\ **base))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07761}07761\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{'\string^ixxx'},\ \ dict(itemsize=size\ +\ 3,\ **base))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07762}07762\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{'\string^ixxxx'},\ dict(itemsize=size\ +\ 4,\ **base))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07763}07763\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{'\string^i7x'},\ \ \ dict(itemsize=size\ +\ 7,\ **base))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07764}07764\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07765}07765\ \ \ \ \ \textcolor{keyword}{def\ }test\_native\_padding\_3(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07766}07766\ \ \ \ \ \ \ \ \ dt\ =\ np.dtype(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07767}07767\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'b'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'i'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07768}07768\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'sub'},\ np.dtype(\textcolor{stringliteral}{'b,i'})),\ (\textcolor{stringliteral}{'c'},\ \textcolor{stringliteral}{'i'})],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07769}07769\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ align=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07770}07770\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{"{}T\{b:a:xxxi:b:T\{b:f0:=i:f1:\}:sub:xxxi:c:\}"{}},\ dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07771}07771\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07772}07772\ \ \ \ \ \ \ \ \ dt\ =\ np.dtype(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07773}07773\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'b'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'i'}),\ (\textcolor{stringliteral}{'c'},\ \textcolor{stringliteral}{'b'}),\ (\textcolor{stringliteral}{'d'},\ \textcolor{stringliteral}{'b'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07774}07774\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'e'},\ \textcolor{stringliteral}{'b'}),\ (\textcolor{stringliteral}{'sub'},\ np.dtype(\textcolor{stringliteral}{'b,i'},\ align=\textcolor{keyword}{True}))])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07775}07775\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{"{}T\{b:a:=i:b:b:c:b:d:b:e:T\{b:f0:xxxi:f1:\}:sub:\}"{}},\ dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07776}07776\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07777}07777\ \ \ \ \ \textcolor{keyword}{def\ }test\_padding\_with\_array\_inside\_struct(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07778}07778\ \ \ \ \ \ \ \ \ dt\ =\ np.dtype(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07779}07779\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'b'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'i'}),\ (\textcolor{stringliteral}{'c'},\ \textcolor{stringliteral}{'b'},\ (3,)),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07780}07780\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'d'},\ \textcolor{stringliteral}{'i'})],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07781}07781\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ align=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07782}07782\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{"{}T\{b:a:xxxi:b:3b:c:xi:d:\}"{}},\ dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07783}07783\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07784}07784\ \ \ \ \ \textcolor{keyword}{def\ }test\_byteorder\_inside\_struct(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07785}07785\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ byte\ order\ after\ @T\{=i\}\ should\ be\ '=',\ not\ '@'.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07786}07786\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ this\ by\ noting\ the\ absence\ of\ native\ alignment.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07787}07787\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{'@T\{\string^i\}xi'},\ \{\textcolor{stringliteral}{'f0'}:\ (\{\textcolor{stringliteral}{'f0'}:\ (\textcolor{stringliteral}{'i'},\ 0)\},\ 0),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07788}07788\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'f1'}:\ (\textcolor{stringliteral}{'i'},\ 5)\})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07789}07789\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07790}07790\ \ \ \ \ \textcolor{keyword}{def\ }test\_intra\_padding(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07791}07791\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Natively\ aligned\ sub-\/arrays\ may\ require\ some\ internal\ padding}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07792}07792\ \ \ \ \ \ \ \ \ align\ =\ np.dtype(\textcolor{stringliteral}{'i'}).alignment}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07793}07793\ \ \ \ \ \ \ \ \ size\ =\ np.dtype(\textcolor{stringliteral}{'i'}).itemsize}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07794}07794\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07795}07795\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }aligned(n):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07796}07796\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (align*(1\ +\ (n-\/1)//align))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07797}07797\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07798}07798\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{'(3)T\{ix\}'},\ (dict(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07799}07799\ \ \ \ \ \ \ \ \ \ \ \ \ names=[\textcolor{stringliteral}{'f0'}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07800}07800\ \ \ \ \ \ \ \ \ \ \ \ \ formats=[\textcolor{stringliteral}{'i'}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07801}07801\ \ \ \ \ \ \ \ \ \ \ \ \ offsets=[0],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07802}07802\ \ \ \ \ \ \ \ \ \ \ \ \ itemsize=aligned(size\ +\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07803}07803\ \ \ \ \ \ \ \ \ ),\ (3,)))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07804}07804\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07805}07805\ \ \ \ \ \textcolor{keyword}{def\ }test\_char\_vs\_string(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07806}07806\ \ \ \ \ \ \ \ \ dt\ =\ np.dtype(\textcolor{stringliteral}{'c'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07807}07807\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{'c'},\ dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07808}07808\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07809}07809\ \ \ \ \ \ \ \ \ dt\ =\ np.dtype([(\textcolor{stringliteral}{'f0'},\ \textcolor{stringliteral}{'S1'},\ (4,)),\ (\textcolor{stringliteral}{'f1'},\ \textcolor{stringliteral}{'S4'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07810}07810\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{'4c4s'},\ dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07811}07811\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07812}07812\ \ \ \ \ \textcolor{keyword}{def\ }test\_field\_order(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07813}07813\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/9053\ -\/\ previously,\ we\ relied\ on\ dictionary\ key\ order}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07814}07814\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{"{}(0)I:a:f:b:"{}},\ [(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'I'},\ (0,)),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'f'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07815}07815\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{"{}(0)I:b:f:a:"{}},\ [(\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'I'},\ (0,)),\ (\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'f'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07816}07816\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07817}07817\ \ \ \ \ \textcolor{keyword}{def\ }test\_unnamed\_fields(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07818}07818\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{'ii'},\ \ \ \ \ [(\textcolor{stringliteral}{'f0'},\ \textcolor{stringliteral}{'i'}),\ (\textcolor{stringliteral}{'f1'},\ \textcolor{stringliteral}{'i'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07819}07819\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{'ii:f0:'},\ [(\textcolor{stringliteral}{'f1'},\ \textcolor{stringliteral}{'i'}),\ (\textcolor{stringliteral}{'f0'},\ \textcolor{stringliteral}{'i'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07820}07820\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07821}07821\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{'i'},\ \textcolor{stringliteral}{'i'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07822}07822\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestPEP3118Dtype_ab86029a45da15c0722e3c7667aac7889}{\_check}}(\textcolor{stringliteral}{'i:f0:'},\ [(\textcolor{stringliteral}{'f0'},\ \textcolor{stringliteral}{'i'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07823}07823\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07824}07824\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07825}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol}{07825}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol}{TestNewBufferProtocol}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07826}07826\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}\ Test\ PEP3118\ buffers\ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07827}07827\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07828}07828\ \ \ \ \ \textcolor{keyword}{def\ }\_check\_roundtrip(self,\ obj):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07829}07829\ \ \ \ \ \ \ \ \ obj\ =\ np.asarray(obj)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07830}07830\ \ \ \ \ \ \ \ \ x\ =\ memoryview(obj)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07831}07831\ \ \ \ \ \ \ \ \ y\ =\ np.asarray(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07832}07832\ \ \ \ \ \ \ \ \ y2\ =\ np.array(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07833}07833\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ y.flags.owndata)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07834}07834\ \ \ \ \ \ \ \ \ assert\_(y2.flags.owndata)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07835}07835\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07836}07836\ \ \ \ \ \ \ \ \ assert\_equal(y.dtype,\ obj.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07837}07837\ \ \ \ \ \ \ \ \ assert\_equal(y.shape,\ obj.shape)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07838}07838\ \ \ \ \ \ \ \ \ assert\_array\_equal(obj,\ y)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07839}07839\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07840}07840\ \ \ \ \ \ \ \ \ assert\_equal(y2.dtype,\ obj.dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07841}07841\ \ \ \ \ \ \ \ \ assert\_equal(y2.shape,\ obj.shape)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07842}07842\ \ \ \ \ \ \ \ \ assert\_array\_equal(obj,\ y2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07843}07843\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07844}07844\ \ \ \ \ \textcolor{keyword}{def\ }test\_roundtrip(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07845}07845\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3,\ 4,\ 5],\ dtype=\textcolor{stringliteral}{'i4'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07846}07846\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a17f7bd8ce1f2c62a8c19542a5a8ca0dc}{\_check\_roundtrip}}(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07847}07847\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07848}07848\ \ \ \ \ \ \ \ \ x\ =\ np.array([[1,\ 2],\ [3,\ 4]],\ dtype=np.float64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07849}07849\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a17f7bd8ce1f2c62a8c19542a5a8ca0dc}{\_check\_roundtrip}}(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07850}07850\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07851}07851\ \ \ \ \ \ \ \ \ x\ =\ np.zeros((3,\ 3,\ 3),\ dtype=np.float32)[:,\ 0,:]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07852}07852\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a17f7bd8ce1f2c62a8c19542a5a8ca0dc}{\_check\_roundtrip}}(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07853}07853\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07854}07854\ \ \ \ \ \ \ \ \ dt\ =\ [(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'b'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07855}07855\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'h'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07856}07856\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'c'},\ \textcolor{stringliteral}{'i'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07857}07857\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'d'},\ \textcolor{stringliteral}{'l'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07858}07858\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'dx'},\ \textcolor{stringliteral}{'q'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07859}07859\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'e'},\ \textcolor{stringliteral}{'B'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07860}07860\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'f'},\ \textcolor{stringliteral}{'H'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07861}07861\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'g'},\ \textcolor{stringliteral}{'I'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07862}07862\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'h'},\ \textcolor{stringliteral}{'L'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07863}07863\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'hx'},\ \textcolor{stringliteral}{'Q'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07864}07864\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'i'},\ np.single),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07865}07865\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'j'},\ np.double),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07866}07866\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'k'},\ np.longdouble),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07867}07867\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'ix'},\ np.csingle),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07868}07868\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'jx'},\ np.cdouble),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07869}07869\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'kx'},\ np.clongdouble),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07870}07870\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'l'},\ \textcolor{stringliteral}{'S4'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07871}07871\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'m'},\ \textcolor{stringliteral}{'U4'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07872}07872\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'n'},\ \textcolor{stringliteral}{'V3'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07873}07873\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'o'},\ \textcolor{stringliteral}{'?'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07874}07874\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'p'},\ np.half),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07875}07875\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07876}07876\ \ \ \ \ \ \ \ \ x\ =\ np.array(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07877}07877\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [(1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07878}07878\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ b\textcolor{stringliteral}{'aaaa'},\ \textcolor{stringliteral}{'bbbb'},\ b\textcolor{stringliteral}{'xxx'},\ \textcolor{keyword}{True},\ 1.0)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07879}07879\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07880}07880\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a17f7bd8ce1f2c62a8c19542a5a8ca0dc}{\_check\_roundtrip}}(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07881}07881\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07882}07882\ \ \ \ \ \ \ \ \ x\ =\ np.array(([[1,\ 2],\ [3,\ 4]],),\ dtype=[(\textcolor{stringliteral}{'a'},\ (int,\ (2,\ 2)))])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07883}07883\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a17f7bd8ce1f2c62a8c19542a5a8ca0dc}{\_check\_roundtrip}}(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07884}07884\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07885}07885\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3],\ dtype=\textcolor{stringliteral}{'>i2'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07886}07886\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a17f7bd8ce1f2c62a8c19542a5a8ca0dc}{\_check\_roundtrip}}(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07887}07887\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07888}07888\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3],\ dtype=\textcolor{stringliteral}{'<i2'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07889}07889\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a17f7bd8ce1f2c62a8c19542a5a8ca0dc}{\_check\_roundtrip}}(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07890}07890\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07891}07891\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3],\ dtype=\textcolor{stringliteral}{'>i4'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07892}07892\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a17f7bd8ce1f2c62a8c19542a5a8ca0dc}{\_check\_roundtrip}}(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07893}07893\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07894}07894\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3],\ dtype=\textcolor{stringliteral}{'<i4'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07895}07895\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a17f7bd8ce1f2c62a8c19542a5a8ca0dc}{\_check\_roundtrip}}(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07896}07896\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07897}07897\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ long\ long\ can\ be\ represented\ as\ non-\/native}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07898}07898\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3],\ dtype=\textcolor{stringliteral}{'>q'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07899}07899\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a17f7bd8ce1f2c62a8c19542a5a8ca0dc}{\_check\_roundtrip}}(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07900}07900\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07901}07901\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Native-\/only\ data\ types\ can\ be\ passed\ through\ the\ buffer\ interface}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07902}07902\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ only\ in\ native\ byte\ order}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07903}07903\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ sys.byteorder\ ==\ \textcolor{stringliteral}{'little'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07904}07904\ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3],\ dtype=\textcolor{stringliteral}{'>g'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07905}07905\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a17f7bd8ce1f2c62a8c19542a5a8ca0dc}{\_check\_roundtrip}},\ x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07906}07906\ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3],\ dtype=\textcolor{stringliteral}{'<g'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07907}07907\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a17f7bd8ce1f2c62a8c19542a5a8ca0dc}{\_check\_roundtrip}}(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07908}07908\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07909}07909\ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3],\ dtype=\textcolor{stringliteral}{'>g'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07910}07910\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a17f7bd8ce1f2c62a8c19542a5a8ca0dc}{\_check\_roundtrip}}(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07911}07911\ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3],\ dtype=\textcolor{stringliteral}{'<g'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07912}07912\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a17f7bd8ce1f2c62a8c19542a5a8ca0dc}{\_check\_roundtrip}},\ x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07913}07913\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07914}07914\ \ \ \ \ \textcolor{keyword}{def\ }test\_roundtrip\_half(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07915}07915\ \ \ \ \ \ \ \ \ half\_list\ =\ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07916}07916\ \ \ \ \ \ \ \ \ \ \ \ \ 1.0,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07917}07917\ \ \ \ \ \ \ \ \ \ \ \ \ -\/2.0,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07918}07918\ \ \ \ \ \ \ \ \ \ \ \ \ 6.5504\ *\ 10**4,\ \ \textcolor{comment}{\#\ (max\ half\ precision)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07919}07919\ \ \ \ \ \ \ \ \ \ \ \ \ 2**-\/14,\ \ \textcolor{comment}{\#\ \string~=\ 6.10352\ *\ 10**-\/5\ (minimum\ positive\ normal)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07920}07920\ \ \ \ \ \ \ \ \ \ \ \ \ 2**-\/24,\ \ \textcolor{comment}{\#\ \string~=\ 5.96046\ *\ 10**-\/8\ (minimum\ strictly\ positive\ subnormal)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07921}07921\ \ \ \ \ \ \ \ \ \ \ \ \ 0.0,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07922}07922\ \ \ \ \ \ \ \ \ \ \ \ \ -\/0.0,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07923}07923\ \ \ \ \ \ \ \ \ \ \ \ \ float(\textcolor{stringliteral}{'+inf'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07924}07924\ \ \ \ \ \ \ \ \ \ \ \ \ float(\textcolor{stringliteral}{'-\/inf'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07925}07925\ \ \ \ \ \ \ \ \ \ \ \ \ 0.333251953125,\ \ \textcolor{comment}{\#\ \string~=\ 1/3}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07926}07926\ \ \ \ \ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07927}07927\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07928}07928\ \ \ \ \ \ \ \ \ x\ =\ np.array(half\_list,\ dtype=\textcolor{stringliteral}{'>e'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07929}07929\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a17f7bd8ce1f2c62a8c19542a5a8ca0dc}{\_check\_roundtrip}}(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07930}07930\ \ \ \ \ \ \ \ \ x\ =\ np.array(half\_list,\ dtype=\textcolor{stringliteral}{'<e'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07931}07931\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a17f7bd8ce1f2c62a8c19542a5a8ca0dc}{\_check\_roundtrip}}(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07932}07932\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07933}07933\ \ \ \ \ \textcolor{keyword}{def\ }test\_roundtrip\_single\_types(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07934}07934\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ typ\ \textcolor{keywordflow}{in}\ np.sctypeDict.values():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07935}07935\ \ \ \ \ \ \ \ \ \ \ \ \ dtype\ =\ np.dtype(typ)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07936}07936\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07937}07937\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ dtype.char\ \textcolor{keywordflow}{in}\ \textcolor{stringliteral}{'Mm'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07938}07938\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ datetimes\ cannot\ be\ used\ in\ buffers}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07939}07939\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07940}07940\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ dtype.char\ ==\ \textcolor{stringliteral}{'V'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07941}07941\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ skip\ void}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07942}07942\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07943}07943\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07944}07944\ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ np.zeros(4,\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07945}07945\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a17f7bd8ce1f2c62a8c19542a5a8ca0dc}{\_check\_roundtrip}}(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07946}07946\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07947}07947\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ dtype.char\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ \textcolor{stringliteral}{'qQgG'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07948}07948\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dt\ =\ dtype.newbyteorder(\textcolor{stringliteral}{'<'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07949}07949\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ np.zeros(4,\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07950}07950\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a17f7bd8ce1f2c62a8c19542a5a8ca0dc}{\_check\_roundtrip}}(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07951}07951\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07952}07952\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dt\ =\ dtype.newbyteorder(\textcolor{stringliteral}{'>'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07953}07953\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ np.zeros(4,\ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07954}07954\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a17f7bd8ce1f2c62a8c19542a5a8ca0dc}{\_check\_roundtrip}}(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07955}07955\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07956}07956\ \ \ \ \ \textcolor{keyword}{def\ }test\_roundtrip\_scalar(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07957}07957\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Issue\ \#4015.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07958}07958\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a17f7bd8ce1f2c62a8c19542a5a8ca0dc}{\_check\_roundtrip}}(0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07959}07959\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07960}07960\ \ \ \ \ \textcolor{keyword}{def\ }test\_invalid\_buffer\_format(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07961}07961\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ datetime64\ cannot\ be\ used\ fully\ in\ a\ buffer\ yet}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07962}07962\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Should\ be\ fixed\ in\ the\ next\ Numpy\ major\ release}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07963}07963\ \ \ \ \ \ \ \ \ dt\ =\ np.dtype([(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'uint16'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'M8[s]'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07964}07964\ \ \ \ \ \ \ \ \ a\ =\ np.empty(3,\ dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07965}07965\ \ \ \ \ \ \ \ \ assert\_raises((ValueError,\ BufferError),\ memoryview,\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07966}07966\ \ \ \ \ \ \ \ \ assert\_raises((ValueError,\ BufferError),\ memoryview,\ np.array((3),\ \textcolor{stringliteral}{'M8[D]'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07967}07967\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07968}07968\ \ \ \ \ \textcolor{keyword}{def\ }test\_export\_simple\_1d(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07969}07969\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3,\ 4,\ 5],\ dtype=\textcolor{stringliteral}{'i'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07970}07970\ \ \ \ \ \ \ \ \ y\ =\ memoryview(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07971}07971\ \ \ \ \ \ \ \ \ assert\_equal(y.format,\ \textcolor{stringliteral}{'i'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07972}07972\ \ \ \ \ \ \ \ \ assert\_equal(y.shape,\ (5,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07973}07973\ \ \ \ \ \ \ \ \ assert\_equal(y.ndim,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07974}07974\ \ \ \ \ \ \ \ \ assert\_equal(y.strides,\ (4,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07975}07975\ \ \ \ \ \ \ \ \ assert\_equal(y.suboffsets,\ ())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07976}07976\ \ \ \ \ \ \ \ \ assert\_equal(y.itemsize,\ 4)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07977}07977\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07978}07978\ \ \ \ \ \textcolor{keyword}{def\ }test\_export\_simple\_nd(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07979}07979\ \ \ \ \ \ \ \ \ x\ =\ np.array([[1,\ 2],\ [3,\ 4]],\ dtype=np.float64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07980}07980\ \ \ \ \ \ \ \ \ y\ =\ memoryview(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07981}07981\ \ \ \ \ \ \ \ \ assert\_equal(y.format,\ \textcolor{stringliteral}{'d'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07982}07982\ \ \ \ \ \ \ \ \ assert\_equal(y.shape,\ (2,\ 2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07983}07983\ \ \ \ \ \ \ \ \ assert\_equal(y.ndim,\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07984}07984\ \ \ \ \ \ \ \ \ assert\_equal(y.strides,\ (16,\ 8))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07985}07985\ \ \ \ \ \ \ \ \ assert\_equal(y.suboffsets,\ ())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07986}07986\ \ \ \ \ \ \ \ \ assert\_equal(y.itemsize,\ 8)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07987}07987\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07988}07988\ \ \ \ \ \textcolor{keyword}{def\ }test\_export\_discontiguous(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07989}07989\ \ \ \ \ \ \ \ \ x\ =\ np.zeros((3,\ 3,\ 3),\ dtype=np.float32)[:,\ 0,:]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07990}07990\ \ \ \ \ \ \ \ \ y\ =\ memoryview(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07991}07991\ \ \ \ \ \ \ \ \ assert\_equal(y.format,\ \textcolor{stringliteral}{'f'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07992}07992\ \ \ \ \ \ \ \ \ assert\_equal(y.shape,\ (3,\ 3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07993}07993\ \ \ \ \ \ \ \ \ assert\_equal(y.ndim,\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07994}07994\ \ \ \ \ \ \ \ \ assert\_equal(y.strides,\ (36,\ 4))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07995}07995\ \ \ \ \ \ \ \ \ assert\_equal(y.suboffsets,\ ())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07996}07996\ \ \ \ \ \ \ \ \ assert\_equal(y.itemsize,\ 4)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07997}07997\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07998}07998\ \ \ \ \ \textcolor{keyword}{def\ }test\_export\_record(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l07999}07999\ \ \ \ \ \ \ \ \ dt\ =\ [(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'b'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08000}08000\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'h'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08001}08001\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'c'},\ \textcolor{stringliteral}{'i'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08002}08002\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'d'},\ \textcolor{stringliteral}{'l'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08003}08003\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'dx'},\ \textcolor{stringliteral}{'q'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08004}08004\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'e'},\ \textcolor{stringliteral}{'B'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08005}08005\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'f'},\ \textcolor{stringliteral}{'H'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08006}08006\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'g'},\ \textcolor{stringliteral}{'I'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08007}08007\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'h'},\ \textcolor{stringliteral}{'L'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08008}08008\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'hx'},\ \textcolor{stringliteral}{'Q'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08009}08009\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'i'},\ np.single),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08010}08010\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'j'},\ np.double),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08011}08011\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'k'},\ np.longdouble),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08012}08012\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'ix'},\ np.csingle),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08013}08013\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'jx'},\ np.cdouble),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08014}08014\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'kx'},\ np.clongdouble),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08015}08015\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'l'},\ \textcolor{stringliteral}{'S4'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08016}08016\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'m'},\ \textcolor{stringliteral}{'U4'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08017}08017\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'n'},\ \textcolor{stringliteral}{'V3'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08018}08018\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'o'},\ \textcolor{stringliteral}{'?'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08019}08019\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'p'},\ np.half),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08020}08020\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08021}08021\ \ \ \ \ \ \ \ \ x\ =\ np.array(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08022}08022\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [(1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08023}08023\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ b\textcolor{stringliteral}{'aaaa'},\ \textcolor{stringliteral}{'bbbb'},\ b\textcolor{stringliteral}{'\ \ \ '},\ \textcolor{keyword}{True},\ 1.0)],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08024}08024\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08025}08025\ \ \ \ \ \ \ \ \ y\ =\ memoryview(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08026}08026\ \ \ \ \ \ \ \ \ assert\_equal(y.shape,\ (1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08027}08027\ \ \ \ \ \ \ \ \ assert\_equal(y.ndim,\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08028}08028\ \ \ \ \ \ \ \ \ assert\_equal(y.suboffsets,\ ())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08029}08029\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08030}08030\ \ \ \ \ \ \ \ \ sz\ =\ \mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a51411b3b0c037cf12ac140486f46cfd9}{sum}}([np.dtype(b).itemsize\ \textcolor{keywordflow}{for}\ a,\ b\ \textcolor{keywordflow}{in}\ dt])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08031}08031\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ np.dtype(\textcolor{stringliteral}{'l'}).itemsize\ ==\ 4:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08032}08032\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(y.format,\ \textcolor{stringliteral}{'T\{b:a:=h:b:i:c:l:d:q:dx:B:e:@H:f:=I:g:L:h:Q:hx:f:i:d:j:\string^g:k:=Zf:ix:Zd:jx:\string^Zg:kx:4s:l:=4w:m:3x:n:?:o:@e:p:\}'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08033}08033\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08034}08034\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(y.format,\ \textcolor{stringliteral}{'T\{b:a:=h:b:i:c:q:d:q:dx:B:e:@H:f:=I:g:Q:h:Q:hx:f:i:d:j:\string^g:k:=Zf:ix:Zd:jx:\string^Zg:kx:4s:l:=4w:m:3x:n:?:o:@e:p:\}'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08035}08035\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Cannot\ test\ if\ NPY\_RELAXED\_STRIDES\_DEBUG\ changes\ the\ strides}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08036}08036\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ (np.ones(1).strides[0]\ ==\ np.iinfo(np.intp).max):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08037}08037\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(y.strides,\ (sz,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08038}08038\ \ \ \ \ \ \ \ \ assert\_equal(y.itemsize,\ sz)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08039}08039\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08040}08040\ \ \ \ \ \textcolor{keyword}{def\ }test\_export\_subarray(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08041}08041\ \ \ \ \ \ \ \ \ x\ =\ np.array(([[1,\ 2],\ [3,\ 4]],),\ dtype=[(\textcolor{stringliteral}{'a'},\ (\textcolor{stringliteral}{'i'},\ (2,\ 2)))])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08042}08042\ \ \ \ \ \ \ \ \ y\ =\ memoryview(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08043}08043\ \ \ \ \ \ \ \ \ assert\_equal(y.format,\ \textcolor{stringliteral}{'T\{(2,2)i:a:\}'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08044}08044\ \ \ \ \ \ \ \ \ assert\_equal(y.shape,\ ())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08045}08045\ \ \ \ \ \ \ \ \ assert\_equal(y.ndim,\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08046}08046\ \ \ \ \ \ \ \ \ assert\_equal(y.strides,\ ())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08047}08047\ \ \ \ \ \ \ \ \ assert\_equal(y.suboffsets,\ ())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08048}08048\ \ \ \ \ \ \ \ \ assert\_equal(y.itemsize,\ 16)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08049}08049\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08050}08050\ \ \ \ \ \textcolor{keyword}{def\ }test\_export\_endian(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08051}08051\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3],\ dtype=\textcolor{stringliteral}{'>i'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08052}08052\ \ \ \ \ \ \ \ \ y\ =\ memoryview(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08053}08053\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ sys.byteorder\ ==\ \textcolor{stringliteral}{'little'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08054}08054\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(y.format,\ \textcolor{stringliteral}{'>i'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08055}08055\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08056}08056\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(y.format,\ \textcolor{stringliteral}{'i'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08057}08057\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08058}08058\ \ \ \ \ \ \ \ \ x\ =\ np.array([1,\ 2,\ 3],\ dtype=\textcolor{stringliteral}{'<i'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08059}08059\ \ \ \ \ \ \ \ \ y\ =\ memoryview(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08060}08060\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ sys.byteorder\ ==\ \textcolor{stringliteral}{'little'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08061}08061\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(y.format,\ \textcolor{stringliteral}{'i'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08062}08062\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08063}08063\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(y.format,\ \textcolor{stringliteral}{'<i'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08064}08064\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08065}08065\ \ \ \ \ \textcolor{keyword}{def\ }test\_export\_flags(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08066}08066\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ SIMPLE\ flag,\ see\ also\ gh-\/3613\ (exception\ should\ be\ BufferError)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08067}08067\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08068}08068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_multiarray\_tests.get\_buffer\_info,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08069}08069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.arange(5)[::2],\ (\textcolor{stringliteral}{'SIMPLE'},))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08070}08070\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08071}08071\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}([\textcolor{stringliteral}{"{}obj"{}},\ \textcolor{stringliteral}{"{}error"{}}],\ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08072}08072\ \ \ \ \ \ \ \ \ \ \ \ \ pytest.param(np.array([1,\ 2],\ dtype=rational),\ ValueError,\ id=\textcolor{stringliteral}{"{}array"{}}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08073}08073\ \ \ \ \ \ \ \ \ \ \ \ \ pytest.param(rational(1,\ 2),\ TypeError,\ id=\textcolor{stringliteral}{"{}scalar"{}})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08074}08074\ \ \ \ \ \textcolor{keyword}{def\ }test\_export\_and\_pickle\_user\_dtype(self,\ obj,\ error):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08075}08075\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ User\ dtypes\ should\ export\ successfully\ when\ FORMAT\ was\ not\ requested.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08076}08076\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(error):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08077}08077\ \ \ \ \ \ \ \ \ \ \ \ \ \_multiarray\_tests.get\_buffer\_info(obj,\ (\textcolor{stringliteral}{"{}STRIDED\_RO"{}},\ \textcolor{stringliteral}{"{}FORMAT"{}}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08078}08078\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08079}08079\ \ \ \ \ \ \ \ \ \_multiarray\_tests.get\_buffer\_info(obj,\ (\textcolor{stringliteral}{"{}STRIDED\_RO"{}},))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08080}08080\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08081}08081\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ This\ is\ currently\ also\ necessary\ to\ implement\ pickling:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08082}08082\ \ \ \ \ \ \ \ \ pickle\_obj\ =\ pickle.dumps(obj)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08083}08083\ \ \ \ \ \ \ \ \ res\ =\ pickle.loads(pickle\_obj)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08084}08084\ \ \ \ \ \ \ \ \ assert\_array\_equal(res,\ obj)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08085}08085\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08086}08086\ \ \ \ \ \textcolor{keyword}{def\ }test\_padding(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08087}08087\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ j\ \textcolor{keywordflow}{in}\ range(8):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08088}08088\ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ np.array([(1,),\ (2,)],\ dtype=\{\textcolor{stringliteral}{'f0'}:\ (int,\ j)\})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08089}08089\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a17f7bd8ce1f2c62a8c19542a5a8ca0dc}{\_check\_roundtrip}}(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08090}08090\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08091}08091\ \ \ \ \ \textcolor{keyword}{def\ }test\_reference\_leak(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08092}08092\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ HAS\_REFCOUNT:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08093}08093\ \ \ \ \ \ \ \ \ \ \ \ \ count\_1\ =\ sys.getrefcount(np.core.\_internal)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08094}08094\ \ \ \ \ \ \ \ \ a\ =\ np.zeros(4)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08095}08095\ \ \ \ \ \ \ \ \ b\ =\ memoryview(a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08096}08096\ \ \ \ \ \ \ \ \ c\ =\ np.asarray(b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08097}08097\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ HAS\_REFCOUNT:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08098}08098\ \ \ \ \ \ \ \ \ \ \ \ \ count\_2\ =\ sys.getrefcount(np.core.\_internal)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08099}08099\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(count\_1,\ count\_2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08100}08100\ \ \ \ \ \ \ \ \ del\ c\ \ \textcolor{comment}{\#\ avoid\ pyflakes\ unused\ variable\ warning.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08101}08101\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08102}08102\ \ \ \ \ \textcolor{keyword}{def\ }test\_padded\_struct\_array(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08103}08103\ \ \ \ \ \ \ \ \ dt1\ =\ np.dtype(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08104}08104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'b'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'i'}),\ (\textcolor{stringliteral}{'sub'},\ np.dtype(\textcolor{stringliteral}{'b,i'})),\ (\textcolor{stringliteral}{'c'},\ \textcolor{stringliteral}{'i'})],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08105}08105\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ align=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08106}08106\ \ \ \ \ \ \ \ \ x1\ =\ np.arange(dt1.itemsize,\ dtype=np.int8).view(dt1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08107}08107\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a17f7bd8ce1f2c62a8c19542a5a8ca0dc}{\_check\_roundtrip}}(x1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08108}08108\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08109}08109\ \ \ \ \ \ \ \ \ dt2\ =\ np.dtype(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08110}08110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'b'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'i'}),\ (\textcolor{stringliteral}{'c'},\ \textcolor{stringliteral}{'b'},\ (3,)),\ (\textcolor{stringliteral}{'d'},\ \textcolor{stringliteral}{'i'})],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08111}08111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ align=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08112}08112\ \ \ \ \ \ \ \ \ x2\ =\ np.arange(dt2.itemsize,\ dtype=np.int8).view(dt2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08113}08113\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a17f7bd8ce1f2c62a8c19542a5a8ca0dc}{\_check\_roundtrip}}(x2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08114}08114\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08115}08115\ \ \ \ \ \ \ \ \ dt3\ =\ np.dtype(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08116}08116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [(\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'b'}),\ (\textcolor{stringliteral}{'b'},\ \textcolor{stringliteral}{'i'}),\ (\textcolor{stringliteral}{'c'},\ \textcolor{stringliteral}{'b'}),\ (\textcolor{stringliteral}{'d'},\ \textcolor{stringliteral}{'b'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08117}08117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{'e'},\ \textcolor{stringliteral}{'b'}),\ (\textcolor{stringliteral}{'sub'},\ np.dtype(\textcolor{stringliteral}{'b,i'},\ align=\textcolor{keyword}{True}))])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08118}08118\ \ \ \ \ \ \ \ \ x3\ =\ np.arange(dt3.itemsize,\ dtype=np.int8).view(dt3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08119}08119\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a17f7bd8ce1f2c62a8c19542a5a8ca0dc}{\_check\_roundtrip}}(x3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08120}08120\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08121}08121\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.valgrind\_error(reason="{}leaks\ buffer\ info\ cache\ temporarily."{})}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08122}08122\ \ \ \ \ \textcolor{keyword}{def\ }test\_relaxed\_strides(self,\ c=np.ones((1,\ 10,\ 10),\ dtype=\textcolor{stringliteral}{'i8'})):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08123}08123\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Note:\ c\ defined\ as\ parameter\ so\ that\ it\ is\ persistent\ and\ leak}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08124}08124\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ checks\ will\ notice\ gh-\/16934\ (buffer\ info\ cache\ leak).}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08125}08125\ \ \ \ \ \ \ \ \ c.strides\ =\ (-\/1,\ 80,\ 8)\ \ \textcolor{comment}{\#\ strides\ need\ to\ be\ fixed\ at\ export}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08126}08126\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08127}08127\ \ \ \ \ \ \ \ \ assert\_(memoryview(c).strides\ ==\ (800,\ 80,\ 8))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08128}08128\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08129}08129\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Writing\ C-\/contiguous\ data\ to\ a\ BytesIO\ buffer\ should\ work}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08130}08130\ \ \ \ \ \ \ \ \ fd\ =\ io.BytesIO()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08131}08131\ \ \ \ \ \ \ \ \ fd.write(c.data)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08132}08132\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08133}08133\ \ \ \ \ \ \ \ \ fortran\ =\ c.T}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08134}08134\ \ \ \ \ \ \ \ \ assert\_(memoryview(fortran).strides\ ==\ (8,\ 80,\ 800))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08135}08135\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08136}08136\ \ \ \ \ \ \ \ \ arr\ =\ np.ones((1,\ 10))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08137}08137\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ arr.flags.f\_contiguous:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08138}08138\ \ \ \ \ \ \ \ \ \ \ \ \ shape,\ strides\ =\ \_multiarray\_tests.get\_buffer\_info(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08139}08139\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ arr,\ [\textcolor{stringliteral}{'F\_CONTIGUOUS'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08140}08140\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(strides[0]\ ==\ 8)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08141}08141\ \ \ \ \ \ \ \ \ \ \ \ \ arr\ =\ np.ones((10,\ 1),\ order=\textcolor{stringliteral}{'F'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08142}08142\ \ \ \ \ \ \ \ \ \ \ \ \ shape,\ strides\ =\ \_multiarray\_tests.get\_buffer\_info(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08143}08143\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ arr,\ [\textcolor{stringliteral}{'C\_CONTIGUOUS'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08144}08144\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(strides[-\/1]\ ==\ 8)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08145}08145\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08146}08146\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.valgrind\_error(reason="{}leaks\ buffer\ info\ cache\ temporarily."{})}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08147}08147\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.skipif(not\ np.ones((10,\ 1)},\ order=\textcolor{stringliteral}{"{}C"{}}).flags.f\_contiguous,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08148}08148\ \ \ \ \ \ \ \ \ \ \ \ \ reason=\textcolor{stringliteral}{"{}Test\ is\ unnecessary\ (but\ fails)\ without\ relaxed\ strides."{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08149}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_aa4492d561e75dccf5bd6538694bc07cc}{08149}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_aa4492d561e75dccf5bd6538694bc07cc}{test\_relaxed\_strides\_buffer\_info\_leak}}(self,\ arr=np.ones((1,\ 10))):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08150}08150\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Test\ that\ alternating\ export\ of\ C-\/\ and\ F-\/order\ buffers\ from}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08151}08151\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ an\ array\ which\ is\ both\ C-\/\ and\ F-\/order\ when\ relaxed\ strides\ is}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08152}08152\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ active\ works.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08153}08153\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ This\ test\ defines\ array\ in\ the\ signature\ to\ ensure\ leaking\ more}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08154}08154\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ references\ every\ time\ the\ test\ is\ run\ (catching\ the\ leak\ with}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08155}08155\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ pytest-\/leaks).}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08156}08156\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08157}08157\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(10):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08158}08158\ \ \ \ \ \ \ \ \ \ \ \ \ \_,\ s\ =\ \_multiarray\_tests.get\_buffer\_info(arr,\ [\textcolor{stringliteral}{'F\_CONTIGUOUS'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08159}08159\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ s\ ==\ (8,\ 8)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08160}08160\ \ \ \ \ \ \ \ \ \ \ \ \ \_,\ s\ =\ \_multiarray\_tests.get\_buffer\_info(arr,\ [\textcolor{stringliteral}{'C\_CONTIGUOUS'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08161}08161\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ s\ ==\ (80,\ 8)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08162}08162\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08163}08163\ \ \ \ \ \textcolor{keyword}{def\ }test\_out\_of\_order\_fields(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08164}08164\ \ \ \ \ \ \ \ \ dt\ =\ np.dtype(dict(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08165}08165\ \ \ \ \ \ \ \ \ \ \ \ \ formats=[\textcolor{stringliteral}{'<i4'},\ \textcolor{stringliteral}{'<i4'}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08166}08166\ \ \ \ \ \ \ \ \ \ \ \ \ names=[\textcolor{stringliteral}{'one'},\ \textcolor{stringliteral}{'two'}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08167}08167\ \ \ \ \ \ \ \ \ \ \ \ \ offsets=[4,\ 0],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08168}08168\ \ \ \ \ \ \ \ \ \ \ \ \ itemsize=8}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08169}08169\ \ \ \ \ \ \ \ \ ))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08170}08170\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08171}08171\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ overlapping\ fields\ cannot\ be\ represented\ by\ PEP3118}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08172}08172\ \ \ \ \ \ \ \ \ arr\ =\ np.empty(1,\ dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08173}08173\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_raises(ValueError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08174}08174\ \ \ \ \ \ \ \ \ \ \ \ \ memoryview(arr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08175}08175\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08176}08176\ \ \ \ \ \textcolor{keyword}{def\ }test\_max\_dims(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08177}08177\ \ \ \ \ \ \ \ \ a\ =\ np.ones((1,)\ *\ 32)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08178}08178\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a17f7bd8ce1f2c62a8c19542a5a8ca0dc}{\_check\_roundtrip}}(a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08179}08179\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08180}08180\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.slow}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08181}08181\ \ \ \ \ \textcolor{keyword}{def\ }test\_error\_too\_many\_dims(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08182}08182\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }make\_ctype(shape,\ scalar\_type):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08183}08183\ \ \ \ \ \ \ \ \ \ \ \ \ t\ =\ scalar\_type}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08184}08184\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dim\ \textcolor{keywordflow}{in}\ shape[::-\/1]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08185}08185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ t\ =\ dim\ *\ t}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08186}08186\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ t}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08187}08187\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08188}08188\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ construct\ a\ memoryview\ with\ 33\ dimensions}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08189}08189\ \ \ \ \ \ \ \ \ c\_u8\_33d\ =\ make\_ctype((1,)*33,\ ctypes.c\_uint8)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08190}08190\ \ \ \ \ \ \ \ \ m\ =\ memoryview(c\_u8\_33d())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08191}08191\ \ \ \ \ \ \ \ \ assert\_equal(m.ndim,\ 33)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08192}08192\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08193}08193\ \ \ \ \ \ \ \ \ assert\_raises\_regex(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08194}08194\ \ \ \ \ \ \ \ \ \ \ \ \ RuntimeError,\ \textcolor{stringliteral}{"{}ndim"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08195}08195\ \ \ \ \ \ \ \ \ \ \ \ \ np.array,\ m)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08196}08196\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08197}08197\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ above\ seems\ to\ create\ some\ deep\ cycles,\ clean\ them\ up\ for}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08198}08198\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ easier\ reference\ count\ debugging:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08199}08199\ \ \ \ \ \ \ \ \ del\ c\_u8\_33d,\ m}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08200}08200\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(33):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08201}08201\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ gc.collect()\ ==\ 0:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08202}08202\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08203}08203\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08204}08204\ \ \ \ \ \textcolor{keyword}{def\ }test\_error\_pointer\_type(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08205}08205\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/6741}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08206}08206\ \ \ \ \ \ \ \ \ m\ =\ memoryview(ctypes.pointer(ctypes.c\_uint8()))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08207}08207\ \ \ \ \ \ \ \ \ assert\_(\textcolor{stringliteral}{'\&'}\ \textcolor{keywordflow}{in}\ m.format)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08208}08208\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08209}08209\ \ \ \ \ \ \ \ \ assert\_raises\_regex(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08210}08210\ \ \ \ \ \ \ \ \ \ \ \ \ ValueError,\ \textcolor{stringliteral}{"{}format\ string"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08211}08211\ \ \ \ \ \ \ \ \ \ \ \ \ np.array,\ m)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08212}08212\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08213}08213\ \ \ \ \ \textcolor{keyword}{def\ }test\_error\_message\_unsupported(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08214}08214\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ wchar\ has\ no\ corresponding\ numpy\ type\ -\/\ if\ this\ changes\ in\ future,\ we}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08215}08215\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ need\ a\ better\ way\ to\ construct\ an\ invalid\ memoryview\ format.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08216}08216\ \ \ \ \ \ \ \ \ t\ =\ ctypes.c\_wchar\ *\ 4}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08217}08217\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_raises(ValueError)\ \textcolor{keyword}{as}\ cm:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08218}08218\ \ \ \ \ \ \ \ \ \ \ \ \ np.array(t())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08219}08219\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08220}08220\ \ \ \ \ \ \ \ \ exc\ =\ cm.exception}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08221}08221\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_raises\_regex(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08222}08222\ \ \ \ \ \ \ \ \ \ \ \ \ NotImplementedError,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08223}08223\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{r"{}Unrepresentable\ .*\ 'u'\ \(\backslash\)(UCS-\/2\ strings\(\backslash\))"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08224}08224\ \ \ \ \ \ \ \ \ ):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08225}08225\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ exc.\_\_cause\_\_}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08226}08226\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08227}08227\ \ \ \ \ \textcolor{keyword}{def\ }test\_ctypes\_integer\_via\_memoryview(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08228}08228\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/11150,\ due\ to\ bpo-\/10746}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08229}08229\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ c\_integer\ \textcolor{keywordflow}{in}\ \{ctypes.c\_int,\ ctypes.c\_long,\ ctypes.c\_longlong\}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08230}08230\ \ \ \ \ \ \ \ \ \ \ \ \ value\ =\ c\_integer(42)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08231}08231\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ warnings.catch\_warnings(record=\textcolor{keyword}{True}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08232}08232\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ warnings.filterwarnings(\textcolor{stringliteral}{'always'},\ \textcolor{stringliteral}{r'.*\(\backslash\)bctypes\(\backslash\)b'},\ RuntimeWarning)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08233}08233\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.asarray(value)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08234}08234\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08235}08235\ \ \ \ \ \textcolor{keyword}{def\ }test\_ctypes\_struct\_via\_memoryview(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08236}08236\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/10528}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08237}08237\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{namespacefoo}{foo}}(ctypes.Structure):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08238}08238\ \ \ \ \ \ \ \ \ \ \ \ \ \_fields\_\ =\ [(\textcolor{stringliteral}{'a'},\ ctypes.c\_uint8),\ (\textcolor{stringliteral}{'b'},\ ctypes.c\_uint32)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08239}08239\ \ \ \ \ \ \ \ \ f\ =\ \mbox{\hyperlink{namespacefoo}{foo}}(a=1,\ b=2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08240}08240\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08241}08241\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ warnings.catch\_warnings(record=\textcolor{keyword}{True}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08242}08242\ \ \ \ \ \ \ \ \ \ \ \ \ warnings.filterwarnings(\textcolor{stringliteral}{'always'},\ \textcolor{stringliteral}{r'.*\(\backslash\)bctypes\(\backslash\)b'},\ RuntimeWarning)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08243}08243\ \ \ \ \ \ \ \ \ \ \ \ \ arr\ =\ np.asarray(f)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08244}08244\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08245}08245\ \ \ \ \ \ \ \ \ assert\_equal(arr[\textcolor{stringliteral}{'a'}],\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08246}08246\ \ \ \ \ \ \ \ \ assert\_equal(arr[\textcolor{stringliteral}{'b'}],\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08247}08247\ \ \ \ \ \ \ \ \ f.a\ =\ 3}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08248}08248\ \ \ \ \ \ \ \ \ assert\_equal(arr[\textcolor{stringliteral}{'a'}],\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08249}08249\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08250}08250\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}obj"{},\ [np.ones(3)},\ np.ones(1,\ dtype=\textcolor{stringliteral}{"{}i,i"{}})[()]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08251}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a755a1b31997e346c729fc60c65d9467c}{08251}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestNewBufferProtocol_a755a1b31997e346c729fc60c65d9467c}{test\_error\_if\_stored\_buffer\_info\_is\_corrupted}}(self,\ obj):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08252}08252\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08253}08253\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ If\ a\ user\ extends\ a\ NumPy\ array\ before\ 1.20\ and\ then\ runs\ it}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08254}08254\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ on\ NumPy\ 1.20+.\ A\ C-\/subclassed\ array\ might\ in\ theory\ modify}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08255}08255\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ the\ new\ buffer-\/info\ field.\ This\ checks\ that\ an\ error\ is\ raised}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08256}08256\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ if\ this\ happens\ (for\ buffer\ export),\ an\ error\ is\ written\ on\ delete.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08257}08257\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ This\ is\ a\ sanity\ check\ to\ help\ users\ transition\ to\ safe\ code,\ it}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08258}08258\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ may\ be\ deleted\ at\ any\ point.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08259}08259\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08260}08260\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ corrupt\ buffer\ info:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08261}08261\ \ \ \ \ \ \ \ \ \_multiarray\_tests.corrupt\_or\_fix\_bufferinfo(obj)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08262}08262\ \ \ \ \ \ \ \ \ name\ =\ type(obj)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08263}08263\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(RuntimeError,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08264}08264\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ match=f\textcolor{stringliteral}{"{}.*\{name\}\ appears\ to\ be\ C\ subclassed"{}}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08265}08265\ \ \ \ \ \ \ \ \ \ \ \ \ memoryview(obj)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08266}08266\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Fix\ buffer\ info\ again\ before\ we\ delete\ (or\ we\ lose\ the\ memory)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08267}08267\ \ \ \ \ \ \ \ \ \_multiarray\_tests.corrupt\_or\_fix\_bufferinfo(obj)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08268}08268\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08269}08269\ \ \ \ \ \textcolor{keyword}{def\ }test\_no\_suboffsets(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08270}08270\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08271}08271\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{import}\ \_testbuffer}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08272}08272\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ ImportError:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08273}08273\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ pytest.skip(\textcolor{stringliteral}{"{}\_testbuffer\ is\ not\ available"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08274}08274\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08275}08275\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ shape\ \textcolor{keywordflow}{in}\ [(2,\ 3),\ (2,\ 3,\ 4)]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08276}08276\ \ \ \ \ \ \ \ \ \ \ \ \ data\ =\ list(range(np.prod(shape)))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08277}08277\ \ \ \ \ \ \ \ \ \ \ \ \ buffer\ =\ \_testbuffer.ndarray(data,\ shape,\ format=\textcolor{stringliteral}{'i'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08278}08278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ flags=\_testbuffer.ND\_PIL)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08279}08279\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ \textcolor{stringliteral}{"{}NumPy\ currently\ does\ not\ support.*suboffsets"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08280}08280\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(BufferError,\ match=msg):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08281}08281\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.asarray(buffer)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08282}08282\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(BufferError,\ match=msg):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08283}08283\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.asarray([buffer])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08284}08284\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08285}08285\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Also\ check\ (unrelated\ and\ more\ limited\ but\ similar)\ frombuffer:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08286}08286\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(BufferError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08287}08287\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.frombuffer(buffer)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08288}08288\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08289}08289\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08290}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayCreationCopyArgument}{08290}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayCreationCopyArgument}{TestArrayCreationCopyArgument}}(object):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08291}08291\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08292}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayCreationCopyArgument_1_1RaiseOnBool}{08292}}\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayCreationCopyArgument_1_1RaiseOnBool}{RaiseOnBool}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08293}08293\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08294}08294\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_bool\_\_(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08295}08295\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ ValueError}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08296}08296\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08297}08297\ \ \ \ \ true\_vals\ =\ [\textcolor{keyword}{True},\ np.\_CopyMode.ALWAYS,\ np.True\_]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08298}08298\ \ \ \ \ false\_vals\ =\ [\textcolor{keyword}{False},\ np.\_CopyMode.IF\_NEEDED,\ np.False\_]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08299}08299\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08300}08300\ \ \ \ \ \textcolor{keyword}{def\ }test\_scalars(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08301}08301\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ both\ numpy\ and\ python\ scalars}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08302}08302\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dtype\ \textcolor{keywordflow}{in}\ np.typecodes[\textcolor{stringliteral}{"{}All"{}}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08303}08303\ \ \ \ \ \ \ \ \ \ \ \ \ arr\ =\ np.zeros((),\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08304}08304\ \ \ \ \ \ \ \ \ \ \ \ \ scalar\ =\ arr[()]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08305}08305\ \ \ \ \ \ \ \ \ \ \ \ \ pyscalar\ =\ arr.item(0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08306}08306\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08307}08307\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ never-\/copy\ raises\ error:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08308}08308\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.array,\ scalar,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08309}08309\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ copy=np.\_CopyMode.NEVER)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08310}08310\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.array,\ pyscalar,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08311}08311\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ copy=np.\_CopyMode.NEVER)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08312}08312\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.array,\ pyscalar,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08313}08313\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ copy=self.RaiseOnBool())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08314}08314\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ \_multiarray\_tests.npy\_ensurenocopy,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08315}08315\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [1])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08316}08316\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Casting\ with\ a\ dtype\ (to\ unsigned\ integers)\ can\ be\ special:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08317}08317\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08318}08318\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.array(pyscalar,\ dtype=np.int64,\ copy=np.\_CopyMode.NEVER)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08319}08319\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08320}08320\ \ \ \ \ \textcolor{keyword}{def\ }test\_compatible\_cast(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08321}08321\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08322}08322\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Some\ types\ are\ compatible\ even\ though\ they\ are\ different,\ no}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08323}08323\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ copy\ is\ necessary\ for\ them.\ This\ is\ mostly\ true\ for\ some\ integers}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08324}08324\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }int\_types(byteswap=False):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08325}08325\ \ \ \ \ \ \ \ \ \ \ \ \ int\_types\ =\ (np.typecodes[\textcolor{stringliteral}{"{}Integer"{}}]\ +}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08326}08326\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.typecodes[\textcolor{stringliteral}{"{}UnsignedInteger"{}}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08327}08327\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ int\_type\ \textcolor{keywordflow}{in}\ int\_types:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08328}08328\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{yield}\ np.dtype(int\_type)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08329}08329\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ byteswap:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08330}08330\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{yield}\ np.dtype(int\_type).newbyteorder()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08331}08331\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08332}08332\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ int1\ \textcolor{keywordflow}{in}\ int\_types():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08333}08333\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ int2\ \textcolor{keywordflow}{in}\ int\_types(\textcolor{keyword}{True}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08334}08334\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ arr\ =\ np.arange(10,\ dtype=int1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08335}08335\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08336}08336\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ copy\ \textcolor{keywordflow}{in}\ self.true\_vals:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08337}08337\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ np.array(arr,\ copy=copy,\ dtype=int2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08338}08338\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ res\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ arr\ \textcolor{keywordflow}{and}\ res.flags.owndata}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08339}08339\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(res,\ arr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08340}08340\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08341}08341\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ int1\ ==\ int2:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08342}08342\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Casting\ is\ not\ necessary,\ base\ check\ is\ sufficient\ here}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08343}08343\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ copy\ \textcolor{keywordflow}{in}\ self.false\_vals:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08344}08344\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ np.array(arr,\ copy=copy,\ dtype=int2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08345}08345\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ res\ \textcolor{keywordflow}{is}\ arr\ \textcolor{keywordflow}{or}\ res.base\ \textcolor{keywordflow}{is}\ arr}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08346}08346\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08347}08347\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ np.array(arr,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08348}08348\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ copy=np.\_CopyMode.NEVER,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08349}08349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=int2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08350}08350\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ res\ \textcolor{keywordflow}{is}\ arr\ \textcolor{keywordflow}{or}\ res.base\ \textcolor{keywordflow}{is}\ arr}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08351}08351\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08352}08352\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08353}08353\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Casting\ is\ necessary,\ assert\ copy\ works:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08354}08354\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ copy\ \textcolor{keywordflow}{in}\ self.false\_vals:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08355}08355\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ np.array(arr,\ copy=copy,\ dtype=int2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08356}08356\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ res\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ arr\ \textcolor{keywordflow}{and}\ res.flags.owndata}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08357}08357\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(res,\ arr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08358}08358\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08359}08359\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.array,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08360}08360\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ arr,\ copy=np.\_CopyMode.NEVER,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08361}08361\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=int2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08362}08362\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.array,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08363}08363\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ arr,\ copy=\textcolor{keywordtype}{None},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08364}08364\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=int2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08365}08365\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08366}08366\ \ \ \ \ \textcolor{keyword}{def\ }test\_buffer\_interface(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08367}08367\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08368}08368\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Buffer\ interface\ gives\ direct\ memory\ access\ (no\ copy)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08369}08369\ \ \ \ \ \ \ \ \ arr\ =\ np.arange(10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08370}08370\ \ \ \ \ \ \ \ \ view\ =\ memoryview(arr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08371}08371\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08372}08372\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Checking\ bases\ is\ a\ bit\ tricky\ since\ numpy\ creates\ another}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08373}08373\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ memoryview,\ so\ use\ may\_share\_memory.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08374}08374\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ copy\ \textcolor{keywordflow}{in}\ self.true\_vals:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08375}08375\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ np.array(view,\ copy=copy)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08376}08376\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ \textcolor{keywordflow}{not}\ np.may\_share\_memory(arr,\ res)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08377}08377\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ copy\ \textcolor{keywordflow}{in}\ self.false\_vals:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08378}08378\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ np.array(view,\ copy=copy)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08379}08379\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ np.may\_share\_memory(arr,\ res)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08380}08380\ \ \ \ \ \ \ \ \ res\ =\ np.array(view,\ copy=np.\_CopyMode.NEVER)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08381}08381\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ np.may\_share\_memory(arr,\ res)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08382}08382\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08383}08383\ \ \ \ \ \textcolor{keyword}{def\ }test\_array\_interfaces(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08384}08384\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Array\ interface\ gives\ direct\ memory\ access\ (much\ like\ a\ memoryview)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08385}08385\ \ \ \ \ \ \ \ \ base\_arr\ =\ np.arange(10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08386}08386\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08387}08387\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }ArrayLike:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08388}08388\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_array\_interface\_\_\ =\ base\_arr.\_\_array\_interface\_\_}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08389}08389\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08390}08390\ \ \ \ \ \ \ \ \ arr\ =\ ArrayLike()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08391}08391\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08392}08392\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ copy,\ val\ \textcolor{keywordflow}{in}\ [(\textcolor{keyword}{True},\ \textcolor{keywordtype}{None}),\ (np.\_CopyMode.ALWAYS,\ \textcolor{keywordtype}{None}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08393}08393\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{keyword}{False},\ arr),\ (np.\_CopyMode.IF\_NEEDED,\ arr),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08394}08394\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (np.\_CopyMode.NEVER,\ arr)]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08395}08395\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ np.array(arr,\ copy=copy)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08396}08396\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ res.base\ \textcolor{keywordflow}{is}\ val}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08397}08397\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08398}08398\ \ \ \ \ \textcolor{keyword}{def\ }test\_\_\_array\_\_(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08399}08399\ \ \ \ \ \ \ \ \ base\_arr\ =\ np.arange(10)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08400}08400\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08401}08401\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }ArrayLike:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08402}08402\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_array\_\_(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08403}08403\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \_\_array\_\_\ should\ return\ a\ copy,\ numpy\ cannot\ know\ this}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08404}08404\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ however.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08405}08405\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ base\_arr}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08406}08406\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08407}08407\ \ \ \ \ \ \ \ \ arr\ =\ ArrayLike()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08408}08408\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08409}08409\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ copy\ \textcolor{keywordflow}{in}\ self.true\_vals:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08410}08410\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ np.array(arr,\ copy=copy)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08411}08411\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(res,\ base\_arr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08412}08412\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ An\ additional\ copy\ is\ currently\ forced\ by\ numpy\ in\ this\ case,}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08413}08413\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ you\ could\ argue,\ numpy\ does\ not\ trust\ the\ ArrayLike.\ This}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08414}08414\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ may\ be\ open\ for\ change:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08415}08415\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ res\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ base\_arr}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08416}08416\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08417}08417\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ copy\ \textcolor{keywordflow}{in}\ self.false\_vals:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08418}08418\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ np.array(arr,\ copy=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08419}08419\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(res,\ base\_arr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08420}08420\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ res\ \textcolor{keywordflow}{is}\ base\_arr\ \ \textcolor{comment}{\#\ numpy\ trusts\ the\ ArrayLike}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08421}08421\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08422}08422\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08423}08423\ \ \ \ \ \ \ \ \ \ \ \ \ np.array(arr,\ copy=np.\_CopyMode.NEVER)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08424}08424\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08425}08425\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08426}08426\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}arr"{}},\ [np.ones(()),\ np.arange(81).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}((9,\ 9))])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08427}08427\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}order1"{},\ ["{}C"{},\ "{}F"{},\ None])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08428}08428\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}order2"{},\ ["{}C"{},\ "{}F"{},\ "{}A"{},\ "{}K"{}])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08429}08429\ \ \ \ \ \textcolor{keyword}{def\ }test\_order\_mismatch(self,\ arr,\ order1,\ order2):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08430}08430\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ order\ is\ the\ main\ (python\ side)\ reason\ that\ can\ cause}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08431}08431\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ a\ never-\/copy\ to\ fail.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08432}08432\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Prepare\ C-\/order,\ F-\/order\ and\ non-\/contiguous\ arrays:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08433}08433\ \ \ \ \ \ \ \ \ arr\ =\ arr.copy(order1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08434}08434\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ order1\ ==\ \textcolor{stringliteral}{"{}C"{}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08435}08435\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ arr.flags.c\_contiguous}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08436}08436\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ order1\ ==\ \textcolor{stringliteral}{"{}F"{}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08437}08437\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ arr.flags.f\_contiguous}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08438}08438\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ arr.ndim\ !=\ 0:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08439}08439\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Make\ array\ non-\/contiguous}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08440}08440\ \ \ \ \ \ \ \ \ \ \ \ \ arr\ =\ arr[::2,\ ::2]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08441}08441\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ \textcolor{keywordflow}{not}\ arr.flags.forc}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08442}08442\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08443}08443\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Whether\ a\ copy\ is\ necessary\ depends\ on\ the\ order\ of\ arr:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08444}08444\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ order2\ ==\ \textcolor{stringliteral}{"{}C"{}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08445}08445\ \ \ \ \ \ \ \ \ \ \ \ \ no\_copy\_necessary\ =\ arr.flags.c\_contiguous}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08446}08446\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ order2\ ==\ \textcolor{stringliteral}{"{}F"{}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08447}08447\ \ \ \ \ \ \ \ \ \ \ \ \ no\_copy\_necessary\ =\ arr.flags.f\_contiguous}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08448}08448\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08449}08449\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Keeporder\ and\ Anyorder\ are\ OK\ with\ non-\/contiguous\ output.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08450}08450\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ This\ is\ not\ consistent\ with\ the\ \`{}astype`\ behaviour\ which}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08451}08451\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ enforces\ contiguity\ for\ "{}A"{}.\ It\ is\ probably\ historic\ from\ when}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08452}08452\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ "{}K"{}\ did\ not\ exist.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08453}08453\ \ \ \ \ \ \ \ \ \ \ \ \ no\_copy\_necessary\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08454}08454\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08455}08455\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ it\ for\ both\ the\ array\ and\ a\ memoryview}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08456}08456\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ view\ \textcolor{keywordflow}{in}\ [arr,\ memoryview(arr)]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08457}08457\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ copy\ \textcolor{keywordflow}{in}\ self.true\_vals:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08458}08458\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ np.array(view,\ copy=copy,\ order=order2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08459}08459\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ res\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ arr\ \textcolor{keywordflow}{and}\ res.flags.owndata}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08460}08460\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(arr,\ res)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08461}08461\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08462}08462\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ no\_copy\_necessary:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08463}08463\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ copy\ \textcolor{keywordflow}{in}\ self.false\_vals:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08464}08464\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ np.array(view,\ copy=copy,\ order=order2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08465}08465\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ res.base.obj\ refers\ to\ the\ memoryview}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08466}08466\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ IS\_PYPY:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08467}08467\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ res\ \textcolor{keywordflow}{is}\ arr\ \textcolor{keywordflow}{or}\ res.base.obj\ \textcolor{keywordflow}{is}\ arr}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08468}08468\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08469}08469\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ np.array(view,\ copy=np.\_CopyMode.NEVER,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08470}08470\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ order=order2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08471}08471\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ IS\_PYPY:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08472}08472\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ res\ \textcolor{keywordflow}{is}\ arr\ \textcolor{keywordflow}{or}\ res.base.obj\ \textcolor{keywordflow}{is}\ arr}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08473}08473\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08474}08474\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ copy\ \textcolor{keywordflow}{in}\ self.false\_vals:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08475}08475\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ np.array(arr,\ copy=copy,\ order=order2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08476}08476\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(arr,\ res)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08477}08477\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.array,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08478}08478\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ view,\ copy=np.\_CopyMode.NEVER,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08479}08479\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ order=order2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08480}08480\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.array,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08481}08481\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ view,\ copy=\textcolor{keywordtype}{None},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08482}08482\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ order=order2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08483}08483\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08484}08484\ \ \ \ \ \textcolor{keyword}{def\ }test\_striding\_not\_ok(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08485}08485\ \ \ \ \ \ \ \ \ arr\ =\ np.array([[1,\ 2,\ 4],\ [3,\ 4,\ 5]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08486}08486\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.array,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08487}08487\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ arr.T,\ copy=np.\_CopyMode.NEVER,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08488}08488\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ order=\textcolor{stringliteral}{'C'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08489}08489\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.array,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08490}08490\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ arr.T,\ copy=np.\_CopyMode.NEVER,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08491}08491\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ order=\textcolor{stringliteral}{'C'},\ dtype=np.int64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08492}08492\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.array,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08493}08493\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ arr,\ copy=np.\_CopyMode.NEVER,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08494}08494\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ order=\textcolor{stringliteral}{'F'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08495}08495\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.array,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08496}08496\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ arr,\ copy=np.\_CopyMode.NEVER,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08497}08497\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ order=\textcolor{stringliteral}{'F'},\ dtype=np.int64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08498}08498\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08499}08499\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08500}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayAttributeDeletion}{08500}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayAttributeDeletion}{TestArrayAttributeDeletion}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08501}08501\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08502}08502\ \ \ \ \ \textcolor{keyword}{def\ }test\_multiarray\_writable\_attributes\_deletion(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08503}08503\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ ticket\ \#2046,\ should\ not\ seqfault,\ raise\ AttributeError}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08504}08504\ \ \ \ \ \ \ \ \ a\ =\ np.ones(2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08505}08505\ \ \ \ \ \ \ \ \ attr\ =\ [\textcolor{stringliteral}{'shape'},\ \textcolor{stringliteral}{'strides'},\ \textcolor{stringliteral}{'data'},\ \textcolor{stringliteral}{'dtype'},\ \textcolor{stringliteral}{'real'},\ \textcolor{stringliteral}{'imag'},\ \textcolor{stringliteral}{'flat'}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08506}08506\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ \mbox{\hyperlink{classnumpy_1_1testing_1_1__private_1_1utils_1_1suppress__warnings}{suppress\_warnings}}()\ \textcolor{keyword}{as}\ sup:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08507}08507\ \ \ \ \ \ \ \ \ \ \ \ \ sup.filter(DeprecationWarning,\ \textcolor{stringliteral}{"{}Assigning\ the\ 'data'\ attribute"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08508}08508\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ s\ \textcolor{keywordflow}{in}\ attr:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08509}08509\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(AttributeError,\ delattr,\ a,\ s)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08510}08510\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08511}08511\ \ \ \ \ \textcolor{keyword}{def\ }test\_multiarray\_not\_writable\_attributes\_deletion(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08512}08512\ \ \ \ \ \ \ \ \ a\ =\ np.ones(2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08513}08513\ \ \ \ \ \ \ \ \ attr\ =\ [\textcolor{stringliteral}{"{}ndim"{}},\ \textcolor{stringliteral}{"{}flags"{}},\ \textcolor{stringliteral}{"{}itemsize"{}},\ \textcolor{stringliteral}{"{}size"{}},\ \textcolor{stringliteral}{"{}nbytes"{}},\ \textcolor{stringliteral}{"{}base"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08514}08514\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}ctypes"{}},\ \textcolor{stringliteral}{"{}T"{}},\ \textcolor{stringliteral}{"{}\_\_array\_interface\_\_"{}},\ \textcolor{stringliteral}{"{}\_\_array\_struct\_\_"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08515}08515\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\_\_array\_priority\_\_"{}},\ \textcolor{stringliteral}{"{}\_\_array\_finalize\_\_"{}}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08516}08516\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ s\ \textcolor{keywordflow}{in}\ attr:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08517}08517\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(AttributeError,\ delattr,\ a,\ s)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08518}08518\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08519}08519\ \ \ \ \ \textcolor{keyword}{def\ }test\_multiarray\_flags\_writable\_attribute\_deletion(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08520}08520\ \ \ \ \ \ \ \ \ a\ =\ np.ones(2).flags}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08521}08521\ \ \ \ \ \ \ \ \ attr\ =\ [\textcolor{stringliteral}{'writebackifcopy'},\ \textcolor{stringliteral}{'updateifcopy'},\ \textcolor{stringliteral}{'aligned'},\ \textcolor{stringliteral}{'writeable'}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08522}08522\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ s\ \textcolor{keywordflow}{in}\ attr:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08523}08523\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(AttributeError,\ delattr,\ a,\ s)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08524}08524\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08525}08525\ \ \ \ \ \textcolor{keyword}{def\ }test\_multiarray\_flags\_not\_writable\_attribute\_deletion(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08526}08526\ \ \ \ \ \ \ \ \ a\ =\ np.ones(2).flags}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08527}08527\ \ \ \ \ \ \ \ \ attr\ =\ [\textcolor{stringliteral}{"{}contiguous"{}},\ \textcolor{stringliteral}{"{}c\_contiguous"{}},\ \textcolor{stringliteral}{"{}f\_contiguous"{}},\ \textcolor{stringliteral}{"{}fortran"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08528}08528\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}owndata"{}},\ \textcolor{stringliteral}{"{}fnc"{}},\ \textcolor{stringliteral}{"{}forc"{}},\ \textcolor{stringliteral}{"{}behaved"{}},\ \textcolor{stringliteral}{"{}carray"{}},\ \textcolor{stringliteral}{"{}farray"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08529}08529\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}num"{}}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08530}08530\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ s\ \textcolor{keywordflow}{in}\ attr:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08531}08531\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(AttributeError,\ delattr,\ a,\ s)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08532}08532\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08533}08533\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08534}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayInterface}{08534}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayInterface}{TestArrayInterface}}():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08535}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayInterface_1_1Foo}{08535}}\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayInterface_1_1Foo}{Foo}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08536}08536\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self,\ value):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08537}08537\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayInterface_1_1Foo_acd3cce7547c2cd8f61dabbb71ce09898}{value}}\ =\ value}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08538}08538\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayInterface_1_1Foo_a8453ce649d6570ab897ae9a9cff4362d}{iface}}\ =\ \{\textcolor{stringliteral}{'typestr'}:\ \textcolor{stringliteral}{'f8'}\}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08539}08539\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08540}08540\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_float\_\_(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08541}08541\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ float(self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayInterface_1_1Foo_acd3cce7547c2cd8f61dabbb71ce09898}{value}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08542}08542\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08543}08543\ \ \ \ \ \ \ \ \ \textcolor{preprocessor}{@property}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08544}08544\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_array\_interface\_\_(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08545}08545\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayInterface_1_1Foo_a8453ce649d6570ab897ae9a9cff4362d}{iface}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08546}08546\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08547}08547\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08548}08548\ \ \ \ \ f\ =\ \mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayInterface_1_1Foo}{Foo}}(0.5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08549}08549\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08550}08550\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{'val,\ iface,\ expected'},\ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08551}08551\ \ \ \ \ \ \ \ \ (f,\ \{\},\ 0.5),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08552}08552\ \ \ \ \ \ \ \ \ ([f],\ \{\},\ [0.5]),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08553}08553\ \ \ \ \ \ \ \ \ ([f,\ f],\ \{\},\ [0.5,\ 0.5]),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08554}08554\ \ \ \ \ \ \ \ \ (f,\ \{\textcolor{stringliteral}{'shape'}:\ ()\},\ 0.5),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08555}08555\ \ \ \ \ \ \ \ \ (f,\ \{\textcolor{stringliteral}{'shape'}:\ \textcolor{keywordtype}{None}\},\ TypeError),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08556}08556\ \ \ \ \ \ \ \ \ (f,\ \{\textcolor{stringliteral}{'shape'}:\ (1,\ 1)\},\ [[0.5]]),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08557}08557\ \ \ \ \ \ \ \ \ (f,\ \{\textcolor{stringliteral}{'shape'}:\ (2,)\},\ ValueError),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08558}08558\ \ \ \ \ \ \ \ \ (f,\ \{\textcolor{stringliteral}{'strides'}:\ ()\},\ 0.5),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08559}08559\ \ \ \ \ \ \ \ \ (f,\ \{\textcolor{stringliteral}{'strides'}:\ (2,)\},\ ValueError),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08560}08560\ \ \ \ \ \ \ \ \ (f,\ \{\textcolor{stringliteral}{'strides'}:\ 16\},\ TypeError),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08561}08561\ \ \ \ \ \ \ \ \ ])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08562}08562\ \ \ \ \ \textcolor{keyword}{def\ }test\_scalar\_interface(self,\ val,\ iface,\ expected):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08563}08563\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ scalar\ coercion\ within\ the\ array\ interface}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08564}08564\ \ \ \ \ \ \ \ \ self.f.iface\ =\ \{\textcolor{stringliteral}{'typestr'}:\ \textcolor{stringliteral}{'f8'}\}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08565}08565\ \ \ \ \ \ \ \ \ self.f.iface.update(iface)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08566}08566\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ HAS\_REFCOUNT:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08567}08567\ \ \ \ \ \ \ \ \ \ \ \ \ pre\_cnt\ =\ sys.getrefcount(np.dtype(\textcolor{stringliteral}{'f8'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08568}08568\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ isinstance(expected,\ type):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08569}08569\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(expected,\ np.array,\ val)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08570}08570\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08571}08571\ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ np.array(val)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08572}08572\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.array(val),\ expected)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08573}08573\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ result.dtype\ ==\ \textcolor{stringliteral}{'f8'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08574}08574\ \ \ \ \ \ \ \ \ \ \ \ \ del\ result}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08575}08575\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ HAS\_REFCOUNT:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08576}08576\ \ \ \ \ \ \ \ \ \ \ \ \ post\_cnt\ =\ sys.getrefcount(np.dtype(\textcolor{stringliteral}{'f8'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08577}08577\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(pre\_cnt,\ post\_cnt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08578}08578\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08579}08579\ \textcolor{keyword}{def\ }test\_interface\_no\_shape():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08580}08580\ \ \ \ \ \textcolor{keyword}{class\ }ArrayLike:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08581}08581\ \ \ \ \ \ \ \ \ array\ =\ np.array(1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08582}08582\ \ \ \ \ \ \ \ \ \_\_array\_interface\_\_\ =\ array.\_\_array\_interface\_\_}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08583}08583\ \ \ \ \ assert\_equal(np.array(ArrayLike()),\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08584}08584\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08585}08585\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08586}08586\ \textcolor{keyword}{def\ }test\_array\_interface\_itemsize():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08587}08587\ \ \ \ \ \textcolor{comment}{\#\ See\ gh-\/6361}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08588}08588\ \ \ \ \ my\_dtype\ =\ np.dtype(\{\textcolor{stringliteral}{'names'}:\ [\textcolor{stringliteral}{'A'},\ \textcolor{stringliteral}{'B'}],\ \textcolor{stringliteral}{'formats'}:\ [\textcolor{stringliteral}{'f4'},\ \textcolor{stringliteral}{'f4'}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08589}08589\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'offsets'}:\ [0,\ 8],\ \textcolor{stringliteral}{'itemsize'}:\ 16\})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08590}08590\ \ \ \ \ a\ =\ np.ones(10,\ dtype=my\_dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08591}08591\ \ \ \ \ descr\_t\ =\ np.dtype(a.\_\_array\_interface\_\_[\textcolor{stringliteral}{'descr'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08592}08592\ \ \ \ \ typestr\_t\ =\ np.dtype(a.\_\_array\_interface\_\_[\textcolor{stringliteral}{'typestr'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08593}08593\ \ \ \ \ assert\_equal(descr\_t.itemsize,\ typestr\_t.itemsize)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08594}08594\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08595}08595\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08596}08596\ \textcolor{keyword}{def\ }test\_array\_interface\_empty\_shape():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08597}08597\ \ \ \ \ \textcolor{comment}{\#\ See\ gh-\/7994}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08598}08598\ \ \ \ \ arr\ =\ np.array([1,\ 2,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08599}08599\ \ \ \ \ interface1\ =\ dict(arr.\_\_array\_interface\_\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08600}08600\ \ \ \ \ interface1[\textcolor{stringliteral}{'shape'}]\ =\ ()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08601}08601\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08602}08602\ \ \ \ \ \textcolor{keyword}{class\ }DummyArray1:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08603}08603\ \ \ \ \ \ \ \ \ \_\_array\_interface\_\_\ =\ interface1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08604}08604\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08605}08605\ \ \ \ \ \textcolor{comment}{\#\ NOTE:\ Because\ Py2\ str/Py3\ bytes\ supports\ the\ buffer\ interface,\ setting}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08606}08606\ \ \ \ \ \textcolor{comment}{\#\ the\ interface\ data\ to\ bytes\ would\ invoke\ the\ bug\ this\ tests\ for,\ that}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08607}08607\ \ \ \ \ \textcolor{comment}{\#\ \_\_array\_interface\_\_\ with\ shape=()\ is\ not\ allowed\ if\ the\ data\ is\ an\ object}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08608}08608\ \ \ \ \ \textcolor{comment}{\#\ exposing\ the\ buffer\ interface}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08609}08609\ \ \ \ \ interface2\ =\ dict(interface1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08610}08610\ \ \ \ \ interface2[\textcolor{stringliteral}{'data'}]\ =\ arr[0].tobytes()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08611}08611\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08612}08612\ \ \ \ \ \textcolor{keyword}{class\ }DummyArray2:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08613}08613\ \ \ \ \ \ \ \ \ \_\_array\_interface\_\_\ =\ interface2}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08614}08614\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08615}08615\ \ \ \ \ arr1\ =\ np.asarray(DummyArray1())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08616}08616\ \ \ \ \ arr2\ =\ np.asarray(DummyArray2())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08617}08617\ \ \ \ \ arr3\ =\ arr[:1].\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08618}08618\ \ \ \ \ assert\_equal(arr1,\ arr2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08619}08619\ \ \ \ \ assert\_equal(arr1,\ arr3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08620}08620\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08621}08621\ \textcolor{keyword}{def\ }test\_array\_interface\_offset():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08622}08622\ \ \ \ \ arr\ =\ np.array([1,\ 2,\ 3],\ dtype=\textcolor{stringliteral}{'int32'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08623}08623\ \ \ \ \ interface\ =\ dict(arr.\_\_array\_interface\_\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08624}08624\ \ \ \ \ interface[\textcolor{stringliteral}{'data'}]\ =\ memoryview(arr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08625}08625\ \ \ \ \ interface[\textcolor{stringliteral}{'shape'}]\ =\ (2,)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08626}08626\ \ \ \ \ interface[\textcolor{stringliteral}{'offset'}]\ =\ 4}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08627}08627\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08628}08628\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08629}08629\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1lib_1_1stride__tricks_1_1DummyArray}{DummyArray}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08630}08630\ \ \ \ \ \ \ \ \ \_\_array\_interface\_\_\ =\ interface}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08631}08631\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08632}08632\ \ \ \ \ arr1\ =\ np.asarray(\mbox{\hyperlink{classnumpy_1_1lib_1_1stride__tricks_1_1DummyArray}{DummyArray}}())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08633}08633\ \ \ \ \ assert\_equal(arr1,\ arr[1:])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08634}08634\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08635}08635\ \textcolor{keyword}{def\ }test\_array\_interface\_unicode\_typestr():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08636}08636\ \ \ \ \ arr\ =\ np.array([1,\ 2,\ 3],\ dtype=\textcolor{stringliteral}{'int32'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08637}08637\ \ \ \ \ interface\ =\ dict(arr.\_\_array\_interface\_\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08638}08638\ \ \ \ \ interface[\textcolor{stringliteral}{'typestr'}]\ =\ \textcolor{stringliteral}{'\(\backslash\)N\{check\ mark\}'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08639}08639\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08640}08640\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1lib_1_1stride__tricks_1_1DummyArray}{DummyArray}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08641}08641\ \ \ \ \ \ \ \ \ \_\_array\_interface\_\_\ =\ interface}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08642}08642\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08643}08643\ \ \ \ \ \textcolor{comment}{\#\ should\ not\ be\ UnicodeEncodeError}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08644}08644\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08645}08645\ \ \ \ \ \ \ \ \ np.asarray(\mbox{\hyperlink{classnumpy_1_1lib_1_1stride__tricks_1_1DummyArray}{DummyArray}}())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08646}08646\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08647}08647\ \textcolor{keyword}{def\ }test\_flat\_element\_deletion():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08648}08648\ \ \ \ \ it\ =\ np.ones(3).flat}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08649}08649\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08650}08650\ \ \ \ \ \ \ \ \ del\ it[1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08651}08651\ \ \ \ \ \ \ \ \ del\ it[1:2]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08652}08652\ \ \ \ \ \textcolor{keywordflow}{except}\ TypeError:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08653}08653\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08654}08654\ \ \ \ \ \textcolor{keywordflow}{except}\ Exception:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08655}08655\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ AssertionError}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08656}08656\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08657}08657\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08658}08658\ \textcolor{keyword}{def\ }test\_scalar\_element\_deletion():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08659}08659\ \ \ \ \ a\ =\ np.zeros(2,\ dtype=[(\textcolor{stringliteral}{'x'},\ \textcolor{stringliteral}{'int'}),\ (\textcolor{stringliteral}{'y'},\ \textcolor{stringliteral}{'int'})])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08660}08660\ \ \ \ \ assert\_raises(ValueError,\ a[0].\_\_delitem\_\_,\ \textcolor{stringliteral}{'x'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08661}08661\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08662}08662\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08663}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMapIter}{08663}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestMapIter}{TestMapIter}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08664}08664\ \ \ \ \ \textcolor{keyword}{def\ }test\_mapiter(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08665}08665\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ actual\ tests\ are\ within\ the\ C\ code\ in}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08666}08666\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ multiarray/\_multiarray\_tests.c.src}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08667}08667\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08668}08668\ \ \ \ \ \ \ \ \ a\ =\ np.arange(12).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}((3,\ 4)).astype(float)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08669}08669\ \ \ \ \ \ \ \ \ index\ =\ ([1,\ 1,\ 2,\ 0],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08670}08670\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [0,\ 0,\ 2,\ 3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08671}08671\ \ \ \ \ \ \ \ \ vals\ =\ [50,\ 50,\ 30,\ 16]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08672}08672\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08673}08673\ \ \ \ \ \ \ \ \ \_multiarray\_tests.test\_inplace\_increment(a,\ index,\ vals)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08674}08674\ \ \ \ \ \ \ \ \ assert\_equal(a,\ [[0.00,\ 1.,\ 2.0,\ 19.],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08675}08675\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [104.,\ 5.,\ 6.0,\ 7.0],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08676}08676\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [8.00,\ 9.,\ 40.,\ 11.]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08677}08677\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08678}08678\ \ \ \ \ \ \ \ \ b\ =\ np.arange(6).astype(float)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08679}08679\ \ \ \ \ \ \ \ \ index\ =\ (np.array([1,\ 2,\ 0]),)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08680}08680\ \ \ \ \ \ \ \ \ vals\ =\ [50,\ 4,\ 100.1]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08681}08681\ \ \ \ \ \ \ \ \ \_multiarray\_tests.test\_inplace\_increment(b,\ index,\ vals)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08682}08682\ \ \ \ \ \ \ \ \ assert\_equal(b,\ [100.1,\ \ 51.,\ \ \ 6.,\ \ \ 3.,\ \ \ 4.,\ \ \ 5.])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08683}08683\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08684}08684\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08685}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAsCArray}{08685}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAsCArray}{TestAsCArray}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08686}08686\ \ \ \ \ \textcolor{keyword}{def\ }test\_1darray(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08687}08687\ \ \ \ \ \ \ \ \ array\ =\ np.arange(24,\ dtype=np.double)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08688}08688\ \ \ \ \ \ \ \ \ from\_c\ =\ \_multiarray\_tests.test\_as\_c\_array(array,\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08689}08689\ \ \ \ \ \ \ \ \ assert\_equal(array[3],\ from\_c)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08690}08690\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08691}08691\ \ \ \ \ \textcolor{keyword}{def\ }test\_2darray(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08692}08692\ \ \ \ \ \ \ \ \ array\ =\ np.arange(24,\ dtype=np.double).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(3,\ 8)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08693}08693\ \ \ \ \ \ \ \ \ from\_c\ =\ \_multiarray\_tests.test\_as\_c\_array(array,\ 2,\ 4)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08694}08694\ \ \ \ \ \ \ \ \ assert\_equal(array[2,\ 4],\ from\_c)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08695}08695\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08696}08696\ \ \ \ \ \textcolor{keyword}{def\ }test\_3darray(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08697}08697\ \ \ \ \ \ \ \ \ array\ =\ np.arange(24,\ dtype=np.double).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,\ 3,\ 4)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08698}08698\ \ \ \ \ \ \ \ \ from\_c\ =\ \_multiarray\_tests.test\_as\_c\_array(array,\ 1,\ 2,\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08699}08699\ \ \ \ \ \ \ \ \ assert\_equal(array[1,\ 2,\ 3],\ from\_c)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08700}08700\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08701}08701\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08702}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestConversion}{08702}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestConversion}{TestConversion}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08703}08703\ \ \ \ \ \textcolor{keyword}{def\ }test\_array\_scalar\_relational\_operation(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08704}08704\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ All\ integer}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08705}08705\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt1\ \textcolor{keywordflow}{in}\ np.typecodes[\textcolor{stringliteral}{'AllInteger'}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08706}08706\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(1\ >\ np.array(0,\ dtype=dt1),\ \textcolor{stringliteral}{"{}type\ \%s\ failed"{}}\ \%\ (dt1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08707}08707\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ 1\ <\ np.array(0,\ dtype=dt1),\ \textcolor{stringliteral}{"{}type\ \%s\ failed"{}}\ \%\ (dt1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08708}08708\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08709}08709\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt2\ \textcolor{keywordflow}{in}\ np.typecodes[\textcolor{stringliteral}{'AllInteger'}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08710}08710\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.array(1,\ dtype=dt1)\ >\ np.array(0,\ dtype=dt2),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08711}08711\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}type\ \%s\ and\ \%s\ failed"{}}\ \%\ (dt1,\ dt2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08712}08712\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ np.array(1,\ dtype=dt1)\ <\ np.array(0,\ dtype=dt2),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08713}08713\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}type\ \%s\ and\ \%s\ failed"{}}\ \%\ (dt1,\ dt2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08714}08714\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08715}08715\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Unsigned\ integers}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08716}08716\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt1\ \textcolor{keywordflow}{in}\ \textcolor{stringliteral}{'BHILQP'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08717}08717\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(-\/1\ <\ np.array(1,\ dtype=dt1),\ \textcolor{stringliteral}{"{}type\ \%s\ failed"{}}\ \%\ (dt1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08718}08718\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ -\/1\ >\ np.array(1,\ dtype=dt1),\ \textcolor{stringliteral}{"{}type\ \%s\ failed"{}}\ \%\ (dt1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08719}08719\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(-\/1\ !=\ np.array(1,\ dtype=dt1),\ \textcolor{stringliteral}{"{}type\ \%s\ failed"{}}\ \%\ (dt1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08720}08720\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08721}08721\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Unsigned\ vs\ signed}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08722}08722\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt2\ \textcolor{keywordflow}{in}\ \textcolor{stringliteral}{'bhilqp'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08723}08723\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.array(1,\ dtype=dt1)\ >\ np.array(-\/1,\ dtype=dt2),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08724}08724\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}type\ \%s\ and\ \%s\ failed"{}}\ \%\ (dt1,\ dt2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08725}08725\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ np.array(1,\ dtype=dt1)\ <\ np.array(-\/1,\ dtype=dt2),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08726}08726\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}type\ \%s\ and\ \%s\ failed"{}}\ \%\ (dt1,\ dt2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08727}08727\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.array(1,\ dtype=dt1)\ !=\ np.array(-\/1,\ dtype=dt2),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08728}08728\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}type\ \%s\ and\ \%s\ failed"{}}\ \%\ (dt1,\ dt2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08729}08729\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08730}08730\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Signed\ integers\ and\ floats}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08731}08731\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt1\ \textcolor{keywordflow}{in}\ \textcolor{stringliteral}{'bhlqp'}\ +\ np.typecodes[\textcolor{stringliteral}{'Float'}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08732}08732\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(1\ >\ np.array(-\/1,\ dtype=dt1),\ \textcolor{stringliteral}{"{}type\ \%s\ failed"{}}\ \%\ (dt1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08733}08733\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ 1\ <\ np.array(-\/1,\ dtype=dt1),\ \textcolor{stringliteral}{"{}type\ \%s\ failed"{}}\ \%\ (dt1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08734}08734\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(-\/1\ ==\ np.array(-\/1,\ dtype=dt1),\ \textcolor{stringliteral}{"{}type\ \%s\ failed"{}}\ \%\ (dt1,))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08735}08735\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08736}08736\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt2\ \textcolor{keywordflow}{in}\ \textcolor{stringliteral}{'bhlqp'}\ +\ np.typecodes[\textcolor{stringliteral}{'Float'}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08737}08737\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.array(1,\ dtype=dt1)\ >\ np.array(-\/1,\ dtype=dt2),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08738}08738\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}type\ \%s\ and\ \%s\ failed"{}}\ \%\ (dt1,\ dt2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08739}08739\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ np.array(1,\ dtype=dt1)\ <\ np.array(-\/1,\ dtype=dt2),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08740}08740\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}type\ \%s\ and\ \%s\ failed"{}}\ \%\ (dt1,\ dt2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08741}08741\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(np.array(-\/1,\ dtype=dt1)\ ==\ np.array(-\/1,\ dtype=dt2),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08742}08742\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}type\ \%s\ and\ \%s\ failed"{}}\ \%\ (dt1,\ dt2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08743}08743\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08744}08744\ \ \ \ \ \textcolor{keyword}{def\ }test\_to\_bool\_scalar(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08745}08745\ \ \ \ \ \ \ \ \ assert\_equal(bool(np.array([\textcolor{keyword}{False}])),\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08746}08746\ \ \ \ \ \ \ \ \ assert\_equal(bool(np.array([\textcolor{keyword}{True}])),\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08747}08747\ \ \ \ \ \ \ \ \ assert\_equal(bool(np.array([[42]])),\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08748}08748\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ bool,\ np.array([1,\ 2]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08749}08749\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08750}08750\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }NotConvertible:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08751}08751\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_bool\_\_(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08752}08752\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ NotImplementedError}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08753}08753\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08754}08754\ \ \ \ \ \ \ \ \ assert\_raises(NotImplementedError,\ bool,\ np.array(NotConvertible()))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08755}08755\ \ \ \ \ \ \ \ \ assert\_raises(NotImplementedError,\ bool,\ np.array([NotConvertible()]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08756}08756\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ IS\_PYSTON:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08757}08757\ \ \ \ \ \ \ \ \ \ \ \ \ pytest.skip(\textcolor{stringliteral}{"{}Pyston\ disables\ recursion\ checking"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08758}08758\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08759}08759\ \ \ \ \ \ \ \ \ self\_containing\ =\ np.array([\textcolor{keywordtype}{None}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08760}08760\ \ \ \ \ \ \ \ \ self\_containing[0]\ =\ self\_containing}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08761}08761\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08762}08762\ \ \ \ \ \ \ \ \ Error\ =\ RecursionError}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08763}08763\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08764}08764\ \ \ \ \ \ \ \ \ assert\_raises(Error,\ bool,\ self\_containing)\ \ \textcolor{comment}{\#\ previously\ stack\ overflow}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08765}08765\ \ \ \ \ \ \ \ \ self\_containing[0]\ =\ \textcolor{keywordtype}{None}\ \ \textcolor{comment}{\#\ resolve\ circular\ reference}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08766}08766\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08767}08767\ \ \ \ \ \textcolor{keyword}{def\ }test\_to\_int\_scalar(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08768}08768\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/9972\ means\ that\ these\ aren't\ always\ the\ same}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08769}08769\ \ \ \ \ \ \ \ \ int\_funcs\ =\ (int,\ \textcolor{keyword}{lambda}\ x:\ x.\_\_int\_\_())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08770}08770\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ int\_func\ \textcolor{keywordflow}{in}\ int\_funcs:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08771}08771\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(int\_func(np.array(0)),\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08772}08772\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_warns(DeprecationWarning):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08773}08773\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(int\_func(np.array([1])),\ 1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08774}08774\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_warns(DeprecationWarning):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08775}08775\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(int\_func(np.array([[42]])),\ 42)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08776}08776\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ int\_func,\ np.array([1,\ 2]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08777}08777\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08778}08778\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/9972}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08779}08779\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(4,\ int\_func(np.array(\textcolor{stringliteral}{'4'})))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08780}08780\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(5,\ int\_func(np.bytes\_(b\textcolor{stringliteral}{'5'})))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08781}08781\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(6,\ int\_func(np.str\_(\textcolor{stringliteral}{'6'})))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08782}08782\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08783}08783\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ delegation\ of\ int()\ to\ \_\_trunc\_\_\ was\ deprecated\ in}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08784}08784\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Python\ 3.11.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08785}08785\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ sys.version\_info\ <\ (3,\ 11):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08786}08786\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }HasTrunc:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08787}08787\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_trunc\_\_(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08788}08788\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 3}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08789}08789\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(3,\ int\_func(np.array(HasTrunc())))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08790}08790\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_warns(DeprecationWarning):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08791}08791\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(3,\ int\_func(np.array([HasTrunc()])))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08792}08792\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08793}08793\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08794}08794\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08795}08795\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }NotConvertible:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08796}08796\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_int\_\_(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08797}08797\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ NotImplementedError}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08798}08798\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(NotImplementedError,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08799}08799\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ int\_func,\ np.array(NotConvertible()))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08800}08800\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_warns(DeprecationWarning):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08801}08801\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(NotImplementedError,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08802}08802\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ int\_func,\ np.array([NotConvertible()]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08803}08803\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08804}08804\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08805}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestWhere}{08805}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestWhere}{TestWhere}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08806}08806\ \ \ \ \ \textcolor{keyword}{def\ }test\_basic(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08807}08807\ \ \ \ \ \ \ \ \ dts\ =\ [bool,\ np.int16,\ np.int32,\ np.int64,\ np.double,\ np.complex128,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08808}08808\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.longdouble,\ np.clongdouble]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08809}08809\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ dts:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08810}08810\ \ \ \ \ \ \ \ \ \ \ \ \ c\ =\ np.ones(53,\ dtype=bool)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08811}08811\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.where(\ c,\ dt(0),\ dt(1)),\ dt(0))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08812}08812\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.where(\string~c,\ dt(0),\ dt(1)),\ dt(1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08813}08813\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.where(\textcolor{keyword}{True},\ dt(0),\ dt(1)),\ dt(0))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08814}08814\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.where(\textcolor{keyword}{False},\ dt(0),\ dt(1)),\ dt(1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08815}08815\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.ones\_like(c).astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08816}08816\ \ \ \ \ \ \ \ \ \ \ \ \ e\ =\ np.zeros\_like(d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08817}08817\ \ \ \ \ \ \ \ \ \ \ \ \ r\ =\ d.astype(dt)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08818}08818\ \ \ \ \ \ \ \ \ \ \ \ \ c[7]\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08819}08819\ \ \ \ \ \ \ \ \ \ \ \ \ r[7]\ =\ e[7]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08820}08820\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.where(c,\ e,\ e),\ e)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08821}08821\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.where(c,\ d,\ e),\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08822}08822\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.where(c,\ d,\ e[0]),\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08823}08823\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.where(c,\ d[0],\ e),\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08824}08824\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.where(c[::2],\ d[::2],\ e[::2]),\ r[::2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08825}08825\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.where(c[1::2],\ d[1::2],\ e[1::2]),\ r[1::2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08826}08826\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.where(c[::3],\ d[::3],\ e[::3]),\ r[::3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08827}08827\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.where(c[1::3],\ d[1::3],\ e[1::3]),\ r[1::3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08828}08828\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.where(c[::-\/2],\ d[::-\/2],\ e[::-\/2]),\ r[::-\/2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08829}08829\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.where(c[::-\/3],\ d[::-\/3],\ e[::-\/3]),\ r[::-\/3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08830}08830\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(np.where(c[1::-\/3],\ d[1::-\/3],\ e[1::-\/3]),\ r[1::-\/3])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08831}08831\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08832}08832\ \ \ \ \ \textcolor{keyword}{def\ }test\_exotic(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08833}08833\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ object}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08834}08834\ \ \ \ \ \ \ \ \ assert\_array\_equal(np.where(\textcolor{keyword}{True},\ \textcolor{keywordtype}{None},\ \textcolor{keywordtype}{None}),\ np.array(\textcolor{keywordtype}{None}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08835}08835\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ zero\ sized}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08836}08836\ \ \ \ \ \ \ \ \ m\ =\ np.array([],\ dtype=bool).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(0,\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08837}08837\ \ \ \ \ \ \ \ \ b\ =\ np.array([],\ dtype=np.float64).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(0,\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08838}08838\ \ \ \ \ \ \ \ \ assert\_array\_equal(np.where(m,\ 0,\ b),\ np.array([]).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(0,\ 3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08839}08839\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08840}08840\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ object\ cast}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08841}08841\ \ \ \ \ \ \ \ \ d\ =\ np.array([-\/1.34,\ -\/0.16,\ -\/0.54,\ -\/0.31,\ -\/0.08,\ -\/0.95,\ 0.000,\ 0.313,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08842}08842\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0.547,\ -\/0.18,\ 0.876,\ 0.236,\ 1.969,\ 0.310,\ 0.699,\ 1.013,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08843}08843\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 1.267,\ 0.229,\ -\/1.39,\ 0.487])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08844}08844\ \ \ \ \ \ \ \ \ nan\ =\ float(\textcolor{stringliteral}{'NaN'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08845}08845\ \ \ \ \ \ \ \ \ e\ =\ np.array([\textcolor{stringliteral}{'5z'},\ \textcolor{stringliteral}{'0l'},\ nan,\ \textcolor{stringliteral}{'Wz'},\ nan,\ nan,\ \textcolor{stringliteral}{'Xq'},\ \textcolor{stringliteral}{'cs'},\ nan,\ nan,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08846}08846\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'QN'},\ nan,\ nan,\ \textcolor{stringliteral}{'Fd'},\ nan,\ nan,\ \textcolor{stringliteral}{'kp'},\ nan,\ \textcolor{stringliteral}{'36'},\ \textcolor{stringliteral}{'i1'}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08847}08847\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08848}08848\ \ \ \ \ \ \ \ \ m\ =\ np.array([0,\ 0,\ 1,\ 0,\ 1,\ 1,\ 0,\ 0,\ 1,\ 1,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08849}08849\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0,\ 1,\ 1,\ 0,\ 1,\ 1,\ 0,\ 1,\ 0,\ 0],\ dtype=bool)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08850}08850\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08851}08851\ \ \ \ \ \ \ \ \ r\ =\ e[:]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08852}08852\ \ \ \ \ \ \ \ \ r[np.where(m)]\ =\ d[np.where(m)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08853}08853\ \ \ \ \ \ \ \ \ assert\_array\_equal(np.where(m,\ d,\ e),\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08854}08854\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08855}08855\ \ \ \ \ \ \ \ \ r\ =\ e[:]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08856}08856\ \ \ \ \ \ \ \ \ r[np.where(\string~m)]\ =\ d[np.where(\string~m)]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08857}08857\ \ \ \ \ \ \ \ \ assert\_array\_equal(np.where(m,\ e,\ d),\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08858}08858\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08859}08859\ \ \ \ \ \ \ \ \ assert\_array\_equal(np.where(m,\ e,\ e),\ e)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08860}08860\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08861}08861\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ minimal\ dtype\ result\ with\ NaN\ scalar\ (e.g\ required\ by\ pandas)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08862}08862\ \ \ \ \ \ \ \ \ d\ =\ np.array([1.,\ 2.],\ dtype=np.float32)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08863}08863\ \ \ \ \ \ \ \ \ e\ =\ float(\textcolor{stringliteral}{'NaN'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08864}08864\ \ \ \ \ \ \ \ \ assert\_equal(np.where(\textcolor{keyword}{True},\ d,\ e).dtype,\ np.float32)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08865}08865\ \ \ \ \ \ \ \ \ e\ =\ float(\textcolor{stringliteral}{'Infinity'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08866}08866\ \ \ \ \ \ \ \ \ assert\_equal(np.where(\textcolor{keyword}{True},\ d,\ e).dtype,\ np.float32)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08867}08867\ \ \ \ \ \ \ \ \ e\ =\ float(\textcolor{stringliteral}{'-\/Infinity'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08868}08868\ \ \ \ \ \ \ \ \ assert\_equal(np.where(\textcolor{keyword}{True},\ d,\ e).dtype,\ np.float32)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08869}08869\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ also\ check\ upcast}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08870}08870\ \ \ \ \ \ \ \ \ e\ =\ float(1e150)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08871}08871\ \ \ \ \ \ \ \ \ assert\_equal(np.where(\textcolor{keyword}{True},\ d,\ e).dtype,\ np.float64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08872}08872\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08873}08873\ \ \ \ \ \textcolor{keyword}{def\ }test\_ndim(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08874}08874\ \ \ \ \ \ \ \ \ c\ =\ [\textcolor{keyword}{True},\ \textcolor{keyword}{False}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08875}08875\ \ \ \ \ \ \ \ \ a\ =\ np.zeros((2,\ 25))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08876}08876\ \ \ \ \ \ \ \ \ b\ =\ np.ones((2,\ 25))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08877}08877\ \ \ \ \ \ \ \ \ r\ =\ np.where(np.array(c)[:,np.newaxis],\ a,\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08878}08878\ \ \ \ \ \ \ \ \ assert\_array\_equal(r[0],\ a[0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08879}08879\ \ \ \ \ \ \ \ \ assert\_array\_equal(r[1],\ b[0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08880}08880\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08881}08881\ \ \ \ \ \ \ \ \ a\ =\ a.T}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08882}08882\ \ \ \ \ \ \ \ \ b\ =\ b.T}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08883}08883\ \ \ \ \ \ \ \ \ r\ =\ np.where(c,\ a,\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08884}08884\ \ \ \ \ \ \ \ \ assert\_array\_equal(r[:,0],\ a[:,0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08885}08885\ \ \ \ \ \ \ \ \ assert\_array\_equal(r[:,1],\ b[:,0])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08886}08886\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08887}08887\ \ \ \ \ \textcolor{keyword}{def\ }test\_dtype\_mix(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08888}08888\ \ \ \ \ \ \ \ \ c\ =\ np.array([\textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08889}08889\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08890}08890\ \ \ \ \ \ \ \ \ a\ =\ np.uint32(1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08891}08891\ \ \ \ \ \ \ \ \ b\ =\ np.array([5.,\ 0.,\ 3.,\ 2.,\ -\/1.,\ -\/4.,\ 0.,\ -\/10.,\ 10.,\ 1.,\ 0.,\ 3.],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08892}08892\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=np.float64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08893}08893\ \ \ \ \ \ \ \ \ r\ =\ np.array([5.,\ 1.,\ 3.,\ 2.,\ -\/1.,\ -\/4.,\ 1.,\ -\/10.,\ 10.,\ 1.,\ 1.,\ 3.],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08894}08894\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=np.float64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08895}08895\ \ \ \ \ \ \ \ \ assert\_equal(np.where(c,\ a,\ b),\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08896}08896\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08897}08897\ \ \ \ \ \ \ \ \ a\ =\ a.astype(np.float32)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08898}08898\ \ \ \ \ \ \ \ \ b\ =\ b.astype(np.int64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08899}08899\ \ \ \ \ \ \ \ \ assert\_equal(np.where(c,\ a,\ b),\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08900}08900\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08901}08901\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ non\ bool\ mask}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08902}08902\ \ \ \ \ \ \ \ \ c\ =\ c.astype(int)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08903}08903\ \ \ \ \ \ \ \ \ c[c\ !=\ 0]\ =\ 34242324}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08904}08904\ \ \ \ \ \ \ \ \ assert\_equal(np.where(c,\ a,\ b),\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08905}08905\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ invert}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08906}08906\ \ \ \ \ \ \ \ \ tmpmask\ =\ c\ !=\ 0}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08907}08907\ \ \ \ \ \ \ \ \ c[c\ ==\ 0]\ =\ 41247212}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08908}08908\ \ \ \ \ \ \ \ \ c[tmpmask]\ =\ 0}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08909}08909\ \ \ \ \ \ \ \ \ assert\_equal(np.where(c,\ b,\ a),\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08910}08910\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08911}08911\ \ \ \ \ \textcolor{keyword}{def\ }test\_foreign(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08912}08912\ \ \ \ \ \ \ \ \ c\ =\ np.array([\textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08913}08913\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{False},\ \textcolor{keyword}{False},\ \textcolor{keyword}{True},\ \textcolor{keyword}{False}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08914}08914\ \ \ \ \ \ \ \ \ r\ =\ np.array([5.,\ 1.,\ 3.,\ 2.,\ -\/1.,\ -\/4.,\ 1.,\ -\/10.,\ 10.,\ 1.,\ 1.,\ 3.],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08915}08915\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=np.float64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08916}08916\ \ \ \ \ \ \ \ \ a\ =\ np.ones(1,\ dtype=\textcolor{stringliteral}{'>i4'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08917}08917\ \ \ \ \ \ \ \ \ b\ =\ np.array([5.,\ 0.,\ 3.,\ 2.,\ -\/1.,\ -\/4.,\ 0.,\ -\/10.,\ 10.,\ 1.,\ 0.,\ 3.],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08918}08918\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dtype=np.float64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08919}08919\ \ \ \ \ \ \ \ \ assert\_equal(np.where(c,\ a,\ b),\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08920}08920\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08921}08921\ \ \ \ \ \ \ \ \ b\ =\ b.astype(\textcolor{stringliteral}{'>f8'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08922}08922\ \ \ \ \ \ \ \ \ assert\_equal(np.where(c,\ a,\ b),\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08923}08923\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08924}08924\ \ \ \ \ \ \ \ \ a\ =\ a.astype(\textcolor{stringliteral}{'<i4'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08925}08925\ \ \ \ \ \ \ \ \ assert\_equal(np.where(c,\ a,\ b),\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08926}08926\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08927}08927\ \ \ \ \ \ \ \ \ c\ =\ c.astype(\textcolor{stringliteral}{'>i4'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08928}08928\ \ \ \ \ \ \ \ \ assert\_equal(np.where(c,\ a,\ b),\ r)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08929}08929\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08930}08930\ \ \ \ \ \textcolor{keyword}{def\ }test\_error(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08931}08931\ \ \ \ \ \ \ \ \ c\ =\ [\textcolor{keyword}{True},\ \textcolor{keyword}{True}]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08932}08932\ \ \ \ \ \ \ \ \ a\ =\ np.ones((4,\ 5))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08933}08933\ \ \ \ \ \ \ \ \ b\ =\ np.ones((5,\ 5))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08934}08934\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.where,\ c,\ a,\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08935}08935\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.where,\ c[0],\ a,\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08936}08936\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08937}08937\ \ \ \ \ \textcolor{keyword}{def\ }test\_string(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08938}08938\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/4778\ check\ strings\ are\ properly\ filled\ with\ nulls}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08939}08939\ \ \ \ \ \ \ \ \ a\ =\ np.array(\textcolor{stringliteral}{"{}abc"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08940}08940\ \ \ \ \ \ \ \ \ b\ =\ np.array(\textcolor{stringliteral}{"{}x"{}}\ *\ 753)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08941}08941\ \ \ \ \ \ \ \ \ assert\_equal(np.where(\textcolor{keyword}{True},\ a,\ b),\ \textcolor{stringliteral}{"{}abc"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08942}08942\ \ \ \ \ \ \ \ \ assert\_equal(np.where(\textcolor{keyword}{False},\ b,\ a),\ \textcolor{stringliteral}{"{}abc"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08943}08943\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08944}08944\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ check\ native\ datatype\ sized\ strings}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08945}08945\ \ \ \ \ \ \ \ \ a\ =\ np.array(\textcolor{stringliteral}{"{}abcd"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08946}08946\ \ \ \ \ \ \ \ \ b\ =\ np.array(\textcolor{stringliteral}{"{}x"{}}\ *\ 8)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08947}08947\ \ \ \ \ \ \ \ \ assert\_equal(np.where(\textcolor{keyword}{True},\ a,\ b),\ \textcolor{stringliteral}{"{}abcd"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08948}08948\ \ \ \ \ \ \ \ \ assert\_equal(np.where(\textcolor{keyword}{False},\ b,\ a),\ \textcolor{stringliteral}{"{}abcd"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08949}08949\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08950}08950\ \ \ \ \ \textcolor{keyword}{def\ }test\_empty\_result(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08951}08951\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ pass\ empty\ where\ result\ through\ an\ assignment\ which\ reads\ the\ data\ of}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08952}08952\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ empty\ arrays,\ error\ detectable\ with\ valgrind,\ see\ gh-\/8922}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08953}08953\ \ \ \ \ \ \ \ \ x\ =\ np.zeros((1,\ 1))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08954}08954\ \ \ \ \ \ \ \ \ ibad\ =\ np.vstack(np.where(x\ ==\ 99.))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08955}08955\ \ \ \ \ \ \ \ \ assert\_array\_equal(ibad,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08956}08956\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.atleast\_2d(np.array([[],[]],\ dtype=np.intp)))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08957}08957\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08958}08958\ \ \ \ \ \textcolor{keyword}{def\ }test\_largedim(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08959}08959\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ invalid\ read\ regression\ gh-\/9304}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08960}08960\ \ \ \ \ \ \ \ \ shape\ =\ [10,\ 2,\ 3,\ 4,\ 5,\ 6]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08961}08961\ \ \ \ \ \ \ \ \ np.random.seed(2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08962}08962\ \ \ \ \ \ \ \ \ array\ =\ np.random.rand(*shape)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08963}08963\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08964}08964\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(10):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08965}08965\ \ \ \ \ \ \ \ \ \ \ \ \ benchmark\ =\ array.nonzero()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08966}08966\ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ array.nonzero()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08967}08967\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_array\_equal(benchmark,\ result)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08968}08968\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08969}08969\ \ \ \ \ \textcolor{keyword}{def\ }test\_kwargs(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08970}08970\ \ \ \ \ \ \ \ \ a\ =\ np.zeros(1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08971}08971\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_raises(TypeError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08972}08972\ \ \ \ \ \ \ \ \ \ \ \ \ np.where(a,\ x=a,\ y=a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08973}08973\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08974}08974\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08975}08975\ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ IS\_PYPY:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08976}08976\ \ \ \ \ \textcolor{comment}{\#\ sys.getsizeof()\ is\ not\ valid\ on\ PyPy}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08977}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestSizeOf}{08977}}\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestSizeOf}{TestSizeOf}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08978}08978\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08979}08979\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }test\_empty\_array(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08980}08980\ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ np.array([])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08981}08981\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(sys.getsizeof(x)\ >\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08982}08982\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08983}08983\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }check\_array(self,\ dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08984}08984\ \ \ \ \ \ \ \ \ \ \ \ \ elem\_size\ =\ \mbox{\hyperlink{namespacedtype}{dtype}}(0).itemsize}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08985}08985\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08986}08986\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ length\ \textcolor{keywordflow}{in}\ [10,\ 50,\ 100,\ 500]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08987}08987\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ np.arange(length,\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08988}08988\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(sys.getsizeof(x)\ >\ length\ *\ elem\_size)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08989}08989\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08990}08990\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }test\_array\_int32(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08991}08991\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestSizeOf_ac949e1de5629d5c0397e997967a013ea}{check\_array}}(np.int32)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08992}08992\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08993}08993\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }test\_array\_int64(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08994}08994\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestSizeOf_ac949e1de5629d5c0397e997967a013ea}{check\_array}}(np.int64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08995}08995\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08996}08996\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }test\_array\_float32(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08997}08997\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestSizeOf_ac949e1de5629d5c0397e997967a013ea}{check\_array}}(np.float32)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08998}08998\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l08999}08999\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }test\_array\_float64(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09000}09000\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestSizeOf_ac949e1de5629d5c0397e997967a013ea}{check\_array}}(np.float64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09001}09001\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09002}09002\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }test\_view(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09003}09003\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.ones(100)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09004}09004\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(sys.getsizeof(d[...])\ <\ sys.getsizeof(d))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09005}09005\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09006}09006\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }test\_reshape(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09007}09007\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.ones(100)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09008}09008\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(sys.getsizeof(d)\ <\ sys.getsizeof(d.reshape(100,\ 1,\ 1).copy()))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09009}09009\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09010}09010\ \ \ \ \ \ \ \ \ \textcolor{preprocessor}{@\_no\_tracing}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09011}09011\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }test\_resize(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09012}09012\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.ones(100)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09013}09013\ \ \ \ \ \ \ \ \ \ \ \ \ old\ =\ sys.getsizeof(d)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09014}09014\ \ \ \ \ \ \ \ \ \ \ \ \ d.resize(50)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09015}09015\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(old\ >\ sys.getsizeof(d))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09016}09016\ \ \ \ \ \ \ \ \ \ \ \ \ d.resize(150)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09017}09017\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(old\ <\ sys.getsizeof(d))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09018}09018\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09019}09019\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }test\_error(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09020}09020\ \ \ \ \ \ \ \ \ \ \ \ \ d\ =\ np.ones(100)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09021}09021\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ d.\_\_sizeof\_\_,\ \textcolor{stringliteral}{"{}a"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09022}09022\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09023}09023\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09024}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestHashing}{09024}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestHashing}{TestHashing}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09025}09025\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09026}09026\ \ \ \ \ \textcolor{keyword}{def\ }test\_arrays\_not\_hashable(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09027}09027\ \ \ \ \ \ \ \ \ x\ =\ np.ones(3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09028}09028\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ hash,\ x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09029}09029\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09030}09030\ \ \ \ \ \textcolor{keyword}{def\ }test\_collections\_hashable(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09031}09031\ \ \ \ \ \ \ \ \ x\ =\ np.array([])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09032}09032\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ isinstance(x,\ collections.abc.Hashable))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09033}09033\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09034}09034\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09035}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayPriority}{09035}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayPriority}{TestArrayPriority}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09036}09036\ \ \ \ \ \textcolor{comment}{\#\ This\ will\ go\ away\ when\ \_\_array\_priority\_\_\ is\ settled,\ meanwhile}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09037}09037\ \ \ \ \ \textcolor{comment}{\#\ it\ serves\ to\ check\ unintended\ changes.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09038}09038\ \ \ \ \ op\ =\ operator}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09039}09039\ \ \ \ \ binary\_ops\ =\ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09040}09040\ \ \ \ \ \ \ \ \ op.pow,\ op.add,\ op.sub,\ op.mul,\ op.floordiv,\ op.truediv,\ op.mod,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09041}09041\ \ \ \ \ \ \ \ \ op.and\_,\ op.or\_,\ op.xor,\ op.lshift,\ op.rshift,\ op.mod,\ op.gt,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09042}09042\ \ \ \ \ \ \ \ \ op.ge,\ op.lt,\ op.le,\ op.ne,\ op.eq}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09043}09043\ \ \ \ \ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09044}09044\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09045}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayPriority_1_1Foo}{09045}}\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayPriority_1_1Foo}{Foo}}(np.ndarray):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09046}09046\ \ \ \ \ \ \ \ \ \_\_array\_priority\_\_\ =\ 100.}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09047}09047\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09048}09048\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_new\_\_(cls,\ *args,\ **kwargs):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09049}09049\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ np.array(*args,\ **kwargs).view(cls)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09050}09050\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09051}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayPriority_1_1Bar}{09051}}\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayPriority_1_1Bar}{Bar}}(np.ndarray):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09052}09052\ \ \ \ \ \ \ \ \ \_\_array\_priority\_\_\ =\ 101.}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09053}09053\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09054}09054\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_new\_\_(cls,\ *args,\ **kwargs):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09055}09055\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ np.array(*args,\ **kwargs).view(cls)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09056}09056\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09057}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayPriority_1_1Other}{09057}}\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayPriority_1_1Other}{Other}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09058}09058\ \ \ \ \ \ \ \ \ \_\_array\_priority\_\_\ =\ 1000.}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09059}09059\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09060}09060\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_all(self,\ other):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09061}09061\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self.\_\_class\_\_()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09062}09062\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09063}09063\ \ \ \ \ \ \ \ \ \_\_add\_\_\ =\ \_\_radd\_\_\ =\ \_all}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09064}09064\ \ \ \ \ \ \ \ \ \_\_sub\_\_\ =\ \_\_rsub\_\_\ =\ \_all}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09065}09065\ \ \ \ \ \ \ \ \ \_\_mul\_\_\ =\ \_\_rmul\_\_\ =\ \_all}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09066}09066\ \ \ \ \ \ \ \ \ \_\_pow\_\_\ =\ \_\_rpow\_\_\ =\ \_all}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09067}09067\ \ \ \ \ \ \ \ \ \_\_div\_\_\ =\ \_\_rdiv\_\_\ =\ \_all}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09068}09068\ \ \ \ \ \ \ \ \ \_\_mod\_\_\ =\ \_\_rmod\_\_\ =\ \_all}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09069}09069\ \ \ \ \ \ \ \ \ \_\_truediv\_\_\ =\ \_\_rtruediv\_\_\ =\ \_all}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09070}09070\ \ \ \ \ \ \ \ \ \_\_floordiv\_\_\ =\ \_\_rfloordiv\_\_\ =\ \_all}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09071}09071\ \ \ \ \ \ \ \ \ \_\_and\_\_\ =\ \_\_rand\_\_\ =\ \_all}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09072}09072\ \ \ \ \ \ \ \ \ \_\_xor\_\_\ =\ \_\_rxor\_\_\ =\ \_all}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09073}09073\ \ \ \ \ \ \ \ \ \_\_or\_\_\ =\ \_\_ror\_\_\ =\ \_all}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09074}09074\ \ \ \ \ \ \ \ \ \_\_lshift\_\_\ =\ \_\_rlshift\_\_\ =\ \_all}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09075}09075\ \ \ \ \ \ \ \ \ \_\_rshift\_\_\ =\ \_\_rrshift\_\_\ =\ \_all}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09076}09076\ \ \ \ \ \ \ \ \ \_\_eq\_\_\ =\ \_all}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09077}09077\ \ \ \ \ \ \ \ \ \_\_ne\_\_\ =\ \_all}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09078}09078\ \ \ \ \ \ \ \ \ \_\_gt\_\_\ =\ \_all}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09079}09079\ \ \ \ \ \ \ \ \ \_\_ge\_\_\ =\ \_all}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09080}09080\ \ \ \ \ \ \ \ \ \_\_lt\_\_\ =\ \_all}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09081}09081\ \ \ \ \ \ \ \ \ \_\_le\_\_\ =\ \_all}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09082}09082\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09083}09083\ \ \ \ \ \textcolor{keyword}{def\ }test\_ndarray\_subclass(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09084}09084\ \ \ \ \ \ \ \ \ a\ =\ np.array([1,\ 2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09085}09085\ \ \ \ \ \ \ \ \ b\ =\ self.Bar([1,\ 2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09086}09086\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ f\ \textcolor{keywordflow}{in}\ self.binary\_ops:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09087}09087\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ repr(f)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09088}09088\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(isinstance(f(a,\ b),\ self.Bar),\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09089}09089\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(isinstance(f(b,\ a),\ self.Bar),\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09090}09090\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09091}09091\ \ \ \ \ \textcolor{keyword}{def\ }test\_ndarray\_other(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09092}09092\ \ \ \ \ \ \ \ \ a\ =\ np.array([1,\ 2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09093}09093\ \ \ \ \ \ \ \ \ b\ =\ self.Other()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09094}09094\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ f\ \textcolor{keywordflow}{in}\ self.binary\_ops:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09095}09095\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ repr(f)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09096}09096\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(isinstance(f(a,\ b),\ self.Other),\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09097}09097\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(isinstance(f(b,\ a),\ self.Other),\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09098}09098\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09099}09099\ \ \ \ \ \textcolor{keyword}{def\ }test\_subclass\_subclass(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09100}09100\ \ \ \ \ \ \ \ \ a\ =\ self.Foo([1,\ 2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09101}09101\ \ \ \ \ \ \ \ \ b\ =\ self.Bar([1,\ 2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09102}09102\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ f\ \textcolor{keywordflow}{in}\ self.binary\_ops:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09103}09103\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ repr(f)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09104}09104\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(isinstance(f(a,\ b),\ self.Bar),\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09105}09105\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(isinstance(f(b,\ a),\ self.Bar),\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09106}09106\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09107}09107\ \ \ \ \ \textcolor{keyword}{def\ }test\_subclass\_other(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09108}09108\ \ \ \ \ \ \ \ \ a\ =\ self.Foo([1,\ 2])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09109}09109\ \ \ \ \ \ \ \ \ b\ =\ self.Other()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09110}09110\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ f\ \textcolor{keywordflow}{in}\ self.binary\_ops:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09111}09111\ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ repr(f)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09112}09112\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(isinstance(f(a,\ b),\ self.Other),\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09113}09113\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(isinstance(f(b,\ a),\ self.Other),\ msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09114}09114\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09115}09115\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09116}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestBytestringArrayNonzero}{09116}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestBytestringArrayNonzero}{TestBytestringArrayNonzero}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09117}09117\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09118}09118\ \ \ \ \ \textcolor{keyword}{def\ }test\_empty\_bstring\_array\_is\_falsey(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09119}09119\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ np.array([\textcolor{stringliteral}{''}],\ dtype=str))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09120}09120\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09121}09121\ \ \ \ \ \textcolor{keyword}{def\ }test\_whitespace\_bstring\_array\_is\_falsey(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09122}09122\ \ \ \ \ \ \ \ \ a\ =\ np.array([\textcolor{stringliteral}{'spam'}],\ dtype=str)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09123}09123\ \ \ \ \ \ \ \ \ a[0]\ =\ \textcolor{stringliteral}{'\ \ \(\backslash\)0\(\backslash\)0'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09124}09124\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09125}09125\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09126}09126\ \ \ \ \ \textcolor{keyword}{def\ }test\_all\_null\_bstring\_array\_is\_falsey(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09127}09127\ \ \ \ \ \ \ \ \ a\ =\ np.array([\textcolor{stringliteral}{'spam'}],\ dtype=str)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09128}09128\ \ \ \ \ \ \ \ \ a[0]\ =\ \textcolor{stringliteral}{'\(\backslash\)0\(\backslash\)0\(\backslash\)0\(\backslash\)0'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09129}09129\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09130}09130\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09131}09131\ \ \ \ \ \textcolor{keyword}{def\ }test\_null\_inside\_bstring\_array\_is\_truthy(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09132}09132\ \ \ \ \ \ \ \ \ a\ =\ np.array([\textcolor{stringliteral}{'spam'}],\ dtype=str)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09133}09133\ \ \ \ \ \ \ \ \ a[0]\ =\ \textcolor{stringliteral}{'\ \(\backslash\)0\ \(\backslash\)0'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09134}09134\ \ \ \ \ \ \ \ \ assert\_(a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09135}09135\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09136}09136\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09137}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestUnicodeEncoding}{09137}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestUnicodeEncoding}{TestUnicodeEncoding}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09138}09138\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09139}09139\ \textcolor{stringliteral}{\ \ \ \ Tests\ for\ encoding\ related\ bugs,\ such\ as\ UCS2\ vs\ UCS4,\ round-\/tripping}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09140}09140\ \textcolor{stringliteral}{\ \ \ \ issues,\ etc}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09141}09141\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09142}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestUnicodeEncoding_afee7c03c6d60dd905bb957f521d7af3e}{09142}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestUnicodeEncoding_afee7c03c6d60dd905bb957f521d7af3e}{test\_round\_trip}}(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09143}09143\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}\ Tests\ that\ GETITEM,\ SETITEM,\ and\ PyArray\_Scalar\ roundtrip\ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09144}09144\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/15363}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09145}09145\ \ \ \ \ \ \ \ \ arr\ =\ np.zeros(shape=(),\ dtype=\textcolor{stringliteral}{"{}U1"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09146}09146\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(1,\ sys.maxunicode\ +\ 1):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09147}09147\ \ \ \ \ \ \ \ \ \ \ \ \ expected\ =\ chr(i)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09148}09148\ \ \ \ \ \ \ \ \ \ \ \ \ arr[()]\ =\ expected}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09149}09149\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ arr[()]\ ==\ expected}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09150}09150\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ arr.item()\ ==\ expected}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09151}09151\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09152}09152\ \ \ \ \ \textcolor{keyword}{def\ }test\_assign\_scalar(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09153}09153\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/3258}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09154}09154\ \ \ \ \ \ \ \ \ l\ =\ np.array([\textcolor{stringliteral}{'aa'},\ \textcolor{stringliteral}{'bb'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09155}09155\ \ \ \ \ \ \ \ \ l[:]\ =\ np.str\_(\textcolor{stringliteral}{'cc'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09156}09156\ \ \ \ \ \ \ \ \ assert\_equal(l,\ [\textcolor{stringliteral}{'cc'},\ \textcolor{stringliteral}{'cc'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09157}09157\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09158}09158\ \ \ \ \ \textcolor{keyword}{def\ }test\_fill\_scalar(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09159}09159\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/7227}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09160}09160\ \ \ \ \ \ \ \ \ l\ =\ np.array([\textcolor{stringliteral}{'aa'},\ \textcolor{stringliteral}{'bb'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09161}09161\ \ \ \ \ \ \ \ \ l.fill(np.str\_(\textcolor{stringliteral}{'cc'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09162}09162\ \ \ \ \ \ \ \ \ assert\_equal(l,\ [\textcolor{stringliteral}{'cc'},\ \textcolor{stringliteral}{'cc'}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09163}09163\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09164}09164\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09165}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestUnicodeArrayNonzero}{09165}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestUnicodeArrayNonzero}{TestUnicodeArrayNonzero}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09166}09166\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09167}09167\ \ \ \ \ \textcolor{keyword}{def\ }test\_empty\_ustring\_array\_is\_falsey(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09168}09168\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ np.array([\textcolor{stringliteral}{''}],\ dtype=np.str\_))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09169}09169\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09170}09170\ \ \ \ \ \textcolor{keyword}{def\ }test\_whitespace\_ustring\_array\_is\_falsey(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09171}09171\ \ \ \ \ \ \ \ \ a\ =\ np.array([\textcolor{stringliteral}{'eggs'}],\ dtype=np.str\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09172}09172\ \ \ \ \ \ \ \ \ a[0]\ =\ \textcolor{stringliteral}{'\ \ \(\backslash\)0\(\backslash\)0'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09173}09173\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09174}09174\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09175}09175\ \ \ \ \ \textcolor{keyword}{def\ }test\_all\_null\_ustring\_array\_is\_falsey(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09176}09176\ \ \ \ \ \ \ \ \ a\ =\ np.array([\textcolor{stringliteral}{'eggs'}],\ dtype=np.str\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09177}09177\ \ \ \ \ \ \ \ \ a[0]\ =\ \textcolor{stringliteral}{'\(\backslash\)0\(\backslash\)0\(\backslash\)0\(\backslash\)0'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09178}09178\ \ \ \ \ \ \ \ \ assert\_(\textcolor{keywordflow}{not}\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09179}09179\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09180}09180\ \ \ \ \ \textcolor{keyword}{def\ }test\_null\_inside\_ustring\_array\_is\_truthy(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09181}09181\ \ \ \ \ \ \ \ \ a\ =\ np.array([\textcolor{stringliteral}{'eggs'}],\ dtype=np.str\_)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09182}09182\ \ \ \ \ \ \ \ \ a[0]\ =\ \textcolor{stringliteral}{'\ \(\backslash\)0\ \(\backslash\)0'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09183}09183\ \ \ \ \ \ \ \ \ assert\_(a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09184}09184\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09185}09185\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09186}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFormat}{09186}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestFormat}{TestFormat}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09187}09187\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09188}09188\ \ \ \ \ \textcolor{keyword}{def\ }test\_0d(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09189}09189\ \ \ \ \ \ \ \ \ a\ =\ np.array(np.pi)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09190}09190\ \ \ \ \ \ \ \ \ assert\_equal(\textcolor{stringliteral}{'\{:0.3g\}'}.format(a),\ \textcolor{stringliteral}{'3.14'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09191}09191\ \ \ \ \ \ \ \ \ assert\_equal(\textcolor{stringliteral}{'\{:0.3g\}'}.format(a[()]),\ \textcolor{stringliteral}{'3.14'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09192}09192\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09193}09193\ \ \ \ \ \textcolor{keyword}{def\ }test\_1d\_no\_format(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09194}09194\ \ \ \ \ \ \ \ \ a\ =\ np.array([np.pi])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09195}09195\ \ \ \ \ \ \ \ \ assert\_equal(\textcolor{stringliteral}{'\{\}'}.format(a),\ str(a))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09196}09196\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09197}09197\ \ \ \ \ \textcolor{keyword}{def\ }test\_1d\_format(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09198}09198\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ until\ gh-\/5543,\ ensure\ that\ the\ behaviour\ matches\ what\ it\ used\ to\ be}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09199}09199\ \ \ \ \ \ \ \ \ a\ =\ np.array([np.pi])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09200}09200\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ \textcolor{stringliteral}{'\{:30\}'}.format,\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09201}09201\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09202}09202\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacenumpy_1_1testing}{numpy.testing}}\ \textcolor{keyword}{import}\ IS\_PYPY}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09203}09203\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09204}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestCTypes}{09204}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestCTypes}{TestCTypes}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09205}09205\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09206}09206\ \ \ \ \ \textcolor{keyword}{def\ }test\_ctypes\_is\_available(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09207}09207\ \ \ \ \ \ \ \ \ test\_arr\ =\ np.array([[1,\ 2,\ 3],\ [4,\ 5,\ 6]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09208}09208\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09209}09209\ \ \ \ \ \ \ \ \ assert\_equal(ctypes,\ test\_arr.ctypes.\_ctypes)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09210}09210\ \ \ \ \ \ \ \ \ assert\_equal(tuple(test\_arr.ctypes.shape),\ (2,\ 3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09211}09211\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09212}09212\ \ \ \ \ \textcolor{keyword}{def\ }test\_ctypes\_is\_not\_available(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09213}09213\ \ \ \ \ \ \ \ \ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacenumpy_1_1core}{numpy.core}}\ \textcolor{keyword}{import}\ \_internal}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09214}09214\ \ \ \ \ \ \ \ \ \_internal.ctypes\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09215}09215\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09216}09216\ \ \ \ \ \ \ \ \ \ \ \ \ test\_arr\ =\ np.array([[1,\ 2,\ 3],\ [4,\ 5,\ 6]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09217}09217\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09218}09218\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(isinstance(test\_arr.ctypes.\_ctypes,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09219}09219\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classnumpy_1_1core_1_1__internal_1_1__missing__ctypes}{\_internal.\_missing\_ctypes}}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09220}09220\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(tuple(test\_arr.ctypes.shape),\ (2,\ 3))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09221}09221\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{finally}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09222}09222\ \ \ \ \ \ \ \ \ \ \ \ \ \_internal.ctypes\ =\ ctypes}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09223}09223\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09224}09224\ \ \ \ \ \textcolor{keyword}{def\ }\_make\_readonly(x):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09225}09225\ \ \ \ \ \ \ \ \ x.flags.writeable\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09226}09226\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ x}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09227}09227\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09228}09228\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{'arr'},\ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09229}09229\ \ \ \ \ \ \ \ \ np.array([1,\ 2,\ 3]),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09230}09230\ \ \ \ \ \ \ \ \ np.array([[\textcolor{stringliteral}{'one'},\ \textcolor{stringliteral}{'two'}],\ [\textcolor{stringliteral}{'three'},\ \textcolor{stringliteral}{'four'}]]),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09231}09231\ \ \ \ \ \ \ \ \ np.array((1,\ 2),\ dtype=\textcolor{stringliteral}{'i4,i4'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09232}09232\ \ \ \ \ \ \ \ \ np.zeros((2,),\ dtype=}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09233}09233\ \ \ \ \ \ \ \ \ \ \ \ \ np.dtype(dict(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09234}09234\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ formats=[\textcolor{stringliteral}{'<i4'},\ \textcolor{stringliteral}{'<i4'}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09235}09235\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ names=[\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'b'}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09236}09236\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ offsets=[0,\ 2],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09237}09237\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ itemsize=6}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09238}09238\ \ \ \ \ \ \ \ \ \ \ \ \ ))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09239}09239\ \ \ \ \ \ \ \ \ ),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09240}09240\ \ \ \ \ \ \ \ \ np.array([\textcolor{keywordtype}{None}],\ dtype=object),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09241}09241\ \ \ \ \ \ \ \ \ np.array([]),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09242}09242\ \ \ \ \ \ \ \ \ np.empty((0,\ 0)),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09243}09243\ \ \ \ \ \ \ \ \ \_make\_readonly(np.array([1,\ 2,\ 3])),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09244}09244\ \ \ \ \ ],\ ids=[}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09245}09245\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'1d'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09246}09246\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'2d'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09247}09247\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'structured'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09248}09248\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'overlapping'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09249}09249\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'object'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09250}09250\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'empty'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09251}09251\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'empty-\/2d'},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09252}09252\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'readonly'}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09253}09253\ \ \ \ \ ])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09254}09254\ \ \ \ \ \textcolor{keyword}{def\ }test\_ctypes\_data\_as\_holds\_reference(self,\ arr):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09255}09255\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/9647}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09256}09256\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ create\ a\ copy\ to\ ensure\ that\ pytest\ does\ not\ mess\ with\ the\ refcounts}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09257}09257\ \ \ \ \ \ \ \ \ arr\ =\ arr.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09258}09258\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09259}09259\ \ \ \ \ \ \ \ \ arr\_ref\ =\ weakref.ref(arr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09260}09260\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09261}09261\ \ \ \ \ \ \ \ \ ctypes\_ptr\ =\ arr.ctypes.data\_as(ctypes.c\_void\_p)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09262}09262\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09263}09263\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \`{}ctypes\_ptr`\ should\ hold\ onto\ \`{}arr`}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09264}09264\ \ \ \ \ \ \ \ \ del\ arr}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09265}09265\ \ \ \ \ \ \ \ \ break\_cycles()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09266}09266\ \ \ \ \ \ \ \ \ assert\_(arr\_ref()\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None},\ \textcolor{stringliteral}{"{}ctypes\ pointer\ did\ not\ hold\ onto\ a\ reference"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09267}09267\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09268}09268\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ but\ when\ the\ \`{}ctypes\_ptr`\ object\ dies,\ so\ should\ \`{}arr`}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09269}09269\ \ \ \ \ \ \ \ \ del\ ctypes\_ptr}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09270}09270\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ IS\_PYPY:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09271}09271\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Pypy\ does\ not\ recycle\ arr\ objects\ immediately.\ Trigger\ gc\ to}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09272}09272\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ release\ arr.\ Cpython\ uses\ refcounts.\ An\ explicit\ call\ to\ gc}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09273}09273\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ should\ not\ be\ needed\ here.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09274}09274\ \ \ \ \ \ \ \ \ \ \ \ \ break\_cycles()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09275}09275\ \ \ \ \ \ \ \ \ assert\_(arr\_ref()\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None},\ \textcolor{stringliteral}{"{}unknowable\ whether\ ctypes\ pointer\ holds\ a\ reference"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09276}09276\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09277}09277\ \ \ \ \ \textcolor{keyword}{def\ }test\_ctypes\_as\_parameter\_holds\_reference(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09278}09278\ \ \ \ \ \ \ \ \ arr\ =\ np.array([\textcolor{keywordtype}{None}]).copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09279}09279\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09280}09280\ \ \ \ \ \ \ \ \ arr\_ref\ =\ weakref.ref(arr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09281}09281\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09282}09282\ \ \ \ \ \ \ \ \ ctypes\_ptr\ =\ arr.ctypes.\_as\_parameter\_}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09283}09283\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09284}09284\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \`{}ctypes\_ptr`\ should\ hold\ onto\ \`{}arr`}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09285}09285\ \ \ \ \ \ \ \ \ del\ arr}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09286}09286\ \ \ \ \ \ \ \ \ break\_cycles()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09287}09287\ \ \ \ \ \ \ \ \ assert\_(arr\_ref()\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None},\ \textcolor{stringliteral}{"{}ctypes\ pointer\ did\ not\ hold\ onto\ a\ reference"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09288}09288\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09289}09289\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ but\ when\ the\ \`{}ctypes\_ptr`\ object\ dies,\ so\ should\ \`{}arr`}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09290}09290\ \ \ \ \ \ \ \ \ del\ ctypes\_ptr}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09291}09291\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ IS\_PYPY:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09292}09292\ \ \ \ \ \ \ \ \ \ \ \ \ break\_cycles()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09293}09293\ \ \ \ \ \ \ \ \ assert\_(arr\_ref()\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None},\ \textcolor{stringliteral}{"{}unknowable\ whether\ ctypes\ pointer\ holds\ a\ reference"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09294}09294\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09295}09295\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09296}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestWritebackIfCopy}{09296}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestWritebackIfCopy}{TestWritebackIfCopy}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09297}09297\ \ \ \ \ \textcolor{comment}{\#\ all\ these\ tests\ use\ the\ WRITEBACKIFCOPY\ mechanism}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09298}09298\ \ \ \ \ \textcolor{keyword}{def\ }test\_argmax\_with\_out(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09299}09299\ \ \ \ \ \ \ \ \ mat\ =\ np.eye(5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09300}09300\ \ \ \ \ \ \ \ \ out\ =\ np.empty(5,\ dtype=\textcolor{stringliteral}{'i2'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09301}09301\ \ \ \ \ \ \ \ \ res\ =\ np.argmax(mat,\ 0,\ out=out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09302}09302\ \ \ \ \ \ \ \ \ assert\_equal(res,\ range(5))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09303}09303\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09304}09304\ \ \ \ \ \textcolor{keyword}{def\ }test\_argmin\_with\_out(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09305}09305\ \ \ \ \ \ \ \ \ mat\ =\ -\/np.eye(5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09306}09306\ \ \ \ \ \ \ \ \ out\ =\ np.empty(5,\ dtype=\textcolor{stringliteral}{'i2'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09307}09307\ \ \ \ \ \ \ \ \ res\ =\ np.argmin(mat,\ 0,\ out=out)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09308}09308\ \ \ \ \ \ \ \ \ assert\_equal(res,\ range(5))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09309}09309\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09310}09310\ \ \ \ \ \textcolor{keyword}{def\ }test\_insert\_noncontiguous(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09311}09311\ \ \ \ \ \ \ \ \ a\ =\ np.arange(6).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,3).T\ \textcolor{comment}{\#\ force\ non-\/c-\/contiguous}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09312}09312\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ uses\ arr\_insert}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09313}09313\ \ \ \ \ \ \ \ \ np.place(a,\ a>2,\ [44,\ 55])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09314}09314\ \ \ \ \ \ \ \ \ assert\_equal(a,\ np.array([[0,\ 44],\ [1,\ 55],\ [2,\ 44]]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09315}09315\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ hit\ one\ of\ the\ failing\ paths}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09316}09316\ \ \ \ \ \ \ \ \ assert\_raises(ValueError,\ np.place,\ a,\ a>20,\ [])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09317}09317\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09318}09318\ \ \ \ \ \textcolor{keyword}{def\ }test\_put\_noncontiguous(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09319}09319\ \ \ \ \ \ \ \ \ a\ =\ np.arange(6).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,3).T\ \textcolor{comment}{\#\ force\ non-\/c-\/contiguous}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09320}09320\ \ \ \ \ \ \ \ \ np.put(a,\ [0,\ 2],\ [44,\ 55])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09321}09321\ \ \ \ \ \ \ \ \ assert\_equal(a,\ np.array([[44,\ 3],\ [55,\ 4],\ [2,\ 5]]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09322}09322\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09323}09323\ \ \ \ \ \textcolor{keyword}{def\ }test\_putmask\_noncontiguous(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09324}09324\ \ \ \ \ \ \ \ \ a\ =\ np.arange(6).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,3).T\ \textcolor{comment}{\#\ force\ non-\/c-\/contiguous}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09325}09325\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ uses\ arr\_putmask}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09326}09326\ \ \ \ \ \ \ \ \ np.putmask(a,\ a>2,\ a**2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09327}09327\ \ \ \ \ \ \ \ \ assert\_equal(a,\ np.array([[0,\ 9],\ [1,\ 16],\ [2,\ 25]]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09328}09328\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09329}09329\ \ \ \ \ \textcolor{keyword}{def\ }test\_take\_mode\_raise(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09330}09330\ \ \ \ \ \ \ \ \ a\ =\ np.arange(6,\ dtype=\textcolor{stringliteral}{'int'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09331}09331\ \ \ \ \ \ \ \ \ out\ =\ np.empty(2,\ dtype=\textcolor{stringliteral}{'int'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09332}09332\ \ \ \ \ \ \ \ \ np.take(a,\ [0,\ 2],\ out=out,\ mode=\textcolor{stringliteral}{'raise'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09333}09333\ \ \ \ \ \ \ \ \ assert\_equal(out,\ np.array([0,\ 2]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09334}09334\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09335}09335\ \ \ \ \ \textcolor{keyword}{def\ }test\_choose\_mod\_raise(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09336}09336\ \ \ \ \ \ \ \ \ a\ =\ np.array([[1,\ 0,\ 1],\ [0,\ 1,\ 0],\ [1,\ 0,\ 1]])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09337}09337\ \ \ \ \ \ \ \ \ out\ =\ np.empty((3,3),\ dtype=\textcolor{stringliteral}{'int'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09338}09338\ \ \ \ \ \ \ \ \ choices\ =\ [-\/10,\ 10]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09339}09339\ \ \ \ \ \ \ \ \ np.choose(a,\ choices,\ out=out,\ mode=\textcolor{stringliteral}{'raise'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09340}09340\ \ \ \ \ \ \ \ \ assert\_equal(out,\ np.array([[\ 10,\ -\/10,\ \ 10],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09341}09341\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [-\/10,\ \ 10,\ -\/10],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09342}09342\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\ 10,\ -\/10,\ \ 10]]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09343}09343\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09344}09344\ \ \ \ \ \textcolor{keyword}{def\ }test\_flatiter\_\_array\_\_(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09345}09345\ \ \ \ \ \ \ \ \ a\ =\ np.arange(9).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(3,3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09346}09346\ \ \ \ \ \ \ \ \ b\ =\ a.T.flat}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09347}09347\ \ \ \ \ \ \ \ \ c\ =\ b.\_\_array\_\_()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09348}09348\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ triggers\ the\ WRITEBACKIFCOPY\ resolution,\ assuming\ refcount\ semantics}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09349}09349\ \ \ \ \ \ \ \ \ del\ c}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09350}09350\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09351}09351\ \ \ \ \ \textcolor{keyword}{def\ }test\_dot\_out(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09352}09352\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ if\ HAVE\_CBLAS,\ will\ use\ WRITEBACKIFCOPY}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09353}09353\ \ \ \ \ \ \ \ \ a\ =\ np.arange(9,\ dtype=float).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(3,3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09354}09354\ \ \ \ \ \ \ \ \ b\ =\ np.dot(a,\ a,\ out=a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09355}09355\ \ \ \ \ \ \ \ \ assert\_equal(b,\ np.array([[15,\ 18,\ 21],\ [42,\ 54,\ 66],\ [69,\ 90,\ 111]]))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09356}09356\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09357}09357\ \ \ \ \ \textcolor{keyword}{def\ }test\_view\_assign(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09358}09358\ \ \ \ \ \ \ \ \ \textcolor{keyword}{from}\ numpy.core.\_multiarray\_tests\ \textcolor{keyword}{import}\ npy\_create\_writebackifcopy,\ npy\_resolve}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09359}09359\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09360}09360\ \ \ \ \ \ \ \ \ arr\ =\ np.arange(9).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(3,\ 3).T}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09361}09361\ \ \ \ \ \ \ \ \ arr\_wb\ =\ npy\_create\_writebackifcopy(arr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09362}09362\ \ \ \ \ \ \ \ \ assert\_(arr\_wb.flags.writebackifcopy)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09363}09363\ \ \ \ \ \ \ \ \ assert\_(arr\_wb.base\ \textcolor{keywordflow}{is}\ arr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09364}09364\ \ \ \ \ \ \ \ \ arr\_wb[...]\ =\ -\/100}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09365}09365\ \ \ \ \ \ \ \ \ npy\_resolve(arr\_wb)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09366}09366\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ arr\ changes\ after\ resolve,\ even\ though\ we\ assigned\ to\ arr\_wb}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09367}09367\ \ \ \ \ \ \ \ \ assert\_equal(arr,\ -\/100)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09368}09368\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ after\ resolve,\ the\ two\ arrays\ no\ longer\ reference\ each\ other}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09369}09369\ \ \ \ \ \ \ \ \ assert\_(arr\_wb.ctypes.data\ !=\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09370}09370\ \ \ \ \ \ \ \ \ assert\_equal(arr\_wb.base,\ \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09371}09371\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ assigning\ to\ arr\_wb\ does\ not\ get\ transferred\ to\ arr}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09372}09372\ \ \ \ \ \ \ \ \ arr\_wb[...]\ =\ 100}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09373}09373\ \ \ \ \ \ \ \ \ assert\_equal(arr,\ -\/100)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09374}09374\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09375}09375\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.leaks\_references}(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09376}09376\ \ \ \ \ \ \ \ \ \ \ \ \ reason=\textcolor{stringliteral}{"{}increments\ self\ in\ dealloc;\ ignore\ since\ deprecated\ path."{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09377}09377\ \ \ \ \ \textcolor{keyword}{def\ }test\_dealloc\_warning(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09378}09378\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ \mbox{\hyperlink{classnumpy_1_1testing_1_1__private_1_1utils_1_1suppress__warnings}{suppress\_warnings}}()\ \textcolor{keyword}{as}\ sup:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09379}09379\ \ \ \ \ \ \ \ \ \ \ \ \ sup.record(RuntimeWarning)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09380}09380\ \ \ \ \ \ \ \ \ \ \ \ \ arr\ =\ np.arange(9).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(3,\ 3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09381}09381\ \ \ \ \ \ \ \ \ \ \ \ \ v\ =\ arr.T}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09382}09382\ \ \ \ \ \ \ \ \ \ \ \ \ \_multiarray\_tests.npy\_abuse\_writebackifcopy(v)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09383}09383\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ len(sup.log)\ ==\ 1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09384}09384\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09385}09385\ \ \ \ \ \textcolor{keyword}{def\ }test\_view\_discard\_refcount(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09386}09386\ \ \ \ \ \ \ \ \ \textcolor{keyword}{from}\ numpy.core.\_multiarray\_tests\ \textcolor{keyword}{import}\ npy\_create\_writebackifcopy,\ npy\_discard}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09387}09387\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09388}09388\ \ \ \ \ \ \ \ \ arr\ =\ np.arange(9).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(3,\ 3).T}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09389}09389\ \ \ \ \ \ \ \ \ orig\ =\ arr.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09390}09390\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ HAS\_REFCOUNT:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09391}09391\ \ \ \ \ \ \ \ \ \ \ \ \ arr\_cnt\ =\ sys.getrefcount(arr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09392}09392\ \ \ \ \ \ \ \ \ arr\_wb\ =\ npy\_create\_writebackifcopy(arr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09393}09393\ \ \ \ \ \ \ \ \ assert\_(arr\_wb.flags.writebackifcopy)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09394}09394\ \ \ \ \ \ \ \ \ assert\_(arr\_wb.base\ \textcolor{keywordflow}{is}\ arr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09395}09395\ \ \ \ \ \ \ \ \ arr\_wb[...]\ =\ -\/100}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09396}09396\ \ \ \ \ \ \ \ \ npy\_discard(arr\_wb)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09397}09397\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ arr\ remains\ unchanged\ after\ discard}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09398}09398\ \ \ \ \ \ \ \ \ assert\_equal(arr,\ orig)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09399}09399\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ after\ discard,\ the\ two\ arrays\ no\ longer\ reference\ each\ other}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09400}09400\ \ \ \ \ \ \ \ \ assert\_(arr\_wb.ctypes.data\ !=\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09401}09401\ \ \ \ \ \ \ \ \ assert\_equal(arr\_wb.base,\ \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09402}09402\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ HAS\_REFCOUNT:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09403}09403\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(arr\_cnt,\ sys.getrefcount(arr))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09404}09404\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ assigning\ to\ arr\_wb\ does\ not\ get\ transferred\ to\ arr}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09405}09405\ \ \ \ \ \ \ \ \ arr\_wb[...]\ =\ 100}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09406}09406\ \ \ \ \ \ \ \ \ assert\_equal(arr,\ orig)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09407}09407\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09408}09408\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09409}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArange}{09409}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArange}{TestArange}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09410}09410\ \ \ \ \ \textcolor{keyword}{def\ }test\_infinite(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09411}09411\ \ \ \ \ \ \ \ \ assert\_raises\_regex(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09412}09412\ \ \ \ \ \ \ \ \ \ \ \ \ ValueError,\ \textcolor{stringliteral}{"{}size\ exceeded"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09413}09413\ \ \ \ \ \ \ \ \ \ \ \ \ np.arange,\ 0,\ np.inf}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09414}09414\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09415}09415\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09416}09416\ \ \ \ \ \textcolor{keyword}{def\ }test\_nan\_step(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09417}09417\ \ \ \ \ \ \ \ \ assert\_raises\_regex(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09418}09418\ \ \ \ \ \ \ \ \ \ \ \ \ ValueError,\ \textcolor{stringliteral}{"{}cannot\ compute\ length"{}},}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09419}09419\ \ \ \ \ \ \ \ \ \ \ \ \ np.arange,\ 0,\ 1,\ np.nan}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09420}09420\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09421}09421\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09422}09422\ \ \ \ \ \textcolor{keyword}{def\ }test\_zero\_step(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09423}09423\ \ \ \ \ \ \ \ \ assert\_raises(ZeroDivisionError,\ np.arange,\ 0,\ 10,\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09424}09424\ \ \ \ \ \ \ \ \ assert\_raises(ZeroDivisionError,\ np.arange,\ 0.0,\ 10.0,\ 0.0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09425}09425\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09426}09426\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ empty\ range}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09427}09427\ \ \ \ \ \ \ \ \ assert\_raises(ZeroDivisionError,\ np.arange,\ 0,\ 0,\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09428}09428\ \ \ \ \ \ \ \ \ assert\_raises(ZeroDivisionError,\ np.arange,\ 0.0,\ 0.0,\ 0.0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09429}09429\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09430}09430\ \ \ \ \ \textcolor{keyword}{def\ }test\_require\_range(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09431}09431\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ np.arange)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09432}09432\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ np.arange,\ step=3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09433}09433\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ np.arange,\ dtype=\textcolor{stringliteral}{'int64'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09434}09434\ \ \ \ \ \ \ \ \ assert\_raises(TypeError,\ np.arange,\ start=4)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09435}09435\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09436}09436\ \ \ \ \ \textcolor{keyword}{def\ }test\_start\_stop\_kwarg(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09437}09437\ \ \ \ \ \ \ \ \ keyword\_stop\ =\ np.arange(stop=3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09438}09438\ \ \ \ \ \ \ \ \ keyword\_zerotostop\ =\ np.arange(start=0,\ stop=3)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09439}09439\ \ \ \ \ \ \ \ \ keyword\_start\_stop\ =\ np.arange(start=3,\ stop=9)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09440}09440\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09441}09441\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ len(keyword\_stop)\ ==\ 3}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09442}09442\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ len(keyword\_zerotostop)\ ==\ 3}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09443}09443\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ len(keyword\_start\_stop)\ ==\ 6}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09444}09444\ \ \ \ \ \ \ \ \ assert\_array\_equal(keyword\_stop,\ keyword\_zerotostop)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09445}09445\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09446}09446\ \ \ \ \ \textcolor{keyword}{def\ }test\_arange\_booleans(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09447}09447\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Arange\ makes\ some\ sense\ for\ booleans\ and\ works\ up\ to\ length\ 2.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09448}09448\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ But\ it\ is\ weird\ since\ \`{}arange(2,\ 4,\ dtype=bool)`\ works.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09449}09449\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Arguably,\ much\ or\ all\ of\ this\ could\ be\ deprecated/removed.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09450}09450\ \ \ \ \ \ \ \ \ res\ =\ np.arange(\textcolor{keyword}{False},\ dtype=bool)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09451}09451\ \ \ \ \ \ \ \ \ assert\_array\_equal(res,\ np.array([],\ dtype=\textcolor{stringliteral}{"{}bool"{}}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09452}09452\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09453}09453\ \ \ \ \ \ \ \ \ res\ =\ np.arange(\textcolor{keyword}{True},\ dtype=\textcolor{stringliteral}{"{}bool"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09454}09454\ \ \ \ \ \ \ \ \ assert\_array\_equal(res,\ [\textcolor{keyword}{False}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09455}09455\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09456}09456\ \ \ \ \ \ \ \ \ res\ =\ np.arange(2,\ dtype=\textcolor{stringliteral}{"{}bool"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09457}09457\ \ \ \ \ \ \ \ \ assert\_array\_equal(res,\ [\textcolor{keyword}{False},\ \textcolor{keyword}{True}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09458}09458\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09459}09459\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ This\ case\ is\ especially\ weird,\ but\ drops\ out\ without\ special\ case:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09460}09460\ \ \ \ \ \ \ \ \ res\ =\ np.arange(6,\ 8,\ dtype=\textcolor{stringliteral}{"{}bool"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09461}09461\ \ \ \ \ \ \ \ \ assert\_array\_equal(res,\ [\textcolor{keyword}{True},\ \textcolor{keyword}{True}])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09462}09462\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09463}09463\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09464}09464\ \ \ \ \ \ \ \ \ \ \ \ \ np.arange(3,\ dtype=\textcolor{stringliteral}{"{}bool"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09465}09465\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09466}09466\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}dtype"{},\ ["{}S3"{},\ "{}U"{},\ "{}5i"{}])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09467}09467\ \ \ \ \ \textcolor{keyword}{def\ }test\_rejects\_bad\_dtypes(self,\ dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09468}09468\ \ \ \ \ \ \ \ \ dtype\ =\ np.dtype(dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09469}09469\ \ \ \ \ \ \ \ \ DType\_name\ =\ re.escape(str(type(dtype)))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09470}09470\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09471}09471\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ match=rf\textcolor{stringliteral}{"{}arange\(\backslash\)(\(\backslash\))\ not\ supported\ for\ inputs\ .*\ \{DType\_name\}"{}}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09472}09472\ \ \ \ \ \ \ \ \ \ \ \ \ np.arange(2,\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09473}09473\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09474}09474\ \ \ \ \ \textcolor{keyword}{def\ }test\_rejects\_strings(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09475}09475\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Explicitly\ test\ error\ for\ strings\ which\ may\ call\ "{}b"{}\ -\/\ "{}a"{}:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09476}09476\ \ \ \ \ \ \ \ \ DType\_name\ =\ re.escape(str(type(np.array(\textcolor{stringliteral}{"{}a"{}}).dtype)))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09477}09477\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09478}09478\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ match=rf\textcolor{stringliteral}{"{}arange\(\backslash\)(\(\backslash\))\ not\ supported\ for\ inputs\ .*\ \{DType\_name\}"{}}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09479}09479\ \ \ \ \ \ \ \ \ \ \ \ \ np.arange(\textcolor{stringliteral}{"{}a"{}},\ \textcolor{stringliteral}{"{}b"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09480}09480\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09481}09481\ \ \ \ \ \textcolor{keyword}{def\ }test\_byteswapped(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09482}09482\ \ \ \ \ \ \ \ \ res\_be\ =\ np.arange(1,\ 1000,\ dtype=\textcolor{stringliteral}{"{}>i4"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09483}09483\ \ \ \ \ \ \ \ \ res\_le\ =\ np.arange(1,\ 1000,\ dtype=\textcolor{stringliteral}{"{}<i4"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09484}09484\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ res\_be.dtype\ ==\ \textcolor{stringliteral}{"{}>i4"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09485}09485\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ res\_le.dtype\ ==\ \textcolor{stringliteral}{"{}<i4"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09486}09486\ \ \ \ \ \ \ \ \ assert\_array\_equal(res\_le,\ res\_be)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09487}09487\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09488}09488\ \ \ \ \ \textcolor{preprocessor}{@pytest.mark.parametrize("{}which"{},\ [0,\ 1,\ 2])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09489}09489\ \ \ \ \ \textcolor{keyword}{def\ }test\_error\_paths\_and\_promotion(self,\ which):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09490}09490\ \ \ \ \ \ \ \ \ args\ =\ [0,\ 1,\ 2]\ \ \textcolor{comment}{\#\ start,\ stop,\ and\ step}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09491}09491\ \ \ \ \ \ \ \ \ args[which]\ =\ np.float64(2.)\ \ \textcolor{comment}{\#\ should\ ensure\ float64\ output}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09492}09492\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09493}09493\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ np.arange(*args).dtype\ ==\ np.float64}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09494}09494\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09495}09495\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Cover\ stranger\ error\ path,\ test\ only\ to\ achieve\ code\ coverage!}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09496}09496\ \ \ \ \ \ \ \ \ args[which]\ =\ [\textcolor{keywordtype}{None},\ []]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09497}09497\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09498}09498\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Fails\ discovering\ start\ dtype}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09499}09499\ \ \ \ \ \ \ \ \ \ \ \ \ np.arange(*args)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09500}09500\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09501}09501\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09502}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayFinalize}{09502}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayFinalize}{TestArrayFinalize}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09503}09503\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}\ Tests\ \_\_array\_finalize\_\_\ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09504}09504\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09505}09505\ \ \ \ \ \textcolor{keyword}{def\ }test\_receives\_base(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09506}09506\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/11237}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09507}09507\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }SavesBase(np.ndarray):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09508}09508\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_array\_finalize\_\_(self,\ obj):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09509}09509\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayFinalize_ad332660c94e0dc445428b13c6a5ca273}{saved\_base}}\ =\ self.base}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09510}09510\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09511}09511\ \ \ \ \ \ \ \ \ a\ =\ np.array(1).view(SavesBase)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09512}09512\ \ \ \ \ \ \ \ \ assert\_(a.saved\_base\ \textcolor{keywordflow}{is}\ a.base)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09513}09513\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09514}09514\ \ \ \ \ \textcolor{keyword}{def\ }test\_bad\_finalize1(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09515}09515\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }BadAttributeArray(np.ndarray):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09516}09516\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{preprocessor}{@property}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09517}09517\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_array\_finalize\_\_(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09518}09518\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classRuntimeError}{RuntimeError}}(\textcolor{stringliteral}{"{}boohoo!"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09519}09519\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09520}09520\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError,\ match=\textcolor{stringliteral}{"{}not\ callable"{}}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09521}09521\ \ \ \ \ \ \ \ \ \ \ \ \ np.arange(10).view(BadAttributeArray)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09522}09522\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09523}09523\ \ \ \ \ \textcolor{keyword}{def\ }test\_bad\_finalize2(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09524}09524\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }BadAttributeArray(np.ndarray):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09525}09525\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_array\_finalize\_\_(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09526}09526\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classRuntimeError}{RuntimeError}}(\textcolor{stringliteral}{"{}boohoo!"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09527}09527\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09528}09528\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError,\ match=\textcolor{stringliteral}{"{}takes\ 1\ positional"{}}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09529}09529\ \ \ \ \ \ \ \ \ \ \ \ \ np.arange(10).view(BadAttributeArray)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09530}09530\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09531}09531\ \ \ \ \ \textcolor{keyword}{def\ }test\_bad\_finalize3(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09532}09532\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }BadAttributeArray(np.ndarray):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09533}09533\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_array\_finalize\_\_(self,\ obj):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09534}09534\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classRuntimeError}{RuntimeError}}(\textcolor{stringliteral}{"{}boohoo!"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09535}09535\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09536}09536\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(RuntimeError,\ match=\textcolor{stringliteral}{"{}boohoo!"{}}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09537}09537\ \ \ \ \ \ \ \ \ \ \ \ \ np.arange(10).view(BadAttributeArray)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09538}09538\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09539}09539\ \ \ \ \ \textcolor{keyword}{def\ }test\_lifetime\_on\_error(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09540}09540\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gh-\/11237}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09541}09541\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }RaisesInFinalize(np.ndarray):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09542}09542\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_array\_finalize\_\_(self,\ obj):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09543}09543\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ crash,\ but\ keep\ this\ object\ alive}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09544}09544\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classException}{Exception}}(self)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09545}09545\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09546}09546\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ a\ plain\ object\ can't\ be\ weakref'd}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09547}09547\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }Dummy:\ \textcolor{keyword}{pass}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09548}09548\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09549}09549\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ get\ a\ weak\ reference\ to\ an\ object\ within\ an\ array}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09550}09550\ \ \ \ \ \ \ \ \ obj\_arr\ =\ np.array(Dummy())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09551}09551\ \ \ \ \ \ \ \ \ obj\_ref\ =\ weakref.ref(obj\_arr[()])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09552}09552\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09553}09553\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ get\ an\ array\ that\ crashed\ in\ \_\_array\_finalize\_\_}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09554}09554\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ assert\_raises(Exception)\ \textcolor{keyword}{as}\ e:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09555}09555\ \ \ \ \ \ \ \ \ \ \ \ \ obj\_arr.view(RaisesInFinalize)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09556}09556\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09557}09557\ \ \ \ \ \ \ \ \ obj\_subarray\ =\ e.exception.args[0]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09558}09558\ \ \ \ \ \ \ \ \ del\ e}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09559}09559\ \ \ \ \ \ \ \ \ assert\_(isinstance(obj\_subarray,\ RaisesInFinalize))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09560}09560\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09561}09561\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ reference\ should\ still\ be\ held\ by\ obj\_arr}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09562}09562\ \ \ \ \ \ \ \ \ break\_cycles()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09563}09563\ \ \ \ \ \ \ \ \ assert\_(obj\_ref()\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None},\ \textcolor{stringliteral}{"{}object\ should\ not\ already\ be\ dead"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09564}09564\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09565}09565\ \ \ \ \ \ \ \ \ del\ obj\_arr}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09566}09566\ \ \ \ \ \ \ \ \ break\_cycles()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09567}09567\ \ \ \ \ \ \ \ \ assert\_(obj\_ref()\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None},\ \textcolor{stringliteral}{"{}obj\_arr\ should\ not\ hold\ the\ last\ reference"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09568}09568\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09569}09569\ \ \ \ \ \ \ \ \ del\ obj\_subarray}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09570}09570\ \ \ \ \ \ \ \ \ break\_cycles()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09571}09571\ \ \ \ \ \ \ \ \ assert\_(obj\_ref()\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None},\ \textcolor{stringliteral}{"{}no\ references\ should\ remain"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09572}09572\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09573}09573\ \ \ \ \ \textcolor{keyword}{def\ }test\_can\_use\_super(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09574}09574\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }SuperFinalize(np.ndarray):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09575}09575\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_array\_finalize\_\_(self,\ obj):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09576}09576\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestArrayFinalize_af72a1b037d9c1d4854b1ac8f618294e8}{saved\_result}}\ =\ super().\_\_array\_finalize\_\_(obj)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09577}09577\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09578}09578\ \ \ \ \ \ \ \ \ a\ =\ np.array(1).view(SuperFinalize)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09579}09579\ \ \ \ \ \ \ \ \ assert\_(a.saved\_result\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09580}09580\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09581}09581\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09582}09582\ \textcolor{keyword}{def\ }test\_orderconverter\_with\_nonASCII\_unicode\_ordering():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09583}09583\ \ \ \ \ \textcolor{comment}{\#\ gh-\/7475}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09584}09584\ \ \ \ \ a\ =\ np.arange(5)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09585}09585\ \ \ \ \ assert\_raises(ValueError,\ a.flatten,\ order=\textcolor{stringliteral}{'\(\backslash\)xe2'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09586}09586\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09587}09587\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09588}09588\ \textcolor{keyword}{def\ }test\_equal\_override():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09589}09589\ \ \ \ \ \textcolor{comment}{\#\ gh-\/9153:\ ndarray.\_\_eq\_\_\ uses\ special\ logic\ for\ structured\ arrays,\ which}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09590}09590\ \ \ \ \ \textcolor{comment}{\#\ did\ not\ respect\ overrides\ with\ \_\_array\_priority\_\_\ or\ \_\_array\_ufunc\_\_.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09591}09591\ \ \ \ \ \textcolor{comment}{\#\ The\ PR\ fixed\ this\ for\ \_\_array\_priority\_\_\ and\ \_\_array\_ufunc\_\_\ =\ None.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09592}09592\ \ \ \ \ \textcolor{keyword}{class\ }MyAlwaysEqual:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09593}09593\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_eq\_\_(self,\ other):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09594}09594\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}eq"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09595}09595\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09596}09596\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_ne\_\_(self,\ other):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09597}09597\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}ne"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09598}09598\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09599}09599\ \ \ \ \ \textcolor{keyword}{class\ }MyAlwaysEqualOld(MyAlwaysEqual):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09600}09600\ \ \ \ \ \ \ \ \ \_\_array\_priority\_\_\ =\ 10000}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09601}09601\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09602}09602\ \ \ \ \ \textcolor{keyword}{class\ }MyAlwaysEqualNew(MyAlwaysEqual):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09603}09603\ \ \ \ \ \ \ \ \ \_\_array\_ufunc\_\_\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09604}09604\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09605}09605\ \ \ \ \ array\ =\ np.array([(0,\ 1),\ (2,\ 3)],\ dtype=\textcolor{stringliteral}{'i4,i4'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09606}09606\ \ \ \ \ \textcolor{keywordflow}{for}\ my\_always\_equal\_cls\ \textcolor{keywordflow}{in}\ MyAlwaysEqualOld,\ MyAlwaysEqualNew:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09607}09607\ \ \ \ \ \ \ \ \ my\_always\_equal\ =\ my\_always\_equal\_cls()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09608}09608\ \ \ \ \ \ \ \ \ assert\_equal(my\_always\_equal\ ==\ array,\ \textcolor{stringliteral}{'eq'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09609}09609\ \ \ \ \ \ \ \ \ assert\_equal(array\ ==\ my\_always\_equal,\ \textcolor{stringliteral}{'eq'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09610}09610\ \ \ \ \ \ \ \ \ assert\_equal(my\_always\_equal\ !=\ array,\ \textcolor{stringliteral}{'ne'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09611}09611\ \ \ \ \ \ \ \ \ assert\_equal(array\ !=\ my\_always\_equal,\ \textcolor{stringliteral}{'ne'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09612}09612\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09613}09613\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09614}09614\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}op"{},\ [operator.eq,\ operator.ne])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09615}09615\ \textcolor{preprocessor}{@pytest.mark.parametrize}([\textcolor{stringliteral}{"{}dt1"{}},\ \textcolor{stringliteral}{"{}dt2"{}}],\ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09616}09616\ \ \ \ \ \ \ \ \ ([(\textcolor{stringliteral}{"{}f"{}},\ \textcolor{stringliteral}{"{}i"{}})],\ [(\textcolor{stringliteral}{"{}f"{}},\ \textcolor{stringliteral}{"{}i"{}})]),\ \ \textcolor{comment}{\#\ structured\ comparison\ (successful)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09617}09617\ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}M8"{}},\ \textcolor{stringliteral}{"{}d"{}}),\ \ \textcolor{comment}{\#\ impossible\ comparison:\ result\ is\ all\ True\ or\ False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09618}09618\ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}d"{}},\ \textcolor{stringliteral}{"{}d"{}}),\ \ \textcolor{comment}{\#\ valid\ comparison}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09619}09619\ \ \ \ \ \ \ \ \ ])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09620}09620\ \textcolor{keyword}{def\ }test\_equal\_subclass\_no\_override(op,\ dt1,\ dt2):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09621}09621\ \ \ \ \ \textcolor{comment}{\#\ Test\ how\ the\ three\ different\ possible\ code-\/paths\ deal\ with\ subclasses}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09622}09622\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09623}09623\ \ \ \ \ \textcolor{keyword}{class\ }MyArr(np.ndarray):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09624}09624\ \ \ \ \ \ \ \ \ called\_wrap\ =\ 0}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09625}09625\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09626}09626\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_array\_wrap\_\_(self,\ new):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09627}09627\ \ \ \ \ \ \ \ \ \ \ \ \ type(self).called\_wrap\ +=\ 1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09628}09628\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ super().\_\_array\_wrap\_\_(new)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09629}09629\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09630}09630\ \ \ \ \ numpy\_arr\ =\ np.zeros(5,\ dtype=dt1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09631}09631\ \ \ \ \ my\_arr\ =\ np.zeros(5,\ dtype=dt2).view(MyArr)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09632}09632\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09633}09633\ \ \ \ \ \textcolor{keyword}{assert}\ type(op(numpy\_arr,\ my\_arr))\ \textcolor{keywordflow}{is}\ MyArr}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09634}09634\ \ \ \ \ \textcolor{keyword}{assert}\ type(op(my\_arr,\ numpy\_arr))\ \textcolor{keywordflow}{is}\ MyArr}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09635}09635\ \ \ \ \ \textcolor{comment}{\#\ We\ expect\ 2\ calls\ (more\ if\ there\ were\ more\ fields):}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09636}09636\ \ \ \ \ \textcolor{keyword}{assert}\ MyArr.called\_wrap\ ==\ 2}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09637}09637\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09638}09638\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09639}09639\ \textcolor{preprocessor}{@pytest.mark.parametrize}([\textcolor{stringliteral}{"{}dt1"{}},\ \textcolor{stringliteral}{"{}dt2"{}}],\ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09640}09640\ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}M8[ns]"{}},\ \textcolor{stringliteral}{"{}d"{}}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09641}09641\ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}M8[s]"{}},\ \textcolor{stringliteral}{"{}l"{}}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09642}09642\ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}m8[ns]"{}},\ \textcolor{stringliteral}{"{}d"{}}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09643}09643\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Missing:\ ("{}m8[ns]"{},\ "{}l"{})\ as\ timedelta\ currently\ promotes\ ints}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09644}09644\ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}M8[s]"{}},\ \textcolor{stringliteral}{"{}m8[s]"{}}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09645}09645\ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}S5"{}},\ \textcolor{stringliteral}{"{}U5"{}}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09646}09646\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Structured/void\ dtypes\ have\ explicit\ paths\ not\ tested\ here.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09647}09647\ ])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09648}09648\ \textcolor{keyword}{def\ }test\_no\_loop\_gives\_all\_true\_or\_false(dt1,\ dt2):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09649}09649\ \ \ \ \ \textcolor{comment}{\#\ Make\ sure\ they\ broadcast\ to\ test\ result\ shape,\ use\ random\ values,\ since}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09650}09650\ \ \ \ \ \textcolor{comment}{\#\ the\ actual\ value\ should\ be\ ignored}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09651}09651\ \ \ \ \ arr1\ =\ np.random.randint(5,\ size=100).astype(dt1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09652}09652\ \ \ \ \ arr2\ =\ np.random.randint(5,\ size=99)[:,\ np.newaxis].astype(dt2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09653}09653\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09654}09654\ \ \ \ \ res\ =\ arr1\ ==\ arr2}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09655}09655\ \ \ \ \ \textcolor{keyword}{assert}\ res.shape\ ==\ (99,\ 100)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09656}09656\ \ \ \ \ \textcolor{keyword}{assert}\ res.dtype\ ==\ bool}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09657}09657\ \ \ \ \ \textcolor{keyword}{assert}\ \textcolor{keywordflow}{not}\ res.any()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09658}09658\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09659}09659\ \ \ \ \ res\ =\ arr1\ !=\ arr2}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09660}09660\ \ \ \ \ \textcolor{keyword}{assert}\ res.shape\ ==\ (99,\ 100)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09661}09661\ \ \ \ \ \textcolor{keyword}{assert}\ res.dtype\ ==\ bool}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09662}09662\ \ \ \ \ \textcolor{keyword}{assert}\ res.all()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09663}09663\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09664}09664\ \ \ \ \ \textcolor{comment}{\#\ incompatible\ shapes\ raise\ though}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09665}09665\ \ \ \ \ arr2\ =\ np.random.randint(5,\ size=99).astype(dt2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09666}09666\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09667}09667\ \ \ \ \ \ \ \ \ arr1\ ==\ arr2}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09668}09668\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09669}09669\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09670}09670\ \ \ \ \ \ \ \ \ arr1\ !=\ arr2}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09671}09671\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09672}09672\ \ \ \ \ \textcolor{comment}{\#\ Basic\ test\ with\ another\ operation:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09673}09673\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(np.core.\_exceptions.\_UFuncNoLoopError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09674}09674\ \ \ \ \ \ \ \ \ arr1\ >\ arr2}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09675}09675\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09676}09676\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09677}09677\ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{"{}op"{}},\ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09678}09678\ \ \ \ \ \ \ \ \ operator.eq,\ operator.ne,\ operator.le,\ operator.lt,\ operator.ge,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09679}09679\ \ \ \ \ \ \ \ \ operator.gt])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09680}09680\ \textcolor{keyword}{def\ }test\_comparisons\_forwards\_error(op):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09681}09681\ \ \ \ \ \textcolor{keyword}{class\ }NotArray:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09682}09682\ \ \ \ \ \ \ \ \ \textcolor{keyword}{def\ }\_\_array\_\_(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09683}09683\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classTypeError}{TypeError}}(\textcolor{stringliteral}{"{}run\ you\ fools"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09684}09684\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09685}09685\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError,\ match=\textcolor{stringliteral}{"{}run\ you\ fools"{}}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09686}09686\ \ \ \ \ \ \ \ \ op(np.arange(2),\ NotArray())}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09687}09687\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09688}09688\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError,\ match=\textcolor{stringliteral}{"{}run\ you\ fools"{}}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09689}09689\ \ \ \ \ \ \ \ \ op(NotArray(),\ np.arange(2))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09690}09690\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09691}09691\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09692}09692\ \textcolor{keyword}{def\ }test\_richcompare\_scalar\_boolean\_singleton\_return():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09693}09693\ \ \ \ \ \textcolor{comment}{\#\ These\ are\ currently\ guaranteed\ to\ be\ the\ boolean\ singletons,\ but\ maybe}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09694}09694\ \ \ \ \ \textcolor{comment}{\#\ returning\ NumPy\ booleans\ would\ also\ be\ OK:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09695}09695\ \ \ \ \ \textcolor{keyword}{assert}\ (np.array(0)\ ==\ \textcolor{stringliteral}{"{}a"{}})\ \textcolor{keywordflow}{is}\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09696}09696\ \ \ \ \ \textcolor{keyword}{assert}\ (np.array(0)\ !=\ \textcolor{stringliteral}{"{}a"{}})\ \textcolor{keywordflow}{is}\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09697}09697\ \ \ \ \ \textcolor{keyword}{assert}\ (np.int16(0)\ ==\ \textcolor{stringliteral}{"{}a"{}})\ \textcolor{keywordflow}{is}\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09698}09698\ \ \ \ \ \textcolor{keyword}{assert}\ (np.int16(0)\ !=\ \textcolor{stringliteral}{"{}a"{}})\ \textcolor{keywordflow}{is}\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09699}09699\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09700}09700\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09701}09701\ \textcolor{preprocessor}{@pytest.mark.parametrize}(\textcolor{stringliteral}{"{}op"{}},\ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09702}09702\ \ \ \ \ \ \ \ \ operator.eq,\ operator.ne,\ operator.le,\ operator.lt,\ operator.ge,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09703}09703\ \ \ \ \ \ \ \ \ operator.gt])}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09704}09704\ \textcolor{keyword}{def\ }test\_ragged\_comparison\_fails(op):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09705}09705\ \ \ \ \ \textcolor{comment}{\#\ This\ needs\ to\ convert\ the\ internal\ array\ to\ True/False,\ which\ fails:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09706}09706\ \ \ \ \ a\ =\ np.array([1,\ np.array([1,\ 2,\ 3])],\ dtype=object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09707}09707\ \ \ \ \ b\ =\ np.array([1,\ np.array([1,\ 2,\ 3])],\ dtype=object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09708}09708\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09709}09709\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError,\ match=\textcolor{stringliteral}{"{}The\ truth\ value.*ambiguous"{}}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09710}09710\ \ \ \ \ \ \ \ \ op(a,\ b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09711}09711\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09712}09712\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09713}09713\ \textcolor{preprocessor}{@pytest.mark.parametrize}(}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09714}09714\ \ \ \ \ [\textcolor{stringliteral}{"{}fun"{}},\ \textcolor{stringliteral}{"{}npfun"{}}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09715}09715\ \ \ \ \ [}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09716}09716\ \ \ \ \ \ \ \ \ (\_multiarray\_tests.npy\_cabs,\ np.absolute),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09717}09717\ \ \ \ \ \ \ \ \ (\_multiarray\_tests.npy\_carg,\ np.angle)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09718}09718\ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09719}09719\ )}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09720}09720\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}x"{},\ [1,\ np.inf,\ -\/np.inf,\ np.nan])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09721}09721\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}y"{},\ [1,\ np.inf,\ -\/np.inf,\ np.nan])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09722}09722\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}test\_dtype"{},\ np.complexfloating.\_\_subclasses\_\_()})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09723}09723\ \textcolor{keyword}{def\ }test\_npymath\_complex(fun,\ npfun,\ x,\ y,\ test\_dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09724}09724\ \ \ \ \ \textcolor{comment}{\#\ Smoketest\ npymath\ functions}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09725}09725\ \ \ \ \ z\ =\ test\_dtype(complex(x,\ y))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09726}09726\ \ \ \ \ \textcolor{keyword}{with}\ np.errstate(invalid=\textcolor{stringliteral}{'ignore'}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09727}09727\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Fallback\ implementations\ may\ emit\ a\ warning\ for\ +-\/inf\ (see\ gh-\/24876):}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09728}09728\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ \ \ RuntimeWarning:\ invalid\ value\ encountered\ in\ absolute}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09729}09729\ \ \ \ \ \ \ \ \ got\ =\ fun(z)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09730}09730\ \ \ \ \ \ \ \ \ expected\ =\ npfun(z)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09731}09731\ \ \ \ \ \ \ \ \ assert\_allclose(got,\ expected)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09732}09732\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09733}09733\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09734}09734\ \textcolor{keyword}{def\ }test\_npymath\_real():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09735}09735\ \ \ \ \ \textcolor{comment}{\#\ Smoketest\ npymath\ functions}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09736}09736\ \ \ \ \ \textcolor{keyword}{from}\ numpy.core.\_multiarray\_tests\ \textcolor{keyword}{import}\ (}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09737}09737\ \ \ \ \ \ \ \ \ npy\_log10,\ npy\_cosh,\ npy\_sinh,\ npy\_tan,\ npy\_tanh)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09738}09738\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09739}09739\ \ \ \ \ funcs\ =\ \{npy\_log10:\ np.log10,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09740}09740\ \ \ \ \ \ \ \ \ \ \ \ \ \ npy\_cosh:\ np.cosh,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09741}09741\ \ \ \ \ \ \ \ \ \ \ \ \ \ npy\_sinh:\ np.sinh,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09742}09742\ \ \ \ \ \ \ \ \ \ \ \ \ \ npy\_tan:\ np.tan,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09743}09743\ \ \ \ \ \ \ \ \ \ \ \ \ \ npy\_tanh:\ np.tanh\}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09744}09744\ \ \ \ \ vals\ =\ (1,\ np.inf,\ -\/np.inf,\ np.nan)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09745}09745\ \ \ \ \ types\ =\ (np.float32,\ np.float64,\ np.longdouble)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09746}09746\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09747}09747\ \ \ \ \ \textcolor{keyword}{with}\ np.errstate(all=\textcolor{stringliteral}{'ignore'}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09748}09748\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ fun,\ npfun\ \textcolor{keywordflow}{in}\ funcs.items():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09749}09749\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ x,\ t\ \textcolor{keywordflow}{in}\ itertools.product(vals,\ types):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09750}09750\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ z\ =\ t(x)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09751}09751\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ got\ =\ fun(z)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09752}09752\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ expected\ =\ npfun(z)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09753}09753\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_allclose(got,\ expected)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09754}09754\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09755}09755\ \textcolor{keyword}{def\ }test\_uintalignment\_and\_alignment():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09756}09756\ \ \ \ \ \textcolor{comment}{\#\ alignment\ code\ needs\ to\ satisfy\ these\ requirements:}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09757}09757\ \ \ \ \ \textcolor{comment}{\#\ \ 1.\ numpy\ structs\ match\ C\ struct\ layout}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09758}09758\ \ \ \ \ \textcolor{comment}{\#\ \ 2.\ ufuncs/casting\ is\ safe\ wrt\ to\ aligned\ access}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09759}09759\ \ \ \ \ \textcolor{comment}{\#\ \ 3.\ copy\ code\ is\ safe\ wrt\ to\ "{}uint\ alidned"{}\ access}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09760}09760\ \ \ \ \ \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09761}09761\ \ \ \ \ \textcolor{comment}{\#\ Complex\ types\ are\ the\ main\ problem,\ whose\ alignment\ may\ not\ be\ the\ same}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09762}09762\ \ \ \ \ \textcolor{comment}{\#\ as\ their\ "{}uint\ alignment"{}.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09763}09763\ \ \ \ \ \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09764}09764\ \ \ \ \ \textcolor{comment}{\#\ This\ test\ might\ only\ fail\ on\ certain\ platforms,\ where\ uint64\ alignment\ is}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09765}09765\ \ \ \ \ \textcolor{comment}{\#\ not\ equal\ to\ complex64\ alignment.\ The\ second\ 2\ tests\ will\ only\ fail}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09766}09766\ \ \ \ \ \textcolor{comment}{\#\ for\ DEBUG=1.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09767}09767\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09768}09768\ \ \ \ \ d1\ =\ np.dtype(\textcolor{stringliteral}{'u1,c8'},\ align=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09769}09769\ \ \ \ \ d2\ =\ np.dtype(\textcolor{stringliteral}{'u4,c8'},\ align=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09770}09770\ \ \ \ \ d3\ =\ np.dtype(\{\textcolor{stringliteral}{'names'}:\ [\textcolor{stringliteral}{'a'},\ \textcolor{stringliteral}{'b'}],\ \textcolor{stringliteral}{'formats'}:\ [\textcolor{stringliteral}{'u1'},\ d1]\},\ align=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09771}09771\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09772}09772\ \ \ \ \ assert\_equal(np.zeros(1,\ dtype=d1)[\textcolor{stringliteral}{'f1'}].flags[\textcolor{stringliteral}{'ALIGNED'}],\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09773}09773\ \ \ \ \ assert\_equal(np.zeros(1,\ dtype=d2)[\textcolor{stringliteral}{'f1'}].flags[\textcolor{stringliteral}{'ALIGNED'}],\ \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09774}09774\ \ \ \ \ assert\_equal(np.zeros(1,\ dtype=\textcolor{stringliteral}{'u1,c8'})[\textcolor{stringliteral}{'f1'}].flags[\textcolor{stringliteral}{'ALIGNED'}],\ \textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09775}09775\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09776}09776\ \ \ \ \ \textcolor{comment}{\#\ check\ that\ C\ struct\ matches\ numpy\ struct\ size}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09777}09777\ \ \ \ \ s\ =\ \_multiarray\_tests.get\_struct\_alignments()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09778}09778\ \ \ \ \ \textcolor{keywordflow}{for}\ d,\ (alignment,\ size)\ \textcolor{keywordflow}{in}\ zip([d1,d2,d3],\ s):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09779}09779\ \ \ \ \ \ \ \ \ assert\_equal(d.alignment,\ alignment)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09780}09780\ \ \ \ \ \ \ \ \ assert\_equal(d.itemsize,\ size)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09781}09781\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09782}09782\ \ \ \ \ \textcolor{comment}{\#\ check\ that\ ufuncs\ don't\ complain\ in\ debug\ mode}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09783}09783\ \ \ \ \ \textcolor{comment}{\#\ (this\ is\ probably\ OK\ if\ the\ aligned\ flag\ is\ true\ above)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09784}09784\ \ \ \ \ src\ =\ np.zeros((2,2),\ dtype=d1)[\textcolor{stringliteral}{'f1'}]\ \ \textcolor{comment}{\#\ 4-\/byte\ aligned,\ often}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09785}09785\ \ \ \ \ np.exp(src)\ \ \textcolor{comment}{\#\ assert\ fails?}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09786}09786\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09787}09787\ \ \ \ \ \textcolor{comment}{\#\ check\ that\ copy\ code\ doesn't\ complain\ in\ debug\ mode}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09788}09788\ \ \ \ \ dst\ =\ np.zeros((2,2),\ dtype=\textcolor{stringliteral}{'c8'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09789}09789\ \ \ \ \ dst[:,1]\ =\ src[:,1]\ \ \textcolor{comment}{\#\ assert\ in\ lowlevel\_strided\_loops\ fails?}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09790}09790\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09791}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAlignment}{09791}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAlignment}{TestAlignment}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09792}09792\ \ \ \ \ \textcolor{comment}{\#\ adapted\ from\ scipy.\_lib.tests.test\_\_util.test\_\_aligned\_zeros}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09793}09793\ \ \ \ \ \textcolor{comment}{\#\ Checks\ that\ unusual\ memory\ alignments\ don't\ trip\ up\ numpy.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09794}09794\ \ \ \ \ \textcolor{comment}{\#\ In\ particular,\ check\ RELAXED\_STRIDES\ don't\ trip\ alignment\ assertions\ in}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09795}09795\ \ \ \ \ \textcolor{comment}{\#\ NDEBUG\ mode\ for\ size-\/0\ arrays\ (gh-\/12503)}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09796}09796\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09797}09797\ \ \ \ \ \textcolor{keyword}{def\ }check(self,\ shape,\ dtype,\ order,\ align):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09798}09798\ \ \ \ \ \ \ \ \ err\_msg\ =\ repr((shape,\ dtype,\ order,\ align))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09799}09799\ \ \ \ \ \ \ \ \ x\ =\ \mbox{\hyperlink{namespacenumpy_1_1core_1_1tests_1_1test__multiarray_a1b319b21145eee245865f85040bc64ab}{\_aligned\_zeros}}(shape,\ dtype,\ order,\ align=align)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09800}09800\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ align\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09801}09801\ \ \ \ \ \ \ \ \ \ \ \ \ align\ =\ np.dtype(dtype).alignment}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09802}09802\ \ \ \ \ \ \ \ \ assert\_equal(x.\_\_array\_interface\_\_[\textcolor{stringliteral}{'data'}][0]\ \%\ align,\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09803}09803\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ hasattr(shape,\ \textcolor{stringliteral}{'\_\_len\_\_'}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09804}09804\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(x.shape,\ shape,\ err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09805}09805\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09806}09806\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_equal(x.shape,\ (shape,),\ err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09807}09807\ \ \ \ \ \ \ \ \ assert\_equal(x.dtype,\ dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09808}09808\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ order\ ==\ \textcolor{stringliteral}{"{}C"{}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09809}09809\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(x.flags.c\_contiguous,\ err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09810}09810\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ order\ ==\ \textcolor{stringliteral}{"{}F"{}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09811}09811\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ x.size\ >\ 0:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09812}09812\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(x.flags.f\_contiguous,\ err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09813}09813\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ order\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09814}09814\ \ \ \ \ \ \ \ \ \ \ \ \ assert\_(x.flags.c\_contiguous,\ err\_msg)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09815}09815\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09816}09816\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classValueError}{ValueError}}()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09817}09817\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09818}09818\ \ \ \ \ \textcolor{keyword}{def\ }test\_various\_alignments(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09819}09819\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ align\ \textcolor{keywordflow}{in}\ [1,\ 2,\ 3,\ 4,\ 8,\ 12,\ 16,\ 32,\ 64,\ \textcolor{keywordtype}{None}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09820}09820\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ n\ \textcolor{keywordflow}{in}\ [0,\ 1,\ 3,\ 11]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09821}09821\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ order\ \textcolor{keywordflow}{in}\ [\textcolor{stringliteral}{"{}C"{}},\ \textcolor{stringliteral}{"{}F"{}},\ \textcolor{keywordtype}{None}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09822}09822\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dtype\ \textcolor{keywordflow}{in}\ list(np.typecodes[\textcolor{stringliteral}{"{}All"{}}])\ +\ [\textcolor{stringliteral}{'i4,i4,i4'}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09823}09823\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ dtype\ ==\ \textcolor{stringliteral}{'O'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09824}09824\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ object\ dtype\ can't\ be\ misaligned}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09825}09825\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09826}09826\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ shape\ \textcolor{keywordflow}{in}\ [n,\ (1,\ 2,\ 3,\ n)]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09827}09827\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestAlignment_a22bab8f544b115bdfdd6b63776121462}{check}}(shape,\ np.dtype(dtype),\ order,\ align)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09828}09828\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09829}09829\ \ \ \ \ \textcolor{keyword}{def\ }test\_strided\_loop\_alignments(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09830}09830\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ particularly\ test\ that\ complex64\ and\ float128\ use\ right\ alignment}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09831}09831\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ code-\/paths,\ since\ these\ are\ particularly\ problematic.\ It\ is\ useful\ to}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09832}09832\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ turn\ on\ USE\_DEBUG\ for\ this\ test,\ so\ lowlevel-\/loop\ asserts\ are\ run.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09833}09833\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ align\ \textcolor{keywordflow}{in}\ [1,\ 2,\ 4,\ 8,\ 12,\ 16,\ \textcolor{keywordtype}{None}]:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09834}09834\ \ \ \ \ \ \ \ \ \ \ \ \ xf64\ =\ \mbox{\hyperlink{namespacenumpy_1_1core_1_1tests_1_1test__multiarray_a1b319b21145eee245865f85040bc64ab}{\_aligned\_zeros}}(3,\ np.float64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09835}09835\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09836}09836\ \ \ \ \ \ \ \ \ \ \ \ \ xc64\ =\ \mbox{\hyperlink{namespacenumpy_1_1core_1_1tests_1_1test__multiarray_a1b319b21145eee245865f85040bc64ab}{\_aligned\_zeros}}(3,\ np.complex64,\ align=align)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09837}09837\ \ \ \ \ \ \ \ \ \ \ \ \ xf128\ =\ \mbox{\hyperlink{namespacenumpy_1_1core_1_1tests_1_1test__multiarray_a1b319b21145eee245865f85040bc64ab}{\_aligned\_zeros}}(3,\ np.longdouble,\ align=align)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09838}09838\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09839}09839\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ casting,\ both\ to\ and\ from\ misaligned}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09840}09840\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ \mbox{\hyperlink{classnumpy_1_1testing_1_1__private_1_1utils_1_1suppress__warnings}{suppress\_warnings}}()\ \textcolor{keyword}{as}\ sup:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09841}09841\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sup.filter(np.ComplexWarning,\ \textcolor{stringliteral}{"{}Casting\ complex\ values"{}})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09842}09842\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ xc64.astype(\textcolor{stringliteral}{'f8'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09843}09843\ \ \ \ \ \ \ \ \ \ \ \ \ xf64.astype(np.complex64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09844}09844\ \ \ \ \ \ \ \ \ \ \ \ \ test\ =\ xc64\ +\ xf64}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09845}09845\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09846}09846\ \ \ \ \ \ \ \ \ \ \ \ \ xf128.astype(\textcolor{stringliteral}{'f8'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09847}09847\ \ \ \ \ \ \ \ \ \ \ \ \ xf64.astype(np.longdouble)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09848}09848\ \ \ \ \ \ \ \ \ \ \ \ \ test\ =\ xf128\ +\ xf64}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09849}09849\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09850}09850\ \ \ \ \ \ \ \ \ \ \ \ \ test\ =\ xf128\ +\ xc64}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09851}09851\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09852}09852\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ test\ copy,\ both\ to\ and\ from\ misaligned}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09853}09853\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ contig\ copy}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09854}09854\ \ \ \ \ \ \ \ \ \ \ \ \ xf64[:]\ =\ xf64.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09855}09855\ \ \ \ \ \ \ \ \ \ \ \ \ xc64[:]\ =\ xc64.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09856}09856\ \ \ \ \ \ \ \ \ \ \ \ \ xf128[:]\ =\ xf128.copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09857}09857\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ strided\ copy}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09858}09858\ \ \ \ \ \ \ \ \ \ \ \ \ xf64[::2]\ =\ xf64[::2].copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09859}09859\ \ \ \ \ \ \ \ \ \ \ \ \ xc64[::2]\ =\ xc64[::2].copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09860}09860\ \ \ \ \ \ \ \ \ \ \ \ \ xf128[::2]\ =\ xf128[::2].copy()}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09861}09861\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09862}09862\ \textcolor{keyword}{def\ }test\_getfield():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09863}09863\ \ \ \ \ a\ =\ np.arange(32,\ dtype=\textcolor{stringliteral}{'uint16'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09864}09864\ \ \ \ \ \textcolor{keywordflow}{if}\ sys.byteorder\ ==\ \textcolor{stringliteral}{'little'}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09865}09865\ \ \ \ \ \ \ \ \ i\ =\ 0}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09866}09866\ \ \ \ \ \ \ \ \ j\ =\ 1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09867}09867\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09868}09868\ \ \ \ \ \ \ \ \ i\ =\ 1}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09869}09869\ \ \ \ \ \ \ \ \ j\ =\ 0}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09870}09870\ \ \ \ \ b\ =\ a.getfield(\textcolor{stringliteral}{'int8'},\ i)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09871}09871\ \ \ \ \ assert\_equal(b,\ a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09872}09872\ \ \ \ \ b\ =\ a.getfield(\textcolor{stringliteral}{'int8'},\ j)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09873}09873\ \ \ \ \ assert\_equal(b,\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09874}09874\ \ \ \ \ pytest.raises(ValueError,\ a.getfield,\ \textcolor{stringliteral}{'uint8'},\ -\/1)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09875}09875\ \ \ \ \ pytest.raises(ValueError,\ a.getfield,\ \textcolor{stringliteral}{'uint8'},\ 16)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09876}09876\ \ \ \ \ pytest.raises(ValueError,\ a.getfield,\ \textcolor{stringliteral}{'uint64'},\ 0)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09877}09877\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09878}09878\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09879}\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestViewDtype}{09879}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1TestViewDtype}{TestViewDtype}}:}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09880}09880\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09881}09881\ \textcolor{stringliteral}{\ \ \ \ Verify\ that\ making\ a\ view\ of\ a\ non-\/contiguous\ array\ works\ as\ expected.}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09882}09882\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09883}09883\ \ \ \ \ \textcolor{keyword}{def\ }test\_smaller\_dtype\_multiple(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09884}09884\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ x\ is\ non-\/contiguous}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09885}09885\ \ \ \ \ \ \ \ \ x\ =\ np.arange(10,\ dtype=\textcolor{stringliteral}{'<i4'})[::2]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09886}09886\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09887}09887\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ match=\textcolor{stringliteral}{'the\ last\ axis\ must\ be\ contiguous'}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09888}09888\ \ \ \ \ \ \ \ \ \ \ \ \ x.view(\textcolor{stringliteral}{'<i2'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09889}09889\ \ \ \ \ \ \ \ \ expected\ =\ [[0,\ 0],\ [2,\ 0],\ [4,\ 0],\ [6,\ 0],\ [8,\ 0]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09890}09890\ \ \ \ \ \ \ \ \ assert\_array\_equal(x[:,\ np.newaxis].view(\textcolor{stringliteral}{'<i2'}),\ expected)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09891}09891\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09892}09892\ \ \ \ \ \textcolor{keyword}{def\ }test\_smaller\_dtype\_not\_multiple(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09893}09893\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ x\ is\ non-\/contiguous}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09894}09894\ \ \ \ \ \ \ \ \ x\ =\ np.arange(5,\ dtype=\textcolor{stringliteral}{'<i4'})[::2]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09895}09895\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09896}09896\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09897}09897\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ match=\textcolor{stringliteral}{'the\ last\ axis\ must\ be\ contiguous'}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09898}09898\ \ \ \ \ \ \ \ \ \ \ \ \ x.view(\textcolor{stringliteral}{'S3'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09899}09899\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09900}09900\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ match=\textcolor{stringliteral}{'When\ changing\ to\ a\ smaller\ dtype'}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09901}09901\ \ \ \ \ \ \ \ \ \ \ \ \ x[:,\ np.newaxis].view(\textcolor{stringliteral}{'S3'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09902}09902\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09903}09903\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Make\ sure\ the\ problem\ is\ because\ of\ the\ dtype\ size}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09904}09904\ \ \ \ \ \ \ \ \ expected\ =\ [[b\textcolor{stringliteral}{''}],\ [b\textcolor{stringliteral}{'\(\backslash\)x02'}],\ [b\textcolor{stringliteral}{'\(\backslash\)x04'}]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09905}09905\ \ \ \ \ \ \ \ \ assert\_array\_equal(x[:,\ np.newaxis].view(\textcolor{stringliteral}{'S4'}),\ expected)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09906}09906\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09907}09907\ \ \ \ \ \textcolor{keyword}{def\ }test\_larger\_dtype\_multiple(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09908}09908\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ x\ is\ non-\/contiguous\ in\ the\ first\ dimension,\ contiguous\ in\ the\ last}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09909}09909\ \ \ \ \ \ \ \ \ x\ =\ np.arange(20,\ dtype=\textcolor{stringliteral}{'<i2'}).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(10,\ 2)[::2,\ :]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09910}09910\ \ \ \ \ \ \ \ \ expected\ =\ np.array([[65536],\ [327684],\ [589832],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09911}09911\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [851980],\ [1114128]],\ dtype=\textcolor{stringliteral}{'<i4'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09912}09912\ \ \ \ \ \ \ \ \ assert\_array\_equal(x.view(\textcolor{stringliteral}{'<i4'}),\ expected)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09913}09913\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09914}09914\ \ \ \ \ \textcolor{keyword}{def\ }test\_larger\_dtype\_not\_multiple(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09915}09915\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ x\ is\ non-\/contiguous\ in\ the\ first\ dimension,\ contiguous\ in\ the\ last}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09916}09916\ \ \ \ \ \ \ \ \ x\ =\ np.arange(20,\ dtype=\textcolor{stringliteral}{'<i2'}).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(10,\ 2)[::2,\ :]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09917}09917\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09918}09918\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ match=\textcolor{stringliteral}{'When\ changing\ to\ a\ larger\ dtype'}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09919}09919\ \ \ \ \ \ \ \ \ \ \ \ \ x.view(\textcolor{stringliteral}{'S3'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09920}09920\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Make\ sure\ the\ problem\ is\ because\ of\ the\ dtype\ size}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09921}09921\ \ \ \ \ \ \ \ \ expected\ =\ [[b\textcolor{stringliteral}{'\(\backslash\)x00\(\backslash\)x00\(\backslash\)x01'}],\ [b\textcolor{stringliteral}{'\(\backslash\)x04\(\backslash\)x00\(\backslash\)x05'}],\ [b\textcolor{stringliteral}{'\(\backslash\)x08\(\backslash\)x00\(\backslash\)t'}],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09922}09922\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [b\textcolor{stringliteral}{'\(\backslash\)x0c\(\backslash\)x00\(\backslash\)r'}],\ [b\textcolor{stringliteral}{'\(\backslash\)x10\(\backslash\)x00\(\backslash\)x11'}]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09923}09923\ \ \ \ \ \ \ \ \ assert\_array\_equal(x.view(\textcolor{stringliteral}{'S4'}),\ expected)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09924}09924\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09925}09925\ \ \ \ \ \textcolor{keyword}{def\ }test\_f\_contiguous(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09926}09926\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ x\ is\ F-\/contiguous}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09927}09927\ \ \ \ \ \ \ \ \ x\ =\ np.arange(4\ *\ 3,\ dtype=\textcolor{stringliteral}{'<i4'}).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(4,\ 3).T}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09928}09928\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(ValueError,}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09929}09929\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ match=\textcolor{stringliteral}{'the\ last\ axis\ must\ be\ contiguous'}):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09930}09930\ \ \ \ \ \ \ \ \ \ \ \ \ x.view(\textcolor{stringliteral}{'<i2'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09931}09931\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09932}09932\ \ \ \ \ \textcolor{keyword}{def\ }test\_non\_c\_contiguous(self):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09933}09933\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ x\ is\ contiguous\ in\ axis=-\/1,\ but\ not\ C-\/contiguous\ in\ other\ axes}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09934}09934\ \ \ \ \ \ \ \ \ x\ =\ np.arange(2\ *\ 3\ *\ 4,\ dtype=\textcolor{stringliteral}{'i1'}).\(\backslash\)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09935}09935\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a805221e91ab6019b13c120c9f6e2cc67}{reshape}}(2,\ 3,\ 4).\mbox{\hyperlink{namespacenumpy_1_1core_1_1fromnumeric_a841d0800caffc28ceef9afb4731e6ed5}{transpose}}(1,\ 0,\ 2)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09936}09936\ \ \ \ \ \ \ \ \ expected\ =\ [[[256,\ 770],\ [3340,\ 3854]],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09937}09937\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[1284,\ 1798],\ [4368,\ 4882]],}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09938}09938\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [[2312,\ 2826],\ [5396,\ 5910]]]}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09939}09939\ \ \ \ \ \ \ \ \ assert\_array\_equal(x.view(\textcolor{stringliteral}{'<i2'}),\ expected)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09940}09940\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09941}09941\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09942}09942\ \textcolor{preprocessor}{@pytest.mark.xfail(\_SUPPORTS\_SVE,\ reason="{}gh-\/22982"{})}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09943}09943\ \textcolor{comment}{\#\ Test\ various\ array\ sizes\ that\ hit\ different\ code\ paths\ in\ quicksort-\/avx512}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09944}09944\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}N"{},\ np.arange(1,\ 512)})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09945}09945\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}dtype"{},\ ['e',\ 'f',\ 'd'])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09946}09946\ \textcolor{keyword}{def\ }test\_sort\_float(N,\ dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09947}09947\ \ \ \ \ \textcolor{comment}{\#\ Regular\ data\ with\ nan\ sprinkled}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09948}09948\ \ \ \ \ np.random.seed(42)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09949}09949\ \ \ \ \ arr\ =\ -\/0.5\ +\ np.random.sample(N).astype(dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09950}09950\ \ \ \ \ arr[np.random.choice(arr.shape[0],\ 3)]\ =\ np.nan}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09951}09951\ \ \ \ \ assert\_equal(np.sort(arr,\ kind=\textcolor{stringliteral}{'quick'}),\ np.sort(arr,\ kind=\textcolor{stringliteral}{'heap'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09952}09952\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09953}09953\ \ \ \ \ \textcolor{comment}{\#\ (2)\ with\ +INF}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09954}09954\ \ \ \ \ infarr\ =\ np.inf*np.ones(N,\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09955}09955\ \ \ \ \ infarr[np.random.choice(infarr.shape[0],\ 5)]\ =\ -\/1.0}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09956}09956\ \ \ \ \ assert\_equal(np.sort(infarr,\ kind=\textcolor{stringliteral}{'quick'}),\ np.sort(infarr,\ kind=\textcolor{stringliteral}{'heap'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09957}09957\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09958}09958\ \ \ \ \ \textcolor{comment}{\#\ (3)\ with\ -\/INF}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09959}09959\ \ \ \ \ neginfarr\ =\ -\/np.inf*np.ones(N,\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09960}09960\ \ \ \ \ neginfarr[np.random.choice(neginfarr.shape[0],\ 5)]\ =\ 1.0}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09961}09961\ \ \ \ \ assert\_equal(np.sort(neginfarr,\ kind=\textcolor{stringliteral}{'quick'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09962}09962\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.sort(neginfarr,\ kind=\textcolor{stringliteral}{'heap'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09963}09963\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09964}09964\ \ \ \ \ \textcolor{comment}{\#\ (4)\ with\ +/-\/INF}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09965}09965\ \ \ \ \ infarr\ =\ np.inf*np.ones(N,\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09966}09966\ \ \ \ \ infarr[np.random.choice(infarr.shape[0],\ (int)(N/2))]\ =\ -\/np.inf}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09967}09967\ \ \ \ \ assert\_equal(np.sort(infarr,\ kind=\textcolor{stringliteral}{'quick'}),\ np.sort(infarr,\ kind=\textcolor{stringliteral}{'heap'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09968}09968\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09969}09969\ \textcolor{keyword}{def\ }test\_sort\_float16():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09970}09970\ \ \ \ \ arr\ =\ np.arange(65536,\ dtype=np.int16)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09971}09971\ \ \ \ \ temp\ =\ np.frombuffer(arr.tobytes(),\ dtype=np.float16)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09972}09972\ \ \ \ \ data\ =\ np.copy(temp)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09973}09973\ \ \ \ \ np.random.shuffle(data)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09974}09974\ \ \ \ \ data\_backup\ =\ data}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09975}09975\ \ \ \ \ assert\_equal(np.sort(data,\ kind=\textcolor{stringliteral}{'quick'}),}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09976}09976\ \ \ \ \ \ \ \ \ \ \ \ \ np.sort(data\_backup,\ kind=\textcolor{stringliteral}{'heap'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09977}09977\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09978}09978\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09979}09979\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}N"{},\ np.arange(1,\ 512)})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09980}09980\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}dtype"{},\ ['h',\ 'H',\ 'i',\ 'I',\ 'l',\ 'L'])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09981}09981\ \textcolor{keyword}{def\ }test\_sort\_int(N,\ dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09982}09982\ \ \ \ \ \textcolor{comment}{\#\ Random\ data\ with\ MAX\ and\ MIN\ sprinkled}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09983}09983\ \ \ \ \ minv\ =\ np.iinfo(dtype).min}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09984}09984\ \ \ \ \ maxv\ =\ np.iinfo(dtype).max}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09985}09985\ \ \ \ \ arr\ =\ np.random.randint(low=minv,\ high=maxv-\/1,\ size=N,\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09986}09986\ \ \ \ \ arr[np.random.choice(arr.shape[0],\ 10)]\ =\ minv}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09987}09987\ \ \ \ \ arr[np.random.choice(arr.shape[0],\ 10)]\ =\ maxv}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09988}09988\ \ \ \ \ assert\_equal(np.sort(arr,\ kind=\textcolor{stringliteral}{'quick'}),\ np.sort(arr,\ kind=\textcolor{stringliteral}{'heap'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09989}09989\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09990}09990\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09991}09991\ \textcolor{keyword}{def\ }test\_sort\_uint():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09992}09992\ \ \ \ \ \textcolor{comment}{\#\ Random\ data\ with\ NPY\_MAX\_UINT32\ sprinkled}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09993}09993\ \ \ \ \ rng\ =\ np.random.default\_rng(42)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09994}09994\ \ \ \ \ N\ =\ 2047}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09995}09995\ \ \ \ \ maxv\ =\ np.iinfo(np.uint32).max}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09996}09996\ \ \ \ \ arr\ =\ rng.integers(low=0,\ high=maxv,\ size=N).astype(\textcolor{stringliteral}{'uint32'})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09997}09997\ \ \ \ \ arr[np.random.choice(arr.shape[0],\ 10)]\ =\ maxv}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09998}09998\ \ \ \ \ assert\_equal(np.sort(arr,\ kind=\textcolor{stringliteral}{'quick'}),\ np.sort(arr,\ kind=\textcolor{stringliteral}{'heap'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l09999}09999\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10000}10000\ \textcolor{keyword}{def\ }test\_private\_get\_ndarray\_c\_version():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10001}10001\ \ \ \ \ \textcolor{keyword}{assert}\ isinstance(\_get\_ndarray\_c\_version(),\ int)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10002}10002\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10003}10003\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10004}10004\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}N"{},\ np.arange(1,\ 512)})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10005}10005\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}dtype"{},\ [np.float32,\ np.float64])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10006}10006\ \textcolor{keyword}{def\ }test\_argsort\_float(N,\ dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10007}10007\ \ \ \ \ rnd\ =\ np.random.RandomState(116112)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10008}10008\ \ \ \ \ \textcolor{comment}{\#\ (1)\ Regular\ data\ with\ a\ few\ nan:\ doesn't\ use\ vectorized\ sort}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10009}10009\ \ \ \ \ arr\ =\ -\/0.5\ +\ rnd.random(N).astype(dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10010}10010\ \ \ \ \ arr[rnd.choice(arr.shape[0],\ 3)]\ =\ np.nan}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10011}10011\ \ \ \ \ assert\_arg\_sorted(arr,\ np.argsort(arr,\ kind=\textcolor{stringliteral}{'quick'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10012}10012\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10013}10013\ \ \ \ \ \textcolor{comment}{\#\ (2)\ Random\ data\ with\ inf\ at\ the\ end\ of\ array}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10014}10014\ \ \ \ \ \textcolor{comment}{\#\ See:\ https://github.com/intel/x86-\/simd-\/sort/pull/39}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10015}10015\ \ \ \ \ arr\ =\ -\/0.5\ +\ rnd.rand(N).astype(dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10016}10016\ \ \ \ \ arr[N-\/1]\ =\ np.inf}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10017}10017\ \ \ \ \ assert\_arg\_sorted(arr,\ np.argsort(arr,\ kind=\textcolor{stringliteral}{'quick'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10018}10018\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10019}10019\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10020}10020\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}N"{},\ np.arange(2,\ 512)})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10021}10021\ \textcolor{preprocessor}{@pytest.mark.parametrize("{}dtype"{},\ [np.int32,\ np.uint32,\ np.int64,\ np.uint64])}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10022}10022\ \textcolor{keyword}{def\ }test\_argsort\_int(N,\ dtype):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10023}10023\ \ \ \ \ rnd\ =\ np.random.RandomState(1100710816)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10024}10024\ \ \ \ \ \textcolor{comment}{\#\ (1)\ random\ data\ with\ min\ and\ max\ values}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10025}10025\ \ \ \ \ minv\ =\ np.iinfo(dtype).min}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10026}10026\ \ \ \ \ maxv\ =\ np.iinfo(dtype).max}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10027}10027\ \ \ \ \ arr\ =\ rnd.randint(low=minv,\ high=maxv,\ size=N,\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10028}10028\ \ \ \ \ i,\ j\ =\ rnd.choice(N,\ 2,\ replace=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10029}10029\ \ \ \ \ arr[i]\ =\ minv}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10030}10030\ \ \ \ \ arr[j]\ =\ maxv}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10031}10031\ \ \ \ \ assert\_arg\_sorted(arr,\ np.argsort(arr,\ kind=\textcolor{stringliteral}{'quick'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10032}10032\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10033}10033\ \ \ \ \ \textcolor{comment}{\#\ (2)\ random\ data\ with\ max\ value\ at\ the\ end\ of\ array}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10034}10034\ \ \ \ \ \textcolor{comment}{\#\ See:\ https://github.com/intel/x86-\/simd-\/sort/pull/39}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10035}10035\ \ \ \ \ arr\ =\ rnd.randint(low=minv,\ high=maxv,\ size=N,\ dtype=dtype)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10036}10036\ \ \ \ \ arr[N-\/1]\ =\ maxv}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10037}10037\ \ \ \ \ assert\_arg\_sorted(arr,\ np.argsort(arr,\ kind=\textcolor{stringliteral}{'quick'}))}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10038}10038\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10039}10039\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10040}10040\ \textcolor{preprocessor}{@pytest.mark.skipif(not\ HAS\_REFCOUNT,\ reason="{}Python\ lacks\ refcounts"{})}}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10041}10041\ \textcolor{keyword}{def\ }test\_gh\_22683():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10042}10042\ \ \ \ \ b\ =\ 777.68760986}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10043}10043\ \ \ \ \ a\ =\ np.array([b]\ *\ 10000,\ dtype=object)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10044}10044\ \ \ \ \ refc\_start\ =\ sys.getrefcount(b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10045}10045\ \ \ \ \ np.choose(np.zeros(10000,\ dtype=int),\ [a],\ out=a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10046}10046\ \ \ \ \ np.choose(np.zeros(10000,\ dtype=int),\ [a],\ out=a)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10047}10047\ \ \ \ \ refc\_end\ =\ sys.getrefcount(b)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10048}10048\ \ \ \ \ \textcolor{keyword}{assert}\ refc\_end\ -\/\ refc\_start\ <\ 10}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10049}10049\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10050}10050\ }
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10051}10051\ \textcolor{keyword}{def\ }test\_gh\_24459():}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10052}10052\ \ \ \ \ a\ =\ np.zeros((50,\ 3),\ dtype=np.float64)}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10053}10053\ \ \ \ \ \textcolor{keyword}{with}\ pytest.raises(TypeError):}
\DoxyCodeLine{\Hypertarget{core_2tests_2test__multiarray_8py_source_l10054}10054\ \ \ \ \ \ \ \ \ np.choose(a,\ [3,\ -\/1])}

\end{DoxyCode}
