\doxysection{melt.\+py}
\hypertarget{melt_8py_source}{}\label{melt_8py_source}\index{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/pandas/core/reshape/melt.py@{/home/jam/Research/IRES-\/2025/dev/src/llm-\/scripts/testing/hypothesis-\/testing/hyp-\/env/lib/python3.12/site-\/packages/pandas/core/reshape/melt.py}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00001}\mbox{\hyperlink{namespacepandas_1_1core_1_1reshape_1_1melt}{00001}}\ \textcolor{keyword}{from}\ \_\_future\_\_\ \textcolor{keyword}{import}\ annotations}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00003}00003\ \textcolor{keyword}{import}\ re}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00004}00004\ \textcolor{keyword}{from}\ typing\ \textcolor{keyword}{import}\ TYPE\_CHECKING}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00005}00005\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00006}00006\ \textcolor{keyword}{import}\ numpy\ \textcolor{keyword}{as}\ np}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00007}00007\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00008}00008\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacepandas_1_1util_1_1__decorators}{pandas.util.\_decorators}}\ \textcolor{keyword}{import}\ Appender}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00009}00009\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00010}00010\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacepandas_1_1core_1_1dtypes_1_1common}{pandas.core.dtypes.common}}\ \textcolor{keyword}{import}\ is\_list\_like}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00011}00011\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacepandas_1_1core_1_1dtypes_1_1concat}{pandas.core.dtypes.concat}}\ \textcolor{keyword}{import}\ concat\_compat}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00012}00012\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacepandas_1_1core_1_1dtypes_1_1missing}{pandas.core.dtypes.missing}}\ \textcolor{keyword}{import}\ notna}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00013}00013\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00014}00014\ \textcolor{keyword}{import}\ \mbox{\hyperlink{namespacepandas_1_1core_1_1algorithms}{pandas.core.algorithms}}\ \textcolor{keyword}{as}\ algos}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00015}00015\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacepandas_1_1core_1_1indexes_1_1api}{pandas.core.indexes.api}}\ \textcolor{keyword}{import}\ MultiIndex}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00016}00016\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacepandas_1_1core_1_1reshape_1_1concat}{pandas.core.reshape.concat}}\ \textcolor{keyword}{import}\ concat}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00017}00017\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacepandas_1_1core_1_1reshape_1_1util}{pandas.core.reshape.util}}\ \textcolor{keyword}{import}\ tile\_compat}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00018}00018\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacepandas_1_1core_1_1shared__docs}{pandas.core.shared\_docs}}\ \textcolor{keyword}{import}\ \_shared\_docs}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00019}00019\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacepandas_1_1core_1_1tools_1_1numeric}{pandas.core.tools.numeric}}\ \textcolor{keyword}{import}\ to\_numeric}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00020}00020\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00021}00021\ \textcolor{keywordflow}{if}\ TYPE\_CHECKING:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00022}00022\ \ \ \ \ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacecollections_1_1abc}{collections.abc}}\ \textcolor{keyword}{import}\ Hashable}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00024}00024\ \ \ \ \ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacepandas_1_1__typing}{pandas.\_typing}}\ \textcolor{keyword}{import}\ AnyArrayLike}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00025}00025\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00026}00026\ \ \ \ \ \textcolor{keyword}{from}\ pandas\ \textcolor{keyword}{import}\ DataFrame}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00027}00027\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00028}00028\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00029}00029\ \textcolor{keyword}{def\ }ensure\_list\_vars(arg\_vars,\ variable:\ str,\ columns)\ -\/>\ list:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00030}00030\ \ \ \ \ \textcolor{keywordflow}{if}\ arg\_vars\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00031}00031\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ is\_list\_like(arg\_vars):}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00032}00032\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [arg\_vars]}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00033}00033\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ isinstance(columns,\ MultiIndex)\ \textcolor{keywordflow}{and}\ \textcolor{keywordflow}{not}\ isinstance(arg\_vars,\ list):}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00034}00034\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classValueError}{ValueError}}(}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00035}00035\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ f\textcolor{stringliteral}{"{}\{variable\}\ must\ be\ a\ list\ of\ tuples\ when\ columns\ are\ a\ MultiIndex"{}}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00036}00036\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00037}00037\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00038}00038\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ list(arg\_vars)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00039}00039\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00040}00040\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ []}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00041}00041\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00043}00043\ \textcolor{preprocessor}{@Appender(\_shared\_docs["{}melt"{}]\ \%\ \{"{}caller"{}:\ "{}pd.melt(df,\ "{},\ "{}other"{}:\ "{}DataFrame.melt"{}\})}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00044}00044\ \textcolor{keyword}{def\ }melt(}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00045}00045\ \ \ \ \ frame:\ DataFrame,}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00046}00046\ \ \ \ \ id\_vars=\textcolor{keywordtype}{None},}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00047}00047\ \ \ \ \ value\_vars=\textcolor{keywordtype}{None},}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00048}00048\ \ \ \ \ var\_name=\textcolor{keywordtype}{None},}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00049}00049\ \ \ \ \ value\_name:\ Hashable\ =\ \textcolor{stringliteral}{"{}value"{}},}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00050}00050\ \ \ \ \ col\_level=\textcolor{keywordtype}{None},}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00051}00051\ \ \ \ \ ignore\_index:\ bool\ =\ \textcolor{keyword}{True},}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00052}00052\ )\ -\/>\ DataFrame:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00053}00053\ \ \ \ \ \textcolor{keywordflow}{if}\ value\_name\ \textcolor{keywordflow}{in}\ frame.columns:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00054}00054\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classValueError}{ValueError}}(}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00055}00055\ \ \ \ \ \ \ \ \ \ \ \ \ f\textcolor{stringliteral}{"{}value\_name\ (\{value\_name\})\ cannot\ match\ an\ element\ in\ "{}}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00056}00056\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}the\ DataFrame\ columns."{}}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00057}00057\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00058}00058\ \ \ \ \ id\_vars\ =\ ensure\_list\_vars(id\_vars,\ \textcolor{stringliteral}{"{}id\_vars"{}},\ frame.columns)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00059}00059\ \ \ \ \ value\_vars\_was\_not\_none\ =\ value\_vars\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00060}00060\ \ \ \ \ value\_vars\ =\ ensure\_list\_vars(value\_vars,\ \textcolor{stringliteral}{"{}value\_vars"{}},\ frame.columns)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00061}00061\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00062}00062\ \ \ \ \ \textcolor{keywordflow}{if}\ id\_vars\ \textcolor{keywordflow}{or}\ value\_vars:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00063}00063\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ col\_level\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00064}00064\ \ \ \ \ \ \ \ \ \ \ \ \ level\ =\ frame.columns.get\_level\_values(col\_level)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00065}00065\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00066}00066\ \ \ \ \ \ \ \ \ \ \ \ \ level\ =\ frame.columns}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00067}00067\ \ \ \ \ \ \ \ \ labels\ =\ id\_vars\ +\ value\_vars}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00068}00068\ \ \ \ \ \ \ \ \ idx\ =\ level.get\_indexer\_for(labels)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00069}00069\ \ \ \ \ \ \ \ \ missing\ =\ idx\ ==\ -\/1}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00070}00070\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ missing.any():}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00071}00071\ \ \ \ \ \ \ \ \ \ \ \ \ missing\_labels\ =\ [}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00072}00072\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ lab\ \textcolor{keywordflow}{for}\ lab,\ not\_found\ \textcolor{keywordflow}{in}\ zip(labels,\ missing)\ \textcolor{keywordflow}{if}\ not\_found}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00073}00073\ \ \ \ \ \ \ \ \ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00074}00074\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classKeyError}{KeyError}}(}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00075}00075\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}The\ following\ id\_vars\ or\ value\_vars\ are\ not\ present\ in\ "{}}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00076}00076\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ f\textcolor{stringliteral}{"{}the\ DataFrame:\ \{missing\_labels\}"{}}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00077}00077\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00078}00078\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ value\_vars\_was\_not\_none:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00079}00079\ \ \ \ \ \ \ \ \ \ \ \ \ frame\ =\ frame.iloc[:,\ algos.unique(idx)]}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00080}00080\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00081}00081\ \ \ \ \ \ \ \ \ \ \ \ \ frame\ =\ frame.copy()}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00082}00082\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00083}00083\ \ \ \ \ \ \ \ \ frame\ =\ frame.copy()}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00084}00084\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00085}00085\ \ \ \ \ \textcolor{keywordflow}{if}\ col\_level\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}:\ \ \textcolor{comment}{\#\ allow\ list\ or\ other?}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00086}00086\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ frame\ is\ a\ copy}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00087}00087\ \ \ \ \ \ \ \ \ frame.columns\ =\ frame.columns.get\_level\_values(col\_level)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00088}00088\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00089}00089\ \ \ \ \ \textcolor{keywordflow}{if}\ var\_name\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00090}00090\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ isinstance(frame.columns,\ MultiIndex):}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00091}00091\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ len(frame.columns.names)\ ==\ len(set(frame.columns.names)):}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00092}00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\_name\ =\ frame.columns.names}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00093}00093\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00094}00094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\_name\ =\ [f\textcolor{stringliteral}{"{}variable\_\{i\}"{}}\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(len(frame.columns.names))]}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00095}00095\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00096}00096\ \ \ \ \ \ \ \ \ \ \ \ \ var\_name\ =\ [}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00097}00097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ frame.columns.name\ \textcolor{keywordflow}{if}\ frame.columns.name\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}\ \textcolor{keywordflow}{else}\ \textcolor{stringliteral}{"{}variable"{}}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00098}00098\ \ \ \ \ \ \ \ \ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00099}00099\ \ \ \ \ \textcolor{keywordflow}{elif}\ is\_list\_like(var\_name):}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00100}00100\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classValueError}{ValueError}}(f\textcolor{stringliteral}{"{}\{var\_name=\}\ must\ be\ a\ scalar."{}})}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00101}00101\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00102}00102\ \ \ \ \ \ \ \ \ var\_name\ =\ [var\_name]}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00103}00103\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00104}00104\ \ \ \ \ num\_rows,\ K\ =\ frame.shape}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00105}00105\ \ \ \ \ num\_cols\_adjusted\ =\ K\ -\/\ len(id\_vars)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00106}00106\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00107}00107\ \ \ \ \ mdata:\ dict[Hashable,\ AnyArrayLike]\ =\ \{\}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00108}00108\ \ \ \ \ \textcolor{keywordflow}{for}\ col\ \textcolor{keywordflow}{in}\ id\_vars:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00109}00109\ \ \ \ \ \ \ \ \ id\_data\ =\ frame.pop(col)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00110}00110\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ isinstance(id\_data.dtype,\ np.dtype):}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00111}00111\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ i.e.\ ExtensionDtype}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00112}00112\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ num\_cols\_adjusted\ >\ 0:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00113}00113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mdata[col]\ =\ concat([id\_data]\ *\ num\_cols\_adjusted,\ ignore\_index=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00114}00114\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00115}00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ We\ can't\ concat\ empty\ list.\ (GH\ 46044)}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00116}00116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mdata[col]\ =\ type(id\_data)([],\ name=id\_data.name,\ dtype=id\_data.dtype)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00117}00117\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00118}00118\ \ \ \ \ \ \ \ \ \ \ \ \ mdata[col]\ =\ np.tile(id\_data.\_values,\ num\_cols\_adjusted)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00119}00119\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00120}00120\ \ \ \ \ mcolumns\ =\ id\_vars\ +\ var\_name\ +\ [value\_name]}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00121}00121\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00122}00122\ \ \ \ \ \textcolor{keywordflow}{if}\ frame.shape[1]\ >\ 0\ \textcolor{keywordflow}{and}\ \textcolor{keywordflow}{not}\ any(}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00123}00123\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{not}\ isinstance(dt,\ np.dtype)\ \textcolor{keywordflow}{and}\ dt.\_supports\_2d\ \textcolor{keywordflow}{for}\ dt\ \textcolor{keywordflow}{in}\ frame.dtypes}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00124}00124\ \ \ \ \ ):}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00125}00125\ \ \ \ \ \ \ \ \ mdata[value\_name]\ =\ concat(}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00126}00126\ \ \ \ \ \ \ \ \ \ \ \ \ [frame.iloc[:,\ i]\ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(frame.shape[1])]}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00127}00127\ \ \ \ \ \ \ \ \ ).values}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00128}00128\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00129}00129\ \ \ \ \ \ \ \ \ mdata[value\_name]\ =\ frame.\_values.ravel(\textcolor{stringliteral}{"{}F"{}})}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00130}00130\ \ \ \ \ \textcolor{keywordflow}{for}\ i,\ col\ \textcolor{keywordflow}{in}\ enumerate(var\_name):}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00131}00131\ \ \ \ \ \ \ \ \ mdata[col]\ =\ frame.columns.\_get\_level\_values(i).repeat(num\_rows)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00132}00132\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00133}00133\ \ \ \ \ result\ =\ frame.\_constructor(mdata,\ columns=mcolumns)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00134}00134\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00135}00135\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ ignore\_index:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00136}00136\ \ \ \ \ \ \ \ \ result.index\ =\ tile\_compat(frame.index,\ num\_cols\_adjusted)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00137}00137\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00138}00138\ \ \ \ \ \textcolor{keywordflow}{return}\ result}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00139}00139\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00140}00140\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00141}\mbox{\hyperlink{namespacepandas_1_1core_1_1reshape_1_1melt_aad4d80a23db88ea521d3b1ddd340ed6b}{00141}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacepandas_1_1core_1_1reshape_1_1melt_aad4d80a23db88ea521d3b1ddd340ed6b}{lreshape}}(data:\ DataFrame,\ groups:\ dict,\ dropna:\ bool\ =\ \textcolor{keyword}{True})\ -\/>\ DataFrame:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00142}00142\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00143}00143\ \textcolor{stringliteral}{\ \ \ \ Reshape\ wide-\/format\ data\ to\ long.\ Generalized\ inverse\ of\ DataFrame.pivot.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00144}00144\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00145}00145\ \textcolor{stringliteral}{\ \ \ \ Accepts\ a\ dictionary,\ \`{}\`{}groups\`{}\`{},\ in\ which\ each\ key\ is\ a\ new\ column\ name}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00146}00146\ \textcolor{stringliteral}{\ \ \ \ and\ each\ value\ is\ a\ list\ of\ old\ column\ names\ that\ will\ be\ "{}melted"{}\ under}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00147}00147\ \textcolor{stringliteral}{\ \ \ \ the\ new\ column\ name\ as\ part\ of\ the\ reshape.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00148}00148\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00149}00149\ \textcolor{stringliteral}{\ \ \ \ Parameters}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00150}00150\ \textcolor{stringliteral}{\ \ \ \ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00151}00151\ \textcolor{stringliteral}{\ \ \ \ data\ :\ DataFrame}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00152}00152\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ The\ wide-\/format\ DataFrame.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00153}00153\ \textcolor{stringliteral}{\ \ \ \ groups\ :\ dict}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00154}00154\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \{new\_name\ :\ list\_of\_columns\}.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00155}00155\ \textcolor{stringliteral}{\ \ \ \ dropna\ :\ bool,\ default\ True}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00156}00156\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Do\ not\ include\ columns\ whose\ entries\ are\ all\ NaN.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00157}00157\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00158}00158\ \textcolor{stringliteral}{\ \ \ \ Returns}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00159}00159\ \textcolor{stringliteral}{\ \ \ \ -\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00160}00160\ \textcolor{stringliteral}{\ \ \ \ DataFrame}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00161}00161\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Reshaped\ DataFrame.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00162}00162\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00163}00163\ \textcolor{stringliteral}{\ \ \ \ See\ Also}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00164}00164\ \textcolor{stringliteral}{\ \ \ \ -\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00165}00165\ \textcolor{stringliteral}{\ \ \ \ melt\ :\ Unpivot\ a\ DataFrame\ from\ wide\ to\ long\ format,\ optionally\ leaving}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00166}00166\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ identifiers\ set.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00167}00167\ \textcolor{stringliteral}{\ \ \ \ pivot\ :\ Create\ a\ spreadsheet-\/style\ pivot\ table\ as\ a\ DataFrame.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00168}00168\ \textcolor{stringliteral}{\ \ \ \ DataFrame.pivot\ :\ Pivot\ without\ aggregation\ that\ can\ handle}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00169}00169\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ non-\/numeric\ data.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00170}00170\ \textcolor{stringliteral}{\ \ \ \ DataFrame.pivot\_table\ :\ Generalization\ of\ pivot\ that\ can\ handle}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00171}00171\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ duplicate\ values\ for\ one\ index/column\ pair.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00172}00172\ \textcolor{stringliteral}{\ \ \ \ DataFrame.unstack\ :\ Pivot\ based\ on\ the\ index\ values\ instead\ of\ a}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00173}00173\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ column.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00174}00174\ \textcolor{stringliteral}{\ \ \ \ wide\_to\_long\ :\ Wide\ panel\ to\ long\ format.\ Less\ flexible\ but\ more}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00175}00175\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ user-\/friendly\ than\ melt.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00176}00176\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00177}00177\ \textcolor{stringliteral}{\ \ \ \ Examples}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00178}00178\ \textcolor{stringliteral}{\ \ \ \ -\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00179}00179\ \textcolor{stringliteral}{\ \ \ \ >>>\ data\ =\ pd.DataFrame(\{'hr1':\ [514,\ 573],\ 'hr2':\ [545,\ 526],}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00180}00180\ \textcolor{stringliteral}{\ \ \ \ ...\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 'team':\ ['Red\ Sox',\ 'Yankees'],}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00181}00181\ \textcolor{stringliteral}{\ \ \ \ ...\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 'year1':\ [2007,\ 2007],\ 'year2':\ [2008,\ 2008]\})}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00182}00182\ \textcolor{stringliteral}{\ \ \ \ >>>\ data}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00183}00183\ \textcolor{stringliteral}{\ \ \ \ \ \ \ hr1\ \ hr2\ \ \ \ \ team\ \ year1\ \ year2}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00184}00184\ \textcolor{stringliteral}{\ \ \ \ 0\ \ 514\ \ 545\ \ Red\ Sox\ \ \ 2007\ \ \ 2008}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00185}00185\ \textcolor{stringliteral}{\ \ \ \ 1\ \ 573\ \ 526\ \ Yankees\ \ \ 2007\ \ \ 2008}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00186}00186\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00187}00187\ \textcolor{stringliteral}{\ \ \ \ >>>\ pd.lreshape(data,\ \{'year':\ ['year1',\ 'year2'],\ 'hr':\ ['hr1',\ 'hr2']\})}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00188}00188\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ team\ \ year\ \ \ hr}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00189}00189\ \textcolor{stringliteral}{\ \ \ \ 0\ \ Red\ Sox\ \ 2007\ \ 514}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00190}00190\ \textcolor{stringliteral}{\ \ \ \ 1\ \ Yankees\ \ 2007\ \ 573}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00191}00191\ \textcolor{stringliteral}{\ \ \ \ 2\ \ Red\ Sox\ \ 2008\ \ 545}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00192}00192\ \textcolor{stringliteral}{\ \ \ \ 3\ \ Yankees\ \ 2008\ \ 526}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00193}00193\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00194}00194\ \ \ \ \ mdata\ =\ \{\}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00195}00195\ \ \ \ \ pivot\_cols\ =\ []}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00196}00196\ \ \ \ \ all\_cols:\ set[Hashable]\ =\ set()}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00197}00197\ \ \ \ \ K\ =\ len(next(iter(groups.values())))}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00198}00198\ \ \ \ \ \textcolor{keywordflow}{for}\ target,\ names\ \textcolor{keywordflow}{in}\ groups.items():}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00199}00199\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ len(names)\ !=\ K:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00200}00200\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classValueError}{ValueError}}(\textcolor{stringliteral}{"{}All\ column\ lists\ must\ be\ same\ length"{}})}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00201}00201\ \ \ \ \ \ \ \ \ to\_concat\ =\ [data[col].\_values\ \textcolor{keywordflow}{for}\ col\ \textcolor{keywordflow}{in}\ names]}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00202}00202\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00203}00203\ \ \ \ \ \ \ \ \ mdata[target]\ =\ concat\_compat(to\_concat)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00204}00204\ \ \ \ \ \ \ \ \ pivot\_cols.append(target)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00205}00205\ \ \ \ \ \ \ \ \ all\_cols\ =\ all\_cols.union(names)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00206}00206\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00207}00207\ \ \ \ \ id\_cols\ =\ list(data.columns.difference(all\_cols))}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00208}00208\ \ \ \ \ \textcolor{keywordflow}{for}\ col\ \textcolor{keywordflow}{in}\ id\_cols:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00209}00209\ \ \ \ \ \ \ \ \ mdata[col]\ =\ np.tile(data[col].\_values,\ K)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00210}00210\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00211}00211\ \ \ \ \ \textcolor{keywordflow}{if}\ dropna:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00212}00212\ \ \ \ \ \ \ \ \ mask\ =\ np.ones(len(mdata[pivot\_cols[0]]),\ dtype=bool)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00213}00213\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ c\ \textcolor{keywordflow}{in}\ pivot\_cols:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00214}00214\ \ \ \ \ \ \ \ \ \ \ \ \ mask\ \&=\ notna(mdata[c])}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00215}00215\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ mask.all():}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00216}00216\ \ \ \ \ \ \ \ \ \ \ \ \ mdata\ =\ \{k:\ v[mask]\ \textcolor{keywordflow}{for}\ k,\ v\ \textcolor{keywordflow}{in}\ mdata.items()\}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00217}00217\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00218}00218\ \ \ \ \ \textcolor{keywordflow}{return}\ data.\_constructor(mdata,\ columns=id\_cols\ +\ pivot\_cols)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00219}00219\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00220}00220\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00221}\mbox{\hyperlink{namespacepandas_1_1core_1_1reshape_1_1melt_a7005874473834f62d0455a09783f0185}{00221}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacepandas_1_1core_1_1reshape_1_1melt_a7005874473834f62d0455a09783f0185}{wide\_to\_long}}(}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00222}00222\ \ \ \ \ df:\ DataFrame,\ stubnames,\ i,\ j,\ sep:\ str\ =\ \textcolor{stringliteral}{"{}"{}},\ suffix:\ str\ =\ \textcolor{stringliteral}{r"{}\(\backslash\)d+"{}}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00223}00223\ )\ -\/>\ DataFrame:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00224}00224\ \ \ \ \ \textcolor{stringliteral}{r"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00225}00225\ \textcolor{stringliteral}{\ \ \ \ Unpivot\ a\ DataFrame\ from\ wide\ to\ long\ format.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00226}00226\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00227}00227\ \textcolor{stringliteral}{\ \ \ \ Less\ flexible\ but\ more\ user-\/friendly\ than\ melt.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00228}00228\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00229}00229\ \textcolor{stringliteral}{\ \ \ \ With\ stubnames\ ['A',\ 'B'],\ this\ function\ expects\ to\ find\ one\ or\ more}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00230}00230\ \textcolor{stringliteral}{\ \ \ \ group\ of\ columns\ with\ format}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00231}00231\ \textcolor{stringliteral}{\ \ \ \ A-\/suffix1,\ A-\/suffix2,...,\ B-\/suffix1,\ B-\/suffix2,...}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00232}00232\ \textcolor{stringliteral}{\ \ \ \ You\ specify\ what\ you\ want\ to\ call\ this\ suffix\ in\ the\ resulting\ long\ format}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00233}00233\ \textcolor{stringliteral}{\ \ \ \ with\ \`{}j\`{}\ (for\ example\ \`{}j='year'\`{})}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00234}00234\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00235}00235\ \textcolor{stringliteral}{\ \ \ \ Each\ row\ of\ these\ wide\ variables\ are\ assumed\ to\ be\ uniquely\ identified\ by}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00236}00236\ \textcolor{stringliteral}{\ \ \ \ \`{}i\`{}\ (can\ be\ a\ single\ column\ name\ or\ a\ list\ of\ column\ names)}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00237}00237\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00238}00238\ \textcolor{stringliteral}{\ \ \ \ All\ remaining\ variables\ in\ the\ data\ frame\ are\ left\ intact.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00239}00239\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00240}00240\ \textcolor{stringliteral}{\ \ \ \ Parameters}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00241}00241\ \textcolor{stringliteral}{\ \ \ \ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00242}00242\ \textcolor{stringliteral}{\ \ \ \ df\ :\ DataFrame}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00243}00243\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ The\ wide-\/format\ DataFrame.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00244}00244\ \textcolor{stringliteral}{\ \ \ \ stubnames\ :\ str\ or\ list-\/like}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00245}00245\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ The\ stub\ name(s).\ The\ wide\ format\ variables\ are\ assumed\ to}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00246}00246\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ start\ with\ the\ stub\ names.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00247}00247\ \textcolor{stringliteral}{\ \ \ \ i\ :\ str\ or\ list-\/like}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00248}00248\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Column(s)\ to\ use\ as\ id\ variable(s).}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00249}00249\ \textcolor{stringliteral}{\ \ \ \ j\ :\ str}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00250}00250\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ The\ name\ of\ the\ sub-\/observation\ variable.\ What\ you\ wish\ to\ name\ your}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00251}00251\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ suffix\ in\ the\ long\ format.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00252}00252\ \textcolor{stringliteral}{\ \ \ \ sep\ :\ str,\ default\ "{}"{}}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00253}00253\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ A\ character\ indicating\ the\ separation\ of\ the\ variable\ names}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00254}00254\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ in\ the\ wide\ format,\ to\ be\ stripped\ from\ the\ names\ in\ the\ long\ format.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00255}00255\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ For\ example,\ if\ your\ column\ names\ are\ A-\/suffix1,\ A-\/suffix2,\ you}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00256}00256\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ can\ strip\ the\ hyphen\ by\ specifying\ \`{}sep='-\/'\`{}.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00257}00257\ \textcolor{stringliteral}{\ \ \ \ suffix\ :\ str,\ default\ '\(\backslash\)\(\backslash\)d+'}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00258}00258\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ A\ regular\ expression\ capturing\ the\ wanted\ suffixes.\ '\(\backslash\)\(\backslash\)d+'\ captures}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00259}00259\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ numeric\ suffixes.\ Suffixes\ with\ no\ numbers\ could\ be\ specified\ with\ the}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00260}00260\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ negated\ character\ class\ '\(\backslash\)\(\backslash\)D+'.\ You\ can\ also\ further\ disambiguate}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00261}00261\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ suffixes,\ for\ example,\ if\ your\ wide\ variables\ are\ of\ the\ form\ A-\/one,}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00262}00262\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ B-\/two,..,\ and\ you\ have\ an\ unrelated\ column\ A-\/rating,\ you\ can\ ignore\ the}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00263}00263\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ last\ one\ by\ specifying\ \`{}suffix='(!?one|two)'\`{}.\ When\ all\ suffixes\ are}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00264}00264\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ numeric,\ they\ are\ cast\ to\ int64/float64.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00265}00265\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00266}00266\ \textcolor{stringliteral}{\ \ \ \ Returns}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00267}00267\ \textcolor{stringliteral}{\ \ \ \ -\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00268}00268\ \textcolor{stringliteral}{\ \ \ \ DataFrame}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00269}00269\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ A\ DataFrame\ that\ contains\ each\ stub\ name\ as\ a\ variable,\ with\ new\ index}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00270}00270\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ (i,\ j).}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00271}00271\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00272}00272\ \textcolor{stringliteral}{\ \ \ \ See\ Also}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00273}00273\ \textcolor{stringliteral}{\ \ \ \ -\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00274}00274\ \textcolor{stringliteral}{\ \ \ \ melt\ :\ Unpivot\ a\ DataFrame\ from\ wide\ to\ long\ format,\ optionally\ leaving}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00275}00275\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ identifiers\ set.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00276}00276\ \textcolor{stringliteral}{\ \ \ \ pivot\ :\ Create\ a\ spreadsheet-\/style\ pivot\ table\ as\ a\ DataFrame.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00277}00277\ \textcolor{stringliteral}{\ \ \ \ DataFrame.pivot\ :\ Pivot\ without\ aggregation\ that\ can\ handle}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00278}00278\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ non-\/numeric\ data.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00279}00279\ \textcolor{stringliteral}{\ \ \ \ DataFrame.pivot\_table\ :\ Generalization\ of\ pivot\ that\ can\ handle}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00280}00280\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ duplicate\ values\ for\ one\ index/column\ pair.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00281}00281\ \textcolor{stringliteral}{\ \ \ \ DataFrame.unstack\ :\ Pivot\ based\ on\ the\ index\ values\ instead\ of\ a}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00282}00282\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ column.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00283}00283\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00284}00284\ \textcolor{stringliteral}{\ \ \ \ Notes}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00285}00285\ \textcolor{stringliteral}{\ \ \ \ -\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00286}00286\ \textcolor{stringliteral}{\ \ \ \ All\ extra\ variables\ are\ left\ untouched.\ This\ simply\ uses}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00287}00287\ \textcolor{stringliteral}{\ \ \ \ \`{}pandas.melt\`{}\ under\ the\ hood,\ but\ is\ hard-\/coded\ to\ "{}do\ the\ right\ thing"{}}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00288}00288\ \textcolor{stringliteral}{\ \ \ \ in\ a\ typical\ case.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00289}00289\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00290}00290\ \textcolor{stringliteral}{\ \ \ \ Examples}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00291}00291\ \textcolor{stringliteral}{\ \ \ \ -\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00292}00292\ \textcolor{stringliteral}{\ \ \ \ >>>\ np.random.seed(123)}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00293}00293\ \textcolor{stringliteral}{\ \ \ \ >>>\ df\ =\ pd.DataFrame(\{"{}A1970"{}\ :\ \{0\ :\ "{}a"{},\ 1\ :\ "{}b"{},\ 2\ :\ "{}c"{}\},}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00294}00294\ \textcolor{stringliteral}{\ \ \ \ ...\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}A1980"{}\ :\ \{0\ :\ "{}d"{},\ 1\ :\ "{}e"{},\ 2\ :\ "{}f"{}\},}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00295}00295\ \textcolor{stringliteral}{\ \ \ \ ...\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}B1970"{}\ :\ \{0\ :\ 2.5,\ 1\ :\ 1.2,\ 2\ :\ .7\},}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00296}00296\ \textcolor{stringliteral}{\ \ \ \ ...\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}B1980"{}\ :\ \{0\ :\ 3.2,\ 1\ :\ 1.3,\ 2\ :\ .1\},}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00297}00297\ \textcolor{stringliteral}{\ \ \ \ ...\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}X"{}\ \ \ \ \ :\ dict(zip(range(3),\ np.random.randn(3)))}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00298}00298\ \textcolor{stringliteral}{\ \ \ \ ...\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \})}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00299}00299\ \textcolor{stringliteral}{\ \ \ \ >>>\ df["{}id"{}]\ =\ df.index}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00300}00300\ \textcolor{stringliteral}{\ \ \ \ >>>\ df}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00301}00301\ \textcolor{stringliteral}{\ \ \ \ \ \ A1970\ A1980\ \ B1970\ \ B1980\ \ \ \ \ \ \ \ \ X\ \ id}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00302}00302\ \textcolor{stringliteral}{\ \ \ \ 0\ \ \ \ \ a\ \ \ \ \ d\ \ \ \ 2.5\ \ \ \ 3.2\ -\/1.085631\ \ \ 0}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00303}00303\ \textcolor{stringliteral}{\ \ \ \ 1\ \ \ \ \ b\ \ \ \ \ e\ \ \ \ 1.2\ \ \ \ 1.3\ \ 0.997345\ \ \ 1}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00304}00304\ \textcolor{stringliteral}{\ \ \ \ 2\ \ \ \ \ c\ \ \ \ \ f\ \ \ \ 0.7\ \ \ \ 0.1\ \ 0.282978\ \ \ 2}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00305}00305\ \textcolor{stringliteral}{\ \ \ \ >>>\ pd.wide\_to\_long(df,\ ["{}A"{},\ "{}B"{}],\ i="{}id"{},\ j="{}year"{})}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00306}00306\ \textcolor{stringliteral}{\ \ \ \ ...\ \#\ doctest:\ +NORMALIZE\_WHITESPACE}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00307}00307\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ X\ \ A\ \ \ \ B}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00308}00308\ \textcolor{stringliteral}{\ \ \ \ id\ year}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00309}00309\ \textcolor{stringliteral}{\ \ \ \ 0\ \ 1970\ -\/1.085631\ \ a\ \ 2.5}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00310}00310\ \textcolor{stringliteral}{\ \ \ \ 1\ \ 1970\ \ 0.997345\ \ b\ \ 1.2}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00311}00311\ \textcolor{stringliteral}{\ \ \ \ 2\ \ 1970\ \ 0.282978\ \ c\ \ 0.7}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00312}00312\ \textcolor{stringliteral}{\ \ \ \ 0\ \ 1980\ -\/1.085631\ \ d\ \ 3.2}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00313}00313\ \textcolor{stringliteral}{\ \ \ \ 1\ \ 1980\ \ 0.997345\ \ e\ \ 1.3}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00314}00314\ \textcolor{stringliteral}{\ \ \ \ 2\ \ 1980\ \ 0.282978\ \ f\ \ 0.1}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00315}00315\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00316}00316\ \textcolor{stringliteral}{\ \ \ \ With\ multiple\ id\ columns}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00317}00317\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00318}00318\ \textcolor{stringliteral}{\ \ \ \ >>>\ df\ =\ pd.DataFrame(\{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00319}00319\ \textcolor{stringliteral}{\ \ \ \ ...\ \ \ \ \ 'famid':\ [1,\ 1,\ 1,\ 2,\ 2,\ 2,\ 3,\ 3,\ 3],}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00320}00320\ \textcolor{stringliteral}{\ \ \ \ ...\ \ \ \ \ 'birth':\ [1,\ 2,\ 3,\ 1,\ 2,\ 3,\ 1,\ 2,\ 3],}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00321}00321\ \textcolor{stringliteral}{\ \ \ \ ...\ \ \ \ \ 'ht1':\ [2.8,\ 2.9,\ 2.2,\ 2,\ 1.8,\ 1.9,\ 2.2,\ 2.3,\ 2.1],}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00322}00322\ \textcolor{stringliteral}{\ \ \ \ ...\ \ \ \ \ 'ht2':\ [3.4,\ 3.8,\ 2.9,\ 3.2,\ 2.8,\ 2.4,\ 3.3,\ 3.4,\ 2.9]}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00323}00323\ \textcolor{stringliteral}{\ \ \ \ ...\ \})}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00324}00324\ \textcolor{stringliteral}{\ \ \ \ >>>\ df}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00325}00325\ \textcolor{stringliteral}{\ \ \ \ \ \ \ famid\ \ birth\ \ ht1\ \ ht2}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00326}00326\ \textcolor{stringliteral}{\ \ \ \ 0\ \ \ \ \ \ 1\ \ \ \ \ \ 1\ \ 2.8\ \ 3.4}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00327}00327\ \textcolor{stringliteral}{\ \ \ \ 1\ \ \ \ \ \ 1\ \ \ \ \ \ 2\ \ 2.9\ \ 3.8}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00328}00328\ \textcolor{stringliteral}{\ \ \ \ 2\ \ \ \ \ \ 1\ \ \ \ \ \ 3\ \ 2.2\ \ 2.9}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00329}00329\ \textcolor{stringliteral}{\ \ \ \ 3\ \ \ \ \ \ 2\ \ \ \ \ \ 1\ \ 2.0\ \ 3.2}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00330}00330\ \textcolor{stringliteral}{\ \ \ \ 4\ \ \ \ \ \ 2\ \ \ \ \ \ 2\ \ 1.8\ \ 2.8}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00331}00331\ \textcolor{stringliteral}{\ \ \ \ 5\ \ \ \ \ \ 2\ \ \ \ \ \ 3\ \ 1.9\ \ 2.4}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00332}00332\ \textcolor{stringliteral}{\ \ \ \ 6\ \ \ \ \ \ 3\ \ \ \ \ \ 1\ \ 2.2\ \ 3.3}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00333}00333\ \textcolor{stringliteral}{\ \ \ \ 7\ \ \ \ \ \ 3\ \ \ \ \ \ 2\ \ 2.3\ \ 3.4}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00334}00334\ \textcolor{stringliteral}{\ \ \ \ 8\ \ \ \ \ \ 3\ \ \ \ \ \ 3\ \ 2.1\ \ 2.9}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00335}00335\ \textcolor{stringliteral}{\ \ \ \ >>>\ l\ =\ pd.wide\_to\_long(df,\ stubnames='ht',\ i=['famid',\ 'birth'],\ j='age')}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00336}00336\ \textcolor{stringliteral}{\ \ \ \ >>>\ l}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00337}00337\ \textcolor{stringliteral}{\ \ \ \ ...\ \#\ doctest:\ +NORMALIZE\_WHITESPACE}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00338}00338\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ht}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00339}00339\ \textcolor{stringliteral}{\ \ \ \ famid\ birth\ age}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00340}00340\ \textcolor{stringliteral}{\ \ \ \ 1\ \ \ \ \ 1\ \ \ \ \ 1\ \ \ \ 2.8}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00341}00341\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 2\ \ \ \ 3.4}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00342}00342\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ 2\ \ \ \ \ 1\ \ \ \ 2.9}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00343}00343\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 2\ \ \ \ 3.8}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00344}00344\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ 3\ \ \ \ \ 1\ \ \ \ 2.2}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00345}00345\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 2\ \ \ \ 2.9}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00346}00346\ \textcolor{stringliteral}{\ \ \ \ 2\ \ \ \ \ 1\ \ \ \ \ 1\ \ \ \ 2.0}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00347}00347\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 2\ \ \ \ 3.2}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00348}00348\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ 2\ \ \ \ \ 1\ \ \ \ 1.8}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00349}00349\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 2\ \ \ \ 2.8}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00350}00350\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ 3\ \ \ \ \ 1\ \ \ \ 1.9}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00351}00351\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 2\ \ \ \ 2.4}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00352}00352\ \textcolor{stringliteral}{\ \ \ \ 3\ \ \ \ \ 1\ \ \ \ \ 1\ \ \ \ 2.2}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00353}00353\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 2\ \ \ \ 3.3}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00354}00354\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ 2\ \ \ \ \ 1\ \ \ \ 2.3}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00355}00355\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 2\ \ \ \ 3.4}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00356}00356\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ 3\ \ \ \ \ 1\ \ \ \ 2.1}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00357}00357\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 2\ \ \ \ 2.9}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00358}00358\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00359}00359\ \textcolor{stringliteral}{\ \ \ \ Going\ from\ long\ back\ to\ wide\ just\ takes\ some\ creative\ use\ of\ \`{}unstack\`{}}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00360}00360\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00361}00361\ \textcolor{stringliteral}{\ \ \ \ >>>\ w\ =\ l.unstack()}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00362}00362\ \textcolor{stringliteral}{\ \ \ \ >>>\ w.columns\ =\ w.columns.map('\{0[0]\}\{0[1]\}'.format)}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00363}00363\ \textcolor{stringliteral}{\ \ \ \ >>>\ w.reset\_index()}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00364}00364\ \textcolor{stringliteral}{\ \ \ \ \ \ \ famid\ \ birth\ \ ht1\ \ ht2}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00365}00365\ \textcolor{stringliteral}{\ \ \ \ 0\ \ \ \ \ \ 1\ \ \ \ \ \ 1\ \ 2.8\ \ 3.4}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00366}00366\ \textcolor{stringliteral}{\ \ \ \ 1\ \ \ \ \ \ 1\ \ \ \ \ \ 2\ \ 2.9\ \ 3.8}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00367}00367\ \textcolor{stringliteral}{\ \ \ \ 2\ \ \ \ \ \ 1\ \ \ \ \ \ 3\ \ 2.2\ \ 2.9}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00368}00368\ \textcolor{stringliteral}{\ \ \ \ 3\ \ \ \ \ \ 2\ \ \ \ \ \ 1\ \ 2.0\ \ 3.2}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00369}00369\ \textcolor{stringliteral}{\ \ \ \ 4\ \ \ \ \ \ 2\ \ \ \ \ \ 2\ \ 1.8\ \ 2.8}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00370}00370\ \textcolor{stringliteral}{\ \ \ \ 5\ \ \ \ \ \ 2\ \ \ \ \ \ 3\ \ 1.9\ \ 2.4}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00371}00371\ \textcolor{stringliteral}{\ \ \ \ 6\ \ \ \ \ \ 3\ \ \ \ \ \ 1\ \ 2.2\ \ 3.3}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00372}00372\ \textcolor{stringliteral}{\ \ \ \ 7\ \ \ \ \ \ 3\ \ \ \ \ \ 2\ \ 2.3\ \ 3.4}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00373}00373\ \textcolor{stringliteral}{\ \ \ \ 8\ \ \ \ \ \ 3\ \ \ \ \ \ 3\ \ 2.1\ \ 2.9}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00374}00374\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00375}00375\ \textcolor{stringliteral}{\ \ \ \ Less\ wieldy\ column\ names\ are\ also\ handled}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00376}00376\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00377}00377\ \textcolor{stringliteral}{\ \ \ \ >>>\ np.random.seed(0)}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00378}00378\ \textcolor{stringliteral}{\ \ \ \ >>>\ df\ =\ pd.DataFrame(\{'A(weekly)-\/2010':\ np.random.rand(3),}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00379}00379\ \textcolor{stringliteral}{\ \ \ \ ...\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 'A(weekly)-\/2011':\ np.random.rand(3),}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00380}00380\ \textcolor{stringliteral}{\ \ \ \ ...\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 'B(weekly)-\/2010':\ np.random.rand(3),}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00381}00381\ \textcolor{stringliteral}{\ \ \ \ ...\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 'B(weekly)-\/2011':\ np.random.rand(3),}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00382}00382\ \textcolor{stringliteral}{\ \ \ \ ...\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 'X'\ :\ np.random.randint(3,\ size=3)\})}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00383}00383\ \textcolor{stringliteral}{\ \ \ \ >>>\ df['id']\ =\ df.index}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00384}00384\ \textcolor{stringliteral}{\ \ \ \ >>>\ df\ \#\ doctest:\ +NORMALIZE\_WHITESPACE,\ +ELLIPSIS}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00385}00385\ \textcolor{stringliteral}{\ \ \ \ \ \ \ A(weekly)-\/2010\ \ A(weekly)-\/2011\ \ B(weekly)-\/2010\ \ B(weekly)-\/2011\ \ X\ \ id}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00386}00386\ \textcolor{stringliteral}{\ \ \ \ 0\ \ \ \ \ \ \ \ 0.548814\ \ \ \ \ \ \ \ 0.544883\ \ \ \ \ \ \ \ 0.437587\ \ \ \ \ \ \ \ 0.383442\ \ 0\ \ \ 0}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00387}00387\ \textcolor{stringliteral}{\ \ \ \ 1\ \ \ \ \ \ \ \ 0.715189\ \ \ \ \ \ \ \ 0.423655\ \ \ \ \ \ \ \ 0.891773\ \ \ \ \ \ \ \ 0.791725\ \ 1\ \ \ 1}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00388}00388\ \textcolor{stringliteral}{\ \ \ \ 2\ \ \ \ \ \ \ \ 0.602763\ \ \ \ \ \ \ \ 0.645894\ \ \ \ \ \ \ \ 0.963663\ \ \ \ \ \ \ \ 0.528895\ \ 1\ \ \ 2}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00389}00389\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00390}00390\ \textcolor{stringliteral}{\ \ \ \ >>>\ pd.wide\_to\_long(df,\ ['A(weekly)',\ 'B(weekly)'],\ i='id',}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00391}00391\ \textcolor{stringliteral}{\ \ \ \ ...\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ j='year',\ sep='-\/')}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00392}00392\ \textcolor{stringliteral}{\ \ \ \ ...\ \#\ doctest:\ +NORMALIZE\_WHITESPACE}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00393}00393\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ X\ \ A(weekly)\ \ B(weekly)}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00394}00394\ \textcolor{stringliteral}{\ \ \ \ id\ year}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00395}00395\ \textcolor{stringliteral}{\ \ \ \ 0\ \ 2010\ \ 0\ \ \ 0.548814\ \ \ 0.437587}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00396}00396\ \textcolor{stringliteral}{\ \ \ \ 1\ \ 2010\ \ 1\ \ \ 0.715189\ \ \ 0.891773}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00397}00397\ \textcolor{stringliteral}{\ \ \ \ 2\ \ 2010\ \ 1\ \ \ 0.602763\ \ \ 0.963663}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00398}00398\ \textcolor{stringliteral}{\ \ \ \ 0\ \ 2011\ \ 0\ \ \ 0.544883\ \ \ 0.383442}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00399}00399\ \textcolor{stringliteral}{\ \ \ \ 1\ \ 2011\ \ 1\ \ \ 0.423655\ \ \ 0.791725}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00400}00400\ \textcolor{stringliteral}{\ \ \ \ 2\ \ 2011\ \ 1\ \ \ 0.645894\ \ \ 0.528895}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00401}00401\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00402}00402\ \textcolor{stringliteral}{\ \ \ \ If\ we\ have\ many\ columns,\ we\ could\ also\ use\ a\ regex\ to\ find\ our}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00403}00403\ \textcolor{stringliteral}{\ \ \ \ stubnames\ and\ pass\ that\ list\ on\ to\ wide\_to\_long}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00404}00404\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00405}00405\ \textcolor{stringliteral}{\ \ \ \ >>>\ stubnames\ =\ sorted(}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00406}00406\ \textcolor{stringliteral}{\ \ \ \ ...\ \ \ \ \ set([match[0]\ for\ match\ in\ df.columns.str.findall(}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00407}00407\ \textcolor{stringliteral}{\ \ \ \ ...\ \ \ \ \ \ \ \ \ r'[A-\/B]\(\backslash\)(.*\(\backslash\))').values\ if\ match\ !=\ []])}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00408}00408\ \textcolor{stringliteral}{\ \ \ \ ...\ )}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00409}00409\ \textcolor{stringliteral}{\ \ \ \ >>>\ list(stubnames)}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00410}00410\ \textcolor{stringliteral}{\ \ \ \ ['A(weekly)',\ 'B(weekly)']}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00411}00411\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00412}00412\ \textcolor{stringliteral}{\ \ \ \ All\ of\ the\ above\ examples\ have\ integers\ as\ suffixes.\ It\ is\ possible\ to}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00413}00413\ \textcolor{stringliteral}{\ \ \ \ have\ non-\/integers\ as\ suffixes.}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00414}00414\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00415}00415\ \textcolor{stringliteral}{\ \ \ \ >>>\ df\ =\ pd.DataFrame(\{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00416}00416\ \textcolor{stringliteral}{\ \ \ \ ...\ \ \ \ \ 'famid':\ [1,\ 1,\ 1,\ 2,\ 2,\ 2,\ 3,\ 3,\ 3],}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00417}00417\ \textcolor{stringliteral}{\ \ \ \ ...\ \ \ \ \ 'birth':\ [1,\ 2,\ 3,\ 1,\ 2,\ 3,\ 1,\ 2,\ 3],}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00418}00418\ \textcolor{stringliteral}{\ \ \ \ ...\ \ \ \ \ 'ht\_one':\ [2.8,\ 2.9,\ 2.2,\ 2,\ 1.8,\ 1.9,\ 2.2,\ 2.3,\ 2.1],}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00419}00419\ \textcolor{stringliteral}{\ \ \ \ ...\ \ \ \ \ 'ht\_two':\ [3.4,\ 3.8,\ 2.9,\ 3.2,\ 2.8,\ 2.4,\ 3.3,\ 3.4,\ 2.9]}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00420}00420\ \textcolor{stringliteral}{\ \ \ \ ...\ \})}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00421}00421\ \textcolor{stringliteral}{\ \ \ \ >>>\ df}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00422}00422\ \textcolor{stringliteral}{\ \ \ \ \ \ \ famid\ \ birth\ \ ht\_one\ \ ht\_two}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00423}00423\ \textcolor{stringliteral}{\ \ \ \ 0\ \ \ \ \ \ 1\ \ \ \ \ \ 1\ \ \ \ \ 2.8\ \ \ \ \ 3.4}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00424}00424\ \textcolor{stringliteral}{\ \ \ \ 1\ \ \ \ \ \ 1\ \ \ \ \ \ 2\ \ \ \ \ 2.9\ \ \ \ \ 3.8}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00425}00425\ \textcolor{stringliteral}{\ \ \ \ 2\ \ \ \ \ \ 1\ \ \ \ \ \ 3\ \ \ \ \ 2.2\ \ \ \ \ 2.9}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00426}00426\ \textcolor{stringliteral}{\ \ \ \ 3\ \ \ \ \ \ 2\ \ \ \ \ \ 1\ \ \ \ \ 2.0\ \ \ \ \ 3.2}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00427}00427\ \textcolor{stringliteral}{\ \ \ \ 4\ \ \ \ \ \ 2\ \ \ \ \ \ 2\ \ \ \ \ 1.8\ \ \ \ \ 2.8}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00428}00428\ \textcolor{stringliteral}{\ \ \ \ 5\ \ \ \ \ \ 2\ \ \ \ \ \ 3\ \ \ \ \ 1.9\ \ \ \ \ 2.4}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00429}00429\ \textcolor{stringliteral}{\ \ \ \ 6\ \ \ \ \ \ 3\ \ \ \ \ \ 1\ \ \ \ \ 2.2\ \ \ \ \ 3.3}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00430}00430\ \textcolor{stringliteral}{\ \ \ \ 7\ \ \ \ \ \ 3\ \ \ \ \ \ 2\ \ \ \ \ 2.3\ \ \ \ \ 3.4}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00431}00431\ \textcolor{stringliteral}{\ \ \ \ 8\ \ \ \ \ \ 3\ \ \ \ \ \ 3\ \ \ \ \ 2.1\ \ \ \ \ 2.9}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00432}00432\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00433}00433\ \textcolor{stringliteral}{\ \ \ \ >>>\ l\ =\ pd.wide\_to\_long(df,\ stubnames='ht',\ i=['famid',\ 'birth'],\ j='age',}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00434}00434\ \textcolor{stringliteral}{\ \ \ \ ...\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sep='\_',\ suffix=r'\(\backslash\)w+')}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00435}00435\ \textcolor{stringliteral}{\ \ \ \ >>>\ l}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00436}00436\ \textcolor{stringliteral}{\ \ \ \ ...\ \#\ doctest:\ +NORMALIZE\_WHITESPACE}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00437}00437\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ht}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00438}00438\ \textcolor{stringliteral}{\ \ \ \ famid\ birth\ age}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00439}00439\ \textcolor{stringliteral}{\ \ \ \ 1\ \ \ \ \ 1\ \ \ \ \ one\ \ 2.8}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00440}00440\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ two\ \ 3.4}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00441}00441\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ 2\ \ \ \ \ one\ \ 2.9}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00442}00442\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ two\ \ 3.8}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00443}00443\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ 3\ \ \ \ \ one\ \ 2.2}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00444}00444\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ two\ \ 2.9}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00445}00445\ \textcolor{stringliteral}{\ \ \ \ 2\ \ \ \ \ 1\ \ \ \ \ one\ \ 2.0}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00446}00446\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ two\ \ 3.2}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00447}00447\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ 2\ \ \ \ \ one\ \ 1.8}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00448}00448\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ two\ \ 2.8}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00449}00449\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ 3\ \ \ \ \ one\ \ 1.9}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00450}00450\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ two\ \ 2.4}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00451}00451\ \textcolor{stringliteral}{\ \ \ \ 3\ \ \ \ \ 1\ \ \ \ \ one\ \ 2.2}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00452}00452\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ two\ \ 3.3}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00453}00453\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ 2\ \ \ \ \ one\ \ 2.3}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00454}00454\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ two\ \ 3.4}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00455}00455\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ 3\ \ \ \ \ one\ \ 2.1}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00456}00456\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ two\ \ 2.9}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00457}00457\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00458}00458\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00459}00459\ \ \ \ \ \textcolor{keyword}{def\ }get\_var\_names(df,\ stub:\ str,\ sep:\ str,\ suffix:\ str):}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00460}00460\ \ \ \ \ \ \ \ \ regex\ =\ rf\textcolor{stringliteral}{"{}\string^\{re.escape(stub)\}\{re.escape(sep)\}\{suffix\}\$"{}}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00461}00461\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ df.columns[df.columns.str.match(regex)]}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00462}00462\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00463}00463\ \ \ \ \ \textcolor{keyword}{def\ }melt\_stub(df,\ stub:\ str,\ i,\ j,\ value\_vars,\ sep:\ str):}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00464}00464\ \ \ \ \ \ \ \ \ newdf\ =\ melt(}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00465}00465\ \ \ \ \ \ \ \ \ \ \ \ \ df,}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00466}00466\ \ \ \ \ \ \ \ \ \ \ \ \ id\_vars=i,}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00467}00467\ \ \ \ \ \ \ \ \ \ \ \ \ value\_vars=value\_vars,}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00468}00468\ \ \ \ \ \ \ \ \ \ \ \ \ value\_name=stub.rstrip(sep),}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00469}00469\ \ \ \ \ \ \ \ \ \ \ \ \ var\_name=j,}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00470}00470\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00471}00471\ \ \ \ \ \ \ \ \ newdf[j]\ =\ newdf[j].str.replace(re.escape(stub\ +\ sep),\ \textcolor{stringliteral}{"{}"{}},\ regex=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00472}00472\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00473}00473\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ GH17627\ Cast\ numerics\ suffixes\ to\ int/float}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00474}00474\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00475}00475\ \ \ \ \ \ \ \ \ \ \ \ \ newdf[j]\ =\ to\_numeric(newdf[j])}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00476}00476\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ (TypeError,\ ValueError,\ OverflowError):}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00477}00477\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ TODO:\ anything\ else\ to\ catch?}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00478}00478\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00479}00479\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00480}00480\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ newdf.set\_index(i\ +\ [j])}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00481}00481\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00482}00482\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ is\_list\_like(stubnames):}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00483}00483\ \ \ \ \ \ \ \ \ stubnames\ =\ [stubnames]}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00484}00484\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00485}00485\ \ \ \ \ \ \ \ \ stubnames\ =\ list(stubnames)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00486}00486\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00487}00487\ \ \ \ \ \textcolor{keywordflow}{if}\ df.columns.isin(stubnames).any():}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00488}00488\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classValueError}{ValueError}}(\textcolor{stringliteral}{"{}stubname\ can't\ be\ identical\ to\ a\ column\ name"{}})}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00489}00489\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00490}00490\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ is\_list\_like(i):}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00491}00491\ \ \ \ \ \ \ \ \ i\ =\ [i]}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00492}00492\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00493}00493\ \ \ \ \ \ \ \ \ i\ =\ list(i)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00494}00494\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00495}00495\ \ \ \ \ \textcolor{keywordflow}{if}\ df[i].duplicated().any():}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00496}00496\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classValueError}{ValueError}}(\textcolor{stringliteral}{"{}the\ id\ variables\ need\ to\ uniquely\ identify\ each\ row"{}})}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00497}00497\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00498}00498\ \ \ \ \ \_melted\ =\ []}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00499}00499\ \ \ \ \ value\_vars\_flattened\ =\ []}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00500}00500\ \ \ \ \ \textcolor{keywordflow}{for}\ stub\ \textcolor{keywordflow}{in}\ stubnames:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00501}00501\ \ \ \ \ \ \ \ \ value\_var\ =\ get\_var\_names(df,\ stub,\ sep,\ suffix)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00502}00502\ \ \ \ \ \ \ \ \ value\_vars\_flattened.extend(value\_var)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00503}00503\ \ \ \ \ \ \ \ \ \_melted.append(melt\_stub(df,\ stub,\ i,\ j,\ value\_var,\ sep))}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00504}00504\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00505}00505\ \ \ \ \ melted\ =\ concat(\_melted,\ axis=1)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00506}00506\ \ \ \ \ id\_vars\ =\ df.columns.difference(value\_vars\_flattened)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00507}00507\ \ \ \ \ new\ =\ df[id\_vars]}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00508}00508\ }
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00509}00509\ \ \ \ \ \textcolor{keywordflow}{if}\ len(i)\ ==\ 1:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00510}00510\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ new.set\_index(i).join(melted)}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00511}00511\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{melt_8py_source_l00512}00512\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ new.merge(melted.reset\_index(),\ on=i).set\_index(i\ +\ [j])}

\end{DoxyCode}
